"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[9147],{9147:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(9950),s=n(18518),r=n(53782),o=n(75658),c=n(44414);const i=()=>{const e=(0,s.Zp)(),{profile:t,repository:n,branch:i}=(0,r.N5)(),l=(0,o.f4)("dataElements"),d=null===t||void 0===t?void 0:t.login,h=null===n||void 0===n?void 0:n.name,[u,m]=(0,a.useState)([]),[j,b]=(0,a.useState)(!0),[v,p]=(0,a.useState)(null),[k,x]=(0,a.useState)(null),[y,w]=(0,a.useState)(!1),[f,D]=(0,a.useState)(""),[g,N]=(0,a.useState)(!1),[C,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=e=>{"Escape"===e.key&&y&&B()};if(y)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[y]);const O=(0,a.useCallback)(e=>{var t,a;const s=d||(null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.login)||(null===n||void 0===n||null===(a=n.full_name)||void 0===a?void 0:a.split("/")[0]),r=h||(null===n||void 0===n?void 0:n.name);return e===((null===n||void 0===n?void 0:n.default_branch)||"main")?"https://".concat(s,".github.io/").concat(r):"https://".concat(s,".github.io/").concat(r,"/branches/").concat(e)},[d,n,h]),E=(0,a.useCallback)(async()=>{if(d&&h&&i){A(!0);try{const e=O(i),t="".concat(e,"/dak.json"),n=await fetch(t);N(n.ok)}catch(e){N(!1)}finally{A(!1)}}},[d,h,i,O]),S=(0,a.useCallback)(async()=>{if(!l)return p("Data elements component not available"),void b(!1);b(!0),p(null);try{const e=await l.retrieveAll();m(e||[])}catch(e){console.error("Error loading data elements:",e),p(e.message||"Failed to load core data elements")}finally{b(!1)}},[l]);(0,a.useEffect)(()=>{l&&d&&h&&(S(),E())},[l,d,h,S,E]);const z=()=>{e("/")},K=()=>{if(d&&h){const t=i?"/dashboard/".concat(d,"/").concat(h,"/").concat(i):"/dashboard/".concat(d,"/").concat(h);e(t)}else e("/dashboard",{state:{selectedProfile:t,selectedRepository:n,selectedBranch:i}})},B=()=>{w(!1),x(null)},F=u.filter(e=>{var t,n,a,s;if(!f)return!0;const r=f.toLowerCase();return(null===(t=e.id)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(n=e.canonical)||void 0===n?void 0:n.toLowerCase().includes(r))||(null===(a=e.type)||void 0===a?void 0:a.toLowerCase().includes(r))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(r))});return j?(0,c.jsxs)("div",{className:"core-data-dictionary-container",children:[(0,c.jsxs)("div",{className:"core-data-dictionary-header",children:[(0,c.jsxs)("div",{className:"header-actions",children:[(0,c.jsx)("button",{onClick:z,className:"home-button",children:"\ud83c\udfe0 Home"}),(0,c.jsx)("button",{onClick:K,className:"back-button",children:"\u2190 Back to Dashboard"})]}),(0,c.jsx)("h1",{children:"Core Data Dictionary"}),(0,c.jsx)("p",{className:"header-subtitle",children:"Loading core data elements..."})]}),(0,c.jsxs)("div",{className:"loading-container",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("p",{children:"Loading core data elements from Component Object..."})]})]}):v?(0,c.jsxs)("div",{className:"core-data-dictionary-container",children:[(0,c.jsxs)("div",{className:"core-data-dictionary-header",children:[(0,c.jsxs)("div",{className:"header-actions",children:[(0,c.jsx)("button",{onClick:z,className:"home-button",children:"\ud83c\udfe0 Home"}),(0,c.jsx)("button",{onClick:K,className:"back-button",children:"\u2190 Back to Dashboard"})]}),(0,c.jsx)("h1",{children:"Core Data Dictionary"})]}),(0,c.jsxs)("div",{className:"error-container",children:[(0,c.jsxs)("p",{className:"error-message",children:["Error: ",v]}),(0,c.jsx)("button",{onClick:S,className:"retry-button",children:"Retry"})]})]}):(0,c.jsxs)("div",{className:"core-data-dictionary-container",children:[(0,c.jsxs)("div",{className:"core-data-dictionary-header",children:[(0,c.jsxs)("div",{className:"header-actions",children:[(0,c.jsx)("button",{onClick:z,className:"home-button",children:"\ud83c\udfe0 Home"}),(0,c.jsx)("button",{onClick:K,className:"back-button",children:"\u2190 Back to Dashboard"})]}),(0,c.jsx)("h1",{children:"Core Data Dictionary"}),(0,c.jsx)("p",{className:"header-subtitle",children:d&&h&&(0,c.jsxs)(c.Fragment,{children:["Repository: ",d,"/",h," ",i&&"(".concat(i,")")]})}),g&&(0,c.jsxs)("div",{className:"published-dak-banner",children:["\u2705 Published DAK available at"," ",(0,c.jsxs)("a",{href:"".concat(O(i),"/dak.json"),target:"_blank",rel:"noopener noreferrer",children:[O(i),"/dak.json"]})]})]}),(0,c.jsxs)("div",{className:"dictionary-content",children:[(0,c.jsxs)("div",{className:"search-section",children:[(0,c.jsx)("input",{type:"text",className:"search-input",placeholder:"Search data elements by ID, canonical, type, or description...",value:f,onChange:e=>D(e.target.value)}),(0,c.jsxs)("div",{className:"search-stats",children:["Showing ",F.length," of ",u.length," data elements"]})]}),0===F.length?(0,c.jsx)("div",{className:"no-elements",children:f?(0,c.jsx)("p",{children:"No data elements match your search criteria"}):(0,c.jsx)("p",{children:"No core data elements found in this repository"})}):(0,c.jsx)("div",{className:"elements-table-container",children:(0,c.jsxs)("table",{className:"elements-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"ID"}),(0,c.jsx)("th",{children:"Type"}),(0,c.jsx)("th",{children:"Canonical"}),(0,c.jsx)("th",{children:"Description"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:F.map((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"element-id",children:e.id||"N/A"}),(0,c.jsx)("td",{className:"element-type",children:(0,c.jsx)("span",{className:"type-badge type-".concat(e.type),children:e.type||"unknown"})}),(0,c.jsx)("td",{className:"element-canonical",children:e.canonical?(0,c.jsx)("a",{href:e.canonical,target:"_blank",rel:"noopener noreferrer",title:e.canonical,children:e.canonical}):"N/A"}),(0,c.jsx)("td",{className:"element-description",children:"string"===typeof e.description?e.description.substring(0,100)+(e.description.length>100?"...":""):"N/A"}),(0,c.jsx)("td",{className:"element-actions",children:(0,c.jsx)("button",{onClick:()=>(e=>{x(e),w(!0)})(e),className:"view-button",title:"View details",children:"View"})})]},e.id||t))})]})})]}),y&&k&&(0,c.jsx)("div",{className:"modal-overlay",onClick:B,children:(0,c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{children:"Core Data Element Details"}),(0,c.jsx)("button",{onClick:B,className:"modal-close",children:"\xd7"})]}),(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsxs)("div",{className:"element-detail",children:[(0,c.jsx)("strong",{children:"ID:"}),(0,c.jsx)("span",{children:k.id||"N/A"})]}),(0,c.jsxs)("div",{className:"element-detail",children:[(0,c.jsx)("strong",{children:"Type:"}),(0,c.jsx)("span",{className:"type-badge type-".concat(k.type),children:k.type||"unknown"})]}),(0,c.jsxs)("div",{className:"element-detail",children:[(0,c.jsx)("strong",{children:"Canonical:"}),k.canonical?(0,c.jsx)("a",{href:k.canonical,target:"_blank",rel:"noopener noreferrer",children:k.canonical}):(0,c.jsx)("span",{children:"N/A"})]}),(0,c.jsxs)("div",{className:"element-detail",children:[(0,c.jsx)("strong",{children:"Description:"}),(0,c.jsx)("div",{className:"element-description-full",children:"string"===typeof k.description?k.description:"object"===typeof k.description?(0,c.jsx)("a",{href:k.description.url,target:"_blank",rel:"noopener noreferrer",children:k.description.url}):"N/A"})]})]}),(0,c.jsx)("div",{className:"modal-footer",children:(0,c.jsx)("button",{onClick:B,className:"modal-close-button",children:"Close"})})]})})]})},l=()=>(0,c.jsx)(r.Mx,{pageName:"core-data-dictionary-viewer",children:(0,c.jsx)(i,{})})},75658:(e,t,n)=>{n.d(t,{f4:()=>c});var a=n(9950),s=n(89379),r=n(57561);new class{constructor(){this.dakFactory=null,this.currentDakObject=null,this.initialized=!1}async initializeForRepository(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";try{var a;const{DAKFactory:s}=await Promise.all([n.e(8900),n.e(5508),n.e(9082),n.e(2873),n.e(119)]).then(n.t.bind(n,90119,23));return this.dakFactory=new s(r.A),this.currentDakObject=await this.dakFactory.createFromRepository((null===(a=e.owner)||void 0===a?void 0:a.login)||e.full_name.split("/")[0],e.name,t),this.initialized=!0,this.currentDakObject}catch(s){return console.error("Failed to initialize DAK object:",s),console.warn("Using mock DAK object (dak-core not available)"),this.currentDakObject=this.createMockDakObject(e,t),this.initialized=!0,this.currentDakObject}}createMockDakObject(e,t){var n;const a=e=>({componentType:e,getSources:()=>[],addSource:t=>console.log("Mock: Add source to ".concat(e),t),retrieveAll:async()=>(console.log("Mock: Retrieve all from ".concat(e)),[]),retrieveById:async t=>(console.log("Mock: Retrieve ".concat(t," from ").concat(e)),null),save:async(t,n)=>{if(console.log("Mock: Save to ".concat(e),t,n),"businessProcesses"===e&&t.xml){const e=(null===n||void 0===n?void 0:n.filename)||"".concat(t.id,".bpmn");r.A.updateFile("input/process/".concat(e),t.xml)}else if("personas"===e&&t.fsh){const e=(null===n||void 0===n?void 0:n.filename)||"".concat(t.id,".fsh");r.A.updateFile("input/fsh/actors/".concat(e),t.fsh)}return{success:!0,id:t.id}},validate:async t=>(console.log("Mock: Validate in ".concat(e),t),{isValid:!0,errors:[],warnings:[]})});return{repository:{owner:null===(n=e.owner)||void 0===n?void 0:n.login,name:e.name},branch:t,metadata:{id:e.name,name:e.name,title:e.description||e.name,description:e.description||"",version:"0.0.1",status:"draft"},healthInterventions:a("healthInterventions"),personas:a("personas"),userScenarios:a("userScenarios"),businessProcesses:a("businessProcesses"),dataElements:a("dataElements"),decisionLogic:a("decisionLogic"),indicators:a("indicators"),requirements:a("requirements"),testScenarios:a("testScenarios"),getMetadata:()=>this.metadata,updateMetadata:e=>{this.metadata=(0,s.A)((0,s.A)({},this.metadata),e)},toJSON:()=>({metadata:this.metadata,components:{}}),saveDakJson:async()=>console.log("Mock: Save dak.json")}}getDakObject(){return this.currentDakObject}isInitialized(){return this.initialized&&null!==this.currentDakObject}async saveBpmnWorkflow(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.currentDakObject)throw new Error("DAK object not initialized");const a=this.currentDakObject.businessProcesses;return await a.save({id:e.replace(".bpmn",""),name:n.name||e,description:n.description||"",xml:t},{filename:e,format:"bpmn",validate:!0})}async loadBpmnWorkflows(){if(!this.currentDakObject)throw new Error("DAK object not initialized");const e=this.currentDakObject.businessProcesses;return await e.retrieveAll()}async loadBpmnWorkflow(e){if(!this.currentDakObject)throw new Error("DAK object not initialized");const t=this.currentDakObject.businessProcesses;return await t.retrieveById(e)}async saveActor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.currentDakObject)throw new Error("DAK object not initialized");const n=this.currentDakObject.personas;return await n.save({id:e.id,name:e.name,description:e.description,type:e.type,roles:e.roles,qualifications:e.qualifications,metadata:e.metadata},{format:t.format||"fsh",validate:!1!==t.validate})}async loadActors(){if(!this.currentDakObject)throw new Error("DAK object not initialized");const e=this.currentDakObject.personas;return await e.retrieveAll()}async loadActor(e){if(!this.currentDakObject)throw new Error("DAK object not initialized");const t=this.currentDakObject.personas;return await t.retrieveById(e)}async saveComponent(e,t,n){if(!this.currentDakObject)throw new Error("DAK object not initialized");const a=this.currentDakObject[e];if(!a)throw new Error("Unknown component type: ".concat(e));return await a.save(t,n)}async retrieveComponent(e){if(!this.currentDakObject)throw new Error("DAK object not initialized");const t=this.currentDakObject[e];if(!t)throw new Error("Unknown component type: ".concat(e));return await t.retrieveAll()}getComponentSources(e){if(!this.currentDakObject)return[];const t=this.currentDakObject[e];return t?t.getSources():[]}async saveDakJson(){if(!this.currentDakObject)throw new Error("DAK object not initialized");await this.currentDakObject.saveDakJson()}};n(44414);const o=(0,a.createContext)(null),c=e=>{const t=(()=>{const e=(0,a.useContext)(o);if(!e)throw new Error("useDakObject must be used within ComponentObjectProvider");return e})(),{dakObject:n,loading:s,error:r,refresh:c}=t,i=t[e];return i||s||!n||console.warn("Component type '".concat(e,"' not found in DAK object")),{component:i,dakObject:n,loading:s,error:r,refresh:c,retrieveAll:(0,a.useCallback)(async()=>i?await i.retrieveAll():(console.warn("Cannot retrieve from null component: ".concat(e)),[]),[i,e]),retrieveById:(0,a.useCallback)(async t=>i?await i.retrieveById(t):(console.warn("Cannot retrieve by id from null component: ".concat(e)),null),[i,e]),save:(0,a.useCallback)(async(t,n)=>{if(!i)throw new Error("Cannot save to null component: ".concat(e));return await i.save(t,n)},[i,e]),validate:(0,a.useCallback)(async t=>i?await i.validate(t):(console.warn("Cannot validate with null component: ".concat(e)),{isValid:!0,errors:[],warnings:[]}),[i,e]),getSources:(0,a.useCallback)(()=>i?i.getSources():(console.warn("Cannot get sources from null component: ".concat(e)),[]),[i,e]),addSource:(0,a.useCallback)(t=>{if(!i)throw new Error("Cannot add source to null component: ".concat(e));return i.addSource(t)},[i,e])}}}}]);