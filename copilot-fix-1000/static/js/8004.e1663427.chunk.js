"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[8004],{38004:(e,n,s)=>{s.r(n),s.d(n,{default:()=>d});var i=s(9950),a=s(10827),t=s(29946),l=s(53782),r=s(29166),c=s(44414);const o=()=>{const e=(0,a.Zp)(),{profile:n,repository:s,branch:o}=(0,l.N5)(),d=null===n||void 0===n?void 0:n.login,u=null===s||void 0===s?void 0:s.name,[m,h]=(0,i.useState)([]),[x,f]=(0,i.useState)(!0),[j,v]=(0,i.useState)(null),[N,p]=(0,i.useState)(null),[q,w]=(0,i.useState)(""),[b,g]=(0,i.useState)(!1),[y,C]=(0,i.useState)(""),k=()=>{if(d&&u){const n=o?"/dashboard/".concat(d,"/").concat(u,"/").concat(o):"/dashboard/".concat(d,"/").concat(u);e(n)}else e("/dashboard",{state:{profile:n,repository:s,branch:o}})};(0,i.useEffect)(()=>{(async()=>{var e;const n=s,i=o,a=d||(null===s||void 0===s||null===(e=s.owner)||void 0===e?void 0:e.login)||(null===s||void 0===s?void 0:s.full_name.split("/")[0]),l=u||(null===s||void 0===s?void 0:s.name);if((n||a&&l)&&i)try{f(!0),v(null);try{const e=(await t.A.getDirectoryContents(a,l,"input/fsh",i)).filter(e=>(e.name.toLowerCase().includes("requirement")||e.name.toLowerCase().includes("req-")||e.name.toLowerCase().includes("functional")||e.name.toLowerCase().includes("nonfunctional")||e.name.toLowerCase().includes("non-functional"))&&e.name.endsWith(".fsh")&&"file"===e.type).map(e=>({name:e.name,path:e.path,download_url:e.download_url,type:R(e.name)}));h(e)}catch(r){if(404!==r.status)throw r;h([])}}catch(j){console.error("Error fetching requirement files:",j),v("Failed to load requirement files: ".concat(j.message))}finally{f(!1)}else f(!1)})()},[s,o,d,u]);const R=e=>{const n=e.toLowerCase();return n.includes("functional")&&!n.includes("non")?"FunctionalRequirement":n.includes("nonfunctional")||n.includes("non-functional")?"NonFunctionalRequirement":"FunctionalRequirement"},F=m.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())||e.type.toLowerCase().includes(y.toLowerCase())),L={FunctionalRequirement:F.filter(e=>"FunctionalRequirement"===e.type),NonFunctionalRequirement:F.filter(e=>"NonFunctionalRequirement"===e.type)};return x?(0,c.jsx)("div",{className:"functional-requirements-editor loading-state",children:(0,c.jsxs)("div",{className:"loading-content",children:[(0,c.jsx)("h2",{children:"Loading Requirements..."}),(0,c.jsx)("p",{children:"Fetching requirement files..."})]})}):j?(0,c.jsx)("div",{className:"functional-requirements-editor error-state",children:(0,c.jsxs)("div",{className:"error-content",children:[(0,c.jsx)("h2",{children:"Error Loading Requirements"}),(0,c.jsx)("p",{children:j}),(0,c.jsxs)("div",{className:"error-actions",children:[(0,c.jsx)("button",{onClick:k,className:"action-btn primary",children:"Back to Dashboard"}),(0,c.jsx)("button",{onClick:()=>window.location.reload(),className:"action-btn secondary",children:"Retry"})]})]})}):(0,c.jsxs)("div",{className:"functional-requirements-editor",children:[(0,c.jsx)("div",{className:"requirements-header",style:{backgroundColor:"rgb(4, 11, 118)"},children:(0,c.jsxs)("div",{className:"header-content",children:[(0,c.jsxs)("div",{className:"header-left",children:[(0,c.jsx)("button",{onClick:k,className:"back-button",children:"\u2190 Back to Dashboard"}),(0,c.jsxs)("div",{className:"header-info",children:[(0,c.jsx)("h1",{children:"Functional & Non-Functional Requirements"}),(0,c.jsxs)("p",{children:[null===s||void 0===s?void 0:s.full_name," - ",o]})]})]}),(0,c.jsx)("div",{className:"header-right",children:(0,c.jsx)("button",{onClick:()=>{e("/")},className:"home-button",children:"\ud83c\udfe0 Home"})})]})}),(0,c.jsx)("div",{className:"requirements-content",children:(0,c.jsxs)("div",{className:"content-section",children:[(0,c.jsxs)("div",{className:"section-header",children:[(0,c.jsx)("h2",{children:"Requirements Viewer"}),(0,c.jsx)("p",{children:"View and browse functional and non-functional requirements as FHIR FSH files"})]}),(0,c.jsx)("div",{className:"requirements-controls",children:(0,c.jsx)("div",{className:"search-container",children:(0,c.jsx)("input",{type:"text",placeholder:"Search requirements...",value:y,onChange:e=>C(e.target.value),className:"search-input"})})}),(0,c.jsx)("div",{className:"requirements-sections",children:Object.entries(L).map(e=>{let[n,s]=e;return(0,c.jsxs)("div",{className:"requirement-type-section",children:[(0,c.jsx)("h3",{children:"FunctionalRequirement"===n?"Functional Requirements":"Non-Functional Requirements"}),0===s.length?(0,c.jsxs)("div",{className:"no-files-message",children:[(0,c.jsxs)("p",{children:["No ",n.toLowerCase().replace("requirement"," requirements")," found."]}),(0,c.jsx)("p",{children:"Requirements files should be stored in the input/fsh/ directory."})]}):(0,c.jsx)("div",{className:"requirements-grid",children:s.map(e=>(0,c.jsxs)("div",{className:"requirement-file-card",children:[(0,c.jsxs)("div",{className:"file-header",children:[(0,c.jsx)("div",{className:"file-icon",children:"\ud83d\udccb"}),(0,c.jsx)("div",{className:"file-name",children:e.name}),(0,c.jsx)("div",{className:"file-type-badge",children:e.type})]}),(0,c.jsx)("div",{className:"file-actions",children:(0,c.jsx)("button",{onClick:()=>(async e=>{try{if(p(e),g(!0),e.download_url){const n=await fetch(e.download_url);if(n.ok){const e=await n.text();w(e)}else w("// Error loading file content")}}catch(j){console.error("Error fetching file content:",j),w("// Error loading file content")}})(e),className:"action-btn view",children:"View"})})]},e.path))})]},n)})})]})}),b&&N&&(0,c.jsx)("div",{className:"modal-overlay",children:(0,c.jsxs)("div",{className:"modal-content large",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h3",{children:N.name}),(0,c.jsx)("div",{className:"modal-actions",children:(0,c.jsx)("button",{onClick:()=>g(!1),className:"action-btn close",children:"Close"})})]}),(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsx)("pre",{className:"content-viewer",children:q})})]})}),(0,c.jsx)(r.A,{pageId:"functional-requirements",notificationBadge:!t.A.isAuth()})]})},d=()=>(0,c.jsx)(l.Mx,{pageName:"functional-requirements",children:(0,c.jsx)(o,{})})}}]);