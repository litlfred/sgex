"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DefaultRegistryClient = void 0;
const FHIRRegistryClient_1 = require("./FHIRRegistryClient");
const NPMRegistryClient_1 = require("./NPMRegistryClient");
const RedundantRegistryClient_1 = require("./RedundantRegistryClient");
const FHIR_PACKAGES_ENDPOINT = 'https://packages.fhir.org';
const FHIR_PACKAGES2_ENDPOINT = 'https://packages2.fhir.org/packages';
class DefaultRegistryClient extends RedundantRegistryClient_1.RedundantRegistryClient {
    constructor(options) {
        let clients;
        // If a custom registry has been specified, use that
        const customRegistry = process.env.FPL_REGISTRY;
        if (customRegistry) {
            clients = [new NPMRegistryClient_1.NPMRegistryClient(customRegistry, options)];
        }
        // Otherwise use packages.fhir.org w/ packages2.fhir.org fallback
        else {
            clients = [
                new FHIRRegistryClient_1.FHIRRegistryClient(FHIR_PACKAGES_ENDPOINT, options),
                new FHIRRegistryClient_1.FHIRRegistryClient(FHIR_PACKAGES2_ENDPOINT, options)
            ];
        }
        super(clients, options);
    }
}
exports.DefaultRegistryClient = DefaultRegistryClient;
//# sourceMappingURL=DefaultRegistryClient.js.map