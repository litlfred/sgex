{"ast":null,"code":"import { clear as domClear, delegate as domDelegate, query as domQuery, classes as domClasses, attr as domAttr, domify } from 'min-dom';\nimport { escapeHTML } from '../../util/EscapeUtil';\nimport { isKey } from '../keyboard/KeyboardUtil';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../selection/Selection').default} Selection\n * @typedef {import('../../i18n/translate/translate.js').default} Translate\n *\n * @typedef {import('../../util/Types').Dimensions} Dimensions\n *\n * @typedef {import('./SearchPadProvider').default} SearchPadProvider\n * @typedef {import('./SearchPadProvider').SearchResult} SearchResult\n * @typedef {import('./SearchPadProvider').Token} Token\n */\n\nvar SCROLL_TO_ELEMENT_PADDING = 300;\n\n/**\n * Provides searching infrastructure.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {Selection} selection\n * @param {Translate} translate\n */\nexport default function SearchPad(canvas, eventBus, selection, translate) {\n  this._open = false;\n  this._results = {};\n  this._eventMaps = [];\n  this._cachedRootElement = null;\n  this._cachedSelection = null;\n  this._cachedViewbox = null;\n  this._canvas = canvas;\n  this._eventBus = eventBus;\n  this._selection = selection;\n  this._translate = translate;\n\n  // setup elements\n  this._container = this._getBoxHtml();\n  this._searchInput = domQuery(SearchPad.INPUT_SELECTOR, this._container);\n  this._resultsContainer = domQuery(SearchPad.RESULTS_CONTAINER_SELECTOR, this._container);\n\n  // attach search pad\n  this._canvas.getContainer().appendChild(this._container);\n\n  // cleanup whenever appropriate\n  eventBus.on(['canvas.destroy', 'diagram.destroy', 'drag.init', 'elements.changed'], this.close, this);\n}\nSearchPad.$inject = ['canvas', 'eventBus', 'selection', 'translate'];\n\n/**\n * Binds and keeps track of all event listereners\n */\nSearchPad.prototype._bindEvents = function () {\n  var self = this;\n  function listen(el, selector, type, fn) {\n    self._eventMaps.push({\n      el: el,\n      type: type,\n      listener: domDelegate.bind(el, selector, type, fn)\n    });\n  }\n\n  // close search on clicking anywhere outside\n  listen(document, 'html', 'click', function (e) {\n    self.close(false);\n  });\n\n  // stop event from propagating and closing search\n  // focus on input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'click', function (e) {\n    e.stopPropagation();\n    e.delegateTarget.focus();\n  });\n\n  // preselect result on hover\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'mouseover', function (e) {\n    e.stopPropagation();\n    self._scrollToNode(e.delegateTarget);\n    self._preselect(e.delegateTarget);\n  });\n\n  // selects desired result on mouse click\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'click', function (e) {\n    e.stopPropagation();\n    self._select(e.delegateTarget);\n  });\n\n  // prevent cursor in input from going left and right when using up/down to\n  // navigate results\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keydown', function (e) {\n    if (isKey('ArrowUp', e)) {\n      e.preventDefault();\n    }\n    if (isKey('ArrowDown', e)) {\n      e.preventDefault();\n    }\n  });\n\n  // handle keyboard input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keyup', function (e) {\n    if (isKey('Escape', e)) {\n      return self.close();\n    }\n    if (isKey('Enter', e)) {\n      var selected = self._getCurrentResult();\n      return selected ? self._select(selected) : self.close(false);\n    }\n    if (isKey('ArrowUp', e)) {\n      return self._scrollToDirection(true);\n    }\n    if (isKey('ArrowDown', e)) {\n      return self._scrollToDirection();\n    }\n\n    // do not search while navigating text input\n    if (isKey(['ArrowLeft', 'ArrowRight'], e)) {\n      return;\n    }\n\n    // anything else\n    self._search(e.delegateTarget.value);\n  });\n};\n\n/**\n * Unbinds all previously established listeners\n */\nSearchPad.prototype._unbindEvents = function () {\n  this._eventMaps.forEach(function (m) {\n    domDelegate.unbind(m.el, m.type, m.listener);\n  });\n};\n\n/**\n * Performs a search for the given pattern.\n *\n * @param {string} pattern\n */\nSearchPad.prototype._search = function (pattern) {\n  var self = this;\n  this._clearResults();\n\n  // do not search on empty query\n  if (!pattern.trim()) {\n    return;\n  }\n  var searchResults = this._searchProvider.find(pattern);\n  searchResults = searchResults.filter(function (searchResult) {\n    return !self._canvas.getRootElements().includes(searchResult.element);\n  });\n  if (!searchResults.length) {\n    this._selection.select(null);\n    return;\n  }\n\n  // append new results\n  searchResults.forEach(function (result) {\n    var id = result.element.id;\n    var node = self._createResultNode(result, id);\n    self._results[id] = {\n      element: result.element,\n      node: node\n    };\n  });\n\n  // preselect first result\n  var node = domQuery(SearchPad.RESULT_SELECTOR, this._resultsContainer);\n  this._scrollToNode(node);\n  this._preselect(node);\n};\n\n/**\n * Navigate to the previous/next result. Defaults to next result.\n *\n * @param {boolean} previous\n */\nSearchPad.prototype._scrollToDirection = function (previous) {\n  var selected = this._getCurrentResult();\n  if (!selected) {\n    return;\n  }\n  var node = previous ? selected.previousElementSibling : selected.nextElementSibling;\n  if (node) {\n    this._scrollToNode(node);\n    this._preselect(node);\n  }\n};\n\n/**\n * Scroll to the node if it is not visible.\n *\n * @param {HTMLElement} node\n */\nSearchPad.prototype._scrollToNode = function (node) {\n  if (!node || node === this._getCurrentResult()) {\n    return;\n  }\n  var nodeOffset = node.offsetTop;\n  var containerScroll = this._resultsContainer.scrollTop;\n  var bottomScroll = nodeOffset - this._resultsContainer.clientHeight + node.clientHeight;\n  if (nodeOffset < containerScroll) {\n    this._resultsContainer.scrollTop = nodeOffset;\n  } else if (containerScroll < bottomScroll) {\n    this._resultsContainer.scrollTop = bottomScroll;\n  }\n};\n\n/**\n * Clears all results data.\n */\nSearchPad.prototype._clearResults = function () {\n  domClear(this._resultsContainer);\n  this._results = {};\n  this._eventBus.fire('searchPad.cleared');\n};\n\n/**\n * Get currently selected result.\n *\n * @return {HTMLElement}\n */\nSearchPad.prototype._getCurrentResult = function () {\n  return domQuery(SearchPad.RESULT_SELECTED_SELECTOR, this._resultsContainer);\n};\n\n/**\n * Create result DOM element within results container\n * that corresponds to a search result.\n *\n * 'result' : one of the elements returned by Pad\n * 'id' : id attribute value to assign to the new DOM node\n * return : created DOM element\n *\n * @param {SearchResult} result\n * @param {string} id\n *\n * @return {HTMLElement}\n */\nSearchPad.prototype._createResultNode = function (result, id) {\n  var node = domify(SearchPad.RESULT_HTML);\n\n  // create only if available\n  if (result.primaryTokens.length > 0) {\n    createInnerTextNode(node, result.primaryTokens, SearchPad.RESULT_PRIMARY_HTML);\n  }\n\n  // secondary tokens (represent element ID) are allways available\n  createInnerTextNode(node, result.secondaryTokens, SearchPad.RESULT_SECONDARY_HTML);\n  domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE, id);\n  this._resultsContainer.appendChild(node);\n  return node;\n};\n\n/**\n * Register search element provider.\n *\n * @param {SearchPadProvider} provider\n */\nSearchPad.prototype.registerProvider = function (provider) {\n  this._searchProvider = provider;\n};\n\n/**\n * Open search pad.\n */\nSearchPad.prototype.open = function () {\n  if (!this._searchProvider) {\n    throw new Error('no search provider registered');\n  }\n  if (this.isOpen()) {\n    return;\n  }\n  this._cachedRootElement = this._canvas.getRootElement();\n  this._cachedSelection = this._selection.get();\n  this._cachedViewbox = this._canvas.viewbox();\n  this._selection.select(null);\n  this._bindEvents();\n  this._open = true;\n  domClasses(this._canvas.getContainer()).add('djs-search-open');\n  domClasses(this._container).add('open');\n  this._searchInput.focus();\n  this._eventBus.fire('searchPad.opened');\n};\n\n/**\n * Close search pad.\n */\nSearchPad.prototype.close = function () {\n  let restoreCached = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  if (!this.isOpen()) {\n    return;\n  }\n  if (restoreCached) {\n    if (this._cachedRootElement) {\n      this._canvas.setRootElement(this._cachedRootElement);\n    }\n    if (this._cachedSelection) {\n      this._selection.select(this._cachedSelection);\n    }\n    if (this._cachedViewbox) {\n      this._canvas.viewbox(this._cachedViewbox);\n    }\n    this._eventBus.fire('searchPad.restored');\n  }\n  this._cachedRootElement = null;\n  this._cachedSelection = null;\n  this._cachedViewbox = null;\n  this._unbindEvents();\n  this._open = false;\n  domClasses(this._canvas.getContainer()).remove('djs-search-open');\n  domClasses(this._container).remove('open');\n  this._clearResults();\n  this._searchInput.value = '';\n  this._searchInput.blur();\n  this._eventBus.fire('searchPad.closed');\n  this._canvas.restoreFocus();\n};\n\n/**\n * Toggles search pad on/off.\n */\nSearchPad.prototype.toggle = function () {\n  this.isOpen() ? this.close() : this.open();\n};\n\n/**\n * Report state of search pad.\n */\nSearchPad.prototype.isOpen = function () {\n  return this._open;\n};\n\n/**\n * Preselect result entry.\n *\n * @param {HTMLElement} element\n */\nSearchPad.prototype._preselect = function (node) {\n  var selectedNode = this._getCurrentResult();\n\n  // already selected\n  if (node === selectedNode) {\n    return;\n  }\n\n  // removing preselection from current node\n  if (selectedNode) {\n    domClasses(selectedNode).remove(SearchPad.RESULT_SELECTED_CLASS);\n  }\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n  domClasses(node).add(SearchPad.RESULT_SELECTED_CLASS);\n  this._canvas.scrollToElement(element, {\n    top: SCROLL_TO_ELEMENT_PADDING\n  });\n  this._selection.select(element);\n  this._eventBus.fire('searchPad.preselected', element);\n};\n\n/**\n * Select result node.\n *\n * @param {HTMLElement} element\n */\nSearchPad.prototype._select = function (node) {\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n  this._cachedSelection = null;\n  this._cachedViewbox = null;\n  this.close(false);\n  this._canvas.scrollToElement(element, {\n    top: SCROLL_TO_ELEMENT_PADDING\n  });\n  this._selection.select(element);\n  this._eventBus.fire('searchPad.selected', element);\n};\nSearchPad.prototype._getBoxHtml = function () {\n  const box = domify(SearchPad.BOX_HTML);\n  const input = domQuery(SearchPad.INPUT_SELECTOR, box);\n  if (input) {\n    input.setAttribute('aria-label', this._translate('Search in diagram'));\n  }\n  return box;\n};\n\n/**\n * Creates and appends child node from result tokens and HTML template.\n *\n * @param {HTMLElement} node\n * @param {Token[]} tokens\n * @param {string} template\n */\nfunction createInnerTextNode(parentNode, tokens, template) {\n  var text = createHtmlText(tokens);\n  var childNode = domify(template);\n  childNode.innerHTML = text;\n  parentNode.appendChild(childNode);\n}\n\n/**\n * Create internal HTML markup from result tokens.\n * Caters for highlighting pattern matched tokens.\n *\n * @param {Token[]} tokens\n *\n * @return {string|null}\n */\nfunction createHtmlText(tokens) {\n  var htmlText = '';\n  tokens.forEach(function (t) {\n    var text = escapeHTML(t.value || t.matched || t.normal);\n    var match = t.match || t.matched;\n    if (match) {\n      htmlText += '<b class=\"' + SearchPad.RESULT_HIGHLIGHT_CLASS + '\">' + text + '</b>';\n    } else {\n      htmlText += text;\n    }\n  });\n  return htmlText !== '' ? htmlText : null;\n}\n\n/**\n * CONSTANTS\n */\nSearchPad.CONTAINER_SELECTOR = '.djs-search-container';\nSearchPad.INPUT_SELECTOR = '.djs-search-input input';\nSearchPad.RESULTS_CONTAINER_SELECTOR = '.djs-search-results';\nSearchPad.RESULT_SELECTOR = '.djs-search-result';\nSearchPad.RESULT_SELECTED_CLASS = 'djs-search-result-selected';\nSearchPad.RESULT_SELECTED_SELECTOR = '.' + SearchPad.RESULT_SELECTED_CLASS;\nSearchPad.RESULT_ID_ATTRIBUTE = 'data-result-id';\nSearchPad.RESULT_HIGHLIGHT_CLASS = 'djs-search-highlight';\nSearchPad.BOX_HTML = `<div class=\"djs-search-container djs-scrollable\">\n  <div class=\"djs-search-input\">\n    <svg class=\"djs-search-icon\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z\" fill=\"#22242A\"/>\n    </svg>\n    <input type=\"text\" spellcheck=\"false\" />\n  </div>\n  <div class=\"djs-search-results\" />\n</div>`;\nSearchPad.RESULT_HTML = '<div class=\"djs-search-result\"></div>';\nSearchPad.RESULT_PRIMARY_HTML = '<div class=\"djs-search-result-primary\"></div>';\nSearchPad.RESULT_SECONDARY_HTML = '<p class=\"djs-search-result-secondary\"></p>';","map":{"version":3,"names":["clear","domClear","delegate","domDelegate","query","domQuery","classes","domClasses","attr","domAttr","domify","escapeHTML","isKey","SCROLL_TO_ELEMENT_PADDING","SearchPad","canvas","eventBus","selection","translate","_open","_results","_eventMaps","_cachedRootElement","_cachedSelection","_cachedViewbox","_canvas","_eventBus","_selection","_translate","_container","_getBoxHtml","_searchInput","INPUT_SELECTOR","_resultsContainer","RESULTS_CONTAINER_SELECTOR","getContainer","appendChild","on","close","$inject","prototype","_bindEvents","self","listen","el","selector","type","fn","push","listener","bind","document","e","stopPropagation","delegateTarget","focus","RESULT_SELECTOR","_scrollToNode","_preselect","_select","preventDefault","selected","_getCurrentResult","_scrollToDirection","_search","value","_unbindEvents","forEach","m","unbind","pattern","_clearResults","trim","searchResults","_searchProvider","find","filter","searchResult","getRootElements","includes","element","length","select","result","id","node","_createResultNode","previous","previousElementSibling","nextElementSibling","nodeOffset","offsetTop","containerScroll","scrollTop","bottomScroll","clientHeight","fire","RESULT_SELECTED_SELECTOR","RESULT_HTML","primaryTokens","createInnerTextNode","RESULT_PRIMARY_HTML","secondaryTokens","RESULT_SECONDARY_HTML","RESULT_ID_ATTRIBUTE","registerProvider","provider","open","Error","isOpen","getRootElement","get","viewbox","add","restoreCached","arguments","undefined","setRootElement","remove","blur","restoreFocus","toggle","selectedNode","RESULT_SELECTED_CLASS","scrollToElement","top","box","BOX_HTML","input","setAttribute","parentNode","tokens","template","text","createHtmlText","childNode","innerHTML","htmlText","t","matched","normal","match","RESULT_HIGHLIGHT_CLASS","CONTAINER_SELECTOR"],"sources":["/home/runner/work/sgex/sgex/node_modules/diagram-js/lib/features/search-pad/SearchPad.js"],"sourcesContent":["import {\n  clear as domClear,\n  delegate as domDelegate,\n  query as domQuery,\n  classes as domClasses,\n  attr as domAttr,\n  domify as domify\n} from 'min-dom';\n\nimport {\n  escapeHTML\n} from '../../util/EscapeUtil';\n\nimport { isKey } from '../keyboard/KeyboardUtil';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../selection/Selection').default} Selection\n * @typedef {import('../../i18n/translate/translate.js').default} Translate\n *\n * @typedef {import('../../util/Types').Dimensions} Dimensions\n *\n * @typedef {import('./SearchPadProvider').default} SearchPadProvider\n * @typedef {import('./SearchPadProvider').SearchResult} SearchResult\n * @typedef {import('./SearchPadProvider').Token} Token\n */\n\nvar SCROLL_TO_ELEMENT_PADDING = 300;\n\n/**\n * Provides searching infrastructure.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {Selection} selection\n * @param {Translate} translate\n */\nexport default function SearchPad(canvas, eventBus, selection, translate) {\n  this._open = false;\n  this._results = {};\n  this._eventMaps = [];\n\n  this._cachedRootElement = null;\n  this._cachedSelection = null;\n  this._cachedViewbox = null;\n\n  this._canvas = canvas;\n  this._eventBus = eventBus;\n  this._selection = selection;\n  this._translate = translate;\n\n  // setup elements\n  this._container = this._getBoxHtml();\n  this._searchInput = domQuery(SearchPad.INPUT_SELECTOR, this._container);\n  this._resultsContainer = domQuery(SearchPad.RESULTS_CONTAINER_SELECTOR, this._container);\n\n  // attach search pad\n  this._canvas.getContainer().appendChild(this._container);\n\n  // cleanup whenever appropriate\n  eventBus.on([\n    'canvas.destroy',\n    'diagram.destroy',\n    'drag.init',\n    'elements.changed'\n  ], this.close, this);\n}\n\n\nSearchPad.$inject = [\n  'canvas',\n  'eventBus',\n  'selection',\n  'translate'\n];\n\n\n/**\n * Binds and keeps track of all event listereners\n */\nSearchPad.prototype._bindEvents = function() {\n  var self = this;\n\n  function listen(el, selector, type, fn) {\n    self._eventMaps.push({\n      el: el,\n      type: type,\n      listener: domDelegate.bind(el, selector, type, fn)\n    });\n  }\n\n  // close search on clicking anywhere outside\n  listen(document, 'html', 'click', function(e) {\n    self.close(false);\n  });\n\n  // stop event from propagating and closing search\n  // focus on input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'click', function(e) {\n    e.stopPropagation();\n    e.delegateTarget.focus();\n  });\n\n  // preselect result on hover\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'mouseover', function(e) {\n    e.stopPropagation();\n    self._scrollToNode(e.delegateTarget);\n    self._preselect(e.delegateTarget);\n  });\n\n  // selects desired result on mouse click\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'click', function(e) {\n    e.stopPropagation();\n    self._select(e.delegateTarget);\n  });\n\n  // prevent cursor in input from going left and right when using up/down to\n  // navigate results\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keydown', function(e) {\n\n    if (isKey('ArrowUp', e)) {\n      e.preventDefault();\n    }\n\n    if (isKey('ArrowDown', e)) {\n      e.preventDefault();\n    }\n  });\n\n  // handle keyboard input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keyup', function(e) {\n\n    if (isKey('Escape', e)) {\n      return self.close();\n    }\n\n    if (isKey('Enter', e)) {\n      var selected = self._getCurrentResult();\n\n      return selected ? self._select(selected) : self.close(false);\n    }\n\n    if (isKey('ArrowUp', e)) {\n      return self._scrollToDirection(true);\n    }\n\n    if (isKey('ArrowDown', e)) {\n      return self._scrollToDirection();\n    }\n\n    // do not search while navigating text input\n    if (isKey([ 'ArrowLeft', 'ArrowRight' ], e)) {\n      return;\n    }\n\n    // anything else\n    self._search(e.delegateTarget.value);\n  });\n};\n\n\n/**\n * Unbinds all previously established listeners\n */\nSearchPad.prototype._unbindEvents = function() {\n  this._eventMaps.forEach(function(m) {\n    domDelegate.unbind(m.el, m.type, m.listener);\n  });\n};\n\n\n/**\n * Performs a search for the given pattern.\n *\n * @param {string} pattern\n */\nSearchPad.prototype._search = function(pattern) {\n  var self = this;\n\n  this._clearResults();\n\n  // do not search on empty query\n  if (!pattern.trim()) {\n    return;\n  }\n\n  var searchResults = this._searchProvider.find(pattern);\n\n  searchResults = searchResults.filter(function(searchResult) {\n    return !self._canvas.getRootElements().includes(searchResult.element);\n  });\n\n  if (!searchResults.length) {\n    this._selection.select(null);\n\n    return;\n  }\n\n  // append new results\n  searchResults.forEach(function(result) {\n    var id = result.element.id;\n    var node = self._createResultNode(result, id);\n    self._results[id] = {\n      element: result.element,\n      node: node\n    };\n  });\n\n  // preselect first result\n  var node = domQuery(SearchPad.RESULT_SELECTOR, this._resultsContainer);\n  this._scrollToNode(node);\n  this._preselect(node);\n};\n\n\n/**\n * Navigate to the previous/next result. Defaults to next result.\n *\n * @param {boolean} previous\n */\nSearchPad.prototype._scrollToDirection = function(previous) {\n  var selected = this._getCurrentResult();\n  if (!selected) {\n    return;\n  }\n\n  var node = previous ? selected.previousElementSibling : selected.nextElementSibling;\n  if (node) {\n    this._scrollToNode(node);\n    this._preselect(node);\n  }\n};\n\n\n/**\n * Scroll to the node if it is not visible.\n *\n * @param {HTMLElement} node\n */\nSearchPad.prototype._scrollToNode = function(node) {\n  if (!node || node === this._getCurrentResult()) {\n    return;\n  }\n\n  var nodeOffset = node.offsetTop;\n  var containerScroll = this._resultsContainer.scrollTop;\n\n  var bottomScroll = nodeOffset - this._resultsContainer.clientHeight + node.clientHeight;\n\n  if (nodeOffset < containerScroll) {\n    this._resultsContainer.scrollTop = nodeOffset;\n  } else if (containerScroll < bottomScroll) {\n    this._resultsContainer.scrollTop = bottomScroll;\n  }\n};\n\n\n/**\n * Clears all results data.\n */\nSearchPad.prototype._clearResults = function() {\n  domClear(this._resultsContainer);\n\n  this._results = {};\n\n  this._eventBus.fire('searchPad.cleared');\n};\n\n\n/**\n * Get currently selected result.\n *\n * @return {HTMLElement}\n */\nSearchPad.prototype._getCurrentResult = function() {\n  return domQuery(SearchPad.RESULT_SELECTED_SELECTOR, this._resultsContainer);\n};\n\n\n/**\n * Create result DOM element within results container\n * that corresponds to a search result.\n *\n * 'result' : one of the elements returned by Pad\n * 'id' : id attribute value to assign to the new DOM node\n * return : created DOM element\n *\n * @param {SearchResult} result\n * @param {string} id\n *\n * @return {HTMLElement}\n */\nSearchPad.prototype._createResultNode = function(result, id) {\n  var node = domify(SearchPad.RESULT_HTML);\n\n  // create only if available\n  if (result.primaryTokens.length > 0) {\n    createInnerTextNode(node, result.primaryTokens, SearchPad.RESULT_PRIMARY_HTML);\n  }\n\n  // secondary tokens (represent element ID) are allways available\n  createInnerTextNode(node, result.secondaryTokens, SearchPad.RESULT_SECONDARY_HTML);\n\n  domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE, id);\n\n  this._resultsContainer.appendChild(node);\n\n  return node;\n};\n\n\n/**\n * Register search element provider.\n *\n * @param {SearchPadProvider} provider\n */\nSearchPad.prototype.registerProvider = function(provider) {\n  this._searchProvider = provider;\n};\n\n\n/**\n * Open search pad.\n */\nSearchPad.prototype.open = function() {\n  if (!this._searchProvider) {\n    throw new Error('no search provider registered');\n  }\n\n  if (this.isOpen()) {\n    return;\n  }\n\n  this._cachedRootElement = this._canvas.getRootElement();\n  this._cachedSelection = this._selection.get();\n  this._cachedViewbox = this._canvas.viewbox();\n\n  this._selection.select(null);\n\n  this._bindEvents();\n\n  this._open = true;\n\n  domClasses(this._canvas.getContainer()).add('djs-search-open');\n  domClasses(this._container).add('open');\n\n  this._searchInput.focus();\n\n  this._eventBus.fire('searchPad.opened');\n};\n\n\n/**\n * Close search pad.\n */\nSearchPad.prototype.close = function(restoreCached = true) {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  if (restoreCached) {\n    if (this._cachedRootElement) {\n      this._canvas.setRootElement(this._cachedRootElement);\n    }\n\n    if (this._cachedSelection) {\n      this._selection.select(this._cachedSelection);\n    }\n\n    if (this._cachedViewbox) {\n      this._canvas.viewbox(this._cachedViewbox);\n    }\n\n    this._eventBus.fire('searchPad.restored');\n  }\n\n  this._cachedRootElement = null;\n  this._cachedSelection = null;\n  this._cachedViewbox = null;\n\n  this._unbindEvents();\n\n  this._open = false;\n\n  domClasses(this._canvas.getContainer()).remove('djs-search-open');\n  domClasses(this._container).remove('open');\n\n  this._clearResults();\n\n  this._searchInput.value = '';\n  this._searchInput.blur();\n\n  this._eventBus.fire('searchPad.closed');\n\n  this._canvas.restoreFocus();\n};\n\n\n/**\n * Toggles search pad on/off.\n */\nSearchPad.prototype.toggle = function() {\n  this.isOpen() ? this.close() : this.open();\n};\n\n\n/**\n * Report state of search pad.\n */\nSearchPad.prototype.isOpen = function() {\n  return this._open;\n};\n\n\n/**\n * Preselect result entry.\n *\n * @param {HTMLElement} element\n */\nSearchPad.prototype._preselect = function(node) {\n  var selectedNode = this._getCurrentResult();\n\n  // already selected\n  if (node === selectedNode) {\n    return;\n  }\n\n  // removing preselection from current node\n  if (selectedNode) {\n    domClasses(selectedNode).remove(SearchPad.RESULT_SELECTED_CLASS);\n  }\n\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n\n  domClasses(node).add(SearchPad.RESULT_SELECTED_CLASS);\n\n  this._canvas.scrollToElement(element, {\n    top: SCROLL_TO_ELEMENT_PADDING\n  });\n\n  this._selection.select(element);\n\n  this._eventBus.fire('searchPad.preselected', element);\n};\n\n\n/**\n * Select result node.\n *\n * @param {HTMLElement} element\n */\nSearchPad.prototype._select = function(node) {\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n\n  this._cachedSelection = null;\n  this._cachedViewbox = null;\n\n  this.close(false);\n\n  this._canvas.scrollToElement(element, {\n    top: SCROLL_TO_ELEMENT_PADDING\n  });\n\n  this._selection.select(element);\n\n  this._eventBus.fire('searchPad.selected', element);\n};\n\n\nSearchPad.prototype._getBoxHtml = function() {\n  const box = domify(SearchPad.BOX_HTML);\n  const input = domQuery(SearchPad.INPUT_SELECTOR, box);\n\n  if (input) {\n    input.setAttribute('aria-label', this._translate('Search in diagram'));\n  }\n\n  return box;\n};\n\n\n/**\n * Creates and appends child node from result tokens and HTML template.\n *\n * @param {HTMLElement} node\n * @param {Token[]} tokens\n * @param {string} template\n */\nfunction createInnerTextNode(parentNode, tokens, template) {\n  var text = createHtmlText(tokens);\n  var childNode = domify(template);\n  childNode.innerHTML = text;\n  parentNode.appendChild(childNode);\n}\n\n/**\n * Create internal HTML markup from result tokens.\n * Caters for highlighting pattern matched tokens.\n *\n * @param {Token[]} tokens\n *\n * @return {string|null}\n */\nfunction createHtmlText(tokens) {\n  var htmlText = '';\n\n  tokens.forEach(function(t) {\n    var text = escapeHTML(t.value || t.matched || t.normal);\n    var match = t.match || t.matched;\n\n    if (match) {\n      htmlText += '<b class=\"' + SearchPad.RESULT_HIGHLIGHT_CLASS + '\">' + text + '</b>';\n    } else {\n      htmlText += text;\n    }\n  });\n\n  return htmlText !== '' ? htmlText : null;\n}\n\n\n/**\n * CONSTANTS\n */\nSearchPad.CONTAINER_SELECTOR = '.djs-search-container';\nSearchPad.INPUT_SELECTOR = '.djs-search-input input';\nSearchPad.RESULTS_CONTAINER_SELECTOR = '.djs-search-results';\nSearchPad.RESULT_SELECTOR = '.djs-search-result';\nSearchPad.RESULT_SELECTED_CLASS = 'djs-search-result-selected';\nSearchPad.RESULT_SELECTED_SELECTOR = '.' + SearchPad.RESULT_SELECTED_CLASS;\nSearchPad.RESULT_ID_ATTRIBUTE = 'data-result-id';\nSearchPad.RESULT_HIGHLIGHT_CLASS = 'djs-search-highlight';\n\nSearchPad.BOX_HTML =\n`<div class=\"djs-search-container djs-scrollable\">\n  <div class=\"djs-search-input\">\n    <svg class=\"djs-search-icon\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z\" fill=\"#22242A\"/>\n    </svg>\n    <input type=\"text\" spellcheck=\"false\" />\n  </div>\n  <div class=\"djs-search-results\" />\n</div>`;\n\nSearchPad.RESULT_HTML =\n  '<div class=\"djs-search-result\"></div>';\n\nSearchPad.RESULT_PRIMARY_HTML =\n  '<div class=\"djs-search-result-primary\"></div>';\n\nSearchPad.RESULT_SECONDARY_HTML =\n  '<p class=\"djs-search-result-secondary\"></p>';\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}