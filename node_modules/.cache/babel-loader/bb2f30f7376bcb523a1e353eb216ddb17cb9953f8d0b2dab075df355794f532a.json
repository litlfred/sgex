{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{PageLayout}from'./framework';import PATLogin from'./PATLogin';import useThemeImage from'../hooks/useThemeImage';import'./BranchListingPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BranchListingPage=()=>{const[pullRequests,setPullRequests]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[prPage,setPrPage]=useState(1);const[prSearchTerm,setPrSearchTerm]=useState('');const[prSortBy,setPrSortBy]=useState('updated');const[prSortOrder,setPrSortOrder]=useState('desc');const[deploymentStatuses,setDeploymentStatuses]=useState({});const[prFilter,setPrFilter]=useState('open');const[isAuthenticated,setIsAuthenticated]=useState(false);const[githubToken,setGithubToken]=useState(null);const[prComments,setPrComments]=useState({});const[loadingComments]=useState(false);// Removed setLoadingComments as it's not used\nconst[commentInputs,setCommentInputs]=useState({});const[submittingComments,setSubmittingComments]=useState({});const[expandedDiscussions,setExpandedDiscussions]=useState({});const[discussionSummaries,setDiscussionSummaries]=useState({});const[loadingSummaries,setLoadingSummaries]=useState(false);const ITEMS_PER_PAGE=10;// Theme-aware image paths\nconst mascotImage=useThemeImage('sgex-mascot.png');// GitHub authentication functions\nconst handleAuthSuccess=token=>{setGithubToken(token);setIsAuthenticated(true);sessionStorage.setItem('github_token',token);};// Function to fetch PR comments summary\nconst fetchPRCommentsSummary=async prNumber=>{try{const headers={'Accept':'application/vnd.github.v3+json'};// Add auth header if available for better rate limits\nif(githubToken){headers['Authorization']=`token ${githubToken}`;}const response=await fetch(`https://api.github.com/repos/litlfred/sgex/issues/${prNumber}/comments`,{headers});if(!response.ok){console.warn(`Failed to fetch comments for PR ${prNumber}: ${response.status}`);return{count:0,lastComment:null,error:true};}const comments=await response.json();if(comments.length===0){return{count:0,lastComment:null};}const lastComment=comments[comments.length-1];return{count:comments.length,lastComment:{author:lastComment.user.login,created_at:new Date(lastComment.created_at),avatar_url:lastComment.user.avatar_url}};}catch(error){console.warn(`Error fetching comment summary for PR ${prNumber}:`,error);return{count:0,lastComment:null,error:true};}};// Function to fetch all PR comments (for expanded view)\nconst fetchAllPRComments=async prNumber=>{try{const headers={'Accept':'application/vnd.github.v3+json'};// Add auth header if available for better rate limits\nif(githubToken){headers['Authorization']=`token ${githubToken}`;}const response=await fetch(`https://api.github.com/repos/litlfred/sgex/issues/${prNumber}/comments`,{headers});if(!response.ok){console.warn(`Failed to fetch comments for PR ${prNumber}: ${response.status}`);return[];}const comments=await response.json();return comments.map(comment=>({id:comment.id,author:comment.user.login,body:comment.body,created_at:new Date(comment.created_at).toLocaleDateString(),avatar_url:comment.user.avatar_url}));}catch(error){console.warn(`Error fetching all comments for PR ${prNumber}:`,error);return[];}};// Function to load discussion summaries for visible PRs\nconst loadDiscussionSummaries=useCallback(async prs=>{if(prs.length===0)return;setLoadingSummaries(true);const summaries={};for(const pr of prs){summaries[pr.number]=await fetchPRCommentsSummary(pr.number);}setDiscussionSummaries(summaries);setLoadingSummaries(false);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[githubToken]);// Function to toggle discussion expansion\nconst toggleDiscussion=async prNumber=>{const isExpanded=expandedDiscussions[prNumber];if(!isExpanded){// Load all comments when expanding\nconst comments=await fetchAllPRComments(prNumber);setPrComments(prev=>({...prev,[prNumber]:comments}));}setExpandedDiscussions(prev=>({...prev,[prNumber]:!isExpanded}));};// Function to get discussion summary text\nconst getDiscussionSummaryText=prNumber=>{const summary=discussionSummaries[prNumber];if(loadingSummaries){return\"Loading discussion...\";}if(!summary){return\"No comments yet\";}if(summary.error){return\"Unable to load comments\";}if(summary.count===0){return\"No comments yet\";}const{count,lastComment}=summary;const timeAgo=lastComment?getTimeAgo(lastComment.created_at):'';return`${count} comment${count>1?'s':''}, last by ${lastComment.author} ${timeAgo}`;};// Helper function to get relative time\nconst getTimeAgo=date=>{const now=new Date();const diffMs=now-date;const diffDays=Math.floor(diffMs/(1000*60*60*24));if(diffDays===0)return'today';if(diffDays===1)return'1 day ago';if(diffDays<7)return`${diffDays} days ago`;if(diffDays<30)return`${Math.floor(diffDays/7)} week${Math.floor(diffDays/7)>1?'s':''} ago`;return`${Math.floor(diffDays/30)} month${Math.floor(diffDays/30)>1?'s':''} ago`;};// Function to submit a comment\nconst submitComment=async(prNumber,commentText)=>{if(!githubToken||!commentText.trim())return false;setSubmittingComments(prev=>({...prev,[prNumber]:true}));try{const response=await fetch(`https://api.github.com/repos/litlfred/sgex/issues/${prNumber}/comments`,{method:'POST',headers:{'Authorization':`token ${githubToken}`,'Accept':'application/vnd.github.v3+json','Content-Type':'application/json'},body:JSON.stringify({body:commentText})});if(!response.ok){throw new Error(`Failed to submit comment: ${response.status}`);}setCommentInputs(prev=>({...prev,[prNumber]:''}));// Refresh both full comments (if expanded) and summary\nif(expandedDiscussions[prNumber]){const updatedComments=await fetchAllPRComments(prNumber);setPrComments(prev=>({...prev,[prNumber]:updatedComments}));}// Refresh the discussion summary\nconst updatedSummary=await fetchPRCommentsSummary(prNumber);setDiscussionSummaries(prev=>({...prev,[prNumber]:updatedSummary}));return true;}catch(error){console.error(`Error submitting comment for PR ${prNumber}:`,error);return false;}finally{setSubmittingComments(prev=>({...prev,[prNumber]:false}));}};// Function to check deployment status for a branch\nconst checkDeploymentStatus=async safeBranchName=>{try{const response=await fetch(`https://api.github.com/repos/litlfred/sgex/actions/workflows/deploy.yml/runs?branch=${safeBranchName}&per_page=1`,{headers:githubToken?{'Authorization':`token ${githubToken}`,'Accept':'application/vnd.github.v3+json'}:{'Accept':'application/vnd.github.v3+json'}});if(!response.ok){throw new Error(`Failed to fetch deployment status: ${response.status}`);}const data=await response.json();if(data.workflow_runs&&data.workflow_runs.length>0){const latestRun=data.workflow_runs[0];return{status:latestRun.status,conclusion:latestRun.conclusion,html_url:latestRun.html_url,created_at:latestRun.created_at};}return{status:'unknown',conclusion:null};}catch(error){console.error(`Error checking deployment status for ${safeBranchName}:`,error);return{status:'error',conclusion:'error'};}};// Function to update deployment statuses for visible PRs\nconst updateDeploymentStatuses=useCallback(async prs=>{if(prs.length===0)return;const statuses={};for(const pr of prs){statuses[pr.safeBranchName]=await checkDeploymentStatus(pr.safeBranchName);}setDeploymentStatuses(prev=>({...prev,...statuses}));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[githubToken]);// Function to get deployment status display info\nconst getDeploymentStatusInfo=safeBranchName=>{const status=deploymentStatuses[safeBranchName];if(!status)return{text:'Checking...',class:'unknown'};if(status.status==='completed'&&status.conclusion==='success'){return{text:'✅ Deployed',class:'success'};}else if(status.status==='completed'&&status.conclusion==='failure'){return{text:'❌ Failed',class:'failed'};}else if(status.status==='in_progress'){return{text:'🔄 Deploying',class:'in-progress'};}else if(status.status==='queued'){return{text:'⏳ Queued',class:'queued'};}else if(status.status==='error'){return{text:'⚠️ Error',class:'error'};}else{return{text:'❓ Unknown',class:'unknown'};}};// Sorting functions\nconst sortPRs=function(prs,sortBy){let sortOrder=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'desc';return[...prs].sort((a,b)=>{let comparison=0;switch(sortBy){case'number':comparison=b.number-a.number;break;case'alphabetical':comparison=a.title.localeCompare(b.title);break;case'updated':default:const dateA=new Date(a.updatedAt);const dateB=new Date(b.updatedAt);comparison=dateB-dateA;break;}// Reverse comparison for ascending order\nreturn sortOrder==='asc'?-comparison:comparison;});};// Check for existing authentication on component mount\nuseEffect(()=>{const token=sessionStorage.getItem('github_token');if(token){setGithubToken(token);setIsAuthenticated(true);}},[]);// Fetch data\nuseEffect(()=>{const fetchData=async()=>{try{setLoading(true);const owner='litlfred';const repo='sgex';const prState=prFilter==='all'?'all':prFilter;const prResponse=await fetch(`https://api.github.com/repos/${owner}/${repo}/pulls?state=${prState}&sort=updated&per_page=100`);if(!prResponse.ok){throw new Error(`Failed to fetch pull requests: ${prResponse.status}`);}const prData=await prResponse.json();const formattedPRs=prData.map(pr=>{const safeBranchName=pr.head.ref.replace(/\\//g,'-');return{id:pr.id,number:pr.number,title:pr.title,state:pr.state,author:pr.user.login,branchName:pr.head.ref,safeBranchName:safeBranchName,url:`./${safeBranchName}/index.html`,prUrl:pr.html_url,updatedAt:new Date(pr.updated_at).toLocaleDateString(),createdAt:new Date(pr.created_at).toLocaleDateString()};});setPullRequests(formattedPRs);// Always try to load discussion summaries\nawait loadDiscussionSummaries(formattedPRs.slice(0,ITEMS_PER_PAGE));}catch(err){console.error('Error fetching data:',err);setError(err.message);// Fallback mock data\nif(err.message.includes('Failed to fetch')){console.log('Using fallback mock data...');const mockPRs=[{id:1,number:460,title:'Improve multi-page selector landing page for GitHub deployment',state:'open',author:'copilot',branchName:'copilot/fix-459',safeBranchName:'copilot-fix-459',url:'./sgex/copilot-fix-459/index.html',prUrl:'https://github.com/litlfred/sgex/pull/460',updatedAt:new Date().toLocaleDateString(),createdAt:new Date(Date.now()-86400000).toLocaleDateString()},{id:2,number:459,title:'Add enhanced PR preview functionality',state:'open',author:'developer',branchName:'feature/pr-preview',safeBranchName:'feature-pr-preview',url:'./sgex/feature-pr-preview/index.html',prUrl:'https://github.com/litlfred/sgex/pull/459',updatedAt:new Date(Date.now()-172800000).toLocaleDateString(),createdAt:new Date(Date.now()-345600000).toLocaleDateString()}];setPullRequests(mockPRs);setError(null);}}finally{setLoading(false);}};fetchData();},[prFilter,githubToken,loadDiscussionSummaries]);// Poll deployment statuses every 7 seconds for visible PRs\nuseEffect(()=>{if(pullRequests.length===0)return;const filtered=pullRequests.filter(pr=>pr.title.toLowerCase().includes(prSearchTerm.toLowerCase())||pr.author.toLowerCase().includes(prSearchTerm.toLowerCase())||pr.branchName.toLowerCase().includes(prSearchTerm.toLowerCase()));const sorted=sortPRs(filtered,prSortBy,prSortOrder);const paginated=sorted.slice((prPage-1)*ITEMS_PER_PAGE,prPage*ITEMS_PER_PAGE);// Initial status check\nupdateDeploymentStatuses(paginated);// Set up polling every 7 seconds\nconst interval=setInterval(()=>{updateDeploymentStatuses(paginated);},7000);return()=>clearInterval(interval);},[pullRequests,prSearchTerm,prSortBy,prSortOrder,prPage,updateDeploymentStatuses]);// Load comments when pagination changes\nuseEffect(()=>{if(pullRequests.length>0){const filtered=pullRequests.filter(pr=>pr.title.toLowerCase().includes(prSearchTerm.toLowerCase())||pr.author.toLowerCase().includes(prSearchTerm.toLowerCase())||pr.branchName.toLowerCase().includes(prSearchTerm.toLowerCase()));const sorted=sortPRs(filtered,prSortBy,prSortOrder);const paginated=sorted.slice((prPage-1)*ITEMS_PER_PAGE,prPage*ITEMS_PER_PAGE);loadDiscussionSummaries(paginated);}},[prPage,prSearchTerm,prSortBy,prSortOrder,pullRequests,loadDiscussionSummaries]);// Filter and sort PRs\nconst filteredPRs=pullRequests.filter(pr=>pr.title.toLowerCase().includes(prSearchTerm.toLowerCase())||pr.author.toLowerCase().includes(prSearchTerm.toLowerCase())||pr.branchName.toLowerCase().includes(prSearchTerm.toLowerCase()));const sortedPRs=sortPRs(filteredPRs,prSortBy,prSortOrder);const paginatedPRs=sortedPRs.slice((prPage-1)*ITEMS_PER_PAGE,prPage*ITEMS_PER_PAGE);const totalPRPages=Math.ceil(sortedPRs.length/ITEMS_PER_PAGE);if(loading){return/*#__PURE__*/_jsx(PageLayout,{pageName:\"branch-listing-loading\",showBreadcrumbs:false,children:/*#__PURE__*/_jsx(\"div\",{className:\"branch-listing-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"branch-listing-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"img\",{src:mascotImage,alt:\"SGEX Icon\",className:\"sgex-icon\"}),\" SGEX\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"a collaborative workbench for WHO SMART Guidelines\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading previews...\"})]})})});}if(error){return/*#__PURE__*/_jsx(PageLayout,{pageName:\"branch-listing-error\",showBreadcrumbs:false,children:/*#__PURE__*/_jsx(\"div\",{className:\"branch-listing-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"branch-listing-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"img\",{src:mascotImage,alt:\"SGEX Icon\",className:\"sgex-icon\"}),\" SGEX\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"a collaborative workbench for WHO SMART Guidelines\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Failed to load previews: \",error]}),/*#__PURE__*/_jsx(\"p\",{children:\"Please try refreshing the page or check back later.\"})]})]})})});}return/*#__PURE__*/_jsx(PageLayout,{pageName:\"branch-listing\",showBreadcrumbs:false,children:/*#__PURE__*/_jsxs(\"div\",{className:\"branch-listing-content\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"branch-listing-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"img\",{src:mascotImage,alt:\"SGEX Icon\",className:\"sgex-icon\"}),\" SGEX\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"a collaborative workbench for WHO SMART Guidelines\"}),/*#__PURE__*/_jsx(\"div\",{className:\"prominent-info\",children:/*#__PURE__*/_jsx(\"p\",{className:\"info-text\",children:\"\\uD83D\\uDC3E This landing page lists all available previews. Each branch and PR is automatically deployed to its own preview environment.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-cards\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-card main-site-card\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://litlfred.github.io/sgex/main\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"card-link\",children:[/*#__PURE__*/_jsx(\"img\",{src:mascotImage,alt:\"SGEX Mascot\",className:\"card-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"View Main Site\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Access the main SGEX workbench\"})]})}),!isAuthenticated&&/*#__PURE__*/_jsx(\"div\",{className:\"action-card login-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-icon\",children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"GitHub Login\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Login to view and add comments\"}),/*#__PURE__*/_jsx(PATLogin,{onAuthSuccess:handleAuthSuccess})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-tabs\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button active\",children:[\"\\uD83D\\uDD04 Pull Request Previews (\",sortedPRs.length,\")\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pr-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pr-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pr-filter-section\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pr-filter\",children:\"Filter PRs:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"pr-filter\",value:prFilter,onChange:e=>{setPrFilter(e.target.value);setPrPage(1);},className:\"filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"open\",children:\"Open PRs Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"closed\",children:\"Closed PRs Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All PRs\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search pull requests by title, author, or branch name...\",value:prSearchTerm,onChange:e=>{setPrSearchTerm(e.target.value);setPrPage(1);},className:\"pr-search\"}),/*#__PURE__*/_jsxs(\"select\",{value:prSortBy,onChange:e=>{setPrSortBy(e.target.value);setPrPage(1);},className:\"sort-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"updated\",children:\"Sort by Recent Updates\"}),/*#__PURE__*/_jsx(\"option\",{value:\"number\",children:\"Sort by PR Number\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alphabetical\",children:\"Sort Alphabetically\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:prSortOrder,onChange:e=>{setPrSortOrder(e.target.value);setPrPage(1);},className:\"sort-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"desc\",children:\"Descending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"asc\",children:\"Ascending\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pr-cards\",children:paginatedPRs.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-items\",children:prSearchTerm?/*#__PURE__*/_jsxs(\"p\",{children:[\"No pull requests match your search \\\"\",prSearchTerm,\"\\\".\"]}):/*#__PURE__*/_jsx(\"p\",{children:\"No pull request previews available at the moment.\"})}):paginatedPRs.map(pr=>{var _commentInputs$pr$num;return/*#__PURE__*/_jsxs(\"div\",{className:\"preview-card pr-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"item-name\",children:[\"#\",pr.number,\": \",pr.title]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-badges\",children:[/*#__PURE__*/_jsxs(\"span\",{className:`state-badge ${pr.state}`,children:[pr.state==='open'?'🟢':'🔴',\" \",pr.state]}),/*#__PURE__*/_jsx(\"span\",{className:`deployment-status ${getDeploymentStatusInfo(pr.safeBranchName).class}`,children:getDeploymentStatusInfo(pr.safeBranchName).text})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"pr-meta\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Branch:\"}),\" \",pr.branchName,\" \\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Author:\"}),\" \",pr.author]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-date\",children:[\"Created: \",pr.createdAt,\" \\u2022 Updated: \",pr.updatedAt]}),/*#__PURE__*/_jsxs(\"div\",{className:\"discussion-summary-bar\",onClick:()=>toggleDiscussion(pr.number),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"discussion-summary-text\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"discussion-summary-icon\",children:\"\\uD83D\\uDCAC\"}),getDiscussionSummaryText(pr.number)]}),/*#__PURE__*/_jsx(\"span\",{className:`discussion-expand-icon ${expandedDiscussions[pr.number]?'expanded':''}`,children:\"\\u25B6\"})]}),expandedDiscussions[pr.number]&&/*#__PURE__*/_jsxs(\"div\",{className:\"discussion-expanded-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"discussion-header\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"discussion-title\",children:\"Discussion\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"discussion-actions\",children:[/*#__PURE__*/_jsx(\"a\",{href:`https://github.com/litlfred/sgex/pull/${pr.number}/files`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"discussion-action-btn\",children:\"\\uD83D\\uDCC1 View Files\"}),/*#__PURE__*/_jsx(\"a\",{href:pr.prUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"discussion-action-btn secondary\",children:\"\\uD83D\\uDD17 View PR\"})]})]}),isAuthenticated&&/*#__PURE__*/_jsxs(\"div\",{className:\"comment-input-section\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:commentInputs[pr.number]||'',onChange:e=>setCommentInputs(prev=>({...prev,[pr.number]:e.target.value})),placeholder:\"Add a comment...\",className:\"comment-input\",rows:3}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>submitComment(pr.number,commentInputs[pr.number]),disabled:!((_commentInputs$pr$num=commentInputs[pr.number])!==null&&_commentInputs$pr$num!==void 0&&_commentInputs$pr$num.trim())||submittingComments[pr.number],className:\"submit-comment-btn\",children:submittingComments[pr.number]?'Submitting...':'Add Comment'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"discussion-scroll-area\",children:loadingComments?/*#__PURE__*/_jsx(\"div\",{className:\"comments-loading\",children:\"Loading full discussion...\"}):prComments[pr.number]&&prComments[pr.number].length>0?/*#__PURE__*/_jsx(\"div\",{className:\"comments-list\",children:prComments[pr.number].slice(-5).map(comment=>/*#__PURE__*/_jsxs(\"div\",{className:\"comment-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:comment.avatar_url,alt:comment.author,className:\"comment-avatar\"}),/*#__PURE__*/_jsx(\"span\",{className:\"comment-author\",children:comment.author}),/*#__PURE__*/_jsx(\"span\",{className:\"comment-date\",children:comment.created_at})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-body\",children:comment.body.length>200?`${comment.body.substring(0,200)}...`:comment.body})]},comment.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-comments\",children:!isAuthenticated?\"No comments yet. Login to add the first comment!\":\"No comments yet. Be the first to comment!\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pr-actions\",children:[/*#__PURE__*/_jsx(\"a\",{href:pr.url,className:\"preview-link\",target:\"_blank\",rel:\"noopener noreferrer\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDE80 View Preview\"})}),/*#__PURE__*/_jsx(\"a\",{href:pr.prUrl,className:\"pr-link\",target:\"_blank\",rel:\"noopener noreferrer\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCCB View PR\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"preview-path\",children:[\"Preview URL: \",pr.url]})})]},pr.id);})}),totalPRPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>setPrPage(Math.max(1,prPage-1)),disabled:prPage===1,children:\"\\u2190 Previous\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"pagination-info\",children:[\"Page \",prPage,\" of \",totalPRPages,\" (\",sortedPRs.length,\" total)\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>setPrPage(Math.min(totalPRPages,prPage+1)),disabled:prPage===totalPRPages,children:\"Next \\u2192\"})]})]})]})});};export default BranchListingPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","PageLayout","PATLogin","useThemeImage","jsx","_jsx","jsxs","_jsxs","BranchListingPage","pullRequests","setPullRequests","loading","setLoading","error","setError","prPage","setPrPage","prSearchTerm","setPrSearchTerm","prSortBy","setPrSortBy","prSortOrder","setPrSortOrder","deploymentStatuses","setDeploymentStatuses","prFilter","setPrFilter","isAuthenticated","setIsAuthenticated","githubToken","setGithubToken","prComments","setPrComments","loadingComments","commentInputs","setCommentInputs","submittingComments","setSubmittingComments","expandedDiscussions","setExpandedDiscussions","discussionSummaries","setDiscussionSummaries","loadingSummaries","setLoadingSummaries","ITEMS_PER_PAGE","mascotImage","handleAuthSuccess","token","sessionStorage","setItem","fetchPRCommentsSummary","prNumber","headers","response","fetch","ok","console","warn","status","count","lastComment","comments","json","length","author","user","login","created_at","Date","avatar_url","fetchAllPRComments","map","comment","id","body","toLocaleDateString","loadDiscussionSummaries","prs","summaries","pr","number","toggleDiscussion","isExpanded","prev","getDiscussionSummaryText","summary","timeAgo","getTimeAgo","date","now","diffMs","diffDays","Math","floor","submitComment","commentText","trim","method","JSON","stringify","Error","updatedComments","updatedSummary","checkDeploymentStatus","safeBranchName","data","workflow_runs","latestRun","conclusion","html_url","updateDeploymentStatuses","statuses","getDeploymentStatusInfo","text","class","sortPRs","sortBy","sortOrder","arguments","undefined","sort","a","b","comparison","title","localeCompare","dateA","updatedAt","dateB","getItem","fetchData","owner","repo","prState","prResponse","prData","formattedPRs","head","ref","replace","state","branchName","url","prUrl","updated_at","createdAt","slice","err","message","includes","log","mockPRs","filtered","filter","toLowerCase","sorted","paginated","interval","setInterval","clearInterval","filteredPRs","sortedPRs","paginatedPRs","totalPRPages","ceil","pageName","showBreadcrumbs","children","className","src","alt","href","target","rel","onAuthSuccess","htmlFor","value","onChange","e","type","placeholder","_commentInputs$pr$num","onClick","rows","disabled","substring","max","min"],"sources":["/home/runner/work/sgex/sgex/src/components/BranchListingPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { PageLayout } from './framework';\nimport PATLogin from './PATLogin';\nimport useThemeImage from '../hooks/useThemeImage';\nimport './BranchListingPage.css';\n\nconst BranchListingPage = () => {\n    const [pullRequests, setPullRequests] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const [prPage, setPrPage] = useState(1);\n    const [prSearchTerm, setPrSearchTerm] = useState('');\n    const [prSortBy, setPrSortBy] = useState('updated');\n    const [prSortOrder, setPrSortOrder] = useState('desc');\n    const [deploymentStatuses, setDeploymentStatuses] = useState({});\n    const [prFilter, setPrFilter] = useState('open');\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const [githubToken, setGithubToken] = useState(null);\n    const [prComments, setPrComments] = useState({});\n    const [loadingComments] = useState(false); // Removed setLoadingComments as it's not used\n    const [commentInputs, setCommentInputs] = useState({});\n    const [submittingComments, setSubmittingComments] = useState({});\n    const [expandedDiscussions, setExpandedDiscussions] = useState({});\n    const [discussionSummaries, setDiscussionSummaries] = useState({});\n    const [loadingSummaries, setLoadingSummaries] = useState(false);\n\n    const ITEMS_PER_PAGE = 10;\n\n    // Theme-aware image paths\n    const mascotImage = useThemeImage('sgex-mascot.png');\n\n    // GitHub authentication functions\n    const handleAuthSuccess = (token) => {\n        setGithubToken(token);\n        setIsAuthenticated(true);\n        sessionStorage.setItem('github_token', token);\n    };\n\n    // Function to fetch PR comments summary\n    const fetchPRCommentsSummary = async (prNumber) => {\n        try {\n            const headers = {\n                'Accept': 'application/vnd.github.v3+json'\n            };\n            \n            // Add auth header if available for better rate limits\n            if (githubToken) {\n                headers['Authorization'] = `token ${githubToken}`;\n            }\n            \n            const response = await fetch(\n                `https://api.github.com/repos/litlfred/sgex/issues/${prNumber}/comments`,\n                { headers }\n            );\n            \n            if (!response.ok) {\n                console.warn(`Failed to fetch comments for PR ${prNumber}: ${response.status}`);\n                return { count: 0, lastComment: null, error: true };\n            }\n            \n            const comments = await response.json();\n            if (comments.length === 0) {\n                return { count: 0, lastComment: null };\n            }\n            \n            const lastComment = comments[comments.length - 1];\n            return {\n                count: comments.length,\n                lastComment: {\n                    author: lastComment.user.login,\n                    created_at: new Date(lastComment.created_at),\n                    avatar_url: lastComment.user.avatar_url\n                }\n            };\n        } catch (error) {\n            console.warn(`Error fetching comment summary for PR ${prNumber}:`, error);\n            return { count: 0, lastComment: null, error: true };\n        }\n    };\n\n    // Function to fetch all PR comments (for expanded view)\n    const fetchAllPRComments = async (prNumber) => {\n        try {\n            const headers = {\n                'Accept': 'application/vnd.github.v3+json'\n            };\n            \n            // Add auth header if available for better rate limits\n            if (githubToken) {\n                headers['Authorization'] = `token ${githubToken}`;\n            }\n            \n            const response = await fetch(\n                `https://api.github.com/repos/litlfred/sgex/issues/${prNumber}/comments`,\n                { headers }\n            );\n            \n            if (!response.ok) {\n                console.warn(`Failed to fetch comments for PR ${prNumber}: ${response.status}`);\n                return [];\n            }\n            \n            const comments = await response.json();\n            return comments.map(comment => ({\n                id: comment.id,\n                author: comment.user.login,\n                body: comment.body,\n                created_at: new Date(comment.created_at).toLocaleDateString(),\n                avatar_url: comment.user.avatar_url\n            }));\n        } catch (error) {\n            console.warn(`Error fetching all comments for PR ${prNumber}:`, error);\n            return [];\n        }\n    };\n\n    // Function to load discussion summaries for visible PRs\n    const loadDiscussionSummaries = useCallback(async (prs) => {\n        if (prs.length === 0) return;\n        \n        setLoadingSummaries(true);\n        const summaries = {};\n        \n        for (const pr of prs) {\n            summaries[pr.number] = await fetchPRCommentsSummary(pr.number);\n        }\n        \n        setDiscussionSummaries(summaries);\n        setLoadingSummaries(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [githubToken]);\n\n    // Function to toggle discussion expansion\n    const toggleDiscussion = async (prNumber) => {\n        const isExpanded = expandedDiscussions[prNumber];\n        \n        if (!isExpanded) {\n            // Load all comments when expanding\n            const comments = await fetchAllPRComments(prNumber);\n            setPrComments(prev => ({ ...prev, [prNumber]: comments }));\n        }\n        \n        setExpandedDiscussions(prev => ({\n            ...prev,\n            [prNumber]: !isExpanded\n        }));\n    };\n\n    // Function to get discussion summary text\n    const getDiscussionSummaryText = (prNumber) => {\n        const summary = discussionSummaries[prNumber];\n        \n        if (loadingSummaries) {\n            return \"Loading discussion...\";\n        }\n        \n        if (!summary) {\n            return \"No comments yet\";\n        }\n        \n        if (summary.error) {\n            return \"Unable to load comments\";\n        }\n        \n        if (summary.count === 0) {\n            return \"No comments yet\";\n        }\n        \n        const { count, lastComment } = summary;\n        const timeAgo = lastComment ? getTimeAgo(lastComment.created_at) : '';\n        \n        return `${count} comment${count > 1 ? 's' : ''}, last by ${lastComment.author} ${timeAgo}`;\n    };\n\n    // Helper function to get relative time\n    const getTimeAgo = (date) => {\n        const now = new Date();\n        const diffMs = now - date;\n        const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n        \n        if (diffDays === 0) return 'today';\n        if (diffDays === 1) return '1 day ago';\n        if (diffDays < 7) return `${diffDays} days ago`;\n        if (diffDays < 30) return `${Math.floor(diffDays / 7)} week${Math.floor(diffDays / 7) > 1 ? 's' : ''} ago`;\n        return `${Math.floor(diffDays / 30)} month${Math.floor(diffDays / 30) > 1 ? 's' : ''} ago`;\n    };\n\n    // Function to submit a comment\n    const submitComment = async (prNumber, commentText) => {\n        if (!githubToken || !commentText.trim()) return false;\n        \n        setSubmittingComments(prev => ({ ...prev, [prNumber]: true }));\n        \n        try {\n            const response = await fetch(\n                `https://api.github.com/repos/litlfred/sgex/issues/${prNumber}/comments`,\n                {\n                    method: 'POST',\n                    headers: {\n                        'Authorization': `token ${githubToken}`,\n                        'Accept': 'application/vnd.github.v3+json',\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        body: commentText\n                    })\n                }\n            );\n            \n            if (!response.ok) {\n                throw new Error(`Failed to submit comment: ${response.status}`);\n            }\n            \n            setCommentInputs(prev => ({ ...prev, [prNumber]: '' }));\n            \n            // Refresh both full comments (if expanded) and summary\n            if (expandedDiscussions[prNumber]) {\n                const updatedComments = await fetchAllPRComments(prNumber);\n                setPrComments(prev => ({ ...prev, [prNumber]: updatedComments }));\n            }\n            \n            // Refresh the discussion summary\n            const updatedSummary = await fetchPRCommentsSummary(prNumber);\n            setDiscussionSummaries(prev => ({ ...prev, [prNumber]: updatedSummary }));\n            \n            return true;\n        } catch (error) {\n            console.error(`Error submitting comment for PR ${prNumber}:`, error);\n            return false;\n        } finally {\n            setSubmittingComments(prev => ({ ...prev, [prNumber]: false }));\n        }\n    };\n\n    // Function to check deployment status for a branch\n    const checkDeploymentStatus = async (safeBranchName) => {\n        try {\n            const response = await fetch(\n                `https://api.github.com/repos/litlfred/sgex/actions/workflows/deploy.yml/runs?branch=${safeBranchName}&per_page=1`,\n                {\n                    headers: githubToken ? {\n                        'Authorization': `token ${githubToken}`,\n                        'Accept': 'application/vnd.github.v3+json'\n                    } : {\n                        'Accept': 'application/vnd.github.v3+json'\n                    }\n                }\n            );\n            \n            if (!response.ok) {\n                throw new Error(`Failed to fetch deployment status: ${response.status}`);\n            }\n            \n            const data = await response.json();\n            if (data.workflow_runs && data.workflow_runs.length > 0) {\n                const latestRun = data.workflow_runs[0];\n                return {\n                    status: latestRun.status,\n                    conclusion: latestRun.conclusion,\n                    html_url: latestRun.html_url,\n                    created_at: latestRun.created_at\n                };\n            }\n            \n            return { status: 'unknown', conclusion: null };\n        } catch (error) {\n            console.error(`Error checking deployment status for ${safeBranchName}:`, error);\n            return { status: 'error', conclusion: 'error' };\n        }\n    };\n\n    // Function to update deployment statuses for visible PRs\n    const updateDeploymentStatuses = useCallback(async (prs) => {\n        if (prs.length === 0) return;\n        \n        const statuses = {};\n        for (const pr of prs) {\n            statuses[pr.safeBranchName] = await checkDeploymentStatus(pr.safeBranchName);\n        }\n        \n        setDeploymentStatuses(prev => ({ ...prev, ...statuses }));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [githubToken]);\n\n    // Function to get deployment status display info\n    const getDeploymentStatusInfo = (safeBranchName) => {\n        const status = deploymentStatuses[safeBranchName];\n        if (!status) return { text: 'Checking...', class: 'unknown' };\n        \n        if (status.status === 'completed' && status.conclusion === 'success') {\n            return { text: '✅ Deployed', class: 'success' };\n        } else if (status.status === 'completed' && status.conclusion === 'failure') {\n            return { text: '❌ Failed', class: 'failed' };\n        } else if (status.status === 'in_progress') {\n            return { text: '🔄 Deploying', class: 'in-progress' };\n        } else if (status.status === 'queued') {\n            return { text: '⏳ Queued', class: 'queued' };\n        } else if (status.status === 'error') {\n            return { text: '⚠️ Error', class: 'error' };\n        } else {\n            return { text: '❓ Unknown', class: 'unknown' };\n        }\n    };\n\n    // Sorting functions\n    const sortPRs = (prs, sortBy, sortOrder = 'desc') => {\n        return [...prs].sort((a, b) => {\n            let comparison = 0;\n            switch (sortBy) {\n                case 'number':\n                    comparison = b.number - a.number;\n                    break;\n                case 'alphabetical':\n                    comparison = a.title.localeCompare(b.title);\n                    break;\n                case 'updated':\n                default:\n                    const dateA = new Date(a.updatedAt);\n                    const dateB = new Date(b.updatedAt);\n                    comparison = dateB - dateA;\n                    break;\n            }\n            \n            // Reverse comparison for ascending order\n            return sortOrder === 'asc' ? -comparison : comparison;\n        });\n    };\n\n    // Check for existing authentication on component mount\n    useEffect(() => {\n        const token = sessionStorage.getItem('github_token');\n        if (token) {\n            setGithubToken(token);\n            setIsAuthenticated(true);\n        }\n    }, []);\n\n    // Fetch data\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                setLoading(true);\n                \n                const owner = 'litlfred';\n                const repo = 'sgex';\n                \n                const prState = prFilter === 'all' ? 'all' : prFilter;\n                const prResponse = await fetch(`https://api.github.com/repos/${owner}/${repo}/pulls?state=${prState}&sort=updated&per_page=100`);\n                if (!prResponse.ok) {\n                    throw new Error(`Failed to fetch pull requests: ${prResponse.status}`);\n                }\n                const prData = await prResponse.json();\n                \n                const formattedPRs = prData.map(pr => {\n                    const safeBranchName = pr.head.ref.replace(/\\//g, '-');\n                    return {\n                        id: pr.id,\n                        number: pr.number,\n                        title: pr.title,\n                        state: pr.state,\n                        author: pr.user.login,\n                        branchName: pr.head.ref,\n                        safeBranchName: safeBranchName,\n                        url: `./${safeBranchName}/index.html`,\n                        prUrl: pr.html_url,\n                        updatedAt: new Date(pr.updated_at).toLocaleDateString(),\n                        createdAt: new Date(pr.created_at).toLocaleDateString()\n                    };\n                });\n                \n                setPullRequests(formattedPRs);\n                \n                // Always try to load discussion summaries\n                await loadDiscussionSummaries(formattedPRs.slice(0, ITEMS_PER_PAGE));\n            } catch (err) {\n                console.error('Error fetching data:', err);\n                setError(err.message);\n                \n                // Fallback mock data\n                if (err.message.includes('Failed to fetch')) {\n                    console.log('Using fallback mock data...');\n                    const mockPRs = [\n                        {\n                            id: 1,\n                            number: 460,\n                            title: 'Improve multi-page selector landing page for GitHub deployment',\n                            state: 'open',\n                            author: 'copilot',\n                            branchName: 'copilot/fix-459',\n                            safeBranchName: 'copilot-fix-459',\n                            url: './sgex/copilot-fix-459/index.html',\n                            prUrl: 'https://github.com/litlfred/sgex/pull/460',\n                            updatedAt: new Date().toLocaleDateString(),\n                            createdAt: new Date(Date.now() - 86400000).toLocaleDateString()\n                        },\n                        {\n                            id: 2,\n                            number: 459,\n                            title: 'Add enhanced PR preview functionality',\n                            state: 'open',\n                            author: 'developer',\n                            branchName: 'feature/pr-preview',\n                            safeBranchName: 'feature-pr-preview',\n                            url: './sgex/feature-pr-preview/index.html',\n                            prUrl: 'https://github.com/litlfred/sgex/pull/459',\n                            updatedAt: new Date(Date.now() - 172800000).toLocaleDateString(),\n                            createdAt: new Date(Date.now() - 345600000).toLocaleDateString()\n                        }\n                    ];\n                    setPullRequests(mockPRs);\n                    setError(null);\n                }\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchData();\n    }, [prFilter, githubToken, loadDiscussionSummaries]);\n\n    // Poll deployment statuses every 7 seconds for visible PRs\n    useEffect(() => {\n        if (pullRequests.length === 0) return;\n        \n        const filtered = pullRequests.filter(pr => \n            pr.title.toLowerCase().includes(prSearchTerm.toLowerCase()) ||\n            pr.author.toLowerCase().includes(prSearchTerm.toLowerCase()) ||\n            pr.branchName.toLowerCase().includes(prSearchTerm.toLowerCase())\n        );\n        const sorted = sortPRs(filtered, prSortBy, prSortOrder);\n        const paginated = sorted.slice((prPage - 1) * ITEMS_PER_PAGE, prPage * ITEMS_PER_PAGE);\n        \n        // Initial status check\n        updateDeploymentStatuses(paginated);\n        \n        // Set up polling every 7 seconds\n        const interval = setInterval(() => {\n            updateDeploymentStatuses(paginated);\n        }, 7000);\n        \n        return () => clearInterval(interval);\n    }, [pullRequests, prSearchTerm, prSortBy, prSortOrder, prPage, updateDeploymentStatuses]);\n\n    // Load comments when pagination changes\n    useEffect(() => {\n        if (pullRequests.length > 0) {\n            const filtered = pullRequests.filter(pr => \n                pr.title.toLowerCase().includes(prSearchTerm.toLowerCase()) ||\n                pr.author.toLowerCase().includes(prSearchTerm.toLowerCase()) ||\n                pr.branchName.toLowerCase().includes(prSearchTerm.toLowerCase())\n            );\n            const sorted = sortPRs(filtered, prSortBy, prSortOrder);\n            const paginated = sorted.slice((prPage - 1) * ITEMS_PER_PAGE, prPage * ITEMS_PER_PAGE);\n            loadDiscussionSummaries(paginated);\n        }\n    }, [prPage, prSearchTerm, prSortBy, prSortOrder, pullRequests, loadDiscussionSummaries]);\n\n    // Filter and sort PRs\n    const filteredPRs = pullRequests.filter(pr => \n        pr.title.toLowerCase().includes(prSearchTerm.toLowerCase()) ||\n        pr.author.toLowerCase().includes(prSearchTerm.toLowerCase()) ||\n        pr.branchName.toLowerCase().includes(prSearchTerm.toLowerCase())\n    );\n    const sortedPRs = sortPRs(filteredPRs, prSortBy, prSortOrder);\n    const paginatedPRs = sortedPRs.slice((prPage - 1) * ITEMS_PER_PAGE, prPage * ITEMS_PER_PAGE);\n    const totalPRPages = Math.ceil(sortedPRs.length / ITEMS_PER_PAGE);\n\n    if (loading) {\n        return (\n            <PageLayout pageName=\"branch-listing-loading\" showBreadcrumbs={false}>\n                <div className=\"branch-listing-content\">\n                    <div className=\"branch-listing-header\">\n                        <h1><img src={mascotImage} alt=\"SGEX Icon\" className=\"sgex-icon\" /> SGEX</h1>\n                        <p className=\"subtitle\">a collaborative workbench for WHO SMART Guidelines</p>\n                        <div className=\"loading\">Loading previews...</div>\n                    </div>\n                </div>\n            </PageLayout>\n        );\n    }\n\n    if (error) {\n        return (\n            <PageLayout pageName=\"branch-listing-error\" showBreadcrumbs={false}>\n                <div className=\"branch-listing-content\">\n                    <div className=\"branch-listing-header\">\n                        <h1><img src={mascotImage} alt=\"SGEX Icon\" className=\"sgex-icon\" /> SGEX</h1>\n                        <p className=\"subtitle\">a collaborative workbench for WHO SMART Guidelines</p>\n                        <div className=\"error\">\n                            <p>Failed to load previews: {error}</p>\n                            <p>Please try refreshing the page or check back later.</p>\n                        </div>\n                    </div>\n                </div>\n            </PageLayout>\n        );\n    }\n\n    return (\n        <PageLayout pageName=\"branch-listing\" showBreadcrumbs={false}>\n            <div className=\"branch-listing-content\">\n                <header className=\"branch-listing-header\">\n                    <h1><img src={mascotImage} alt=\"SGEX Icon\" className=\"sgex-icon\" /> SGEX</h1>\n                    <p className=\"subtitle\">a collaborative workbench for WHO SMART Guidelines</p>\n                    \n                    <div className=\"prominent-info\">\n                        <p className=\"info-text\">\n                            🐾 This landing page lists all available previews. \n                            Each branch and PR is automatically deployed to its own preview environment.\n                        </p>\n                    </div>\n                </header>\n\n                <div className=\"action-cards\">\n                    <div className=\"action-card main-site-card\">\n                        <a \n                            href=\"https://litlfred.github.io/sgex/main\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"card-link\"\n                        >\n                            <img src={mascotImage} alt=\"SGEX Mascot\" className=\"card-icon\" />\n                            <h3>View Main Site</h3>\n                            <p>Access the main SGEX workbench</p>\n                        </a>\n                    </div>\n                    \n                    {!isAuthenticated && (\n                        <div className=\"action-card login-card\">\n                            <div className=\"card-content\">\n                                <div className=\"login-icon\">🔐</div>\n                                <h3>GitHub Login</h3>\n                                <p>Login to view and add comments</p>\n                                <PATLogin onAuthSuccess={handleAuthSuccess} />\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"preview-tabs\">\n                    <button className=\"tab-button active\">\n                        🔄 Pull Request Previews ({sortedPRs.length})\n                    </button>\n                </div>\n\n                <div className=\"pr-section\">\n                    <div className=\"pr-controls\">\n                        <div className=\"pr-filter-section\">\n                            <label htmlFor=\"pr-filter\">Filter PRs:</label>\n                            <select\n                                id=\"pr-filter\"\n                                value={prFilter}\n                                onChange={(e) => {\n                                    setPrFilter(e.target.value);\n                                    setPrPage(1);\n                                }}\n                                className=\"filter-select\"\n                            >\n                                <option value=\"open\">Open PRs Only</option>\n                                <option value=\"closed\">Closed PRs Only</option>\n                                <option value=\"all\">All PRs</option>\n                            </select>\n                        </div>\n                        <input\n                            type=\"text\"\n                            placeholder=\"Search pull requests by title, author, or branch name...\"\n                            value={prSearchTerm}\n                            onChange={(e) => {\n                                setPrSearchTerm(e.target.value);\n                                setPrPage(1);\n                            }}\n                            className=\"pr-search\"\n                        />\n                        <select\n                            value={prSortBy}\n                            onChange={(e) => {\n                                setPrSortBy(e.target.value);\n                                setPrPage(1);\n                            }}\n                            className=\"sort-select\"\n                        >\n                            <option value=\"updated\">Sort by Recent Updates</option>\n                            <option value=\"number\">Sort by PR Number</option>\n                            <option value=\"alphabetical\">Sort Alphabetically</option>\n                        </select>\n                        <select\n                            value={prSortOrder}\n                            onChange={(e) => {\n                                setPrSortOrder(e.target.value);\n                                setPrPage(1);\n                            }}\n                            className=\"sort-select\"\n                        >\n                            <option value=\"desc\">Descending</option>\n                            <option value=\"asc\">Ascending</option>\n                        </select>\n                    </div>\n\n                    <div className=\"pr-cards\">\n                        {paginatedPRs.length === 0 ? (\n                            <div className=\"no-items\">\n                                {prSearchTerm ? (\n                                    <p>No pull requests match your search \"{prSearchTerm}\".</p>\n                                ) : (\n                                    <p>No pull request previews available at the moment.</p>\n                                )}\n                            </div>\n                        ) : (\n                            paginatedPRs.map((pr) => (\n                                <div key={pr.id} className=\"preview-card pr-card\">\n                                    <div className=\"card-header\">\n                                        <h3 className=\"item-name\">#{pr.number}: {pr.title}</h3>\n                                        <div className=\"card-badges\">\n                                            <span className={`state-badge ${pr.state}`}>\n                                                {pr.state === 'open' ? '🟢' : '🔴'} {pr.state}\n                                            </span>\n                                            <span className={`deployment-status ${getDeploymentStatusInfo(pr.safeBranchName).class}`}>\n                                                {getDeploymentStatusInfo(pr.safeBranchName).text}\n                                            </span>\n                                        </div>\n                                    </div>\n                                    \n                                    <div className=\"card-body\">\n                                        <p className=\"pr-meta\">\n                                            <strong>Branch:</strong> {pr.branchName} • <strong>Author:</strong> {pr.author}\n                                        </p>\n                                        <p className=\"item-date\">\n                                            Created: {pr.createdAt} • Updated: {pr.updatedAt}\n                                        </p>\n                                        \n                                        {/* Discussion Summary Status Bar - Always show */}\n                                        <div \n                                            className=\"discussion-summary-bar\"\n                                            onClick={() => toggleDiscussion(pr.number)}\n                                        >\n                                            <div className=\"discussion-summary-text\">\n                                                <span className=\"discussion-summary-icon\">💬</span>\n                                                {getDiscussionSummaryText(pr.number)}\n                                            </div>\n                                            <span className={`discussion-expand-icon ${expandedDiscussions[pr.number] ? 'expanded' : ''}`}>\n                                                ▶\n                                            </span>\n                                        </div>\n\n                                        {/* Expanded Discussion Section */}\n                                        {expandedDiscussions[pr.number] && (\n                                            <div className=\"discussion-expanded-section\">\n                                                <div className=\"discussion-header\">\n                                                    <h4 className=\"discussion-title\">Discussion</h4>\n                                                    <div className=\"discussion-actions\">\n                                                        <a \n                                                            href={`https://github.com/litlfred/sgex/pull/${pr.number}/files`}\n                                                            target=\"_blank\"\n                                                            rel=\"noopener noreferrer\"\n                                                            className=\"discussion-action-btn\"\n                                                        >\n                                                            📁 View Files\n                                                        </a>\n                                                        <a \n                                                            href={pr.prUrl}\n                                                            target=\"_blank\"\n                                                            rel=\"noopener noreferrer\"\n                                                            className=\"discussion-action-btn secondary\"\n                                                        >\n                                                            🔗 View PR\n                                                        </a>\n                                                    </div>\n                                                </div>\n                                                \n                                                {/* Comment Input at Top - Only for authenticated users */}\n                                                {isAuthenticated && (\n                                                    <div className=\"comment-input-section\">\n                                                        <textarea\n                                                            value={commentInputs[pr.number] || ''}\n                                                            onChange={(e) => setCommentInputs(prev => ({\n                                                                ...prev,\n                                                                [pr.number]: e.target.value\n                                                            }))}\n                                                            placeholder=\"Add a comment...\"\n                                                            className=\"comment-input\"\n                                                            rows={3}\n                                                        />\n                                                        <button\n                                                            onClick={() => submitComment(pr.number, commentInputs[pr.number])}\n                                                            disabled={!commentInputs[pr.number]?.trim() || submittingComments[pr.number]}\n                                                            className=\"submit-comment-btn\"\n                                                        >\n                                                            {submittingComments[pr.number] ? 'Submitting...' : 'Add Comment'}\n                                                        </button>\n                                                    </div>\n                                                )}\n                                                \n                                                {/* Scrollable Comments Area - Show for everyone */}\n                                                <div className=\"discussion-scroll-area\">\n                                                    {loadingComments ? (\n                                                        <div className=\"comments-loading\">Loading full discussion...</div>\n                                                    ) : prComments[pr.number] && prComments[pr.number].length > 0 ? (\n                                                        <div className=\"comments-list\">\n                                                            {prComments[pr.number].slice(-5).map((comment) => (\n                                                                <div key={comment.id} className=\"comment-item\">\n                                                                    <div className=\"comment-header\">\n                                                                        <img \n                                                                            src={comment.avatar_url} \n                                                                            alt={comment.author} \n                                                                            className=\"comment-avatar\"\n                                                                        />\n                                                                        <span className=\"comment-author\">{comment.author}</span>\n                                                                        <span className=\"comment-date\">{comment.created_at}</span>\n                                                                    </div>\n                                                                    <div className=\"comment-body\">\n                                                                        {comment.body.length > 200 ? \n                                                                            `${comment.body.substring(0, 200)}...` : \n                                                                            comment.body\n                                                                        }\n                                                                    </div>\n                                                                </div>\n                                                            ))}\n                                                        </div>\n                                                    ) : (\n                                                        <div className=\"no-comments\">\n                                                            {!isAuthenticated ? \n                                                                \"No comments yet. Login to add the first comment!\" :\n                                                                \"No comments yet. Be the first to comment!\"\n                                                            }\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        )}\n                                        \n                                        <div className=\"pr-actions\">\n                                            <a \n                                                href={pr.url} \n                                                className=\"preview-link\"\n                                                target=\"_blank\"\n                                                rel=\"noopener noreferrer\"\n                                            >\n                                                <span>🚀 View Preview</span>\n                                            </a>\n                                            \n                                            <a \n                                                href={pr.prUrl} \n                                                className=\"pr-link\"\n                                                target=\"_blank\"\n                                                rel=\"noopener noreferrer\"\n                                            >\n                                                <span>📋 View PR</span>\n                                            </a>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"card-footer\">\n                                        <small className=\"preview-path\">\n                                            Preview URL: {pr.url}\n                                        </small>\n                                    </div>\n                                </div>\n                            ))\n                        )}\n                    </div>\n\n                    {totalPRPages > 1 && (\n                        <div className=\"pagination\">\n                            <button \n                                className=\"pagination-btn\"\n                                onClick={() => setPrPage(Math.max(1, prPage - 1))}\n                                disabled={prPage === 1}\n                            >\n                                ← Previous\n                            </button>\n                            <span className=\"pagination-info\">\n                                Page {prPage} of {totalPRPages} ({sortedPRs.length} total)\n                            </span>\n                            <button \n                                className=\"pagination-btn\"\n                                onClick={() => setPrPage(Math.min(totalPRPages, prPage + 1))}\n                                disabled={prPage === totalPRPages}\n                            >\n                                Next →\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </PageLayout>\n    );\n};\n\nexport default BranchListingPage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,UAAU,KAAQ,aAAa,CACxC,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,aAAa,KAAM,wBAAwB,CAClD,MAAO,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjC,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACiB,MAAM,CAAEC,SAAS,CAAC,CAAGlB,QAAQ,CAAC,CAAC,CAAC,CACvC,KAAM,CAACmB,YAAY,CAAEC,eAAe,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACqB,QAAQ,CAAEC,WAAW,CAAC,CAAGtB,QAAQ,CAAC,SAAS,CAAC,CACnD,KAAM,CAACuB,WAAW,CAAEC,cAAc,CAAC,CAAGxB,QAAQ,CAAC,MAAM,CAAC,CACtD,KAAM,CAACyB,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG1B,QAAQ,CAAC,CAAC,CAAC,CAAC,CAChE,KAAM,CAAC2B,QAAQ,CAAEC,WAAW,CAAC,CAAG5B,QAAQ,CAAC,MAAM,CAAC,CAChD,KAAM,CAAC6B,eAAe,CAAEC,kBAAkB,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAC+B,WAAW,CAAEC,cAAc,CAAC,CAAGhC,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACiC,UAAU,CAAEC,aAAa,CAAC,CAAGlC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAChD,KAAM,CAACmC,eAAe,CAAC,CAAGnC,QAAQ,CAAC,KAAK,CAAC,CAAE;AAC3C,KAAM,CAACoC,aAAa,CAAEC,gBAAgB,CAAC,CAAGrC,QAAQ,CAAC,CAAC,CAAC,CAAC,CACtD,KAAM,CAACsC,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGvC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAChE,KAAM,CAACwC,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGzC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAClE,KAAM,CAAC0C,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG3C,QAAQ,CAAC,CAAC,CAAC,CAAC,CAClE,KAAM,CAAC4C,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG7C,QAAQ,CAAC,KAAK,CAAC,CAE/D,KAAM,CAAA8C,cAAc,CAAG,EAAE,CAEzB;AACA,KAAM,CAAAC,WAAW,CAAG1C,aAAa,CAAC,iBAAiB,CAAC,CAEpD;AACA,KAAM,CAAA2C,iBAAiB,CAAIC,KAAK,EAAK,CACjCjB,cAAc,CAACiB,KAAK,CAAC,CACrBnB,kBAAkB,CAAC,IAAI,CAAC,CACxBoB,cAAc,CAACC,OAAO,CAAC,cAAc,CAAEF,KAAK,CAAC,CACjD,CAAC,CAED;AACA,KAAM,CAAAG,sBAAsB,CAAG,KAAO,CAAAC,QAAQ,EAAK,CAC/C,GAAI,CACA,KAAM,CAAAC,OAAO,CAAG,CACZ,QAAQ,CAAE,gCACd,CAAC,CAED;AACA,GAAIvB,WAAW,CAAE,CACbuB,OAAO,CAAC,eAAe,CAAC,CAAG,SAASvB,WAAW,EAAE,CACrD,CAEA,KAAM,CAAAwB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CACxB,qDAAqDH,QAAQ,WAAW,CACxE,CAAEC,OAAQ,CACd,CAAC,CAED,GAAI,CAACC,QAAQ,CAACE,EAAE,CAAE,CACdC,OAAO,CAACC,IAAI,CAAC,mCAAmCN,QAAQ,KAAKE,QAAQ,CAACK,MAAM,EAAE,CAAC,CAC/E,MAAO,CAAEC,KAAK,CAAE,CAAC,CAAEC,WAAW,CAAE,IAAI,CAAE/C,KAAK,CAAE,IAAK,CAAC,CACvD,CAEA,KAAM,CAAAgD,QAAQ,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CACtC,GAAID,QAAQ,CAACE,MAAM,GAAK,CAAC,CAAE,CACvB,MAAO,CAAEJ,KAAK,CAAE,CAAC,CAAEC,WAAW,CAAE,IAAK,CAAC,CAC1C,CAEA,KAAM,CAAAA,WAAW,CAAGC,QAAQ,CAACA,QAAQ,CAACE,MAAM,CAAG,CAAC,CAAC,CACjD,MAAO,CACHJ,KAAK,CAAEE,QAAQ,CAACE,MAAM,CACtBH,WAAW,CAAE,CACTI,MAAM,CAAEJ,WAAW,CAACK,IAAI,CAACC,KAAK,CAC9BC,UAAU,CAAE,GAAI,CAAAC,IAAI,CAACR,WAAW,CAACO,UAAU,CAAC,CAC5CE,UAAU,CAAET,WAAW,CAACK,IAAI,CAACI,UACjC,CACJ,CAAC,CACL,CAAE,MAAOxD,KAAK,CAAE,CACZ2C,OAAO,CAACC,IAAI,CAAC,yCAAyCN,QAAQ,GAAG,CAAEtC,KAAK,CAAC,CACzE,MAAO,CAAE8C,KAAK,CAAE,CAAC,CAAEC,WAAW,CAAE,IAAI,CAAE/C,KAAK,CAAE,IAAK,CAAC,CACvD,CACJ,CAAC,CAED;AACA,KAAM,CAAAyD,kBAAkB,CAAG,KAAO,CAAAnB,QAAQ,EAAK,CAC3C,GAAI,CACA,KAAM,CAAAC,OAAO,CAAG,CACZ,QAAQ,CAAE,gCACd,CAAC,CAED;AACA,GAAIvB,WAAW,CAAE,CACbuB,OAAO,CAAC,eAAe,CAAC,CAAG,SAASvB,WAAW,EAAE,CACrD,CAEA,KAAM,CAAAwB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CACxB,qDAAqDH,QAAQ,WAAW,CACxE,CAAEC,OAAQ,CACd,CAAC,CAED,GAAI,CAACC,QAAQ,CAACE,EAAE,CAAE,CACdC,OAAO,CAACC,IAAI,CAAC,mCAAmCN,QAAQ,KAAKE,QAAQ,CAACK,MAAM,EAAE,CAAC,CAC/E,MAAO,EAAE,CACb,CAEA,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CACtC,MAAO,CAAAD,QAAQ,CAACU,GAAG,CAACC,OAAO,GAAK,CAC5BC,EAAE,CAAED,OAAO,CAACC,EAAE,CACdT,MAAM,CAAEQ,OAAO,CAACP,IAAI,CAACC,KAAK,CAC1BQ,IAAI,CAAEF,OAAO,CAACE,IAAI,CAClBP,UAAU,CAAE,GAAI,CAAAC,IAAI,CAACI,OAAO,CAACL,UAAU,CAAC,CAACQ,kBAAkB,CAAC,CAAC,CAC7DN,UAAU,CAAEG,OAAO,CAACP,IAAI,CAACI,UAC7B,CAAC,CAAC,CAAC,CACP,CAAE,MAAOxD,KAAK,CAAE,CACZ2C,OAAO,CAACC,IAAI,CAAC,sCAAsCN,QAAQ,GAAG,CAAEtC,KAAK,CAAC,CACtE,MAAO,EAAE,CACb,CACJ,CAAC,CAED;AACA,KAAM,CAAA+D,uBAAuB,CAAG5E,WAAW,CAAC,KAAO,CAAA6E,GAAG,EAAK,CACvD,GAAIA,GAAG,CAACd,MAAM,GAAK,CAAC,CAAE,OAEtBpB,mBAAmB,CAAC,IAAI,CAAC,CACzB,KAAM,CAAAmC,SAAS,CAAG,CAAC,CAAC,CAEpB,IAAK,KAAM,CAAAC,EAAE,GAAI,CAAAF,GAAG,CAAE,CAClBC,SAAS,CAACC,EAAE,CAACC,MAAM,CAAC,CAAG,KAAM,CAAA9B,sBAAsB,CAAC6B,EAAE,CAACC,MAAM,CAAC,CAClE,CAEAvC,sBAAsB,CAACqC,SAAS,CAAC,CACjCnC,mBAAmB,CAAC,KAAK,CAAC,CAC9B;AACA,CAAC,CAAE,CAACd,WAAW,CAAC,CAAC,CAEjB;AACA,KAAM,CAAAoD,gBAAgB,CAAG,KAAO,CAAA9B,QAAQ,EAAK,CACzC,KAAM,CAAA+B,UAAU,CAAG5C,mBAAmB,CAACa,QAAQ,CAAC,CAEhD,GAAI,CAAC+B,UAAU,CAAE,CACb;AACA,KAAM,CAAArB,QAAQ,CAAG,KAAM,CAAAS,kBAAkB,CAACnB,QAAQ,CAAC,CACnDnB,aAAa,CAACmD,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAAChC,QAAQ,EAAGU,QAAS,CAAC,CAAC,CAAC,CAC9D,CAEAtB,sBAAsB,CAAC4C,IAAI,GAAK,CAC5B,GAAGA,IAAI,CACP,CAAChC,QAAQ,EAAG,CAAC+B,UACjB,CAAC,CAAC,CAAC,CACP,CAAC,CAED;AACA,KAAM,CAAAE,wBAAwB,CAAIjC,QAAQ,EAAK,CAC3C,KAAM,CAAAkC,OAAO,CAAG7C,mBAAmB,CAACW,QAAQ,CAAC,CAE7C,GAAIT,gBAAgB,CAAE,CAClB,MAAO,uBAAuB,CAClC,CAEA,GAAI,CAAC2C,OAAO,CAAE,CACV,MAAO,iBAAiB,CAC5B,CAEA,GAAIA,OAAO,CAACxE,KAAK,CAAE,CACf,MAAO,yBAAyB,CACpC,CAEA,GAAIwE,OAAO,CAAC1B,KAAK,GAAK,CAAC,CAAE,CACrB,MAAO,iBAAiB,CAC5B,CAEA,KAAM,CAAEA,KAAK,CAAEC,WAAY,CAAC,CAAGyB,OAAO,CACtC,KAAM,CAAAC,OAAO,CAAG1B,WAAW,CAAG2B,UAAU,CAAC3B,WAAW,CAACO,UAAU,CAAC,CAAG,EAAE,CAErE,MAAO,GAAGR,KAAK,WAAWA,KAAK,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,aAAaC,WAAW,CAACI,MAAM,IAAIsB,OAAO,EAAE,CAC9F,CAAC,CAED;AACA,KAAM,CAAAC,UAAU,CAAIC,IAAI,EAAK,CACzB,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAArB,IAAI,CAAC,CAAC,CACtB,KAAM,CAAAsB,MAAM,CAAGD,GAAG,CAAGD,IAAI,CACzB,KAAM,CAAAG,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACH,MAAM,EAAI,IAAI,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAC,CAAC,CAE3D,GAAIC,QAAQ,GAAK,CAAC,CAAE,MAAO,OAAO,CAClC,GAAIA,QAAQ,GAAK,CAAC,CAAE,MAAO,WAAW,CACtC,GAAIA,QAAQ,CAAG,CAAC,CAAE,MAAO,GAAGA,QAAQ,WAAW,CAC/C,GAAIA,QAAQ,CAAG,EAAE,CAAE,MAAO,GAAGC,IAAI,CAACC,KAAK,CAACF,QAAQ,CAAG,CAAC,CAAC,QAAQC,IAAI,CAACC,KAAK,CAACF,QAAQ,CAAG,CAAC,CAAC,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,MAAM,CAC1G,MAAO,GAAGC,IAAI,CAACC,KAAK,CAACF,QAAQ,CAAG,EAAE,CAAC,SAASC,IAAI,CAACC,KAAK,CAACF,QAAQ,CAAG,EAAE,CAAC,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,MAAM,CAC9F,CAAC,CAED;AACA,KAAM,CAAAG,aAAa,CAAG,KAAAA,CAAO3C,QAAQ,CAAE4C,WAAW,GAAK,CACnD,GAAI,CAAClE,WAAW,EAAI,CAACkE,WAAW,CAACC,IAAI,CAAC,CAAC,CAAE,MAAO,MAAK,CAErD3D,qBAAqB,CAAC8C,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAAChC,QAAQ,EAAG,IAAK,CAAC,CAAC,CAAC,CAE9D,GAAI,CACA,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAC,KAAK,CACxB,qDAAqDH,QAAQ,WAAW,CACxE,CACI8C,MAAM,CAAE,MAAM,CACd7C,OAAO,CAAE,CACL,eAAe,CAAE,SAASvB,WAAW,EAAE,CACvC,QAAQ,CAAE,gCAAgC,CAC1C,cAAc,CAAE,kBACpB,CAAC,CACD6C,IAAI,CAAEwB,IAAI,CAACC,SAAS,CAAC,CACjBzB,IAAI,CAAEqB,WACV,CAAC,CACL,CACJ,CAAC,CAED,GAAI,CAAC1C,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAA6C,KAAK,CAAC,6BAA6B/C,QAAQ,CAACK,MAAM,EAAE,CAAC,CACnE,CAEAvB,gBAAgB,CAACgD,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAAChC,QAAQ,EAAG,EAAG,CAAC,CAAC,CAAC,CAEvD;AACA,GAAIb,mBAAmB,CAACa,QAAQ,CAAC,CAAE,CAC/B,KAAM,CAAAkD,eAAe,CAAG,KAAM,CAAA/B,kBAAkB,CAACnB,QAAQ,CAAC,CAC1DnB,aAAa,CAACmD,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAAChC,QAAQ,EAAGkD,eAAgB,CAAC,CAAC,CAAC,CACrE,CAEA;AACA,KAAM,CAAAC,cAAc,CAAG,KAAM,CAAApD,sBAAsB,CAACC,QAAQ,CAAC,CAC7DV,sBAAsB,CAAC0C,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAAChC,QAAQ,EAAGmD,cAAe,CAAC,CAAC,CAAC,CAEzE,MAAO,KAAI,CACf,CAAE,MAAOzF,KAAK,CAAE,CACZ2C,OAAO,CAAC3C,KAAK,CAAC,mCAAmCsC,QAAQ,GAAG,CAAEtC,KAAK,CAAC,CACpE,MAAO,MAAK,CAChB,CAAC,OAAS,CACNwB,qBAAqB,CAAC8C,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAAChC,QAAQ,EAAG,KAAM,CAAC,CAAC,CAAC,CACnE,CACJ,CAAC,CAED;AACA,KAAM,CAAAoD,qBAAqB,CAAG,KAAO,CAAAC,cAAc,EAAK,CACpD,GAAI,CACA,KAAM,CAAAnD,QAAQ,CAAG,KAAM,CAAAC,KAAK,CACxB,uFAAuFkD,cAAc,aAAa,CAClH,CACIpD,OAAO,CAAEvB,WAAW,CAAG,CACnB,eAAe,CAAE,SAASA,WAAW,EAAE,CACvC,QAAQ,CAAE,gCACd,CAAC,CAAG,CACA,QAAQ,CAAE,gCACd,CACJ,CACJ,CAAC,CAED,GAAI,CAACwB,QAAQ,CAACE,EAAE,CAAE,CACd,KAAM,IAAI,CAAA6C,KAAK,CAAC,sCAAsC/C,QAAQ,CAACK,MAAM,EAAE,CAAC,CAC5E,CAEA,KAAM,CAAA+C,IAAI,CAAG,KAAM,CAAApD,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClC,GAAI2C,IAAI,CAACC,aAAa,EAAID,IAAI,CAACC,aAAa,CAAC3C,MAAM,CAAG,CAAC,CAAE,CACrD,KAAM,CAAA4C,SAAS,CAAGF,IAAI,CAACC,aAAa,CAAC,CAAC,CAAC,CACvC,MAAO,CACHhD,MAAM,CAAEiD,SAAS,CAACjD,MAAM,CACxBkD,UAAU,CAAED,SAAS,CAACC,UAAU,CAChCC,QAAQ,CAAEF,SAAS,CAACE,QAAQ,CAC5B1C,UAAU,CAAEwC,SAAS,CAACxC,UAC1B,CAAC,CACL,CAEA,MAAO,CAAET,MAAM,CAAE,SAAS,CAAEkD,UAAU,CAAE,IAAK,CAAC,CAClD,CAAE,MAAO/F,KAAK,CAAE,CACZ2C,OAAO,CAAC3C,KAAK,CAAC,wCAAwC2F,cAAc,GAAG,CAAE3F,KAAK,CAAC,CAC/E,MAAO,CAAE6C,MAAM,CAAE,OAAO,CAAEkD,UAAU,CAAE,OAAQ,CAAC,CACnD,CACJ,CAAC,CAED;AACA,KAAM,CAAAE,wBAAwB,CAAG9G,WAAW,CAAC,KAAO,CAAA6E,GAAG,EAAK,CACxD,GAAIA,GAAG,CAACd,MAAM,GAAK,CAAC,CAAE,OAEtB,KAAM,CAAAgD,QAAQ,CAAG,CAAC,CAAC,CACnB,IAAK,KAAM,CAAAhC,EAAE,GAAI,CAAAF,GAAG,CAAE,CAClBkC,QAAQ,CAAChC,EAAE,CAACyB,cAAc,CAAC,CAAG,KAAM,CAAAD,qBAAqB,CAACxB,EAAE,CAACyB,cAAc,CAAC,CAChF,CAEAhF,qBAAqB,CAAC2D,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,GAAG4B,QAAS,CAAC,CAAC,CAAC,CAC7D;AACA,CAAC,CAAE,CAAClF,WAAW,CAAC,CAAC,CAEjB;AACA,KAAM,CAAAmF,uBAAuB,CAAIR,cAAc,EAAK,CAChD,KAAM,CAAA9C,MAAM,CAAGnC,kBAAkB,CAACiF,cAAc,CAAC,CACjD,GAAI,CAAC9C,MAAM,CAAE,MAAO,CAAEuD,IAAI,CAAE,aAAa,CAAEC,KAAK,CAAE,SAAU,CAAC,CAE7D,GAAIxD,MAAM,CAACA,MAAM,GAAK,WAAW,EAAIA,MAAM,CAACkD,UAAU,GAAK,SAAS,CAAE,CAClE,MAAO,CAAEK,IAAI,CAAE,YAAY,CAAEC,KAAK,CAAE,SAAU,CAAC,CACnD,CAAC,IAAM,IAAIxD,MAAM,CAACA,MAAM,GAAK,WAAW,EAAIA,MAAM,CAACkD,UAAU,GAAK,SAAS,CAAE,CACzE,MAAO,CAAEK,IAAI,CAAE,UAAU,CAAEC,KAAK,CAAE,QAAS,CAAC,CAChD,CAAC,IAAM,IAAIxD,MAAM,CAACA,MAAM,GAAK,aAAa,CAAE,CACxC,MAAO,CAAEuD,IAAI,CAAE,cAAc,CAAEC,KAAK,CAAE,aAAc,CAAC,CACzD,CAAC,IAAM,IAAIxD,MAAM,CAACA,MAAM,GAAK,QAAQ,CAAE,CACnC,MAAO,CAAEuD,IAAI,CAAE,UAAU,CAAEC,KAAK,CAAE,QAAS,CAAC,CAChD,CAAC,IAAM,IAAIxD,MAAM,CAACA,MAAM,GAAK,OAAO,CAAE,CAClC,MAAO,CAAEuD,IAAI,CAAE,UAAU,CAAEC,KAAK,CAAE,OAAQ,CAAC,CAC/C,CAAC,IAAM,CACH,MAAO,CAAED,IAAI,CAAE,WAAW,CAAEC,KAAK,CAAE,SAAU,CAAC,CAClD,CACJ,CAAC,CAED;AACA,KAAM,CAAAC,OAAO,CAAG,QAAAA,CAACtC,GAAG,CAAEuC,MAAM,CAAyB,IAAvB,CAAAC,SAAS,CAAAC,SAAA,CAAAvD,MAAA,IAAAuD,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,MAAM,CAC5C,MAAO,CAAC,GAAGzC,GAAG,CAAC,CAAC2C,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CAC3B,GAAI,CAAAC,UAAU,CAAG,CAAC,CAClB,OAAQP,MAAM,EACV,IAAK,QAAQ,CACTO,UAAU,CAAGD,CAAC,CAAC1C,MAAM,CAAGyC,CAAC,CAACzC,MAAM,CAChC,MACJ,IAAK,cAAc,CACf2C,UAAU,CAAGF,CAAC,CAACG,KAAK,CAACC,aAAa,CAACH,CAAC,CAACE,KAAK,CAAC,CAC3C,MACJ,IAAK,SAAS,CACd,QACI,KAAM,CAAAE,KAAK,CAAG,GAAI,CAAA1D,IAAI,CAACqD,CAAC,CAACM,SAAS,CAAC,CACnC,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAA5D,IAAI,CAACsD,CAAC,CAACK,SAAS,CAAC,CACnCJ,UAAU,CAAGK,KAAK,CAAGF,KAAK,CAC1B,MACR,CAEA;AACA,MAAO,CAAAT,SAAS,GAAK,KAAK,CAAG,CAACM,UAAU,CAAGA,UAAU,CACzD,CAAC,CAAC,CACN,CAAC,CAED;AACA5H,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAgD,KAAK,CAAGC,cAAc,CAACiF,OAAO,CAAC,cAAc,CAAC,CACpD,GAAIlF,KAAK,CAAE,CACPjB,cAAc,CAACiB,KAAK,CAAC,CACrBnB,kBAAkB,CAAC,IAAI,CAAC,CAC5B,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN;AACA7B,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAmI,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACAtH,UAAU,CAAC,IAAI,CAAC,CAEhB,KAAM,CAAAuH,KAAK,CAAG,UAAU,CACxB,KAAM,CAAAC,IAAI,CAAG,MAAM,CAEnB,KAAM,CAAAC,OAAO,CAAG5G,QAAQ,GAAK,KAAK,CAAG,KAAK,CAAGA,QAAQ,CACrD,KAAM,CAAA6G,UAAU,CAAG,KAAM,CAAAhF,KAAK,CAAC,gCAAgC6E,KAAK,IAAIC,IAAI,gBAAgBC,OAAO,4BAA4B,CAAC,CAChI,GAAI,CAACC,UAAU,CAAC/E,EAAE,CAAE,CAChB,KAAM,IAAI,CAAA6C,KAAK,CAAC,kCAAkCkC,UAAU,CAAC5E,MAAM,EAAE,CAAC,CAC1E,CACA,KAAM,CAAA6E,MAAM,CAAG,KAAM,CAAAD,UAAU,CAACxE,IAAI,CAAC,CAAC,CAEtC,KAAM,CAAA0E,YAAY,CAAGD,MAAM,CAAChE,GAAG,CAACQ,EAAE,EAAI,CAClC,KAAM,CAAAyB,cAAc,CAAGzB,EAAE,CAAC0D,IAAI,CAACC,GAAG,CAACC,OAAO,CAAC,KAAK,CAAE,GAAG,CAAC,CACtD,MAAO,CACHlE,EAAE,CAAEM,EAAE,CAACN,EAAE,CACTO,MAAM,CAAED,EAAE,CAACC,MAAM,CACjB4C,KAAK,CAAE7C,EAAE,CAAC6C,KAAK,CACfgB,KAAK,CAAE7D,EAAE,CAAC6D,KAAK,CACf5E,MAAM,CAAEe,EAAE,CAACd,IAAI,CAACC,KAAK,CACrB2E,UAAU,CAAE9D,EAAE,CAAC0D,IAAI,CAACC,GAAG,CACvBlC,cAAc,CAAEA,cAAc,CAC9BsC,GAAG,CAAE,KAAKtC,cAAc,aAAa,CACrCuC,KAAK,CAAEhE,EAAE,CAAC8B,QAAQ,CAClBkB,SAAS,CAAE,GAAI,CAAA3D,IAAI,CAACW,EAAE,CAACiE,UAAU,CAAC,CAACrE,kBAAkB,CAAC,CAAC,CACvDsE,SAAS,CAAE,GAAI,CAAA7E,IAAI,CAACW,EAAE,CAACZ,UAAU,CAAC,CAACQ,kBAAkB,CAAC,CAC1D,CAAC,CACL,CAAC,CAAC,CAEFjE,eAAe,CAAC8H,YAAY,CAAC,CAE7B;AACA,KAAM,CAAA5D,uBAAuB,CAAC4D,YAAY,CAACU,KAAK,CAAC,CAAC,CAAEtG,cAAc,CAAC,CAAC,CACxE,CAAE,MAAOuG,GAAG,CAAE,CACV3F,OAAO,CAAC3C,KAAK,CAAC,sBAAsB,CAAEsI,GAAG,CAAC,CAC1CrI,QAAQ,CAACqI,GAAG,CAACC,OAAO,CAAC,CAErB;AACA,GAAID,GAAG,CAACC,OAAO,CAACC,QAAQ,CAAC,iBAAiB,CAAC,CAAE,CACzC7F,OAAO,CAAC8F,GAAG,CAAC,6BAA6B,CAAC,CAC1C,KAAM,CAAAC,OAAO,CAAG,CACZ,CACI9E,EAAE,CAAE,CAAC,CACLO,MAAM,CAAE,GAAG,CACX4C,KAAK,CAAE,gEAAgE,CACvEgB,KAAK,CAAE,MAAM,CACb5E,MAAM,CAAE,SAAS,CACjB6E,UAAU,CAAE,iBAAiB,CAC7BrC,cAAc,CAAE,iBAAiB,CACjCsC,GAAG,CAAE,mCAAmC,CACxCC,KAAK,CAAE,2CAA2C,CAClDhB,SAAS,CAAE,GAAI,CAAA3D,IAAI,CAAC,CAAC,CAACO,kBAAkB,CAAC,CAAC,CAC1CsE,SAAS,CAAE,GAAI,CAAA7E,IAAI,CAACA,IAAI,CAACqB,GAAG,CAAC,CAAC,CAAG,QAAQ,CAAC,CAACd,kBAAkB,CAAC,CAClE,CAAC,CACD,CACIF,EAAE,CAAE,CAAC,CACLO,MAAM,CAAE,GAAG,CACX4C,KAAK,CAAE,uCAAuC,CAC9CgB,KAAK,CAAE,MAAM,CACb5E,MAAM,CAAE,WAAW,CACnB6E,UAAU,CAAE,oBAAoB,CAChCrC,cAAc,CAAE,oBAAoB,CACpCsC,GAAG,CAAE,sCAAsC,CAC3CC,KAAK,CAAE,2CAA2C,CAClDhB,SAAS,CAAE,GAAI,CAAA3D,IAAI,CAACA,IAAI,CAACqB,GAAG,CAAC,CAAC,CAAG,SAAS,CAAC,CAACd,kBAAkB,CAAC,CAAC,CAChEsE,SAAS,CAAE,GAAI,CAAA7E,IAAI,CAACA,IAAI,CAACqB,GAAG,CAAC,CAAC,CAAG,SAAS,CAAC,CAACd,kBAAkB,CAAC,CACnE,CAAC,CACJ,CACDjE,eAAe,CAAC6I,OAAO,CAAC,CACxBzI,QAAQ,CAAC,IAAI,CAAC,CAClB,CACJ,CAAC,OAAS,CACNF,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAEDsH,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,CAACzG,QAAQ,CAAEI,WAAW,CAAE+C,uBAAuB,CAAC,CAAC,CAEpD;AACA7E,SAAS,CAAC,IAAM,CACZ,GAAIU,YAAY,CAACsD,MAAM,GAAK,CAAC,CAAE,OAE/B,KAAM,CAAAyF,QAAQ,CAAG/I,YAAY,CAACgJ,MAAM,CAAC1E,EAAE,EACnCA,EAAE,CAAC6C,KAAK,CAAC8B,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACpI,YAAY,CAACyI,WAAW,CAAC,CAAC,CAAC,EAC3D3E,EAAE,CAACf,MAAM,CAAC0F,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACpI,YAAY,CAACyI,WAAW,CAAC,CAAC,CAAC,EAC5D3E,EAAE,CAAC8D,UAAU,CAACa,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACpI,YAAY,CAACyI,WAAW,CAAC,CAAC,CACnE,CAAC,CACD,KAAM,CAAAC,MAAM,CAAGxC,OAAO,CAACqC,QAAQ,CAAErI,QAAQ,CAAEE,WAAW,CAAC,CACvD,KAAM,CAAAuI,SAAS,CAAGD,MAAM,CAACT,KAAK,CAAC,CAACnI,MAAM,CAAG,CAAC,EAAI6B,cAAc,CAAE7B,MAAM,CAAG6B,cAAc,CAAC,CAEtF;AACAkE,wBAAwB,CAAC8C,SAAS,CAAC,CAEnC;AACA,KAAM,CAAAC,QAAQ,CAAGC,WAAW,CAAC,IAAM,CAC/BhD,wBAAwB,CAAC8C,SAAS,CAAC,CACvC,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMG,aAAa,CAACF,QAAQ,CAAC,CACxC,CAAC,CAAE,CAACpJ,YAAY,CAAEQ,YAAY,CAAEE,QAAQ,CAAEE,WAAW,CAAEN,MAAM,CAAE+F,wBAAwB,CAAC,CAAC,CAEzF;AACA/G,SAAS,CAAC,IAAM,CACZ,GAAIU,YAAY,CAACsD,MAAM,CAAG,CAAC,CAAE,CACzB,KAAM,CAAAyF,QAAQ,CAAG/I,YAAY,CAACgJ,MAAM,CAAC1E,EAAE,EACnCA,EAAE,CAAC6C,KAAK,CAAC8B,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACpI,YAAY,CAACyI,WAAW,CAAC,CAAC,CAAC,EAC3D3E,EAAE,CAACf,MAAM,CAAC0F,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACpI,YAAY,CAACyI,WAAW,CAAC,CAAC,CAAC,EAC5D3E,EAAE,CAAC8D,UAAU,CAACa,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACpI,YAAY,CAACyI,WAAW,CAAC,CAAC,CACnE,CAAC,CACD,KAAM,CAAAC,MAAM,CAAGxC,OAAO,CAACqC,QAAQ,CAAErI,QAAQ,CAAEE,WAAW,CAAC,CACvD,KAAM,CAAAuI,SAAS,CAAGD,MAAM,CAACT,KAAK,CAAC,CAACnI,MAAM,CAAG,CAAC,EAAI6B,cAAc,CAAE7B,MAAM,CAAG6B,cAAc,CAAC,CACtFgC,uBAAuB,CAACgF,SAAS,CAAC,CACtC,CACJ,CAAC,CAAE,CAAC7I,MAAM,CAAEE,YAAY,CAAEE,QAAQ,CAAEE,WAAW,CAAEZ,YAAY,CAAEmE,uBAAuB,CAAC,CAAC,CAExF;AACA,KAAM,CAAAoF,WAAW,CAAGvJ,YAAY,CAACgJ,MAAM,CAAC1E,EAAE,EACtCA,EAAE,CAAC6C,KAAK,CAAC8B,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACpI,YAAY,CAACyI,WAAW,CAAC,CAAC,CAAC,EAC3D3E,EAAE,CAACf,MAAM,CAAC0F,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACpI,YAAY,CAACyI,WAAW,CAAC,CAAC,CAAC,EAC5D3E,EAAE,CAAC8D,UAAU,CAACa,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACpI,YAAY,CAACyI,WAAW,CAAC,CAAC,CACnE,CAAC,CACD,KAAM,CAAAO,SAAS,CAAG9C,OAAO,CAAC6C,WAAW,CAAE7I,QAAQ,CAAEE,WAAW,CAAC,CAC7D,KAAM,CAAA6I,YAAY,CAAGD,SAAS,CAACf,KAAK,CAAC,CAACnI,MAAM,CAAG,CAAC,EAAI6B,cAAc,CAAE7B,MAAM,CAAG6B,cAAc,CAAC,CAC5F,KAAM,CAAAuH,YAAY,CAAGvE,IAAI,CAACwE,IAAI,CAACH,SAAS,CAAClG,MAAM,CAAGnB,cAAc,CAAC,CAEjE,GAAIjC,OAAO,CAAE,CACT,mBACIN,IAAA,CAACJ,UAAU,EAACoK,QAAQ,CAAC,wBAAwB,CAACC,eAAe,CAAE,KAAM,CAAAC,QAAA,cACjElK,IAAA,QAAKmK,SAAS,CAAC,wBAAwB,CAAAD,QAAA,cACnChK,KAAA,QAAKiK,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eAClChK,KAAA,OAAAgK,QAAA,eAAIlK,IAAA,QAAKoK,GAAG,CAAE5H,WAAY,CAAC6H,GAAG,CAAC,WAAW,CAACF,SAAS,CAAC,WAAW,CAAE,CAAC,QAAK,EAAI,CAAC,cAC7EnK,IAAA,MAAGmK,SAAS,CAAC,UAAU,CAAAD,QAAA,CAAC,oDAAkD,CAAG,CAAC,cAC9ElK,IAAA,QAAKmK,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAC,qBAAmB,CAAK,CAAC,EACjD,CAAC,CACL,CAAC,CACE,CAAC,CAErB,CAEA,GAAI1J,KAAK,CAAE,CACP,mBACIR,IAAA,CAACJ,UAAU,EAACoK,QAAQ,CAAC,sBAAsB,CAACC,eAAe,CAAE,KAAM,CAAAC,QAAA,cAC/DlK,IAAA,QAAKmK,SAAS,CAAC,wBAAwB,CAAAD,QAAA,cACnChK,KAAA,QAAKiK,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eAClChK,KAAA,OAAAgK,QAAA,eAAIlK,IAAA,QAAKoK,GAAG,CAAE5H,WAAY,CAAC6H,GAAG,CAAC,WAAW,CAACF,SAAS,CAAC,WAAW,CAAE,CAAC,QAAK,EAAI,CAAC,cAC7EnK,IAAA,MAAGmK,SAAS,CAAC,UAAU,CAAAD,QAAA,CAAC,oDAAkD,CAAG,CAAC,cAC9EhK,KAAA,QAAKiK,SAAS,CAAC,OAAO,CAAAD,QAAA,eAClBhK,KAAA,MAAAgK,QAAA,EAAG,2BAAyB,CAAC1J,KAAK,EAAI,CAAC,cACvCR,IAAA,MAAAkK,QAAA,CAAG,qDAAmD,CAAG,CAAC,EACzD,CAAC,EACL,CAAC,CACL,CAAC,CACE,CAAC,CAErB,CAEA,mBACIlK,IAAA,CAACJ,UAAU,EAACoK,QAAQ,CAAC,gBAAgB,CAACC,eAAe,CAAE,KAAM,CAAAC,QAAA,cACzDhK,KAAA,QAAKiK,SAAS,CAAC,wBAAwB,CAAAD,QAAA,eACnChK,KAAA,WAAQiK,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eACrChK,KAAA,OAAAgK,QAAA,eAAIlK,IAAA,QAAKoK,GAAG,CAAE5H,WAAY,CAAC6H,GAAG,CAAC,WAAW,CAACF,SAAS,CAAC,WAAW,CAAE,CAAC,QAAK,EAAI,CAAC,cAC7EnK,IAAA,MAAGmK,SAAS,CAAC,UAAU,CAAAD,QAAA,CAAC,oDAAkD,CAAG,CAAC,cAE9ElK,IAAA,QAAKmK,SAAS,CAAC,gBAAgB,CAAAD,QAAA,cAC3BlK,IAAA,MAAGmK,SAAS,CAAC,WAAW,CAAAD,QAAA,CAAC,2IAGzB,CAAG,CAAC,CACH,CAAC,EACF,CAAC,cAEThK,KAAA,QAAKiK,SAAS,CAAC,cAAc,CAAAD,QAAA,eACzBlK,IAAA,QAAKmK,SAAS,CAAC,4BAA4B,CAAAD,QAAA,cACvChK,KAAA,MACIoK,IAAI,CAAC,sCAAsC,CAC3CC,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBL,SAAS,CAAC,WAAW,CAAAD,QAAA,eAErBlK,IAAA,QAAKoK,GAAG,CAAE5H,WAAY,CAAC6H,GAAG,CAAC,aAAa,CAACF,SAAS,CAAC,WAAW,CAAE,CAAC,cACjEnK,IAAA,OAAAkK,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBlK,IAAA,MAAAkK,QAAA,CAAG,gCAA8B,CAAG,CAAC,EACtC,CAAC,CACH,CAAC,CAEL,CAAC5I,eAAe,eACbtB,IAAA,QAAKmK,SAAS,CAAC,wBAAwB,CAAAD,QAAA,cACnChK,KAAA,QAAKiK,SAAS,CAAC,cAAc,CAAAD,QAAA,eACzBlK,IAAA,QAAKmK,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,cAAE,CAAK,CAAC,cACpClK,IAAA,OAAAkK,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBlK,IAAA,MAAAkK,QAAA,CAAG,gCAA8B,CAAG,CAAC,cACrClK,IAAA,CAACH,QAAQ,EAAC4K,aAAa,CAAEhI,iBAAkB,CAAE,CAAC,EAC7C,CAAC,CACL,CACR,EACA,CAAC,cAENzC,IAAA,QAAKmK,SAAS,CAAC,cAAc,CAAAD,QAAA,cACzBhK,KAAA,WAAQiK,SAAS,CAAC,mBAAmB,CAAAD,QAAA,EAAC,sCACR,CAACN,SAAS,CAAClG,MAAM,CAAC,GAChD,EAAQ,CAAC,CACR,CAAC,cAENxD,KAAA,QAAKiK,SAAS,CAAC,YAAY,CAAAD,QAAA,eACvBhK,KAAA,QAAKiK,SAAS,CAAC,aAAa,CAAAD,QAAA,eACxBhK,KAAA,QAAKiK,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAC9BlK,IAAA,UAAO0K,OAAO,CAAC,WAAW,CAAAR,QAAA,CAAC,aAAW,CAAO,CAAC,cAC9ChK,KAAA,WACIkE,EAAE,CAAC,WAAW,CACduG,KAAK,CAAEvJ,QAAS,CAChBwJ,QAAQ,CAAGC,CAAC,EAAK,CACbxJ,WAAW,CAACwJ,CAAC,CAACN,MAAM,CAACI,KAAK,CAAC,CAC3BhK,SAAS,CAAC,CAAC,CAAC,CAChB,CAAE,CACFwJ,SAAS,CAAC,eAAe,CAAAD,QAAA,eAEzBlK,IAAA,WAAQ2K,KAAK,CAAC,MAAM,CAAAT,QAAA,CAAC,eAAa,CAAQ,CAAC,cAC3ClK,IAAA,WAAQ2K,KAAK,CAAC,QAAQ,CAAAT,QAAA,CAAC,iBAAe,CAAQ,CAAC,cAC/ClK,IAAA,WAAQ2K,KAAK,CAAC,KAAK,CAAAT,QAAA,CAAC,SAAO,CAAQ,CAAC,EAChC,CAAC,EACR,CAAC,cACNlK,IAAA,UACI8K,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,0DAA0D,CACtEJ,KAAK,CAAE/J,YAAa,CACpBgK,QAAQ,CAAGC,CAAC,EAAK,CACbhK,eAAe,CAACgK,CAAC,CAACN,MAAM,CAACI,KAAK,CAAC,CAC/BhK,SAAS,CAAC,CAAC,CAAC,CAChB,CAAE,CACFwJ,SAAS,CAAC,WAAW,CACxB,CAAC,cACFjK,KAAA,WACIyK,KAAK,CAAE7J,QAAS,CAChB8J,QAAQ,CAAGC,CAAC,EAAK,CACb9J,WAAW,CAAC8J,CAAC,CAACN,MAAM,CAACI,KAAK,CAAC,CAC3BhK,SAAS,CAAC,CAAC,CAAC,CAChB,CAAE,CACFwJ,SAAS,CAAC,aAAa,CAAAD,QAAA,eAEvBlK,IAAA,WAAQ2K,KAAK,CAAC,SAAS,CAAAT,QAAA,CAAC,wBAAsB,CAAQ,CAAC,cACvDlK,IAAA,WAAQ2K,KAAK,CAAC,QAAQ,CAAAT,QAAA,CAAC,mBAAiB,CAAQ,CAAC,cACjDlK,IAAA,WAAQ2K,KAAK,CAAC,cAAc,CAAAT,QAAA,CAAC,qBAAmB,CAAQ,CAAC,EACrD,CAAC,cACThK,KAAA,WACIyK,KAAK,CAAE3J,WAAY,CACnB4J,QAAQ,CAAGC,CAAC,EAAK,CACb5J,cAAc,CAAC4J,CAAC,CAACN,MAAM,CAACI,KAAK,CAAC,CAC9BhK,SAAS,CAAC,CAAC,CAAC,CAChB,CAAE,CACFwJ,SAAS,CAAC,aAAa,CAAAD,QAAA,eAEvBlK,IAAA,WAAQ2K,KAAK,CAAC,MAAM,CAAAT,QAAA,CAAC,YAAU,CAAQ,CAAC,cACxClK,IAAA,WAAQ2K,KAAK,CAAC,KAAK,CAAAT,QAAA,CAAC,WAAS,CAAQ,CAAC,EAClC,CAAC,EACR,CAAC,cAENlK,IAAA,QAAKmK,SAAS,CAAC,UAAU,CAAAD,QAAA,CACpBL,YAAY,CAACnG,MAAM,GAAK,CAAC,cACtB1D,IAAA,QAAKmK,SAAS,CAAC,UAAU,CAAAD,QAAA,CACpBtJ,YAAY,cACTV,KAAA,MAAAgK,QAAA,EAAG,uCAAoC,CAACtJ,YAAY,CAAC,KAAE,EAAG,CAAC,cAE3DZ,IAAA,MAAAkK,QAAA,CAAG,mDAAiD,CAAG,CAC1D,CACA,CAAC,CAENL,YAAY,CAAC3F,GAAG,CAAEQ,EAAE,OAAAsG,qBAAA,oBAChB9K,KAAA,QAAiBiK,SAAS,CAAC,sBAAsB,CAAAD,QAAA,eAC7ChK,KAAA,QAAKiK,SAAS,CAAC,aAAa,CAAAD,QAAA,eACxBhK,KAAA,OAAIiK,SAAS,CAAC,WAAW,CAAAD,QAAA,EAAC,GAAC,CAACxF,EAAE,CAACC,MAAM,CAAC,IAAE,CAACD,EAAE,CAAC6C,KAAK,EAAK,CAAC,cACvDrH,KAAA,QAAKiK,SAAS,CAAC,aAAa,CAAAD,QAAA,eACxBhK,KAAA,SAAMiK,SAAS,CAAE,eAAezF,EAAE,CAAC6D,KAAK,EAAG,CAAA2B,QAAA,EACtCxF,EAAE,CAAC6D,KAAK,GAAK,MAAM,CAAG,IAAI,CAAG,IAAI,CAAC,GAAC,CAAC7D,EAAE,CAAC6D,KAAK,EAC3C,CAAC,cACPvI,IAAA,SAAMmK,SAAS,CAAE,qBAAqBxD,uBAAuB,CAACjC,EAAE,CAACyB,cAAc,CAAC,CAACU,KAAK,EAAG,CAAAqD,QAAA,CACpFvD,uBAAuB,CAACjC,EAAE,CAACyB,cAAc,CAAC,CAACS,IAAI,CAC9C,CAAC,EACN,CAAC,EACL,CAAC,cAEN1G,KAAA,QAAKiK,SAAS,CAAC,WAAW,CAAAD,QAAA,eACtBhK,KAAA,MAAGiK,SAAS,CAAC,SAAS,CAAAD,QAAA,eAClBlK,IAAA,WAAAkK,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACxF,EAAE,CAAC8D,UAAU,CAAC,UAAG,cAAAxI,IAAA,WAAAkK,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAACxF,EAAE,CAACf,MAAM,EAC/E,CAAC,cACJzD,KAAA,MAAGiK,SAAS,CAAC,WAAW,CAAAD,QAAA,EAAC,WACZ,CAACxF,EAAE,CAACkE,SAAS,CAAC,mBAAY,CAAClE,EAAE,CAACgD,SAAS,EACjD,CAAC,cAGJxH,KAAA,QACIiK,SAAS,CAAC,wBAAwB,CAClCc,OAAO,CAAEA,CAAA,GAAMrG,gBAAgB,CAACF,EAAE,CAACC,MAAM,CAAE,CAAAuF,QAAA,eAE3ChK,KAAA,QAAKiK,SAAS,CAAC,yBAAyB,CAAAD,QAAA,eACpClK,IAAA,SAAMmK,SAAS,CAAC,yBAAyB,CAAAD,QAAA,CAAC,cAAE,CAAM,CAAC,CAClDnF,wBAAwB,CAACL,EAAE,CAACC,MAAM,CAAC,EACnC,CAAC,cACN3E,IAAA,SAAMmK,SAAS,CAAE,0BAA0BlI,mBAAmB,CAACyC,EAAE,CAACC,MAAM,CAAC,CAAG,UAAU,CAAG,EAAE,EAAG,CAAAuF,QAAA,CAAC,QAE/F,CAAM,CAAC,EACN,CAAC,CAGLjI,mBAAmB,CAACyC,EAAE,CAACC,MAAM,CAAC,eAC3BzE,KAAA,QAAKiK,SAAS,CAAC,6BAA6B,CAAAD,QAAA,eACxChK,KAAA,QAAKiK,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAC9BlK,IAAA,OAAImK,SAAS,CAAC,kBAAkB,CAAAD,QAAA,CAAC,YAAU,CAAI,CAAC,cAChDhK,KAAA,QAAKiK,SAAS,CAAC,oBAAoB,CAAAD,QAAA,eAC/BlK,IAAA,MACIsK,IAAI,CAAE,yCAAyC5F,EAAE,CAACC,MAAM,QAAS,CACjE4F,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBL,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CACpC,yBAED,CAAG,CAAC,cACJlK,IAAA,MACIsK,IAAI,CAAE5F,EAAE,CAACgE,KAAM,CACf6B,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBL,SAAS,CAAC,iCAAiC,CAAAD,QAAA,CAC9C,sBAED,CAAG,CAAC,EACH,CAAC,EACL,CAAC,CAGL5I,eAAe,eACZpB,KAAA,QAAKiK,SAAS,CAAC,uBAAuB,CAAAD,QAAA,eAClClK,IAAA,aACI2K,KAAK,CAAE9I,aAAa,CAAC6C,EAAE,CAACC,MAAM,CAAC,EAAI,EAAG,CACtCiG,QAAQ,CAAGC,CAAC,EAAK/I,gBAAgB,CAACgD,IAAI,GAAK,CACvC,GAAGA,IAAI,CACP,CAACJ,EAAE,CAACC,MAAM,EAAGkG,CAAC,CAACN,MAAM,CAACI,KAC1B,CAAC,CAAC,CAAE,CACJI,WAAW,CAAC,kBAAkB,CAC9BZ,SAAS,CAAC,eAAe,CACzBe,IAAI,CAAE,CAAE,CACX,CAAC,cACFlL,IAAA,WACIiL,OAAO,CAAEA,CAAA,GAAMxF,aAAa,CAACf,EAAE,CAACC,MAAM,CAAE9C,aAAa,CAAC6C,EAAE,CAACC,MAAM,CAAC,CAAE,CAClEwG,QAAQ,CAAE,GAAAH,qBAAA,CAACnJ,aAAa,CAAC6C,EAAE,CAACC,MAAM,CAAC,UAAAqG,qBAAA,WAAxBA,qBAAA,CAA0BrF,IAAI,CAAC,CAAC,GAAI5D,kBAAkB,CAAC2C,EAAE,CAACC,MAAM,CAAE,CAC7EwF,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAE7BnI,kBAAkB,CAAC2C,EAAE,CAACC,MAAM,CAAC,CAAG,eAAe,CAAG,aAAa,CAC5D,CAAC,EACR,CACR,cAGD3E,IAAA,QAAKmK,SAAS,CAAC,wBAAwB,CAAAD,QAAA,CAClCtI,eAAe,cACZ5B,IAAA,QAAKmK,SAAS,CAAC,kBAAkB,CAAAD,QAAA,CAAC,4BAA0B,CAAK,CAAC,CAClExI,UAAU,CAACgD,EAAE,CAACC,MAAM,CAAC,EAAIjD,UAAU,CAACgD,EAAE,CAACC,MAAM,CAAC,CAACjB,MAAM,CAAG,CAAC,cACzD1D,IAAA,QAAKmK,SAAS,CAAC,eAAe,CAAAD,QAAA,CACzBxI,UAAU,CAACgD,EAAE,CAACC,MAAM,CAAC,CAACkE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC3E,GAAG,CAAEC,OAAO,eACzCjE,KAAA,QAAsBiK,SAAS,CAAC,cAAc,CAAAD,QAAA,eAC1ChK,KAAA,QAAKiK,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC3BlK,IAAA,QACIoK,GAAG,CAAEjG,OAAO,CAACH,UAAW,CACxBqG,GAAG,CAAElG,OAAO,CAACR,MAAO,CACpBwG,SAAS,CAAC,gBAAgB,CAC7B,CAAC,cACFnK,IAAA,SAAMmK,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAE/F,OAAO,CAACR,MAAM,CAAO,CAAC,cACxD3D,IAAA,SAAMmK,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAE/F,OAAO,CAACL,UAAU,CAAO,CAAC,EACzD,CAAC,cACN9D,IAAA,QAAKmK,SAAS,CAAC,cAAc,CAAAD,QAAA,CACxB/F,OAAO,CAACE,IAAI,CAACX,MAAM,CAAG,GAAG,CACtB,GAAGS,OAAO,CAACE,IAAI,CAAC+G,SAAS,CAAC,CAAC,CAAE,GAAG,CAAC,KAAK,CACtCjH,OAAO,CAACE,IAAI,CAEf,CAAC,GAfAF,OAAO,CAACC,EAgBb,CACR,CAAC,CACD,CAAC,cAENpE,IAAA,QAAKmK,SAAS,CAAC,aAAa,CAAAD,QAAA,CACvB,CAAC5I,eAAe,CACb,kDAAkD,CAClD,2CAA2C,CAE9C,CACR,CACA,CAAC,EACL,CACR,cAEDpB,KAAA,QAAKiK,SAAS,CAAC,YAAY,CAAAD,QAAA,eACvBlK,IAAA,MACIsK,IAAI,CAAE5F,EAAE,CAAC+D,GAAI,CACb0B,SAAS,CAAC,cAAc,CACxBI,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CAAAN,QAAA,cAEzBlK,IAAA,SAAAkK,QAAA,CAAM,2BAAe,CAAM,CAAC,CAC7B,CAAC,cAEJlK,IAAA,MACIsK,IAAI,CAAE5F,EAAE,CAACgE,KAAM,CACfyB,SAAS,CAAC,SAAS,CACnBI,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CAAAN,QAAA,cAEzBlK,IAAA,SAAAkK,QAAA,CAAM,sBAAU,CAAM,CAAC,CACxB,CAAC,EACH,CAAC,EACL,CAAC,cAENlK,IAAA,QAAKmK,SAAS,CAAC,aAAa,CAAAD,QAAA,cACxBhK,KAAA,UAAOiK,SAAS,CAAC,cAAc,CAAAD,QAAA,EAAC,eACf,CAACxF,EAAE,CAAC+D,GAAG,EACjB,CAAC,CACP,CAAC,GAlJA/D,EAAE,CAACN,EAmJR,CAAC,EACT,CACJ,CACA,CAAC,CAEL0F,YAAY,CAAG,CAAC,eACb5J,KAAA,QAAKiK,SAAS,CAAC,YAAY,CAAAD,QAAA,eACvBlK,IAAA,WACImK,SAAS,CAAC,gBAAgB,CAC1Bc,OAAO,CAAEA,CAAA,GAAMtK,SAAS,CAAC4E,IAAI,CAAC8F,GAAG,CAAC,CAAC,CAAE3K,MAAM,CAAG,CAAC,CAAC,CAAE,CAClDyK,QAAQ,CAAEzK,MAAM,GAAK,CAAE,CAAAwJ,QAAA,CAC1B,iBAED,CAAQ,CAAC,cACThK,KAAA,SAAMiK,SAAS,CAAC,iBAAiB,CAAAD,QAAA,EAAC,OACzB,CAACxJ,MAAM,CAAC,MAAI,CAACoJ,YAAY,CAAC,IAAE,CAACF,SAAS,CAAClG,MAAM,CAAC,SACvD,EAAM,CAAC,cACP1D,IAAA,WACImK,SAAS,CAAC,gBAAgB,CAC1Bc,OAAO,CAAEA,CAAA,GAAMtK,SAAS,CAAC4E,IAAI,CAAC+F,GAAG,CAACxB,YAAY,CAAEpJ,MAAM,CAAG,CAAC,CAAC,CAAE,CAC7DyK,QAAQ,CAAEzK,MAAM,GAAKoJ,YAAa,CAAAI,QAAA,CACrC,aAED,CAAQ,CAAC,EACR,CACR,EACA,CAAC,EACL,CAAC,CACE,CAAC,CAErB,CAAC,CAED,cAAe,CAAA/J,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}