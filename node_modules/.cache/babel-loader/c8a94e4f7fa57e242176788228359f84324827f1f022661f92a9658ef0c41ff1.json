{"ast":null,"code":"import inherits from 'inherits-browser';\nimport { assign, forEach, isObject } from 'min-dash';\nimport BaseRenderer from 'diagram-js/lib/draw/BaseRenderer';\nimport { isExpanded, isHorizontal, isEventSubProcess } from '../util/DiUtil';\nimport { getLabel } from '../util/LabelUtil';\nimport { is } from '../util/ModelUtil';\nimport { createLine } from 'diagram-js/lib/util/RenderUtil';\nimport { isTypedEvent, isThrowEvent, isCollection, getBounds, getDi, getSemantic, getCirclePath, getRoundRectPath, getDiamondPath, getRectPath, getFillColor, getStrokeColor, getLabelColor, getHeight, getWidth } from './BpmnRenderUtil';\nimport { query as domQuery } from 'min-dom';\nimport { append as svgAppend, attr as svgAttr, create as svgCreate, classes as svgClasses } from 'tiny-svg';\nimport { rotate, transform, translate } from 'diagram-js/lib/util/SvgTransformUtil';\nimport Ids from 'ids';\nimport { black } from './BpmnRenderUtil';\nvar markerIds = new Ids();\nvar ELEMENT_LABEL_DISTANCE = 10,\n  INNER_OUTER_DIST = 3,\n  PARTICIPANT_STROKE_WIDTH = 1.5,\n  TASK_BORDER_RADIUS = 10;\nvar DEFAULT_OPACITY = 0.95,\n  FULL_OPACITY = 1,\n  LOW_OPACITY = 0.25;\n\n/**\n * @typedef { Partial<{\n *   defaultFillColor: string,\n *   defaultStrokeColor: string,\n *   defaultLabelColor: string\n * }> } BpmnRendererConfig\n *\n * @typedef { Partial<{\n *   fill: string,\n *   stroke: string,\n *   width: string,\n *   height: string\n * }> } Attrs\n */\n\n/**\n * @typedef { import('../model/Types').Element } Element\n * @typedef { import('../model/Types').Shape } Shape\n * @typedef { import('../model/Types').Connection } Connection\n */\n\n/**\n * A renderer for BPMN elements\n *\n * @param {BpmnRendererConfig} config\n * @param {import('diagram-js/lib/core/EventBus').default} eventBus\n * @param {import('diagram-js/lib/draw/Styles').default} styles\n * @param {import('./PathMap').default} pathMap\n * @param {import('diagram-js/lib/core/Canvas').default} canvas\n * @param {import('./TextRenderer').default} textRenderer\n * @param {number} [priority]\n */\nexport default function BpmnRenderer(config, eventBus, styles, pathMap, canvas, textRenderer, priority) {\n  BaseRenderer.call(this, eventBus, priority);\n  var defaultFillColor = config && config.defaultFillColor,\n    defaultStrokeColor = config && config.defaultStrokeColor,\n    defaultLabelColor = config && config.defaultLabelColor;\n  function shapeStyle(attrs) {\n    return styles.computeStyle(attrs, {\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      stroke: black,\n      strokeWidth: 2,\n      fill: 'white'\n    });\n  }\n  function lineStyle(attrs) {\n    return styles.computeStyle(attrs, ['no-fill'], {\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      stroke: black,\n      strokeWidth: 2\n    });\n  }\n  function addMarker(id, options) {\n    var {\n      ref = {\n        x: 0,\n        y: 0\n      },\n      scale = 1,\n      element,\n      parentGfx = canvas._svg\n    } = options;\n    var marker = svgCreate('marker', {\n      id: id,\n      viewBox: '0 0 20 20',\n      refX: ref.x,\n      refY: ref.y,\n      markerWidth: 20 * scale,\n      markerHeight: 20 * scale,\n      orient: 'auto'\n    });\n    svgAppend(marker, element);\n    var defs = domQuery(':scope > defs', parentGfx);\n    if (!defs) {\n      defs = svgCreate('defs');\n      svgAppend(parentGfx, defs);\n    }\n    svgAppend(defs, marker);\n  }\n  function marker(parentGfx, type, fill, stroke) {\n    var id = markerIds.nextPrefixed('marker-');\n    createMarker(parentGfx, id, type, fill, stroke);\n    return 'url(#' + id + ')';\n  }\n  function createMarker(parentGfx, id, type, fill, stroke) {\n    if (type === 'sequenceflow-end') {\n      var sequenceflowEnd = svgCreate('path', {\n        d: 'M 1 5 L 11 10 L 1 15 Z',\n        ...shapeStyle({\n          fill: stroke,\n          stroke: stroke,\n          strokeWidth: 1\n        })\n      });\n      addMarker(id, {\n        element: sequenceflowEnd,\n        ref: {\n          x: 11,\n          y: 10\n        },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n    if (type === 'messageflow-start') {\n      var messageflowStart = svgCreate('circle', {\n        cx: 6,\n        cy: 6,\n        r: 3.5,\n        ...shapeStyle({\n          fill,\n          stroke: stroke,\n          strokeWidth: 1,\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [10000, 1]\n        })\n      });\n      addMarker(id, {\n        element: messageflowStart,\n        ref: {\n          x: 6,\n          y: 6\n        },\n        parentGfx\n      });\n    }\n    if (type === 'messageflow-end') {\n      var messageflowEnd = svgCreate('path', {\n        d: 'm 1 5 l 0 -3 l 7 3 l -7 3 z',\n        ...shapeStyle({\n          fill,\n          stroke: stroke,\n          strokeWidth: 1,\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [10000, 1]\n        })\n      });\n      addMarker(id, {\n        element: messageflowEnd,\n        ref: {\n          x: 8.5,\n          y: 5\n        },\n        parentGfx\n      });\n    }\n    if (type === 'association-start') {\n      var associationStart = svgCreate('path', {\n        d: 'M 11 5 L 1 10 L 11 15',\n        ...lineStyle({\n          fill: 'none',\n          stroke,\n          strokeWidth: 1.5,\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [10000, 1]\n        })\n      });\n      addMarker(id, {\n        element: associationStart,\n        ref: {\n          x: 1,\n          y: 10\n        },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n    if (type === 'association-end') {\n      var associationEnd = svgCreate('path', {\n        d: 'M 1 5 L 11 10 L 1 15',\n        ...lineStyle({\n          fill: 'none',\n          stroke,\n          strokeWidth: 1.5,\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [10000, 1]\n        })\n      });\n      addMarker(id, {\n        element: associationEnd,\n        ref: {\n          x: 11,\n          y: 10\n        },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n    if (type === 'conditional-flow-marker') {\n      var conditionalFlowMarker = svgCreate('path', {\n        d: 'M 0 10 L 8 6 L 16 10 L 8 14 Z',\n        ...shapeStyle({\n          fill,\n          stroke: stroke\n        })\n      });\n      addMarker(id, {\n        element: conditionalFlowMarker,\n        ref: {\n          x: -1,\n          y: 10\n        },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n    if (type === 'conditional-default-flow-marker') {\n      var defaultFlowMarker = svgCreate('path', {\n        d: 'M 6 4 L 10 16',\n        ...shapeStyle({\n          stroke: stroke,\n          fill: 'none'\n        })\n      });\n      addMarker(id, {\n        element: defaultFlowMarker,\n        ref: {\n          x: 0,\n          y: 10\n        },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n  }\n  function drawCircle(parentGfx, width, height, offset) {\n    let attrs = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n    offset = offset || 0;\n    attrs = shapeStyle(attrs);\n    var cx = width / 2,\n      cy = height / 2;\n    var circle = svgCreate('circle', {\n      cx: cx,\n      cy: cy,\n      r: Math.round((width + height) / 4 - offset),\n      ...attrs\n    });\n    svgAppend(parentGfx, circle);\n    return circle;\n  }\n  function drawRect(parentGfx, width, height, r, offset, attrs) {\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n    offset = offset || 0;\n    attrs = shapeStyle(attrs);\n    var rect = svgCreate('rect', {\n      x: offset,\n      y: offset,\n      width: width - offset * 2,\n      height: height - offset * 2,\n      rx: r,\n      ry: r,\n      ...attrs\n    });\n    svgAppend(parentGfx, rect);\n    return rect;\n  }\n  function drawDiamond(parentGfx, width, height, attrs) {\n    var x_2 = width / 2;\n    var y_2 = height / 2;\n    var points = [{\n      x: x_2,\n      y: 0\n    }, {\n      x: width,\n      y: y_2\n    }, {\n      x: x_2,\n      y: height\n    }, {\n      x: 0,\n      y: y_2\n    }];\n    var pointsString = points.map(function (point) {\n      return point.x + ',' + point.y;\n    }).join(' ');\n    attrs = shapeStyle(attrs);\n    var polygon = svgCreate('polygon', {\n      ...attrs,\n      points: pointsString\n    });\n    svgAppend(parentGfx, polygon);\n    return polygon;\n  }\n\n  /**\n   * @param {SVGElement} parentGfx\n   * @param {Point[]} waypoints\n   * @param {any} attrs\n   * @param {number} [radius]\n   *\n   * @return {SVGElement}\n   */\n  function drawLine(parentGfx, waypoints, attrs, radius) {\n    attrs = lineStyle(attrs);\n    var line = createLine(waypoints, attrs, radius);\n    svgAppend(parentGfx, line);\n    return line;\n  }\n\n  /**\n   * @param {SVGElement} parentGfx\n   * @param {Point[]} waypoints\n   * @param {any} attrs\n   *\n   * @return {SVGElement}\n   */\n  function drawConnectionSegments(parentGfx, waypoints, attrs) {\n    return drawLine(parentGfx, waypoints, attrs, 5);\n  }\n  function drawPath(parentGfx, d, attrs) {\n    attrs = lineStyle(attrs);\n    var path = svgCreate('path', {\n      ...attrs,\n      d\n    });\n    svgAppend(parentGfx, path);\n    return path;\n  }\n  function drawMarker(type, parentGfx, path, attrs) {\n    return drawPath(parentGfx, path, assign({\n      'data-marker': type\n    }, attrs));\n  }\n  function renderer(type) {\n    return handlers[type];\n  }\n  function as(type) {\n    return function (parentGfx, element, attrs) {\n      return renderer(type)(parentGfx, element, attrs);\n    };\n  }\n  var eventIconRenderers = {\n    'bpmn:MessageEventDefinition': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      let isThrowing = arguments.length > 3 ? arguments[3] : undefined;\n      var pathData = pathMap.getScaledPath('EVENT_MESSAGE', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: attrs.width || element.width,\n        containerHeight: attrs.height || element.height,\n        position: {\n          mx: 0.235,\n          my: 0.315\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(element, defaultStrokeColor, attrs.stroke) : getFillColor(element, defaultFillColor, attrs.fill);\n      var stroke = isThrowing ? getFillColor(element, defaultFillColor, attrs.fill) : getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n      var messagePath = drawPath(parentGfx, pathData, {\n        fill,\n        stroke,\n        strokeWidth: 1\n      });\n      return messagePath;\n    },\n    'bpmn:TimerEventDefinition': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var baseWidth = attrs.width || element.width;\n      var baseHeight = attrs.height || element.height;\n\n      // use a lighter stroke for event suprocess icons\n      var strokeWidth = attrs.width ? 1 : 2;\n      var circle = drawCircle(parentGfx, baseWidth, baseHeight, 0.2 * baseHeight, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: strokeWidth\n      });\n      var pathData = pathMap.getScaledPath('EVENT_TIMER_WH', {\n        xScaleFactor: 0.75,\n        yScaleFactor: 0.75,\n        containerWidth: baseWidth,\n        containerHeight: baseHeight,\n        position: {\n          mx: 0.5,\n          my: 0.5\n        }\n      });\n      drawPath(parentGfx, pathData, {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: strokeWidth\n      });\n      for (var i = 0; i < 12; i++) {\n        var linePathData = pathMap.getScaledPath('EVENT_TIMER_LINE', {\n          xScaleFactor: 0.75,\n          yScaleFactor: 0.75,\n          containerWidth: baseWidth,\n          containerHeight: baseHeight,\n          position: {\n            mx: 0.5,\n            my: 0.5\n          }\n        });\n        var width = baseWidth / 2,\n          height = baseHeight / 2;\n        drawPath(parentGfx, linePathData, {\n          strokeWidth: 1,\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          transform: 'rotate(' + i * 30 + ',' + height + ',' + width + ')'\n        });\n      }\n      return circle;\n    },\n    'bpmn:EscalationEventDefinition': function (parentGfx, event) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      let isThrowing = arguments.length > 3 ? arguments[3] : undefined;\n      var pathData = pathMap.getScaledPath('EVENT_ESCALATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor, attrs.stroke) : getFillColor(event, defaultFillColor, attrs.fill);\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ConditionalEventDefinition': function (parentGfx, event) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var pathData = pathMap.getScaledPath('EVENT_CONDITIONAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.5,\n          my: 0.222\n        }\n      });\n      return drawPath(parentGfx, pathData, {\n        fill: getFillColor(event, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:LinkEventDefinition': function (parentGfx, event) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      let isThrowing = arguments.length > 3 ? arguments[3] : undefined;\n      var pathData = pathMap.getScaledPath('EVENT_LINK', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.57,\n          my: 0.263\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor, attrs.stroke) : getFillColor(event, defaultFillColor, attrs.fill);\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ErrorEventDefinition': function (parentGfx, event) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      let isThrowing = arguments.length > 3 ? arguments[3] : undefined;\n      var pathData = pathMap.getScaledPath('EVENT_ERROR', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.2,\n          my: 0.722\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor, attrs.stroke) : getFillColor(event, defaultFillColor, attrs.fill);\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:CancelEventDefinition': function (parentGfx, event) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      let isThrowing = arguments.length > 3 ? arguments[3] : undefined;\n      var pathData = pathMap.getScaledPath('EVENT_CANCEL_45', {\n        xScaleFactor: 1.0,\n        yScaleFactor: 1.0,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.638,\n          my: -0.055\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor, attrs.stroke) : 'none';\n      var path = drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      rotate(path, 45);\n      return path;\n    },\n    'bpmn:CompensateEventDefinition': function (parentGfx, event) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      let isThrowing = arguments.length > 3 ? arguments[3] : undefined;\n      var pathData = pathMap.getScaledPath('EVENT_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.22,\n          my: 0.5\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor, attrs.stroke) : getFillColor(event, defaultFillColor, attrs.fill);\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:SignalEventDefinition': function (parentGfx, event) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      let isThrowing = arguments.length > 3 ? arguments[3] : undefined;\n      var pathData = pathMap.getScaledPath('EVENT_SIGNAL', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor, attrs.stroke) : getFillColor(event, defaultFillColor, attrs.fill);\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'bpmn:MultipleEventDefinition': function (parentGfx, event) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      let isThrowing = arguments.length > 3 ? arguments[3] : undefined;\n      var pathData = pathMap.getScaledPath('EVENT_MULTIPLE', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.211,\n          my: 0.36\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor, attrs.stroke) : getFillColor(event, defaultFillColor, attrs.fill);\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ParallelMultipleEventDefinition': function (parentGfx, event) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var pathData = pathMap.getScaledPath('EVENT_PARALLEL_MULTIPLE', {\n        xScaleFactor: 1.2,\n        yScaleFactor: 1.2,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.458,\n          my: 0.194\n        }\n      });\n      return drawPath(parentGfx, pathData, {\n        fill: getFillColor(event, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:TerminateEventDefinition': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var circle = drawCircle(parentGfx, element.width, element.height, 8, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 4\n      });\n      return circle;\n    }\n  };\n  function renderEventIcon(element, parentGfx) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let proxyElement = arguments.length > 3 ? arguments[3] : undefined;\n    var semantic = getSemantic(element),\n      isThrowing = isThrowEvent(semantic);\n    var nodeElement = proxyElement || element;\n    if (semantic.get('eventDefinitions') && semantic.get('eventDefinitions').length > 1) {\n      if (semantic.get('parallelMultiple')) {\n        return eventIconRenderers['bpmn:ParallelMultipleEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n      } else {\n        return eventIconRenderers['bpmn:MultipleEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n      }\n    }\n    if (isTypedEvent(semantic, 'bpmn:MessageEventDefinition')) {\n      return eventIconRenderers['bpmn:MessageEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    if (isTypedEvent(semantic, 'bpmn:TimerEventDefinition')) {\n      return eventIconRenderers['bpmn:TimerEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    if (isTypedEvent(semantic, 'bpmn:ConditionalEventDefinition')) {\n      return eventIconRenderers['bpmn:ConditionalEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    if (isTypedEvent(semantic, 'bpmn:SignalEventDefinition')) {\n      return eventIconRenderers['bpmn:SignalEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    if (isTypedEvent(semantic, 'bpmn:EscalationEventDefinition')) {\n      return eventIconRenderers['bpmn:EscalationEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    if (isTypedEvent(semantic, 'bpmn:LinkEventDefinition')) {\n      return eventIconRenderers['bpmn:LinkEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    if (isTypedEvent(semantic, 'bpmn:ErrorEventDefinition')) {\n      return eventIconRenderers['bpmn:ErrorEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    if (isTypedEvent(semantic, 'bpmn:CancelEventDefinition')) {\n      return eventIconRenderers['bpmn:CancelEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    if (isTypedEvent(semantic, 'bpmn:CompensateEventDefinition')) {\n      return eventIconRenderers['bpmn:CompensateEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    if (isTypedEvent(semantic, 'bpmn:TerminateEventDefinition')) {\n      return eventIconRenderers['bpmn:TerminateEventDefinition'](parentGfx, nodeElement, attrs, isThrowing);\n    }\n    return null;\n  }\n  var taskMarkerRenderers = {\n    'ParticipantMultiplicityMarker': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var width = getWidth(element, attrs),\n        height = getHeight(element, attrs);\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: (width / 2 - 6) / width,\n          my: (height - 15) / height\n        }\n      });\n      drawMarker('participant-multiplicity', parentGfx, markerPath, {\n        strokeWidth: 2,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'SubProcessMarker': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var markerRect = drawRect(parentGfx, 14, 14, 0, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n      translate(markerRect, element.width / 2 - 7.5, element.height - 20);\n      var markerPath = pathMap.getScaledPath('MARKER_SUB_PROCESS', {\n        xScaleFactor: 1.5,\n        yScaleFactor: 1.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 - 7.5) / element.width,\n          my: (element.height - 20) / element.height\n        }\n      });\n      drawMarker('sub-process', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'ParallelMarker': function (parentGfx, element, attrs) {\n      var width = getWidth(element, attrs),\n        height = getHeight(element, attrs);\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: (width / 2 + attrs.parallel) / width,\n          my: (height - 20) / height\n        }\n      });\n      drawMarker('parallel', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'SequentialMarker': function (parentGfx, element, attrs) {\n      var markerPath = pathMap.getScaledPath('MARKER_SEQUENTIAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 + attrs.seq) / element.width,\n          my: (element.height - 19) / element.height\n        }\n      });\n      drawMarker('sequential', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'CompensationMarker': function (parentGfx, element, attrs) {\n      var markerMath = pathMap.getScaledPath('MARKER_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 + attrs.compensation) / element.width,\n          my: (element.height - 13) / element.height\n        }\n      });\n      drawMarker('compensation', parentGfx, markerMath, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'LoopMarker': function (parentGfx, element, attrs) {\n      var width = getWidth(element, attrs),\n        height = getHeight(element, attrs);\n      var markerPath = pathMap.getScaledPath('MARKER_LOOP', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: (width / 2 + attrs.loop) / width,\n          my: (height - 7) / height\n        }\n      });\n      drawMarker('loop', parentGfx, markerPath, {\n        strokeWidth: 1.5,\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeMiterlimit: 0.5\n      });\n    },\n    'AdhocMarker': function (parentGfx, element, attrs) {\n      var width = getWidth(element, attrs),\n        height = getHeight(element, attrs);\n      var markerPath = pathMap.getScaledPath('MARKER_ADHOC', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: (width / 2 + attrs.adhoc) / width,\n          my: (height - 15) / height\n        }\n      });\n      drawMarker('adhoc', parentGfx, markerPath, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    }\n  };\n  function renderTaskMarker(type, parentGfx, element, attrs) {\n    taskMarkerRenderers[type](parentGfx, element, attrs);\n  }\n  function renderTaskMarkers(parentGfx, element) {\n    let taskMarkers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    let attrs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    attrs = {\n      fill: attrs.fill,\n      stroke: attrs.stroke,\n      width: getWidth(element, attrs),\n      height: getHeight(element, attrs)\n    };\n    var semantic = getSemantic(element);\n    var subprocess = taskMarkers.includes('SubProcessMarker');\n    if (subprocess) {\n      attrs = {\n        ...attrs,\n        seq: -21,\n        parallel: -22,\n        compensation: -25,\n        loop: -18,\n        adhoc: 10\n      };\n    } else {\n      attrs = {\n        ...attrs,\n        seq: -5,\n        parallel: -6,\n        compensation: -7,\n        loop: 0,\n        adhoc: -8\n      };\n    }\n    if (semantic.get('isForCompensation')) {\n      taskMarkers.push('CompensationMarker');\n    }\n    if (is(semantic, 'bpmn:AdHocSubProcess')) {\n      taskMarkers.push('AdhocMarker');\n      if (!subprocess) {\n        assign(attrs, {\n          compensation: attrs.compensation - 18\n        });\n      }\n    }\n    var loopCharacteristics = semantic.get('loopCharacteristics'),\n      isSequential = loopCharacteristics && loopCharacteristics.get('isSequential');\n    if (loopCharacteristics) {\n      assign(attrs, {\n        compensation: attrs.compensation - 18\n      });\n      if (taskMarkers.includes('AdhocMarker')) {\n        assign(attrs, {\n          seq: -23,\n          loop: -18,\n          parallel: -24\n        });\n      }\n      if (isSequential === undefined) {\n        taskMarkers.push('LoopMarker');\n      }\n      if (isSequential === false) {\n        taskMarkers.push('ParallelMarker');\n      }\n      if (isSequential === true) {\n        taskMarkers.push('SequentialMarker');\n      }\n    }\n    if (taskMarkers.includes('CompensationMarker') && taskMarkers.length === 1) {\n      assign(attrs, {\n        compensation: -8\n      });\n    }\n    forEach(taskMarkers, function (marker) {\n      renderTaskMarker(marker, parentGfx, element, attrs);\n    });\n  }\n  function renderLabel(parentGfx, label) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    attrs = assign({\n      size: {\n        width: 100\n      }\n    }, attrs);\n    var text = textRenderer.createText(label || '', attrs);\n    svgClasses(text).add('djs-label');\n    svgAppend(parentGfx, text);\n    return text;\n  }\n  function renderEmbeddedLabel(parentGfx, element, align) {\n    let attrs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var semantic = getSemantic(element);\n    var box = getBounds({\n      x: element.x,\n      y: element.y,\n      width: element.width,\n      height: element.height\n    }, attrs);\n    return renderLabel(parentGfx, semantic.name, {\n      align,\n      box,\n      padding: 7,\n      style: {\n        fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n      }\n    });\n  }\n  function renderExternalLabel(parentGfx, element) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var box = {\n      width: 90,\n      height: 30,\n      x: element.width / 2 + element.x,\n      y: element.height / 2 + element.y\n    };\n    return renderLabel(parentGfx, getLabel(element), {\n      box: box,\n      fitBox: true,\n      style: assign({}, textRenderer.getExternalStyle(), {\n        fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n      })\n    });\n  }\n  function renderLaneLabel(parentGfx, text, element) {\n    let attrs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var isHorizontalLane = isHorizontal(element);\n    var textBox = renderLabel(parentGfx, text, {\n      box: {\n        height: 30,\n        width: isHorizontalLane ? getHeight(element, attrs) : getWidth(element, attrs)\n      },\n      align: 'center-middle',\n      style: {\n        fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n      }\n    });\n    if (isHorizontalLane) {\n      var top = -1 * getHeight(element, attrs);\n      transform(textBox, 0, -top, 270);\n    }\n  }\n  function renderActivity(parentGfx, element) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      width,\n      height\n    } = getBounds(element, attrs);\n    return drawRect(parentGfx, width, height, TASK_BORDER_RADIUS, {\n      ...attrs,\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      fillOpacity: DEFAULT_OPACITY,\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n    });\n  }\n  function renderAssociation(parentGfx, element) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var semantic = getSemantic(element);\n    var fill = getFillColor(element, defaultFillColor, attrs.fill),\n      stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n    if (semantic.get('associationDirection') === 'One' || semantic.get('associationDirection') === 'Both') {\n      attrs.markerEnd = marker(parentGfx, 'association-end', fill, stroke);\n    }\n    if (semantic.get('associationDirection') === 'Both') {\n      attrs.markerStart = marker(parentGfx, 'association-start', fill, stroke);\n    }\n    attrs = pickAttrs(attrs, ['markerStart', 'markerEnd']);\n    return drawConnectionSegments(parentGfx, element.waypoints, {\n      ...attrs,\n      stroke,\n      strokeDasharray: '0, 5'\n    });\n  }\n  function renderDataObject(parentGfx, element) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var fill = getFillColor(element, defaultFillColor, attrs.fill),\n      stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n    var pathData = pathMap.getScaledPath('DATA_OBJECT_PATH', {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.474,\n        my: 0.296\n      }\n    });\n    var dataObject = drawPath(parentGfx, pathData, {\n      fill,\n      fillOpacity: DEFAULT_OPACITY,\n      stroke\n    });\n    var semantic = getSemantic(element);\n    if (isCollection(semantic)) {\n      var collectionPathData = pathMap.getScaledPath('DATA_OBJECT_COLLECTION_PATH', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.33,\n          my: (element.height - 18) / element.height\n        }\n      });\n      drawPath(parentGfx, collectionPathData, {\n        strokeWidth: 2,\n        fill,\n        stroke\n      });\n    }\n    return dataObject;\n  }\n  function renderEvent(parentGfx, element) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return drawCircle(parentGfx, element.width, element.height, {\n      fillOpacity: DEFAULT_OPACITY,\n      ...attrs,\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n    });\n  }\n  function renderGateway(parentGfx, element) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return drawDiamond(parentGfx, element.width, element.height, {\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      fillOpacity: DEFAULT_OPACITY,\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n    });\n  }\n  function renderLane(parentGfx, element) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var lane = drawRect(parentGfx, getWidth(element, attrs), getHeight(element, attrs), 0, {\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      fillOpacity: attrs.fillOpacity || DEFAULT_OPACITY,\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n      strokeWidth: 1.5\n    });\n    var semantic = getSemantic(element);\n    if (is(semantic, 'bpmn:Lane')) {\n      var text = semantic.get('name');\n      renderLaneLabel(parentGfx, text, element, attrs);\n    }\n    return lane;\n  }\n  function renderSubProcess(parentGfx, element) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var activity = renderActivity(parentGfx, element, attrs);\n    var expanded = isExpanded(element);\n    if (isEventSubProcess(element)) {\n      svgAttr(activity, {\n        strokeDasharray: '0, 5.5',\n        strokeWidth: 2.5\n      });\n      if (!expanded) {\n        var flowElements = getSemantic(element).flowElements || [];\n        var startEvents = flowElements.filter(e => is(e, 'bpmn:StartEvent'));\n        if (startEvents.length === 1) {\n          renderEventSubProcessIcon(startEvents[0], parentGfx, attrs, element);\n        }\n      }\n    }\n    renderEmbeddedLabel(parentGfx, element, expanded ? 'center-top' : 'center-middle', attrs);\n    if (expanded) {\n      renderTaskMarkers(parentGfx, element, undefined, attrs);\n    } else {\n      renderTaskMarkers(parentGfx, element, ['SubProcessMarker'], attrs);\n    }\n    return activity;\n  }\n  function renderEventSubProcessIcon(startEvent, parentGfx, attrs, proxyElement) {\n    var iconSize = 22;\n\n    // match the colors of the enclosing subprocess\n    var proxyAttrs = {\n      fill: getFillColor(proxyElement, defaultFillColor, attrs.fill),\n      stroke: getStrokeColor(proxyElement, defaultStrokeColor, attrs.stroke),\n      width: iconSize,\n      height: iconSize\n    };\n    var interrupting = getSemantic(startEvent).isInterrupting;\n    var strokeDasharray = interrupting ? 0 : 3;\n\n    // better visibility for non-interrupting events\n    var strokeWidth = interrupting ? 1 : 1.2;\n\n    // make the icon look larger by drawing a smaller circle\n    var circleSize = 20;\n    var shift = (iconSize - circleSize) / 2;\n    var transform = 'translate(' + shift + ',' + shift + ')';\n    drawCircle(parentGfx, circleSize, circleSize, {\n      fill: proxyAttrs.fill,\n      stroke: proxyAttrs.stroke,\n      strokeWidth,\n      strokeDasharray,\n      transform\n    });\n    renderEventIcon(startEvent, parentGfx, proxyAttrs, proxyElement);\n  }\n  function renderTask(parentGfx, element) {\n    let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var activity = renderActivity(parentGfx, element, attrs);\n    renderEmbeddedLabel(parentGfx, element, 'center-middle', attrs);\n    renderTaskMarkers(parentGfx, element, undefined, attrs);\n    return activity;\n  }\n  var handlers = this.handlers = {\n    'bpmn:AdHocSubProcess': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (isExpanded(element)) {\n        attrs = pickAttrs(attrs, ['fill', 'stroke', 'width', 'height']);\n      } else {\n        attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      }\n      return renderSubProcess(parentGfx, element, attrs);\n    },\n    'bpmn:Association': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      return renderAssociation(parentGfx, element, attrs);\n    },\n    'bpmn:BoundaryEvent': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var {\n        renderIcon = true\n      } = attrs;\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var semantic = getSemantic(element),\n        cancelActivity = semantic.get('cancelActivity');\n      attrs = {\n        strokeWidth: 1.5,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        fillOpacity: FULL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      };\n      if (!cancelActivity) {\n        attrs.strokeDasharray = '6';\n      }\n      var event = renderEvent(parentGfx, element, attrs);\n      drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, {\n        ...attrs,\n        fill: 'none'\n      });\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n      return event;\n    },\n    'bpmn:BusinessRuleTask': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var task = renderTask(parentGfx, element, attrs);\n      var headerData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_MAIN', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n      var businessPath = drawPath(parentGfx, headerData);\n      svgAttr(businessPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      var headerPathData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_HEADER', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n      var businessHeaderPath = drawPath(parentGfx, headerPathData);\n      svgAttr(businessHeaderPath, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      return task;\n    },\n    'bpmn:CallActivity': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      return renderSubProcess(parentGfx, element, {\n        strokeWidth: 5,\n        ...attrs\n      });\n    },\n    'bpmn:ComplexGateway': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var gateway = renderGateway(parentGfx, element, attrs);\n      var pathData = pathMap.getScaledPath('GATEWAY_COMPLEX', {\n        xScaleFactor: 0.5,\n        yScaleFactor: 0.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.26\n        }\n      });\n      drawPath(parentGfx, pathData, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      return gateway;\n    },\n    'bpmn:DataInput': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n      var dataObject = renderDataObject(parentGfx, element, attrs);\n      drawPath(parentGfx, arrowPathData, {\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      return dataObject;\n    },\n    'bpmn:DataInputAssociation': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      return renderAssociation(parentGfx, element, {\n        ...attrs,\n        markerEnd: marker(parentGfx, 'association-end', getFillColor(element, defaultFillColor, attrs.fill), getStrokeColor(element, defaultStrokeColor, attrs.stroke))\n      });\n    },\n    'bpmn:DataObject': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      return renderDataObject(parentGfx, element, attrs);\n    },\n    'bpmn:DataObjectReference': as('bpmn:DataObject'),\n    'bpmn:DataOutput': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n      var dataObject = renderDataObject(parentGfx, element, attrs);\n      drawPath(parentGfx, arrowPathData, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n      return dataObject;\n    },\n    'bpmn:DataOutputAssociation': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      return renderAssociation(parentGfx, element, {\n        ...attrs,\n        markerEnd: marker(parentGfx, 'association-end', getFillColor(element, defaultFillColor, attrs.fill), getStrokeColor(element, defaultStrokeColor, attrs.stroke))\n      });\n    },\n    'bpmn:DataStoreReference': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var dataStorePath = pathMap.getScaledPath('DATA_STORE', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0,\n          my: 0.133\n        }\n      });\n      return drawPath(parentGfx, dataStorePath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        fillOpacity: DEFAULT_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 2\n      });\n    },\n    'bpmn:EndEvent': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var {\n        renderIcon = true\n      } = attrs;\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var event = renderEvent(parentGfx, element, {\n        ...attrs,\n        strokeWidth: 4\n      });\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n      return event;\n    },\n    'bpmn:EventBasedGateway': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var semantic = getSemantic(element);\n      var diamond = renderGateway(parentGfx, element, attrs);\n      drawCircle(parentGfx, element.width, element.height, element.height * 0.20, {\n        fill: getFillColor(element, 'none', attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      var type = semantic.get('eventGatewayType'),\n        instantiate = !!semantic.get('instantiate');\n      function drawEvent() {\n        var pathData = pathMap.getScaledPath('GATEWAY_EVENT_BASED', {\n          xScaleFactor: 0.18,\n          yScaleFactor: 0.18,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.36,\n            my: 0.44\n          }\n        });\n        drawPath(parentGfx, pathData, {\n          fill: 'none',\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 2\n        });\n      }\n      if (type === 'Parallel') {\n        var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n          xScaleFactor: 0.4,\n          yScaleFactor: 0.4,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.474,\n            my: 0.296\n          }\n        });\n        drawPath(parentGfx, pathData, {\n          fill: 'none',\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 1\n        });\n      } else if (type === 'Exclusive') {\n        if (!instantiate) {\n          drawCircle(parentGfx, element.width, element.height, element.height * 0.26, {\n            fill: 'none',\n            stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n            strokeWidth: 1\n          });\n        }\n        drawEvent();\n      }\n      return diamond;\n    },\n    'bpmn:ExclusiveGateway': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var gateway = renderGateway(parentGfx, element, attrs);\n      var pathData = pathMap.getScaledPath('GATEWAY_EXCLUSIVE', {\n        xScaleFactor: 0.4,\n        yScaleFactor: 0.4,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.32,\n          my: 0.3\n        }\n      });\n      var di = getDi(element);\n      if (di.get('isMarkerVisible')) {\n        drawPath(parentGfx, pathData, {\n          fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 1\n        });\n      }\n      return gateway;\n    },\n    'bpmn:Gateway': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      return renderGateway(parentGfx, element, attrs);\n    },\n    'bpmn:Group': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke', 'width', 'height']);\n      return drawRect(parentGfx, element.width, element.height, TASK_BORDER_RADIUS, {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1.5,\n        strokeDasharray: '10, 6, 0, 6',\n        fill: 'none',\n        pointerEvents: 'none',\n        width: getWidth(element, attrs),\n        height: getHeight(element, attrs)\n      });\n    },\n    'bpmn:InclusiveGateway': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var gateway = renderGateway(parentGfx, element, attrs);\n      drawCircle(parentGfx, element.width, element.height, element.height * 0.24, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 2.5\n      });\n      return gateway;\n    },\n    'bpmn:IntermediateEvent': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var {\n        renderIcon = true\n      } = attrs;\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var outer = renderEvent(parentGfx, element, {\n        ...attrs,\n        strokeWidth: 1.5\n      });\n      drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, {\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1.5\n      });\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n      return outer;\n    },\n    'bpmn:IntermediateCatchEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:IntermediateThrowEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:Lane': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke', 'width', 'height']);\n      return renderLane(parentGfx, element, {\n        ...attrs,\n        fillOpacity: LOW_OPACITY\n      });\n    },\n    'bpmn:ManualTask': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var task = renderTask(parentGfx, element, attrs);\n      var pathData = pathMap.getScaledPath('TASK_TYPE_MANUAL', {\n        abspos: {\n          x: 17,\n          y: 15\n        }\n      });\n      drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n      return task;\n    },\n    'bpmn:MessageFlow': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var semantic = getSemantic(element),\n        di = getDi(element);\n      var fill = getFillColor(element, defaultFillColor, attrs.fill),\n        stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n      var path = drawConnectionSegments(parentGfx, element.waypoints, {\n        markerEnd: marker(parentGfx, 'messageflow-end', fill, stroke),\n        markerStart: marker(parentGfx, 'messageflow-start', fill, stroke),\n        stroke,\n        strokeDasharray: '10, 11',\n        strokeWidth: 1.5\n      });\n      if (semantic.get('messageRef')) {\n        var midPoint = path.getPointAtLength(path.getTotalLength() / 2);\n        var markerPathData = pathMap.getScaledPath('MESSAGE_FLOW_MARKER', {\n          abspos: {\n            x: midPoint.x,\n            y: midPoint.y\n          }\n        });\n        var messageAttrs = {\n          strokeWidth: 1\n        };\n        if (di.get('messageVisibleKind') === 'initiating') {\n          messageAttrs.fill = fill;\n          messageAttrs.stroke = stroke;\n        } else {\n          messageAttrs.fill = stroke;\n          messageAttrs.stroke = fill;\n        }\n        var message = drawPath(parentGfx, markerPathData, messageAttrs);\n        var messageRef = semantic.get('messageRef'),\n          name = messageRef.get('name');\n        var label = renderLabel(parentGfx, name, {\n          align: 'center-top',\n          fitBox: true,\n          style: {\n            fill: stroke\n          }\n        });\n        var messageBounds = message.getBBox(),\n          labelBounds = label.getBBox();\n        var translateX = midPoint.x - labelBounds.width / 2,\n          translateY = midPoint.y + messageBounds.height / 2 + ELEMENT_LABEL_DISTANCE;\n        transform(label, translateX, translateY, 0);\n      }\n      return path;\n    },\n    'bpmn:ParallelGateway': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var diamond = renderGateway(parentGfx, element, attrs);\n      var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n        xScaleFactor: 0.6,\n        yScaleFactor: 0.6,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.2\n        }\n      });\n      drawPath(parentGfx, pathData, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      return diamond;\n    },\n    'bpmn:Participant': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke', 'width', 'height']);\n      var participant = renderLane(parentGfx, element, attrs);\n      var expandedParticipant = isExpanded(element);\n      var horizontalParticipant = isHorizontal(element);\n      var semantic = getSemantic(element),\n        name = semantic.get('name');\n      if (expandedParticipant) {\n        var waypoints = horizontalParticipant ? [{\n          x: 30,\n          y: 0\n        }, {\n          x: 30,\n          y: getHeight(element, attrs)\n        }] : [{\n          x: 0,\n          y: 30\n        }, {\n          x: getWidth(element, attrs),\n          y: 30\n        }];\n        drawLine(parentGfx, waypoints, {\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: PARTICIPANT_STROKE_WIDTH\n        });\n        renderLaneLabel(parentGfx, name, element, attrs);\n      } else {\n        var bounds = getBounds(element, attrs);\n        if (!horizontalParticipant) {\n          bounds.height = getWidth(element, attrs);\n          bounds.width = getHeight(element, attrs);\n        }\n        var textBox = renderLabel(parentGfx, name, {\n          box: bounds,\n          align: 'center-middle',\n          style: {\n            fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n          }\n        });\n        if (!horizontalParticipant) {\n          var top = -1 * getHeight(element, attrs);\n          transform(textBox, 0, -top, 270);\n        }\n      }\n      if (semantic.get('participantMultiplicity')) {\n        renderTaskMarker('ParticipantMultiplicityMarker', parentGfx, element, attrs);\n      }\n      return participant;\n    },\n    'bpmn:ReceiveTask': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var semantic = getSemantic(element);\n      var task = renderTask(parentGfx, element, attrs);\n      var pathData;\n      if (semantic.get('instantiate')) {\n        drawCircle(parentGfx, 28, 28, 20 * 0.22, {\n          fill: getFillColor(element, defaultFillColor, attrs.fill),\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 1\n        });\n        pathData = pathMap.getScaledPath('TASK_TYPE_INSTANTIATING_SEND', {\n          abspos: {\n            x: 7.77,\n            y: 9.52\n          }\n        });\n      } else {\n        pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n          xScaleFactor: 0.9,\n          yScaleFactor: 0.9,\n          containerWidth: 21,\n          containerHeight: 14,\n          position: {\n            mx: 0.3,\n            my: 0.4\n          }\n        });\n      }\n      drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      return task;\n    },\n    'bpmn:ScriptTask': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var task = renderTask(parentGfx, element, attrs);\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SCRIPT', {\n        abspos: {\n          x: 15,\n          y: 20\n        }\n      });\n      drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      return task;\n    },\n    'bpmn:SendTask': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var task = renderTask(parentGfx, element, attrs);\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: 21,\n        containerHeight: 14,\n        position: {\n          mx: 0.285,\n          my: 0.357\n        }\n      });\n      drawPath(parentGfx, pathData, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getFillColor(element, defaultFillColor, attrs.fill),\n        strokeWidth: 1\n      });\n      return task;\n    },\n    'bpmn:SequenceFlow': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var fill = getFillColor(element, defaultFillColor, attrs.fill),\n        stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n      var connection = drawConnectionSegments(parentGfx, element.waypoints, {\n        markerEnd: marker(parentGfx, 'sequenceflow-end', fill, stroke),\n        stroke\n      });\n      var semantic = getSemantic(element);\n      var {\n        source\n      } = element;\n      if (source) {\n        var sourceSemantic = getSemantic(source);\n\n        // conditional flow marker\n        if (semantic.get('conditionExpression') && is(sourceSemantic, 'bpmn:Activity')) {\n          svgAttr(connection, {\n            markerStart: marker(parentGfx, 'conditional-flow-marker', fill, stroke)\n          });\n        }\n\n        // default marker\n        if (sourceSemantic.get('default') && (is(sourceSemantic, 'bpmn:Gateway') || is(sourceSemantic, 'bpmn:Activity')) && sourceSemantic.get('default') === semantic) {\n          svgAttr(connection, {\n            markerStart: marker(parentGfx, 'conditional-default-flow-marker', fill, stroke)\n          });\n        }\n      }\n      return connection;\n    },\n    'bpmn:ServiceTask': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var task = renderTask(parentGfx, element, attrs);\n      drawCircle(parentGfx, 10, 10, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: 'none',\n        transform: 'translate(6, 6)'\n      });\n      var pathDataService1 = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 12,\n          y: 18\n        }\n      });\n      drawPath(parentGfx, pathDataService1, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      drawCircle(parentGfx, 10, 10, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: 'none',\n        transform: 'translate(11, 10)'\n      });\n      var pathDataService2 = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 17,\n          y: 22\n        }\n      });\n      drawPath(parentGfx, pathDataService2, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n      return task;\n    },\n    'bpmn:StartEvent': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var {\n        renderIcon = true\n      } = attrs;\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var semantic = getSemantic(element);\n      if (!semantic.get('isInterrupting')) {\n        attrs = {\n          ...attrs,\n          strokeDasharray: '6'\n        };\n      }\n      var event = renderEvent(parentGfx, element, attrs);\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n      return event;\n    },\n    'bpmn:SubProcess': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (isExpanded(element)) {\n        attrs = pickAttrs(attrs, ['fill', 'stroke', 'width', 'height']);\n      } else {\n        attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      }\n      return renderSubProcess(parentGfx, element, attrs);\n    },\n    'bpmn:Task': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      return renderTask(parentGfx, element, attrs);\n    },\n    'bpmn:TextAnnotation': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke', 'width', 'height']);\n      var {\n        width,\n        height\n      } = getBounds(element, attrs);\n      var textElement = drawRect(parentGfx, width, height, 0, 0, {\n        fill: 'none',\n        stroke: 'none'\n      });\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n      drawPath(parentGfx, textPathData, {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n      var semantic = getSemantic(element),\n        text = semantic.get('text') || '';\n      renderLabel(parentGfx, text, {\n        align: 'left-top',\n        box: getBounds(element, attrs),\n        padding: 7,\n        style: {\n          fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n        }\n      });\n      return textElement;\n    },\n    'bpmn:Transaction': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (isExpanded(element)) {\n        attrs = pickAttrs(attrs, ['fill', 'stroke', 'width', 'height']);\n      } else {\n        attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      }\n      var outer = renderSubProcess(parentGfx, element, {\n        strokeWidth: 1.5,\n        ...attrs\n      });\n      var innerAttrs = styles.style(['no-fill', 'no-events'], {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1.5\n      });\n      var expanded = isExpanded(element);\n      if (!expanded) {\n        attrs = {};\n      }\n      drawRect(parentGfx, getWidth(element, attrs), getHeight(element, attrs), TASK_BORDER_RADIUS - INNER_OUTER_DIST, INNER_OUTER_DIST, innerAttrs);\n      return outer;\n    },\n    'bpmn:UserTask': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      attrs = pickAttrs(attrs, ['fill', 'stroke']);\n      var task = renderTask(parentGfx, element, attrs);\n      var x = 15;\n      var y = 12;\n      var pathDataUser1 = pathMap.getScaledPath('TASK_TYPE_USER_1', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n      drawPath(parentGfx, pathDataUser1, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n      var pathDataUser2 = pathMap.getScaledPath('TASK_TYPE_USER_2', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n      drawPath(parentGfx, pathDataUser2, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n      var pathDataUser3 = pathMap.getScaledPath('TASK_TYPE_USER_3', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n      drawPath(parentGfx, pathDataUser3, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n      return task;\n    },\n    'label': function (parentGfx, element) {\n      let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return renderExternalLabel(parentGfx, element, attrs);\n    }\n  };\n\n  // extension API, use at your own risk\n  this._drawPath = drawPath;\n  this._renderer = renderer;\n}\ninherits(BpmnRenderer, BaseRenderer);\nBpmnRenderer.$inject = ['config.bpmnRenderer', 'eventBus', 'styles', 'pathMap', 'canvas', 'textRenderer'];\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nBpmnRenderer.prototype.canRender = function (element) {\n  return is(element, 'bpmn:BaseElement');\n};\n\n/**\n * Draw shape into parentGfx.\n *\n * @param {SVGElement} parentGfx\n * @param {Shape} shape\n * @param {Attrs} [attrs]\n *\n * @return {SVGElement} mainGfx\n */\nBpmnRenderer.prototype.drawShape = function (parentGfx, shape) {\n  let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    type\n  } = shape;\n  var handler = this._renderer(type);\n  return handler(parentGfx, shape, attrs);\n};\n\n/**\n * Draw connection into parentGfx.\n *\n * @param {SVGElement} parentGfx\n * @param {Connection} connection\n * @param {Attrs} [attrs]\n *\n * @return {SVGElement} mainGfx\n */\nBpmnRenderer.prototype.drawConnection = function (parentGfx, connection) {\n  let attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var {\n    type\n  } = connection;\n  var handler = this._renderer(type);\n  return handler(parentGfx, connection, attrs);\n};\n\n/**\n * Get shape path.\n *\n * @param {Shape} shape\n *\n * @return {string} path\n */\nBpmnRenderer.prototype.getShapePath = function (shape) {\n  if (is(shape, 'bpmn:Event')) {\n    return getCirclePath(shape);\n  }\n  if (is(shape, 'bpmn:Activity')) {\n    return getRoundRectPath(shape, TASK_BORDER_RADIUS);\n  }\n  if (is(shape, 'bpmn:Gateway')) {\n    return getDiamondPath(shape);\n  }\n  return getRectPath(shape);\n};\n\n/**\n * Pick attributes if they exist.\n *\n * @param {Object} attrs\n * @param {string[]} keys\n *\n * @returns {Object}\n */\nfunction pickAttrs(attrs) {\n  let keys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return keys.reduce((pickedAttrs, key) => {\n    if (attrs[key]) {\n      pickedAttrs[key] = attrs[key];\n    }\n    return pickedAttrs;\n  }, {});\n}","map":{"version":3,"names":["inherits","assign","forEach","isObject","BaseRenderer","isExpanded","isHorizontal","isEventSubProcess","getLabel","is","createLine","isTypedEvent","isThrowEvent","isCollection","getBounds","getDi","getSemantic","getCirclePath","getRoundRectPath","getDiamondPath","getRectPath","getFillColor","getStrokeColor","getLabelColor","getHeight","getWidth","query","domQuery","append","svgAppend","attr","svgAttr","create","svgCreate","classes","svgClasses","rotate","transform","translate","Ids","black","markerIds","ELEMENT_LABEL_DISTANCE","INNER_OUTER_DIST","PARTICIPANT_STROKE_WIDTH","TASK_BORDER_RADIUS","DEFAULT_OPACITY","FULL_OPACITY","LOW_OPACITY","BpmnRenderer","config","eventBus","styles","pathMap","canvas","textRenderer","priority","call","defaultFillColor","defaultStrokeColor","defaultLabelColor","shapeStyle","attrs","computeStyle","strokeLinecap","strokeLinejoin","stroke","strokeWidth","fill","lineStyle","addMarker","id","options","ref","x","y","scale","element","parentGfx","_svg","marker","viewBox","refX","refY","markerWidth","markerHeight","orient","defs","type","nextPrefixed","createMarker","sequenceflowEnd","d","messageflowStart","cx","cy","r","strokeDasharray","messageflowEnd","associationStart","associationEnd","conditionalFlowMarker","defaultFlowMarker","drawCircle","width","height","offset","arguments","length","undefined","circle","Math","round","drawRect","rect","rx","ry","drawDiamond","x_2","y_2","points","pointsString","map","point","join","polygon","drawLine","waypoints","radius","line","drawConnectionSegments","drawPath","path","drawMarker","renderer","handlers","as","eventIconRenderers","bpmn:MessageEventDefinition","isThrowing","pathData","getScaledPath","xScaleFactor","yScaleFactor","containerWidth","containerHeight","position","mx","my","messagePath","bpmn:TimerEventDefinition","baseWidth","baseHeight","i","linePathData","bpmn:EscalationEventDefinition","event","bpmn:ConditionalEventDefinition","bpmn:LinkEventDefinition","bpmn:ErrorEventDefinition","bpmn:CancelEventDefinition","bpmn:CompensateEventDefinition","bpmn:SignalEventDefinition","bpmn:MultipleEventDefinition","bpmn:ParallelMultipleEventDefinition","bpmn:TerminateEventDefinition","renderEventIcon","proxyElement","semantic","nodeElement","get","taskMarkerRenderers","ParticipantMultiplicityMarker","markerPath","SubProcessMarker","markerRect","ParallelMarker","parallel","SequentialMarker","seq","CompensationMarker","markerMath","compensation","LoopMarker","loop","strokeMiterlimit","AdhocMarker","adhoc","renderTaskMarker","renderTaskMarkers","taskMarkers","subprocess","includes","push","loopCharacteristics","isSequential","renderLabel","label","size","text","createText","add","renderEmbeddedLabel","align","box","name","padding","style","renderExternalLabel","fitBox","getExternalStyle","renderLaneLabel","isHorizontalLane","textBox","top","renderActivity","fillOpacity","renderAssociation","markerEnd","markerStart","pickAttrs","renderDataObject","dataObject","collectionPathData","renderEvent","renderGateway","renderLane","lane","renderSubProcess","activity","expanded","flowElements","startEvents","filter","e","renderEventSubProcessIcon","startEvent","iconSize","proxyAttrs","interrupting","isInterrupting","circleSize","shift","renderTask","bpmn:AdHocSubProcess","bpmn:Association","bpmn:BoundaryEvent","renderIcon","cancelActivity","bpmn:BusinessRuleTask","task","headerData","abspos","businessPath","headerPathData","businessHeaderPath","bpmn:CallActivity","bpmn:ComplexGateway","gateway","bpmn:DataInput","arrowPathData","getRawPath","bpmn:DataInputAssociation","bpmn:DataObject","bpmn:DataOutput","bpmn:DataOutputAssociation","bpmn:DataStoreReference","dataStorePath","bpmn:EndEvent","bpmn:EventBasedGateway","diamond","instantiate","drawEvent","bpmn:ExclusiveGateway","di","bpmn:Gateway","bpmn:Group","pointerEvents","bpmn:InclusiveGateway","bpmn:IntermediateEvent","outer","bpmn:Lane","bpmn:ManualTask","bpmn:MessageFlow","midPoint","getPointAtLength","getTotalLength","markerPathData","messageAttrs","message","messageRef","messageBounds","getBBox","labelBounds","translateX","translateY","bpmn:ParallelGateway","bpmn:Participant","participant","expandedParticipant","horizontalParticipant","bounds","bpmn:ReceiveTask","bpmn:ScriptTask","bpmn:SendTask","bpmn:SequenceFlow","connection","source","sourceSemantic","bpmn:ServiceTask","pathDataService1","pathDataService2","bpmn:StartEvent","bpmn:SubProcess","bpmn:Task","bpmn:TextAnnotation","textElement","textPathData","bpmn:Transaction","innerAttrs","bpmn:UserTask","pathDataUser1","pathDataUser2","pathDataUser3","_drawPath","_renderer","$inject","prototype","canRender","drawShape","shape","handler","drawConnection","getShapePath","keys","reduce","pickedAttrs","key"],"sources":["/home/runner/work/sgex/sgex/node_modules/bpmn-js/lib/draw/BpmnRenderer.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport {\n  assign,\n  forEach,\n  isObject\n} from 'min-dash';\n\nimport BaseRenderer from 'diagram-js/lib/draw/BaseRenderer';\n\nimport {\n  isExpanded,\n  isHorizontal,\n  isEventSubProcess\n} from '../util/DiUtil';\n\nimport {\n  getLabel\n} from '../util/LabelUtil';\n\nimport {\n  is\n} from '../util/ModelUtil';\n\nimport {\n  createLine\n} from 'diagram-js/lib/util/RenderUtil';\n\nimport {\n  isTypedEvent,\n  isThrowEvent,\n  isCollection,\n  getBounds,\n  getDi,\n  getSemantic,\n  getCirclePath,\n  getRoundRectPath,\n  getDiamondPath,\n  getRectPath,\n  getFillColor,\n  getStrokeColor,\n  getLabelColor,\n  getHeight,\n  getWidth\n} from './BpmnRenderUtil';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  classes as svgClasses\n} from 'tiny-svg';\n\nimport {\n  rotate,\n  transform,\n  translate\n} from 'diagram-js/lib/util/SvgTransformUtil';\n\nimport Ids from 'ids';\n\nimport { black } from './BpmnRenderUtil';\n\nvar markerIds = new Ids();\n\nvar ELEMENT_LABEL_DISTANCE = 10,\n    INNER_OUTER_DIST = 3,\n    PARTICIPANT_STROKE_WIDTH = 1.5,\n    TASK_BORDER_RADIUS = 10;\n\nvar DEFAULT_OPACITY = 0.95,\n    FULL_OPACITY = 1,\n    LOW_OPACITY = 0.25;\n\n/**\n * @typedef { Partial<{\n *   defaultFillColor: string,\n *   defaultStrokeColor: string,\n *   defaultLabelColor: string\n * }> } BpmnRendererConfig\n *\n * @typedef { Partial<{\n *   fill: string,\n *   stroke: string,\n *   width: string,\n *   height: string\n * }> } Attrs\n */\n\n/**\n * @typedef { import('../model/Types').Element } Element\n * @typedef { import('../model/Types').Shape } Shape\n * @typedef { import('../model/Types').Connection } Connection\n */\n\n/**\n * A renderer for BPMN elements\n *\n * @param {BpmnRendererConfig} config\n * @param {import('diagram-js/lib/core/EventBus').default} eventBus\n * @param {import('diagram-js/lib/draw/Styles').default} styles\n * @param {import('./PathMap').default} pathMap\n * @param {import('diagram-js/lib/core/Canvas').default} canvas\n * @param {import('./TextRenderer').default} textRenderer\n * @param {number} [priority]\n */\nexport default function BpmnRenderer(\n    config, eventBus, styles, pathMap,\n    canvas, textRenderer, priority) {\n\n  BaseRenderer.call(this, eventBus, priority);\n\n  var defaultFillColor = config && config.defaultFillColor,\n      defaultStrokeColor = config && config.defaultStrokeColor,\n      defaultLabelColor = config && config.defaultLabelColor;\n\n  function shapeStyle(attrs) {\n    return styles.computeStyle(attrs, {\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      stroke: black,\n      strokeWidth: 2,\n      fill: 'white'\n    });\n  }\n\n  function lineStyle(attrs) {\n    return styles.computeStyle(attrs, [ 'no-fill' ], {\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      stroke: black,\n      strokeWidth: 2\n    });\n  }\n\n  function addMarker(id, options) {\n    var {\n      ref = { x: 0, y: 0 },\n      scale = 1,\n      element,\n      parentGfx = canvas._svg\n    } = options;\n\n    var marker = svgCreate('marker', {\n      id: id,\n      viewBox: '0 0 20 20',\n      refX: ref.x,\n      refY: ref.y,\n      markerWidth: 20 * scale,\n      markerHeight: 20 * scale,\n      orient: 'auto'\n    });\n\n    svgAppend(marker, element);\n\n    var defs = domQuery(':scope > defs', parentGfx);\n\n    if (!defs) {\n      defs = svgCreate('defs');\n\n      svgAppend(parentGfx, defs);\n    }\n\n    svgAppend(defs, marker);\n  }\n\n  function marker(parentGfx, type, fill, stroke) {\n\n\n    var id = markerIds.nextPrefixed('marker-');\n\n    createMarker(parentGfx, id, type, fill, stroke);\n\n    return 'url(#' + id + ')';\n  }\n\n  function createMarker(parentGfx, id, type, fill, stroke) {\n\n    if (type === 'sequenceflow-end') {\n      var sequenceflowEnd = svgCreate('path', {\n        d: 'M 1 5 L 11 10 L 1 15 Z',\n        ...shapeStyle({\n          fill: stroke,\n          stroke: stroke,\n          strokeWidth: 1\n        })\n      });\n\n      addMarker(id, {\n        element: sequenceflowEnd,\n        ref: { x: 11, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n\n    if (type === 'messageflow-start') {\n      var messageflowStart = svgCreate('circle', {\n        cx: 6,\n        cy: 6,\n        r: 3.5,\n        ...shapeStyle({\n          fill,\n          stroke: stroke,\n          strokeWidth: 1,\n\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [ 10000, 1 ]\n        })\n      });\n\n      addMarker(id, {\n        element: messageflowStart,\n        ref: { x: 6, y: 6 },\n        parentGfx\n      });\n    }\n\n    if (type === 'messageflow-end') {\n      var messageflowEnd = svgCreate('path', {\n        d: 'm 1 5 l 0 -3 l 7 3 l -7 3 z',\n        ...shapeStyle({\n          fill,\n          stroke: stroke,\n          strokeWidth: 1,\n\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [ 10000, 1 ]\n        })\n      });\n\n      addMarker(id, {\n        element: messageflowEnd,\n        ref: { x: 8.5, y: 5 },\n        parentGfx\n      });\n    }\n\n    if (type === 'association-start') {\n      var associationStart = svgCreate('path', {\n        d: 'M 11 5 L 1 10 L 11 15',\n        ...lineStyle({\n          fill: 'none',\n          stroke,\n          strokeWidth: 1.5,\n\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [ 10000, 1 ]\n        })\n      });\n\n      addMarker(id, {\n        element: associationStart,\n        ref: { x: 1, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n\n    if (type === 'association-end') {\n      var associationEnd = svgCreate('path', {\n        d: 'M 1 5 L 11 10 L 1 15',\n        ...lineStyle({\n          fill: 'none',\n          stroke,\n          strokeWidth: 1.5,\n\n          // fix for safari / chrome / firefox bug not correctly\n          // resetting stroke dash array\n          strokeDasharray: [ 10000, 1 ]\n        })\n      });\n\n      addMarker(id, {\n        element: associationEnd,\n        ref: { x: 11, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n\n    if (type === 'conditional-flow-marker') {\n      var conditionalFlowMarker = svgCreate('path', {\n        d: 'M 0 10 L 8 6 L 16 10 L 8 14 Z',\n        ...shapeStyle({\n          fill,\n          stroke: stroke\n        })\n      });\n\n      addMarker(id, {\n        element: conditionalFlowMarker,\n        ref: { x: -1, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n\n    if (type === 'conditional-default-flow-marker') {\n      var defaultFlowMarker = svgCreate('path', {\n        d: 'M 6 4 L 10 16',\n        ...shapeStyle({\n          stroke: stroke,\n          fill: 'none'\n        })\n      });\n\n      addMarker(id, {\n        element: defaultFlowMarker,\n        ref: { x: 0, y: 10 },\n        scale: 0.5,\n        parentGfx\n      });\n    }\n  }\n\n  function drawCircle(parentGfx, width, height, offset, attrs = {}) {\n\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = shapeStyle(attrs);\n\n    var cx = width / 2,\n        cy = height / 2;\n\n    var circle = svgCreate('circle', {\n      cx: cx,\n      cy: cy,\n      r: Math.round((width + height) / 4 - offset),\n      ...attrs\n    });\n\n    svgAppend(parentGfx, circle);\n\n    return circle;\n  }\n\n  function drawRect(parentGfx, width, height, r, offset, attrs) {\n\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = shapeStyle(attrs);\n\n    var rect = svgCreate('rect', {\n      x: offset,\n      y: offset,\n      width: width - offset * 2,\n      height: height - offset * 2,\n      rx: r,\n      ry: r,\n      ...attrs\n    });\n\n    svgAppend(parentGfx, rect);\n\n    return rect;\n  }\n\n  function drawDiamond(parentGfx, width, height, attrs) {\n\n    var x_2 = width / 2;\n    var y_2 = height / 2;\n\n    var points = [\n      { x: x_2, y: 0 },\n      { x: width, y: y_2 },\n      { x: x_2, y: height },\n      { x: 0, y: y_2 }\n    ];\n\n    var pointsString = points.map(function(point) {\n      return point.x + ',' + point.y;\n    }).join(' ');\n\n    attrs = shapeStyle(attrs);\n\n    var polygon = svgCreate('polygon', {\n      ...attrs,\n      points: pointsString\n    });\n\n    svgAppend(parentGfx, polygon);\n\n    return polygon;\n  }\n\n  /**\n   * @param {SVGElement} parentGfx\n   * @param {Point[]} waypoints\n   * @param {any} attrs\n   * @param {number} [radius]\n   *\n   * @return {SVGElement}\n   */\n  function drawLine(parentGfx, waypoints, attrs, radius) {\n    attrs = lineStyle(attrs);\n\n    var line = createLine(waypoints, attrs, radius);\n\n    svgAppend(parentGfx, line);\n\n    return line;\n  }\n\n  /**\n   * @param {SVGElement} parentGfx\n   * @param {Point[]} waypoints\n   * @param {any} attrs\n   *\n   * @return {SVGElement}\n   */\n  function drawConnectionSegments(parentGfx, waypoints, attrs) {\n    return drawLine(parentGfx, waypoints, attrs, 5);\n  }\n\n  function drawPath(parentGfx, d, attrs) {\n    attrs = lineStyle(attrs);\n\n    var path = svgCreate('path', {\n      ...attrs,\n      d\n    });\n\n    svgAppend(parentGfx, path);\n\n    return path;\n  }\n\n  function drawMarker(type, parentGfx, path, attrs) {\n    return drawPath(parentGfx, path, assign({ 'data-marker': type }, attrs));\n  }\n\n  function renderer(type) {\n    return handlers[type];\n  }\n\n  function as(type) {\n    return function(parentGfx, element, attrs) {\n      return renderer(type)(parentGfx, element, attrs);\n    };\n  }\n\n  var eventIconRenderers = {\n    'bpmn:MessageEventDefinition': function(parentGfx, element, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MESSAGE', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: attrs.width || element.width,\n        containerHeight: attrs.height || element.height,\n        position: {\n          mx: 0.235,\n          my: 0.315\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n        : getFillColor(element, defaultFillColor, attrs.fill);\n\n      var stroke = isThrowing\n        ? getFillColor(element, defaultFillColor, attrs.fill)\n        : getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n      var messagePath = drawPath(parentGfx, pathData, {\n        fill,\n        stroke,\n        strokeWidth: 1\n      });\n\n      return messagePath;\n    },\n    'bpmn:TimerEventDefinition': function(parentGfx, element, attrs = {}) {\n      var baseWidth = attrs.width || element.width;\n      var baseHeight = attrs.height || element.height;\n\n      // use a lighter stroke for event suprocess icons\n      var strokeWidth = attrs.width ? 1 : 2;\n\n      var circle = drawCircle(parentGfx, baseWidth, baseHeight, 0.2 * baseHeight, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: strokeWidth\n      });\n\n      var pathData = pathMap.getScaledPath('EVENT_TIMER_WH', {\n        xScaleFactor: 0.75,\n        yScaleFactor: 0.75,\n        containerWidth: baseWidth,\n        containerHeight: baseHeight,\n        position: {\n          mx: 0.5,\n          my: 0.5\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: strokeWidth\n      });\n\n      for (var i = 0; i < 12; i++) {\n        var linePathData = pathMap.getScaledPath('EVENT_TIMER_LINE', {\n          xScaleFactor: 0.75,\n          yScaleFactor: 0.75,\n          containerWidth: baseWidth,\n          containerHeight: baseHeight,\n          position: {\n            mx: 0.5,\n            my: 0.5\n          }\n        });\n\n        var width = baseWidth / 2,\n            height = baseHeight / 2;\n\n        drawPath(parentGfx, linePathData, {\n          strokeWidth: 1,\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          transform: 'rotate(' + (i * 30) + ',' + height + ',' + width + ')'\n        });\n      }\n\n      return circle;\n    },\n    'bpmn:EscalationEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ESCALATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ConditionalEventDefinition': function(parentGfx, event, attrs = {}) {\n      var pathData = pathMap.getScaledPath('EVENT_CONDITIONAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.5,\n          my: 0.222\n        }\n      });\n\n      return drawPath(parentGfx, pathData, {\n        fill: getFillColor(event, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:LinkEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_LINK', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.57,\n          my: 0.263\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ErrorEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ERROR', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.2,\n          my: 0.722\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:CancelEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_CANCEL_45', {\n        xScaleFactor: 1.0,\n        yScaleFactor: 1.0,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.638,\n          my: -0.055\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor, attrs.stroke) : 'none';\n\n      var path = drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      rotate(path, 45);\n\n      return path;\n    },\n    'bpmn:CompensateEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.22,\n          my: 0.5\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:SignalEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_SIGNAL', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'bpmn:MultipleEventDefinition': function(parentGfx, event, attrs = {}, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MULTIPLE', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.211,\n          my: 0.36\n        }\n      });\n\n      var fill = isThrowing\n        ? getStrokeColor(event, defaultStrokeColor, attrs.stroke)\n        : getFillColor(event, defaultFillColor, attrs.fill);\n\n      return drawPath(parentGfx, pathData, {\n        fill,\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:ParallelMultipleEventDefinition': function(parentGfx, event, attrs = {}) {\n      var pathData = pathMap.getScaledPath('EVENT_PARALLEL_MULTIPLE', {\n        xScaleFactor: 1.2,\n        yScaleFactor: 1.2,\n        containerWidth: attrs.width || event.width,\n        containerHeight: attrs.height || event.height,\n        position: {\n          mx: 0.458,\n          my: 0.194\n        }\n      });\n\n      return drawPath(parentGfx, pathData, {\n        fill: getFillColor(event, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(event, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n    },\n    'bpmn:TerminateEventDefinition': function(parentGfx, element, attrs = {}) {\n      var circle = drawCircle(parentGfx, element.width, element.height, 8, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 4\n      });\n\n      return circle;\n    }\n  };\n\n  function renderEventIcon(element, parentGfx, attrs = {}, proxyElement) {\n    var semantic = getSemantic(element),\n        isThrowing = isThrowEvent(semantic);\n\n    var nodeElement = proxyElement || element;\n\n    if (semantic.get('eventDefinitions') && semantic.get('eventDefinitions').length > 1) {\n      if (semantic.get('parallelMultiple')) {\n        return eventIconRenderers[ 'bpmn:ParallelMultipleEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n      }\n      else {\n        return eventIconRenderers[ 'bpmn:MultipleEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n      }\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:MessageEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:MessageEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:TimerEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:TimerEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:ConditionalEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:ConditionalEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:SignalEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:SignalEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:EscalationEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:EscalationEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:LinkEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:LinkEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:ErrorEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:ErrorEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:CancelEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:CancelEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:CompensateEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:CompensateEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    if (isTypedEvent(semantic, 'bpmn:TerminateEventDefinition')) {\n      return eventIconRenderers[ 'bpmn:TerminateEventDefinition' ](parentGfx, nodeElement, attrs, isThrowing);\n    }\n\n    return null;\n  }\n\n  var taskMarkerRenderers = {\n    'ParticipantMultiplicityMarker': function(parentGfx, element, attrs = {}) {\n      var width = getWidth(element, attrs),\n          height = getHeight(element, attrs);\n\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: ((width / 2 - 6) / width),\n          my: (height - 15) / height\n        }\n      });\n\n      drawMarker('participant-multiplicity', parentGfx, markerPath, {\n        strokeWidth: 2,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'SubProcessMarker': function(parentGfx, element, attrs = {}) {\n      var markerRect = drawRect(parentGfx, 14, 14, 0, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n\n      translate(markerRect, element.width / 2 - 7.5, element.height - 20);\n\n      var markerPath = pathMap.getScaledPath('MARKER_SUB_PROCESS', {\n        xScaleFactor: 1.5,\n        yScaleFactor: 1.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 - 7.5) / element.width,\n          my: (element.height - 20) / element.height\n        }\n      });\n\n      drawMarker('sub-process', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'ParallelMarker': function(parentGfx, element, attrs) {\n      var width = getWidth(element, attrs),\n          height = getHeight(element, attrs);\n\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: ((width / 2 + attrs.parallel) / width),\n          my: (height - 20) / height\n        }\n      });\n\n      drawMarker('parallel', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'SequentialMarker': function(parentGfx, element, attrs) {\n      var markerPath = pathMap.getScaledPath('MARKER_SEQUENTIAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + attrs.seq) / element.width),\n          my: (element.height - 19) / element.height\n        }\n      });\n\n      drawMarker('sequential', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'CompensationMarker': function(parentGfx, element, attrs) {\n      var markerMath = pathMap.getScaledPath('MARKER_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + attrs.compensation) / element.width),\n          my: (element.height - 13) / element.height\n        }\n      });\n\n      drawMarker('compensation', parentGfx, markerMath, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    },\n    'LoopMarker': function(parentGfx, element, attrs) {\n      var width = getWidth(element, attrs),\n          height = getHeight(element, attrs);\n\n      var markerPath = pathMap.getScaledPath('MARKER_LOOP', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: ((width / 2 + attrs.loop) / width),\n          my: (height - 7) / height\n        }\n      });\n\n      drawMarker('loop', parentGfx, markerPath, {\n        strokeWidth: 1.5,\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeMiterlimit: 0.5\n      });\n    },\n    'AdhocMarker': function(parentGfx, element, attrs) {\n      var width = getWidth(element, attrs),\n          height = getHeight(element, attrs);\n\n      var markerPath = pathMap.getScaledPath('MARKER_ADHOC', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: ((width / 2 + attrs.adhoc) / width),\n          my: (height - 15) / height\n        }\n      });\n\n      drawMarker('adhoc', parentGfx, markerPath, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n    }\n  };\n\n  function renderTaskMarker(type, parentGfx, element, attrs) {\n    taskMarkerRenderers[ type ](parentGfx, element, attrs);\n  }\n\n  function renderTaskMarkers(parentGfx, element, taskMarkers = [], attrs = {}) {\n    attrs = {\n      fill: attrs.fill,\n      stroke: attrs.stroke,\n      width: getWidth(element, attrs),\n      height: getHeight(element, attrs)\n    };\n\n    var semantic = getSemantic(element);\n\n    var subprocess = taskMarkers.includes('SubProcessMarker');\n\n    if (subprocess) {\n      attrs = {\n        ...attrs,\n        seq: -21,\n        parallel: -22,\n        compensation: -25,\n        loop: -18,\n        adhoc: 10\n      };\n    } else {\n      attrs = {\n        ...attrs,\n        seq: -5,\n        parallel: -6,\n        compensation: -7,\n        loop: 0,\n        adhoc: -8\n      };\n    }\n\n    if (semantic.get('isForCompensation')) {\n      taskMarkers.push('CompensationMarker');\n    }\n\n    if (is(semantic, 'bpmn:AdHocSubProcess')) {\n      taskMarkers.push('AdhocMarker');\n\n      if (!subprocess) {\n        assign(attrs, { compensation: attrs.compensation - 18 });\n      }\n    }\n\n    var loopCharacteristics = semantic.get('loopCharacteristics'),\n        isSequential = loopCharacteristics && loopCharacteristics.get('isSequential');\n\n    if (loopCharacteristics) {\n\n      assign(attrs, {\n        compensation: attrs.compensation - 18,\n      });\n\n      if (taskMarkers.includes('AdhocMarker')) {\n        assign(attrs, {\n          seq: -23,\n          loop: -18,\n          parallel: -24\n        });\n      }\n\n      if (isSequential === undefined) {\n        taskMarkers.push('LoopMarker');\n      }\n\n      if (isSequential === false) {\n        taskMarkers.push('ParallelMarker');\n      }\n\n      if (isSequential === true) {\n        taskMarkers.push('SequentialMarker');\n      }\n    }\n\n    if (taskMarkers.includes('CompensationMarker') && taskMarkers.length === 1) {\n      assign(attrs, {\n        compensation: -8\n      });\n    }\n\n    forEach(taskMarkers, function(marker) {\n      renderTaskMarker(marker, parentGfx, element, attrs);\n    });\n  }\n\n  function renderLabel(parentGfx, label, attrs = {}) {\n    attrs = assign({\n      size: {\n        width: 100\n      }\n    }, attrs);\n\n    var text = textRenderer.createText(label || '', attrs);\n\n    svgClasses(text).add('djs-label');\n\n    svgAppend(parentGfx, text);\n\n    return text;\n  }\n\n  function renderEmbeddedLabel(parentGfx, element, align, attrs = {}) {\n    var semantic = getSemantic(element);\n\n    var box = getBounds({\n      x: element.x,\n      y: element.y,\n      width: element.width,\n      height: element.height\n    }, attrs);\n\n    return renderLabel(parentGfx, semantic.name, {\n      align,\n      box,\n      padding: 7,\n      style: {\n        fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n      }\n    });\n  }\n\n  function renderExternalLabel(parentGfx, element, attrs = {}) {\n    var box = {\n      width: 90,\n      height: 30,\n      x: element.width / 2 + element.x,\n      y: element.height / 2 + element.y\n    };\n\n    return renderLabel(parentGfx, getLabel(element), {\n      box: box,\n      fitBox: true,\n      style: assign(\n        {},\n        textRenderer.getExternalStyle(),\n        {\n          fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n        }\n      )\n    });\n  }\n\n  function renderLaneLabel(parentGfx, text, element, attrs = {}) {\n    var isHorizontalLane = isHorizontal(element);\n\n    var textBox = renderLabel(parentGfx, text, {\n      box: {\n        height: 30,\n        width: isHorizontalLane ? getHeight(element, attrs) : getWidth(element, attrs),\n      },\n      align: 'center-middle',\n      style: {\n        fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n      }\n    });\n\n    if (isHorizontalLane) {\n      var top = -1 * getHeight(element, attrs);\n      transform(textBox, 0, -top, 270);\n    }\n  }\n\n  function renderActivity(parentGfx, element, attrs = {}) {\n    var {\n      width,\n      height\n    } = getBounds(element, attrs);\n\n    return drawRect(parentGfx, width, height, TASK_BORDER_RADIUS, {\n      ...attrs,\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      fillOpacity: DEFAULT_OPACITY,\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n    });\n  }\n\n  function renderAssociation(parentGfx, element, attrs = {}) {\n    var semantic = getSemantic(element);\n\n    var fill = getFillColor(element, defaultFillColor, attrs.fill),\n        stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n    if (semantic.get('associationDirection') === 'One' ||\n        semantic.get('associationDirection') === 'Both') {\n      attrs.markerEnd = marker(parentGfx, 'association-end', fill, stroke);\n    }\n\n    if (semantic.get('associationDirection') === 'Both') {\n      attrs.markerStart = marker(parentGfx, 'association-start', fill, stroke);\n    }\n\n    attrs = pickAttrs(attrs, [\n      'markerStart',\n      'markerEnd'\n    ]);\n\n    return drawConnectionSegments(parentGfx, element.waypoints, {\n      ...attrs,\n      stroke,\n      strokeDasharray: '0, 5'\n    });\n  }\n\n  function renderDataObject(parentGfx, element, attrs = {}) {\n    var fill = getFillColor(element, defaultFillColor, attrs.fill),\n        stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n    var pathData = pathMap.getScaledPath('DATA_OBJECT_PATH', {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.474,\n        my: 0.296\n      }\n    });\n\n    var dataObject = drawPath(parentGfx, pathData, {\n      fill,\n      fillOpacity: DEFAULT_OPACITY,\n      stroke\n    });\n\n    var semantic = getSemantic(element);\n\n    if (isCollection(semantic)) {\n      var collectionPathData = pathMap.getScaledPath('DATA_OBJECT_COLLECTION_PATH', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.33,\n          my: (element.height - 18) / element.height\n        }\n      });\n\n      drawPath(parentGfx, collectionPathData, {\n        strokeWidth: 2,\n        fill,\n        stroke\n      });\n    }\n\n    return dataObject;\n  }\n\n  function renderEvent(parentGfx, element, attrs = {}) {\n    return drawCircle(parentGfx, element.width, element.height, {\n      fillOpacity: DEFAULT_OPACITY,\n      ...attrs,\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n    });\n  }\n\n  function renderGateway(parentGfx, element, attrs = {}) {\n    return drawDiamond(parentGfx, element.width, element.height, {\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      fillOpacity: DEFAULT_OPACITY,\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n    });\n  }\n\n  function renderLane(parentGfx, element, attrs = {}) {\n    var lane = drawRect(parentGfx, getWidth(element, attrs), getHeight(element, attrs), 0, {\n      fill: getFillColor(element, defaultFillColor, attrs.fill),\n      fillOpacity: attrs.fillOpacity || DEFAULT_OPACITY,\n      stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n      strokeWidth: 1.5\n    });\n\n    var semantic = getSemantic(element);\n\n    if (is(semantic, 'bpmn:Lane')) {\n      var text = semantic.get('name');\n\n      renderLaneLabel(parentGfx, text, element, attrs);\n    }\n\n    return lane;\n  }\n\n  function renderSubProcess(parentGfx, element, attrs = {}) {\n    var activity = renderActivity(parentGfx, element, attrs);\n\n    var expanded = isExpanded(element);\n\n    if (isEventSubProcess(element)) {\n      svgAttr(activity, {\n        strokeDasharray: '0, 5.5',\n        strokeWidth: 2.5\n      });\n\n      if (!expanded) {\n        var flowElements = getSemantic(element).flowElements || [];\n        var startEvents = flowElements.filter(e => is(e, 'bpmn:StartEvent'));\n\n        if (startEvents.length === 1) {\n          renderEventSubProcessIcon(startEvents[0], parentGfx, attrs, element);\n        }\n      }\n    }\n\n    renderEmbeddedLabel(parentGfx, element, expanded ? 'center-top' : 'center-middle', attrs);\n\n    if (expanded) {\n      renderTaskMarkers(parentGfx, element, undefined, attrs);\n    } else {\n      renderTaskMarkers(parentGfx, element, [ 'SubProcessMarker' ], attrs);\n    }\n\n    return activity;\n  }\n\n  function renderEventSubProcessIcon(startEvent, parentGfx, attrs, proxyElement) {\n    var iconSize = 22;\n\n    // match the colors of the enclosing subprocess\n    var proxyAttrs = {\n      fill: getFillColor(proxyElement, defaultFillColor, attrs.fill),\n      stroke: getStrokeColor(proxyElement, defaultStrokeColor, attrs.stroke),\n      width: iconSize,\n      height: iconSize\n    };\n\n    var interrupting = getSemantic(startEvent).isInterrupting;\n    var strokeDasharray = interrupting ? 0 : 3;\n\n    // better visibility for non-interrupting events\n    var strokeWidth = interrupting ? 1 : 1.2;\n\n    // make the icon look larger by drawing a smaller circle\n    var circleSize = 20;\n    var shift = (iconSize - circleSize) / 2;\n    var transform = 'translate(' + shift + ',' + shift + ')';\n\n    drawCircle(parentGfx, circleSize, circleSize, {\n      fill: proxyAttrs.fill,\n      stroke: proxyAttrs.stroke,\n      strokeWidth,\n      strokeDasharray,\n      transform\n    });\n\n    renderEventIcon(startEvent, parentGfx, proxyAttrs, proxyElement);\n  }\n\n  function renderTask(parentGfx, element, attrs = {}) {\n    var activity = renderActivity(parentGfx, element, attrs);\n\n    renderEmbeddedLabel(parentGfx, element, 'center-middle', attrs);\n\n    renderTaskMarkers(parentGfx, element, undefined, attrs);\n\n    return activity;\n  }\n\n  var handlers = this.handlers = {\n    'bpmn:AdHocSubProcess': function(parentGfx, element, attrs = {}) {\n      if (isExpanded(element)) {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke',\n          'width',\n          'height'\n        ]);\n      } else {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke'\n        ]);\n      }\n\n      return renderSubProcess(parentGfx, element, attrs);\n    },\n    'bpmn:Association': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderAssociation(parentGfx, element, attrs);\n    },\n    'bpmn:BoundaryEvent': function(parentGfx, element, attrs = {}) {\n      var { renderIcon = true } = attrs;\n\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element),\n          cancelActivity = semantic.get('cancelActivity');\n\n      attrs = {\n        strokeWidth: 1.5,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        fillOpacity: FULL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      };\n\n      if (!cancelActivity) {\n        attrs.strokeDasharray = '6';\n      }\n\n      var event = renderEvent(parentGfx, element, attrs);\n\n      drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, {\n        ...attrs,\n        fill: 'none'\n      });\n\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n\n      return event;\n    },\n    'bpmn:BusinessRuleTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var headerData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_MAIN', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessPath = drawPath(parentGfx, headerData);\n\n      svgAttr(businessPath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      var headerPathData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_HEADER', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessHeaderPath = drawPath(parentGfx, headerPathData);\n\n      svgAttr(businessHeaderPath, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:CallActivity': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderSubProcess(parentGfx, element, {\n        strokeWidth: 5,\n        ...attrs\n      });\n    },\n    'bpmn:ComplexGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var gateway = renderGateway(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_COMPLEX', {\n        xScaleFactor: 0.5,\n        yScaleFactor:0.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.26\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return gateway;\n    },\n    'bpmn:DataInput': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      var dataObject = renderDataObject(parentGfx, element, attrs);\n\n      drawPath(parentGfx, arrowPathData, {\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return dataObject;\n    },\n    'bpmn:DataInputAssociation': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderAssociation(parentGfx, element, {\n        ...attrs,\n        markerEnd: marker(parentGfx, 'association-end', getFillColor(element, defaultFillColor, attrs.fill), getStrokeColor(element, defaultStrokeColor, attrs.stroke))\n      });\n    },\n    'bpmn:DataObject': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderDataObject(parentGfx, element, attrs);\n    },\n    'bpmn:DataObjectReference': as('bpmn:DataObject'),\n    'bpmn:DataOutput': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      var dataObject = renderDataObject(parentGfx, element, attrs);\n\n      drawPath(parentGfx, arrowPathData, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n\n      return dataObject;\n    },\n    'bpmn:DataOutputAssociation': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderAssociation(parentGfx, element, {\n        ...attrs,\n        markerEnd: marker(parentGfx, 'association-end', getFillColor(element, defaultFillColor, attrs.fill), getStrokeColor(element, defaultStrokeColor, attrs.stroke))\n      });\n    },\n    'bpmn:DataStoreReference': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var dataStorePath = pathMap.getScaledPath('DATA_STORE', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0,\n          my: 0.133\n        }\n      });\n\n      return drawPath(parentGfx, dataStorePath, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        fillOpacity: DEFAULT_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 2\n      });\n    },\n    'bpmn:EndEvent': function(parentGfx, element, attrs = {}) {\n      var { renderIcon = true } = attrs;\n\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var event = renderEvent(parentGfx, element, {\n        ...attrs,\n        strokeWidth: 4\n      });\n\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n\n      return event;\n    },\n    'bpmn:EventBasedGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element);\n\n      var diamond = renderGateway(parentGfx, element, attrs);\n\n      drawCircle(parentGfx, element.width, element.height, element.height * 0.20, {\n        fill: getFillColor(element, 'none', attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      var type = semantic.get('eventGatewayType'),\n          instantiate = !!semantic.get('instantiate');\n\n      function drawEvent() {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_EVENT_BASED', {\n          xScaleFactor: 0.18,\n          yScaleFactor: 0.18,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.36,\n            my: 0.44\n          }\n        });\n\n        drawPath(parentGfx, pathData, {\n          fill: 'none',\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 2\n        });\n      }\n\n      if (type === 'Parallel') {\n        var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n          xScaleFactor: 0.4,\n          yScaleFactor: 0.4,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.474,\n            my: 0.296\n          }\n        });\n\n        drawPath(parentGfx, pathData, {\n          fill: 'none',\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 1\n        });\n      } else if (type === 'Exclusive') {\n        if (!instantiate) {\n          drawCircle(parentGfx, element.width, element.height, element.height * 0.26, {\n            fill: 'none',\n            stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n            strokeWidth: 1\n          });\n        }\n\n        drawEvent();\n      }\n\n\n      return diamond;\n    },\n    'bpmn:ExclusiveGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var gateway = renderGateway(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_EXCLUSIVE', {\n        xScaleFactor: 0.4,\n        yScaleFactor: 0.4,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.32,\n          my: 0.3\n        }\n      });\n\n      var di = getDi(element);\n\n      if (di.get('isMarkerVisible')) {\n        drawPath(parentGfx, pathData, {\n          fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 1\n        });\n      }\n\n      return gateway;\n    },\n    'bpmn:Gateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderGateway(parentGfx, element, attrs);\n    },\n    'bpmn:Group': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke',\n        'width',\n        'height'\n      ]);\n\n      return drawRect(parentGfx, element.width, element.height, TASK_BORDER_RADIUS, {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1.5,\n        strokeDasharray: '10, 6, 0, 6',\n        fill: 'none',\n        pointerEvents: 'none',\n        width: getWidth(element, attrs),\n        height: getHeight(element, attrs)\n      });\n    },\n    'bpmn:InclusiveGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var gateway = renderGateway(parentGfx, element, attrs);\n\n      drawCircle(parentGfx, element.width, element.height, element.height * 0.24, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 2.5\n      });\n\n      return gateway;\n    },\n    'bpmn:IntermediateEvent': function(parentGfx, element, attrs = {}) {\n      var { renderIcon = true } = attrs;\n\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var outer = renderEvent(parentGfx, element, {\n        ...attrs,\n        strokeWidth: 1.5\n      });\n\n      drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, {\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1.5\n      });\n\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n\n      return outer;\n    },\n    'bpmn:IntermediateCatchEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:IntermediateThrowEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:Lane': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke',\n        'width',\n        'height'\n      ]);\n\n      return renderLane(parentGfx, element, {\n        ...attrs,\n        fillOpacity: LOW_OPACITY\n      });\n    },\n    'bpmn:ManualTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_MANUAL', {\n        abspos: {\n          x: 17,\n          y: 15\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n\n      return task;\n    },\n    'bpmn:MessageFlow': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element),\n          di = getDi(element);\n\n      var fill = getFillColor(element, defaultFillColor, attrs.fill),\n          stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n      var path = drawConnectionSegments(parentGfx, element.waypoints, {\n        markerEnd: marker(parentGfx, 'messageflow-end', fill, stroke),\n        markerStart: marker(parentGfx, 'messageflow-start', fill, stroke),\n        stroke,\n        strokeDasharray: '10, 11',\n        strokeWidth: 1.5\n      });\n\n      if (semantic.get('messageRef')) {\n        var midPoint = path.getPointAtLength(path.getTotalLength() / 2);\n\n        var markerPathData = pathMap.getScaledPath('MESSAGE_FLOW_MARKER', {\n          abspos: {\n            x: midPoint.x,\n            y: midPoint.y\n          }\n        });\n\n        var messageAttrs = {\n          strokeWidth: 1\n        };\n\n        if (di.get('messageVisibleKind') === 'initiating') {\n          messageAttrs.fill = fill;\n          messageAttrs.stroke = stroke;\n        } else {\n          messageAttrs.fill = stroke;\n          messageAttrs.stroke = fill;\n        }\n\n        var message = drawPath(parentGfx, markerPathData, messageAttrs);\n\n        var messageRef = semantic.get('messageRef'),\n            name = messageRef.get('name');\n\n        var label = renderLabel(parentGfx, name, {\n          align: 'center-top',\n          fitBox: true,\n          style: {\n            fill: stroke\n          }\n        });\n\n        var messageBounds = message.getBBox(),\n            labelBounds = label.getBBox();\n\n        var translateX = midPoint.x - labelBounds.width / 2,\n            translateY = midPoint.y + messageBounds.height / 2 + ELEMENT_LABEL_DISTANCE;\n\n        transform(label, translateX, translateY, 0);\n      }\n\n      return path;\n    },\n    'bpmn:ParallelGateway': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var diamond = renderGateway(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n        xScaleFactor: 0.6,\n        yScaleFactor: 0.6,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.2\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return diamond;\n    },\n    'bpmn:Participant': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke',\n        'width',\n        'height'\n      ]);\n\n      var participant = renderLane(parentGfx, element, attrs);\n\n      var expandedParticipant = isExpanded(element);\n      var horizontalParticipant = isHorizontal(element);\n\n      var semantic = getSemantic(element),\n          name = semantic.get('name');\n\n      if (expandedParticipant) {\n        var waypoints = horizontalParticipant ? [\n          {\n            x: 30,\n            y: 0\n          },\n          {\n            x: 30,\n            y: getHeight(element, attrs)\n          }\n        ] : [\n          {\n            x: 0,\n            y: 30\n          },\n          {\n            x: getWidth(element, attrs),\n            y: 30\n          }\n        ];\n\n        drawLine(parentGfx, waypoints, {\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: PARTICIPANT_STROKE_WIDTH\n        });\n\n        renderLaneLabel(parentGfx, name, element, attrs);\n      } else {\n        var bounds = getBounds(element, attrs);\n\n        if (!horizontalParticipant) {\n          bounds.height = getWidth(element, attrs);\n          bounds.width = getHeight(element, attrs);\n        }\n\n        var textBox = renderLabel(parentGfx, name, {\n          box: bounds,\n          align: 'center-middle',\n          style: {\n            fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n          }\n        });\n\n        if (!horizontalParticipant) {\n          var top = -1 * getHeight(element, attrs);\n          transform(textBox, 0, -top, 270);\n        }\n      }\n\n      if (semantic.get('participantMultiplicity')) {\n        renderTaskMarker('ParticipantMultiplicityMarker', parentGfx, element, attrs);\n      }\n\n      return participant;\n    },\n    'bpmn:ReceiveTask' : function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var pathData;\n\n      if (semantic.get('instantiate')) {\n        drawCircle(parentGfx, 28, 28, 20 * 0.22, {\n          fill: getFillColor(element, defaultFillColor, attrs.fill),\n          stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n          strokeWidth: 1\n        });\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_INSTANTIATING_SEND', {\n          abspos: {\n            x: 7.77,\n            y: 9.52\n          }\n        });\n      } else {\n        pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n          xScaleFactor: 0.9,\n          yScaleFactor: 0.9,\n          containerWidth: 21,\n          containerHeight: 14,\n          position: {\n            mx: 0.3,\n            my: 0.4\n          }\n        });\n      }\n\n      drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:ScriptTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SCRIPT', {\n        abspos: {\n          x: 15,\n          y: 20\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:SendTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: 21,\n        containerHeight: 14,\n        position: {\n          mx: 0.285,\n          my: 0.357\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getFillColor(element, defaultFillColor, attrs.fill),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:SequenceFlow': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var fill = getFillColor(element, defaultFillColor, attrs.fill),\n          stroke = getStrokeColor(element, defaultStrokeColor, attrs.stroke);\n\n      var connection = drawConnectionSegments(parentGfx, element.waypoints, {\n        markerEnd: marker(parentGfx, 'sequenceflow-end', fill, stroke),\n        stroke\n      });\n\n      var semantic = getSemantic(element);\n\n      var { source } = element;\n\n      if (source) {\n        var sourceSemantic = getSemantic(source);\n\n        // conditional flow marker\n        if (semantic.get('conditionExpression') && is(sourceSemantic, 'bpmn:Activity')) {\n          svgAttr(connection, {\n            markerStart: marker(parentGfx, 'conditional-flow-marker', fill, stroke)\n          });\n        }\n\n        // default marker\n        if (sourceSemantic.get('default') && (is(sourceSemantic, 'bpmn:Gateway') || is(sourceSemantic, 'bpmn:Activity')) &&\n            sourceSemantic.get('default') === semantic) {\n          svgAttr(connection, {\n            markerStart: marker(parentGfx, 'conditional-default-flow-marker', fill, stroke)\n          });\n        }\n      }\n\n      return connection;\n    },\n    'bpmn:ServiceTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      drawCircle(parentGfx, 10, 10, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: 'none',\n        transform: 'translate(6, 6)'\n      });\n\n      var pathDataService1 = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 12,\n          y: 18\n        }\n      });\n\n      drawPath(parentGfx, pathDataService1, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      drawCircle(parentGfx, 10, 10, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: 'none',\n        transform: 'translate(11, 10)'\n      });\n\n      var pathDataService2 = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 17,\n          y: 22\n        }\n      });\n\n      drawPath(parentGfx, pathDataService2, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1\n      });\n\n      return task;\n    },\n    'bpmn:StartEvent': function(parentGfx, element, attrs = {}) {\n      var { renderIcon = true } = attrs;\n\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var semantic = getSemantic(element);\n\n      if (!semantic.get('isInterrupting')) {\n        attrs = {\n          ...attrs,\n          strokeDasharray: '6'\n        };\n      }\n\n      var event = renderEvent(parentGfx, element, attrs);\n\n      if (renderIcon) {\n        renderEventIcon(element, parentGfx, attrs);\n      }\n\n      return event;\n    },\n    'bpmn:SubProcess': function(parentGfx, element, attrs = {}) {\n      if (isExpanded(element)) {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke',\n          'width',\n          'height'\n        ]);\n      } else {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke'\n        ]);\n      }\n\n      return renderSubProcess(parentGfx, element, attrs);\n    },\n    'bpmn:Task': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      return renderTask(parentGfx, element, attrs);\n    },\n    'bpmn:TextAnnotation': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke',\n        'width',\n        'height'\n      ]);\n\n      var {\n        width,\n        height\n      } = getBounds(element, attrs);\n\n      var textElement = drawRect(parentGfx, width, height, 0, 0, {\n        fill: 'none',\n        stroke: 'none'\n      });\n\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: width,\n        containerHeight: height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n\n      drawPath(parentGfx, textPathData, {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke)\n      });\n\n      var semantic = getSemantic(element),\n          text = semantic.get('text') || '';\n\n      renderLabel(parentGfx, text, {\n        align: 'left-top',\n        box: getBounds(element, attrs),\n        padding: 7,\n        style: {\n          fill: getLabelColor(element, defaultLabelColor, defaultStrokeColor, attrs.stroke)\n        }\n      });\n\n      return textElement;\n    },\n    'bpmn:Transaction': function(parentGfx, element, attrs = {}) {\n      if (isExpanded(element)) {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke',\n          'width',\n          'height'\n        ]);\n      } else {\n        attrs = pickAttrs(attrs, [\n          'fill',\n          'stroke'\n        ]);\n      }\n\n      var outer = renderSubProcess(parentGfx, element, {\n        strokeWidth: 1.5,\n        ...attrs\n      });\n\n      var innerAttrs = styles.style([ 'no-fill', 'no-events' ], {\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 1.5\n      });\n\n      var expanded = isExpanded(element);\n\n      if (!expanded) {\n        attrs = {};\n      }\n\n      drawRect(\n        parentGfx,\n        getWidth(element, attrs),\n        getHeight(element, attrs),\n        TASK_BORDER_RADIUS - INNER_OUTER_DIST,\n        INNER_OUTER_DIST,\n        innerAttrs\n      );\n\n      return outer;\n    },\n    'bpmn:UserTask': function(parentGfx, element, attrs = {}) {\n      attrs = pickAttrs(attrs, [\n        'fill',\n        'stroke'\n      ]);\n\n      var task = renderTask(parentGfx, element, attrs);\n\n      var x = 15;\n      var y = 12;\n\n      var pathDataUser1 = pathMap.getScaledPath('TASK_TYPE_USER_1', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      drawPath(parentGfx, pathDataUser1, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n\n      var pathDataUser2 = pathMap.getScaledPath('TASK_TYPE_USER_2', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      drawPath(parentGfx, pathDataUser2, {\n        fill: getFillColor(element, defaultFillColor, attrs.fill),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n\n      var pathDataUser3 = pathMap.getScaledPath('TASK_TYPE_USER_3', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      drawPath(parentGfx, pathDataUser3, {\n        fill: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor, attrs.stroke),\n        strokeWidth: 0.5\n      });\n\n      return task;\n    },\n    'label': function(parentGfx, element, attrs = {}) {\n      return renderExternalLabel(parentGfx, element, attrs);\n    }\n  };\n\n  // extension API, use at your own risk\n  this._drawPath = drawPath;\n\n  this._renderer = renderer;\n}\n\n\ninherits(BpmnRenderer, BaseRenderer);\n\nBpmnRenderer.$inject = [\n  'config.bpmnRenderer',\n  'eventBus',\n  'styles',\n  'pathMap',\n  'canvas',\n  'textRenderer'\n];\n\n\n/**\n * @param {Element} element\n *\n * @return {boolean}\n */\nBpmnRenderer.prototype.canRender = function(element) {\n  return is(element, 'bpmn:BaseElement');\n};\n\n/**\n * Draw shape into parentGfx.\n *\n * @param {SVGElement} parentGfx\n * @param {Shape} shape\n * @param {Attrs} [attrs]\n *\n * @return {SVGElement} mainGfx\n */\nBpmnRenderer.prototype.drawShape = function(parentGfx, shape, attrs = {}) {\n  var { type } = shape;\n\n  var handler = this._renderer(type);\n\n  return handler(parentGfx, shape, attrs);\n};\n\n/**\n * Draw connection into parentGfx.\n *\n * @param {SVGElement} parentGfx\n * @param {Connection} connection\n * @param {Attrs} [attrs]\n *\n * @return {SVGElement} mainGfx\n */\nBpmnRenderer.prototype.drawConnection = function(parentGfx, connection, attrs = {}) {\n  var { type } = connection;\n\n  var handler = this._renderer(type);\n\n  return handler(parentGfx, connection, attrs);\n};\n\n/**\n * Get shape path.\n *\n * @param {Shape} shape\n *\n * @return {string} path\n */\nBpmnRenderer.prototype.getShapePath = function(shape) {\n  if (is(shape, 'bpmn:Event')) {\n    return getCirclePath(shape);\n  }\n\n  if (is(shape, 'bpmn:Activity')) {\n    return getRoundRectPath(shape, TASK_BORDER_RADIUS);\n  }\n\n  if (is(shape, 'bpmn:Gateway')) {\n    return getDiamondPath(shape);\n  }\n\n  return getRectPath(shape);\n};\n\n/**\n * Pick attributes if they exist.\n *\n * @param {Object} attrs\n * @param {string[]} keys\n *\n * @returns {Object}\n */\nfunction pickAttrs(attrs, keys = []) {\n  return keys.reduce((pickedAttrs, key) => {\n    if (attrs[ key ]) {\n      pickedAttrs[ key ] = attrs[ key ];\n    }\n\n    return pickedAttrs;\n  }, {});\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}