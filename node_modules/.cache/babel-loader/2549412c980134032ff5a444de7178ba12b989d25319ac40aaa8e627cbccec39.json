{"ast":null,"code":"import React,{useState,useEffect}from'react';import githubService from'../services/githubService';import dakComplianceService from'../services/dakComplianceService';import stagingGroundService from'../services/stagingGroundService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SaveDialog=_ref=>{var _stagingGround$files,_stagingGround$files2;let{isOpen,onClose,stagingGround,validation,repository,selectedBranch,hasWriteAccess,onSaveSuccess}=_ref;const[commitMessage,setCommitMessage]=useState('');const[overrideValidation,setOverrideValidation]=useState(false);const[isSaving,setIsSaving]=useState(false);const[error,setError]=useState(null);const[showValidationDetails,setShowValidationDetails]=useState(false);// Reset state when dialog opens\nuseEffect(()=>{if(isOpen){setCommitMessage((stagingGround===null||stagingGround===void 0?void 0:stagingGround.message)||'');setOverrideValidation(false);setIsSaving(false);setError(null);setShowValidationDetails(false);}},[isOpen,stagingGround]);if(!isOpen)return null;const validationSummary=validation?dakComplianceService.getValidationSummary(validation):null;const canSave=validationSummary?validationSummary.canSave||overrideValidation:true;const hasErrors=validationSummary?validationSummary.error>0:false;const handleSave=async()=>{if(!commitMessage.trim()){setError('Commit message is required');return;}if(!hasWriteAccess){setError('You need write permissions to save changes');return;}if(hasErrors&&!overrideValidation){setError('Cannot save with validation errors. Enable override option to proceed anyway.');return;}setIsSaving(true);setError(null);try{var _repository$owner;const owner=((_repository$owner=repository.owner)===null||_repository$owner===void 0?void 0:_repository$owner.login)||repository.full_name.split('/')[0];if(repository.isDemo||repository.owner&&repository.owner.login==='demo-user'){// Simulate save in demo mode\nawait new Promise(resolve=>setTimeout(resolve,2000));onSaveSuccess({sha:'demo-commit-sha',message:commitMessage,url:\"https://github.com/\".concat(repository.full_name,\"/commit/demo-commit-sha\")});return;}// Create commit with multiple files\nconst result=await githubService.createCommit(owner,repository.name,selectedBranch,commitMessage.trim(),stagingGround.files);onSaveSuccess({sha:result.sha,message:commitMessage,url:result.html_url});}catch(err){console.error('Error saving changes:',err);setError(getErrorMessage(err));}finally{setIsSaving(false);}};const getErrorMessage=error=>{if(error.status===409){return'Conflict detected. The branch has been updated since you started. Please refresh and try again.';}else if(error.status===403){return'Permission denied. Check that your token has write access to this repository.';}else if(error.status===404){return'Repository or branch not found. Please verify the repository exists and you have access.';}else if(error.message){return error.message;}else{return'An unexpected error occurred while saving. Please try again.';}};const formatValidationIcon=level=>{switch(level){case'error':return'üî¥';case'warning':return'üü°';case'info':return'üü¢';default:return'‚ùì';}};// Handle removing individual file\nconst handleRemoveFile=filePath=>{if(window.confirm(\"Are you sure you want to remove \\\"\".concat(filePath,\"\\\" from staging? This cannot be undone.\"))){stagingGroundService.removeFile(filePath);}};return/*#__PURE__*/_jsx(\"div\",{className:\"save-dialog-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"save-dialog\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCBE Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dialog-close\",onClick:onClose,disabled:isSaving,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"save-summary\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Files to be committed (\",(stagingGround===null||stagingGround===void 0?void 0:(_stagingGround$files=stagingGround.files)===null||_stagingGround$files===void 0?void 0:_stagingGround$files.length)||0,\"):\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"files-list\",children:stagingGround===null||stagingGround===void 0?void 0:(_stagingGround$files2=stagingGround.files)===null||_stagingGround$files2===void 0?void 0:_stagingGround$files2.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"file-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"file-icon\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"file-path\",children:file.path}),/*#__PURE__*/_jsxs(\"span\",{className:\"file-size\",children:[(new Blob([file.content]).size/1024).toFixed(1),\" KB\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"remove-file-btn\",onClick:e=>{e.stopPropagation();handleRemoveFile(file.path);},title:\"Remove \".concat(file.path,\" from staging\"),disabled:isSaving,children:\"\\uD83D\\uDDD1\\uFE0F\"})]},index))})]}),validationSummary&&/*#__PURE__*/_jsxs(\"div\",{className:\"validation-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"validation-summary \".concat(validationSummary.hasIssues?'has-issues':'clean'),onClick:()=>setShowValidationDetails(!showValidationDetails),children:/*#__PURE__*/_jsxs(\"div\",{className:\"validation-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDEA6 Validation Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"validation-badges\",children:[validationSummary.error>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"validation-badge error\",children:[\"\\uD83D\\uDD34 \",validationSummary.error]}),validationSummary.warning>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"validation-badge warning\",children:[\"\\uD83D\\uDFE1 \",validationSummary.warning]}),validationSummary.info>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"validation-badge info\",children:[\"\\uD83D\\uDFE2 \",validationSummary.info]}),!validationSummary.hasIssues&&/*#__PURE__*/_jsx(\"span\",{className:\"validation-badge success\",children:\"\\u2705 All clear\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"expand-icon \".concat(showValidationDetails?'expanded':''),children:\"\\u25BC\"})]})}),showValidationDetails&&validation&&/*#__PURE__*/_jsx(\"div\",{className:\"validation-details\",children:Object.entries(validation.files).map(_ref2=>{let[filePath,results]=_ref2;return results.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"file-validation\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"\\uD83D\\uDCC4 \",filePath]}),/*#__PURE__*/_jsx(\"div\",{className:\"validation-issues\",children:results.map((result,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"validation-issue \".concat(result.level),children:[/*#__PURE__*/_jsx(\"span\",{className:\"issue-icon\",children:formatValidationIcon(result.level)}),/*#__PURE__*/_jsxs(\"div\",{className:\"issue-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"issue-message\",children:result.message}),result.suggestion&&/*#__PURE__*/_jsxs(\"div\",{className:\"issue-suggestion\",children:[\"\\uD83D\\uDCA1 \",result.suggestion]})]})]},index))})]},filePath);})}),hasErrors&&/*#__PURE__*/_jsxs(\"div\",{className:\"override-section\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"override-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:overrideValidation,onChange:e=>setOverrideValidation(e.target.checked)}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),\"Override validation errors and save anyway\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"override-warning\",children:\"\\u26A0\\uFE0F Saving with validation errors may cause issues with your DAK. Only enable this if you're sure about your changes.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"commit-message-section\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"commit-message\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"\\u270D\\uFE0F Commit Message\"})}),/*#__PURE__*/_jsx(\"textarea\",{id:\"commit-message\",className:\"commit-message-input\",value:commitMessage,onChange:e=>setCommitMessage(e.target.value),placeholder:\"Describe your changes...\",rows:3,disabled:isSaving,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"commit-tips\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Tip:\"}),\" Write a clear, descriptive message about what you changed and why.\"]})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"error-icon\",children:\"\\u274C\"}),error]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"repo-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Repository:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:repository===null||repository===void 0?void 0:repository.full_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Branch:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:selectedBranch})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Access:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value \".concat(hasWriteAccess?'write':'read'),children:hasWriteAccess?'‚úèÔ∏è Write':'üëÅÔ∏è Read-only'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn secondary\",onClick:onClose,disabled:isSaving,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn primary\",onClick:handleSave,disabled:!canSave||!commitMessage.trim()||isSaving||!hasWriteAccess,children:isSaving?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"saving-spinner\",children:\"\\u23F3\"}),\"Saving...\"]}):/*#__PURE__*/_jsx(_Fragment,{children:\"\\uD83D\\uDCBE Save Changes\"})})]})]})});};export default SaveDialog;","map":{"version":3,"names":["React","useState","useEffect","githubService","dakComplianceService","stagingGroundService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SaveDialog","_ref","_stagingGround$files","_stagingGround$files2","isOpen","onClose","stagingGround","validation","repository","selectedBranch","hasWriteAccess","onSaveSuccess","commitMessage","setCommitMessage","overrideValidation","setOverrideValidation","isSaving","setIsSaving","error","setError","showValidationDetails","setShowValidationDetails","message","validationSummary","getValidationSummary","canSave","hasErrors","handleSave","trim","_repository$owner","owner","login","full_name","split","isDemo","Promise","resolve","setTimeout","sha","url","concat","result","createCommit","name","files","html_url","err","console","getErrorMessage","status","formatValidationIcon","level","handleRemoveFile","filePath","window","confirm","removeFile","className","children","onClick","disabled","length","map","file","index","path","Blob","content","size","toFixed","e","stopPropagation","title","hasIssues","warning","info","Object","entries","_ref2","results","suggestion","type","checked","onChange","target","htmlFor","id","value","placeholder","rows","required"],"sources":["/home/runner/work/sgex/sgex/src/components/SaveDialog.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport githubService from '../services/githubService';\nimport dakComplianceService from '../services/dakComplianceService';\nimport stagingGroundService from '../services/stagingGroundService';\n\nconst SaveDialog = ({ \n  isOpen, \n  onClose, \n  stagingGround, \n  validation, \n  repository, \n  selectedBranch,\n  hasWriteAccess,\n  onSaveSuccess \n}) => {\n  const [commitMessage, setCommitMessage] = useState('');\n  const [overrideValidation, setOverrideValidation] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [showValidationDetails, setShowValidationDetails] = useState(false);\n\n  // Reset state when dialog opens\n  useEffect(() => {\n    if (isOpen) {\n      setCommitMessage(stagingGround?.message || '');\n      setOverrideValidation(false);\n      setIsSaving(false);\n      setError(null);\n      setShowValidationDetails(false);\n    }\n  }, [isOpen, stagingGround]);\n\n  if (!isOpen) return null;\n\n  const validationSummary = validation ? dakComplianceService.getValidationSummary(validation) : null;\n  const canSave = validationSummary ? (validationSummary.canSave || overrideValidation) : true;\n  const hasErrors = validationSummary ? validationSummary.error > 0 : false;\n\n  const handleSave = async () => {\n    if (!commitMessage.trim()) {\n      setError('Commit message is required');\n      return;\n    }\n\n    if (!hasWriteAccess) {\n      setError('You need write permissions to save changes');\n      return;\n    }\n\n    if (hasErrors && !overrideValidation) {\n      setError('Cannot save with validation errors. Enable override option to proceed anyway.');\n      return;\n    }\n\n    setIsSaving(true);\n    setError(null);\n\n    try {\n      const owner = repository.owner?.login || repository.full_name.split('/')[0];\n      \n      if (repository.isDemo || (repository.owner && repository.owner.login === 'demo-user')) {\n        // Simulate save in demo mode\n        await new Promise(resolve => setTimeout(resolve, 2000));\n        onSaveSuccess({\n          sha: 'demo-commit-sha',\n          message: commitMessage,\n          url: `https://github.com/${repository.full_name}/commit/demo-commit-sha`\n        });\n        return;\n      }\n\n      // Create commit with multiple files\n      const result = await githubService.createCommit(\n        owner,\n        repository.name,\n        selectedBranch,\n        commitMessage.trim(),\n        stagingGround.files\n      );\n\n      onSaveSuccess({\n        sha: result.sha,\n        message: commitMessage,\n        url: result.html_url\n      });\n\n    } catch (err) {\n      console.error('Error saving changes:', err);\n      setError(getErrorMessage(err));\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const getErrorMessage = (error) => {\n    if (error.status === 409) {\n      return 'Conflict detected. The branch has been updated since you started. Please refresh and try again.';\n    } else if (error.status === 403) {\n      return 'Permission denied. Check that your token has write access to this repository.';\n    } else if (error.status === 404) {\n      return 'Repository or branch not found. Please verify the repository exists and you have access.';\n    } else if (error.message) {\n      return error.message;\n    } else {\n      return 'An unexpected error occurred while saving. Please try again.';\n    }\n  };\n\n  const formatValidationIcon = (level) => {\n    switch (level) {\n      case 'error': return 'üî¥';\n      case 'warning': return 'üü°';\n      case 'info': return 'üü¢';\n      default: return '‚ùì';\n    }\n  };\n\n  // Handle removing individual file\n  const handleRemoveFile = (filePath) => {\n    if (window.confirm(`Are you sure you want to remove \"${filePath}\" from staging? This cannot be undone.`)) {\n      stagingGroundService.removeFile(filePath);\n    }\n  };\n\n  return (\n    <div className=\"save-dialog-overlay\">\n      <div className=\"save-dialog\">\n        <div className=\"dialog-header\">\n          <h3>üíæ Save Changes</h3>\n          <button \n            className=\"dialog-close\"\n            onClick={onClose}\n            disabled={isSaving}\n          >\n            √ó\n          </button>\n        </div>\n\n        <div className=\"dialog-content\">\n          {/* Files Summary */}\n          <div className=\"save-summary\">\n            <h4>Files to be committed ({stagingGround?.files?.length || 0}):</h4>\n            <div className=\"files-list\">\n              {stagingGround?.files?.map((file, index) => (\n                <div key={index} className=\"file-item\">\n                  <span className=\"file-icon\">üìÑ</span>\n                  <span className=\"file-path\">{file.path}</span>\n                  <span className=\"file-size\">\n                    {(new Blob([file.content]).size / 1024).toFixed(1)} KB\n                  </span>\n                  <button\n                    className=\"remove-file-btn\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleRemoveFile(file.path);\n                    }}\n                    title={`Remove ${file.path} from staging`}\n                    disabled={isSaving}\n                  >\n                    üóëÔ∏è\n                  </button>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Validation Status */}\n          {validationSummary && (\n            <div className=\"validation-section\">\n              <div \n                className={`validation-summary ${validationSummary.hasIssues ? 'has-issues' : 'clean'}`}\n                onClick={() => setShowValidationDetails(!showValidationDetails)}\n              >\n                <div className=\"validation-header\">\n                  <h4>üö¶ Validation Status</h4>\n                  <div className=\"validation-badges\">\n                    {validationSummary.error > 0 && (\n                      <span className=\"validation-badge error\">\n                        üî¥ {validationSummary.error}\n                      </span>\n                    )}\n                    {validationSummary.warning > 0 && (\n                      <span className=\"validation-badge warning\">\n                        üü° {validationSummary.warning}\n                      </span>\n                    )}\n                    {validationSummary.info > 0 && (\n                      <span className=\"validation-badge info\">\n                        üü¢ {validationSummary.info}\n                      </span>\n                    )}\n                    {!validationSummary.hasIssues && (\n                      <span className=\"validation-badge success\">\n                        ‚úÖ All clear\n                      </span>\n                    )}\n                  </div>\n                  <span className={`expand-icon ${showValidationDetails ? 'expanded' : ''}`}>\n                    ‚ñº\n                  </span>\n                </div>\n              </div>\n\n              {showValidationDetails && validation && (\n                <div className=\"validation-details\">\n                  {Object.entries(validation.files).map(([filePath, results]) => (\n                    results.length > 0 && (\n                      <div key={filePath} className=\"file-validation\">\n                        <h5>üìÑ {filePath}</h5>\n                        <div className=\"validation-issues\">\n                          {results.map((result, index) => (\n                            <div key={index} className={`validation-issue ${result.level}`}>\n                              <span className=\"issue-icon\">{formatValidationIcon(result.level)}</span>\n                              <div className=\"issue-content\">\n                                <div className=\"issue-message\">{result.message}</div>\n                                {result.suggestion && (\n                                  <div className=\"issue-suggestion\">üí° {result.suggestion}</div>\n                                )}\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )\n                  ))}\n                </div>\n              )}\n\n              {/* Override option for errors */}\n              {hasErrors && (\n                <div className=\"override-section\">\n                  <label className=\"override-checkbox\">\n                    <input\n                      type=\"checkbox\"\n                      checked={overrideValidation}\n                      onChange={(e) => setOverrideValidation(e.target.checked)}\n                    />\n                    <span className=\"checkmark\"></span>\n                    Override validation errors and save anyway\n                  </label>\n                  <p className=\"override-warning\">\n                    ‚ö†Ô∏è Saving with validation errors may cause issues with your DAK.\n                    Only enable this if you're sure about your changes.\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Commit Message */}\n          <div className=\"commit-message-section\">\n            <label htmlFor=\"commit-message\">\n              <h4>‚úçÔ∏è Commit Message</h4>\n            </label>\n            <textarea\n              id=\"commit-message\"\n              className=\"commit-message-input\"\n              value={commitMessage}\n              onChange={(e) => setCommitMessage(e.target.value)}\n              placeholder=\"Describe your changes...\"\n              rows={3}\n              disabled={isSaving}\n              required\n            />\n            <div className=\"commit-tips\">\n              <p>üí° <strong>Tip:</strong> Write a clear, descriptive message about what you changed and why.</p>\n            </div>\n          </div>\n\n          {/* Error Display */}\n          {error && (\n            <div className=\"error-section\">\n              <div className=\"error-message\">\n                <span className=\"error-icon\">‚ùå</span>\n                {error}\n              </div>\n            </div>\n          )}\n\n          {/* Repository Info */}\n          <div className=\"repo-info\">\n            <div className=\"info-item\">\n              <span className=\"info-label\">Repository:</span>\n              <span className=\"info-value\">{repository?.full_name}</span>\n            </div>\n            <div className=\"info-item\">\n              <span className=\"info-label\">Branch:</span>\n              <span className=\"info-value\">{selectedBranch}</span>\n            </div>\n            <div className=\"info-item\">\n              <span className=\"info-label\">Access:</span>\n              <span className={`info-value ${hasWriteAccess ? 'write' : 'read'}`}>\n                {hasWriteAccess ? '‚úèÔ∏è Write' : 'üëÅÔ∏è Read-only'}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"dialog-actions\">\n          <button\n            className=\"action-btn secondary\"\n            onClick={onClose}\n            disabled={isSaving}\n          >\n            Cancel\n          </button>\n          <button\n            className=\"action-btn primary\"\n            onClick={handleSave}\n            disabled={!canSave || !commitMessage.trim() || isSaving || !hasWriteAccess}\n          >\n            {isSaving ? (\n              <>\n                <span className=\"saving-spinner\">‚è≥</span>\n                Saving...\n              </>\n            ) : (\n              <>üíæ Save Changes</>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SaveDialog;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}