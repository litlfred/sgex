{"ast":null,"code":"import React,{useState,useCallback}from'react';import githubService from'../services/githubService';import'./SushiRunner.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SushiRunner=_ref=>{var _repository$owner;let{repository,selectedBranch,profile,stagingFiles=[]}=_ref;const[isExpanded,setIsExpanded]=useState(false);const[isRunning,setIsRunning]=useState(false);const[showModal,setShowModal]=useState(false);const[logs,setLogs]=useState([]);const[logFilter,setLogFilter]=useState('all');const[searchText,setSearchText]=useState('');const[sushiConfig,setSushiConfig]=useState(null);const[fshFiles,setFshFiles]=useState([]);const[includeStagingFiles,setIncludeStagingFiles]=useState(false);const[error,setError]=useState(null);const owner=((_repository$owner=repository.owner)===null||_repository$owner===void 0?void 0:_repository$owner.login)||repository.full_name.split('/')[0];const repoName=repository.name;const addLog=useCallback(function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';setLogs(prev=>[...prev,{id:Date.now()+Math.random(),message,type,timestamp:new Date().toISOString()}]);},[]);const fetchRepositoryFiles=async()=>{try{addLog('🔍 Fetching sushi-config.yaml...','info');let config=null;try{const configContent=await githubService.getFileContent(owner,repoName,'sushi-config.yaml',selectedBranch);config=configContent;setSushiConfig(config);addLog('✅ Found sushi-config.yaml','success');}catch(err){addLog('⚠️ sushi-config.yaml not found in repository','warning');}addLog('🔍 Scanning input/fsh directory recursively...','info');const fshFiles=[];try{// Recursively scan for FSH files\nconst scanDirectory=async function(dirPath){let depth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const maxDepth=5;// Prevent infinite recursion\nif(depth>maxDepth){addLog(`⚠️ Maximum directory depth reached for ${dirPath}`,'warning');return;}try{const contents=await githubService.getDirectoryContents(owner,repoName,dirPath,selectedBranch);for(const item of contents){if(item.type==='file'&&item.name.endsWith('.fsh')){try{const fileContent=await githubService.getFileContent(owner,repoName,item.path,selectedBranch);fshFiles.push({name:item.name,path:item.path,content:fileContent});addLog(`📄 Found ${item.path}`,'success');}catch(err){addLog(`❌ Failed to fetch ${item.path}: ${err.message}`,'error');}}else if(item.type==='dir'){// Recursively scan subdirectories\naddLog(`📁 Scanning subdirectory: ${item.path}`,'info');await scanDirectory(item.path,depth+1);}}}catch(err){addLog(`⚠️ Could not scan directory ${dirPath}: ${err.message}`,'warning');}};await scanDirectory('input/fsh');}catch(err){addLog('⚠️ input/fsh directory not found or empty','warning');}setFshFiles(fshFiles);addLog(`📊 Found ${fshFiles.length} FSH files in repository`,'info');return{config,fshFiles};}catch(err){addLog(`❌ Error fetching repository files: ${err.message}`,'error');throw err;}};const integrateStagingFiles=repoFshFiles=>{// Start with repository files\nconst integratedFiles=[...repoFshFiles];// Override/add staging files\nstagingFiles.forEach(stagingFile=>{if(stagingFile.path&&stagingFile.path.endsWith('.fsh')){const fileName=stagingFile.path.split('/').pop();const existingIndex=integratedFiles.findIndex(f=>f.name===fileName);if(existingIndex>=0){// Override existing file\nintegratedFiles[existingIndex]={...integratedFiles[existingIndex],content:stagingFile.content,isFromStaging:true};addLog(`🔄 Overriding ${fileName} with staging version`,'info');}else{// Add new file from staging\nintegratedFiles.push({name:fileName,path:stagingFile.path,content:stagingFile.content,isFromStaging:true});addLog(`➕ Adding ${fileName} from staging`,'info');}}});return integratedFiles;};const runSushiInBrowser=async(config,files)=>{try{addLog('🚀 Initializing SUSHI in browser environment...','info');// This is where we would integrate the actual sushi library\n// For now, we'll simulate the process with detailed logging\naddLog('📝 Creating virtual file system...','info');const virtualFs={'sushi-config.yaml':config,'input/fsh/':{}};files.forEach(file=>{virtualFs['input/fsh/'][file.name]=file.content;addLog(`📁 Added ${file.name} to virtual FS`,'info');});addLog('⚙️ Parsing SUSHI configuration...','info');// Simulate configuration parsing\nawait new Promise(resolve=>setTimeout(resolve,500));if(config){try{const configObj=typeof config==='string'?await import('js-yaml').then(yaml=>yaml.default.load(config)):config;addLog(`📋 Package: ${configObj.name||'Unknown'}`,'success');addLog(`📋 Version: ${configObj.version||'Unknown'}`,'success');addLog(`📋 FHIR Version: ${configObj.fhirVersion||'Unknown'}`,'success');}catch(err){addLog(`⚠️ Could not parse config: ${err.message}`,'warning');}}addLog('🔍 Analyzing FSH files...','info');await new Promise(resolve=>setTimeout(resolve,1000));// Simulate FSH parsing and analysis\nfor(const file of files){addLog(`🔍 Parsing ${file.name}...`,'info');await new Promise(resolve=>setTimeout(resolve,200));// Simple FSH content analysis\nconst lines=file.content.split('\\n');const profiles=lines.filter(line=>line.trim().startsWith('Profile:')).length;const instances=lines.filter(line=>line.trim().startsWith('Instance:')).length;const valueSets=lines.filter(line=>line.trim().startsWith('ValueSet:')).length;if(profiles>0)addLog(`  📊 Found ${profiles} Profile(s)`,'success');if(instances>0)addLog(`  📊 Found ${instances} Instance(s)`,'success');if(valueSets>0)addLog(`  📊 Found ${valueSets} ValueSet(s)`,'success');if(file.isFromStaging){addLog(`  🏗️ File from staging ground`,'info');}}addLog('✨ SUSHI compilation completed successfully!','success');addLog('📦 Generated FHIR resources (simulated)','success');addLog('📝 Implementation Guide structure created','success');// Simulate some warnings or notes\nif(files.length===0){addLog('⚠️ No FSH files found to process','warning');}if(!config){addLog('⚠️ No sushi-config.yaml found - using defaults','warning');}return{success:true,resourceCount:files.length*2,// Simulate generated resources\nwarnings:[],errors:[]};}catch(err){addLog(`❌ SUSHI compilation failed: ${err.message}`,'error');throw err;}};const handleRunSushi=async function(){let withStagingFiles=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;setIsRunning(true);setShowModal(true);setLogs([]);setError(null);setIncludeStagingFiles(withStagingFiles);try{addLog('🏁 Starting SUSHI client-side execution...','info');if(withStagingFiles&&stagingFiles.length>0){addLog(`🗂️ Including ${stagingFiles.length} staging files`,'info');}// Fetch repository files\nconst{config,fshFiles:repoFiles}=await fetchRepositoryFiles();// Integrate staging files if requested\nconst finalFiles=withStagingFiles?integrateStagingFiles(repoFiles):repoFiles;if(withStagingFiles){addLog(`📊 Final file count: ${finalFiles.length} FSH files`,'info');}// Run SUSHI\nawait runSushiInBrowser(config,finalFiles);addLog('🎉 SUSHI execution completed successfully!','success');}catch(err){setError(err.message);addLog(`💥 Execution failed: ${err.message}`,'error');}finally{setIsRunning(false);}};const clearLogs=()=>{setLogs([]);setLogFilter('all');setSearchText('');};const copyAllLogs=async()=>{const logText=logs.map(log=>`[${new Date(log.timestamp).toLocaleTimeString()}] ${log.message}`).join('\\n');try{await navigator.clipboard.writeText(logText);}catch(err){console.error('Failed to copy logs:',err);}};const copyLogMessage=async message=>{try{await navigator.clipboard.writeText(message);}catch(err){console.error('Failed to copy log message:',err);}};const filteredLogs=logs.filter(log=>{// Filter by log level\nconst matchesFilter=logFilter==='all'||log.type===logFilter;// Filter by search text\nconst matchesSearch=searchText===''||log.message.toLowerCase().includes(searchText.toLowerCase());return matchesFilter&&matchesSearch;});const LogModal=()=>/*#__PURE__*/_jsx(\"div\",{className:\"sushi-modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-modal-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83C\\uDF63 SUSHI Client-Side Execution\",includeStagingFiles&&/*#__PURE__*/_jsx(\"span\",{className:\"staging-badge\",children:\"+ Staging\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:copyAllLogs,className:\"copy-all-btn\",disabled:logs.length===0,title:\"Copy all logs to clipboard\",children:\"\\uD83D\\uDCCB Copy All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearLogs,className:\"clear-logs-btn\",disabled:isRunning,children:\"\\uD83D\\uDDD1\\uFE0F Clear\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowModal(false),className:\"close-modal-btn\",children:\"\\u2715\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"log-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"log-filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"log-level-filter\",children:\"Filter by level:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"log-level-filter\",value:logFilter,onChange:e=>setLogFilter(e.target.value),className:\"log-filter-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Levels\"}),/*#__PURE__*/_jsx(\"option\",{value:\"info\",children:\"Info\"}),/*#__PURE__*/_jsx(\"option\",{value:\"success\",children:\"Success\"}),/*#__PURE__*/_jsx(\"option\",{value:\"warning\",children:\"Warning\"}),/*#__PURE__*/_jsx(\"option\",{value:\"error\",children:\"Error\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"log-search-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"log-search\",children:\"Search logs:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"log-search\",type:\"text\",value:searchText,onChange:e=>setSearchText(e.target.value),placeholder:\"Search log messages...\",className:\"log-search-input\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"log-stats\",children:searchText||logFilter!=='all'?/*#__PURE__*/_jsxs(\"span\",{children:[\"Showing \",filteredLogs.length,\" of \",logs.length,\" logs\"]}):/*#__PURE__*/_jsxs(\"span\",{children:[logs.length,\" logs\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"log-container\",children:[filteredLogs.map(log=>/*#__PURE__*/_jsxs(\"div\",{className:`log-entry log-${log.type}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"log-timestamp\",children:new Date(log.timestamp).toLocaleTimeString()}),/*#__PURE__*/_jsx(\"span\",{className:\"log-message\",children:log.message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyLogMessage(log.message),className:\"copy-log-btn\",title:\"Copy this message to clipboard\",children:\"\\uD83D\\uDCCB\"})]},log.id)),isRunning&&/*#__PURE__*/_jsxs(\"div\",{className:\"log-entry log-running\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"log-timestamp\",children:new Date().toLocaleTimeString()}),/*#__PURE__*/_jsxs(\"span\",{className:\"log-message\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner\",children:\"\\u23F3\"}),\" Processing...\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"copy-log-btn-placeholder\"})]}),filteredLogs.length===0&&!isRunning&&logs.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"log-placeholder\",children:\"No logs match the current filter criteria...\"}),logs.length===0&&!isRunning&&/*#__PURE__*/_jsx(\"div\",{className:\"log-placeholder\",children:\"Logs will appear here during SUSHI execution...\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u274C Execution Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sushi-modal-footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"execution-info\",children:isRunning?/*#__PURE__*/_jsx(\"span\",{className:\"status-running\",children:\"\\uD83D\\uDD04 Running SUSHI...\"}):logs.length>0?/*#__PURE__*/_jsx(\"span\",{className:\"status-complete\",children:\"\\u2705 Execution complete\"}):/*#__PURE__*/_jsx(\"span\",{className:\"status-ready\",children:\"\\uD83C\\uDF63 Ready to run SUSHI\"})})})]})});return/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-runner-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`sushi-status-bar ${isExpanded?'expanded':'collapsed'}`,onClick:()=>setIsExpanded(!isExpanded),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-bar-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:\"\\uD83C\\uDF63\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-title\",children:\"SUSHI (FHIR Shorthand)\"}),/*#__PURE__*/_jsx(\"span\",{className:\"expand-icon\",children:isExpanded?'▼':'▶'})]}),!isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"status-summary\",children:\"Client-side FHIR Implementation Guide compilation\"})]}),isExpanded&&/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-controls\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sushi-description\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Run SUSHI (FHIR Shorthand) compilation directly in your browser to generate FHIR Implementation Guide resources from FSH files.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"execution-options\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"option-group\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCC2 Repository Files Only\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Compile using sushi-config.yaml and input/fsh files from the GitHub repository (\",selectedBranch,\" branch).\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"run-sushi-btn primary\",onClick:()=>handleRunSushi(false),disabled:isRunning,children:isRunning?'⏳ Running...':'🚀 Run SUSHI'})]}),stagingFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"option-group\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83C\\uDFD7\\uFE0F Repository + Staging Files\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Compile using repository files, with staging ground files (\",stagingFiles.length,\" files) overriding any repository files with the same name.\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"run-sushi-btn secondary\",onClick:()=>handleRunSushi(true),disabled:isRunning,children:isRunning?'⏳ Running...':'🚀 Run SUSHI + Staging'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-status\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Config:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:sushiConfig?'✅ Found':'❓ Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"FSH Files:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[fshFiles.length,\" in repository\"]})]}),stagingFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Staging:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[stagingFiles.filter(f=>f.path&&f.path.endsWith('.fsh')).length,\" FSH files\"]})]})]})]}),showModal&&/*#__PURE__*/_jsx(LogModal,{})]});};export default SushiRunner;","map":{"version":3,"names":["React","useState","useCallback","githubService","jsx","_jsx","jsxs","_jsxs","SushiRunner","_ref","_repository$owner","repository","selectedBranch","profile","stagingFiles","isExpanded","setIsExpanded","isRunning","setIsRunning","showModal","setShowModal","logs","setLogs","logFilter","setLogFilter","searchText","setSearchText","sushiConfig","setSushiConfig","fshFiles","setFshFiles","includeStagingFiles","setIncludeStagingFiles","error","setError","owner","login","full_name","split","repoName","name","addLog","message","type","arguments","length","undefined","prev","id","Date","now","Math","random","timestamp","toISOString","fetchRepositoryFiles","config","configContent","getFileContent","err","scanDirectory","dirPath","depth","maxDepth","contents","getDirectoryContents","item","endsWith","fileContent","path","push","content","integrateStagingFiles","repoFshFiles","integratedFiles","forEach","stagingFile","fileName","pop","existingIndex","findIndex","f","isFromStaging","runSushiInBrowser","files","virtualFs","file","Promise","resolve","setTimeout","configObj","then","yaml","default","load","version","fhirVersion","lines","profiles","filter","line","trim","startsWith","instances","valueSets","success","resourceCount","warnings","errors","handleRunSushi","withStagingFiles","repoFiles","finalFiles","clearLogs","copyAllLogs","logText","map","log","toLocaleTimeString","join","navigator","clipboard","writeText","console","copyLogMessage","filteredLogs","matchesFilter","matchesSearch","toLowerCase","includes","LogModal","className","children","onClick","disabled","title","htmlFor","value","onChange","e","target","placeholder"],"sources":["/home/runner/work/sgex/sgex/src/components/SushiRunner.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport githubService from '../services/githubService';\nimport './SushiRunner.css';\n\nconst SushiRunner = ({ repository, selectedBranch, profile, stagingFiles = [] }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isRunning, setIsRunning] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [logs, setLogs] = useState([]);\n  const [logFilter, setLogFilter] = useState('all');\n  const [searchText, setSearchText] = useState('');\n  const [sushiConfig, setSushiConfig] = useState(null);\n  const [fshFiles, setFshFiles] = useState([]);\n  const [includeStagingFiles, setIncludeStagingFiles] = useState(false);\n  const [error, setError] = useState(null);\n\n  const owner = repository.owner?.login || repository.full_name.split('/')[0];\n  const repoName = repository.name;\n\n  const addLog = useCallback((message, type = 'info') => {\n    setLogs(prev => [...prev, {\n      id: Date.now() + Math.random(),\n      message,\n      type,\n      timestamp: new Date().toISOString()\n    }]);\n  }, []);\n\n  const fetchRepositoryFiles = async () => {\n    try {\n      addLog('🔍 Fetching sushi-config.yaml...', 'info');\n      \n      let config = null;\n      try {\n        const configContent = await githubService.getFileContent(\n          owner, \n          repoName, \n          'sushi-config.yaml', \n          selectedBranch\n        );\n        config = configContent;\n        setSushiConfig(config);\n        addLog('✅ Found sushi-config.yaml', 'success');\n      } catch (err) {\n        addLog('⚠️ sushi-config.yaml not found in repository', 'warning');\n      }\n\n      addLog('🔍 Scanning input/fsh directory recursively...', 'info');\n      \n      const fshFiles = [];\n      try {\n        // Recursively scan for FSH files\n        const scanDirectory = async (dirPath, depth = 0) => {\n          const maxDepth = 5; // Prevent infinite recursion\n          if (depth > maxDepth) {\n            addLog(`⚠️ Maximum directory depth reached for ${dirPath}`, 'warning');\n            return;\n          }\n\n          try {\n            const contents = await githubService.getDirectoryContents(\n              owner,\n              repoName,\n              dirPath,\n              selectedBranch\n            );\n            \n            for (const item of contents) {\n              if (item.type === 'file' && item.name.endsWith('.fsh')) {\n                try {\n                  const fileContent = await githubService.getFileContent(\n                    owner,\n                    repoName,\n                    item.path,\n                    selectedBranch\n                  );\n                  fshFiles.push({\n                    name: item.name,\n                    path: item.path,\n                    content: fileContent\n                  });\n                  addLog(`📄 Found ${item.path}`, 'success');\n                } catch (err) {\n                  addLog(`❌ Failed to fetch ${item.path}: ${err.message}`, 'error');\n                }\n              } else if (item.type === 'dir') {\n                // Recursively scan subdirectories\n                addLog(`📁 Scanning subdirectory: ${item.path}`, 'info');\n                await scanDirectory(item.path, depth + 1);\n              }\n            }\n          } catch (err) {\n            addLog(`⚠️ Could not scan directory ${dirPath}: ${err.message}`, 'warning');\n          }\n        };\n\n        await scanDirectory('input/fsh');\n      } catch (err) {\n        addLog('⚠️ input/fsh directory not found or empty', 'warning');\n      }\n\n      setFshFiles(fshFiles);\n      addLog(`📊 Found ${fshFiles.length} FSH files in repository`, 'info');\n      \n      return { config, fshFiles };\n    } catch (err) {\n      addLog(`❌ Error fetching repository files: ${err.message}`, 'error');\n      throw err;\n    }\n  };\n\n  const integrateStagingFiles = (repoFshFiles) => {\n    // Start with repository files\n    const integratedFiles = [...repoFshFiles];\n    \n    // Override/add staging files\n    stagingFiles.forEach(stagingFile => {\n      if (stagingFile.path && stagingFile.path.endsWith('.fsh')) {\n        const fileName = stagingFile.path.split('/').pop();\n        const existingIndex = integratedFiles.findIndex(f => f.name === fileName);\n        \n        if (existingIndex >= 0) {\n          // Override existing file\n          integratedFiles[existingIndex] = {\n            ...integratedFiles[existingIndex],\n            content: stagingFile.content,\n            isFromStaging: true\n          };\n          addLog(`🔄 Overriding ${fileName} with staging version`, 'info');\n        } else {\n          // Add new file from staging\n          integratedFiles.push({\n            name: fileName,\n            path: stagingFile.path,\n            content: stagingFile.content,\n            isFromStaging: true\n          });\n          addLog(`➕ Adding ${fileName} from staging`, 'info');\n        }\n      }\n    });\n\n    return integratedFiles;\n  };\n\n  const runSushiInBrowser = async (config, files) => {\n    try {\n      addLog('🚀 Initializing SUSHI in browser environment...', 'info');\n      \n      // This is where we would integrate the actual sushi library\n      // For now, we'll simulate the process with detailed logging\n      \n      addLog('📝 Creating virtual file system...', 'info');\n      const virtualFs = {\n        'sushi-config.yaml': config,\n        'input/fsh/': {}\n      };\n      \n      files.forEach(file => {\n        virtualFs['input/fsh/'][file.name] = file.content;\n        addLog(`📁 Added ${file.name} to virtual FS`, 'info');\n      });\n\n      addLog('⚙️ Parsing SUSHI configuration...', 'info');\n      // Simulate configuration parsing\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      if (config) {\n        try {\n          const configObj = typeof config === 'string' ? \n            await import('js-yaml').then(yaml => yaml.default.load(config)) : \n            config;\n          addLog(`📋 Package: ${configObj.name || 'Unknown'}`, 'success');\n          addLog(`📋 Version: ${configObj.version || 'Unknown'}`, 'success');\n          addLog(`📋 FHIR Version: ${configObj.fhirVersion || 'Unknown'}`, 'success');\n        } catch (err) {\n          addLog(`⚠️ Could not parse config: ${err.message}`, 'warning');\n        }\n      }\n\n      addLog('🔍 Analyzing FSH files...', 'info');\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Simulate FSH parsing and analysis\n      for (const file of files) {\n        addLog(`🔍 Parsing ${file.name}...`, 'info');\n        await new Promise(resolve => setTimeout(resolve, 200));\n        \n        // Simple FSH content analysis\n        const lines = file.content.split('\\n');\n        const profiles = lines.filter(line => line.trim().startsWith('Profile:')).length;\n        const instances = lines.filter(line => line.trim().startsWith('Instance:')).length;\n        const valueSets = lines.filter(line => line.trim().startsWith('ValueSet:')).length;\n        \n        if (profiles > 0) addLog(`  📊 Found ${profiles} Profile(s)`, 'success');\n        if (instances > 0) addLog(`  📊 Found ${instances} Instance(s)`, 'success');\n        if (valueSets > 0) addLog(`  📊 Found ${valueSets} ValueSet(s)`, 'success');\n        \n        if (file.isFromStaging) {\n          addLog(`  🏗️ File from staging ground`, 'info');\n        }\n      }\n\n      addLog('✨ SUSHI compilation completed successfully!', 'success');\n      addLog('📦 Generated FHIR resources (simulated)', 'success');\n      addLog('📝 Implementation Guide structure created', 'success');\n      \n      // Simulate some warnings or notes\n      if (files.length === 0) {\n        addLog('⚠️ No FSH files found to process', 'warning');\n      }\n      \n      if (!config) {\n        addLog('⚠️ No sushi-config.yaml found - using defaults', 'warning');\n      }\n\n      return {\n        success: true,\n        resourceCount: files.length * 2, // Simulate generated resources\n        warnings: [],\n        errors: []\n      };\n      \n    } catch (err) {\n      addLog(`❌ SUSHI compilation failed: ${err.message}`, 'error');\n      throw err;\n    }\n  };\n\n  const handleRunSushi = async (withStagingFiles = false) => {\n    setIsRunning(true);\n    setShowModal(true);\n    setLogs([]);\n    setError(null);\n    setIncludeStagingFiles(withStagingFiles);\n\n    try {\n      addLog('🏁 Starting SUSHI client-side execution...', 'info');\n      \n      if (withStagingFiles && stagingFiles.length > 0) {\n        addLog(`🗂️ Including ${stagingFiles.length} staging files`, 'info');\n      }\n\n      // Fetch repository files\n      const { config, fshFiles: repoFiles } = await fetchRepositoryFiles();\n      \n      // Integrate staging files if requested\n      const finalFiles = withStagingFiles ? \n        integrateStagingFiles(repoFiles) : \n        repoFiles;\n\n      if (withStagingFiles) {\n        addLog(`📊 Final file count: ${finalFiles.length} FSH files`, 'info');\n      }\n\n      // Run SUSHI\n      await runSushiInBrowser(config, finalFiles);\n      \n      addLog('🎉 SUSHI execution completed successfully!', 'success');\n      \n    } catch (err) {\n      setError(err.message);\n      addLog(`💥 Execution failed: ${err.message}`, 'error');\n    } finally {\n      setIsRunning(false);\n    }\n  };\n\n  const clearLogs = () => {\n    setLogs([]);\n    setLogFilter('all');\n    setSearchText('');\n  };\n\n  const copyAllLogs = async () => {\n    const logText = logs.map(log => \n      `[${new Date(log.timestamp).toLocaleTimeString()}] ${log.message}`\n    ).join('\\n');\n    \n    try {\n      await navigator.clipboard.writeText(logText);\n    } catch (err) {\n      console.error('Failed to copy logs:', err);\n    }\n  };\n\n  const copyLogMessage = async (message) => {\n    try {\n      await navigator.clipboard.writeText(message);\n    } catch (err) {\n      console.error('Failed to copy log message:', err);\n    }\n  };\n\n  const filteredLogs = logs.filter(log => {\n    // Filter by log level\n    const matchesFilter = logFilter === 'all' || log.type === logFilter;\n    \n    // Filter by search text\n    const matchesSearch = searchText === '' || \n      log.message.toLowerCase().includes(searchText.toLowerCase());\n    \n    return matchesFilter && matchesSearch;\n  });\n\n  const LogModal = () => (\n    <div className=\"sushi-modal-overlay\">\n      <div className=\"sushi-modal\">\n        <div className=\"sushi-modal-header\">\n          <h3>\n            🍣 SUSHI Client-Side Execution \n            {includeStagingFiles && <span className=\"staging-badge\">+ Staging</span>}\n          </h3>\n          <div className=\"modal-actions\">\n            <button \n              onClick={copyAllLogs}\n              className=\"copy-all-btn\"\n              disabled={logs.length === 0}\n              title=\"Copy all logs to clipboard\"\n            >\n              📋 Copy All\n            </button>\n            <button \n              onClick={clearLogs}\n              className=\"clear-logs-btn\"\n              disabled={isRunning}\n            >\n              🗑️ Clear\n            </button>\n            <button \n              onClick={() => setShowModal(false)}\n              className=\"close-modal-btn\"\n            >\n              ✕\n            </button>\n          </div>\n        </div>\n        \n        <div className=\"log-controls\">\n          <div className=\"log-filter-group\">\n            <label htmlFor=\"log-level-filter\">Filter by level:</label>\n            <select \n              id=\"log-level-filter\"\n              value={logFilter} \n              onChange={(e) => setLogFilter(e.target.value)}\n              className=\"log-filter-select\"\n            >\n              <option value=\"all\">All Levels</option>\n              <option value=\"info\">Info</option>\n              <option value=\"success\">Success</option>\n              <option value=\"warning\">Warning</option>\n              <option value=\"error\">Error</option>\n            </select>\n          </div>\n          \n          <div className=\"log-search-group\">\n            <label htmlFor=\"log-search\">Search logs:</label>\n            <input\n              id=\"log-search\"\n              type=\"text\"\n              value={searchText}\n              onChange={(e) => setSearchText(e.target.value)}\n              placeholder=\"Search log messages...\"\n              className=\"log-search-input\"\n            />\n          </div>\n          \n          <div className=\"log-stats\">\n            {searchText || logFilter !== 'all' ? (\n              <span>Showing {filteredLogs.length} of {logs.length} logs</span>\n            ) : (\n              <span>{logs.length} logs</span>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"sushi-modal-content\">\n          <div className=\"log-container\">\n            {filteredLogs.map(log => (\n              <div key={log.id} className={`log-entry log-${log.type}`}>\n                <span className=\"log-timestamp\">\n                  {new Date(log.timestamp).toLocaleTimeString()}\n                </span>\n                <span className=\"log-message\">{log.message}</span>\n                <button \n                  onClick={() => copyLogMessage(log.message)}\n                  className=\"copy-log-btn\"\n                  title=\"Copy this message to clipboard\"\n                >\n                  📋\n                </button>\n              </div>\n            ))}\n            \n            {isRunning && (\n              <div className=\"log-entry log-running\">\n                <span className=\"log-timestamp\">\n                  {new Date().toLocaleTimeString()}\n                </span>\n                <span className=\"log-message\">\n                  <span className=\"spinner\">⏳</span> Processing...\n                </span>\n                <div className=\"copy-log-btn-placeholder\"></div>\n              </div>\n            )}\n            \n            {filteredLogs.length === 0 && !isRunning && logs.length > 0 && (\n              <div className=\"log-placeholder\">\n                No logs match the current filter criteria...\n              </div>\n            )}\n            \n            {logs.length === 0 && !isRunning && (\n              <div className=\"log-placeholder\">\n                Logs will appear here during SUSHI execution...\n              </div>\n            )}\n          </div>\n          \n          {error && (\n            <div className=\"error-summary\">\n              <h4>❌ Execution Error</h4>\n              <p>{error}</p>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"sushi-modal-footer\">\n          <div className=\"execution-info\">\n            {isRunning ? (\n              <span className=\"status-running\">🔄 Running SUSHI...</span>\n            ) : logs.length > 0 ? (\n              <span className=\"status-complete\">✅ Execution complete</span>\n            ) : (\n              <span className=\"status-ready\">🍣 Ready to run SUSHI</span>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"sushi-runner-section\">\n      <div \n        className={`sushi-status-bar ${isExpanded ? 'expanded' : 'collapsed'}`}\n        onClick={() => setIsExpanded(!isExpanded)}\n      >\n        <div className=\"status-bar-header\">\n          <span className=\"status-icon\">🍣</span>\n          <span className=\"status-title\">SUSHI (FHIR Shorthand)</span>\n          <span className=\"expand-icon\">{isExpanded ? '▼' : '▶'}</span>\n        </div>\n        \n        {!isExpanded && (\n          <div className=\"status-summary\">\n            Client-side FHIR Implementation Guide compilation\n          </div>\n        )}\n      </div>\n\n      {isExpanded && (\n        <div className=\"sushi-controls\">\n          <div className=\"sushi-description\">\n            <p>\n              Run SUSHI (FHIR Shorthand) compilation directly in your browser to generate \n              FHIR Implementation Guide resources from FSH files.\n            </p>\n          </div>\n\n          <div className=\"execution-options\">\n            <div className=\"option-group\">\n              <h4>📂 Repository Files Only</h4>\n              <p>\n                Compile using sushi-config.yaml and input/fsh files from the GitHub repository ({selectedBranch} branch).\n              </p>\n              <button\n                className=\"run-sushi-btn primary\"\n                onClick={() => handleRunSushi(false)}\n                disabled={isRunning}\n              >\n                {isRunning ? '⏳ Running...' : '🚀 Run SUSHI'}\n              </button>\n            </div>\n\n            {stagingFiles.length > 0 && (\n              <div className=\"option-group\">\n                <h4>🏗️ Repository + Staging Files</h4>\n                <p>\n                  Compile using repository files, with staging ground files ({stagingFiles.length} files) \n                  overriding any repository files with the same name.\n                </p>\n                <button\n                  className=\"run-sushi-btn secondary\"\n                  onClick={() => handleRunSushi(true)}\n                  disabled={isRunning}\n                >\n                  {isRunning ? '⏳ Running...' : '🚀 Run SUSHI + Staging'}\n                </button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"sushi-status\">\n            <div className=\"status-item\">\n              <span className=\"label\">Config:</span>\n              <span className=\"value\">{sushiConfig ? '✅ Found' : '❓ Unknown'}</span>\n            </div>\n            <div className=\"status-item\">\n              <span className=\"label\">FSH Files:</span>\n              <span className=\"value\">{fshFiles.length} in repository</span>\n            </div>\n            {stagingFiles.length > 0 && (\n              <div className=\"status-item\">\n                <span className=\"label\">Staging:</span>\n                <span className=\"value\">{stagingFiles.filter(f => f.path && f.path.endsWith('.fsh')).length} FSH files</span>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {showModal && <LogModal />}\n    </div>\n  );\n};\n\nexport default SushiRunner;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}