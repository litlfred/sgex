{"ast":null,"code":"import React,{useState}from'react';import{usePage}from'./PageProvider';import ContextualHelpMascot from'../ContextualHelpMascot';import'./ErrorHandler.css';/**\n * Error handler component with automatic bug reporting functionality\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ErrorHandler=_ref=>{let{error,onRetry}=_ref;// Try to get page context, but provide defaults if not available\nlet pageName='unknown';try{const pageContext=usePage();pageName=pageContext.pageName;}catch(e){// usePage hook not available, use default\nconsole.warn('ErrorHandler used outside of PageProvider context');}const[bugReportSent,setBugReportSent]=useState(false);const[userExplanation,setUserExplanation]=useState('');const generateBugReportUrl=()=>{const title=encodeURIComponent('User should not have reached this page');const body=encodeURIComponent(`\n**Error Information:**\n- Page: ${pageName}\n- URL: ${window.location.href}\n- Error: ${error}\n- Timestamp: ${new Date().toISOString()}\n- User Agent: ${navigator.userAgent}\n\n**Context:**\n- Browser: ${navigator.userAgent}\n- Viewport: ${window.innerWidth}x${window.innerHeight}\n- Referrer: ${document.referrer||'Direct access'}\n\n**User Explanation:**\n${userExplanation||'No additional details provided'}\n\n**Steps to Reproduce:**\n1. Navigate to: ${window.location.href}\n2. [Please add any additional steps]\n\n**Expected Behavior:**\nThe page should load without errors.\n\n**Actual Behavior:**\n${error}\n    `);return`https://github.com/litlfred/sgex/issues/new?title=${title}&body=${body}&labels=bug,user-error`;};const handleSendBugReport=()=>{const bugReportUrl=generateBugReportUrl();window.open(bugReportUrl,'_blank');setBugReportSent(true);};const handleRetry=()=>{if(onRetry){onRetry();}else{window.location.reload();}};const handleGoHome=()=>{window.location.href='/sgex/';};return/*#__PURE__*/_jsx(\"div\",{className:\"error-handler\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"error-mascot-container\",children:/*#__PURE__*/_jsx(ContextualHelpMascot,{helpContent:/*#__PURE__*/_jsx(\"div\",{className:\"error-help-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-mascot-large\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/sgex/sgex-mascot_grey_tabby.png\",alt:\"SGEX Helper\",className:\"large-mascot-icon\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mascot-speech-bubble\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"speech-content\",children:\"I'm sorry! Something went wrong.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"speech-tail\"})]})]})}),position:\"center\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"error-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Oops! Something went wrong\"}),/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"error-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"error-btn primary\",onClick:handleRetry,children:\"\\uD83D\\uDD04 Try Again\"}),/*#__PURE__*/_jsx(\"button\",{className:\"error-btn secondary\",onClick:handleGoHome,children:\"\\uD83C\\uDFE0 Go Home\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bug-report-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Help us improve SGEX\"}),/*#__PURE__*/_jsx(\"p\",{children:\"If this error persists, please let us know what happened:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-explanation\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"user-explanation\",children:\"What were you trying to do when this error occurred?\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"user-explanation\",value:userExplanation,onChange:e=>setUserExplanation(e.target.value),placeholder:\"Please describe what you were doing when the error occurred...\",rows:4})]}),!bugReportSent?/*#__PURE__*/_jsx(\"button\",{className:\"bug-report-btn\",onClick:handleSendBugReport,children:\"\\uD83D\\uDCE7 Send Bug Report\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"bug-report-sent\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"success-icon\",children:\"\\u2705\"}),\"Thank you! A bug report has been opened. We'll investigate this issue.\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"error-context\",children:/*#__PURE__*/_jsxs(\"details\",{children:[/*#__PURE__*/_jsx(\"summary\",{children:\"Technical Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"technical-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Page:\"}),\" \",pageName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"URL:\"}),\" \",window.location.href]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Timestamp:\"}),\" \",new Date().toISOString()]})]})]})})]})]})});};export default ErrorHandler;","map":{"version":3,"names":["React","useState","usePage","ContextualHelpMascot","jsx","_jsx","jsxs","_jsxs","ErrorHandler","_ref","error","onRetry","pageName","pageContext","e","console","warn","bugReportSent","setBugReportSent","userExplanation","setUserExplanation","generateBugReportUrl","title","encodeURIComponent","body","window","location","href","Date","toISOString","navigator","userAgent","innerWidth","innerHeight","document","referrer","handleSendBugReport","bugReportUrl","open","handleRetry","reload","handleGoHome","className","children","helpContent","src","alt","position","onClick","htmlFor","id","value","onChange","target","placeholder","rows"],"sources":["/home/runner/work/sgex/sgex/src/components/framework/ErrorHandler.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { usePage } from './PageProvider';\nimport ContextualHelpMascot from '../ContextualHelpMascot';\nimport './ErrorHandler.css';\n\n/**\n * Error handler component with automatic bug reporting functionality\n */\nconst ErrorHandler = ({ error, onRetry }) => {\n  // Try to get page context, but provide defaults if not available\n  let pageName = 'unknown';\n  try {\n    const pageContext = usePage();\n    pageName = pageContext.pageName;\n  } catch (e) {\n    // usePage hook not available, use default\n    console.warn('ErrorHandler used outside of PageProvider context');\n  }\n  const [bugReportSent, setBugReportSent] = useState(false);\n  const [userExplanation, setUserExplanation] = useState('');\n\n  const generateBugReportUrl = () => {\n    const title = encodeURIComponent('User should not have reached this page');\n    const body = encodeURIComponent(`\n**Error Information:**\n- Page: ${pageName}\n- URL: ${window.location.href}\n- Error: ${error}\n- Timestamp: ${new Date().toISOString()}\n- User Agent: ${navigator.userAgent}\n\n**Context:**\n- Browser: ${navigator.userAgent}\n- Viewport: ${window.innerWidth}x${window.innerHeight}\n- Referrer: ${document.referrer || 'Direct access'}\n\n**User Explanation:**\n${userExplanation || 'No additional details provided'}\n\n**Steps to Reproduce:**\n1. Navigate to: ${window.location.href}\n2. [Please add any additional steps]\n\n**Expected Behavior:**\nThe page should load without errors.\n\n**Actual Behavior:**\n${error}\n    `);\n\n    return `https://github.com/litlfred/sgex/issues/new?title=${title}&body=${body}&labels=bug,user-error`;\n  };\n\n  const handleSendBugReport = () => {\n    const bugReportUrl = generateBugReportUrl();\n    window.open(bugReportUrl, '_blank');\n    setBugReportSent(true);\n  };\n\n  const handleRetry = () => {\n    if (onRetry) {\n      onRetry();\n    } else {\n      window.location.reload();\n    }\n  };\n\n  const handleGoHome = () => {\n    window.location.href = '/sgex/';\n  };\n\n  return (\n    <div className=\"error-handler\">\n      <div className=\"error-content\">\n        <div className=\"error-mascot-container\">\n          <ContextualHelpMascot\n            helpContent={\n              <div className=\"error-help-content\">\n                <div className=\"error-mascot-large\">\n                  <img \n                    src=\"/sgex/sgex-mascot_grey_tabby.png\" \n                    alt=\"SGEX Helper\" \n                    className=\"large-mascot-icon\"\n                  />\n                  <div className=\"mascot-speech-bubble\">\n                    <div className=\"speech-content\">\n                      I'm sorry! Something went wrong.\n                    </div>\n                    <div className=\"speech-tail\"></div>\n                  </div>\n                </div>\n              </div>\n            }\n            position=\"center\"\n          />\n        </div>\n        \n        <div className=\"error-details\">\n          <h2>Oops! Something went wrong</h2>\n          <p className=\"error-message\">{error}</p>\n          \n          <div className=\"error-actions\">\n            <button className=\"error-btn primary\" onClick={handleRetry}>\n              üîÑ Try Again\n            </button>\n            <button className=\"error-btn secondary\" onClick={handleGoHome}>\n              üè† Go Home\n            </button>\n          </div>\n          \n          <div className=\"bug-report-section\">\n            <h3>Help us improve SGEX</h3>\n            <p>If this error persists, please let us know what happened:</p>\n            \n            <div className=\"user-explanation\">\n              <label htmlFor=\"user-explanation\">\n                What were you trying to do when this error occurred?\n              </label>\n              <textarea\n                id=\"user-explanation\"\n                value={userExplanation}\n                onChange={(e) => setUserExplanation(e.target.value)}\n                placeholder=\"Please describe what you were doing when the error occurred...\"\n                rows={4}\n              />\n            </div>\n            \n            {!bugReportSent ? (\n              <button className=\"bug-report-btn\" onClick={handleSendBugReport}>\n                üìß Send Bug Report\n              </button>\n            ) : (\n              <div className=\"bug-report-sent\">\n                <span className=\"success-icon\">‚úÖ</span>\n                Thank you! A bug report has been opened. We'll investigate this issue.\n              </div>\n            )}\n          </div>\n          \n          <div className=\"error-context\">\n            <details>\n              <summary>Technical Details</summary>\n              <div className=\"technical-details\">\n                <p><strong>Page:</strong> {pageName}</p>\n                <p><strong>URL:</strong> {window.location.href}</p>\n                <p><strong>Error:</strong> {error}</p>\n                <p><strong>Timestamp:</strong> {new Date().toISOString()}</p>\n              </div>\n            </details>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ErrorHandler;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,OAAO,KAAQ,gBAAgB,CACxC,MAAO,CAAAC,oBAAoB,KAAM,yBAAyB,CAC1D,MAAO,oBAAoB,CAE3B;AACA;AACA,GAFA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGA,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAwB,IAAvB,CAAEC,KAAK,CAAEC,OAAQ,CAAC,CAAAF,IAAA,CACtC;AACA,GAAI,CAAAG,QAAQ,CAAG,SAAS,CACxB,GAAI,CACF,KAAM,CAAAC,WAAW,CAAGX,OAAO,CAAC,CAAC,CAC7BU,QAAQ,CAAGC,WAAW,CAACD,QAAQ,CACjC,CAAE,MAAOE,CAAC,CAAE,CACV;AACAC,OAAO,CAACC,IAAI,CAAC,mDAAmD,CAAC,CACnE,CACA,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACkB,eAAe,CAAEC,kBAAkB,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAE1D,KAAM,CAAAoB,oBAAoB,CAAGA,CAAA,GAAM,CACjC,KAAM,CAAAC,KAAK,CAAGC,kBAAkB,CAAC,wCAAwC,CAAC,CAC1E,KAAM,CAAAC,IAAI,CAAGD,kBAAkB,CAAC;AACpC;AACA,UAAUX,QAAQ;AAClB,SAASa,MAAM,CAACC,QAAQ,CAACC,IAAI;AAC7B,WAAWjB,KAAK;AAChB,eAAe,GAAI,CAAAkB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;AACvC,gBAAgBC,SAAS,CAACC,SAAS;AACnC;AACA;AACA,aAAaD,SAAS,CAACC,SAAS;AAChC,cAAcN,MAAM,CAACO,UAAU,IAAIP,MAAM,CAACQ,WAAW;AACrD,cAAcC,QAAQ,CAACC,QAAQ,EAAI,eAAe;AAClD;AACA;AACA,EAAEhB,eAAe,EAAI,gCAAgC;AACrD;AACA;AACA,kBAAkBM,MAAM,CAACC,QAAQ,CAACC,IAAI;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,EAAEjB,KAAK;AACP,KAAK,CAAC,CAEF,MAAO,qDAAqDY,KAAK,SAASE,IAAI,wBAAwB,CACxG,CAAC,CAED,KAAM,CAAAY,mBAAmB,CAAGA,CAAA,GAAM,CAChC,KAAM,CAAAC,YAAY,CAAGhB,oBAAoB,CAAC,CAAC,CAC3CI,MAAM,CAACa,IAAI,CAACD,YAAY,CAAE,QAAQ,CAAC,CACnCnB,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,CAED,KAAM,CAAAqB,WAAW,CAAGA,CAAA,GAAM,CACxB,GAAI5B,OAAO,CAAE,CACXA,OAAO,CAAC,CAAC,CACX,CAAC,IAAM,CACLc,MAAM,CAACC,QAAQ,CAACc,MAAM,CAAC,CAAC,CAC1B,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBhB,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CAAC,CAED,mBACEtB,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BpC,KAAA,QAAKmC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BtC,IAAA,QAAKqC,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACrCtC,IAAA,CAACF,oBAAoB,EACnByC,WAAW,cACTvC,IAAA,QAAKqC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACjCpC,KAAA,QAAKmC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCtC,IAAA,QACEwC,GAAG,CAAC,kCAAkC,CACtCC,GAAG,CAAC,aAAa,CACjBJ,SAAS,CAAC,mBAAmB,CAC9B,CAAC,cACFnC,KAAA,QAAKmC,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCtC,IAAA,QAAKqC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,kCAEhC,CAAK,CAAC,cACNtC,IAAA,QAAKqC,SAAS,CAAC,aAAa,CAAM,CAAC,EAChC,CAAC,EACH,CAAC,CACH,CACN,CACDK,QAAQ,CAAC,QAAQ,CAClB,CAAC,CACC,CAAC,cAENxC,KAAA,QAAKmC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BtC,IAAA,OAAAsC,QAAA,CAAI,4BAA0B,CAAI,CAAC,cACnCtC,IAAA,MAAGqC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEjC,KAAK,CAAI,CAAC,cAExCH,KAAA,QAAKmC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BtC,IAAA,WAAQqC,SAAS,CAAC,mBAAmB,CAACM,OAAO,CAAET,WAAY,CAAAI,QAAA,CAAC,wBAE5D,CAAQ,CAAC,cACTtC,IAAA,WAAQqC,SAAS,CAAC,qBAAqB,CAACM,OAAO,CAAEP,YAAa,CAAAE,QAAA,CAAC,sBAE/D,CAAQ,CAAC,EACN,CAAC,cAENpC,KAAA,QAAKmC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCtC,IAAA,OAAAsC,QAAA,CAAI,sBAAoB,CAAI,CAAC,cAC7BtC,IAAA,MAAAsC,QAAA,CAAG,2DAAyD,CAAG,CAAC,cAEhEpC,KAAA,QAAKmC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BtC,IAAA,UAAO4C,OAAO,CAAC,kBAAkB,CAAAN,QAAA,CAAC,sDAElC,CAAO,CAAC,cACRtC,IAAA,aACE6C,EAAE,CAAC,kBAAkB,CACrBC,KAAK,CAAEhC,eAAgB,CACvBiC,QAAQ,CAAGtC,CAAC,EAAKM,kBAAkB,CAACN,CAAC,CAACuC,MAAM,CAACF,KAAK,CAAE,CACpDG,WAAW,CAAC,gEAAgE,CAC5EC,IAAI,CAAE,CAAE,CACT,CAAC,EACC,CAAC,CAEL,CAACtC,aAAa,cACbZ,IAAA,WAAQqC,SAAS,CAAC,gBAAgB,CAACM,OAAO,CAAEZ,mBAAoB,CAAAO,QAAA,CAAC,8BAEjE,CAAQ,CAAC,cAETpC,KAAA,QAAKmC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BtC,IAAA,SAAMqC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,QAAC,CAAM,CAAC,yEAEzC,EAAK,CACN,EACE,CAAC,cAENtC,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BpC,KAAA,YAAAoC,QAAA,eACEtC,IAAA,YAAAsC,QAAA,CAAS,mBAAiB,CAAS,CAAC,cACpCpC,KAAA,QAAKmC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCpC,KAAA,MAAAoC,QAAA,eAAGtC,IAAA,WAAAsC,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAAC/B,QAAQ,EAAI,CAAC,cACxCL,KAAA,MAAAoC,QAAA,eAAGtC,IAAA,WAAAsC,QAAA,CAAQ,MAAI,CAAQ,CAAC,IAAC,CAAClB,MAAM,CAACC,QAAQ,CAACC,IAAI,EAAI,CAAC,cACnDpB,KAAA,MAAAoC,QAAA,eAAGtC,IAAA,WAAAsC,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACjC,KAAK,EAAI,CAAC,cACtCH,KAAA,MAAAoC,QAAA,eAAGtC,IAAA,WAAAsC,QAAA,CAAQ,YAAU,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAf,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EAAI,CAAC,EAC1D,CAAC,EACC,CAAC,CACP,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAArB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}