{"ast":null,"code":"import React,{useState,useEffect}from'react';import{usePage,PAGE_TYPES}from'./PageProvider';import BranchSelector from'../BranchSelector';import AccessBadge from'./AccessBadge';import githubService from'../../services/githubService';import userAccessService from'../../services/userAccessService';import bookmarkService from'../../services/bookmarkService';import'./PageHeader.css';/**\n * Consistent header component for all pages\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PageHeader=()=>{var _repository$owner;const{type,pageName,profile,repository,branch,asset,isAuthenticated,navigate}=usePage();const[showUserDropdown,setShowUserDropdown]=useState(false);const[showBookmarkDropdown,setShowBookmarkDropdown]=useState(false);const[authenticatedUser,setAuthenticatedUser]=useState(null);// Always fetch the authenticated user for login button display\nuseEffect(()=>{if(isAuthenticated){const fetchAuthenticatedUser=async()=>{try{// Use userAccessService to get the current user (handles both authenticated and demo users)\nconst user=userAccessService.getCurrentUser();if(user){setAuthenticatedUser(user);}else{// Fallback to githubService for backwards compatibility\nconst githubUser=await githubService.getCurrentUser();setAuthenticatedUser(githubUser);}}catch(error){console.debug('Could not fetch authenticated user:',error);}};fetchAuthenticatedUser();}else{setAuthenticatedUser(null);}},[isAuthenticated]);const handleLogout=()=>{githubService.logout();navigate('/');};const handleHomeNavigation=()=>{navigate('/');};const handleGitHubRepo=()=>{if(repository!==null&&repository!==void 0&&repository.html_url){window.open(repository.html_url,'_blank');}};const handleGitHubUser=()=>{// Always navigate to the authenticated user's GitHub profile, not the DAK owner's\nif(authenticatedUser!==null&&authenticatedUser!==void 0&&authenticatedUser.html_url){window.open(authenticatedUser.html_url,'_blank');}else if(authenticatedUser!==null&&authenticatedUser!==void 0&&authenticatedUser.login){window.open(`https://github.com/${authenticatedUser.login}`,'_blank');}};const handleBookmarkCurrentPage=()=>{const context={user:authenticatedUser===null||authenticatedUser===void 0?void 0:authenticatedUser.login,// Use authenticated user for bookmarks\nrepository,branch,asset};const currentUrl=window.location.pathname;bookmarkService.addBookmark(pageName,currentUrl,context);setShowBookmarkDropdown(false);};const handleRemoveBookmark=bookmarkId=>{bookmarkService.removeBookmark(bookmarkId);// Force re-render by toggling dropdown\nsetShowBookmarkDropdown(false);setTimeout(()=>setShowBookmarkDropdown(true),50);};const handleBookmarkNavigation=bookmark=>{navigate(bookmark.url);setShowBookmarkDropdown(false);};const getCurrentPageBookmark=()=>{return bookmarkService.getBookmarkByUrl(window.location.pathname);};const getBookmarksGrouped=()=>{return bookmarkService.getBookmarksGroupedByPage();};const shouldShowGitHubRepo=type===PAGE_TYPES.DAK||type===PAGE_TYPES.ASSET;const shouldShowBranchSelector=type===PAGE_TYPES.DAK||type===PAGE_TYPES.ASSET;const currentBookmark=getCurrentPageBookmark();const bookmarksGrouped=getBookmarksGrouped();return/*#__PURE__*/_jsxs(\"header\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-header-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sgex-logo\",onClick:handleHomeNavigation,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"SGEX Workbench\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"WHO SMART Guidelines Exchange\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-header-right\",children:[(type===PAGE_TYPES.DAK||type===PAGE_TYPES.ASSET)&&repository&&/*#__PURE__*/_jsx(AccessBadge,{owner:((_repository$owner=repository.owner)===null||_repository$owner===void 0?void 0:_repository$owner.login)||(profile===null||profile===void 0?void 0:profile.login),repo:repository.name,branch:branch,className:\"header-access-badge\"}),shouldShowGitHubRepo&&repository&&/*#__PURE__*/_jsxs(\"button\",{className:\"header-btn github-repo-btn\",onClick:handleGitHubRepo,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"github-icon\",viewBox:\"0 0 16 16\",width:\"16\",height:\"16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"})}),\"Repository\"]}),shouldShowBranchSelector&&repository&&/*#__PURE__*/_jsx(\"div\",{className:\"header-branch-selector\",children:/*#__PURE__*/_jsx(BranchSelector,{repository:repository,selectedBranch:branch,onBranchChange:newBranch=>{// Update URL with new branch\nconst currentPath=window.location.pathname;const pathParts=currentPath.split('/');if(pathParts.length>=5){pathParts[5]=newBranch;// Replace branch part\nnavigate(pathParts.join('/'));}},className:\"header-branch-selector-component\"})}),(isAuthenticated||profile!==null&&profile!==void 0&&profile.isDemo)&&authenticatedUser?/*#__PURE__*/_jsxs(\"div\",{className:\"user-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",onClick:()=>setShowUserDropdown(!showUserDropdown),children:[/*#__PURE__*/_jsx(\"img\",{src:authenticatedUser.avatar_url,alt:\"User avatar\",className:\"user-avatar\"}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:authenticatedUser.name||authenticatedUser.login}),/*#__PURE__*/_jsx(\"span\",{className:\"dropdown-arrow\",children:\"\\u25BC\"})]}),showUserDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-dropdown\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"dropdown-item\",onClick:handleGitHubUser,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"github-icon\",viewBox:\"0 0 16 16\",width:\"16\",height:\"16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"})}),\"GitHub Profile\"]}),currentBookmark?/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item bookmark-action\",onClick:()=>handleRemoveBookmark(currentBookmark.id),children:\"\\u2B50 Remove Bookmark\"}):/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item bookmark-action\",onClick:handleBookmarkCurrentPage,children:\"\\u2606 Add Bookmark\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bookmarks-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item bookmarks-header\",onClick:()=>setShowBookmarkDropdown(!showBookmarkDropdown),children:[\"\\uD83D\\uDCD6 Bookmarks\",/*#__PURE__*/_jsx(\"span\",{className:\"dropdown-arrow\",children:showBookmarkDropdown?'‚ñ≤':'‚ñº'})]}),showBookmarkDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"bookmarks-dropdown\",children:bookmarksGrouped.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"bookmarks-list\",children:bookmarksGrouped.map(group=>/*#__PURE__*/_jsxs(\"div\",{className:\"bookmark-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bookmark-group-header\",children:group.pageName}),group.bookmarks.map(bookmark=>/*#__PURE__*/_jsxs(\"div\",{className:\"bookmark-item\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bookmark-link\",onClick:()=>handleBookmarkNavigation(bookmark),title:bookmark.url,children:bookmark.title}),/*#__PURE__*/_jsx(\"button\",{className:\"bookmark-remove\",onClick:()=>handleRemoveBookmark(bookmark.id),title:\"Remove bookmark\",children:\"\\xD7\"})]},bookmark.id))]},group.pageName))}):/*#__PURE__*/_jsx(\"div\",{className:\"no-bookmarks\",children:\"No bookmarks yet\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"dropdown-item logout-btn\",onClick:handleLogout,children:\"Logout\"})]})]}):/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",onClick:handleHomeNavigation,children:\"Login\"})]})]});};export default PageHeader;","map":{"version":3,"names":["React","useState","useEffect","usePage","PAGE_TYPES","BranchSelector","AccessBadge","githubService","userAccessService","bookmarkService","jsx","_jsx","jsxs","_jsxs","PageHeader","_repository$owner","type","pageName","profile","repository","branch","asset","isAuthenticated","navigate","showUserDropdown","setShowUserDropdown","showBookmarkDropdown","setShowBookmarkDropdown","authenticatedUser","setAuthenticatedUser","fetchAuthenticatedUser","user","getCurrentUser","githubUser","error","console","debug","handleLogout","logout","handleHomeNavigation","handleGitHubRepo","html_url","window","open","handleGitHubUser","login","handleBookmarkCurrentPage","context","currentUrl","location","pathname","addBookmark","handleRemoveBookmark","bookmarkId","removeBookmark","setTimeout","handleBookmarkNavigation","bookmark","url","getCurrentPageBookmark","getBookmarkByUrl","getBookmarksGrouped","getBookmarksGroupedByPage","shouldShowGitHubRepo","DAK","ASSET","shouldShowBranchSelector","currentBookmark","bookmarksGrouped","className","children","onClick","owner","repo","name","viewBox","width","height","d","selectedBranch","onBranchChange","newBranch","currentPath","pathParts","split","length","join","isDemo","src","avatar_url","alt","id","map","group","bookmarks","title"],"sources":["/home/runner/work/sgex/sgex/src/components/framework/PageHeader.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { usePage, PAGE_TYPES } from './PageProvider';\nimport BranchSelector from '../BranchSelector';\nimport AccessBadge from './AccessBadge';\nimport githubService from '../../services/githubService';\nimport userAccessService from '../../services/userAccessService';\nimport bookmarkService from '../../services/bookmarkService';\nimport './PageHeader.css';\n\n/**\n * Consistent header component for all pages\n */\nconst PageHeader = () => {\n  const { \n    type, \n    pageName, \n    profile, \n    repository, \n    branch, \n    asset,\n    isAuthenticated,\n    navigate \n  } = usePage();\n\n  const [showUserDropdown, setShowUserDropdown] = useState(false);\n  const [showBookmarkDropdown, setShowBookmarkDropdown] = useState(false);\n  const [authenticatedUser, setAuthenticatedUser] = useState(null);\n\n  // Always fetch the authenticated user for login button display\n  useEffect(() => {\n    if (isAuthenticated) {\n      const fetchAuthenticatedUser = async () => {\n        try {\n          // Use userAccessService to get the current user (handles both authenticated and demo users)\n          const user = userAccessService.getCurrentUser();\n          if (user) {\n            setAuthenticatedUser(user);\n          } else {\n            // Fallback to githubService for backwards compatibility\n            const githubUser = await githubService.getCurrentUser();\n            setAuthenticatedUser(githubUser);\n          }\n        } catch (error) {\n          console.debug('Could not fetch authenticated user:', error);\n        }\n      };\n      \n      fetchAuthenticatedUser();\n    } else {\n      setAuthenticatedUser(null);\n    }\n  }, [isAuthenticated]);\n\n  const handleLogout = () => {\n    githubService.logout();\n    navigate('/');\n  };\n\n  const handleHomeNavigation = () => {\n    navigate('/');\n  };\n\n  const handleGitHubRepo = () => {\n    if (repository?.html_url) {\n      window.open(repository.html_url, '_blank');\n    }\n  };\n\n  const handleGitHubUser = () => {\n    // Always navigate to the authenticated user's GitHub profile, not the DAK owner's\n    if (authenticatedUser?.html_url) {\n      window.open(authenticatedUser.html_url, '_blank');\n    } else if (authenticatedUser?.login) {\n      window.open(`https://github.com/${authenticatedUser.login}`, '_blank');\n    }\n  };\n\n  const handleBookmarkCurrentPage = () => {\n    const context = {\n      user: authenticatedUser?.login, // Use authenticated user for bookmarks\n      repository,\n      branch,\n      asset\n    };\n    \n    const currentUrl = window.location.pathname;\n    bookmarkService.addBookmark(pageName, currentUrl, context);\n    setShowBookmarkDropdown(false);\n  };\n\n  const handleRemoveBookmark = (bookmarkId) => {\n    bookmarkService.removeBookmark(bookmarkId);\n    // Force re-render by toggling dropdown\n    setShowBookmarkDropdown(false);\n    setTimeout(() => setShowBookmarkDropdown(true), 50);\n  };\n\n  const handleBookmarkNavigation = (bookmark) => {\n    navigate(bookmark.url);\n    setShowBookmarkDropdown(false);\n  };\n\n  const getCurrentPageBookmark = () => {\n    return bookmarkService.getBookmarkByUrl(window.location.pathname);\n  };\n\n  const getBookmarksGrouped = () => {\n    return bookmarkService.getBookmarksGroupedByPage();\n  };\n\n  const shouldShowGitHubRepo = type === PAGE_TYPES.DAK || type === PAGE_TYPES.ASSET;\n  const shouldShowBranchSelector = type === PAGE_TYPES.DAK || type === PAGE_TYPES.ASSET;\n  const currentBookmark = getCurrentPageBookmark();\n  const bookmarksGrouped = getBookmarksGrouped();\n\n  return (\n    <header className=\"page-header\">\n      {/* Left side - Logo and context */}\n      <div className=\"page-header-left\">\n        <div className=\"sgex-logo\" onClick={handleHomeNavigation}>\n          <h1>SGEX Workbench</h1>\n          <p className=\"subtitle\">WHO SMART Guidelines Exchange</p>\n        </div>\n\n      </div>\n\n      {/* Right side - Navigation and user controls */}\n      <div className=\"page-header-right\">\n        {/* Access badge for DAK and Asset pages */}\n        {(type === PAGE_TYPES.DAK || type === PAGE_TYPES.ASSET) && repository && (\n          <AccessBadge \n            owner={repository.owner?.login || profile?.login}\n            repo={repository.name}\n            branch={branch}\n            className=\"header-access-badge\"\n          />\n        )}\n        \n        {/* GitHub repository button (DAK and Asset pages) */}\n        {shouldShowGitHubRepo && repository && (\n          <button className=\"header-btn github-repo-btn\" onClick={handleGitHubRepo}>\n            <svg className=\"github-icon\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n              <path d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"/>\n            </svg>\n            Repository\n          </button>\n        )}\n        \n        {/* Branch selector (DAK and Asset pages) */}\n        {shouldShowBranchSelector && repository && (\n          <div className=\"header-branch-selector\">\n            <BranchSelector\n              repository={repository}\n              selectedBranch={branch}\n              onBranchChange={(newBranch) => {\n                // Update URL with new branch\n                const currentPath = window.location.pathname;\n                const pathParts = currentPath.split('/');\n                if (pathParts.length >= 5) {\n                  pathParts[5] = newBranch; // Replace branch part\n                  navigate(pathParts.join('/'));\n                }\n              }}\n              className=\"header-branch-selector-component\"\n            />\n          </div>\n        )}\n        \n        {/* User info and controls */}\n        {(isAuthenticated || profile?.isDemo) && authenticatedUser ? (\n          <div className=\"user-controls\">\n            <div className=\"user-info\" onClick={() => setShowUserDropdown(!showUserDropdown)}>\n              <img src={authenticatedUser.avatar_url} alt=\"User avatar\" className=\"user-avatar\" />\n              <span className=\"user-name\">{authenticatedUser.name || authenticatedUser.login}</span>\n              <span className=\"dropdown-arrow\">‚ñº</span>\n            </div>\n            {showUserDropdown && (\n              <div className=\"user-dropdown\">\n                <button className=\"dropdown-item\" onClick={handleGitHubUser}>\n                  <svg className=\"github-icon\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n                    <path d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"/>\n                  </svg>\n                  GitHub Profile\n                </button>\n                \n                {/* Add/Remove current page bookmark - moved to same level as bookmarks */}\n                {currentBookmark ? (\n                  <button \n                    className=\"dropdown-item bookmark-action\"\n                    onClick={() => handleRemoveBookmark(currentBookmark.id)}\n                  >\n                    ‚≠ê Remove Bookmark\n                  </button>\n                ) : (\n                  <button \n                    className=\"dropdown-item bookmark-action\"\n                    onClick={handleBookmarkCurrentPage}\n                  >\n                    ‚òÜ Add Bookmark\n                  </button>\n                )}\n                \n                {/* Bookmarks submenu */}\n                <div className=\"bookmarks-section\">\n                  <div className=\"dropdown-item bookmarks-header\" onClick={() => setShowBookmarkDropdown(!showBookmarkDropdown)}>\n                    üìñ Bookmarks\n                    <span className=\"dropdown-arrow\">{showBookmarkDropdown ? '‚ñ≤' : '‚ñº'}</span>\n                  </div>\n                  \n                  {showBookmarkDropdown && (\n                    <div className=\"bookmarks-dropdown\">\n                      {/* Bookmarks list grouped by page */}\n                      {bookmarksGrouped.length > 0 ? (\n                        <div className=\"bookmarks-list\">\n                          {bookmarksGrouped.map(group => (\n                            <div key={group.pageName} className=\"bookmark-group\">\n                              <div className=\"bookmark-group-header\">{group.pageName}</div>\n                              {group.bookmarks.map(bookmark => (\n                                <div key={bookmark.id} className=\"bookmark-item\">\n                                  <button \n                                    className=\"bookmark-link\"\n                                    onClick={() => handleBookmarkNavigation(bookmark)}\n                                    title={bookmark.url}\n                                  >\n                                    {bookmark.title}\n                                  </button>\n                                  <button \n                                    className=\"bookmark-remove\"\n                                    onClick={() => handleRemoveBookmark(bookmark.id)}\n                                    title=\"Remove bookmark\"\n                                  >\n                                    √ó\n                                  </button>\n                                </div>\n                              ))}\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <div className=\"no-bookmarks\">No bookmarks yet</div>\n                      )}\n                    </div>\n                  )}\n                </div>\n                \n                <button className=\"dropdown-item logout-btn\" onClick={handleLogout}>\n                  Logout\n                </button>\n              </div>\n            )}\n          </div>\n        ) : (\n          <button className=\"login-btn\" onClick={handleHomeNavigation}>\n            Login\n          </button>\n        )}\n      </div>\n    </header>\n  );\n};\n\nexport default PageHeader;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}