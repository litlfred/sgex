{"ast":null,"code":"import inherits from 'inherits-browser';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { is } from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * BPMN specific remove behavior.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function RemoveParticipantBehavior(eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n\n  /**\n   * morph collaboration diagram into process diagram\n   * after the last participant has been removed\n   */\n\n  this.preExecute('shape.delete', function (context) {\n    var shape = context.shape,\n      parent = shape.parent;\n\n    // activate the behavior if the shape to be removed\n    // is a participant\n    if (is(shape, 'bpmn:Participant')) {\n      context.collaborationRoot = parent;\n    }\n  }, true);\n  this.postExecute('shape.delete', function (context) {\n    var collaborationRoot = context.collaborationRoot;\n    if (collaborationRoot && !collaborationRoot.businessObject.participants.length) {\n      // replace empty collaboration with process diagram\n      var process = modeling.makeProcess();\n\n      // move all root elements from collaboration to process\n      var children = collaborationRoot.children.slice();\n      modeling.moveElements(children, {\n        x: 0,\n        y: 0\n      }, process);\n    }\n  }, true);\n}\nRemoveParticipantBehavior.$inject = ['eventBus', 'modeling'];\ninherits(RemoveParticipantBehavior, CommandInterceptor);","map":{"version":3,"names":["inherits","CommandInterceptor","is","RemoveParticipantBehavior","eventBus","modeling","call","preExecute","context","shape","parent","collaborationRoot","postExecute","businessObject","participants","length","process","makeProcess","children","slice","moveElements","x","y","$inject"],"sources":["/home/runner/work/sgex/sgex/node_modules/bpmn-js/lib/features/modeling/behavior/RemoveParticipantBehavior.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * BPMN specific remove behavior.\n *\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function RemoveParticipantBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  /**\n   * morph collaboration diagram into process diagram\n   * after the last participant has been removed\n   */\n\n  this.preExecute('shape.delete', function(context) {\n\n    var shape = context.shape,\n        parent = shape.parent;\n\n    // activate the behavior if the shape to be removed\n    // is a participant\n    if (is(shape, 'bpmn:Participant')) {\n      context.collaborationRoot = parent;\n    }\n  }, true);\n\n  this.postExecute('shape.delete', function(context) {\n\n    var collaborationRoot = context.collaborationRoot;\n\n    if (collaborationRoot && !collaborationRoot.businessObject.participants.length) {\n\n      // replace empty collaboration with process diagram\n      var process = modeling.makeProcess();\n\n      // move all root elements from collaboration to process\n      var children = collaborationRoot.children.slice();\n\n      modeling.moveElements(children, { x: 0, y: 0 }, process);\n    }\n  }, true);\n\n}\n\nRemoveParticipantBehavior.$inject = [ 'eventBus', 'modeling' ];\n\ninherits(RemoveParticipantBehavior, CommandInterceptor);"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,kBAAkB;AAEvC,OAAOC,kBAAkB,MAAM,2CAA2C;AAE1E,SAASC,EAAE,QAAQ,yBAAyB;;AAE5C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,yBAAyBA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;EAEpEJ,kBAAkB,CAACK,IAAI,CAAC,IAAI,EAAEF,QAAQ,CAAC;;EAGvC;AACF;AACA;AACA;;EAEE,IAAI,CAACG,UAAU,CAAC,cAAc,EAAE,UAASC,OAAO,EAAE;IAEhD,IAAIC,KAAK,GAAGD,OAAO,CAACC,KAAK;MACrBC,MAAM,GAAGD,KAAK,CAACC,MAAM;;IAEzB;IACA;IACA,IAAIR,EAAE,CAACO,KAAK,EAAE,kBAAkB,CAAC,EAAE;MACjCD,OAAO,CAACG,iBAAiB,GAAGD,MAAM;IACpC;EACF,CAAC,EAAE,IAAI,CAAC;EAER,IAAI,CAACE,WAAW,CAAC,cAAc,EAAE,UAASJ,OAAO,EAAE;IAEjD,IAAIG,iBAAiB,GAAGH,OAAO,CAACG,iBAAiB;IAEjD,IAAIA,iBAAiB,IAAI,CAACA,iBAAiB,CAACE,cAAc,CAACC,YAAY,CAACC,MAAM,EAAE;MAE9E;MACA,IAAIC,OAAO,GAAGX,QAAQ,CAACY,WAAW,CAAC,CAAC;;MAEpC;MACA,IAAIC,QAAQ,GAAGP,iBAAiB,CAACO,QAAQ,CAACC,KAAK,CAAC,CAAC;MAEjDd,QAAQ,CAACe,YAAY,CAACF,QAAQ,EAAE;QAAEG,CAAC,EAAE,CAAC;QAAEC,CAAC,EAAE;MAAE,CAAC,EAAEN,OAAO,CAAC;IAC1D;EACF,CAAC,EAAE,IAAI,CAAC;AAEV;AAEAb,yBAAyB,CAACoB,OAAO,GAAG,CAAE,UAAU,EAAE,UAAU,CAAE;AAE9DvB,QAAQ,CAACG,yBAAyB,EAAEF,kBAAkB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}