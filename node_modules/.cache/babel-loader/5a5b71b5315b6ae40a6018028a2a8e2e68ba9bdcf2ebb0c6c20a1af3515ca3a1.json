{"ast":null,"code":"import React,{useState,useEffect}from'react';import helpContentService from'../services/helpContentService';import HelpModal from'./HelpModal';import'./ContextualHelpMascot.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ContextualHelpMascot=_ref=>{let{pageId,helpContent,position='bottom-right',contextData={},notificationBadge=false}=_ref;const[showHelp,setShowHelp]=useState(false);const[helpSticky,setHelpSticky]=useState(false);const[selectedHelpTopic,setSelectedHelpTopic]=useState(null);const[isFadingOut,setIsFadingOut]=useState(false);const[isDarkMode,setIsDarkMode]=useState(true);// Load theme preference from localStorage on mount\nuseEffect(()=>{const savedTheme=localStorage.getItem('sgex-theme');if(savedTheme){setIsDarkMode(savedTheme==='dark');}else{// Check if user explicitly prefers light mode\nconst prefersLight=window.matchMedia('(prefers-color-scheme: light)').matches;// Default to dark mode unless user explicitly prefers light\nsetIsDarkMode(!prefersLight);}},[]);// Update body class when theme changes\nuseEffect(()=>{document.body.className=isDarkMode?'theme-dark':'theme-light';localStorage.setItem('sgex-theme',isDarkMode?'dark':'light');},[isDarkMode]);const toggleTheme=()=>{setIsDarkMode(!isDarkMode);};// Get help topics for the page\nconst helpTopics=pageId?helpContentService.getHelpTopicsForPage(pageId,contextData):[];const handleMouseEnter=()=>{if(!helpSticky){setShowHelp(true);}};const handleMouseLeave=()=>{if(!helpSticky){setShowHelp(false);}};const handleClick=()=>{setHelpSticky(!helpSticky);setShowHelp(!helpSticky||showHelp);};const handleCloseHelp=()=>{setIsFadingOut(true);// After fade animation completes, hide the bubble\nsetTimeout(()=>{setShowHelp(false);setHelpSticky(false);setIsFadingOut(false);},690);// 0.69 seconds\n};const handleHelpTopicClick=topic=>{// Handle link-type topics by navigating directly\nif(topic.type==='link'){window.open(topic.url,'_blank');setShowHelp(false);setHelpSticky(false);return;}// Handle other types with the modal\nsetSelectedHelpTopic(topic);setShowHelp(false);setHelpSticky(false);};const handleCloseModal=()=>{setSelectedHelpTopic(null);};// Always render the mascot now since we have universal topics\n// if (!hasTopics) {\n//   return null;\n// }\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:`contextual-help-mascot ${position}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"theme-toggle-container\",children:/*#__PURE__*/_jsx(\"button\",{className:`theme-toggle-btn ${isDarkMode?'dark':'light'}`,onClick:toggleTheme,\"aria-label\":`Switch to ${isDarkMode?'light':'dark'} mode`,title:`Switch to ${isDarkMode?'light':'dark'} mode`,children:isDarkMode?'ðŸŒž':'ðŸŒ™'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mascot-container\",onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,onClick:handleClick,children:[/*#__PURE__*/_jsx(\"img\",{src:\"/sgex/sgex-mascot.png\",alt:\"SGEX Helper\",className:\"mascot-icon\"}),notificationBadge&&/*#__PURE__*/_jsx(\"div\",{className:\"notification-badge\",children:\"!\"}),!notificationBadge&&/*#__PURE__*/_jsx(\"div\",{className:\"question-bubble\",children:\"?\"})]}),showHelp&&/*#__PURE__*/_jsxs(\"div\",{className:`help-thought-bubble ${isFadingOut?'fading-out':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bubble-content\",children:[helpSticky&&/*#__PURE__*/_jsx(\"button\",{className:\"close-bubble-btn\",onClick:handleCloseHelp,\"aria-label\":\"Close help\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"help-text\",children:helpTopics.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"help-topics-list\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Get Help\"}),helpTopics.map(topic=>/*#__PURE__*/_jsxs(\"button\",{className:\"help-topic-btn\",onClick:()=>handleHelpTopicClick(topic),children:[topic.badge&&/*#__PURE__*/_jsx(\"img\",{src:topic.badge,alt:\"\",className:\"help-topic-badge\"}),/*#__PURE__*/_jsx(\"span\",{className:\"help-topic-title\",children:topic.title})]},topic.id))]}):helpContent})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bubble-tail\"})]})]}),selectedHelpTopic&&/*#__PURE__*/_jsx(HelpModal,{helpTopic:selectedHelpTopic,contextData:contextData,onClose:handleCloseModal})]});};export default ContextualHelpMascot;","map":{"version":3,"names":["React","useState","useEffect","helpContentService","HelpModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ContextualHelpMascot","_ref","pageId","helpContent","position","contextData","notificationBadge","showHelp","setShowHelp","helpSticky","setHelpSticky","selectedHelpTopic","setSelectedHelpTopic","isFadingOut","setIsFadingOut","isDarkMode","setIsDarkMode","savedTheme","localStorage","getItem","prefersLight","window","matchMedia","matches","document","body","className","setItem","toggleTheme","helpTopics","getHelpTopicsForPage","handleMouseEnter","handleMouseLeave","handleClick","handleCloseHelp","setTimeout","handleHelpTopicClick","topic","type","open","url","handleCloseModal","children","onClick","title","onMouseEnter","onMouseLeave","src","alt","length","map","badge","id","helpTopic","onClose"],"sources":["/home/runner/work/sgex/sgex/src/components/ContextualHelpMascot.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport helpContentService from '../services/helpContentService';\nimport HelpModal from './HelpModal';\nimport './ContextualHelpMascot.css';\n\nconst ContextualHelpMascot = ({ pageId, helpContent, position = 'bottom-right', contextData = {}, notificationBadge = false }) => {\n  const [showHelp, setShowHelp] = useState(false);\n  const [helpSticky, setHelpSticky] = useState(false);\n  const [selectedHelpTopic, setSelectedHelpTopic] = useState(null);\n  const [isFadingOut, setIsFadingOut] = useState(false);\n  const [isDarkMode, setIsDarkMode] = useState(true);\n\n  // Load theme preference from localStorage on mount\n  useEffect(() => {\n    const savedTheme = localStorage.getItem('sgex-theme');\n    if (savedTheme) {\n      setIsDarkMode(savedTheme === 'dark');\n    } else {\n      // Check if user explicitly prefers light mode\n      const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;\n      // Default to dark mode unless user explicitly prefers light\n      setIsDarkMode(!prefersLight);\n    }\n  }, []);\n\n  // Update body class when theme changes\n  useEffect(() => {\n    document.body.className = isDarkMode ? 'theme-dark' : 'theme-light';\n    localStorage.setItem('sgex-theme', isDarkMode ? 'dark' : 'light');\n  }, [isDarkMode]);\n\n  const toggleTheme = () => {\n    setIsDarkMode(!isDarkMode);\n  };\n\n  // Get help topics for the page\n  const helpTopics = pageId ? helpContentService.getHelpTopicsForPage(pageId, contextData) : [];\n\n  const handleMouseEnter = () => {\n    if (!helpSticky) {\n      setShowHelp(true);\n    }\n  };\n\n  const handleMouseLeave = () => {\n    if (!helpSticky) {\n      setShowHelp(false);\n    }\n  };\n\n  const handleClick = () => {\n    setHelpSticky(!helpSticky);\n    setShowHelp(!helpSticky || showHelp);\n  };\n\n  const handleCloseHelp = () => {\n    setIsFadingOut(true);\n    // After fade animation completes, hide the bubble\n    setTimeout(() => {\n      setShowHelp(false);\n      setHelpSticky(false);\n      setIsFadingOut(false);\n    }, 690); // 0.69 seconds\n  };\n\n  const handleHelpTopicClick = (topic) => {\n    // Handle link-type topics by navigating directly\n    if (topic.type === 'link') {\n      window.open(topic.url, '_blank');\n      setShowHelp(false);\n      setHelpSticky(false);\n      return;\n    }\n    \n    // Handle other types with the modal\n    setSelectedHelpTopic(topic);\n    setShowHelp(false);\n    setHelpSticky(false);\n  };\n\n  const handleCloseModal = () => {\n    setSelectedHelpTopic(null);\n  };\n\n  // Always render the mascot now since we have universal topics\n  // if (!hasTopics) {\n  //   return null;\n  // }\n\n  return (\n    <>\n      <div className={`contextual-help-mascot ${position}`}>\n        {/* Theme toggle button positioned under mascot */}\n        <div className=\"theme-toggle-container\">\n          <button \n            className={`theme-toggle-btn ${isDarkMode ? 'dark' : 'light'}`}\n            onClick={toggleTheme}\n            aria-label={`Switch to ${isDarkMode ? 'light' : 'dark'} mode`}\n            title={`Switch to ${isDarkMode ? 'light' : 'dark'} mode`}\n          >\n            {isDarkMode ? 'ðŸŒž' : 'ðŸŒ™'}\n          </button>\n        </div>\n        \n        <div \n          className=\"mascot-container\"\n          onMouseEnter={handleMouseEnter}\n          onMouseLeave={handleMouseLeave}\n          onClick={handleClick}\n        >\n          <img \n            src=\"/sgex/sgex-mascot.png\" \n            alt=\"SGEX Helper\" \n            className=\"mascot-icon\"\n          />\n          \n          {/* Notification badge for important help messages */}\n          {notificationBadge && (\n            <div className=\"notification-badge\">\n              !\n            </div>\n          )}\n          \n          {/* Question mark thought bubble - always show since we always have topics now */}\n          {!notificationBadge && (\n            <div className=\"question-bubble\">\n              ?\n            </div>\n          )}\n        </div>\n        \n        {showHelp && (\n          <div className={`help-thought-bubble ${isFadingOut ? 'fading-out' : ''}`}>\n            <div className=\"bubble-content\">\n              {helpSticky && (\n                <button \n                  className=\"close-bubble-btn\"\n                  onClick={handleCloseHelp}\n                  aria-label=\"Close help\"\n                >\n                  Ã—\n                </button>\n              )}\n              <div className=\"help-text\">\n                {helpTopics.length > 0 ? (\n                  <div className=\"help-topics-list\">\n                    <h4>Get Help</h4>\n                    {helpTopics.map((topic) => (\n                      <button\n                        key={topic.id}\n                        className=\"help-topic-btn\"\n                        onClick={() => handleHelpTopicClick(topic)}\n                      >\n                        {topic.badge && (\n                          <img \n                            src={topic.badge} \n                            alt=\"\" \n                            className=\"help-topic-badge\"\n                          />\n                        )}\n                        <span className=\"help-topic-title\">{topic.title}</span>\n                      </button>\n                    ))}\n                  </div>\n                ) : (\n                  helpContent\n                )}\n              </div>\n            </div>\n            <div className=\"bubble-tail\"></div>\n          </div>\n        )}\n      </div>\n      \n      {/* Help Modal for displaying slideshow content */}\n      {selectedHelpTopic && (\n        <HelpModal\n          helpTopic={selectedHelpTopic}\n          contextData={contextData}\n          onClose={handleCloseModal}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ContextualHelpMascot;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,kBAAkB,KAAM,gCAAgC,CAC/D,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEpC,KAAM,CAAAC,oBAAoB,CAAGC,IAAA,EAAqG,IAApG,CAAEC,MAAM,CAAEC,WAAW,CAAEC,QAAQ,CAAG,cAAc,CAAEC,WAAW,CAAG,CAAC,CAAC,CAAEC,iBAAiB,CAAG,KAAM,CAAC,CAAAL,IAAA,CAC3H,KAAM,CAACM,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACmB,UAAU,CAAEC,aAAa,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACqB,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAACuB,WAAW,CAAEC,cAAc,CAAC,CAAGxB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACyB,UAAU,CAAEC,aAAa,CAAC,CAAG1B,QAAQ,CAAC,IAAI,CAAC,CAElD;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA0B,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CACrD,GAAIF,UAAU,CAAE,CACdD,aAAa,CAACC,UAAU,GAAK,MAAM,CAAC,CACtC,CAAC,IAAM,CACL;AACA,KAAM,CAAAG,YAAY,CAAGC,MAAM,CAACC,UAAU,CAAC,+BAA+B,CAAC,CAACC,OAAO,CAC/E;AACAP,aAAa,CAAC,CAACI,YAAY,CAAC,CAC9B,CACF,CAAC,CAAE,EAAE,CAAC,CAEN;AACA7B,SAAS,CAAC,IAAM,CACdiC,QAAQ,CAACC,IAAI,CAACC,SAAS,CAAGX,UAAU,CAAG,YAAY,CAAG,aAAa,CACnEG,YAAY,CAACS,OAAO,CAAC,YAAY,CAAEZ,UAAU,CAAG,MAAM,CAAG,OAAO,CAAC,CACnE,CAAC,CAAE,CAACA,UAAU,CAAC,CAAC,CAEhB,KAAM,CAAAa,WAAW,CAAGA,CAAA,GAAM,CACxBZ,aAAa,CAAC,CAACD,UAAU,CAAC,CAC5B,CAAC,CAED;AACA,KAAM,CAAAc,UAAU,CAAG3B,MAAM,CAAGV,kBAAkB,CAACsC,oBAAoB,CAAC5B,MAAM,CAAEG,WAAW,CAAC,CAAG,EAAE,CAE7F,KAAM,CAAA0B,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAI,CAACtB,UAAU,CAAE,CACfD,WAAW,CAAC,IAAI,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAwB,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAI,CAACvB,UAAU,CAAE,CACfD,WAAW,CAAC,KAAK,CAAC,CACpB,CACF,CAAC,CAED,KAAM,CAAAyB,WAAW,CAAGA,CAAA,GAAM,CACxBvB,aAAa,CAAC,CAACD,UAAU,CAAC,CAC1BD,WAAW,CAAC,CAACC,UAAU,EAAIF,QAAQ,CAAC,CACtC,CAAC,CAED,KAAM,CAAA2B,eAAe,CAAGA,CAAA,GAAM,CAC5BpB,cAAc,CAAC,IAAI,CAAC,CACpB;AACAqB,UAAU,CAAC,IAAM,CACf3B,WAAW,CAAC,KAAK,CAAC,CAClBE,aAAa,CAAC,KAAK,CAAC,CACpBI,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAAE,GAAG,CAAC,CAAE;AACX,CAAC,CAED,KAAM,CAAAsB,oBAAoB,CAAIC,KAAK,EAAK,CACtC;AACA,GAAIA,KAAK,CAACC,IAAI,GAAK,MAAM,CAAE,CACzBjB,MAAM,CAACkB,IAAI,CAACF,KAAK,CAACG,GAAG,CAAE,QAAQ,CAAC,CAChChC,WAAW,CAAC,KAAK,CAAC,CAClBE,aAAa,CAAC,KAAK,CAAC,CACpB,OACF,CAEA;AACAE,oBAAoB,CAACyB,KAAK,CAAC,CAC3B7B,WAAW,CAAC,KAAK,CAAC,CAClBE,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,KAAM,CAAA+B,gBAAgB,CAAGA,CAAA,GAAM,CAC7B7B,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAED;AACA;AACA;AACA;AAEA,mBACEf,KAAA,CAAAE,SAAA,EAAA2C,QAAA,eACE7C,KAAA,QAAK6B,SAAS,CAAE,0BAA0BtB,QAAQ,EAAG,CAAAsC,QAAA,eAEnD/C,IAAA,QAAK+B,SAAS,CAAC,wBAAwB,CAAAgB,QAAA,cACrC/C,IAAA,WACE+B,SAAS,CAAE,oBAAoBX,UAAU,CAAG,MAAM,CAAG,OAAO,EAAG,CAC/D4B,OAAO,CAAEf,WAAY,CACrB,aAAY,aAAab,UAAU,CAAG,OAAO,CAAG,MAAM,OAAQ,CAC9D6B,KAAK,CAAE,aAAa7B,UAAU,CAAG,OAAO,CAAG,MAAM,OAAQ,CAAA2B,QAAA,CAExD3B,UAAU,CAAG,IAAI,CAAG,IAAI,CACnB,CAAC,CACN,CAAC,cAENlB,KAAA,QACE6B,SAAS,CAAC,kBAAkB,CAC5BmB,YAAY,CAAEd,gBAAiB,CAC/Be,YAAY,CAAEd,gBAAiB,CAC/BW,OAAO,CAAEV,WAAY,CAAAS,QAAA,eAErB/C,IAAA,QACEoD,GAAG,CAAC,uBAAuB,CAC3BC,GAAG,CAAC,aAAa,CACjBtB,SAAS,CAAC,aAAa,CACxB,CAAC,CAGDpB,iBAAiB,eAChBX,IAAA,QAAK+B,SAAS,CAAC,oBAAoB,CAAAgB,QAAA,CAAC,GAEpC,CAAK,CACN,CAGA,CAACpC,iBAAiB,eACjBX,IAAA,QAAK+B,SAAS,CAAC,iBAAiB,CAAAgB,QAAA,CAAC,GAEjC,CAAK,CACN,EACE,CAAC,CAELnC,QAAQ,eACPV,KAAA,QAAK6B,SAAS,CAAE,uBAAuBb,WAAW,CAAG,YAAY,CAAG,EAAE,EAAG,CAAA6B,QAAA,eACvE7C,KAAA,QAAK6B,SAAS,CAAC,gBAAgB,CAAAgB,QAAA,EAC5BjC,UAAU,eACTd,IAAA,WACE+B,SAAS,CAAC,kBAAkB,CAC5BiB,OAAO,CAAET,eAAgB,CACzB,aAAW,YAAY,CAAAQ,QAAA,CACxB,MAED,CAAQ,CACT,cACD/C,IAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAgB,QAAA,CACvBb,UAAU,CAACoB,MAAM,CAAG,CAAC,cACpBpD,KAAA,QAAK6B,SAAS,CAAC,kBAAkB,CAAAgB,QAAA,eAC/B/C,IAAA,OAAA+C,QAAA,CAAI,UAAQ,CAAI,CAAC,CAChBb,UAAU,CAACqB,GAAG,CAAEb,KAAK,eACpBxC,KAAA,WAEE6B,SAAS,CAAC,gBAAgB,CAC1BiB,OAAO,CAAEA,CAAA,GAAMP,oBAAoB,CAACC,KAAK,CAAE,CAAAK,QAAA,EAE1CL,KAAK,CAACc,KAAK,eACVxD,IAAA,QACEoD,GAAG,CAAEV,KAAK,CAACc,KAAM,CACjBH,GAAG,CAAC,EAAE,CACNtB,SAAS,CAAC,kBAAkB,CAC7B,CACF,cACD/B,IAAA,SAAM+B,SAAS,CAAC,kBAAkB,CAAAgB,QAAA,CAAEL,KAAK,CAACO,KAAK,CAAO,CAAC,GAXlDP,KAAK,CAACe,EAYL,CACT,CAAC,EACC,CAAC,CAENjD,WACD,CACE,CAAC,EACH,CAAC,cACNR,IAAA,QAAK+B,SAAS,CAAC,aAAa,CAAM,CAAC,EAChC,CACN,EACE,CAAC,CAGLf,iBAAiB,eAChBhB,IAAA,CAACF,SAAS,EACR4D,SAAS,CAAE1C,iBAAkB,CAC7BN,WAAW,CAAEA,WAAY,CACzBiD,OAAO,CAAEb,gBAAiB,CAC3B,CACF,EACD,CAAC,CAEP,CAAC,CAED,cAAe,CAAAzC,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}