{"ast":null,"code":"import { getLabel, isLabel } from '../../util/LabelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPad').default} SearchPad\n *\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPadProvider').default} SearchPadProvider\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPadProvider').SearchResult} SearchPadResult\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPadProvider').Token} SearchPadToken\n * @typedef {import('diagram-js/lib/features/search/search').default} Search\n * @typedef {import('diagram-js/lib/features/search/search').SearchResult} SearchResult\n * @typedef {import('diagram-js/lib/features/search/search').Token} SearchToken\n */\n\n/**\n * Provides ability to search for BPMN elements.\n *\n * @implements {SearchPadProvider}\n *\n * @param {ElementRegistry} elementRegistry\n * @param {SearchPad} searchPad\n * @param {Canvas} canvas\n * @param {Search} search\n */\nexport default function BpmnSearchProvider(elementRegistry, searchPad, canvas, search) {\n  this._elementRegistry = elementRegistry;\n  this._canvas = canvas;\n  this._search = search;\n  searchPad.registerProvider(this);\n}\nBpmnSearchProvider.$inject = ['elementRegistry', 'searchPad', 'canvas', 'search'];\n\n/**\n * @param {string} pattern\n *\n * @return {SearchPadResult[]}\n */\nBpmnSearchProvider.prototype.find = function (pattern) {\n  var rootElements = this._canvas.getRootElements();\n  var elements = this._elementRegistry.filter(function (element) {\n    return !isLabel(element) && !rootElements.includes(element);\n  });\n  return this._search(elements.map(element => {\n    return {\n      element,\n      label: getLabel(element),\n      id: element.id\n    };\n  }), pattern, {\n    keys: ['label', 'id']\n  }).map(toSearchPadResult);\n};\n\n/**\n * @param {SearchResult} token\n *\n * @return {SearchPadResult}\n */\nfunction toSearchPadResult(result) {\n  const {\n    item: {\n      element\n    },\n    tokens\n  } = result;\n  return {\n    element,\n    primaryTokens: tokens.label,\n    secondaryTokens: tokens.id\n  };\n}","map":{"version":3,"names":["getLabel","isLabel","BpmnSearchProvider","elementRegistry","searchPad","canvas","search","_elementRegistry","_canvas","_search","registerProvider","$inject","prototype","find","pattern","rootElements","getRootElements","elements","filter","element","includes","map","label","id","keys","toSearchPadResult","result","item","tokens","primaryTokens","secondaryTokens"],"sources":["/home/runner/work/sgex/sgex/node_modules/bpmn-js/lib/features/search/BpmnSearchProvider.js"],"sourcesContent":["import {\n  getLabel,\n  isLabel\n} from '../../util/LabelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/ElementRegistry').default} ElementRegistry\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPad').default} SearchPad\n *\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPadProvider').default} SearchPadProvider\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPadProvider').SearchResult} SearchPadResult\n * @typedef {import('diagram-js/lib/features/search-pad/SearchPadProvider').Token} SearchPadToken\n * @typedef {import('diagram-js/lib/features/search/search').default} Search\n * @typedef {import('diagram-js/lib/features/search/search').SearchResult} SearchResult\n * @typedef {import('diagram-js/lib/features/search/search').Token} SearchToken\n */\n\n/**\n * Provides ability to search for BPMN elements.\n *\n * @implements {SearchPadProvider}\n *\n * @param {ElementRegistry} elementRegistry\n * @param {SearchPad} searchPad\n * @param {Canvas} canvas\n * @param {Search} search\n */\nexport default function BpmnSearchProvider(elementRegistry, searchPad, canvas, search) {\n  this._elementRegistry = elementRegistry;\n  this._canvas = canvas;\n  this._search = search;\n\n  searchPad.registerProvider(this);\n}\n\nBpmnSearchProvider.$inject = [\n  'elementRegistry',\n  'searchPad',\n  'canvas',\n  'search'\n];\n\n/**\n * @param {string} pattern\n *\n * @return {SearchPadResult[]}\n */\nBpmnSearchProvider.prototype.find = function(pattern) {\n  var rootElements = this._canvas.getRootElements();\n\n  var elements = this._elementRegistry.filter(function(element) {\n    return !isLabel(element) && !rootElements.includes(element);\n  });\n\n  return this._search(\n    elements.map(element => {\n      return {\n        element,\n        label: getLabel(element),\n        id: element.id\n      };\n    }),\n    pattern, {\n      keys: [\n        'label',\n        'id'\n      ]\n    }\n  ).map(toSearchPadResult);\n};\n\n/**\n * @param {SearchResult} token\n *\n * @return {SearchPadResult}\n */\nfunction toSearchPadResult(result) {\n\n  const {\n    item: {\n      element\n    },\n    tokens\n  } = result;\n\n  return {\n    element,\n    primaryTokens: tokens.label,\n    secondaryTokens: tokens.id\n  };\n}"],"mappings":"AAAA,SACEA,QAAQ,EACRC,OAAO,QACF,sBAAsB;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,kBAAkBA,CAACC,eAAe,EAAEC,SAAS,EAAEC,MAAM,EAAEC,MAAM,EAAE;EACrF,IAAI,CAACC,gBAAgB,GAAGJ,eAAe;EACvC,IAAI,CAACK,OAAO,GAAGH,MAAM;EACrB,IAAI,CAACI,OAAO,GAAGH,MAAM;EAErBF,SAAS,CAACM,gBAAgB,CAAC,IAAI,CAAC;AAClC;AAEAR,kBAAkB,CAACS,OAAO,GAAG,CAC3B,iBAAiB,EACjB,WAAW,EACX,QAAQ,EACR,QAAQ,CACT;;AAED;AACA;AACA;AACA;AACA;AACAT,kBAAkB,CAACU,SAAS,CAACC,IAAI,GAAG,UAASC,OAAO,EAAE;EACpD,IAAIC,YAAY,GAAG,IAAI,CAACP,OAAO,CAACQ,eAAe,CAAC,CAAC;EAEjD,IAAIC,QAAQ,GAAG,IAAI,CAACV,gBAAgB,CAACW,MAAM,CAAC,UAASC,OAAO,EAAE;IAC5D,OAAO,CAAClB,OAAO,CAACkB,OAAO,CAAC,IAAI,CAACJ,YAAY,CAACK,QAAQ,CAACD,OAAO,CAAC;EAC7D,CAAC,CAAC;EAEF,OAAO,IAAI,CAACV,OAAO,CACjBQ,QAAQ,CAACI,GAAG,CAACF,OAAO,IAAI;IACtB,OAAO;MACLA,OAAO;MACPG,KAAK,EAAEtB,QAAQ,CAACmB,OAAO,CAAC;MACxBI,EAAE,EAAEJ,OAAO,CAACI;IACd,CAAC;EACH,CAAC,CAAC,EACFT,OAAO,EAAE;IACPU,IAAI,EAAE,CACJ,OAAO,EACP,IAAI;EAER,CACF,CAAC,CAACH,GAAG,CAACI,iBAAiB,CAAC;AAC1B,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,SAASA,iBAAiBA,CAACC,MAAM,EAAE;EAEjC,MAAM;IACJC,IAAI,EAAE;MACJR;IACF,CAAC;IACDS;EACF,CAAC,GAAGF,MAAM;EAEV,OAAO;IACLP,OAAO;IACPU,aAAa,EAAED,MAAM,CAACN,KAAK;IAC3BQ,eAAe,EAAEF,MAAM,CAACL;EAC1B,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}