{"ast":null,"code":"import { values } from 'min-dash';\nimport { getEnclosedElements } from '../../util/Elements';\nimport { hasSecondaryModifier } from '../../util/Mouse';\nimport { append as svgAppend, attr as svgAttr, create as svgCreate, remove as svgRemove } from 'tiny-svg';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../mouse/Mouse').default} Mouse\n * @typedef {import('../selection/Selection').default} Selection\n * @typedef {import('../tool-manager/ToolManager').default} ToolManager\n *\n * @typedef {import('../../util/Types').Rect} Rect\n */\n\nvar LASSO_TOOL_CURSOR = 'crosshair';\n\n/**\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Dragging} dragging\n * @param {ElementRegistry} elementRegistry\n * @param {Selection} selection\n * @param {ToolManager} toolManager\n * @param {Mouse} mouse\n */\nexport default function LassoTool(eventBus, canvas, dragging, elementRegistry, selection, toolManager, mouse) {\n  this._selection = selection;\n  this._dragging = dragging;\n  this._mouse = mouse;\n  var self = this;\n\n  // lasso visuals implementation\n\n  /**\n  * A helper that realizes the selection box visual\n  */\n  var visuals = {\n    create: function (context) {\n      var container = canvas.getActiveLayer(),\n        frame;\n      frame = context.frame = svgCreate('rect');\n      svgAttr(frame, {\n        class: 'djs-lasso-overlay',\n        width: 1,\n        height: 1,\n        x: 0,\n        y: 0\n      });\n      svgAppend(container, frame);\n    },\n    update: function (context) {\n      var frame = context.frame,\n        bbox = context.bbox;\n      svgAttr(frame, {\n        x: bbox.x,\n        y: bbox.y,\n        width: bbox.width,\n        height: bbox.height\n      });\n    },\n    remove: function (context) {\n      if (context.frame) {\n        svgRemove(context.frame);\n      }\n    }\n  };\n  toolManager.registerTool('lasso', {\n    tool: 'lasso.selection',\n    dragging: 'lasso'\n  });\n  eventBus.on('lasso.selection.end', function (event) {\n    var target = event.originalEvent.target;\n\n    // only reactive on diagram click\n    // on some occasions, event.hover is not set and we have to check if the target is an svg\n    if (!event.hover && !(target instanceof SVGElement)) {\n      return;\n    }\n    eventBus.once('lasso.selection.ended', function () {\n      self.activateLasso(event.originalEvent, true);\n    });\n  });\n\n  // lasso interaction implementation\n\n  eventBus.on('lasso.end', 0, function (event) {\n    var context = event.context;\n    var bbox = toBBox(event);\n    var elements = elementRegistry.filter(function (element) {\n      return element;\n    });\n    var add = hasSecondaryModifier(event);\n    self.select(elements, bbox, add ? context.selection : []);\n  });\n  eventBus.on('lasso.start', function (event) {\n    var context = event.context;\n    context.bbox = toBBox(event);\n    visuals.create(context);\n    context.selection = selection.get();\n  });\n  eventBus.on('lasso.move', function (event) {\n    var context = event.context;\n    context.bbox = toBBox(event);\n    visuals.update(context);\n  });\n  eventBus.on('lasso.cleanup', function (event) {\n    var context = event.context;\n    visuals.remove(context);\n  });\n\n  // event integration\n\n  eventBus.on('element.mousedown', 1500, function (event) {\n    if (!hasSecondaryModifier(event)) {\n      return;\n    }\n    self.activateLasso(event.originalEvent);\n\n    // we've handled the event\n    return true;\n  });\n}\nLassoTool.$inject = ['eventBus', 'canvas', 'dragging', 'elementRegistry', 'selection', 'toolManager', 'mouse'];\n\n/**\n * Activate lasso.\n *\n * @param {MouseEvent} event\n * @param {boolean} [autoActivate=false]\n */\nLassoTool.prototype.activateLasso = function (event, autoActivate) {\n  this._dragging.init(event, 'lasso', {\n    autoActivate: autoActivate,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    }\n  });\n};\n\n/**\n * Activate selection.\n *\n * @param {MouseEvent} event\n * @param {boolean} [autoActivate=false]\n */\nLassoTool.prototype.activateSelection = function (event, autoActivate) {\n  this._dragging.init(event, 'lasso.selection', {\n    trapClick: false,\n    autoActivate: autoActivate,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    },\n    keepSelection: true\n  });\n};\n\n/**\n * Select elements within the given bounds.\n *\n * @param {Element[]} elements\n * @param {Rect} bbox\n * @param {Element[]} [previousSelection]\n */\nLassoTool.prototype.select = function (elements, bbox) {\n  let previousSelection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var selectedElements = getEnclosedElements(elements, bbox);\n  this._selection.select([...previousSelection, ...values(selectedElements)]);\n};\n\n/**\n * Toggle the lasso tool.\n */\nLassoTool.prototype.toggle = function () {\n  if (this.isActive()) {\n    return this._dragging.cancel();\n  }\n  var mouseEvent = this._mouse.getLastMoveEvent();\n  this.activateSelection(mouseEvent, !!mouseEvent);\n};\n\n/**\n * Check if the lasso tool is active.\n *\n * @returns {boolean}\n */\nLassoTool.prototype.isActive = function () {\n  var context = this._dragging.context();\n  return context && /^lasso/.test(context.prefix);\n};\nfunction toBBox(event) {\n  var start = {\n    x: event.x - event.dx,\n    y: event.y - event.dy\n  };\n  var end = {\n    x: event.x,\n    y: event.y\n  };\n  var bbox;\n  if (start.x <= end.x && start.y < end.y || start.x < end.x && start.y <= end.y) {\n    bbox = {\n      x: start.x,\n      y: start.y,\n      width: end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if (start.x >= end.x && start.y < end.y || start.x > end.x && start.y <= end.y) {\n    bbox = {\n      x: end.x,\n      y: start.y,\n      width: start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if (start.x <= end.x && start.y > end.y || start.x < end.x && start.y >= end.y) {\n    bbox = {\n      x: start.x,\n      y: end.y,\n      width: end.x - start.x,\n      height: start.y - end.y\n    };\n  } else if (start.x >= end.x && start.y > end.y || start.x > end.x && start.y >= end.y) {\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width: start.x - end.x,\n      height: start.y - end.y\n    };\n  } else {\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width: 0,\n      height: 0\n    };\n  }\n  return bbox;\n}","map":{"version":3,"names":["values","getEnclosedElements","hasSecondaryModifier","append","svgAppend","attr","svgAttr","create","svgCreate","remove","svgRemove","LASSO_TOOL_CURSOR","LassoTool","eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse","_selection","_dragging","_mouse","self","visuals","context","container","getActiveLayer","frame","class","width","height","x","y","update","bbox","registerTool","tool","on","event","target","originalEvent","hover","SVGElement","once","activateLasso","toBBox","elements","filter","element","add","select","get","$inject","prototype","autoActivate","init","cursor","data","activateSelection","trapClick","keepSelection","previousSelection","arguments","length","undefined","selectedElements","toggle","isActive","cancel","mouseEvent","getLastMoveEvent","test","prefix","start","dx","dy","end"],"sources":["/home/runner/work/sgex/sgex/node_modules/diagram-js/lib/features/lasso-tool/LassoTool.js"],"sourcesContent":["import { values } from 'min-dash';\n\nimport { getEnclosedElements } from '../../util/Elements';\n\nimport {\n  hasSecondaryModifier\n} from '../../util/Mouse';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  remove as svgRemove\n} from 'tiny-svg';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../dragging/Dragging').default} Dragging\n * @typedef {import('../../core/ElementRegistry').default} ElementRegistry\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../mouse/Mouse').default} Mouse\n * @typedef {import('../selection/Selection').default} Selection\n * @typedef {import('../tool-manager/ToolManager').default} ToolManager\n *\n * @typedef {import('../../util/Types').Rect} Rect\n */\n\nvar LASSO_TOOL_CURSOR = 'crosshair';\n\n/**\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Dragging} dragging\n * @param {ElementRegistry} elementRegistry\n * @param {Selection} selection\n * @param {ToolManager} toolManager\n * @param {Mouse} mouse\n */\nexport default function LassoTool(\n    eventBus, canvas, dragging,\n    elementRegistry, selection, toolManager,\n    mouse) {\n\n  this._selection = selection;\n  this._dragging = dragging;\n  this._mouse = mouse;\n\n  var self = this;\n\n  // lasso visuals implementation\n\n  /**\n  * A helper that realizes the selection box visual\n  */\n  var visuals = {\n\n    create: function(context) {\n      var container = canvas.getActiveLayer(),\n          frame;\n\n      frame = context.frame = svgCreate('rect');\n      svgAttr(frame, {\n        class: 'djs-lasso-overlay',\n        width:  1,\n        height: 1,\n        x: 0,\n        y: 0\n      });\n\n      svgAppend(container, frame);\n    },\n\n    update: function(context) {\n      var frame = context.frame,\n          bbox = context.bbox;\n\n      svgAttr(frame, {\n        x: bbox.x,\n        y: bbox.y,\n        width: bbox.width,\n        height: bbox.height\n      });\n    },\n\n    remove: function(context) {\n\n      if (context.frame) {\n        svgRemove(context.frame);\n      }\n    }\n  };\n\n  toolManager.registerTool('lasso', {\n    tool: 'lasso.selection',\n    dragging: 'lasso'\n  });\n\n  eventBus.on('lasso.selection.end', function(event) {\n    var target = event.originalEvent.target;\n\n    // only reactive on diagram click\n    // on some occasions, event.hover is not set and we have to check if the target is an svg\n    if (!event.hover && !(target instanceof SVGElement)) {\n      return;\n    }\n\n    eventBus.once('lasso.selection.ended', function() {\n      self.activateLasso(event.originalEvent, true);\n    });\n  });\n\n  // lasso interaction implementation\n\n  eventBus.on('lasso.end', 0, function(event) {\n\n    var context = event.context;\n\n    var bbox = toBBox(event);\n\n    var elements = elementRegistry.filter(function(element) {\n      return element;\n    });\n\n    var add = hasSecondaryModifier(event);\n\n    self.select(elements, bbox, add ? context.selection : []);\n  });\n\n  eventBus.on('lasso.start', function(event) {\n\n    var context = event.context;\n\n    context.bbox = toBBox(event);\n    visuals.create(context);\n\n    context.selection = selection.get();\n  });\n\n  eventBus.on('lasso.move', function(event) {\n\n    var context = event.context;\n\n    context.bbox = toBBox(event);\n    visuals.update(context);\n  });\n\n  eventBus.on('lasso.cleanup', function(event) {\n\n    var context = event.context;\n\n    visuals.remove(context);\n  });\n\n\n  // event integration\n\n  eventBus.on('element.mousedown', 1500, function(event) {\n\n    if (!hasSecondaryModifier(event)) {\n      return;\n    }\n\n    self.activateLasso(event.originalEvent);\n\n    // we've handled the event\n    return true;\n  });\n}\n\nLassoTool.$inject = [\n  'eventBus',\n  'canvas',\n  'dragging',\n  'elementRegistry',\n  'selection',\n  'toolManager',\n  'mouse'\n];\n\n/**\n * Activate lasso.\n *\n * @param {MouseEvent} event\n * @param {boolean} [autoActivate=false]\n */\nLassoTool.prototype.activateLasso = function(event, autoActivate) {\n\n  this._dragging.init(event, 'lasso', {\n    autoActivate: autoActivate,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    }\n  });\n};\n\n/**\n * Activate selection.\n *\n * @param {MouseEvent} event\n * @param {boolean} [autoActivate=false]\n */\nLassoTool.prototype.activateSelection = function(event, autoActivate) {\n\n  this._dragging.init(event, 'lasso.selection', {\n    trapClick: false,\n    autoActivate: autoActivate,\n    cursor: LASSO_TOOL_CURSOR,\n    data: {\n      context: {}\n    },\n    keepSelection: true\n  });\n};\n\n/**\n * Select elements within the given bounds.\n *\n * @param {Element[]} elements\n * @param {Rect} bbox\n * @param {Element[]} [previousSelection]\n */\nLassoTool.prototype.select = function(elements, bbox, previousSelection = []) {\n  var selectedElements = getEnclosedElements(elements, bbox);\n\n  this._selection.select([\n    ...previousSelection,\n    ...values(selectedElements)\n  ]);\n};\n\n/**\n * Toggle the lasso tool.\n */\nLassoTool.prototype.toggle = function() {\n  if (this.isActive()) {\n    return this._dragging.cancel();\n  }\n\n  var mouseEvent = this._mouse.getLastMoveEvent();\n\n  this.activateSelection(mouseEvent, !!mouseEvent);\n};\n\n/**\n * Check if the lasso tool is active.\n *\n * @returns {boolean}\n */\nLassoTool.prototype.isActive = function() {\n  var context = this._dragging.context();\n\n  return context && /^lasso/.test(context.prefix);\n};\n\n\nfunction toBBox(event) {\n\n  var start = {\n\n    x: event.x - event.dx,\n    y: event.y - event.dy\n  };\n\n  var end = {\n    x: event.x,\n    y: event.y\n  };\n\n  var bbox;\n\n  if ((start.x <= end.x && start.y < end.y) ||\n      (start.x < end.x && start.y <= end.y)) {\n\n    bbox = {\n      x: start.x,\n      y: start.y,\n      width:  end.x - start.x,\n      height: end.y - start.y\n    };\n  } else if ((start.x >= end.x && start.y < end.y) ||\n             (start.x > end.x && start.y <= end.y)) {\n\n    bbox = {\n      x: end.x,\n      y: start.y,\n      width:  start.x - end.x,\n      height: end.y - start.y\n    };\n  } else if ((start.x <= end.x && start.y > end.y) ||\n             (start.x < end.x && start.y >= end.y)) {\n\n    bbox = {\n      x: start.x,\n      y: end.y,\n      width:  end.x - start.x,\n      height: start.y - end.y\n    };\n  } else if ((start.x >= end.x && start.y > end.y) ||\n             (start.x > end.x && start.y >= end.y)) {\n\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width:  start.x - end.x,\n      height: start.y - end.y\n    };\n  } else {\n\n    bbox = {\n      x: end.x,\n      y: end.y,\n      width:  0,\n      height: 0\n    };\n  }\n  return bbox;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}