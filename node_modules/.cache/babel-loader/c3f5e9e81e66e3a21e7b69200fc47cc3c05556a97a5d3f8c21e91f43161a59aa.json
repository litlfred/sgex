{"ast":null,"code":"/**\n * DAK Compliance Service\n * \n * Provides comprehensive validation for DAK components with support for error, warning, and info levels.\n * Designed to work in multiple environments: React client-side, command-line, and IDE integration.\n */class DAKComplianceService{constructor(){this.validators=new Map();this.initializeDefaultValidators();}/**\n   * Initialize default validators for common DAK file types\n   */initializeDefaultValidators(){// XML file validators (general)\nthis.addValidator('xml','xml-well-formed',{level:'error',description:'XML files must be well-formed',validator:this.validateXMLWellFormed.bind(this)});// BPMN file validators\nthis.addValidator('bpmn','xml-well-formed',{level:'error',description:'BPMN files must be well-formed XML',validator:this.validateXMLWellFormed.bind(this)});this.addValidator('bpmn','bpmn-namespace',{level:'error',description:'BPMN files must use correct BPMN 2.0 namespace',validator:this.validateBPMNNamespace.bind(this)});this.addValidator('bpmn','has-start-event',{level:'warning',description:'BPMN process should have at least one start event',validator:this.validateBPMNStartEvent.bind(this)});// DMN file validators\nthis.addValidator('dmn','xml-well-formed',{level:'error',description:'DMN files must be well-formed XML',validator:this.validateXMLWellFormed.bind(this)});this.addValidator('dmn','dmn-namespace',{level:'error',description:'DMN files must use correct DMN 1.3 namespace',validator:this.validateDMNNamespace.bind(this)});// JSON file validators\nthis.addValidator('json','json-valid',{level:'error',description:'JSON files must be valid JSON',validator:this.validateJSONSyntax.bind(this)});// FHIR resource validators\nthis.addValidator('json','fhir-resource-type',{level:'info',description:'FHIR resources should have valid resourceType',validator:this.validateFHIRResourceType.bind(this)});// General file validators\nthis.addValidator('*','file-size-limit',{level:'warning',description:'Files should be under 1MB for optimal performance',validator:this.validateFileSize.bind(this)});this.addValidator('*','filename-conventions',{level:'info',description:'Files should follow naming conventions',validator:this.validateFilenameConventions.bind(this)});// WHO SMART Guidelines specific validators\nthis.addValidator('yaml','sushi-config-valid',{level:'error',description:'sushi-config.yaml must be valid and contain required fields',validator:this.validateSushiConfig.bind(this)});}/**\n   * Add a new validator\n   */addValidator(fileType,validatorId,config){if(!this.validators.has(fileType)){this.validators.set(fileType,new Map());}this.validators.get(fileType).set(validatorId,config);}/**\n   * Remove a validator\n   */removeValidator(fileType,validatorId){if(this.validators.has(fileType)){this.validators.get(fileType).delete(validatorId);}}/**\n   * Validate a single file\n   */async validateFile(filePath,content){const results=[];const fileExtension=this.getFileExtension(filePath);const fileName=this.getFileName(filePath);// Get validators for this file type and universal validators\nconst typeValidators=this.validators.get(fileExtension)||new Map();const universalValidators=this.validators.get('*')||new Map();// Run type-specific validators\nfor(const[validatorId,config]of typeValidators){try{const result=await config.validator(filePath,content,fileName);if(result){results.push({validatorId,level:config.level,description:config.description,...result});}}catch(error){results.push({validatorId,level:'error',description:'Validator execution failed',message:error.message,filePath});}}// Run universal validators\nfor(const[validatorId,config]of universalValidators){try{const result=await config.validator(filePath,content,fileName);if(result){results.push({validatorId,level:config.level,description:config.description,...result});}}catch(error){results.push({validatorId,level:'error',description:'Validator execution failed',message:error.message,filePath});}}return results;}/**\n   * Validate entire staging ground\n   */async validateStagingGround(stagingGround){const results={summary:{error:0,warning:0,info:0},files:{},validatedAt:Date.now()};for(const file of stagingGround.files){const fileResults=await this.validateFile(file.path,file.content);results.files[file.path]=fileResults;// Update summary counts\nfileResults.forEach(result=>{if(result.level==='error')results.summary.error++;else if(result.level==='warning')results.summary.warning++;else if(result.level==='info')results.summary.info++;});}return results;}/**\n   * Check if staging ground can be saved (no error-level violations)\n   */async canSave(stagingGround){const validation=await this.validateStagingGround(stagingGround);return validation.summary.error===0;}// Validator implementations\nasync validateXMLWellFormed(filePath,content){try{const parser=new DOMParser();const doc=parser.parseFromString(content,'text/xml');const parserError=doc.querySelector('parsererror');if(parserError){return{message:'XML is not well-formed: '+parserError.textContent,filePath};}return null;}catch(error){return{message:'Failed to parse XML: '+error.message,filePath};}}async validateBPMNNamespace(filePath,content){if(!content.includes('xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\"')){return{message:'BPMN file missing correct BPMN 2.0 namespace declaration',filePath,suggestion:'Add xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" to root element'};}return null;}async validateBPMNStartEvent(filePath,content){if(!content.includes('<startEvent')&&!content.includes('<bpmn:startEvent')){return{message:'BPMN process should contain at least one start event',filePath,suggestion:'Add a start event to begin the process flow'};}return null;}async validateDMNNamespace(filePath,content){if(!content.includes('xmlns:dmn=\"https://www.omg.org/spec/DMN/20191111/MODEL/\"')){return{message:'DMN file missing correct DMN 1.3 namespace declaration',filePath,suggestion:'Add xmlns:dmn=\"https://www.omg.org/spec/DMN/20191111/MODEL/\" to root element'};}return null;}async validateJSONSyntax(filePath,content){try{JSON.parse(content);return null;}catch(error){return{message:'Invalid JSON syntax: '+error.message,filePath};}}async validateFHIRResourceType(filePath,content){try{const json=JSON.parse(content);const validResourceTypes=['StructureDefinition','ValueSet','CodeSystem','ConceptMap','Questionnaire','PlanDefinition','ActivityDefinition','Measure','Library','ImplementationGuide','Bundle','Patient','Practitioner'];if(json.resourceType&&!validResourceTypes.includes(json.resourceType)){return{message:`Unknown FHIR resourceType: ${json.resourceType}`,filePath,suggestion:'Verify the resourceType is correct for FHIR R4'};}return null;}catch(error){// Not JSON, skip this validator\nreturn null;}}async validateFileSize(filePath,content){const sizeInBytes=new Blob([content]).size;const maxSize=1024*1024;// 1MB\nif(sizeInBytes>maxSize){return{message:`File size (${(sizeInBytes/1024/1024).toFixed(1)}MB) exceeds recommended limit of 1MB`,filePath,suggestion:'Consider breaking large files into smaller components'};}return null;}async validateFilenameConventions(filePath,content){const fileName=this.getFileName(filePath);const issues=[];// Check for spaces in filename\nif(fileName.includes(' ')){issues.push('avoid spaces in filenames');}// Check for special characters\nif(/[<>:\"|?*]/.test(fileName)){issues.push('avoid special characters (<>:\"|?*)');}// Check for very long names\nif(fileName.length>100){issues.push('filename is very long (>100 characters)');}if(issues.length>0){return{message:`Filename convention issues: ${issues.join(', ')}`,filePath,suggestion:'Use lowercase letters, numbers, hyphens, and underscores'};}return null;}async validateSushiConfig(filePath,content){if(!filePath.endsWith('sushi-config.yaml')){return null;}try{// Basic YAML parsing (would need js-yaml library for full implementation)\nconst lines=content.split('\\n');const hasName=lines.some(line=>line.trim().startsWith('name:'));const hasId=lines.some(line=>line.trim().startsWith('id:'));const hasDependencies=lines.some(line=>line.trim().startsWith('dependencies:'));const issues=[];if(!hasName)issues.push('missing \"name\" field');if(!hasId)issues.push('missing \"id\" field');if(!hasDependencies)issues.push('missing \"dependencies\" section');if(issues.length>0){return{message:`sushi-config.yaml validation issues: ${issues.join(', ')}`,filePath,suggestion:'Ensure required fields are present for FHIR IG'};}return null;}catch(error){return{message:'Failed to validate sushi-config.yaml: '+error.message,filePath};}}// Utility methods\ngetFileExtension(filePath){const parts=filePath.split('.');return parts.length>1?parts[parts.length-1].toLowerCase():'';}getFileName(filePath){return filePath.split('/').pop()||filePath;}/**\n   * Format validation results for display\n   */formatValidationResults(validation){const formatted={canSave:validation.summary.error===0,summary:validation.summary,files:[]};Object.entries(validation.files).forEach(_ref=>{let[filePath,results]=_ref;if(results.length>0){formatted.files.push({path:filePath,issues:results.map(result=>({level:result.level,message:result.message,description:result.description,suggestion:result.suggestion}))});}});return formatted;}/**\n   * Get validation summary for UI display\n   */getValidationSummary(validation){return{error:validation.summary.error,warning:validation.summary.warning,info:validation.summary.info,canSave:validation.summary.error===0,hasIssues:validation.summary.error+validation.summary.warning+validation.summary.info>0};}}// Create singleton instance\nconst dakComplianceService=new DAKComplianceService();export default dakComplianceService;","map":{"version":3,"names":["DAKComplianceService","constructor","validators","Map","initializeDefaultValidators","addValidator","level","description","validator","validateXMLWellFormed","bind","validateBPMNNamespace","validateBPMNStartEvent","validateDMNNamespace","validateJSONSyntax","validateFHIRResourceType","validateFileSize","validateFilenameConventions","validateSushiConfig","fileType","validatorId","config","has","set","get","removeValidator","delete","validateFile","filePath","content","results","fileExtension","getFileExtension","fileName","getFileName","typeValidators","universalValidators","result","push","error","message","validateStagingGround","stagingGround","summary","warning","info","files","validatedAt","Date","now","file","fileResults","path","forEach","canSave","validation","parser","DOMParser","doc","parseFromString","parserError","querySelector","textContent","includes","suggestion","JSON","parse","json","validResourceTypes","resourceType","sizeInBytes","Blob","size","maxSize","toFixed","issues","test","length","join","endsWith","lines","split","hasName","some","line","trim","startsWith","hasId","hasDependencies","parts","toLowerCase","pop","formatValidationResults","formatted","Object","entries","_ref","map","getValidationSummary","hasIssues","dakComplianceService"],"sources":["/home/runner/work/sgex/sgex/src/services/dakComplianceService.js"],"sourcesContent":["/**\n * DAK Compliance Service\n * \n * Provides comprehensive validation for DAK components with support for error, warning, and info levels.\n * Designed to work in multiple environments: React client-side, command-line, and IDE integration.\n */\n\nclass DAKComplianceService {\n  constructor() {\n    this.validators = new Map();\n    this.initializeDefaultValidators();\n  }\n\n  /**\n   * Initialize default validators for common DAK file types\n   */\n  initializeDefaultValidators() {\n    // XML file validators (general)\n    this.addValidator('xml', 'xml-well-formed', {\n      level: 'error',\n      description: 'XML files must be well-formed',\n      validator: this.validateXMLWellFormed.bind(this)\n    });\n\n    // BPMN file validators\n    this.addValidator('bpmn', 'xml-well-formed', {\n      level: 'error',\n      description: 'BPMN files must be well-formed XML',\n      validator: this.validateXMLWellFormed.bind(this)\n    });\n\n    this.addValidator('bpmn', 'bpmn-namespace', {\n      level: 'error',\n      description: 'BPMN files must use correct BPMN 2.0 namespace',\n      validator: this.validateBPMNNamespace.bind(this)\n    });\n\n    this.addValidator('bpmn', 'has-start-event', {\n      level: 'warning',\n      description: 'BPMN process should have at least one start event',\n      validator: this.validateBPMNStartEvent.bind(this)\n    });\n\n    // DMN file validators\n    this.addValidator('dmn', 'xml-well-formed', {\n      level: 'error',\n      description: 'DMN files must be well-formed XML',\n      validator: this.validateXMLWellFormed.bind(this)\n    });\n\n    this.addValidator('dmn', 'dmn-namespace', {\n      level: 'error',\n      description: 'DMN files must use correct DMN 1.3 namespace',\n      validator: this.validateDMNNamespace.bind(this)\n    });\n\n    // JSON file validators\n    this.addValidator('json', 'json-valid', {\n      level: 'error',\n      description: 'JSON files must be valid JSON',\n      validator: this.validateJSONSyntax.bind(this)\n    });\n\n    // FHIR resource validators\n    this.addValidator('json', 'fhir-resource-type', {\n      level: 'info',\n      description: 'FHIR resources should have valid resourceType',\n      validator: this.validateFHIRResourceType.bind(this)\n    });\n\n    // General file validators\n    this.addValidator('*', 'file-size-limit', {\n      level: 'warning',\n      description: 'Files should be under 1MB for optimal performance',\n      validator: this.validateFileSize.bind(this)\n    });\n\n    this.addValidator('*', 'filename-conventions', {\n      level: 'info',\n      description: 'Files should follow naming conventions',\n      validator: this.validateFilenameConventions.bind(this)\n    });\n\n    // WHO SMART Guidelines specific validators\n    this.addValidator('yaml', 'sushi-config-valid', {\n      level: 'error',\n      description: 'sushi-config.yaml must be valid and contain required fields',\n      validator: this.validateSushiConfig.bind(this)\n    });\n  }\n\n  /**\n   * Add a new validator\n   */\n  addValidator(fileType, validatorId, config) {\n    if (!this.validators.has(fileType)) {\n      this.validators.set(fileType, new Map());\n    }\n    this.validators.get(fileType).set(validatorId, config);\n  }\n\n  /**\n   * Remove a validator\n   */\n  removeValidator(fileType, validatorId) {\n    if (this.validators.has(fileType)) {\n      this.validators.get(fileType).delete(validatorId);\n    }\n  }\n\n  /**\n   * Validate a single file\n   */\n  async validateFile(filePath, content) {\n    const results = [];\n    const fileExtension = this.getFileExtension(filePath);\n    const fileName = this.getFileName(filePath);\n\n    // Get validators for this file type and universal validators\n    const typeValidators = this.validators.get(fileExtension) || new Map();\n    const universalValidators = this.validators.get('*') || new Map();\n\n    // Run type-specific validators\n    for (const [validatorId, config] of typeValidators) {\n      try {\n        const result = await config.validator(filePath, content, fileName);\n        if (result) {\n          results.push({\n            validatorId,\n            level: config.level,\n            description: config.description,\n            ...result\n          });\n        }\n      } catch (error) {\n        results.push({\n          validatorId,\n          level: 'error',\n          description: 'Validator execution failed',\n          message: error.message,\n          filePath\n        });\n      }\n    }\n\n    // Run universal validators\n    for (const [validatorId, config] of universalValidators) {\n      try {\n        const result = await config.validator(filePath, content, fileName);\n        if (result) {\n          results.push({\n            validatorId,\n            level: config.level,\n            description: config.description,\n            ...result\n          });\n        }\n      } catch (error) {\n        results.push({\n          validatorId,\n          level: 'error',\n          description: 'Validator execution failed',\n          message: error.message,\n          filePath\n        });\n      }\n    }\n\n    return results;\n  }\n\n  /**\n   * Validate entire staging ground\n   */\n  async validateStagingGround(stagingGround) {\n    const results = {\n      summary: { error: 0, warning: 0, info: 0 },\n      files: {},\n      validatedAt: Date.now()\n    };\n\n    for (const file of stagingGround.files) {\n      const fileResults = await this.validateFile(file.path, file.content);\n      results.files[file.path] = fileResults;\n\n      // Update summary counts\n      fileResults.forEach(result => {\n        if (result.level === 'error') results.summary.error++;\n        else if (result.level === 'warning') results.summary.warning++;\n        else if (result.level === 'info') results.summary.info++;\n      });\n    }\n\n    return results;\n  }\n\n  /**\n   * Check if staging ground can be saved (no error-level violations)\n   */\n  async canSave(stagingGround) {\n    const validation = await this.validateStagingGround(stagingGround);\n    return validation.summary.error === 0;\n  }\n\n  // Validator implementations\n\n  async validateXMLWellFormed(filePath, content) {\n    try {\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(content, 'text/xml');\n      const parserError = doc.querySelector('parsererror');\n      \n      if (parserError) {\n        return {\n          message: 'XML is not well-formed: ' + parserError.textContent,\n          filePath\n        };\n      }\n      return null;\n    } catch (error) {\n      return {\n        message: 'Failed to parse XML: ' + error.message,\n        filePath\n      };\n    }\n  }\n\n  async validateBPMNNamespace(filePath, content) {\n    if (!content.includes('xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\"')) {\n      return {\n        message: 'BPMN file missing correct BPMN 2.0 namespace declaration',\n        filePath,\n        suggestion: 'Add xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" to root element'\n      };\n    }\n    return null;\n  }\n\n  async validateBPMNStartEvent(filePath, content) {\n    if (!content.includes('<startEvent') && !content.includes('<bpmn:startEvent')) {\n      return {\n        message: 'BPMN process should contain at least one start event',\n        filePath,\n        suggestion: 'Add a start event to begin the process flow'\n      };\n    }\n    return null;\n  }\n\n  async validateDMNNamespace(filePath, content) {\n    if (!content.includes('xmlns:dmn=\"https://www.omg.org/spec/DMN/20191111/MODEL/\"')) {\n      return {\n        message: 'DMN file missing correct DMN 1.3 namespace declaration',\n        filePath,\n        suggestion: 'Add xmlns:dmn=\"https://www.omg.org/spec/DMN/20191111/MODEL/\" to root element'\n      };\n    }\n    return null;\n  }\n\n  async validateJSONSyntax(filePath, content) {\n    try {\n      JSON.parse(content);\n      return null;\n    } catch (error) {\n      return {\n        message: 'Invalid JSON syntax: ' + error.message,\n        filePath\n      };\n    }\n  }\n\n  async validateFHIRResourceType(filePath, content) {\n    try {\n      const json = JSON.parse(content);\n      const validResourceTypes = [\n        'StructureDefinition', 'ValueSet', 'CodeSystem', 'ConceptMap',\n        'Questionnaire', 'PlanDefinition', 'ActivityDefinition', 'Measure',\n        'Library', 'ImplementationGuide', 'Bundle', 'Patient', 'Practitioner'\n      ];\n\n      if (json.resourceType && !validResourceTypes.includes(json.resourceType)) {\n        return {\n          message: `Unknown FHIR resourceType: ${json.resourceType}`,\n          filePath,\n          suggestion: 'Verify the resourceType is correct for FHIR R4'\n        };\n      }\n      return null;\n    } catch (error) {\n      // Not JSON, skip this validator\n      return null;\n    }\n  }\n\n  async validateFileSize(filePath, content) {\n    const sizeInBytes = new Blob([content]).size;\n    const maxSize = 1024 * 1024; // 1MB\n\n    if (sizeInBytes > maxSize) {\n      return {\n        message: `File size (${(sizeInBytes / 1024 / 1024).toFixed(1)}MB) exceeds recommended limit of 1MB`,\n        filePath,\n        suggestion: 'Consider breaking large files into smaller components'\n      };\n    }\n    return null;\n  }\n\n  async validateFilenameConventions(filePath, content) {\n    const fileName = this.getFileName(filePath);\n    const issues = [];\n\n    // Check for spaces in filename\n    if (fileName.includes(' ')) {\n      issues.push('avoid spaces in filenames');\n    }\n\n    // Check for special characters\n    if (/[<>:\"|?*]/.test(fileName)) {\n      issues.push('avoid special characters (<>:\"|?*)');\n    }\n\n    // Check for very long names\n    if (fileName.length > 100) {\n      issues.push('filename is very long (>100 characters)');\n    }\n\n    if (issues.length > 0) {\n      return {\n        message: `Filename convention issues: ${issues.join(', ')}`,\n        filePath,\n        suggestion: 'Use lowercase letters, numbers, hyphens, and underscores'\n      };\n    }\n    return null;\n  }\n\n  async validateSushiConfig(filePath, content) {\n    if (!filePath.endsWith('sushi-config.yaml')) {\n      return null;\n    }\n\n    try {\n      // Basic YAML parsing (would need js-yaml library for full implementation)\n      const lines = content.split('\\n');\n      const hasName = lines.some(line => line.trim().startsWith('name:'));\n      const hasId = lines.some(line => line.trim().startsWith('id:'));\n      const hasDependencies = lines.some(line => line.trim().startsWith('dependencies:'));\n\n      const issues = [];\n      if (!hasName) issues.push('missing \"name\" field');\n      if (!hasId) issues.push('missing \"id\" field');\n      if (!hasDependencies) issues.push('missing \"dependencies\" section');\n\n      if (issues.length > 0) {\n        return {\n          message: `sushi-config.yaml validation issues: ${issues.join(', ')}`,\n          filePath,\n          suggestion: 'Ensure required fields are present for FHIR IG'\n        };\n      }\n      return null;\n    } catch (error) {\n      return {\n        message: 'Failed to validate sushi-config.yaml: ' + error.message,\n        filePath\n      };\n    }\n  }\n\n  // Utility methods\n\n  getFileExtension(filePath) {\n    const parts = filePath.split('.');\n    return parts.length > 1 ? parts[parts.length - 1].toLowerCase() : '';\n  }\n\n  getFileName(filePath) {\n    return filePath.split('/').pop() || filePath;\n  }\n\n  /**\n   * Format validation results for display\n   */\n  formatValidationResults(validation) {\n    const formatted = {\n      canSave: validation.summary.error === 0,\n      summary: validation.summary,\n      files: []\n    };\n\n    Object.entries(validation.files).forEach(([filePath, results]) => {\n      if (results.length > 0) {\n        formatted.files.push({\n          path: filePath,\n          issues: results.map(result => ({\n            level: result.level,\n            message: result.message,\n            description: result.description,\n            suggestion: result.suggestion\n          }))\n        });\n      }\n    });\n\n    return formatted;\n  }\n\n  /**\n   * Get validation summary for UI display\n   */\n  getValidationSummary(validation) {\n    return {\n      error: validation.summary.error,\n      warning: validation.summary.warning,\n      info: validation.summary.info,\n      canSave: validation.summary.error === 0,\n      hasIssues: validation.summary.error + validation.summary.warning + validation.summary.info > 0\n    };\n  }\n}\n\n// Create singleton instance\nconst dakComplianceService = new DAKComplianceService();\n\nexport default dakComplianceService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}