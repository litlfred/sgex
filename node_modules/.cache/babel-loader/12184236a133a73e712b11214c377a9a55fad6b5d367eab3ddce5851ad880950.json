{"ast":null,"code":"import React,{useEffect}from'react';import{useLocation,useNavigate,useParams}from'react-router-dom';import{PageLayout}from'./framework';import{handleNavigationClick}from'../utils/navigationUtils';import'./DAKActionSelection.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DAKActionSelection=()=>{const location=useLocation();const navigate=useNavigate();const{user:userParam}=useParams();const{profile}=location.state||{};// Validate user parameter and profile consistency\nuseEffect(()=>{// If no user parameter in URL and no profile in state, redirect to landing\nif(!userParam&&!profile){navigate('/');return;}// If user parameter exists but no profile - redirect to landing\nif(userParam&&!profile){navigate('/');return;}// If user parameter exists and profile exists but they don't match - redirect to landing\nif(userParam&&profile&&profile.login!==userParam){navigate('/');return;}// If profile exists but no user parameter, redirect to include user in URL\nif(profile&&!userParam){navigate(`/dak-action/${profile.login}`,{state:{profile},replace:true});return;}},[userParam,profile,navigate]);const dakActions=[{id:'edit',title:'Edit Existing DAK',description:'Select and modify an existing DAK that you have permission to edit. Changes will be made directly to the repository.',icon:'âœï¸',color:'#0078d4'},{id:'fork',title:'Fork Existing DAK',description:'Create a copy of an existing DAK in your own organization or account. You will be able to modify the forked version independently.',icon:'ðŸ´',color:'#107c10'},{id:'create',title:'Create New DAK',description:'Create a new DAK from the WHO SMART Guidelines template (smart-ig-empty). You\\'ll configure basic parameters and start with a clean template.',icon:'âœ¨',color:'#881798'}];const handleActionSelect=(event,actionId)=>{// Navigate directly to the DAK selection with the chosen action and user parameter\nconst navigationState={profile,action:actionId};handleNavigationClick(event,`/dak-selection/${profile.login}`,navigate,navigationState);};const handleBackToProfile=()=>{navigate('/',{state:{profile}});};if(!profile){return/*#__PURE__*/_jsx(PageLayout,{pageName:\"dak-action-selection\",children:/*#__PURE__*/_jsx(\"div\",{children:\"Redirecting...\"})});}return/*#__PURE__*/_jsx(PageLayout,{pageName:\"dak-action-selection\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"action-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToProfile,className:\"breadcrumb-link\",children:\"Select Profile\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-current\",children:\"Choose DAK Action\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"action-intro\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manage a DAK\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Choose how you would like to work with a WHO SMART Guidelines Digital Adaptation Kit (DAK). Each option provides different workflows for DAK management and editing.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"actions-grid\",children:dakActions.map(action=>/*#__PURE__*/_jsxs(\"div\",{className:`action-card`,onClick:event=>handleActionSelect(event,action.id),style:{'--action-color':action.color},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"action-header-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-icon\",style:{color:action.color},children:action.icon}),/*#__PURE__*/_jsx(\"h3\",{children:action.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"action-description\",children:/*#__PURE__*/_jsx(\"p\",{children:action.description})}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-workflow\",children:[action.id==='edit'&&/*#__PURE__*/_jsxs(\"div\",{className:\"workflow-steps\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"step\",children:\"1. Select DAK\"}),/*#__PURE__*/_jsx(\"span\",{className:\"step\",children:\"2. Edit Components\"})]}),action.id==='fork'&&/*#__PURE__*/_jsxs(\"div\",{className:\"workflow-steps\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"step\",children:\"1. Select Source DAK\"}),/*#__PURE__*/_jsx(\"span\",{className:\"step\",children:\"2. Select Destination\"}),/*#__PURE__*/_jsx(\"span\",{className:\"step\",children:\"3. Edit Components\"})]}),action.id==='create'&&/*#__PURE__*/_jsxs(\"div\",{className:\"workflow-steps\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"step\",children:\"1. Select Template\"}),/*#__PURE__*/_jsx(\"span\",{className:\"step\",children:\"2. Select Destination\"}),/*#__PURE__*/_jsx(\"span\",{className:\"step\",children:\"3. Configure DAK\"}),/*#__PURE__*/_jsx(\"span\",{className:\"step\",children:\"4. Edit Components\"})]})]})]},action.id))})]})]})});};export default DAKActionSelection;","map":{"version":3,"names":["React","useEffect","useLocation","useNavigate","useParams","PageLayout","handleNavigationClick","jsx","_jsx","jsxs","_jsxs","DAKActionSelection","location","navigate","user","userParam","profile","state","login","replace","dakActions","id","title","description","icon","color","handleActionSelect","event","actionId","navigationState","action","handleBackToProfile","pageName","children","className","onClick","map","style"],"sources":["/home/runner/work/sgex/sgex/src/components/DAKActionSelection.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport { PageLayout } from './framework';\nimport { handleNavigationClick } from '../utils/navigationUtils';\nimport './DAKActionSelection.css';\n\nconst DAKActionSelection = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { user: userParam } = useParams();\n  \n  const { profile } = location.state || {};\n\n  // Validate user parameter and profile consistency\n  useEffect(() => {\n    // If no user parameter in URL and no profile in state, redirect to landing\n    if (!userParam && !profile) {\n      navigate('/');\n      return;\n    }\n    \n    // If user parameter exists but no profile - redirect to landing\n    if (userParam && !profile) {\n      navigate('/');\n      return;\n    }\n    \n    // If user parameter exists and profile exists but they don't match - redirect to landing\n    if (userParam && profile && profile.login !== userParam) {\n      navigate('/');\n      return;\n    }\n    \n    // If profile exists but no user parameter, redirect to include user in URL\n    if (profile && !userParam) {\n      navigate(`/dak-action/${profile.login}`, { \n        state: { profile },\n        replace: true \n      });\n      return;\n    }\n  }, [userParam, profile, navigate]);\n\n  const dakActions = [\n    {\n      id: 'edit',\n      title: 'Edit Existing DAK',\n      description: 'Select and modify an existing DAK that you have permission to edit. Changes will be made directly to the repository.',\n      icon: 'âœï¸',\n      color: '#0078d4'\n    },\n    {\n      id: 'fork', \n      title: 'Fork Existing DAK',\n      description: 'Create a copy of an existing DAK in your own organization or account. You will be able to modify the forked version independently.',\n      icon: 'ðŸ´',\n      color: '#107c10'\n    },\n    {\n      id: 'create',\n      title: 'Create New DAK',\n      description: 'Create a new DAK from the WHO SMART Guidelines template (smart-ig-empty). You\\'ll configure basic parameters and start with a clean template.',\n      icon: 'âœ¨',\n      color: '#881798'\n    }\n  ];\n\n  const handleActionSelect = (event, actionId) => {\n    // Navigate directly to the DAK selection with the chosen action and user parameter\n    const navigationState = { \n      profile, \n      action: actionId \n    };\n    \n    handleNavigationClick(event, `/dak-selection/${profile.login}`, navigate, navigationState);\n  };\n\n  const handleBackToProfile = () => {\n    navigate('/', { state: { profile } });\n  };\n\n  if (!profile) {\n    return (\n      <PageLayout pageName=\"dak-action-selection\">\n        <div>Redirecting...</div>\n      </PageLayout>\n    );\n  }\n\n  return (\n    <PageLayout pageName=\"dak-action-selection\">\n      <div className=\"action-content\">\n        <div className=\"breadcrumb\">\n          <button onClick={handleBackToProfile} className=\"breadcrumb-link\">\n            Select Profile\n          </button>\n          <span className=\"breadcrumb-separator\">â€º</span>\n          <span className=\"breadcrumb-current\">Choose DAK Action</span>\n        </div>\n\n        <div className=\"action-main\">\n          <div className=\"action-intro\">\n            <h2>Manage a DAK</h2>\n            <p>\n              Choose how you would like to work with a WHO SMART Guidelines Digital Adaptation Kit (DAK). \n              Each option provides different workflows for DAK management and editing.\n            </p>\n          </div>\n\n          <div className=\"actions-grid\">\n            {dakActions.map((action) => (\n              <div \n                key={action.id}\n                className={`action-card`}\n                onClick={(event) => handleActionSelect(event, action.id)}\n                style={{ '--action-color': action.color }}\n              >\n                <div className=\"action-header-content\">\n                  <div className=\"action-icon\" style={{ color: action.color }}>\n                    {action.icon}\n                  </div>\n                  <h3>{action.title}</h3>\n                </div>\n                \n                <div className=\"action-description\">\n                  <p>{action.description}</p>\n                </div>\n\n                <div className=\"action-workflow\">\n                  {action.id === 'edit' && (\n                    <div className=\"workflow-steps\">\n                      <span className=\"step\">1. Select DAK</span>\n                      <span className=\"step\">2. Edit Components</span>\n                    </div>\n                  )}\n                  {action.id === 'fork' && (\n                    <div className=\"workflow-steps\">\n                      <span className=\"step\">1. Select Source DAK</span>\n                      <span className=\"step\">2. Select Destination</span>\n                      <span className=\"step\">3. Edit Components</span>\n                    </div>\n                  )}\n                  {action.id === 'create' && (\n                    <div className=\"workflow-steps\">\n                      <span className=\"step\">1. Select Template</span>\n                      <span className=\"step\">2. Select Destination</span>\n                      <span className=\"step\">3. Configure DAK</span>\n                      <span className=\"step\">4. Edit Components</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default DAKActionSelection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}