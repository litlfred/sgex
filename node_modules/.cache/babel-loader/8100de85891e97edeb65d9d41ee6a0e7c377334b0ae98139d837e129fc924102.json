{"ast":null,"code":"import { assign, forEach, isArray, every } from 'min-dash';\nimport { is } from '../../util/ModelUtil';\nimport { isExpanded, isHorizontal, isEventSubProcess } from '../../util/DiUtil';\nimport { isAny } from '../modeling/util/ModelingUtil';\nimport { getChildLanes } from '../modeling/util/LaneUtil';\nimport { hasPrimaryModifier } from 'diagram-js/lib/util/Mouse';\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPad').default} ContextPad\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../modeling/ElementFactory').default} ElementFactory\n * @typedef {import('../append-preview/AppendPreview').default} AppendPreview\n * @typedef {import('diagram-js/lib/features/connect/Connect').default} Connect\n * @typedef {import('diagram-js/lib/features/create/Create').default} Create\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').default} PopupMenu\n * @typedef {import('diagram-js/lib/features/canvas/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/features/rules/Rules').default} Rules\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n *\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').default<Element>} BaseContextPadProvider\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').ContextPadEntries} ContextPadEntries\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').ContextPadEntry} ContextPadEntry\n *\n * @typedef { { autoPlace?: boolean; } } ContextPadConfig\n */\n\n/**\n * BPMN-specific context pad provider.\n *\n * @implements {BaseContextPadProvider}\n *\n * @param {ContextPadConfig} config\n * @param {Injector} injector\n * @param {EventBus} eventBus\n * @param {ContextPad} contextPad\n * @param {Modeling} modeling\n * @param {ElementFactory} elementFactory\n * @param {Connect} connect\n * @param {Create} create\n * @param {PopupMenu} popupMenu\n * @param {Canvas} canvas\n * @param {Rules} rules\n * @param {Translate} translate\n * @param {AppendPreview} appendPreview\n */\nexport default function ContextPadProvider(config, injector, eventBus, contextPad, modeling, elementFactory, connect, create, popupMenu, canvas, rules, translate, appendPreview) {\n  config = config || {};\n  contextPad.registerProvider(this);\n  this._contextPad = contextPad;\n  this._modeling = modeling;\n  this._elementFactory = elementFactory;\n  this._connect = connect;\n  this._create = create;\n  this._popupMenu = popupMenu;\n  this._canvas = canvas;\n  this._rules = rules;\n  this._translate = translate;\n  this._eventBus = eventBus;\n  this._appendPreview = appendPreview;\n  if (config.autoPlace !== false) {\n    this._autoPlace = injector.get('autoPlace', false);\n  }\n  eventBus.on('create.end', 250, function (event) {\n    var context = event.context,\n      shape = context.shape;\n    if (!hasPrimaryModifier(event) || !contextPad.isOpen(shape)) {\n      return;\n    }\n    var entries = contextPad.getEntries(shape);\n    if (entries.replace) {\n      entries.replace.action.click(event, shape);\n    }\n  });\n  eventBus.on('contextPad.close', function () {\n    appendPreview.cleanUp();\n  });\n}\nContextPadProvider.$inject = ['config.contextPad', 'injector', 'eventBus', 'contextPad', 'modeling', 'elementFactory', 'connect', 'create', 'popupMenu', 'canvas', 'rules', 'translate', 'appendPreview'];\n\n/**\n * @param {Element[]} elements\n *\n * @return {ContextPadEntries}\n */\nContextPadProvider.prototype.getMultiElementContextPadEntries = function (elements) {\n  var modeling = this._modeling;\n  var actions = {};\n  if (this._isDeleteAllowed(elements)) {\n    assign(actions, {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: this._translate('Delete'),\n        action: {\n          click: function (event, elements) {\n            modeling.removeElements(elements.slice());\n          }\n        }\n      }\n    });\n  }\n  return actions;\n};\n\n/**\n * @param {Element[]} elements\n *\n * @return {boolean}\n */\nContextPadProvider.prototype._isDeleteAllowed = function (elements) {\n  var baseAllowed = this._rules.allowed('elements.delete', {\n    elements: elements\n  });\n  if (isArray(baseAllowed)) {\n    return every(elements, el => baseAllowed.includes(el));\n  }\n  return baseAllowed;\n};\n\n/**\n * @param {Element} element\n *\n * @return {ContextPadEntries}\n */\nContextPadProvider.prototype.getContextPadEntries = function (element) {\n  var contextPad = this._contextPad,\n    modeling = this._modeling,\n    elementFactory = this._elementFactory,\n    connect = this._connect,\n    create = this._create,\n    popupMenu = this._popupMenu,\n    autoPlace = this._autoPlace,\n    translate = this._translate,\n    appendPreview = this._appendPreview;\n  var actions = {};\n  if (element.type === 'label') {\n    if (this._isDeleteAllowed([element])) {\n      assign(actions, deleteAction());\n    }\n    return actions;\n  }\n  var businessObject = element.businessObject;\n  function startConnect(event, element) {\n    connect.start(event, element);\n  }\n  function removeElement(e, element) {\n    modeling.removeElements([element]);\n  }\n  function deleteAction() {\n    return {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: translate('Delete'),\n        action: {\n          click: removeElement\n        }\n      }\n    };\n  }\n  function getReplaceMenuPosition(element) {\n    var Y_OFFSET = 5;\n    var pad = contextPad.getPad(element).html;\n    var padRect = pad.getBoundingClientRect();\n    var pos = {\n      x: padRect.left,\n      y: padRect.bottom + Y_OFFSET\n    };\n    return pos;\n  }\n\n  /**\n   * Create an append action.\n   *\n   * @param {string} type\n   * @param {string} className\n   * @param {string} title\n   * @param {Object} [options]\n   *\n   * @return {ContextPadEntry}\n   */\n  function appendAction(type, className, title, options) {\n    function appendStart(event, element) {\n      var shape = elementFactory.createShape(assign({\n        type: type\n      }, options));\n      create.start(event, shape, {\n        source: element\n      });\n    }\n    var append = autoPlace ? function (_, element) {\n      var shape = elementFactory.createShape(assign({\n        type: type\n      }, options));\n      autoPlace.append(element, shape);\n    } : appendStart;\n    var previewAppend = autoPlace ? function (_, element) {\n      // mouseover\n      appendPreview.create(element, type, options);\n      return () => {\n        // mouseout\n        appendPreview.cleanUp();\n      };\n    } : null;\n    return {\n      group: 'model',\n      className: className,\n      title: title,\n      action: {\n        dragstart: appendStart,\n        click: append,\n        hover: previewAppend\n      }\n    };\n  }\n  function splitLaneHandler(count) {\n    return function (_, element) {\n      // actual split\n      modeling.splitLane(element, count);\n\n      // refresh context pad after split to\n      // get rid of split icons\n      contextPad.open(element, true);\n    };\n  }\n  if (isAny(businessObject, ['bpmn:Lane', 'bpmn:Participant']) && isExpanded(element)) {\n    var childLanes = getChildLanes(element);\n    assign(actions, {\n      'lane-insert-above': {\n        group: 'lane-insert-above',\n        className: 'bpmn-icon-lane-insert-above',\n        title: translate('Add lane above'),\n        action: {\n          click: function (event, element) {\n            modeling.addLane(element, 'top');\n          }\n        }\n      }\n    });\n    if (childLanes.length < 2) {\n      if (isHorizontal(element) ? element.height >= 120 : element.width >= 120) {\n        assign(actions, {\n          'lane-divide-two': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-two',\n            title: translate('Divide into two lanes'),\n            action: {\n              click: splitLaneHandler(2)\n            }\n          }\n        });\n      }\n      if (isHorizontal(element) ? element.height >= 180 : element.width >= 180) {\n        assign(actions, {\n          'lane-divide-three': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-three',\n            title: translate('Divide into three lanes'),\n            action: {\n              click: splitLaneHandler(3)\n            }\n          }\n        });\n      }\n    }\n    assign(actions, {\n      'lane-insert-below': {\n        group: 'lane-insert-below',\n        className: 'bpmn-icon-lane-insert-below',\n        title: translate('Add lane below'),\n        action: {\n          click: function (event, element) {\n            modeling.addLane(element, 'bottom');\n          }\n        }\n      }\n    });\n  }\n  if (is(businessObject, 'bpmn:FlowNode')) {\n    if (is(businessObject, 'bpmn:EventBasedGateway')) {\n      assign(actions, {\n        'append.receive-task': appendAction('bpmn:ReceiveTask', 'bpmn-icon-receive-task', translate('Append receive task')),\n        'append.message-intermediate-event': appendAction('bpmn:IntermediateCatchEvent', 'bpmn-icon-intermediate-event-catch-message', translate('Append message intermediate catch event'), {\n          eventDefinitionType: 'bpmn:MessageEventDefinition'\n        }),\n        'append.timer-intermediate-event': appendAction('bpmn:IntermediateCatchEvent', 'bpmn-icon-intermediate-event-catch-timer', translate('Append timer intermediate catch event'), {\n          eventDefinitionType: 'bpmn:TimerEventDefinition'\n        }),\n        'append.condition-intermediate-event': appendAction('bpmn:IntermediateCatchEvent', 'bpmn-icon-intermediate-event-catch-condition', translate('Append conditional intermediate catch event'), {\n          eventDefinitionType: 'bpmn:ConditionalEventDefinition'\n        }),\n        'append.signal-intermediate-event': appendAction('bpmn:IntermediateCatchEvent', 'bpmn-icon-intermediate-event-catch-signal', translate('Append signal intermediate catch event'), {\n          eventDefinitionType: 'bpmn:SignalEventDefinition'\n        })\n      });\n    } else if (isEventType(businessObject, 'bpmn:BoundaryEvent', 'bpmn:CompensateEventDefinition')) {\n      assign(actions, {\n        'append.compensation-activity': appendAction('bpmn:Task', 'bpmn-icon-task', translate('Append compensation activity'), {\n          isForCompensation: true\n        })\n      });\n    } else if (!is(businessObject, 'bpmn:EndEvent') && !businessObject.isForCompensation && !isEventType(businessObject, 'bpmn:IntermediateThrowEvent', 'bpmn:LinkEventDefinition') && !isEventSubProcess(businessObject)) {\n      assign(actions, {\n        'append.end-event': appendAction('bpmn:EndEvent', 'bpmn-icon-end-event-none', translate('Append end event')),\n        'append.gateway': appendAction('bpmn:ExclusiveGateway', 'bpmn-icon-gateway-none', translate('Append gateway')),\n        'append.append-task': appendAction('bpmn:Task', 'bpmn-icon-task', translate('Append task')),\n        'append.intermediate-event': appendAction('bpmn:IntermediateThrowEvent', 'bpmn-icon-intermediate-event-none', translate('Append intermediate/boundary event'))\n      });\n    }\n  }\n  if (!popupMenu.isEmpty(element, 'bpmn-replace')) {\n    // Replace menu entry\n    assign(actions, {\n      'replace': {\n        group: 'edit',\n        className: 'bpmn-icon-screw-wrench',\n        title: translate('Change element'),\n        action: {\n          click: function (event, element) {\n            var position = assign(getReplaceMenuPosition(element), {\n              cursor: {\n                x: event.x,\n                y: event.y\n              }\n            });\n            popupMenu.open(element, 'bpmn-replace', position, {\n              title: translate('Change element'),\n              width: 300,\n              search: true\n            });\n          }\n        }\n      }\n    });\n  }\n  if (is(businessObject, 'bpmn:SequenceFlow')) {\n    assign(actions, {\n      'append.text-annotation': appendAction('bpmn:TextAnnotation', 'bpmn-icon-text-annotation', translate('Add text annotation'))\n    });\n  }\n  if (is(businessObject, 'bpmn:MessageFlow')) {\n    assign(actions, {\n      'append.text-annotation': appendAction('bpmn:TextAnnotation', 'bpmn-icon-text-annotation', translate('Add text annotation'))\n    });\n  }\n  if (isAny(businessObject, ['bpmn:FlowNode', 'bpmn:InteractionNode', 'bpmn:DataObjectReference', 'bpmn:DataStoreReference'])) {\n    assign(actions, {\n      'append.text-annotation': appendAction('bpmn:TextAnnotation', 'bpmn-icon-text-annotation', translate('Add text annotation')),\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect to other element'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n  if (is(businessObject, 'bpmn:TextAnnotation')) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n  if (isAny(businessObject, ['bpmn:DataObjectReference', 'bpmn:DataStoreReference'])) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using data input association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n  if (is(businessObject, 'bpmn:Group')) {\n    assign(actions, {\n      'append.text-annotation': appendAction('bpmn:TextAnnotation', 'bpmn-icon-text-annotation', translate('Add text annotation'))\n    });\n  }\n  if (this._isDeleteAllowed([element])) {\n    assign(actions, deleteAction());\n  }\n  return actions;\n};\n\n// helpers /////////\n\n/**\n * @param {ModdleElement} businessObject\n * @param {string} type\n * @param {string} eventDefinitionType\n *\n * @return {boolean}\n */\nfunction isEventType(businessObject, type, eventDefinitionType) {\n  var isType = businessObject.$instanceOf(type);\n  var isDefinition = false;\n  var definitions = businessObject.eventDefinitions || [];\n  forEach(definitions, function (def) {\n    if (def.$type === eventDefinitionType) {\n      isDefinition = true;\n    }\n  });\n  return isType && isDefinition;\n}","map":{"version":3,"names":["assign","forEach","isArray","every","is","isExpanded","isHorizontal","isEventSubProcess","isAny","getChildLanes","hasPrimaryModifier","ContextPadProvider","config","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview","registerProvider","_contextPad","_modeling","_elementFactory","_connect","_create","_popupMenu","_canvas","_rules","_translate","_eventBus","_appendPreview","autoPlace","_autoPlace","get","on","event","context","shape","isOpen","entries","getEntries","replace","action","click","cleanUp","$inject","prototype","getMultiElementContextPadEntries","elements","actions","_isDeleteAllowed","group","className","title","removeElements","slice","baseAllowed","allowed","el","includes","getContextPadEntries","element","type","deleteAction","businessObject","startConnect","start","removeElement","e","getReplaceMenuPosition","Y_OFFSET","pad","getPad","html","padRect","getBoundingClientRect","pos","x","left","y","bottom","appendAction","options","appendStart","createShape","source","append","_","previewAppend","dragstart","hover","splitLaneHandler","count","splitLane","open","childLanes","addLane","length","height","width","eventDefinitionType","isEventType","isForCompensation","isEmpty","position","cursor","search","isType","$instanceOf","isDefinition","definitions","eventDefinitions","def","$type"],"sources":["/home/runner/work/sgex/sgex/node_modules/bpmn-js/lib/features/context-pad/ContextPadProvider.js"],"sourcesContent":["import {\n  assign,\n  forEach,\n  isArray,\n  every\n} from 'min-dash';\n\nimport {\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  isExpanded,\n  isHorizontal,\n  isEventSubProcess\n} from '../../util/DiUtil';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  getChildLanes\n} from '../modeling/util/LaneUtil';\n\nimport {\n  hasPrimaryModifier\n} from 'diagram-js/lib/util/Mouse';\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPad').default} ContextPad\n * @typedef {import('../modeling/Modeling').default} Modeling\n * @typedef {import('../modeling/ElementFactory').default} ElementFactory\n * @typedef {import('../append-preview/AppendPreview').default} AppendPreview\n * @typedef {import('diagram-js/lib/features/connect/Connect').default} Connect\n * @typedef {import('diagram-js/lib/features/create/Create').default} Create\n * @typedef {import('diagram-js/lib/features/popup-menu/PopupMenu').default} PopupMenu\n * @typedef {import('diagram-js/lib/features/canvas/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/features/rules/Rules').default} Rules\n * @typedef {import('diagram-js/lib/i18n/translate/translate').default} Translate\n *\n * @typedef {import('../../model/Types').Element} Element\n * @typedef {import('../../model/Types').ModdleElement} ModdleElement\n *\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').default<Element>} BaseContextPadProvider\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').ContextPadEntries} ContextPadEntries\n * @typedef {import('diagram-js/lib/features/context-pad/ContextPadProvider').ContextPadEntry} ContextPadEntry\n *\n * @typedef { { autoPlace?: boolean; } } ContextPadConfig\n */\n\n/**\n * BPMN-specific context pad provider.\n *\n * @implements {BaseContextPadProvider}\n *\n * @param {ContextPadConfig} config\n * @param {Injector} injector\n * @param {EventBus} eventBus\n * @param {ContextPad} contextPad\n * @param {Modeling} modeling\n * @param {ElementFactory} elementFactory\n * @param {Connect} connect\n * @param {Create} create\n * @param {PopupMenu} popupMenu\n * @param {Canvas} canvas\n * @param {Rules} rules\n * @param {Translate} translate\n * @param {AppendPreview} appendPreview\n */\nexport default function ContextPadProvider(\n    config, injector, eventBus,\n    contextPad, modeling, elementFactory,\n    connect, create, popupMenu,\n    canvas, rules, translate, appendPreview) {\n\n  config = config || {};\n\n  contextPad.registerProvider(this);\n\n  this._contextPad = contextPad;\n\n  this._modeling = modeling;\n\n  this._elementFactory = elementFactory;\n  this._connect = connect;\n  this._create = create;\n  this._popupMenu = popupMenu;\n  this._canvas = canvas;\n  this._rules = rules;\n  this._translate = translate;\n  this._eventBus = eventBus;\n  this._appendPreview = appendPreview;\n\n  if (config.autoPlace !== false) {\n    this._autoPlace = injector.get('autoPlace', false);\n  }\n\n  eventBus.on('create.end', 250, function(event) {\n    var context = event.context,\n        shape = context.shape;\n\n    if (!hasPrimaryModifier(event) || !contextPad.isOpen(shape)) {\n      return;\n    }\n\n    var entries = contextPad.getEntries(shape);\n\n    if (entries.replace) {\n      entries.replace.action.click(event, shape);\n    }\n  });\n\n  eventBus.on('contextPad.close', function() {\n    appendPreview.cleanUp();\n  });\n}\n\nContextPadProvider.$inject = [\n  'config.contextPad',\n  'injector',\n  'eventBus',\n  'contextPad',\n  'modeling',\n  'elementFactory',\n  'connect',\n  'create',\n  'popupMenu',\n  'canvas',\n  'rules',\n  'translate',\n  'appendPreview'\n];\n\n/**\n * @param {Element[]} elements\n *\n * @return {ContextPadEntries}\n */\nContextPadProvider.prototype.getMultiElementContextPadEntries = function(elements) {\n  var modeling = this._modeling;\n\n  var actions = {};\n\n  if (this._isDeleteAllowed(elements)) {\n    assign(actions, {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: this._translate('Delete'),\n        action: {\n          click: function(event, elements) {\n            modeling.removeElements(elements.slice());\n          }\n        }\n      }\n    });\n  }\n\n  return actions;\n};\n\n/**\n * @param {Element[]} elements\n *\n * @return {boolean}\n */\nContextPadProvider.prototype._isDeleteAllowed = function(elements) {\n\n  var baseAllowed = this._rules.allowed('elements.delete', {\n    elements: elements\n  });\n\n  if (isArray(baseAllowed)) {\n    return every(elements, el => baseAllowed.includes(el));\n  }\n\n  return baseAllowed;\n};\n\n/**\n * @param {Element} element\n *\n * @return {ContextPadEntries}\n */\nContextPadProvider.prototype.getContextPadEntries = function(element) {\n  var contextPad = this._contextPad,\n      modeling = this._modeling,\n      elementFactory = this._elementFactory,\n      connect = this._connect,\n      create = this._create,\n      popupMenu = this._popupMenu,\n      autoPlace = this._autoPlace,\n      translate = this._translate,\n      appendPreview = this._appendPreview;\n\n  var actions = {};\n\n  if (element.type === 'label') {\n    if (this._isDeleteAllowed([ element ])) {\n      assign(actions, deleteAction());\n    }\n\n    return actions;\n  }\n\n  var businessObject = element.businessObject;\n\n  function startConnect(event, element) {\n    connect.start(event, element);\n  }\n\n  function removeElement(e, element) {\n    modeling.removeElements([ element ]);\n  }\n\n  function deleteAction() {\n    return {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: translate('Delete'),\n        action: {\n          click: removeElement\n        }\n      }\n    };\n  }\n\n  function getReplaceMenuPosition(element) {\n\n    var Y_OFFSET = 5;\n\n    var pad = contextPad.getPad(element).html;\n\n    var padRect = pad.getBoundingClientRect();\n\n    var pos = {\n      x: padRect.left,\n      y: padRect.bottom + Y_OFFSET\n    };\n\n    return pos;\n  }\n\n  /**\n   * Create an append action.\n   *\n   * @param {string} type\n   * @param {string} className\n   * @param {string} title\n   * @param {Object} [options]\n   *\n   * @return {ContextPadEntry}\n   */\n  function appendAction(type, className, title, options) {\n\n    function appendStart(event, element) {\n\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n\n      create.start(event, shape, {\n        source: element\n      });\n    }\n\n    var append = autoPlace ? function(_, element) {\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n\n      autoPlace.append(element, shape);\n    } : appendStart;\n\n    var previewAppend = autoPlace ? function(_, element) {\n\n      // mouseover\n      appendPreview.create(element, type, options);\n\n      return () => {\n\n        // mouseout\n        appendPreview.cleanUp();\n      };\n    } : null;\n\n    return {\n      group: 'model',\n      className: className,\n      title: title,\n      action: {\n        dragstart: appendStart,\n        click: append,\n        hover: previewAppend\n      }\n    };\n  }\n\n  function splitLaneHandler(count) {\n\n    return function(_, element) {\n\n      // actual split\n      modeling.splitLane(element, count);\n\n      // refresh context pad after split to\n      // get rid of split icons\n      contextPad.open(element, true);\n    };\n  }\n\n\n  if (isAny(businessObject, [ 'bpmn:Lane', 'bpmn:Participant' ]) && isExpanded(element)) {\n\n    var childLanes = getChildLanes(element);\n\n    assign(actions, {\n      'lane-insert-above': {\n        group: 'lane-insert-above',\n        className: 'bpmn-icon-lane-insert-above',\n        title: translate('Add lane above'),\n        action: {\n          click: function(event, element) {\n            modeling.addLane(element, 'top');\n          }\n        }\n      }\n    });\n\n    if (childLanes.length < 2) {\n\n      if (isHorizontal(element) ? element.height >= 120 : element.width >= 120) {\n        assign(actions, {\n          'lane-divide-two': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-two',\n            title: translate('Divide into two lanes'),\n            action: {\n              click: splitLaneHandler(2)\n            }\n          }\n        });\n      }\n\n      if (isHorizontal(element) ? element.height >= 180 : element.width >= 180) {\n        assign(actions, {\n          'lane-divide-three': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-three',\n            title: translate('Divide into three lanes'),\n            action: {\n              click: splitLaneHandler(3)\n            }\n          }\n        });\n      }\n    }\n\n    assign(actions, {\n      'lane-insert-below': {\n        group: 'lane-insert-below',\n        className: 'bpmn-icon-lane-insert-below',\n        title: translate('Add lane below'),\n        action: {\n          click: function(event, element) {\n            modeling.addLane(element, 'bottom');\n          }\n        }\n      }\n    });\n\n  }\n\n  if (is(businessObject, 'bpmn:FlowNode')) {\n\n    if (is(businessObject, 'bpmn:EventBasedGateway')) {\n\n      assign(actions, {\n        'append.receive-task': appendAction(\n          'bpmn:ReceiveTask',\n          'bpmn-icon-receive-task',\n          translate('Append receive task')\n        ),\n        'append.message-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-message',\n          translate('Append message intermediate catch event'),\n          { eventDefinitionType: 'bpmn:MessageEventDefinition' }\n        ),\n        'append.timer-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-timer',\n          translate('Append timer intermediate catch event'),\n          { eventDefinitionType: 'bpmn:TimerEventDefinition' }\n        ),\n        'append.condition-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-condition',\n          translate('Append conditional intermediate catch event'),\n          { eventDefinitionType: 'bpmn:ConditionalEventDefinition' }\n        ),\n        'append.signal-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-signal',\n          translate('Append signal intermediate catch event'),\n          { eventDefinitionType: 'bpmn:SignalEventDefinition' }\n        )\n      });\n    } else if (isEventType(businessObject, 'bpmn:BoundaryEvent', 'bpmn:CompensateEventDefinition')) {\n\n      assign(actions, {\n        'append.compensation-activity':\n            appendAction(\n              'bpmn:Task',\n              'bpmn-icon-task',\n              translate('Append compensation activity'),\n              {\n                isForCompensation: true\n              }\n            )\n      });\n    } else if (!is(businessObject, 'bpmn:EndEvent') &&\n        !businessObject.isForCompensation &&\n        !isEventType(businessObject, 'bpmn:IntermediateThrowEvent', 'bpmn:LinkEventDefinition') &&\n        !isEventSubProcess(businessObject)) {\n\n      assign(actions, {\n        'append.end-event': appendAction(\n          'bpmn:EndEvent',\n          'bpmn-icon-end-event-none',\n          translate('Append end event')\n        ),\n        'append.gateway': appendAction(\n          'bpmn:ExclusiveGateway',\n          'bpmn-icon-gateway-none',\n          translate('Append gateway')\n        ),\n        'append.append-task': appendAction(\n          'bpmn:Task',\n          'bpmn-icon-task',\n          translate('Append task')\n        ),\n        'append.intermediate-event': appendAction(\n          'bpmn:IntermediateThrowEvent',\n          'bpmn-icon-intermediate-event-none',\n          translate('Append intermediate/boundary event')\n        )\n      });\n    }\n  }\n\n  if (!popupMenu.isEmpty(element, 'bpmn-replace')) {\n\n    // Replace menu entry\n    assign(actions, {\n      'replace': {\n        group: 'edit',\n        className: 'bpmn-icon-screw-wrench',\n        title: translate('Change element'),\n        action: {\n          click: function(event, element) {\n\n            var position = assign(getReplaceMenuPosition(element), {\n              cursor: { x: event.x, y: event.y }\n            });\n\n            popupMenu.open(element, 'bpmn-replace', position, {\n              title: translate('Change element'),\n              width: 300,\n              search: true\n            });\n          }\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:SequenceFlow')) {\n    assign(actions, {\n      'append.text-annotation': appendAction(\n        'bpmn:TextAnnotation',\n        'bpmn-icon-text-annotation',\n        translate('Add text annotation')\n      )\n    });\n  }\n\n  if (is(businessObject, 'bpmn:MessageFlow')) {\n    assign(actions, {\n      'append.text-annotation': appendAction(\n        'bpmn:TextAnnotation',\n        'bpmn-icon-text-annotation',\n        translate('Add text annotation')\n      )\n    });\n  }\n\n  if (\n    isAny(businessObject, [\n      'bpmn:FlowNode',\n      'bpmn:InteractionNode',\n      'bpmn:DataObjectReference',\n      'bpmn:DataStoreReference',\n    ])\n  ) {\n    assign(actions, {\n      'append.text-annotation': appendAction(\n        'bpmn:TextAnnotation',\n        'bpmn-icon-text-annotation',\n        translate('Add text annotation')\n      ),\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect to other element'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect,\n        },\n      },\n    });\n  }\n\n  if (is(businessObject, 'bpmn:TextAnnotation')) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect,\n        },\n      },\n    });\n  }\n\n  if (isAny(businessObject, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ])) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using data input association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:Group')) {\n    assign(actions, {\n      'append.text-annotation': appendAction(\n        'bpmn:TextAnnotation',\n        'bpmn-icon-text-annotation',\n        translate('Add text annotation')\n      )\n    });\n  }\n\n  if (this._isDeleteAllowed([ element ])) {\n    assign(actions, deleteAction());\n  }\n\n  return actions;\n};\n\n\n// helpers /////////\n\n/**\n * @param {ModdleElement} businessObject\n * @param {string} type\n * @param {string} eventDefinitionType\n *\n * @return {boolean}\n */\nfunction isEventType(businessObject, type, eventDefinitionType) {\n\n  var isType = businessObject.$instanceOf(type);\n  var isDefinition = false;\n\n  var definitions = businessObject.eventDefinitions || [];\n  forEach(definitions, function(def) {\n    if (def.$type === eventDefinitionType) {\n      isDefinition = true;\n    }\n  });\n\n  return isType && isDefinition;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}