{"ast":null,"code":"import React,{useState}from'react';import{useTheme}from'../contexts/ThemeContext';import helpContentService from'../services/helpContentService';import HelpModal from'./HelpModal';import'./ContextualHelpMascot.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ContextualHelpMascot=_ref=>{let{pageId,helpContent,position='bottom-right',contextData={},notificationBadge=false}=_ref;const[showHelp,setShowHelp]=useState(false);const[helpSticky,setHelpSticky]=useState(false);const[selectedHelpTopic,setSelectedHelpTopic]=useState(null);const[isFadingOut,setIsFadingOut]=useState(false);const{isDarkMode,toggleTheme}=useTheme();// Get help topics for the page\nconst helpTopics=pageId?helpContentService.getHelpTopicsForPage(pageId,contextData):[];const handleMouseEnter=()=>{if(!helpSticky){setShowHelp(true);}};const handleMouseLeave=()=>{if(!helpSticky){setShowHelp(false);}};const handleClick=()=>{setHelpSticky(!helpSticky);setShowHelp(!helpSticky||showHelp);};const handleCloseHelp=()=>{setIsFadingOut(true);// After fade animation completes, hide the bubble\nsetTimeout(()=>{setShowHelp(false);setHelpSticky(false);setIsFadingOut(false);},690);// 0.69 seconds\n};const handleHelpTopicClick=topic=>{// Handle link-type topics by navigating directly\nif(topic.type==='link'){window.open(topic.url,'_blank');setShowHelp(false);setHelpSticky(false);return;}// Handle other types with the modal\nsetSelectedHelpTopic(topic);setShowHelp(false);setHelpSticky(false);};const handleCloseModal=()=>{setSelectedHelpTopic(null);};// Always render the mascot now since we have universal topics\n// if (!hasTopics) {\n//   return null;\n// }\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:`contextual-help-mascot ${position}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"theme-toggle-container\",children:/*#__PURE__*/_jsx(\"button\",{className:`theme-toggle-btn ${isDarkMode?'dark':'light'}`,onClick:toggleTheme,\"aria-label\":`Switch to ${isDarkMode?'light':'dark'} mode`,title:`Switch to ${isDarkMode?'light':'dark'} mode`,children:isDarkMode?'ðŸŒž':'ðŸŒ™'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mascot-container\",onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,onClick:handleClick,children:[/*#__PURE__*/_jsx(\"img\",{src:\"/sgex/sgex-mascot.png\",alt:\"SGEX Helper\",className:\"mascot-icon\"}),notificationBadge&&/*#__PURE__*/_jsx(\"div\",{className:\"notification-badge\",children:\"!\"}),!notificationBadge&&/*#__PURE__*/_jsx(\"div\",{className:\"question-bubble\",children:\"?\"})]}),showHelp&&/*#__PURE__*/_jsxs(\"div\",{className:`help-thought-bubble ${isFadingOut?'fading-out':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bubble-content\",children:[helpSticky&&/*#__PURE__*/_jsx(\"button\",{className:\"close-bubble-btn\",onClick:handleCloseHelp,\"aria-label\":\"Close help\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"help-text\",children:helpTopics.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"help-topics-list\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Get Help\"}),helpTopics.map(topic=>/*#__PURE__*/_jsxs(\"button\",{className:\"help-topic-btn\",onClick:()=>handleHelpTopicClick(topic),children:[topic.badge&&/*#__PURE__*/_jsx(\"img\",{src:topic.badge,alt:\"\",className:\"help-topic-badge\"}),/*#__PURE__*/_jsx(\"span\",{className:\"help-topic-title\",children:topic.title})]},topic.id))]}):helpContent})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bubble-tail\"})]})]}),selectedHelpTopic&&/*#__PURE__*/_jsx(HelpModal,{helpTopic:selectedHelpTopic,contextData:contextData,onClose:handleCloseModal})]});};export default ContextualHelpMascot;","map":{"version":3,"names":["React","useState","useTheme","helpContentService","HelpModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ContextualHelpMascot","_ref","pageId","helpContent","position","contextData","notificationBadge","showHelp","setShowHelp","helpSticky","setHelpSticky","selectedHelpTopic","setSelectedHelpTopic","isFadingOut","setIsFadingOut","isDarkMode","toggleTheme","helpTopics","getHelpTopicsForPage","handleMouseEnter","handleMouseLeave","handleClick","handleCloseHelp","setTimeout","handleHelpTopicClick","topic","type","window","open","url","handleCloseModal","children","className","onClick","title","onMouseEnter","onMouseLeave","src","alt","length","map","badge","id","helpTopic","onClose"],"sources":["/home/runner/work/sgex/sgex/src/components/ContextualHelpMascot.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useTheme } from '../contexts/ThemeContext';\nimport helpContentService from '../services/helpContentService';\nimport HelpModal from './HelpModal';\nimport './ContextualHelpMascot.css';\n\nconst ContextualHelpMascot = ({ pageId, helpContent, position = 'bottom-right', contextData = {}, notificationBadge = false }) => {\n  const [showHelp, setShowHelp] = useState(false);\n  const [helpSticky, setHelpSticky] = useState(false);\n  const [selectedHelpTopic, setSelectedHelpTopic] = useState(null);\n  const [isFadingOut, setIsFadingOut] = useState(false);\n  const { isDarkMode, toggleTheme } = useTheme();\n\n  // Get help topics for the page\n  const helpTopics = pageId ? helpContentService.getHelpTopicsForPage(pageId, contextData) : [];\n\n  const handleMouseEnter = () => {\n    if (!helpSticky) {\n      setShowHelp(true);\n    }\n  };\n\n  const handleMouseLeave = () => {\n    if (!helpSticky) {\n      setShowHelp(false);\n    }\n  };\n\n  const handleClick = () => {\n    setHelpSticky(!helpSticky);\n    setShowHelp(!helpSticky || showHelp);\n  };\n\n  const handleCloseHelp = () => {\n    setIsFadingOut(true);\n    // After fade animation completes, hide the bubble\n    setTimeout(() => {\n      setShowHelp(false);\n      setHelpSticky(false);\n      setIsFadingOut(false);\n    }, 690); // 0.69 seconds\n  };\n\n  const handleHelpTopicClick = (topic) => {\n    // Handle link-type topics by navigating directly\n    if (topic.type === 'link') {\n      window.open(topic.url, '_blank');\n      setShowHelp(false);\n      setHelpSticky(false);\n      return;\n    }\n    \n    // Handle other types with the modal\n    setSelectedHelpTopic(topic);\n    setShowHelp(false);\n    setHelpSticky(false);\n  };\n\n  const handleCloseModal = () => {\n    setSelectedHelpTopic(null);\n  };\n\n  // Always render the mascot now since we have universal topics\n  // if (!hasTopics) {\n  //   return null;\n  // }\n\n  return (\n    <>\n      <div className={`contextual-help-mascot ${position}`}>\n        {/* Theme toggle button positioned under mascot */}\n        <div className=\"theme-toggle-container\">\n          <button \n            className={`theme-toggle-btn ${isDarkMode ? 'dark' : 'light'}`}\n            onClick={toggleTheme}\n            aria-label={`Switch to ${isDarkMode ? 'light' : 'dark'} mode`}\n            title={`Switch to ${isDarkMode ? 'light' : 'dark'} mode`}\n          >\n            {isDarkMode ? 'ðŸŒž' : 'ðŸŒ™'}\n          </button>\n        </div>\n        \n        <div \n          className=\"mascot-container\"\n          onMouseEnter={handleMouseEnter}\n          onMouseLeave={handleMouseLeave}\n          onClick={handleClick}\n        >\n          <img \n            src=\"/sgex/sgex-mascot.png\" \n            alt=\"SGEX Helper\" \n            className=\"mascot-icon\"\n          />\n          \n          {/* Notification badge for important help messages */}\n          {notificationBadge && (\n            <div className=\"notification-badge\">\n              !\n            </div>\n          )}\n          \n          {/* Question mark thought bubble - always show since we always have topics now */}\n          {!notificationBadge && (\n            <div className=\"question-bubble\">\n              ?\n            </div>\n          )}\n        </div>\n        \n        {showHelp && (\n          <div className={`help-thought-bubble ${isFadingOut ? 'fading-out' : ''}`}>\n            <div className=\"bubble-content\">\n              {helpSticky && (\n                <button \n                  className=\"close-bubble-btn\"\n                  onClick={handleCloseHelp}\n                  aria-label=\"Close help\"\n                >\n                  Ã—\n                </button>\n              )}\n              <div className=\"help-text\">\n                {helpTopics.length > 0 ? (\n                  <div className=\"help-topics-list\">\n                    <h4>Get Help</h4>\n                    {helpTopics.map((topic) => (\n                      <button\n                        key={topic.id}\n                        className=\"help-topic-btn\"\n                        onClick={() => handleHelpTopicClick(topic)}\n                      >\n                        {topic.badge && (\n                          <img \n                            src={topic.badge} \n                            alt=\"\" \n                            className=\"help-topic-badge\"\n                          />\n                        )}\n                        <span className=\"help-topic-title\">{topic.title}</span>\n                      </button>\n                    ))}\n                  </div>\n                ) : (\n                  helpContent\n                )}\n              </div>\n            </div>\n            <div className=\"bubble-tail\"></div>\n          </div>\n        )}\n      </div>\n      \n      {/* Help Modal for displaying slideshow content */}\n      {selectedHelpTopic && (\n        <HelpModal\n          helpTopic={selectedHelpTopic}\n          contextData={contextData}\n          onClose={handleCloseModal}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ContextualHelpMascot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}