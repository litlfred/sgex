{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useNavigate}from'react-router-dom';import actorDefinitionService from'../services/actorDefinitionService';import{PageLayout,useDAKParams}from'./framework';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ActorEditor=()=>{return/*#__PURE__*/_jsx(PageLayout,{pageName:\"actor-editor\",children:/*#__PURE__*/_jsx(ActorEditorContent,{})});};const ActorEditorContent=()=>{const navigate=useNavigate();const{profile,repository,branch}=useDAKParams();// For now, we'll set editActorId to null since it's not in URL params\n// This could be enhanced later to support URL-based actor editing\nconst editActorId=null;// State management\nconst[actorDefinition,setActorDefinition]=useState(null);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[errors,setErrors]=useState({});const[showPreview,setShowPreview]=useState(false);const[fshPreview,setFshPreview]=useState('');const[stagedActors,setStagedActors]=useState([]);const[showActorList,setShowActorList]=useState(false);const[activeTab,setActiveTab]=useState('basic');// Initialize component\nuseEffect(()=>{const initializeEditor=async()=>{setLoading(true);try{if(editActorId){// Load existing actor from staging ground\nconst result=actorDefinitionService.getFromStagingGround(editActorId);if(result){setActorDefinition(result.actorDefinition);}else{// Actor not found, create new one\nsetActorDefinition(actorDefinitionService.createEmptyActorDefinition());}}else{// Create new actor\nsetActorDefinition(actorDefinitionService.createEmptyActorDefinition());}// Load list of staged actors\nsetStagedActors(actorDefinitionService.listStagedActors());}catch(error){console.error('Error initializing actor editor:',error);setErrors({general:'Failed to initialize editor'});}setLoading(false);};initializeEditor();},[editActorId]);// Handle form field changes\nconst handleFieldChange=useCallback((field,value)=>{setActorDefinition(prev=>({...prev,[field]:value}));// Clear field-specific errors\nif(errors[field]){setErrors(prev=>{const newErrors={...prev};delete newErrors[field];return newErrors;});}},[errors]);// Handle nested field changes\nconst handleNestedFieldChange=useCallback((parentField,index,field,value)=>{setActorDefinition(prev=>{const newDefinition={...prev};if(!newDefinition[parentField]){newDefinition[parentField]=[];}if(!newDefinition[parentField][index]){newDefinition[parentField][index]={};}newDefinition[parentField][index][field]=value;return newDefinition;});},[]);// Add new item to array fields\nconst addArrayItem=useCallback(function(field){let defaultItem=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};setActorDefinition(prev=>({...prev,[field]:[...(prev[field]||[]),defaultItem]}));},[]);// Remove item from array fields\nconst removeArrayItem=useCallback((field,index)=>{setActorDefinition(prev=>({...prev,[field]:prev[field].filter((_,i)=>i!==index)}));},[]);// Validate form\nconst validateForm=useCallback(()=>{if(!actorDefinition)return false;const validation=actorDefinitionService.validateActorDefinition(actorDefinition);if(!validation.isValid){const fieldErrors={};validation.errors.forEach(error=>{if(error.includes('ID'))fieldErrors.id=error;else if(error.includes('Name'))fieldErrors.name=error;else if(error.includes('Description'))fieldErrors.description=error;else if(error.includes('type'))fieldErrors.type=error;else if(error.includes('role'))fieldErrors.roles=error;else fieldErrors.general=error;});setErrors(fieldErrors);return false;}setErrors({});return true;},[actorDefinition]);// Save actor definition\nconst handleSave=async()=>{if(!validateForm()){return;}setSaving(true);try{const result=await actorDefinitionService.saveToStagingGround(actorDefinition);if(result.success){// Refresh staged actors list\nsetStagedActors(actorDefinitionService.listStagedActors());// Show success message (could be a toast notification)\nalert('Actor definition saved to staging ground successfully!');// Update the URL to reflect we're now editing this actor\nif(!editActorId){navigate(`/actor-editor/${profile===null||profile===void 0?void 0:profile.login}/${repository===null||repository===void 0?void 0:repository.name}${branch&&branch!=='main'?`/${branch}`:''}`);}}else{setErrors({general:result.error});}}catch(error){console.error('Error saving actor definition:',error);setErrors({general:'Failed to save actor definition'});}setSaving(false);};// Generate FSH preview\nconst generatePreview=useCallback(()=>{if(!actorDefinition)return;try{const fsh=actorDefinitionService.generateFSH(actorDefinition);setFshPreview(fsh);setShowPreview(true);}catch(error){console.error('Error generating FSH preview:',error);setErrors({general:'Failed to generate FSH preview'});}},[actorDefinition]);// Load actor template\nconst loadTemplate=template=>{setActorDefinition({...actorDefinitionService.createEmptyActorDefinition(),...template,metadata:{...actorDefinitionService.createEmptyActorDefinition().metadata,...template.metadata}});setErrors({});};// Load existing staged actor\nconst loadStagedActor=actorId=>{const result=actorDefinitionService.getFromStagingGround(actorId);if(result){setActorDefinition(result.actorDefinition);setErrors({});setShowActorList(false);// Update URL\nnavigate(`/actor-editor/${profile===null||profile===void 0?void 0:profile.login}/${repository===null||repository===void 0?void 0:repository.name}${branch&&branch!=='main'?`/${branch}`:''}`);}};// Delete staged actor\nconst deleteStagedActor=actorId=>{if(window.confirm(`Are you sure you want to delete the actor \"${actorId}\"?`)){const success=actorDefinitionService.removeFromStagingGround(actorId);if(success){setStagedActors(actorDefinitionService.listStagedActors());// If we're currently editing this actor, create a new one\nif(editActorId===actorId){setActorDefinition(actorDefinitionService.createEmptyActorDefinition());navigate(`/actor-editor/${profile===null||profile===void 0?void 0:profile.login}/${repository===null||repository===void 0?void 0:repository.name}${branch&&branch!=='main'?`/${branch}`:''}`);}}}};// Redirect if missing required context - use useEffect to avoid render issues\nuseEffect(()=>{if(!profile||!repository){navigate('/');}},[profile,repository,navigate]);if(!profile||!repository){return/*#__PURE__*/_jsx(PageLayout,{pageName:\"actor-editor\",children:/*#__PURE__*/_jsx(\"div\",{className:\"actor-editor\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"redirecting-state\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Redirecting...\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Missing required context. Redirecting to home page...\"})]})})});}if(loading){return/*#__PURE__*/_jsx(PageLayout,{pageName:\"actor-editor\",children:/*#__PURE__*/_jsx(\"div\",{className:\"actor-editor loading-state\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Loading Actor Editor...\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Initializing editor and loading data...\"})]})})});}return/*#__PURE__*/_jsx(PageLayout,{pageName:\"actor-editor\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"actor-editor\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editor-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editor-toolbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-left\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowActorList(!showActorList),className:\"toolbar-btn\",title:\"Browse staged actors\",children:[\"\\uD83D\\uDCCB Staged Actors (\",stagedActors.length,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:generatePreview,className:\"toolbar-btn\",disabled:!(actorDefinition!==null&&actorDefinition!==void 0&&actorDefinition.id),title:\"Preview FSH output\",children:\"\\uD83D\\uDC41\\uFE0F Preview FSH\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-right\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:saving||!(actorDefinition!==null&&actorDefinition!==void 0&&actorDefinition.id),className:\"toolbar-btn primary\",title:\"Save to staging ground\",children:saving?'üíæ Saving...':'üíæ Save'})})]}),errors.general&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",errors.general]}),/*#__PURE__*/_jsxs(\"div\",{className:\"editor-layout\",children:[showActorList&&/*#__PURE__*/_jsxs(\"div\",{className:\"actor-list-sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Staged Actors\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowActorList(false),className:\"close-btn\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"templates-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Templates\"}),actorDefinitionService.getActorTemplates().map(template=>/*#__PURE__*/_jsxs(\"div\",{className:\"template-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"template-name\",children:template.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadTemplate(template),className:\"load-btn\",children:\"Use\"})]},template.id))]}),stagedActors.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"staged-actors-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Staged Actors\"}),stagedActors.map(actor=>/*#__PURE__*/_jsxs(\"div\",{className:\"staged-actor-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"actor-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"actor-name\",children:actor.name}),/*#__PURE__*/_jsx(\"span\",{className:\"actor-id\",children:actor.id}),/*#__PURE__*/_jsx(\"span\",{className:\"actor-modified\",children:new Date(actor.lastModified).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"actor-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadStagedActor(actor.id),className:\"load-btn\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteStagedActor(actor.id),className:\"delete-btn\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})]},actor.id))]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:`main-editor ${showActorList?'with-sidebar':''}`,children:actorDefinition&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editor-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:`tab ${activeTab==='basic'?'active':''}`,onClick:()=>setActiveTab('basic'),children:\"Basic Info\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab ${activeTab==='roles'?'active':''}`,onClick:()=>setActiveTab('roles'),children:\"Roles & Qualifications\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab ${activeTab==='context'?'active':''}`,onClick:()=>setActiveTab('context'),children:\"Context & Access\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab ${activeTab==='metadata'?'active':''}`,onClick:()=>setActiveTab('metadata'),children:\"Metadata\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[activeTab==='basic'&&/*#__PURE__*/_jsx(BasicInfoTab,{actorDefinition:actorDefinition,errors:errors,onFieldChange:handleFieldChange}),activeTab==='roles'&&/*#__PURE__*/_jsx(RolesTab,{actorDefinition:actorDefinition,errors:errors,onNestedFieldChange:handleNestedFieldChange,onAddItem:addArrayItem,onRemoveItem:removeArrayItem}),activeTab==='context'&&/*#__PURE__*/_jsx(ContextTab,{actorDefinition:actorDefinition,errors:errors,onFieldChange:handleFieldChange,onNestedFieldChange:handleNestedFieldChange,onAddItem:addArrayItem,onRemoveItem:removeArrayItem}),activeTab==='metadata'&&/*#__PURE__*/_jsx(MetadataTab,{actorDefinition:actorDefinition,errors:errors,onFieldChange:handleFieldChange,onNestedFieldChange:handleNestedFieldChange,onAddItem:addArrayItem,onRemoveItem:removeArrayItem})]})]})})]})]}),showPreview&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowPreview(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"FSH Preview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPreview(false),className:\"close-btn\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"fsh-preview\",children:fshPreview})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigator.clipboard.writeText(fshPreview);alert('FSH copied to clipboard!');},className:\"copy-btn\",children:\"\\uD83D\\uDCCB Copy to Clipboard\"})})]})})]})});};// Basic Info Tab Component\nconst BasicInfoTab=_ref=>{let{actorDefinition,errors,onFieldChange}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"id\",children:\"Actor ID *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"id\",value:actorDefinition.id,onChange:e=>onFieldChange('id',e.target.value),className:errors.id?'error':'',placeholder:\"e.g., primary-care-physician\",pattern:\"[a-zA-Z][a-zA-Z0-9_-]*\"}),errors.id&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.id}),/*#__PURE__*/_jsx(\"span\",{className:\"help-text\",children:\"Unique identifier (letters, numbers, underscores, hyphens only)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Display Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:actorDefinition.name,onChange:e=>onFieldChange('name',e.target.value),className:errors.name?'error':'',placeholder:\"e.g., Primary Care Physician\"}),errors.name&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",value:actorDefinition.description,onChange:e=>onFieldChange('description',e.target.value),className:errors.description?'error':'',placeholder:\"Detailed description of the actor's role and responsibilities...\",rows:4}),errors.description&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"type\",children:\"Actor Type *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"type\",value:actorDefinition.type,onChange:e=>onFieldChange('type',e.target.value),className:errors.type?'error':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"person\",children:\"Person\"}),/*#__PURE__*/_jsx(\"option\",{value:\"practitioner\",children:\"Practitioner\"}),/*#__PURE__*/_jsx(\"option\",{value:\"patient\",children:\"Patient\"}),/*#__PURE__*/_jsx(\"option\",{value:\"relatedperson\",children:\"Related Person\"}),/*#__PURE__*/_jsx(\"option\",{value:\"organization\",children:\"Organization\"}),/*#__PURE__*/_jsx(\"option\",{value:\"device\",children:\"Device\"}),/*#__PURE__*/_jsx(\"option\",{value:\"system\",children:\"System\"})]}),errors.type&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.type})]})]});};// Roles Tab Component\nconst RolesTab=_ref2=>{let{actorDefinition,errors,onNestedFieldChange,onAddItem,onRemoveItem}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Roles & Qualifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subsection-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Roles *\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onAddItem('roles',{code:'',display:'',system:'http://snomed.info/sct'}),className:\"add-btn\",children:\"+ Add Role\"})]}),errors.roles&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.roles}),actorDefinition.roles&&actorDefinition.roles.map((role,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"array-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"array-item-header\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Role \",index+1]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onRemoveItem('roles',index),className:\"remove-btn\",children:\"Remove\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:role.code,onChange:e=>onNestedFieldChange('roles',index,'code',e.target.value),placeholder:\"Role code\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Display Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:role.display,onChange:e=>onNestedFieldChange('roles',index,'display',e.target.value),placeholder:\"Human-readable role name\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Code System\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:role.system||'',onChange:e=>onNestedFieldChange('roles',index,'system',e.target.value),placeholder:\"http://snomed.info/sct\"})]})]},index))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subsection-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Qualifications\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onAddItem('qualifications',{code:'',display:'',issuer:''}),className:\"add-btn\",children:\"+ Add Qualification\"})]}),actorDefinition.qualifications&&actorDefinition.qualifications.map((qual,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"array-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"array-item-header\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Qualification \",index+1]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onRemoveItem('qualifications',index),className:\"remove-btn\",children:\"Remove\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:qual.code,onChange:e=>onNestedFieldChange('qualifications',index,'code',e.target.value),placeholder:\"Qualification code\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Display Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:qual.display,onChange:e=>onNestedFieldChange('qualifications',index,'display',e.target.value),placeholder:\"Qualification name\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Issuing Organization\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:qual.issuer||'',onChange:e=>onNestedFieldChange('qualifications',index,'issuer',e.target.value),placeholder:\"Organization that issued this qualification\"})]})]},index))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subsection-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Specialties\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onAddItem('specialties',{code:'',display:'',system:'http://snomed.info/sct'}),className:\"add-btn\",children:\"+ Add Specialty\"})]}),actorDefinition.specialties&&actorDefinition.specialties.map((specialty,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"array-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"array-item-header\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Specialty \",index+1]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onRemoveItem('specialties',index),className:\"remove-btn\",children:\"Remove\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:specialty.code,onChange:e=>onNestedFieldChange('specialties',index,'code',e.target.value),placeholder:\"Specialty code\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Display Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:specialty.display,onChange:e=>onNestedFieldChange('specialties',index,'display',e.target.value),placeholder:\"Specialty name\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Code System\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:specialty.system||'',onChange:e=>onNestedFieldChange('specialties',index,'system',e.target.value),placeholder:\"http://snomed.info/sct\"})]})]},index))]})]});};// Context Tab Component\nconst ContextTab=_ref3=>{var _actorDefinition$loca,_actorDefinition$loca2;let{actorDefinition,errors,onFieldChange,onNestedFieldChange,onAddItem,onRemoveItem}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Context & Access\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Typical Location\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Location Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:((_actorDefinition$loca=actorDefinition.location)===null||_actorDefinition$loca===void 0?void 0:_actorDefinition$loca.type)||'',onChange:e=>onFieldChange('location',{...actorDefinition.location,type:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"facility\",children:\"Healthcare Facility\"}),/*#__PURE__*/_jsx(\"option\",{value:\"community\",children:\"Community\"}),/*#__PURE__*/_jsx(\"option\",{value:\"home\",children:\"Home\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mobile\",children:\"Mobile\"}),/*#__PURE__*/_jsx(\"option\",{value:\"virtual\",children:\"Virtual/Remote\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_actorDefinition$loca2=actorDefinition.location)===null||_actorDefinition$loca2===void 0?void 0:_actorDefinition$loca2.description)||'',onChange:e=>onFieldChange('location',{...actorDefinition.location,description:e.target.value}),placeholder:\"Describe the typical location\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"System Access Level\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"select\",{value:actorDefinition.accessLevel||'standard',onChange:e=>onFieldChange('accessLevel',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"read-only\",children:\"Read-Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"standard\",children:\"Standard\"}),/*#__PURE__*/_jsx(\"option\",{value:\"administrative\",children:\"Administrative\"}),/*#__PURE__*/_jsx(\"option\",{value:\"system\",children:\"System\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subsection-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Key Interactions\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onAddItem('interactions',{type:'reads',target:'',description:''}),className:\"add-btn\",children:\"+ Add Interaction\"})]}),actorDefinition.interactions&&actorDefinition.interactions.map((interaction,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"array-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"array-item-header\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Interaction \",index+1]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onRemoveItem('interactions',index),className:\"remove-btn\",children:\"Remove\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:interaction.type,onChange:e=>onNestedFieldChange('interactions',index,'type',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"creates\",children:\"Creates\"}),/*#__PURE__*/_jsx(\"option\",{value:\"reads\",children:\"Reads\"}),/*#__PURE__*/_jsx(\"option\",{value:\"updates\",children:\"Updates\"}),/*#__PURE__*/_jsx(\"option\",{value:\"deletes\",children:\"Deletes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"approves\",children:\"Approves\"}),/*#__PURE__*/_jsx(\"option\",{value:\"reviews\",children:\"Reviews\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monitors\",children:\"Monitors\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Target\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:interaction.target,onChange:e=>onNestedFieldChange('interactions',index,'target',e.target.value),placeholder:\"What the actor interacts with\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:interaction.description||'',onChange:e=>onNestedFieldChange('interactions',index,'description',e.target.value),placeholder:\"Describe this interaction\"})]})]},index))]})]});};// Metadata Tab Component\nconst MetadataTab=_ref4=>{var _actorDefinition$meta,_actorDefinition$meta2,_actorDefinition$meta3,_actorDefinition$meta4,_actorDefinition$meta5,_actorDefinition$meta6;let{actorDefinition,errors,onFieldChange,onNestedFieldChange,onAddItem,onRemoveItem}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Metadata\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Version\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_actorDefinition$meta=actorDefinition.metadata)===null||_actorDefinition$meta===void 0?void 0:_actorDefinition$meta.version)||'',onChange:e=>onFieldChange('metadata',{...actorDefinition.metadata,version:e.target.value}),placeholder:\"1.0.0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:((_actorDefinition$meta2=actorDefinition.metadata)===null||_actorDefinition$meta2===void 0?void 0:_actorDefinition$meta2.status)||'draft',onChange:e=>onFieldChange('metadata',{...actorDefinition.metadata,status:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"draft\",children:\"Draft\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"retired\",children:\"Retired\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Publisher\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_actorDefinition$meta3=actorDefinition.metadata)===null||_actorDefinition$meta3===void 0?void 0:_actorDefinition$meta3.publisher)||'',onChange:e=>onFieldChange('metadata',{...actorDefinition.metadata,publisher:e.target.value}),placeholder:\"Organization or person responsible\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"subsection-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Contact Information\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onAddItem('metadata.contact',{name:'',email:''}),className:\"add-btn\",children:\"+ Add Contact\"})]}),((_actorDefinition$meta4=actorDefinition.metadata)===null||_actorDefinition$meta4===void 0?void 0:_actorDefinition$meta4.contact)&&actorDefinition.metadata.contact.map((contact,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"array-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"array-item-header\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Contact \",index+1]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{const newContacts=[...(actorDefinition.metadata.contact||[])];newContacts.splice(index,1);onFieldChange('metadata',{...actorDefinition.metadata,contact:newContacts});},className:\"remove-btn\",children:\"Remove\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.name||'',onChange:e=>{const newContacts=[...(actorDefinition.metadata.contact||[])];newContacts[index]={...contact,name:e.target.value};onFieldChange('metadata',{...actorDefinition.metadata,contact:newContacts});},placeholder:\"Contact name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:contact.email||'',onChange:e=>{const newContacts=[...(actorDefinition.metadata.contact||[])];newContacts[index]={...contact,email:e.target.value};onFieldChange('metadata',{...actorDefinition.metadata,contact:newContacts});},placeholder:\"contact@example.com\"})]})]})]},index))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tags\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_actorDefinition$meta5=actorDefinition.metadata)===null||_actorDefinition$meta5===void 0?void 0:(_actorDefinition$meta6=_actorDefinition$meta5.tags)===null||_actorDefinition$meta6===void 0?void 0:_actorDefinition$meta6.join(', '))||'',onChange:e=>onFieldChange('metadata',{...actorDefinition.metadata,tags:e.target.value.split(',').map(tag=>tag.trim()).filter(tag=>tag)}),placeholder:\"Enter tags separated by commas\"}),/*#__PURE__*/_jsx(\"span\",{className:\"help-text\",children:\"Comma-separated tags for categorization\"})]})]});};export default ActorEditor;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","actorDefinitionService","PageLayout","useDAKParams","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ActorEditor","pageName","children","ActorEditorContent","navigate","profile","repository","branch","editActorId","actorDefinition","setActorDefinition","loading","setLoading","saving","setSaving","errors","setErrors","showPreview","setShowPreview","fshPreview","setFshPreview","stagedActors","setStagedActors","showActorList","setShowActorList","activeTab","setActiveTab","initializeEditor","result","getFromStagingGround","createEmptyActorDefinition","listStagedActors","error","console","general","handleFieldChange","field","value","prev","newErrors","handleNestedFieldChange","parentField","index","newDefinition","addArrayItem","defaultItem","arguments","length","undefined","removeArrayItem","filter","_","i","validateForm","validation","validateActorDefinition","isValid","fieldErrors","forEach","includes","id","name","description","type","roles","handleSave","saveToStagingGround","success","alert","login","generatePreview","fsh","generateFSH","loadTemplate","template","metadata","loadStagedActor","actorId","deleteStagedActor","window","confirm","removeFromStagingGround","className","onClick","title","disabled","getActorTemplates","map","actor","Date","lastModified","toLocaleDateString","BasicInfoTab","onFieldChange","RolesTab","onNestedFieldChange","onAddItem","onRemoveItem","ContextTab","MetadataTab","e","stopPropagation","navigator","clipboard","writeText","_ref","htmlFor","onChange","target","placeholder","pattern","rows","_ref2","code","display","system","role","issuer","qualifications","qual","specialties","specialty","_ref3","_actorDefinition$loca","_actorDefinition$loca2","location","accessLevel","interactions","interaction","_ref4","_actorDefinition$meta","_actorDefinition$meta2","_actorDefinition$meta3","_actorDefinition$meta4","_actorDefinition$meta5","_actorDefinition$meta6","version","status","publisher","email","contact","newContacts","splice","tags","join","split","tag","trim"],"sources":["/home/runner/work/sgex/sgex/src/components/ActorEditor.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport actorDefinitionService from '../services/actorDefinitionService';\nimport { PageLayout, useDAKParams } from './framework';\n\nconst ActorEditor = () => {\n  return (\n    <PageLayout pageName=\"actor-editor\">\n      <ActorEditorContent />\n    </PageLayout>\n  );\n};\n\nconst ActorEditorContent = () => {\n  const navigate = useNavigate();\n  const { profile, repository, branch } = useDAKParams();\n  \n  // For now, we'll set editActorId to null since it's not in URL params\n  // This could be enhanced later to support URL-based actor editing\n  const editActorId = null;\n\n  // State management\n  const [actorDefinition, setActorDefinition] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [showPreview, setShowPreview] = useState(false);\n  const [fshPreview, setFshPreview] = useState('');\n  const [stagedActors, setStagedActors] = useState([]);\n  const [showActorList, setShowActorList] = useState(false);\n  const [activeTab, setActiveTab] = useState('basic');\n\n  // Initialize component\n  useEffect(() => {\n    const initializeEditor = async () => {\n      setLoading(true);\n      \n      try {\n        if (editActorId) {\n          // Load existing actor from staging ground\n          const result = actorDefinitionService.getFromStagingGround(editActorId);\n          if (result) {\n            setActorDefinition(result.actorDefinition);\n          } else {\n            // Actor not found, create new one\n            setActorDefinition(actorDefinitionService.createEmptyActorDefinition());\n          }\n        } else {\n          // Create new actor\n          setActorDefinition(actorDefinitionService.createEmptyActorDefinition());\n        }\n        \n        // Load list of staged actors\n        setStagedActors(actorDefinitionService.listStagedActors());\n        \n      } catch (error) {\n        console.error('Error initializing actor editor:', error);\n        setErrors({ general: 'Failed to initialize editor' });\n      }\n      \n      setLoading(false);\n    };\n\n    initializeEditor();\n  }, [editActorId]);\n\n  // Handle form field changes\n  const handleFieldChange = useCallback((field, value) => {\n    setActorDefinition(prev => ({\n      ...prev,\n      [field]: value\n    }));\n    \n    // Clear field-specific errors\n    if (errors[field]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[field];\n        return newErrors;\n      });\n    }\n  }, [errors]);\n\n  // Handle nested field changes\n  const handleNestedFieldChange = useCallback((parentField, index, field, value) => {\n    setActorDefinition(prev => {\n      const newDefinition = { ...prev };\n      if (!newDefinition[parentField]) {\n        newDefinition[parentField] = [];\n      }\n      \n      if (!newDefinition[parentField][index]) {\n        newDefinition[parentField][index] = {};\n      }\n      \n      newDefinition[parentField][index][field] = value;\n      return newDefinition;\n    });\n  }, []);\n\n  // Add new item to array fields\n  const addArrayItem = useCallback((field, defaultItem = {}) => {\n    setActorDefinition(prev => ({\n      ...prev,\n      [field]: [...(prev[field] || []), defaultItem]\n    }));\n  }, []);\n\n  // Remove item from array fields\n  const removeArrayItem = useCallback((field, index) => {\n    setActorDefinition(prev => ({\n      ...prev,\n      [field]: prev[field].filter((_, i) => i !== index)\n    }));\n  }, []);\n\n  // Validate form\n  const validateForm = useCallback(() => {\n    if (!actorDefinition) return false;\n    \n    const validation = actorDefinitionService.validateActorDefinition(actorDefinition);\n    \n    if (!validation.isValid) {\n      const fieldErrors = {};\n      validation.errors.forEach(error => {\n        if (error.includes('ID')) fieldErrors.id = error;\n        else if (error.includes('Name')) fieldErrors.name = error;\n        else if (error.includes('Description')) fieldErrors.description = error;\n        else if (error.includes('type')) fieldErrors.type = error;\n        else if (error.includes('role')) fieldErrors.roles = error;\n        else fieldErrors.general = error;\n      });\n      setErrors(fieldErrors);\n      return false;\n    }\n    \n    setErrors({});\n    return true;\n  }, [actorDefinition]);\n\n  // Save actor definition\n  const handleSave = async () => {\n    if (!validateForm()) {\n      return;\n    }\n    \n    setSaving(true);\n    \n    try {\n      const result = await actorDefinitionService.saveToStagingGround(actorDefinition);\n      \n      if (result.success) {\n        // Refresh staged actors list\n        setStagedActors(actorDefinitionService.listStagedActors());\n        \n        // Show success message (could be a toast notification)\n        alert('Actor definition saved to staging ground successfully!');\n        \n        // Update the URL to reflect we're now editing this actor\n        if (!editActorId) {\n          navigate(`/actor-editor/${profile?.login}/${repository?.name}${branch && branch !== 'main' ? `/${branch}` : ''}`);\n        }\n      } else {\n        setErrors({ general: result.error });\n      }\n    } catch (error) {\n      console.error('Error saving actor definition:', error);\n      setErrors({ general: 'Failed to save actor definition' });\n    }\n    \n    setSaving(false);\n  };\n\n  // Generate FSH preview\n  const generatePreview = useCallback(() => {\n    if (!actorDefinition) return;\n    \n    try {\n      const fsh = actorDefinitionService.generateFSH(actorDefinition);\n      setFshPreview(fsh);\n      setShowPreview(true);\n    } catch (error) {\n      console.error('Error generating FSH preview:', error);\n      setErrors({ general: 'Failed to generate FSH preview' });\n    }\n  }, [actorDefinition]);\n\n  // Load actor template\n  const loadTemplate = (template) => {\n    setActorDefinition({\n      ...actorDefinitionService.createEmptyActorDefinition(),\n      ...template,\n      metadata: {\n        ...actorDefinitionService.createEmptyActorDefinition().metadata,\n        ...template.metadata\n      }\n    });\n    setErrors({});\n  };\n\n  // Load existing staged actor\n  const loadStagedActor = (actorId) => {\n    const result = actorDefinitionService.getFromStagingGround(actorId);\n    if (result) {\n      setActorDefinition(result.actorDefinition);\n      setErrors({});\n      setShowActorList(false);\n      \n      // Update URL\n      navigate(`/actor-editor/${profile?.login}/${repository?.name}${branch && branch !== 'main' ? `/${branch}` : ''}`);\n    }\n  };\n\n  // Delete staged actor\n  const deleteStagedActor = (actorId) => {\n    if (window.confirm(`Are you sure you want to delete the actor \"${actorId}\"?`)) {\n      const success = actorDefinitionService.removeFromStagingGround(actorId);\n      if (success) {\n        setStagedActors(actorDefinitionService.listStagedActors());\n        \n        // If we're currently editing this actor, create a new one\n        if (editActorId === actorId) {\n          setActorDefinition(actorDefinitionService.createEmptyActorDefinition());\n          navigate(`/actor-editor/${profile?.login}/${repository?.name}${branch && branch !== 'main' ? `/${branch}` : ''}`);\n        }\n      }\n    }\n  };\n\n\n\n  // Redirect if missing required context - use useEffect to avoid render issues\n  useEffect(() => {\n    if (!profile || !repository) {\n      navigate('/');\n    }\n  }, [profile, repository, navigate]);\n\n  if (!profile || !repository) {\n    return (\n      <PageLayout pageName=\"actor-editor\">\n        <div className=\"actor-editor\">\n          <div className=\"redirecting-state\">\n            <h2>Redirecting...</h2>\n            <p>Missing required context. Redirecting to home page...</p>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n\n  if (loading) {\n    return (\n      <PageLayout pageName=\"actor-editor\">\n        <div className=\"actor-editor loading-state\">\n          <div className=\"loading-content\">\n            <h2>Loading Actor Editor...</h2>\n            <p>Initializing editor and loading data...</p>\n          </div>\n        </div>\n      </PageLayout>\n    );\n  }\n\n  return (\n    <PageLayout pageName=\"actor-editor\">\n      <div className=\"actor-editor\">\n        <div className=\"editor-content\">\n\n        <div className=\"editor-toolbar\">\n          <div className=\"toolbar-left\">\n            <button \n              onClick={() => setShowActorList(!showActorList)}\n              className=\"toolbar-btn\"\n              title=\"Browse staged actors\"\n            >\n              üìã Staged Actors ({stagedActors.length})\n            </button>\n            <button \n              onClick={generatePreview}\n              className=\"toolbar-btn\"\n              disabled={!actorDefinition?.id}\n              title=\"Preview FSH output\"\n            >\n              üëÅÔ∏è Preview FSH\n            </button>\n          </div>\n          <div className=\"toolbar-right\">\n            <button \n              onClick={handleSave}\n              disabled={saving || !actorDefinition?.id}\n              className=\"toolbar-btn primary\"\n              title=\"Save to staging ground\"\n            >\n              {saving ? 'üíæ Saving...' : 'üíæ Save'}\n            </button>\n          </div>\n        </div>\n\n        {errors.general && (\n          <div className=\"error-message\">\n            <strong>Error:</strong> {errors.general}\n          </div>\n        )}\n\n        <div className=\"editor-layout\">\n          {/* Staged Actors Sidebar */}\n          {showActorList && (\n            <div className=\"actor-list-sidebar\">\n              <div className=\"sidebar-header\">\n                <h3>Staged Actors</h3>\n                <button \n                  onClick={() => setShowActorList(false)}\n                  className=\"close-btn\"\n                >\n                  ‚úï\n                </button>\n              </div>\n              <div className=\"sidebar-content\">\n                <div className=\"templates-section\">\n                  <h4>Templates</h4>\n                  {actorDefinitionService.getActorTemplates().map(template => (\n                    <div key={template.id} className=\"template-item\">\n                      <span className=\"template-name\">{template.name}</span>\n                      <button \n                        onClick={() => loadTemplate(template)}\n                        className=\"load-btn\"\n                      >\n                        Use\n                      </button>\n                    </div>\n                  ))}\n                </div>\n                \n                {stagedActors.length > 0 && (\n                  <div className=\"staged-actors-section\">\n                    <h4>Staged Actors</h4>\n                    {stagedActors.map(actor => (\n                      <div key={actor.id} className=\"staged-actor-item\">\n                        <div className=\"actor-info\">\n                          <span className=\"actor-name\">{actor.name}</span>\n                          <span className=\"actor-id\">{actor.id}</span>\n                          <span className=\"actor-modified\">\n                            {new Date(actor.lastModified).toLocaleDateString()}\n                          </span>\n                        </div>\n                        <div className=\"actor-actions\">\n                          <button \n                            onClick={() => loadStagedActor(actor.id)}\n                            className=\"load-btn\"\n                          >\n                            Edit\n                          </button>\n                          <button \n                            onClick={() => deleteStagedActor(actor.id)}\n                            className=\"delete-btn\"\n                          >\n                            üóëÔ∏è\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Main Editor */}\n          <div className={`main-editor ${showActorList ? 'with-sidebar' : ''}`}>\n            {actorDefinition && (\n              <>\n                <div className=\"editor-tabs\">\n                  <button \n                    className={`tab ${activeTab === 'basic' ? 'active' : ''}`}\n                    onClick={() => setActiveTab('basic')}\n                  >\n                    Basic Info\n                  </button>\n                  <button \n                    className={`tab ${activeTab === 'roles' ? 'active' : ''}`}\n                    onClick={() => setActiveTab('roles')}\n                  >\n                    Roles & Qualifications\n                  </button>\n                  <button \n                    className={`tab ${activeTab === 'context' ? 'active' : ''}`}\n                    onClick={() => setActiveTab('context')}\n                  >\n                    Context & Access\n                  </button>\n                  <button \n                    className={`tab ${activeTab === 'metadata' ? 'active' : ''}`}\n                    onClick={() => setActiveTab('metadata')}\n                  >\n                    Metadata\n                  </button>\n                </div>\n\n                <div className=\"tab-content\">\n                  {activeTab === 'basic' && (\n                    <BasicInfoTab\n                      actorDefinition={actorDefinition}\n                      errors={errors}\n                      onFieldChange={handleFieldChange}\n                    />\n                  )}\n                  \n                  {activeTab === 'roles' && (\n                    <RolesTab\n                      actorDefinition={actorDefinition}\n                      errors={errors}\n                      onNestedFieldChange={handleNestedFieldChange}\n                      onAddItem={addArrayItem}\n                      onRemoveItem={removeArrayItem}\n                    />\n                  )}\n                  \n                  {activeTab === 'context' && (\n                    <ContextTab\n                      actorDefinition={actorDefinition}\n                      errors={errors}\n                      onFieldChange={handleFieldChange}\n                      onNestedFieldChange={handleNestedFieldChange}\n                      onAddItem={addArrayItem}\n                      onRemoveItem={removeArrayItem}\n                    />\n                  )}\n                  \n                  {activeTab === 'metadata' && (\n                    <MetadataTab\n                      actorDefinition={actorDefinition}\n                      errors={errors}\n                      onFieldChange={handleFieldChange}\n                      onNestedFieldChange={handleNestedFieldChange}\n                      onAddItem={addArrayItem}\n                      onRemoveItem={removeArrayItem}\n                    />\n                  )}\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* FSH Preview Modal */}\n      {showPreview && (\n        <div className=\"modal-overlay\" onClick={() => setShowPreview(false)}>\n          <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>FSH Preview</h3>\n              <button \n                onClick={() => setShowPreview(false)}\n                className=\"close-btn\"\n              >\n                ‚úï\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <pre className=\"fsh-preview\">{fshPreview}</pre>\n            </div>\n            <div className=\"modal-footer\">\n              <button \n                onClick={() => {\n                  navigator.clipboard.writeText(fshPreview);\n                  alert('FSH copied to clipboard!');\n                }}\n                className=\"copy-btn\"\n              >\n                üìã Copy to Clipboard\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      </div>\n    </PageLayout>\n  );\n};\n\n// Basic Info Tab Component\nconst BasicInfoTab = ({ actorDefinition, errors, onFieldChange }) => (\n  <div className=\"form-section\">\n    <h3>Basic Information</h3>\n    \n    <div className=\"form-group\">\n      <label htmlFor=\"id\">Actor ID *</label>\n      <input\n        type=\"text\"\n        id=\"id\"\n        value={actorDefinition.id}\n        onChange={(e) => onFieldChange('id', e.target.value)}\n        className={errors.id ? 'error' : ''}\n        placeholder=\"e.g., primary-care-physician\"\n        pattern=\"[a-zA-Z][a-zA-Z0-9_-]*\"\n      />\n      {errors.id && <span className=\"error-text\">{errors.id}</span>}\n      <span className=\"help-text\">Unique identifier (letters, numbers, underscores, hyphens only)</span>\n    </div>\n\n    <div className=\"form-group\">\n      <label htmlFor=\"name\">Display Name *</label>\n      <input\n        type=\"text\"\n        id=\"name\"\n        value={actorDefinition.name}\n        onChange={(e) => onFieldChange('name', e.target.value)}\n        className={errors.name ? 'error' : ''}\n        placeholder=\"e.g., Primary Care Physician\"\n      />\n      {errors.name && <span className=\"error-text\">{errors.name}</span>}\n    </div>\n\n    <div className=\"form-group\">\n      <label htmlFor=\"description\">Description *</label>\n      <textarea\n        id=\"description\"\n        value={actorDefinition.description}\n        onChange={(e) => onFieldChange('description', e.target.value)}\n        className={errors.description ? 'error' : ''}\n        placeholder=\"Detailed description of the actor's role and responsibilities...\"\n        rows={4}\n      />\n      {errors.description && <span className=\"error-text\">{errors.description}</span>}\n    </div>\n\n    <div className=\"form-group\">\n      <label htmlFor=\"type\">Actor Type *</label>\n      <select\n        id=\"type\"\n        value={actorDefinition.type}\n        onChange={(e) => onFieldChange('type', e.target.value)}\n        className={errors.type ? 'error' : ''}\n      >\n        <option value=\"person\">Person</option>\n        <option value=\"practitioner\">Practitioner</option>\n        <option value=\"patient\">Patient</option>\n        <option value=\"relatedperson\">Related Person</option>\n        <option value=\"organization\">Organization</option>\n        <option value=\"device\">Device</option>\n        <option value=\"system\">System</option>\n      </select>\n      {errors.type && <span className=\"error-text\">{errors.type}</span>}\n    </div>\n  </div>\n);\n\n// Roles Tab Component\nconst RolesTab = ({ actorDefinition, errors, onNestedFieldChange, onAddItem, onRemoveItem }) => (\n  <div className=\"form-section\">\n    <h3>Roles & Qualifications</h3>\n    \n    <div className=\"subsection\">\n      <div className=\"subsection-header\">\n        <h4>Roles *</h4>\n        <button \n          type=\"button\"\n          onClick={() => onAddItem('roles', { code: '', display: '', system: 'http://snomed.info/sct' })}\n          className=\"add-btn\"\n        >\n          + Add Role\n        </button>\n      </div>\n      {errors.roles && <span className=\"error-text\">{errors.roles}</span>}\n      \n      {actorDefinition.roles && actorDefinition.roles.map((role, index) => (\n        <div key={index} className=\"array-item\">\n          <div className=\"array-item-header\">\n            <span>Role {index + 1}</span>\n            <button \n              type=\"button\"\n              onClick={() => onRemoveItem('roles', index)}\n              className=\"remove-btn\"\n            >\n              Remove\n            </button>\n          </div>\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Code</label>\n              <input\n                type=\"text\"\n                value={role.code}\n                onChange={(e) => onNestedFieldChange('roles', index, 'code', e.target.value)}\n                placeholder=\"Role code\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Display Name</label>\n              <input\n                type=\"text\"\n                value={role.display}\n                onChange={(e) => onNestedFieldChange('roles', index, 'display', e.target.value)}\n                placeholder=\"Human-readable role name\"\n              />\n            </div>\n          </div>\n          <div className=\"form-group\">\n            <label>Code System</label>\n            <input\n              type=\"text\"\n              value={role.system || ''}\n              onChange={(e) => onNestedFieldChange('roles', index, 'system', e.target.value)}\n              placeholder=\"http://snomed.info/sct\"\n            />\n          </div>\n        </div>\n      ))}\n    </div>\n\n    <div className=\"subsection\">\n      <div className=\"subsection-header\">\n        <h4>Qualifications</h4>\n        <button \n          type=\"button\"\n          onClick={() => onAddItem('qualifications', { code: '', display: '', issuer: '' })}\n          className=\"add-btn\"\n        >\n          + Add Qualification\n        </button>\n      </div>\n      \n      {actorDefinition.qualifications && actorDefinition.qualifications.map((qual, index) => (\n        <div key={index} className=\"array-item\">\n          <div className=\"array-item-header\">\n            <span>Qualification {index + 1}</span>\n            <button \n              type=\"button\"\n              onClick={() => onRemoveItem('qualifications', index)}\n              className=\"remove-btn\"\n            >\n              Remove\n            </button>\n          </div>\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Code</label>\n              <input\n                type=\"text\"\n                value={qual.code}\n                onChange={(e) => onNestedFieldChange('qualifications', index, 'code', e.target.value)}\n                placeholder=\"Qualification code\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Display Name</label>\n              <input\n                type=\"text\"\n                value={qual.display}\n                onChange={(e) => onNestedFieldChange('qualifications', index, 'display', e.target.value)}\n                placeholder=\"Qualification name\"\n              />\n            </div>\n          </div>\n          <div className=\"form-group\">\n            <label>Issuing Organization</label>\n            <input\n              type=\"text\"\n              value={qual.issuer || ''}\n              onChange={(e) => onNestedFieldChange('qualifications', index, 'issuer', e.target.value)}\n              placeholder=\"Organization that issued this qualification\"\n            />\n          </div>\n        </div>\n      ))}\n    </div>\n\n    <div className=\"subsection\">\n      <div className=\"subsection-header\">\n        <h4>Specialties</h4>\n        <button \n          type=\"button\"\n          onClick={() => onAddItem('specialties', { code: '', display: '', system: 'http://snomed.info/sct' })}\n          className=\"add-btn\"\n        >\n          + Add Specialty\n        </button>\n      </div>\n      \n      {actorDefinition.specialties && actorDefinition.specialties.map((specialty, index) => (\n        <div key={index} className=\"array-item\">\n          <div className=\"array-item-header\">\n            <span>Specialty {index + 1}</span>\n            <button \n              type=\"button\"\n              onClick={() => onRemoveItem('specialties', index)}\n              className=\"remove-btn\"\n            >\n              Remove\n            </button>\n          </div>\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Code</label>\n              <input\n                type=\"text\"\n                value={specialty.code}\n                onChange={(e) => onNestedFieldChange('specialties', index, 'code', e.target.value)}\n                placeholder=\"Specialty code\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Display Name</label>\n              <input\n                type=\"text\"\n                value={specialty.display}\n                onChange={(e) => onNestedFieldChange('specialties', index, 'display', e.target.value)}\n                placeholder=\"Specialty name\"\n              />\n            </div>\n          </div>\n          <div className=\"form-group\">\n            <label>Code System</label>\n            <input\n              type=\"text\"\n              value={specialty.system || ''}\n              onChange={(e) => onNestedFieldChange('specialties', index, 'system', e.target.value)}\n              placeholder=\"http://snomed.info/sct\"\n            />\n          </div>\n        </div>\n      ))}\n    </div>\n  </div>\n);\n\n// Context Tab Component\nconst ContextTab = ({ actorDefinition, errors, onFieldChange, onNestedFieldChange, onAddItem, onRemoveItem }) => (\n  <div className=\"form-section\">\n    <h3>Context & Access</h3>\n    \n    <div className=\"subsection\">\n      <h4>Typical Location</h4>\n      <div className=\"form-row\">\n        <div className=\"form-group\">\n          <label>Location Type</label>\n          <select\n            value={actorDefinition.location?.type || ''}\n            onChange={(e) => onFieldChange('location', { ...actorDefinition.location, type: e.target.value })}\n          >\n            <option value=\"facility\">Healthcare Facility</option>\n            <option value=\"community\">Community</option>\n            <option value=\"home\">Home</option>\n            <option value=\"mobile\">Mobile</option>\n            <option value=\"virtual\">Virtual/Remote</option>\n          </select>\n        </div>\n        <div className=\"form-group\">\n          <label>Description</label>\n          <input\n            type=\"text\"\n            value={actorDefinition.location?.description || ''}\n            onChange={(e) => onFieldChange('location', { ...actorDefinition.location, description: e.target.value })}\n            placeholder=\"Describe the typical location\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <div className=\"subsection\">\n      <h4>System Access Level</h4>\n      <div className=\"form-group\">\n        <select\n          value={actorDefinition.accessLevel || 'standard'}\n          onChange={(e) => onFieldChange('accessLevel', e.target.value)}\n        >\n          <option value=\"read-only\">Read-Only</option>\n          <option value=\"standard\">Standard</option>\n          <option value=\"administrative\">Administrative</option>\n          <option value=\"system\">System</option>\n        </select>\n      </div>\n    </div>\n\n    <div className=\"subsection\">\n      <div className=\"subsection-header\">\n        <h4>Key Interactions</h4>\n        <button \n          type=\"button\"\n          onClick={() => onAddItem('interactions', { type: 'reads', target: '', description: '' })}\n          className=\"add-btn\"\n        >\n          + Add Interaction\n        </button>\n      </div>\n      \n      {actorDefinition.interactions && actorDefinition.interactions.map((interaction, index) => (\n        <div key={index} className=\"array-item\">\n          <div className=\"array-item-header\">\n            <span>Interaction {index + 1}</span>\n            <button \n              type=\"button\"\n              onClick={() => onRemoveItem('interactions', index)}\n              className=\"remove-btn\"\n            >\n              Remove\n            </button>\n          </div>\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Type</label>\n              <select\n                value={interaction.type}\n                onChange={(e) => onNestedFieldChange('interactions', index, 'type', e.target.value)}\n              >\n                <option value=\"creates\">Creates</option>\n                <option value=\"reads\">Reads</option>\n                <option value=\"updates\">Updates</option>\n                <option value=\"deletes\">Deletes</option>\n                <option value=\"approves\">Approves</option>\n                <option value=\"reviews\">Reviews</option>\n                <option value=\"monitors\">Monitors</option>\n              </select>\n            </div>\n            <div className=\"form-group\">\n              <label>Target</label>\n              <input\n                type=\"text\"\n                value={interaction.target}\n                onChange={(e) => onNestedFieldChange('interactions', index, 'target', e.target.value)}\n                placeholder=\"What the actor interacts with\"\n              />\n            </div>\n          </div>\n          <div className=\"form-group\">\n            <label>Description</label>\n            <input\n              type=\"text\"\n              value={interaction.description || ''}\n              onChange={(e) => onNestedFieldChange('interactions', index, 'description', e.target.value)}\n              placeholder=\"Describe this interaction\"\n            />\n          </div>\n        </div>\n      ))}\n    </div>\n  </div>\n);\n\n// Metadata Tab Component\nconst MetadataTab = ({ actorDefinition, errors, onFieldChange, onNestedFieldChange, onAddItem, onRemoveItem }) => (\n  <div className=\"form-section\">\n    <h3>Metadata</h3>\n    \n    <div className=\"form-row\">\n      <div className=\"form-group\">\n        <label>Version</label>\n        <input\n          type=\"text\"\n          value={actorDefinition.metadata?.version || ''}\n          onChange={(e) => onFieldChange('metadata', { ...actorDefinition.metadata, version: e.target.value })}\n          placeholder=\"1.0.0\"\n        />\n      </div>\n      <div className=\"form-group\">\n        <label>Status</label>\n        <select\n          value={actorDefinition.metadata?.status || 'draft'}\n          onChange={(e) => onFieldChange('metadata', { ...actorDefinition.metadata, status: e.target.value })}\n        >\n          <option value=\"draft\">Draft</option>\n          <option value=\"active\">Active</option>\n          <option value=\"retired\">Retired</option>\n        </select>\n      </div>\n    </div>\n\n    <div className=\"form-group\">\n      <label>Publisher</label>\n      <input\n        type=\"text\"\n        value={actorDefinition.metadata?.publisher || ''}\n        onChange={(e) => onFieldChange('metadata', { ...actorDefinition.metadata, publisher: e.target.value })}\n        placeholder=\"Organization or person responsible\"\n      />\n    </div>\n\n    <div className=\"subsection\">\n      <div className=\"subsection-header\">\n        <h4>Contact Information</h4>\n        <button \n          type=\"button\"\n          onClick={() => onAddItem('metadata.contact', { name: '', email: '' })}\n          className=\"add-btn\"\n        >\n          + Add Contact\n        </button>\n      </div>\n      \n      {actorDefinition.metadata?.contact && actorDefinition.metadata.contact.map((contact, index) => (\n        <div key={index} className=\"array-item\">\n          <div className=\"array-item-header\">\n            <span>Contact {index + 1}</span>\n            <button \n              type=\"button\"\n              onClick={() => {\n                const newContacts = [...(actorDefinition.metadata.contact || [])];\n                newContacts.splice(index, 1);\n                onFieldChange('metadata', { ...actorDefinition.metadata, contact: newContacts });\n              }}\n              className=\"remove-btn\"\n            >\n              Remove\n            </button>\n          </div>\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Name</label>\n              <input\n                type=\"text\"\n                value={contact.name || ''}\n                onChange={(e) => {\n                  const newContacts = [...(actorDefinition.metadata.contact || [])];\n                  newContacts[index] = { ...contact, name: e.target.value };\n                  onFieldChange('metadata', { ...actorDefinition.metadata, contact: newContacts });\n                }}\n                placeholder=\"Contact name\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Email</label>\n              <input\n                type=\"email\"\n                value={contact.email || ''}\n                onChange={(e) => {\n                  const newContacts = [...(actorDefinition.metadata.contact || [])];\n                  newContacts[index] = { ...contact, email: e.target.value };\n                  onFieldChange('metadata', { ...actorDefinition.metadata, contact: newContacts });\n                }}\n                placeholder=\"contact@example.com\"\n              />\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n\n    <div className=\"form-group\">\n      <label>Tags</label>\n      <input\n        type=\"text\"\n        value={actorDefinition.metadata?.tags?.join(', ') || ''}\n        onChange={(e) => onFieldChange('metadata', { \n          ...actorDefinition.metadata, \n          tags: e.target.value.split(',').map(tag => tag.trim()).filter(tag => tag) \n        })}\n        placeholder=\"Enter tags separated by commas\"\n      />\n      <span className=\"help-text\">Comma-separated tags for categorization</span>\n    </div>\n  </div>\n);\n\nexport default ActorEditor;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,sBAAsB,KAAM,oCAAoC,CACvE,OAASC,UAAU,CAAEC,YAAY,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEvD,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,mBACEL,IAAA,CAACH,UAAU,EAACS,QAAQ,CAAC,cAAc,CAAAC,QAAA,cACjCP,IAAA,CAACQ,kBAAkB,GAAE,CAAC,CACZ,CAAC,CAEjB,CAAC,CAED,KAAM,CAAAA,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAAAC,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEe,OAAO,CAAEC,UAAU,CAAEC,MAAO,CAAC,CAAGd,YAAY,CAAC,CAAC,CAEtD;AACA;AACA,KAAM,CAAAe,WAAW,CAAG,IAAI,CAExB;AACA,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAGvB,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACwB,OAAO,CAAEC,UAAU,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC0B,MAAM,CAAEC,SAAS,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAAC4B,MAAM,CAAEC,SAAS,CAAC,CAAG7B,QAAQ,CAAC,CAAC,CAAC,CAAC,CACxC,KAAM,CAAC8B,WAAW,CAAEC,cAAc,CAAC,CAAG/B,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACgC,UAAU,CAAEC,aAAa,CAAC,CAAGjC,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACkC,YAAY,CAAEC,eAAe,CAAC,CAAGnC,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACoC,aAAa,CAAEC,gBAAgB,CAAC,CAAGrC,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACsC,SAAS,CAAEC,YAAY,CAAC,CAAGvC,QAAQ,CAAC,OAAO,CAAC,CAEnD;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuC,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnCf,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACF,GAAIJ,WAAW,CAAE,CACf;AACA,KAAM,CAAAoB,MAAM,CAAGrC,sBAAsB,CAACsC,oBAAoB,CAACrB,WAAW,CAAC,CACvE,GAAIoB,MAAM,CAAE,CACVlB,kBAAkB,CAACkB,MAAM,CAACnB,eAAe,CAAC,CAC5C,CAAC,IAAM,CACL;AACAC,kBAAkB,CAACnB,sBAAsB,CAACuC,0BAA0B,CAAC,CAAC,CAAC,CACzE,CACF,CAAC,IAAM,CACL;AACApB,kBAAkB,CAACnB,sBAAsB,CAACuC,0BAA0B,CAAC,CAAC,CAAC,CACzE,CAEA;AACAR,eAAe,CAAC/B,sBAAsB,CAACwC,gBAAgB,CAAC,CAAC,CAAC,CAE5D,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CACxDhB,SAAS,CAAC,CAAEkB,OAAO,CAAE,6BAA8B,CAAC,CAAC,CACvD,CAEAtB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAEDe,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,CAACnB,WAAW,CAAC,CAAC,CAEjB;AACA,KAAM,CAAA2B,iBAAiB,CAAG9C,WAAW,CAAC,CAAC+C,KAAK,CAAEC,KAAK,GAAK,CACtD3B,kBAAkB,CAAC4B,IAAI,GAAK,CAC1B,GAAGA,IAAI,CACP,CAACF,KAAK,EAAGC,KACX,CAAC,CAAC,CAAC,CAEH;AACA,GAAItB,MAAM,CAACqB,KAAK,CAAC,CAAE,CACjBpB,SAAS,CAACsB,IAAI,EAAI,CAChB,KAAM,CAAAC,SAAS,CAAG,CAAE,GAAGD,IAAK,CAAC,CAC7B,MAAO,CAAAC,SAAS,CAACH,KAAK,CAAC,CACvB,MAAO,CAAAG,SAAS,CAClB,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACxB,MAAM,CAAC,CAAC,CAEZ;AACA,KAAM,CAAAyB,uBAAuB,CAAGnD,WAAW,CAAC,CAACoD,WAAW,CAAEC,KAAK,CAAEN,KAAK,CAAEC,KAAK,GAAK,CAChF3B,kBAAkB,CAAC4B,IAAI,EAAI,CACzB,KAAM,CAAAK,aAAa,CAAG,CAAE,GAAGL,IAAK,CAAC,CACjC,GAAI,CAACK,aAAa,CAACF,WAAW,CAAC,CAAE,CAC/BE,aAAa,CAACF,WAAW,CAAC,CAAG,EAAE,CACjC,CAEA,GAAI,CAACE,aAAa,CAACF,WAAW,CAAC,CAACC,KAAK,CAAC,CAAE,CACtCC,aAAa,CAACF,WAAW,CAAC,CAACC,KAAK,CAAC,CAAG,CAAC,CAAC,CACxC,CAEAC,aAAa,CAACF,WAAW,CAAC,CAACC,KAAK,CAAC,CAACN,KAAK,CAAC,CAAGC,KAAK,CAChD,MAAO,CAAAM,aAAa,CACtB,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAC,YAAY,CAAGvD,WAAW,CAAC,SAAC+C,KAAK,CAAuB,IAArB,CAAAS,WAAW,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CACvDpC,kBAAkB,CAAC4B,IAAI,GAAK,CAC1B,GAAGA,IAAI,CACP,CAACF,KAAK,EAAG,CAAC,IAAIE,IAAI,CAACF,KAAK,CAAC,EAAI,EAAE,CAAC,CAAES,WAAW,CAC/C,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAI,eAAe,CAAG5D,WAAW,CAAC,CAAC+C,KAAK,CAAEM,KAAK,GAAK,CACpDhC,kBAAkB,CAAC4B,IAAI,GAAK,CAC1B,GAAGA,IAAI,CACP,CAACF,KAAK,EAAGE,IAAI,CAACF,KAAK,CAAC,CAACc,MAAM,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKV,KAAK,CACnD,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAW,YAAY,CAAGhE,WAAW,CAAC,IAAM,CACrC,GAAI,CAACoB,eAAe,CAAE,MAAO,MAAK,CAElC,KAAM,CAAA6C,UAAU,CAAG/D,sBAAsB,CAACgE,uBAAuB,CAAC9C,eAAe,CAAC,CAElF,GAAI,CAAC6C,UAAU,CAACE,OAAO,CAAE,CACvB,KAAM,CAAAC,WAAW,CAAG,CAAC,CAAC,CACtBH,UAAU,CAACvC,MAAM,CAAC2C,OAAO,CAAC1B,KAAK,EAAI,CACjC,GAAIA,KAAK,CAAC2B,QAAQ,CAAC,IAAI,CAAC,CAAEF,WAAW,CAACG,EAAE,CAAG5B,KAAK,CAAC,IAC5C,IAAIA,KAAK,CAAC2B,QAAQ,CAAC,MAAM,CAAC,CAAEF,WAAW,CAACI,IAAI,CAAG7B,KAAK,CAAC,IACrD,IAAIA,KAAK,CAAC2B,QAAQ,CAAC,aAAa,CAAC,CAAEF,WAAW,CAACK,WAAW,CAAG9B,KAAK,CAAC,IACnE,IAAIA,KAAK,CAAC2B,QAAQ,CAAC,MAAM,CAAC,CAAEF,WAAW,CAACM,IAAI,CAAG/B,KAAK,CAAC,IACrD,IAAIA,KAAK,CAAC2B,QAAQ,CAAC,MAAM,CAAC,CAAEF,WAAW,CAACO,KAAK,CAAGhC,KAAK,CAAC,IACtD,CAAAyB,WAAW,CAACvB,OAAO,CAAGF,KAAK,CAClC,CAAC,CAAC,CACFhB,SAAS,CAACyC,WAAW,CAAC,CACtB,MAAO,MAAK,CACd,CAEAzC,SAAS,CAAC,CAAC,CAAC,CAAC,CACb,MAAO,KAAI,CACb,CAAC,CAAE,CAACP,eAAe,CAAC,CAAC,CAErB;AACA,KAAM,CAAAwD,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CAACZ,YAAY,CAAC,CAAC,CAAE,CACnB,OACF,CAEAvC,SAAS,CAAC,IAAI,CAAC,CAEf,GAAI,CACF,KAAM,CAAAc,MAAM,CAAG,KAAM,CAAArC,sBAAsB,CAAC2E,mBAAmB,CAACzD,eAAe,CAAC,CAEhF,GAAImB,MAAM,CAACuC,OAAO,CAAE,CAClB;AACA7C,eAAe,CAAC/B,sBAAsB,CAACwC,gBAAgB,CAAC,CAAC,CAAC,CAE1D;AACAqC,KAAK,CAAC,wDAAwD,CAAC,CAE/D;AACA,GAAI,CAAC5D,WAAW,CAAE,CAChBJ,QAAQ,CAAC,iBAAiBC,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEgE,KAAK,IAAI/D,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEuD,IAAI,GAAGtD,MAAM,EAAIA,MAAM,GAAK,MAAM,CAAG,IAAIA,MAAM,EAAE,CAAG,EAAE,EAAE,CAAC,CACnH,CACF,CAAC,IAAM,CACLS,SAAS,CAAC,CAAEkB,OAAO,CAAEN,MAAM,CAACI,KAAM,CAAC,CAAC,CACtC,CACF,CAAE,MAAOA,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtDhB,SAAS,CAAC,CAAEkB,OAAO,CAAE,iCAAkC,CAAC,CAAC,CAC3D,CAEApB,SAAS,CAAC,KAAK,CAAC,CAClB,CAAC,CAED;AACA,KAAM,CAAAwD,eAAe,CAAGjF,WAAW,CAAC,IAAM,CACxC,GAAI,CAACoB,eAAe,CAAE,OAEtB,GAAI,CACF,KAAM,CAAA8D,GAAG,CAAGhF,sBAAsB,CAACiF,WAAW,CAAC/D,eAAe,CAAC,CAC/DW,aAAa,CAACmD,GAAG,CAAC,CAClBrD,cAAc,CAAC,IAAI,CAAC,CACtB,CAAE,MAAOc,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrDhB,SAAS,CAAC,CAAEkB,OAAO,CAAE,gCAAiC,CAAC,CAAC,CAC1D,CACF,CAAC,CAAE,CAACzB,eAAe,CAAC,CAAC,CAErB;AACA,KAAM,CAAAgE,YAAY,CAAIC,QAAQ,EAAK,CACjChE,kBAAkB,CAAC,CACjB,GAAGnB,sBAAsB,CAACuC,0BAA0B,CAAC,CAAC,CACtD,GAAG4C,QAAQ,CACXC,QAAQ,CAAE,CACR,GAAGpF,sBAAsB,CAACuC,0BAA0B,CAAC,CAAC,CAAC6C,QAAQ,CAC/D,GAAGD,QAAQ,CAACC,QACd,CACF,CAAC,CAAC,CACF3D,SAAS,CAAC,CAAC,CAAC,CAAC,CACf,CAAC,CAED;AACA,KAAM,CAAA4D,eAAe,CAAIC,OAAO,EAAK,CACnC,KAAM,CAAAjD,MAAM,CAAGrC,sBAAsB,CAACsC,oBAAoB,CAACgD,OAAO,CAAC,CACnE,GAAIjD,MAAM,CAAE,CACVlB,kBAAkB,CAACkB,MAAM,CAACnB,eAAe,CAAC,CAC1CO,SAAS,CAAC,CAAC,CAAC,CAAC,CACbQ,gBAAgB,CAAC,KAAK,CAAC,CAEvB;AACApB,QAAQ,CAAC,iBAAiBC,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEgE,KAAK,IAAI/D,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEuD,IAAI,GAAGtD,MAAM,EAAIA,MAAM,GAAK,MAAM,CAAG,IAAIA,MAAM,EAAE,CAAG,EAAE,EAAE,CAAC,CACnH,CACF,CAAC,CAED;AACA,KAAM,CAAAuE,iBAAiB,CAAID,OAAO,EAAK,CACrC,GAAIE,MAAM,CAACC,OAAO,CAAC,8CAA8CH,OAAO,IAAI,CAAC,CAAE,CAC7E,KAAM,CAAAV,OAAO,CAAG5E,sBAAsB,CAAC0F,uBAAuB,CAACJ,OAAO,CAAC,CACvE,GAAIV,OAAO,CAAE,CACX7C,eAAe,CAAC/B,sBAAsB,CAACwC,gBAAgB,CAAC,CAAC,CAAC,CAE1D;AACA,GAAIvB,WAAW,GAAKqE,OAAO,CAAE,CAC3BnE,kBAAkB,CAACnB,sBAAsB,CAACuC,0BAA0B,CAAC,CAAC,CAAC,CACvE1B,QAAQ,CAAC,iBAAiBC,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEgE,KAAK,IAAI/D,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEuD,IAAI,GAAGtD,MAAM,EAAIA,MAAM,GAAK,MAAM,CAAG,IAAIA,MAAM,EAAE,CAAG,EAAE,EAAE,CAAC,CACnH,CACF,CACF,CACF,CAAC,CAID;AACAnB,SAAS,CAAC,IAAM,CACd,GAAI,CAACiB,OAAO,EAAI,CAACC,UAAU,CAAE,CAC3BF,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAAE,CAACC,OAAO,CAAEC,UAAU,CAAEF,QAAQ,CAAC,CAAC,CAEnC,GAAI,CAACC,OAAO,EAAI,CAACC,UAAU,CAAE,CAC3B,mBACEX,IAAA,CAACH,UAAU,EAACS,QAAQ,CAAC,cAAc,CAAAC,QAAA,cACjCP,IAAA,QAAKuF,SAAS,CAAC,cAAc,CAAAhF,QAAA,cAC3BL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,OAAAO,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBP,IAAA,MAAAO,QAAA,CAAG,uDAAqD,CAAG,CAAC,EACzD,CAAC,CACH,CAAC,CACI,CAAC,CAEjB,CAEA,GAAIS,OAAO,CAAE,CACX,mBACEhB,IAAA,CAACH,UAAU,EAACS,QAAQ,CAAC,cAAc,CAAAC,QAAA,cACjCP,IAAA,QAAKuF,SAAS,CAAC,4BAA4B,CAAAhF,QAAA,cACzCL,KAAA,QAAKqF,SAAS,CAAC,iBAAiB,CAAAhF,QAAA,eAC9BP,IAAA,OAAAO,QAAA,CAAI,yBAAuB,CAAI,CAAC,cAChCP,IAAA,MAAAO,QAAA,CAAG,yCAAuC,CAAG,CAAC,EAC3C,CAAC,CACH,CAAC,CACI,CAAC,CAEjB,CAEA,mBACEP,IAAA,CAACH,UAAU,EAACS,QAAQ,CAAC,cAAc,CAAAC,QAAA,cACjCL,KAAA,QAAKqF,SAAS,CAAC,cAAc,CAAAhF,QAAA,eAC3BL,KAAA,QAAKqF,SAAS,CAAC,gBAAgB,CAAAhF,QAAA,eAE/BL,KAAA,QAAKqF,SAAS,CAAC,gBAAgB,CAAAhF,QAAA,eAC7BL,KAAA,QAAKqF,SAAS,CAAC,cAAc,CAAAhF,QAAA,eAC3BL,KAAA,WACEsF,OAAO,CAAEA,CAAA,GAAM3D,gBAAgB,CAAC,CAACD,aAAa,CAAE,CAChD2D,SAAS,CAAC,aAAa,CACvBE,KAAK,CAAC,sBAAsB,CAAAlF,QAAA,EAC7B,8BACmB,CAACmB,YAAY,CAAC0B,MAAM,CAAC,GACzC,EAAQ,CAAC,cACTpD,IAAA,WACEwF,OAAO,CAAEb,eAAgB,CACzBY,SAAS,CAAC,aAAa,CACvBG,QAAQ,CAAE,EAAC5E,eAAe,SAAfA,eAAe,WAAfA,eAAe,CAAEmD,EAAE,CAAC,CAC/BwB,KAAK,CAAC,oBAAoB,CAAAlF,QAAA,CAC3B,gCAED,CAAQ,CAAC,EACN,CAAC,cACNP,IAAA,QAAKuF,SAAS,CAAC,eAAe,CAAAhF,QAAA,cAC5BP,IAAA,WACEwF,OAAO,CAAElB,UAAW,CACpBoB,QAAQ,CAAExE,MAAM,EAAI,EAACJ,eAAe,SAAfA,eAAe,WAAfA,eAAe,CAAEmD,EAAE,CAAC,CACzCsB,SAAS,CAAC,qBAAqB,CAC/BE,KAAK,CAAC,wBAAwB,CAAAlF,QAAA,CAE7BW,MAAM,CAAG,cAAc,CAAG,SAAS,CAC9B,CAAC,CACN,CAAC,EACH,CAAC,CAELE,MAAM,CAACmB,OAAO,eACbrC,KAAA,QAAKqF,SAAS,CAAC,eAAe,CAAAhF,QAAA,eAC5BP,IAAA,WAAAO,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACa,MAAM,CAACmB,OAAO,EACpC,CACN,cAEDrC,KAAA,QAAKqF,SAAS,CAAC,eAAe,CAAAhF,QAAA,EAE3BqB,aAAa,eACZ1B,KAAA,QAAKqF,SAAS,CAAC,oBAAoB,CAAAhF,QAAA,eACjCL,KAAA,QAAKqF,SAAS,CAAC,gBAAgB,CAAAhF,QAAA,eAC7BP,IAAA,OAAAO,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBP,IAAA,WACEwF,OAAO,CAAEA,CAAA,GAAM3D,gBAAgB,CAAC,KAAK,CAAE,CACvC0D,SAAS,CAAC,WAAW,CAAAhF,QAAA,CACtB,QAED,CAAQ,CAAC,EACN,CAAC,cACNL,KAAA,QAAKqF,SAAS,CAAC,iBAAiB,CAAAhF,QAAA,eAC9BL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,OAAAO,QAAA,CAAI,WAAS,CAAI,CAAC,CACjBX,sBAAsB,CAAC+F,iBAAiB,CAAC,CAAC,CAACC,GAAG,CAACb,QAAQ,eACtD7E,KAAA,QAAuBqF,SAAS,CAAC,eAAe,CAAAhF,QAAA,eAC9CP,IAAA,SAAMuF,SAAS,CAAC,eAAe,CAAAhF,QAAA,CAAEwE,QAAQ,CAACb,IAAI,CAAO,CAAC,cACtDlE,IAAA,WACEwF,OAAO,CAAEA,CAAA,GAAMV,YAAY,CAACC,QAAQ,CAAE,CACtCQ,SAAS,CAAC,UAAU,CAAAhF,QAAA,CACrB,KAED,CAAQ,CAAC,GAPDwE,QAAQ,CAACd,EAQd,CACN,CAAC,EACC,CAAC,CAELvC,YAAY,CAAC0B,MAAM,CAAG,CAAC,eACtBlD,KAAA,QAAKqF,SAAS,CAAC,uBAAuB,CAAAhF,QAAA,eACpCP,IAAA,OAAAO,QAAA,CAAI,eAAa,CAAI,CAAC,CACrBmB,YAAY,CAACkE,GAAG,CAACC,KAAK,eACrB3F,KAAA,QAAoBqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAC/CL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,SAAMuF,SAAS,CAAC,YAAY,CAAAhF,QAAA,CAAEsF,KAAK,CAAC3B,IAAI,CAAO,CAAC,cAChDlE,IAAA,SAAMuF,SAAS,CAAC,UAAU,CAAAhF,QAAA,CAAEsF,KAAK,CAAC5B,EAAE,CAAO,CAAC,cAC5CjE,IAAA,SAAMuF,SAAS,CAAC,gBAAgB,CAAAhF,QAAA,CAC7B,GAAI,CAAAuF,IAAI,CAACD,KAAK,CAACE,YAAY,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAC9C,CAAC,EACJ,CAAC,cACN9F,KAAA,QAAKqF,SAAS,CAAC,eAAe,CAAAhF,QAAA,eAC5BP,IAAA,WACEwF,OAAO,CAAEA,CAAA,GAAMP,eAAe,CAACY,KAAK,CAAC5B,EAAE,CAAE,CACzCsB,SAAS,CAAC,UAAU,CAAAhF,QAAA,CACrB,MAED,CAAQ,CAAC,cACTP,IAAA,WACEwF,OAAO,CAAEA,CAAA,GAAML,iBAAiB,CAACU,KAAK,CAAC5B,EAAE,CAAE,CAC3CsB,SAAS,CAAC,YAAY,CAAAhF,QAAA,CACvB,oBAED,CAAQ,CAAC,EACN,CAAC,GArBEsF,KAAK,CAAC5B,EAsBX,CACN,CAAC,EACC,CACN,EACE,CAAC,EACH,CACN,cAGDjE,IAAA,QAAKuF,SAAS,CAAE,eAAe3D,aAAa,CAAG,cAAc,CAAG,EAAE,EAAG,CAAArB,QAAA,CAClEO,eAAe,eACdZ,KAAA,CAAAE,SAAA,EAAAG,QAAA,eACEL,KAAA,QAAKqF,SAAS,CAAC,aAAa,CAAAhF,QAAA,eAC1BP,IAAA,WACEuF,SAAS,CAAE,OAAOzD,SAAS,GAAK,OAAO,CAAG,QAAQ,CAAG,EAAE,EAAG,CAC1D0D,OAAO,CAAEA,CAAA,GAAMzD,YAAY,CAAC,OAAO,CAAE,CAAAxB,QAAA,CACtC,YAED,CAAQ,CAAC,cACTP,IAAA,WACEuF,SAAS,CAAE,OAAOzD,SAAS,GAAK,OAAO,CAAG,QAAQ,CAAG,EAAE,EAAG,CAC1D0D,OAAO,CAAEA,CAAA,GAAMzD,YAAY,CAAC,OAAO,CAAE,CAAAxB,QAAA,CACtC,wBAED,CAAQ,CAAC,cACTP,IAAA,WACEuF,SAAS,CAAE,OAAOzD,SAAS,GAAK,SAAS,CAAG,QAAQ,CAAG,EAAE,EAAG,CAC5D0D,OAAO,CAAEA,CAAA,GAAMzD,YAAY,CAAC,SAAS,CAAE,CAAAxB,QAAA,CACxC,kBAED,CAAQ,CAAC,cACTP,IAAA,WACEuF,SAAS,CAAE,OAAOzD,SAAS,GAAK,UAAU,CAAG,QAAQ,CAAG,EAAE,EAAG,CAC7D0D,OAAO,CAAEA,CAAA,GAAMzD,YAAY,CAAC,UAAU,CAAE,CAAAxB,QAAA,CACzC,UAED,CAAQ,CAAC,EACN,CAAC,cAENL,KAAA,QAAKqF,SAAS,CAAC,aAAa,CAAAhF,QAAA,EACzBuB,SAAS,GAAK,OAAO,eACpB9B,IAAA,CAACiG,YAAY,EACXnF,eAAe,CAAEA,eAAgB,CACjCM,MAAM,CAAEA,MAAO,CACf8E,aAAa,CAAE1D,iBAAkB,CAClC,CACF,CAEAV,SAAS,GAAK,OAAO,eACpB9B,IAAA,CAACmG,QAAQ,EACPrF,eAAe,CAAEA,eAAgB,CACjCM,MAAM,CAAEA,MAAO,CACfgF,mBAAmB,CAAEvD,uBAAwB,CAC7CwD,SAAS,CAAEpD,YAAa,CACxBqD,YAAY,CAAEhD,eAAgB,CAC/B,CACF,CAEAxB,SAAS,GAAK,SAAS,eACtB9B,IAAA,CAACuG,UAAU,EACTzF,eAAe,CAAEA,eAAgB,CACjCM,MAAM,CAAEA,MAAO,CACf8E,aAAa,CAAE1D,iBAAkB,CACjC4D,mBAAmB,CAAEvD,uBAAwB,CAC7CwD,SAAS,CAAEpD,YAAa,CACxBqD,YAAY,CAAEhD,eAAgB,CAC/B,CACF,CAEAxB,SAAS,GAAK,UAAU,eACvB9B,IAAA,CAACwG,WAAW,EACV1F,eAAe,CAAEA,eAAgB,CACjCM,MAAM,CAAEA,MAAO,CACf8E,aAAa,CAAE1D,iBAAkB,CACjC4D,mBAAmB,CAAEvD,uBAAwB,CAC7CwD,SAAS,CAAEpD,YAAa,CACxBqD,YAAY,CAAEhD,eAAgB,CAC/B,CACF,EACE,CAAC,EACN,CACH,CACE,CAAC,EACH,CAAC,EACH,CAAC,CAGLhC,WAAW,eACVtB,IAAA,QAAKuF,SAAS,CAAC,eAAe,CAACC,OAAO,CAAEA,CAAA,GAAMjE,cAAc,CAAC,KAAK,CAAE,CAAAhB,QAAA,cAClEL,KAAA,QAAKqF,SAAS,CAAC,eAAe,CAACC,OAAO,CAAEiB,CAAC,EAAIA,CAAC,CAACC,eAAe,CAAC,CAAE,CAAAnG,QAAA,eAC/DL,KAAA,QAAKqF,SAAS,CAAC,cAAc,CAAAhF,QAAA,eAC3BP,IAAA,OAAAO,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBP,IAAA,WACEwF,OAAO,CAAEA,CAAA,GAAMjE,cAAc,CAAC,KAAK,CAAE,CACrCgE,SAAS,CAAC,WAAW,CAAAhF,QAAA,CACtB,QAED,CAAQ,CAAC,EACN,CAAC,cACNP,IAAA,QAAKuF,SAAS,CAAC,YAAY,CAAAhF,QAAA,cACzBP,IAAA,QAAKuF,SAAS,CAAC,aAAa,CAAAhF,QAAA,CAAEiB,UAAU,CAAM,CAAC,CAC5C,CAAC,cACNxB,IAAA,QAAKuF,SAAS,CAAC,cAAc,CAAAhF,QAAA,cAC3BP,IAAA,WACEwF,OAAO,CAAEA,CAAA,GAAM,CACbmB,SAAS,CAACC,SAAS,CAACC,SAAS,CAACrF,UAAU,CAAC,CACzCiD,KAAK,CAAC,0BAA0B,CAAC,CACnC,CAAE,CACFc,SAAS,CAAC,UAAU,CAAAhF,QAAA,CACrB,gCAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,CACH,CACN,EAEI,CAAC,CACI,CAAC,CAEjB,CAAC,CAED;AACA,KAAM,CAAA0F,YAAY,CAAGa,IAAA,MAAC,CAAEhG,eAAe,CAAEM,MAAM,CAAE8E,aAAc,CAAC,CAAAY,IAAA,oBAC9D5G,KAAA,QAAKqF,SAAS,CAAC,cAAc,CAAAhF,QAAA,eAC3BP,IAAA,OAAAO,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAE1BL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAO+G,OAAO,CAAC,IAAI,CAAAxG,QAAA,CAAC,YAAU,CAAO,CAAC,cACtCP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACXH,EAAE,CAAC,IAAI,CACPvB,KAAK,CAAE5B,eAAe,CAACmD,EAAG,CAC1B+C,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,IAAI,CAAEO,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACrD6C,SAAS,CAAEnE,MAAM,CAAC6C,EAAE,CAAG,OAAO,CAAG,EAAG,CACpCiD,WAAW,CAAC,8BAA8B,CAC1CC,OAAO,CAAC,wBAAwB,CACjC,CAAC,CACD/F,MAAM,CAAC6C,EAAE,eAAIjE,IAAA,SAAMuF,SAAS,CAAC,YAAY,CAAAhF,QAAA,CAAEa,MAAM,CAAC6C,EAAE,CAAO,CAAC,cAC7DjE,IAAA,SAAMuF,SAAS,CAAC,WAAW,CAAAhF,QAAA,CAAC,iEAA+D,CAAM,CAAC,EAC/F,CAAC,cAENL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAO+G,OAAO,CAAC,MAAM,CAAAxG,QAAA,CAAC,gBAAc,CAAO,CAAC,cAC5CP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACXH,EAAE,CAAC,MAAM,CACTvB,KAAK,CAAE5B,eAAe,CAACoD,IAAK,CAC5B8C,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,MAAM,CAAEO,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACvD6C,SAAS,CAAEnE,MAAM,CAAC8C,IAAI,CAAG,OAAO,CAAG,EAAG,CACtCgD,WAAW,CAAC,8BAA8B,CAC3C,CAAC,CACD9F,MAAM,CAAC8C,IAAI,eAAIlE,IAAA,SAAMuF,SAAS,CAAC,YAAY,CAAAhF,QAAA,CAAEa,MAAM,CAAC8C,IAAI,CAAO,CAAC,EAC9D,CAAC,cAENhE,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAO+G,OAAO,CAAC,aAAa,CAAAxG,QAAA,CAAC,eAAa,CAAO,CAAC,cAClDP,IAAA,aACEiE,EAAE,CAAC,aAAa,CAChBvB,KAAK,CAAE5B,eAAe,CAACqD,WAAY,CACnC6C,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,aAAa,CAAEO,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CAC9D6C,SAAS,CAAEnE,MAAM,CAAC+C,WAAW,CAAG,OAAO,CAAG,EAAG,CAC7C+C,WAAW,CAAC,kEAAkE,CAC9EE,IAAI,CAAE,CAAE,CACT,CAAC,CACDhG,MAAM,CAAC+C,WAAW,eAAInE,IAAA,SAAMuF,SAAS,CAAC,YAAY,CAAAhF,QAAA,CAAEa,MAAM,CAAC+C,WAAW,CAAO,CAAC,EAC5E,CAAC,cAENjE,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAO+G,OAAO,CAAC,MAAM,CAAAxG,QAAA,CAAC,cAAY,CAAO,CAAC,cAC1CL,KAAA,WACE+D,EAAE,CAAC,MAAM,CACTvB,KAAK,CAAE5B,eAAe,CAACsD,IAAK,CAC5B4C,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,MAAM,CAAEO,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACvD6C,SAAS,CAAEnE,MAAM,CAACgD,IAAI,CAAG,OAAO,CAAG,EAAG,CAAA7D,QAAA,eAEtCP,IAAA,WAAQ0C,KAAK,CAAC,QAAQ,CAAAnC,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtCP,IAAA,WAAQ0C,KAAK,CAAC,cAAc,CAAAnC,QAAA,CAAC,cAAY,CAAQ,CAAC,cAClDP,IAAA,WAAQ0C,KAAK,CAAC,SAAS,CAAAnC,QAAA,CAAC,SAAO,CAAQ,CAAC,cACxCP,IAAA,WAAQ0C,KAAK,CAAC,eAAe,CAAAnC,QAAA,CAAC,gBAAc,CAAQ,CAAC,cACrDP,IAAA,WAAQ0C,KAAK,CAAC,cAAc,CAAAnC,QAAA,CAAC,cAAY,CAAQ,CAAC,cAClDP,IAAA,WAAQ0C,KAAK,CAAC,QAAQ,CAAAnC,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtCP,IAAA,WAAQ0C,KAAK,CAAC,QAAQ,CAAAnC,QAAA,CAAC,QAAM,CAAQ,CAAC,EAChC,CAAC,CACRa,MAAM,CAACgD,IAAI,eAAIpE,IAAA,SAAMuF,SAAS,CAAC,YAAY,CAAAhF,QAAA,CAAEa,MAAM,CAACgD,IAAI,CAAO,CAAC,EAC9D,CAAC,EACH,CAAC,EACP,CAED;AACA,KAAM,CAAA+B,QAAQ,CAAGkB,KAAA,MAAC,CAAEvG,eAAe,CAAEM,MAAM,CAAEgF,mBAAmB,CAAEC,SAAS,CAAEC,YAAa,CAAC,CAAAe,KAAA,oBACzFnH,KAAA,QAAKqF,SAAS,CAAC,cAAc,CAAAhF,QAAA,eAC3BP,IAAA,OAAAO,QAAA,CAAI,wBAAsB,CAAI,CAAC,cAE/BL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,OAAAO,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBP,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAMa,SAAS,CAAC,OAAO,CAAE,CAAEiB,IAAI,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAE,CAAEC,MAAM,CAAE,wBAAyB,CAAC,CAAE,CAC/FjC,SAAS,CAAC,SAAS,CAAAhF,QAAA,CACpB,YAED,CAAQ,CAAC,EACN,CAAC,CACLa,MAAM,CAACiD,KAAK,eAAIrE,IAAA,SAAMuF,SAAS,CAAC,YAAY,CAAAhF,QAAA,CAAEa,MAAM,CAACiD,KAAK,CAAO,CAAC,CAElEvD,eAAe,CAACuD,KAAK,EAAIvD,eAAe,CAACuD,KAAK,CAACuB,GAAG,CAAC,CAAC6B,IAAI,CAAE1E,KAAK,gBAC9D7C,KAAA,QAAiBqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACrCL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCL,KAAA,SAAAK,QAAA,EAAM,OAAK,CAACwC,KAAK,CAAG,CAAC,EAAO,CAAC,cAC7B/C,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAMc,YAAY,CAAC,OAAO,CAAEvD,KAAK,CAAE,CAC5CwC,SAAS,CAAC,YAAY,CAAAhF,QAAA,CACvB,QAED,CAAQ,CAAC,EACN,CAAC,cACNL,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAhF,QAAA,eACvBL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAE+E,IAAI,CAACH,IAAK,CACjBN,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,OAAO,CAAErD,KAAK,CAAE,MAAM,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CAC7EwE,WAAW,CAAC,WAAW,CACxB,CAAC,EACC,CAAC,cACNhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,cAAY,CAAO,CAAC,cAC3BP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAE+E,IAAI,CAACF,OAAQ,CACpBP,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,OAAO,CAAErD,KAAK,CAAE,SAAS,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CAChFwE,WAAW,CAAC,0BAA0B,CACvC,CAAC,EACC,CAAC,EACH,CAAC,cACNhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAE+E,IAAI,CAACD,MAAM,EAAI,EAAG,CACzBR,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,OAAO,CAAErD,KAAK,CAAE,QAAQ,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CAC/EwE,WAAW,CAAC,wBAAwB,CACrC,CAAC,EACC,CAAC,GAvCEnE,KAwCL,CACN,CAAC,EACC,CAAC,cAEN7C,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,OAAAO,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBP,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAMa,SAAS,CAAC,gBAAgB,CAAE,CAAEiB,IAAI,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAE,CAAEG,MAAM,CAAE,EAAG,CAAC,CAAE,CAClFnC,SAAS,CAAC,SAAS,CAAAhF,QAAA,CACpB,qBAED,CAAQ,CAAC,EACN,CAAC,CAELO,eAAe,CAAC6G,cAAc,EAAI7G,eAAe,CAAC6G,cAAc,CAAC/B,GAAG,CAAC,CAACgC,IAAI,CAAE7E,KAAK,gBAChF7C,KAAA,QAAiBqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACrCL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCL,KAAA,SAAAK,QAAA,EAAM,gBAAc,CAACwC,KAAK,CAAG,CAAC,EAAO,CAAC,cACtC/C,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAMc,YAAY,CAAC,gBAAgB,CAAEvD,KAAK,CAAE,CACrDwC,SAAS,CAAC,YAAY,CAAAhF,QAAA,CACvB,QAED,CAAQ,CAAC,EACN,CAAC,cACNL,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAhF,QAAA,eACvBL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAEkF,IAAI,CAACN,IAAK,CACjBN,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,gBAAgB,CAAErD,KAAK,CAAE,MAAM,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACtFwE,WAAW,CAAC,oBAAoB,CACjC,CAAC,EACC,CAAC,cACNhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,cAAY,CAAO,CAAC,cAC3BP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAEkF,IAAI,CAACL,OAAQ,CACpBP,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,gBAAgB,CAAErD,KAAK,CAAE,SAAS,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACzFwE,WAAW,CAAC,oBAAoB,CACjC,CAAC,EACC,CAAC,EACH,CAAC,cACNhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,sBAAoB,CAAO,CAAC,cACnCP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAEkF,IAAI,CAACF,MAAM,EAAI,EAAG,CACzBV,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,gBAAgB,CAAErD,KAAK,CAAE,QAAQ,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACxFwE,WAAW,CAAC,6CAA6C,CAC1D,CAAC,EACC,CAAC,GAvCEnE,KAwCL,CACN,CAAC,EACC,CAAC,cAEN7C,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,OAAAO,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBP,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAMa,SAAS,CAAC,aAAa,CAAE,CAAEiB,IAAI,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAE,CAAEC,MAAM,CAAE,wBAAyB,CAAC,CAAE,CACrGjC,SAAS,CAAC,SAAS,CAAAhF,QAAA,CACpB,iBAED,CAAQ,CAAC,EACN,CAAC,CAELO,eAAe,CAAC+G,WAAW,EAAI/G,eAAe,CAAC+G,WAAW,CAACjC,GAAG,CAAC,CAACkC,SAAS,CAAE/E,KAAK,gBAC/E7C,KAAA,QAAiBqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACrCL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCL,KAAA,SAAAK,QAAA,EAAM,YAAU,CAACwC,KAAK,CAAG,CAAC,EAAO,CAAC,cAClC/C,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAMc,YAAY,CAAC,aAAa,CAAEvD,KAAK,CAAE,CAClDwC,SAAS,CAAC,YAAY,CAAAhF,QAAA,CACvB,QAED,CAAQ,CAAC,EACN,CAAC,cACNL,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAhF,QAAA,eACvBL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAEoF,SAAS,CAACR,IAAK,CACtBN,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,aAAa,CAAErD,KAAK,CAAE,MAAM,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACnFwE,WAAW,CAAC,gBAAgB,CAC7B,CAAC,EACC,CAAC,cACNhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,cAAY,CAAO,CAAC,cAC3BP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAEoF,SAAS,CAACP,OAAQ,CACzBP,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,aAAa,CAAErD,KAAK,CAAE,SAAS,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACtFwE,WAAW,CAAC,gBAAgB,CAC7B,CAAC,EACC,CAAC,EACH,CAAC,cACNhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAEoF,SAAS,CAACN,MAAM,EAAI,EAAG,CAC9BR,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,aAAa,CAAErD,KAAK,CAAE,QAAQ,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACrFwE,WAAW,CAAC,wBAAwB,CACrC,CAAC,EACC,CAAC,GAvCEnE,KAwCL,CACN,CAAC,EACC,CAAC,EACH,CAAC,EACP,CAED;AACA,KAAM,CAAAwD,UAAU,CAAGwB,KAAA,OAAAC,qBAAA,CAAAC,sBAAA,IAAC,CAAEnH,eAAe,CAAEM,MAAM,CAAE8E,aAAa,CAAEE,mBAAmB,CAAEC,SAAS,CAAEC,YAAa,CAAC,CAAAyB,KAAA,oBAC1G7H,KAAA,QAAKqF,SAAS,CAAC,cAAc,CAAAhF,QAAA,eAC3BP,IAAA,OAAAO,QAAA,CAAI,kBAAgB,CAAI,CAAC,cAEzBL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,OAAAO,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBL,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAhF,QAAA,eACvBL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,eAAa,CAAO,CAAC,cAC5BL,KAAA,WACEwC,KAAK,CAAE,EAAAsF,qBAAA,CAAAlH,eAAe,CAACoH,QAAQ,UAAAF,qBAAA,iBAAxBA,qBAAA,CAA0B5D,IAAI,GAAI,EAAG,CAC5C4C,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,UAAU,CAAE,CAAE,GAAGpF,eAAe,CAACoH,QAAQ,CAAE9D,IAAI,CAAEqC,CAAC,CAACQ,MAAM,CAACvE,KAAM,CAAC,CAAE,CAAAnC,QAAA,eAElGP,IAAA,WAAQ0C,KAAK,CAAC,UAAU,CAAAnC,QAAA,CAAC,qBAAmB,CAAQ,CAAC,cACrDP,IAAA,WAAQ0C,KAAK,CAAC,WAAW,CAAAnC,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC5CP,IAAA,WAAQ0C,KAAK,CAAC,MAAM,CAAAnC,QAAA,CAAC,MAAI,CAAQ,CAAC,cAClCP,IAAA,WAAQ0C,KAAK,CAAC,QAAQ,CAAAnC,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtCP,IAAA,WAAQ0C,KAAK,CAAC,SAAS,CAAAnC,QAAA,CAAC,gBAAc,CAAQ,CAAC,EACzC,CAAC,EACN,CAAC,cACNL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAE,EAAAuF,sBAAA,CAAAnH,eAAe,CAACoH,QAAQ,UAAAD,sBAAA,iBAAxBA,sBAAA,CAA0B9D,WAAW,GAAI,EAAG,CACnD6C,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,UAAU,CAAE,CAAE,GAAGpF,eAAe,CAACoH,QAAQ,CAAE/D,WAAW,CAAEsC,CAAC,CAACQ,MAAM,CAACvE,KAAM,CAAC,CAAE,CACzGwE,WAAW,CAAC,+BAA+B,CAC5C,CAAC,EACC,CAAC,EACH,CAAC,EACH,CAAC,cAENhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,OAAAO,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BP,IAAA,QAAKuF,SAAS,CAAC,YAAY,CAAAhF,QAAA,cACzBL,KAAA,WACEwC,KAAK,CAAE5B,eAAe,CAACqH,WAAW,EAAI,UAAW,CACjDnB,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,aAAa,CAAEO,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CAAAnC,QAAA,eAE9DP,IAAA,WAAQ0C,KAAK,CAAC,WAAW,CAAAnC,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC5CP,IAAA,WAAQ0C,KAAK,CAAC,UAAU,CAAAnC,QAAA,CAAC,UAAQ,CAAQ,CAAC,cAC1CP,IAAA,WAAQ0C,KAAK,CAAC,gBAAgB,CAAAnC,QAAA,CAAC,gBAAc,CAAQ,CAAC,cACtDP,IAAA,WAAQ0C,KAAK,CAAC,QAAQ,CAAAnC,QAAA,CAAC,QAAM,CAAQ,CAAC,EAChC,CAAC,CACN,CAAC,EACH,CAAC,cAENL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,OAAAO,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBP,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAMa,SAAS,CAAC,cAAc,CAAE,CAAEjC,IAAI,CAAE,OAAO,CAAE6C,MAAM,CAAE,EAAE,CAAE9C,WAAW,CAAE,EAAG,CAAC,CAAE,CACzFoB,SAAS,CAAC,SAAS,CAAAhF,QAAA,CACpB,mBAED,CAAQ,CAAC,EACN,CAAC,CAELO,eAAe,CAACsH,YAAY,EAAItH,eAAe,CAACsH,YAAY,CAACxC,GAAG,CAAC,CAACyC,WAAW,CAAEtF,KAAK,gBACnF7C,KAAA,QAAiBqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACrCL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCL,KAAA,SAAAK,QAAA,EAAM,cAAY,CAACwC,KAAK,CAAG,CAAC,EAAO,CAAC,cACpC/C,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAMc,YAAY,CAAC,cAAc,CAAEvD,KAAK,CAAE,CACnDwC,SAAS,CAAC,YAAY,CAAAhF,QAAA,CACvB,QAED,CAAQ,CAAC,EACN,CAAC,cACNL,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAhF,QAAA,eACvBL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBL,KAAA,WACEwC,KAAK,CAAE2F,WAAW,CAACjE,IAAK,CACxB4C,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,cAAc,CAAErD,KAAK,CAAE,MAAM,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CAAAnC,QAAA,eAEpFP,IAAA,WAAQ0C,KAAK,CAAC,SAAS,CAAAnC,QAAA,CAAC,SAAO,CAAQ,CAAC,cACxCP,IAAA,WAAQ0C,KAAK,CAAC,OAAO,CAAAnC,QAAA,CAAC,OAAK,CAAQ,CAAC,cACpCP,IAAA,WAAQ0C,KAAK,CAAC,SAAS,CAAAnC,QAAA,CAAC,SAAO,CAAQ,CAAC,cACxCP,IAAA,WAAQ0C,KAAK,CAAC,SAAS,CAAAnC,QAAA,CAAC,SAAO,CAAQ,CAAC,cACxCP,IAAA,WAAQ0C,KAAK,CAAC,UAAU,CAAAnC,QAAA,CAAC,UAAQ,CAAQ,CAAC,cAC1CP,IAAA,WAAQ0C,KAAK,CAAC,SAAS,CAAAnC,QAAA,CAAC,SAAO,CAAQ,CAAC,cACxCP,IAAA,WAAQ0C,KAAK,CAAC,UAAU,CAAAnC,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACpC,CAAC,EACN,CAAC,cACNL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,QAAM,CAAO,CAAC,cACrBP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAE2F,WAAW,CAACpB,MAAO,CAC1BD,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,cAAc,CAAErD,KAAK,CAAE,QAAQ,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CACtFwE,WAAW,CAAC,+BAA+B,CAC5C,CAAC,EACC,CAAC,EACH,CAAC,cACNhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAE2F,WAAW,CAAClE,WAAW,EAAI,EAAG,CACrC6C,QAAQ,CAAGP,CAAC,EAAKL,mBAAmB,CAAC,cAAc,CAAErD,KAAK,CAAE,aAAa,CAAE0D,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAE,CAC3FwE,WAAW,CAAC,2BAA2B,CACxC,CAAC,EACC,CAAC,GA7CEnE,KA8CL,CACN,CAAC,EACC,CAAC,EACH,CAAC,EACP,CAED;AACA,KAAM,CAAAyD,WAAW,CAAG8B,KAAA,OAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,IAAC,CAAE9H,eAAe,CAAEM,MAAM,CAAE8E,aAAa,CAAEE,mBAAmB,CAAEC,SAAS,CAAEC,YAAa,CAAC,CAAAgC,KAAA,oBAC3GpI,KAAA,QAAKqF,SAAS,CAAC,cAAc,CAAAhF,QAAA,eAC3BP,IAAA,OAAAO,QAAA,CAAI,UAAQ,CAAI,CAAC,cAEjBL,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAhF,QAAA,eACvBL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,SAAO,CAAO,CAAC,cACtBP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAE,EAAA6F,qBAAA,CAAAzH,eAAe,CAACkE,QAAQ,UAAAuD,qBAAA,iBAAxBA,qBAAA,CAA0BM,OAAO,GAAI,EAAG,CAC/C7B,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,UAAU,CAAE,CAAE,GAAGpF,eAAe,CAACkE,QAAQ,CAAE6D,OAAO,CAAEpC,CAAC,CAACQ,MAAM,CAACvE,KAAM,CAAC,CAAE,CACrGwE,WAAW,CAAC,OAAO,CACpB,CAAC,EACC,CAAC,cACNhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,QAAM,CAAO,CAAC,cACrBL,KAAA,WACEwC,KAAK,CAAE,EAAA8F,sBAAA,CAAA1H,eAAe,CAACkE,QAAQ,UAAAwD,sBAAA,iBAAxBA,sBAAA,CAA0BM,MAAM,GAAI,OAAQ,CACnD9B,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,UAAU,CAAE,CAAE,GAAGpF,eAAe,CAACkE,QAAQ,CAAE8D,MAAM,CAAErC,CAAC,CAACQ,MAAM,CAACvE,KAAM,CAAC,CAAE,CAAAnC,QAAA,eAEpGP,IAAA,WAAQ0C,KAAK,CAAC,OAAO,CAAAnC,QAAA,CAAC,OAAK,CAAQ,CAAC,cACpCP,IAAA,WAAQ0C,KAAK,CAAC,QAAQ,CAAAnC,QAAA,CAAC,QAAM,CAAQ,CAAC,cACtCP,IAAA,WAAQ0C,KAAK,CAAC,SAAS,CAAAnC,QAAA,CAAC,SAAO,CAAQ,CAAC,EAClC,CAAC,EACN,CAAC,EACH,CAAC,cAENL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,WAAS,CAAO,CAAC,cACxBP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAE,EAAA+F,sBAAA,CAAA3H,eAAe,CAACkE,QAAQ,UAAAyD,sBAAA,iBAAxBA,sBAAA,CAA0BM,SAAS,GAAI,EAAG,CACjD/B,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,UAAU,CAAE,CAAE,GAAGpF,eAAe,CAACkE,QAAQ,CAAE+D,SAAS,CAAEtC,CAAC,CAACQ,MAAM,CAACvE,KAAM,CAAC,CAAE,CACvGwE,WAAW,CAAC,oCAAoC,CACjD,CAAC,EACC,CAAC,cAENhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,OAAAO,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BP,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAMa,SAAS,CAAC,kBAAkB,CAAE,CAAEnC,IAAI,CAAE,EAAE,CAAE8E,KAAK,CAAE,EAAG,CAAC,CAAE,CACtEzD,SAAS,CAAC,SAAS,CAAAhF,QAAA,CACpB,eAED,CAAQ,CAAC,EACN,CAAC,CAEL,EAAAmI,sBAAA,CAAA5H,eAAe,CAACkE,QAAQ,UAAA0D,sBAAA,iBAAxBA,sBAAA,CAA0BO,OAAO,GAAInI,eAAe,CAACkE,QAAQ,CAACiE,OAAO,CAACrD,GAAG,CAAC,CAACqD,OAAO,CAAElG,KAAK,gBACxF7C,KAAA,QAAiBqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACrCL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCL,KAAA,SAAAK,QAAA,EAAM,UAAQ,CAACwC,KAAK,CAAG,CAAC,EAAO,CAAC,cAChC/C,IAAA,WACEoE,IAAI,CAAC,QAAQ,CACboB,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAA0D,WAAW,CAAG,CAAC,IAAIpI,eAAe,CAACkE,QAAQ,CAACiE,OAAO,EAAI,EAAE,CAAC,CAAC,CACjEC,WAAW,CAACC,MAAM,CAACpG,KAAK,CAAE,CAAC,CAAC,CAC5BmD,aAAa,CAAC,UAAU,CAAE,CAAE,GAAGpF,eAAe,CAACkE,QAAQ,CAAEiE,OAAO,CAAEC,WAAY,CAAC,CAAC,CAClF,CAAE,CACF3D,SAAS,CAAC,YAAY,CAAAhF,QAAA,CACvB,QAED,CAAQ,CAAC,EACN,CAAC,cACNL,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAhF,QAAA,eACvBL,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAEuG,OAAO,CAAC/E,IAAI,EAAI,EAAG,CAC1B8C,QAAQ,CAAGP,CAAC,EAAK,CACf,KAAM,CAAAyC,WAAW,CAAG,CAAC,IAAIpI,eAAe,CAACkE,QAAQ,CAACiE,OAAO,EAAI,EAAE,CAAC,CAAC,CACjEC,WAAW,CAACnG,KAAK,CAAC,CAAG,CAAE,GAAGkG,OAAO,CAAE/E,IAAI,CAAEuC,CAAC,CAACQ,MAAM,CAACvE,KAAM,CAAC,CACzDwD,aAAa,CAAC,UAAU,CAAE,CAAE,GAAGpF,eAAe,CAACkE,QAAQ,CAAEiE,OAAO,CAAEC,WAAY,CAAC,CAAC,CAClF,CAAE,CACFhC,WAAW,CAAC,cAAc,CAC3B,CAAC,EACC,CAAC,cACNhH,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,OAAK,CAAO,CAAC,cACpBP,IAAA,UACEoE,IAAI,CAAC,OAAO,CACZ1B,KAAK,CAAEuG,OAAO,CAACD,KAAK,EAAI,EAAG,CAC3BhC,QAAQ,CAAGP,CAAC,EAAK,CACf,KAAM,CAAAyC,WAAW,CAAG,CAAC,IAAIpI,eAAe,CAACkE,QAAQ,CAACiE,OAAO,EAAI,EAAE,CAAC,CAAC,CACjEC,WAAW,CAACnG,KAAK,CAAC,CAAG,CAAE,GAAGkG,OAAO,CAAED,KAAK,CAAEvC,CAAC,CAACQ,MAAM,CAACvE,KAAM,CAAC,CAC1DwD,aAAa,CAAC,UAAU,CAAE,CAAE,GAAGpF,eAAe,CAACkE,QAAQ,CAAEiE,OAAO,CAAEC,WAAY,CAAC,CAAC,CAClF,CAAE,CACFhC,WAAW,CAAC,qBAAqB,CAClC,CAAC,EACC,CAAC,EACH,CAAC,GA1CEnE,KA2CL,CACN,CAAC,EACC,CAAC,cAEN7C,KAAA,QAAKqF,SAAS,CAAC,YAAY,CAAAhF,QAAA,eACzBP,IAAA,UAAAO,QAAA,CAAO,MAAI,CAAO,CAAC,cACnBP,IAAA,UACEoE,IAAI,CAAC,MAAM,CACX1B,KAAK,CAAE,EAAAiG,sBAAA,CAAA7H,eAAe,CAACkE,QAAQ,UAAA2D,sBAAA,kBAAAC,sBAAA,CAAxBD,sBAAA,CAA0BS,IAAI,UAAAR,sBAAA,iBAA9BA,sBAAA,CAAgCS,IAAI,CAAC,IAAI,CAAC,GAAI,EAAG,CACxDrC,QAAQ,CAAGP,CAAC,EAAKP,aAAa,CAAC,UAAU,CAAE,CACzC,GAAGpF,eAAe,CAACkE,QAAQ,CAC3BoE,IAAI,CAAE3C,CAAC,CAACQ,MAAM,CAACvE,KAAK,CAAC4G,KAAK,CAAC,GAAG,CAAC,CAAC1D,GAAG,CAAC2D,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CAACjG,MAAM,CAACgG,GAAG,EAAIA,GAAG,CAC1E,CAAC,CAAE,CACHrC,WAAW,CAAC,gCAAgC,CAC7C,CAAC,cACFlH,IAAA,SAAMuF,SAAS,CAAC,WAAW,CAAAhF,QAAA,CAAC,yCAAuC,CAAM,CAAC,EACvE,CAAC,EACH,CAAC,EACP,CAED,cAAe,CAAAF,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}