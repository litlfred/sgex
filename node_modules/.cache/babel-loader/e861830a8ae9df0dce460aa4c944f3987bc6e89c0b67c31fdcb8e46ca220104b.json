{"ast":null,"code":"import { forEach } from 'min-dash';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\nvar MARKER_HOVER = 'hover',\n  MARKER_SELECTED = 'selected';\n\n/**\n * A plugin that adds a visible selection UI to shapes and connections\n * by appending the <code>hover</code> and <code>selected</code> classes to them.\n *\n * @class\n *\n * Makes elements selectable, too.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n */\nexport default function SelectionVisuals(canvas, eventBus) {\n  this._canvas = canvas;\n  function addMarker(e, cls) {\n    canvas.addMarker(e, cls);\n  }\n  function removeMarker(e, cls) {\n    canvas.removeMarker(e, cls);\n  }\n  eventBus.on('element.hover', function (event) {\n    addMarker(event.element, MARKER_HOVER);\n  });\n  eventBus.on('element.out', function (event) {\n    removeMarker(event.element, MARKER_HOVER);\n  });\n  eventBus.on('selection.changed', function (event) {\n    function deselect(s) {\n      removeMarker(s, MARKER_SELECTED);\n    }\n    function select(s) {\n      addMarker(s, MARKER_SELECTED);\n    }\n    var oldSelection = event.oldSelection,\n      newSelection = event.newSelection;\n    forEach(oldSelection, function (e) {\n      if (newSelection.indexOf(e) === -1) {\n        deselect(e);\n      }\n    });\n    forEach(newSelection, function (e) {\n      if (oldSelection.indexOf(e) === -1) {\n        select(e);\n      }\n    });\n  });\n}\nSelectionVisuals.$inject = ['canvas', 'eventBus'];","map":{"version":3,"names":["forEach","MARKER_HOVER","MARKER_SELECTED","SelectionVisuals","canvas","eventBus","_canvas","addMarker","e","cls","removeMarker","on","event","element","deselect","s","select","oldSelection","newSelection","indexOf","$inject"],"sources":["/home/runner/work/sgex/sgex/node_modules/diagram-js/lib/features/selection/SelectionVisuals.js"],"sourcesContent":["import {\n  forEach\n} from 'min-dash';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\nvar MARKER_HOVER = 'hover',\n    MARKER_SELECTED = 'selected';\n\n/**\n * A plugin that adds a visible selection UI to shapes and connections\n * by appending the <code>hover</code> and <code>selected</code> classes to them.\n *\n * @class\n *\n * Makes elements selectable, too.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n */\nexport default function SelectionVisuals(canvas, eventBus) {\n  this._canvas = canvas;\n\n  function addMarker(e, cls) {\n    canvas.addMarker(e, cls);\n  }\n\n  function removeMarker(e, cls) {\n    canvas.removeMarker(e, cls);\n  }\n\n  eventBus.on('element.hover', function(event) {\n    addMarker(event.element, MARKER_HOVER);\n  });\n\n  eventBus.on('element.out', function(event) {\n    removeMarker(event.element, MARKER_HOVER);\n  });\n\n  eventBus.on('selection.changed', function(event) {\n\n    function deselect(s) {\n      removeMarker(s, MARKER_SELECTED);\n    }\n\n    function select(s) {\n      addMarker(s, MARKER_SELECTED);\n    }\n\n    var oldSelection = event.oldSelection,\n        newSelection = event.newSelection;\n\n    forEach(oldSelection, function(e) {\n      if (newSelection.indexOf(e) === -1) {\n        deselect(e);\n      }\n    });\n\n    forEach(newSelection, function(e) {\n      if (oldSelection.indexOf(e) === -1) {\n        select(e);\n      }\n    });\n  });\n}\n\nSelectionVisuals.$inject = [\n  'canvas',\n  'eventBus'\n];\n"],"mappings":"AAAA,SACEA,OAAO,QACF,UAAU;;AAEjB;AACA;AACA;AACA;;AAEA,IAAIC,YAAY,GAAG,OAAO;EACtBC,eAAe,GAAG,UAAU;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,gBAAgBA,CAACC,MAAM,EAAEC,QAAQ,EAAE;EACzD,IAAI,CAACC,OAAO,GAAGF,MAAM;EAErB,SAASG,SAASA,CAACC,CAAC,EAAEC,GAAG,EAAE;IACzBL,MAAM,CAACG,SAAS,CAACC,CAAC,EAAEC,GAAG,CAAC;EAC1B;EAEA,SAASC,YAAYA,CAACF,CAAC,EAAEC,GAAG,EAAE;IAC5BL,MAAM,CAACM,YAAY,CAACF,CAAC,EAAEC,GAAG,CAAC;EAC7B;EAEAJ,QAAQ,CAACM,EAAE,CAAC,eAAe,EAAE,UAASC,KAAK,EAAE;IAC3CL,SAAS,CAACK,KAAK,CAACC,OAAO,EAAEZ,YAAY,CAAC;EACxC,CAAC,CAAC;EAEFI,QAAQ,CAACM,EAAE,CAAC,aAAa,EAAE,UAASC,KAAK,EAAE;IACzCF,YAAY,CAACE,KAAK,CAACC,OAAO,EAAEZ,YAAY,CAAC;EAC3C,CAAC,CAAC;EAEFI,QAAQ,CAACM,EAAE,CAAC,mBAAmB,EAAE,UAASC,KAAK,EAAE;IAE/C,SAASE,QAAQA,CAACC,CAAC,EAAE;MACnBL,YAAY,CAACK,CAAC,EAAEb,eAAe,CAAC;IAClC;IAEA,SAASc,MAAMA,CAACD,CAAC,EAAE;MACjBR,SAAS,CAACQ,CAAC,EAAEb,eAAe,CAAC;IAC/B;IAEA,IAAIe,YAAY,GAAGL,KAAK,CAACK,YAAY;MACjCC,YAAY,GAAGN,KAAK,CAACM,YAAY;IAErClB,OAAO,CAACiB,YAAY,EAAE,UAAST,CAAC,EAAE;MAChC,IAAIU,YAAY,CAACC,OAAO,CAACX,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;QAClCM,QAAQ,CAACN,CAAC,CAAC;MACb;IACF,CAAC,CAAC;IAEFR,OAAO,CAACkB,YAAY,EAAE,UAASV,CAAC,EAAE;MAChC,IAAIS,YAAY,CAACE,OAAO,CAACX,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;QAClCQ,MAAM,CAACR,CAAC,CAAC;MACX;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ;AAEAL,gBAAgB,CAACiB,OAAO,GAAG,CACzB,QAAQ,EACR,UAAU,CACX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}