{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useLocation,useNavigate,useParams}from'react-router-dom';import githubService from'../services/githubService';import repositoryCacheService from'../services/repositoryCacheService';import dakTemplates from'../config/dak-templates.json';import ContextualHelpMascot from'./ContextualHelpMascot';import'./DAKSelection.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DAKSelection=()=>{const location=useLocation();const navigate=useNavigate();const{user:userParam}=useParams();const[repositories,setRepositories]=useState([]);const[selectedRepository,setSelectedRepository]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isScanning,setIsScanning]=useState(false);const[scanProgress,setScanProgress]=useState(null);const[currentlyScanningRepos,setCurrentlyScanningRepos]=useState(new Set());const[usingCachedData,setUsingCachedData]=useState(false);const{profile,action}=location.state||{};// Validate user parameter and profile consistency\nuseEffect(()=>{// If no user parameter in URL and no profile in state, redirect to landing\nif(!userParam&&!profile){navigate('/');return;}// If user parameter exists but no profile - redirect to landing\nif(userParam&&!profile){navigate('/');return;}// If user parameter exists and profile exists but they don't match - redirect to landing\nif(userParam&&profile&&profile.login!==userParam){navigate('/');return;}// If profile exists but no user parameter, redirect to include user in URL\nif(profile&&!userParam){navigate(`/dak-selection/${profile.login}`,{state:{profile,action},replace:true});return;}},[userParam,profile,action,navigate]);// Helper function to extract user and repo from repository object\nconst getRepositoryPath=repository=>{var _repository$owner,_repository$full_name;if(!repository)return null;// Get user from owner.login or fallback to parsing full_name\nconst user=((_repository$owner=repository.owner)===null||_repository$owner===void 0?void 0:_repository$owner.login)||((_repository$full_name=repository.full_name)===null||_repository$full_name===void 0?void 0:_repository$full_name.split('/')[0]);const repo=repository.name;if(!user||!repo){console.error('Unable to extract user/repo from repository object:',repository);return null;}return{user,repo};};const getActionConfig=()=>{switch(action){case'edit':return{title:'Select DAK to Edit',description:'Choose an existing DAK repository that you have permission to modify.',buttonText:'Continue to Edit Components',nextRoute:'/dashboard'// This will be constructed dynamically with user/repo\n};case'fork':return{title:'Select DAK to Fork',description:'Choose the source DAK repository that you want to fork.',buttonText:'Continue to Organization Selection',nextRoute:'/organization-selection'};case'create':return{title:'Select Template DAK',description:'Choose a template repository to use as the base for your new DAK.',buttonText:'Continue to Organization Selection',nextRoute:'/organization-selection',showTemplate:true};default:return{title:'Select DAK Repository',description:'Choose a DAK repository to work with.',buttonText:'Continue',nextRoute:'/dashboard'// This will be constructed dynamically with user/repo\n};}};const getMockRepositories=useCallback(()=>{if(!profile||!profile.login){return[];}// Mock repositories - only some have SMART guidelines compatibility\nconst allMockRepos=[{id:1,name:'maternal-health-dak',full_name:`${profile.login}/maternal-health-dak`,description:'WHO SMART Guidelines for Maternal Health - Digital Adaptation Kit',html_url:`https://github.com/${profile.login}/maternal-health-dak`,topics:['who','smart-guidelines','maternal-health','dak'],language:'FML',stargazers_count:12,forks_count:3,updated_at:'2024-01-15T10:30:00Z',smart_guidelines_compatible:true},{id:2,name:'immunization-dak',full_name:`${profile.login}/immunization-dak`,description:'Digital Adaptation Kit for Immunization Guidelines',html_url:`https://github.com/${profile.login}/immunization-dak`,topics:['who','smart-guidelines','immunization','vaccines'],language:'FML',stargazers_count:8,forks_count:2,updated_at:'2024-01-10T14:20:00Z',smart_guidelines_compatible:true},{id:3,name:'anc-dak',full_name:`${profile.login}/anc-dak`,description:'Antenatal Care Digital Adaptation Kit based on WHO guidelines',html_url:`https://github.com/${profile.login}/anc-dak`,topics:['who','anc','antenatal-care','smart-guidelines'],language:'FML',stargazers_count:15,forks_count:5,updated_at:'2024-01-12T09:15:00Z',smart_guidelines_compatible:true},{id:4,name:'regular-health-app',full_name:`${profile.login}/regular-health-app`,description:'A regular health application without SMART Guidelines',html_url:`https://github.com/${profile.login}/regular-health-app`,topics:['health','app','javascript'],language:'JavaScript',stargazers_count:5,forks_count:1,updated_at:'2024-01-08T16:45:00Z',smart_guidelines_compatible:false// This one doesn't have sushi-config.yaml with smart.who.int.base\n},{id:5,name:'medical-database',full_name:`${profile.login}/medical-database`,description:'Medical database with FHIR but not SMART Guidelines',html_url:`https://github.com/${profile.login}/medical-database`,topics:['fhir','database','medical'],language:'SQL',stargazers_count:7,forks_count:2,updated_at:'2024-01-05T11:20:00Z',smart_guidelines_compatible:false// This one also doesn't have the required sushi-config.yaml\n}];// Filter to only return SMART guidelines compatible repositories\nreturn allMockRepos.filter(repo=>repo.smart_guidelines_compatible);},[profile]);const simulateEnhancedScanning=useCallback(async()=>{setIsScanning(true);setRepositories([]);// Clear current repositories for progressive updates\nconst mockRepos=getMockRepositories();const delay=ms=>new Promise(resolve=>setTimeout(resolve,ms));try{// Simulate concurrent scanning with enhanced display\nfor(let i=0;i<mockRepos.length;i++){const repo=mockRepos[i];// Simulate starting to scan this repository\nsetScanProgress({current:i+1,total:mockRepos.length,currentRepo:repo.name,progress:Math.round((i+1)/mockRepos.length*100),completed:false,started:true});// Add to currently scanning repos\nsetCurrentlyScanningRepos(prev=>new Set([...prev,repo.name]));// Simulate scanning time (1-2 seconds per repository)\nawait delay(1000+Math.random()*1000);// Add found repository to results in alphabetical order\nsetRepositories(prevRepos=>{const newRepos=[...prevRepos,repo];return newRepos.sort((a,b)=>a.name.localeCompare(b.name));});// Simulate completion\nsetScanProgress({current:i+1,total:mockRepos.length,currentRepo:repo.name,progress:Math.round((i+1)/mockRepos.length*100),completed:true});// Remove from currently scanning repos\nsetCurrentlyScanningRepos(prev=>{const newSet=new Set(prev);newSet.delete(repo.name);return newSet;});// Small delay before next repository\nawait delay(300);}// After all repositories are scanned, stop the scanning state\nconsole.log('🎉 Demo scanning completed, stopping scanning state');setTimeout(()=>{setIsScanning(false);setScanProgress(null);setCurrentlyScanningRepos(new Set());},500);// Small delay to show completion\n}catch(error){console.error('Error in simulated scanning:',error);// Make sure to stop scanning on error\nsetIsScanning(false);setScanProgress(null);setCurrentlyScanningRepos(new Set());}},[getMockRepositories]);const fetchRepositories=useCallback(async function(){let forceRescan=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let useCachedData=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;setLoading(true);setError(null);setIsScanning(false);setScanProgress(null);setCurrentlyScanningRepos(new Set());setUsingCachedData(false);try{let repos=[];let cachedData=null;if(action==='create'){// For create action, load templates from configuration\nrepos=dakTemplates.dakTemplates.map((template,index)=>({id:-(index+1),name:template.repo,full_name:`${template.owner}/${template.repo}`,description:template.description,html_url:template.repository,clone_url:`${template.repository}.git`,topics:template.tags.map(tag=>tag.toLowerCase().replace(/\\s+/g,'-')),language:'FML',stargazers_count:15,forks_count:8,updated_at:new Date().toISOString(),smart_guidelines_compatible:true,is_template:true,template_config:template,owner:{login:template.owner,avatar_url:template.owner==='WorldHealthOrganization'?'https://avatars.githubusercontent.com/u/9166906?s=200&v=4':'https://github.com/favicon.ico'}}));// Sort templates alphabetically by name\nrepos.sort((a,b)=>a.name.localeCompare(b.name));setRepositories(repos);}else{// For edit/fork actions, implement cache-first approach\n// Always check cache first unless explicitly forcing a rescan\nif(githubService.isAuth()&&!forceRescan){try{cachedData=repositoryCacheService.getCachedRepositories(profile.login,profile.type==='org'?'org':'user');}catch(cacheError){console.warn('Error accessing repository cache:',cacheError);}}if(cachedData&&!forceRescan){// Use cached data - show immediately\nconsole.log('Using cached repository data',repositoryCacheService.getCacheInfo(profile.login,profile.type==='org'?'org':'user'));repos=cachedData.repositories;setUsingCachedData(true);// Sort cached repositories alphabetically\nrepos.sort((a,b)=>a.name.localeCompare(b.name));setRepositories(repos);}else{// No cached data or forcing rescan - initiate progressive scanning\nif(githubService.isAuth()){console.log(forceRescan?'🔄 Force rescanning repositories...':'🔍 No cached data, initiating scan...');setIsScanning(true);setLoading(false);// Stop loading state to show scanning progress\n// Important: Don't clear existing repositories when scanning\n// This preserves any cached repos that were already displayed\nconsole.log('📊 Starting enhanced scanning display for authenticated user');// Add timeout wrapper to prevent infinite scanning\nconst SCAN_TIMEOUT=60000;// 60 seconds timeout\nconst timeoutPromise=new Promise((_,reject)=>{setTimeout(()=>reject(new Error('Scanning timeout - operation took longer than 60 seconds')),SCAN_TIMEOUT);});const scanPromise=githubService.getSmartGuidelinesRepositoriesProgressive(profile.login,profile.type==='org'?'org':'user',// onRepositoryFound callback - add repo to list immediately in alphabetical order\nfoundRepo=>{setRepositories(prevRepos=>{// Avoid duplicates\nconst exists=prevRepos.some(repo=>repo.id===foundRepo.id);if(!exists){// Add the new repository and sort alphabetically by name\nconst newRepos=[...prevRepos,foundRepo];return newRepos.sort((a,b)=>a.name.localeCompare(b.name));}return prevRepos;});},// onProgress callback - update progress indicator with enhanced display\nprogress=>{console.log('📊 Real scanning progress:',progress);setScanProgress(progress);// Track repositories currently being scanned with enhanced display timing\nif(progress.started&&!progress.completed){// Repository is being started - add to currently scanning set\nconsole.log('🔍 Started scanning:',progress.currentRepo);setCurrentlyScanningRepos(prev=>new Set([...prev,progress.currentRepo]));// Ensure the scanning state is properly set\nsetScanProgress({...progress,started:true,completed:false});}else if(progress.completed){// Repository is completed - show completion state\nconsole.log('✅ Completed scanning:',progress.currentRepo);setScanProgress({...progress,completed:true});// Remove from currently scanning set after a brief moment\nsetTimeout(()=>{setCurrentlyScanningRepos(prev=>{const newSet=new Set(prev);newSet.delete(progress.currentRepo);return newSet;});},200);// Check if this is the last repository being scanned\nif(progress.current===progress.total){// All repositories have been scanned, stop the scanning state\nconsole.log('🎉 All repositories scanned, stopping scanning state');setTimeout(()=>{setIsScanning(false);setScanProgress(null);setCurrentlyScanningRepos(new Set());},500);// Small delay to show completion\n}}else if(progress.total===0&&progress.completed){// Special case: no repositories to scan\nconsole.log('🎉 No repositories to scan, stopping scanning state');setTimeout(()=>{setIsScanning(false);setScanProgress(null);setCurrentlyScanningRepos(new Set());},500);}});try{// Race between the scanning promise and timeout\nrepos=await Promise.race([scanPromise,timeoutPromise]);}catch(timeoutError){console.error('⏰ Scanning timed out:',timeoutError.message);// Stop scanning on timeout\nsetIsScanning(false);setScanProgress(null);setCurrentlyScanningRepos(new Set());throw new Error('Repository scanning timed out. Please try again or use cached data if available.');}// Cache the results for future quick access\nrepositoryCacheService.setCachedRepositories(profile.login,profile.type==='org'?'org':'user',repos);// Update repositories with final results (in case callback missed any)\n// Sort alphabetically to ensure consistent ordering\nconst sortedRepos=repos.sort((a,b)=>a.name.localeCompare(b.name));setRepositories(sortedRepos);}else{// Fallback to mock repositories with enhanced scanning demonstration\nawait simulateEnhancedScanning();repos=getMockRepositories();// Sort mock repositories alphabetically\nrepos.sort((a,b)=>a.name.localeCompare(b.name));setRepositories(repos);}}}}catch(error){console.error('Error fetching repositories:',error);setError('Failed to fetch repositories. Please check your connection and try again.');// Fallback to mock data for demonstration\nconst mockRepos=getMockRepositories();mockRepos.sort((a,b)=>a.name.localeCompare(b.name));setRepositories(mockRepos);// Make sure to stop scanning on error\nsetIsScanning(false);setScanProgress(null);setCurrentlyScanningRepos(new Set());}finally{setLoading(false);// Don't automatically stop scanning here for authenticated progressive scans\n// or for demo scanning - let them manage their own scanning state\nif(!githubService.isAuth()&&action==='create'){// Only auto-stop for create action when not authenticated\nsetIsScanning(false);setScanProgress(null);setCurrentlyScanningRepos(new Set());}}},[profile,action,getMockRepositories,simulateEnhancedScanning]);useEffect(()=>{// Only proceed if we have valid profile, action and userParam consistency\nif(!profile||!action||!userParam||profile.login!==userParam){return;}// Always check cache first on initial load\nfetchRepositories(false,false);// forceRescan=false, useCachedData=false (but still check cache first)\n},[profile,action,userParam,fetchRepositories]);const handleRepositorySelect=repo=>{setSelectedRepository(repo);// For 'edit' action, automatically navigate after selection\nif(action==='edit'){// Add a small delay for visual feedback before navigation\nsetTimeout(()=>{const repoPath=getRepositoryPath(repo);if(repoPath){const dashboardUrl=`/dashboard/${repoPath.user}/${repoPath.repo}`;navigate(dashboardUrl,{state:{profile,repository:repo,action}});}else{// Fallback to original behavior if unable to extract path\nconst config=getActionConfig();navigate(config.nextRoute,{state:{profile,repository:repo,action}});}},300);// 300ms delay for visual feedback\n}};const handleContinue=()=>{if(!selectedRepository){alert('Please select a repository to continue');return;}const config=getActionConfig();if(action==='edit'){// Go directly to dashboard for editing with user/repo parameters\nconst repoPath=getRepositoryPath(selectedRepository);if(repoPath){const dashboardUrl=`/dashboard/${repoPath.user}/${repoPath.repo}`;navigate(dashboardUrl,{state:{profile:profile,repository:selectedRepository,action:action}});}else{// Fallback to original behavior if unable to extract path\nnavigate(config.nextRoute,{state:{profile:profile,repository:selectedRepository,action:action}});}}else{// Go to organization selection for fork/create\nnavigate(config.nextRoute,{state:{profile:profile,sourceRepository:selectedRepository,action:action}});}};const handleRescan=()=>{fetchRepositories(true,false);// Force rescan, don't use cache\n};const handleUseCachedData=()=>{fetchRepositories(false,false);// Don't force rescan, check cache first (this should use cache if available)\n};const handleDemoScanning=async()=>{// Simulate the enhanced scanning display for demonstration purposes\nawait simulateEnhancedScanning();};const handleBack=()=>{navigate('/dak-action',{state:{profile:profile}});};const handleHomeNavigation=()=>{navigate('/');};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric'});};if(!profile||!action||!userParam||profile.login!==userParam){return/*#__PURE__*/_jsx(\"div\",{className:\"dak-selection\",children:/*#__PURE__*/_jsx(\"div\",{style:{color:'white',textAlign:'center',padding:'2rem'},children:\"Redirecting...\"})});}const config=getActionConfig();return/*#__PURE__*/_jsxs(\"div\",{className:\"dak-selection\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"selection-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"who-branding\",children:[/*#__PURE__*/_jsx(\"h1\",{onClick:handleHomeNavigation,className:\"clickable-title\",children:\"SGEX Workbench\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"WHO SMART Guidelines Exchange\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsx(\"img\",{src:profile.avatar_url||`https://github.com/${profile.login}.png`,alt:\"Profile\",className:\"profile-avatar\"}),/*#__PURE__*/_jsx(\"span\",{children:profile.name||profile.login})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"selection-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"breadcrumb-link\",children:\"Select Profile\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBack,className:\"breadcrumb-link\",children:\"Choose DAK Action\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-current\",children:\"Select DAK\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"selection-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"selection-intro\",children:[/*#__PURE__*/_jsx(\"h2\",{children:config.title}),/*#__PURE__*/_jsx(\"p\",{children:config.description}),action==='create'&&/*#__PURE__*/_jsxs(\"div\",{className:\"template-notice\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"notice-icon\",children:\"\\u2139\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"You'll create a new repository based on the WHO SMART Guidelines template.\"})]}),action!=='create'&&githubService.isAuth()&&/*#__PURE__*/_jsx(\"div\",{className:\"cache-controls\",children:usingCachedData?/*#__PURE__*/_jsxs(\"div\",{className:\"cache-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cache-icon\",children:\"\\uD83D\\uDCBE\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Using cached data. \"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRescan,className:\"rescan-link\",disabled:isScanning,children:isScanning?'Scanning...':'Rescan Repositories'})]}):/*#__PURE__*/_jsx(\"div\",{className:\"scan-controls\",children:!isScanning&&!loading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRescan,className:\"rescan-btn\",disabled:isScanning,children:\"\\uD83D\\uDD04 Rescan Repositories\"}),repositoryCacheService.getCachedRepositories(profile.login,profile.type==='org'?'org':'user')&&/*#__PURE__*/_jsx(\"button\",{onClick:handleUseCachedData,className:\"cache-btn\",disabled:isScanning,children:\"\\uD83D\\uDCBE Use Cached Data\"})]})})}),action!=='create'&&!githubService.isAuth()&&!isScanning&&!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"demo-controls\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"demo-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"demo-icon\",children:\"\\uD83C\\uDFAD\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Not authenticated. \"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDemoScanning,className:\"demo-scan-btn\",disabled:isScanning,children:\"\\u2728 Demo Enhanced Scanning Display\"})]})})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading repositories...\"})]}):isScanning?/*#__PURE__*/_jsxs(\"div\",{className:\"scanning-status\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"scanning-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Scanning repositories for SMART Guidelines compatibility...\"})]}),scanProgress&&/*#__PURE__*/_jsxs(\"div\",{className:\"progress-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:`${scanProgress.progress}%`}})}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"unified-scanning-status\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"scanning-header-unified\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"progress-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"progress-text\",children:[scanProgress.current,\"/\",scanProgress.total,\" repositories\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"progress-percentage\",children:[scanProgress.progress,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"currently-testing-unified\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"scanning-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Currently Testing:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"currently-scanning-repos\",children:currentlyScanningRepos.size>0?Array.from(currentlyScanningRepos).map(repoName=>/*#__PURE__*/_jsxs(\"div\",{className:\"scanning-repo-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"repo-status-indicator\",children:\"\\u26A1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"scanning-repo-name\",children:repoName})]},repoName)):/*#__PURE__*/_jsxs(\"div\",{className:\"scanning-repo-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"repo-status-indicator\",children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"scanning-repo-name\",children:\"Preparing scan...\"})]})})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"scanning-note\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"note-icon\",children:\"\\u26A1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Scanning up to 5 repositories concurrently to improve speed\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scanning-results\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Found repositories will appear below as they are discovered:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"repo-grid\",children:repositories.map(repo=>{var _repo$template_config;return/*#__PURE__*/_jsxs(\"div\",{className:`repo-card ${(selectedRepository===null||selectedRepository===void 0?void 0:selectedRepository.id)===repo.id?'selected':''} scanning-found`,onClick:()=>handleRepositorySelect(repo),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"repo-header-info\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[repo.name,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"new-badge\",children:\"\\u2728 Found\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"repo-meta\",children:[repo.is_template&&/*#__PURE__*/_jsx(\"span\",{className:\"template-badge\",children:((_repo$template_config=repo.template_config)===null||_repo$template_config===void 0?void 0:_repo$template_config.name)||'Template'}),repo.private&&/*#__PURE__*/_jsx(\"span\",{className:\"private-badge\",children:\"Private\"}),repo.language&&/*#__PURE__*/_jsx(\"span\",{className:\"language-badge\",children:repo.language}),repo.smart_guidelines_compatible&&/*#__PURE__*/_jsx(\"span\",{className:\"compatible-badge\",children:\"SMART Guidelines\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"repo-description\",children:repo.description||'No description available'}),/*#__PURE__*/_jsxs(\"div\",{className:\"repo-topics\",children:[(repo.topics||[]).slice(0,3).map(topic=>/*#__PURE__*/_jsx(\"span\",{className:\"topic-tag\",children:topic},topic)),(repo.topics||[]).length>3&&/*#__PURE__*/_jsxs(\"span\",{className:\"topic-more\",children:[\"+\",(repo.topics||[]).length-3,\" more\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"repo-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\u2B50\"}),/*#__PURE__*/_jsx(\"span\",{children:repo.stargazers_count||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\uD83C\\uDF74\"}),/*#__PURE__*/_jsx(\"span\",{children:repo.forks_count||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Updated \",formatDate(repo.updated_at)]})]})]}),(selectedRepository===null||selectedRepository===void 0?void 0:selectedRepository.id)===repo.id&&/*#__PURE__*/_jsx(\"div\",{className:\"selection-indicator\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u2713 Selected\"})})]},repo.id);})})]})]}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"error-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Error loading repositories\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchRepositories,className:\"retry-btn\",children:\"Try Again\"})]}):repositories.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No repositories found\"}),/*#__PURE__*/_jsx(\"p\",{children:action==='create'?'Unable to load the WHO template repository.':'No DAK repositories found with SMART Guidelines compatibility.'})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"repo-grid\",children:repositories.map(repo=>{var _repo$template_config2;return/*#__PURE__*/_jsxs(\"div\",{className:`repo-card ${(selectedRepository===null||selectedRepository===void 0?void 0:selectedRepository.id)===repo.id?'selected':''}`,onClick:()=>handleRepositorySelect(repo),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"repo-header-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:repo.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"repo-meta\",children:[repo.is_template&&/*#__PURE__*/_jsx(\"span\",{className:\"template-badge\",children:((_repo$template_config2=repo.template_config)===null||_repo$template_config2===void 0?void 0:_repo$template_config2.name)||'Template'}),repo.private&&/*#__PURE__*/_jsx(\"span\",{className:\"private-badge\",children:\"Private\"}),repo.language&&/*#__PURE__*/_jsx(\"span\",{className:\"language-badge\",children:repo.language}),repo.smart_guidelines_compatible&&/*#__PURE__*/_jsx(\"span\",{className:\"compatible-badge\",children:\"SMART Guidelines\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"repo-description\",children:repo.description||'No description available'}),/*#__PURE__*/_jsxs(\"div\",{className:\"repo-topics\",children:[(repo.topics||[]).slice(0,3).map(topic=>/*#__PURE__*/_jsx(\"span\",{className:\"topic-tag\",children:topic},topic)),(repo.topics||[]).length>3&&/*#__PURE__*/_jsxs(\"span\",{className:\"topic-more\",children:[\"+\",(repo.topics||[]).length-3,\" more\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"repo-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\u2B50\"}),/*#__PURE__*/_jsx(\"span\",{children:repo.stargazers_count||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\uD83C\\uDF74\"}),/*#__PURE__*/_jsx(\"span\",{children:repo.forks_count||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Updated \",formatDate(repo.updated_at)]})]})]}),(selectedRepository===null||selectedRepository===void 0?void 0:selectedRepository.id)===repo.id&&/*#__PURE__*/_jsx(\"div\",{className:\"selection-indicator\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u2713 Selected\"})})]},repo.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"selection-footer\",children:[action!=='edit'&&/*#__PURE__*/_jsx(\"button\",{className:\"continue-btn\",onClick:handleContinue,disabled:!selectedRepository,children:config.buttonText}),action==='edit'&&/*#__PURE__*/_jsxs(\"div\",{className:\"direct-selection-note\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"note-icon\",children:\"\\uD83D\\uDCA1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Click on a repository above to start editing its components\"})]})]})]})]})]}),/*#__PURE__*/_jsx(ContextualHelpMascot,{pageId:\"dak-selection\",contextData:{profile,selectedRepository,action}})]});};export default DAKSelection;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useLocation","useNavigate","useParams","githubService","repositoryCacheService","dakTemplates","ContextualHelpMascot","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DAKSelection","location","navigate","user","userParam","repositories","setRepositories","selectedRepository","setSelectedRepository","loading","setLoading","error","setError","isScanning","setIsScanning","scanProgress","setScanProgress","currentlyScanningRepos","setCurrentlyScanningRepos","Set","usingCachedData","setUsingCachedData","profile","action","state","login","replace","getRepositoryPath","repository","_repository$owner","_repository$full_name","owner","full_name","split","repo","name","console","getActionConfig","title","description","buttonText","nextRoute","showTemplate","getMockRepositories","allMockRepos","id","html_url","topics","language","stargazers_count","forks_count","updated_at","smart_guidelines_compatible","filter","simulateEnhancedScanning","mockRepos","delay","ms","Promise","resolve","setTimeout","i","length","current","total","currentRepo","progress","Math","round","completed","started","prev","random","prevRepos","newRepos","sort","a","b","localeCompare","newSet","delete","log","fetchRepositories","forceRescan","arguments","undefined","useCachedData","repos","cachedData","map","template","index","clone_url","tags","tag","toLowerCase","Date","toISOString","is_template","template_config","avatar_url","isAuth","getCachedRepositories","type","cacheError","warn","getCacheInfo","SCAN_TIMEOUT","timeoutPromise","_","reject","Error","scanPromise","getSmartGuidelinesRepositoriesProgressive","foundRepo","exists","some","race","timeoutError","message","setCachedRepositories","sortedRepos","handleRepositorySelect","repoPath","dashboardUrl","config","handleContinue","alert","sourceRepository","handleRescan","handleUseCachedData","handleDemoScanning","handleBack","handleHomeNavigation","formatDate","dateString","toLocaleDateString","year","month","day","className","children","style","color","textAlign","padding","onClick","src","alt","disabled","width","size","Array","from","repoName","_repo$template_config","private","slice","topic","_repo$template_config2","pageId","contextData"],"sources":["/home/runner/work/sgex/sgex/src/components/DAKSelection.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport githubService from '../services/githubService';\nimport repositoryCacheService from '../services/repositoryCacheService';\nimport dakTemplates from '../config/dak-templates.json';\nimport ContextualHelpMascot from './ContextualHelpMascot';\nimport './DAKSelection.css';\n\nconst DAKSelection = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { user: userParam } = useParams();\n  const [repositories, setRepositories] = useState([]);\n  const [selectedRepository, setSelectedRepository] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isScanning, setIsScanning] = useState(false);\n  const [scanProgress, setScanProgress] = useState(null);\n  const [currentlyScanningRepos, setCurrentlyScanningRepos] = useState(new Set());\n  const [usingCachedData, setUsingCachedData] = useState(false);\n  \n  const { profile, action } = location.state || {};\n\n  // Validate user parameter and profile consistency\n  useEffect(() => {\n    // If no user parameter in URL and no profile in state, redirect to landing\n    if (!userParam && !profile) {\n      navigate('/');\n      return;\n    }\n    \n    // If user parameter exists but no profile - redirect to landing\n    if (userParam && !profile) {\n      navigate('/');\n      return;\n    }\n    \n    // If user parameter exists and profile exists but they don't match - redirect to landing\n    if (userParam && profile && profile.login !== userParam) {\n      navigate('/');\n      return;\n    }\n    \n    // If profile exists but no user parameter, redirect to include user in URL\n    if (profile && !userParam) {\n      navigate(`/dak-selection/${profile.login}`, { \n        state: { profile, action },\n        replace: true \n      });\n      return;\n    }\n  }, [userParam, profile, action, navigate]);\n\n  // Helper function to extract user and repo from repository object\n  const getRepositoryPath = (repository) => {\n    if (!repository) return null;\n    \n    // Get user from owner.login or fallback to parsing full_name\n    const user = repository.owner?.login || repository.full_name?.split('/')[0];\n    const repo = repository.name;\n    \n    if (!user || !repo) {\n      console.error('Unable to extract user/repo from repository object:', repository);\n      return null;\n    }\n    \n    return { user, repo };\n  };\n\n  const getActionConfig = () => {\n    switch (action) {\n      case 'edit':\n        return {\n          title: 'Select DAK to Edit',\n          description: 'Choose an existing DAK repository that you have permission to modify.',\n          buttonText: 'Continue to Edit Components',\n          nextRoute: '/dashboard'  // This will be constructed dynamically with user/repo\n        };\n      case 'fork':\n        return {\n          title: 'Select DAK to Fork',\n          description: 'Choose the source DAK repository that you want to fork.',\n          buttonText: 'Continue to Organization Selection',\n          nextRoute: '/organization-selection'\n        };\n      case 'create':\n        return {\n          title: 'Select Template DAK',\n          description: 'Choose a template repository to use as the base for your new DAK.',\n          buttonText: 'Continue to Organization Selection',\n          nextRoute: '/organization-selection',\n          showTemplate: true\n        };\n      default:\n        return {\n          title: 'Select DAK Repository',\n          description: 'Choose a DAK repository to work with.',\n          buttonText: 'Continue',\n          nextRoute: '/dashboard'  // This will be constructed dynamically with user/repo\n        };\n    }\n  };\n\n  const getMockRepositories = useCallback(() => {\n    if (!profile || !profile.login) {\n      return [];\n    }\n    \n    // Mock repositories - only some have SMART guidelines compatibility\n    const allMockRepos = [\n      {\n        id: 1,\n        name: 'maternal-health-dak',\n        full_name: `${profile.login}/maternal-health-dak`,\n        description: 'WHO SMART Guidelines for Maternal Health - Digital Adaptation Kit',\n        html_url: `https://github.com/${profile.login}/maternal-health-dak`,\n        topics: ['who', 'smart-guidelines', 'maternal-health', 'dak'],\n        language: 'FML',\n        stargazers_count: 12,\n        forks_count: 3,\n        updated_at: '2024-01-15T10:30:00Z',\n        smart_guidelines_compatible: true\n      },\n      {\n        id: 2,\n        name: 'immunization-dak',\n        full_name: `${profile.login}/immunization-dak`,\n        description: 'Digital Adaptation Kit for Immunization Guidelines',\n        html_url: `https://github.com/${profile.login}/immunization-dak`,\n        topics: ['who', 'smart-guidelines', 'immunization', 'vaccines'],\n        language: 'FML',\n        stargazers_count: 8,\n        forks_count: 2,\n        updated_at: '2024-01-10T14:20:00Z',\n        smart_guidelines_compatible: true\n      },\n      {\n        id: 3,\n        name: 'anc-dak',\n        full_name: `${profile.login}/anc-dak`,\n        description: 'Antenatal Care Digital Adaptation Kit based on WHO guidelines',\n        html_url: `https://github.com/${profile.login}/anc-dak`,\n        topics: ['who', 'anc', 'antenatal-care', 'smart-guidelines'],\n        language: 'FML',\n        stargazers_count: 15,\n        forks_count: 5,\n        updated_at: '2024-01-12T09:15:00Z',\n        smart_guidelines_compatible: true\n      },\n      {\n        id: 4,\n        name: 'regular-health-app',\n        full_name: `${profile.login}/regular-health-app`,\n        description: 'A regular health application without SMART Guidelines',\n        html_url: `https://github.com/${profile.login}/regular-health-app`,\n        topics: ['health', 'app', 'javascript'],\n        language: 'JavaScript',\n        stargazers_count: 5,\n        forks_count: 1,\n        updated_at: '2024-01-08T16:45:00Z',\n        smart_guidelines_compatible: false // This one doesn't have sushi-config.yaml with smart.who.int.base\n      },\n      {\n        id: 5,\n        name: 'medical-database',\n        full_name: `${profile.login}/medical-database`,\n        description: 'Medical database with FHIR but not SMART Guidelines',\n        html_url: `https://github.com/${profile.login}/medical-database`,\n        topics: ['fhir', 'database', 'medical'],\n        language: 'SQL',\n        stargazers_count: 7,\n        forks_count: 2,\n        updated_at: '2024-01-05T11:20:00Z',\n        smart_guidelines_compatible: false // This one also doesn't have the required sushi-config.yaml\n      }\n    ];\n\n    // Filter to only return SMART guidelines compatible repositories\n    return allMockRepos.filter(repo => repo.smart_guidelines_compatible);\n  }, [profile]);\n\n  const simulateEnhancedScanning = useCallback(async () => {\n    setIsScanning(true);\n    setRepositories([]); // Clear current repositories for progressive updates\n    \n    const mockRepos = getMockRepositories();\n    const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n    \n    try {\n      // Simulate concurrent scanning with enhanced display\n      for (let i = 0; i < mockRepos.length; i++) {\n        const repo = mockRepos[i];\n        \n        // Simulate starting to scan this repository\n        setScanProgress({\n          current: i + 1,\n          total: mockRepos.length,\n          currentRepo: repo.name,\n          progress: Math.round(((i + 1) / mockRepos.length) * 100),\n          completed: false,\n          started: true\n        });\n        \n        // Add to currently scanning repos\n        setCurrentlyScanningRepos(prev => new Set([...prev, repo.name]));\n        \n        // Simulate scanning time (1-2 seconds per repository)\n        await delay(1000 + Math.random() * 1000);\n        \n        // Add found repository to results in alphabetical order\n        setRepositories(prevRepos => {\n          const newRepos = [...prevRepos, repo];\n          return newRepos.sort((a, b) => a.name.localeCompare(b.name));\n        });\n        \n        // Simulate completion\n        setScanProgress({\n          current: i + 1,\n          total: mockRepos.length,\n          currentRepo: repo.name,\n          progress: Math.round(((i + 1) / mockRepos.length) * 100),\n          completed: true\n        });\n        \n        // Remove from currently scanning repos\n        setCurrentlyScanningRepos(prev => {\n          const newSet = new Set(prev);\n          newSet.delete(repo.name);\n          return newSet;\n        });\n        \n        // Small delay before next repository\n        await delay(300);\n      }\n      \n      // After all repositories are scanned, stop the scanning state\n      console.log('🎉 Demo scanning completed, stopping scanning state');\n      setTimeout(() => {\n        setIsScanning(false);\n        setScanProgress(null);\n        setCurrentlyScanningRepos(new Set());\n      }, 500); // Small delay to show completion\n    } catch (error) {\n      console.error('Error in simulated scanning:', error);\n      // Make sure to stop scanning on error\n      setIsScanning(false);\n      setScanProgress(null);\n      setCurrentlyScanningRepos(new Set());\n    }\n  }, [getMockRepositories]);\n\n  const fetchRepositories = useCallback(async (forceRescan = false, useCachedData = false) => {\n    setLoading(true);\n    setError(null);\n    setIsScanning(false);\n    setScanProgress(null);\n    setCurrentlyScanningRepos(new Set());\n    setUsingCachedData(false);\n    \n    try {\n      let repos = [];\n      let cachedData = null;\n      \n      if (action === 'create') {\n        // For create action, load templates from configuration\n        repos = dakTemplates.dakTemplates.map((template, index) => ({\n          id: -(index + 1),\n          name: template.repo,\n          full_name: `${template.owner}/${template.repo}`,\n          description: template.description,\n          html_url: template.repository,\n          clone_url: `${template.repository}.git`,\n          topics: template.tags.map(tag => tag.toLowerCase().replace(/\\s+/g, '-')),\n          language: 'FML',\n          stargazers_count: 15,\n          forks_count: 8,\n          updated_at: new Date().toISOString(),\n          smart_guidelines_compatible: true,\n          is_template: true,\n          template_config: template,\n          owner: {\n            login: template.owner,\n            avatar_url: template.owner === 'WorldHealthOrganization' \n              ? 'https://avatars.githubusercontent.com/u/9166906?s=200&v=4'\n              : 'https://github.com/favicon.ico'\n          }\n        }));\n        // Sort templates alphabetically by name\n        repos.sort((a, b) => a.name.localeCompare(b.name));\n        setRepositories(repos);\n      } else {\n        // For edit/fork actions, implement cache-first approach\n        \n        // Always check cache first unless explicitly forcing a rescan\n        if (githubService.isAuth() && !forceRescan) {\n          try {\n            cachedData = repositoryCacheService.getCachedRepositories(profile.login, profile.type === 'org' ? 'org' : 'user');\n          } catch (cacheError) {\n            console.warn('Error accessing repository cache:', cacheError);\n          }\n        }\n\n        if (cachedData && !forceRescan) {\n          // Use cached data - show immediately\n          console.log('Using cached repository data', repositoryCacheService.getCacheInfo(profile.login, profile.type === 'org' ? 'org' : 'user'));\n          repos = cachedData.repositories;\n          setUsingCachedData(true);\n          // Sort cached repositories alphabetically\n          repos.sort((a, b) => a.name.localeCompare(b.name));\n          setRepositories(repos);\n        } else {\n          // No cached data or forcing rescan - initiate progressive scanning\n          if (githubService.isAuth()) {\n            console.log(forceRescan ? '🔄 Force rescanning repositories...' : '🔍 No cached data, initiating scan...');\n            setIsScanning(true);\n            setLoading(false); // Stop loading state to show scanning progress\n            \n            // Important: Don't clear existing repositories when scanning\n            // This preserves any cached repos that were already displayed\n            console.log('📊 Starting enhanced scanning display for authenticated user');\n            \n            // Add timeout wrapper to prevent infinite scanning\n            const SCAN_TIMEOUT = 60000; // 60 seconds timeout\n            const timeoutPromise = new Promise((_, reject) => {\n              setTimeout(() => reject(new Error('Scanning timeout - operation took longer than 60 seconds')), SCAN_TIMEOUT);\n            });\n            \n            const scanPromise = githubService.getSmartGuidelinesRepositoriesProgressive(\n              profile.login, \n              profile.type === 'org' ? 'org' : 'user',\n              // onRepositoryFound callback - add repo to list immediately in alphabetical order\n              (foundRepo) => {\n                setRepositories(prevRepos => {\n                  // Avoid duplicates\n                  const exists = prevRepos.some(repo => repo.id === foundRepo.id);\n                  if (!exists) {\n                    // Add the new repository and sort alphabetically by name\n                    const newRepos = [...prevRepos, foundRepo];\n                    return newRepos.sort((a, b) => a.name.localeCompare(b.name));\n                  }\n                  return prevRepos;\n                });\n              },\n              // onProgress callback - update progress indicator with enhanced display\n              (progress) => {\n                console.log('📊 Real scanning progress:', progress);\n                setScanProgress(progress);\n                \n                // Track repositories currently being scanned with enhanced display timing\n                if (progress.started && !progress.completed) {\n                  // Repository is being started - add to currently scanning set\n                  console.log('🔍 Started scanning:', progress.currentRepo);\n                  setCurrentlyScanningRepos(prev => new Set([...prev, progress.currentRepo]));\n                  \n                  // Ensure the scanning state is properly set\n                  setScanProgress({\n                    ...progress,\n                    started: true,\n                    completed: false\n                  });\n                } else if (progress.completed) {\n                  // Repository is completed - show completion state\n                  console.log('✅ Completed scanning:', progress.currentRepo);\n                  setScanProgress({\n                    ...progress,\n                    completed: true\n                  });\n                  \n                  // Remove from currently scanning set after a brief moment\n                  setTimeout(() => {\n                    setCurrentlyScanningRepos(prev => {\n                      const newSet = new Set(prev);\n                      newSet.delete(progress.currentRepo);\n                      return newSet;\n                    });\n                  }, 200);\n                  \n                  // Check if this is the last repository being scanned\n                  if (progress.current === progress.total) {\n                    // All repositories have been scanned, stop the scanning state\n                    console.log('🎉 All repositories scanned, stopping scanning state');\n                    setTimeout(() => {\n                      setIsScanning(false);\n                      setScanProgress(null);\n                      setCurrentlyScanningRepos(new Set());\n                    }, 500); // Small delay to show completion\n                  }\n                } else if (progress.total === 0 && progress.completed) {\n                  // Special case: no repositories to scan\n                  console.log('🎉 No repositories to scan, stopping scanning state');\n                  setTimeout(() => {\n                    setIsScanning(false);\n                    setScanProgress(null);\n                    setCurrentlyScanningRepos(new Set());\n                  }, 500);\n                }\n              }\n            );\n            \n            try {\n              // Race between the scanning promise and timeout\n              repos = await Promise.race([scanPromise, timeoutPromise]);\n            } catch (timeoutError) {\n              console.error('⏰ Scanning timed out:', timeoutError.message);\n              // Stop scanning on timeout\n              setIsScanning(false);\n              setScanProgress(null);\n              setCurrentlyScanningRepos(new Set());\n              throw new Error('Repository scanning timed out. Please try again or use cached data if available.');\n            }\n            \n            // Cache the results for future quick access\n            repositoryCacheService.setCachedRepositories(\n              profile.login, \n              profile.type === 'org' ? 'org' : 'user', \n              repos\n            );\n            \n            // Update repositories with final results (in case callback missed any)\n            // Sort alphabetically to ensure consistent ordering\n            const sortedRepos = repos.sort((a, b) => a.name.localeCompare(b.name));\n            setRepositories(sortedRepos);\n          } else {\n            // Fallback to mock repositories with enhanced scanning demonstration\n            await simulateEnhancedScanning();\n            repos = getMockRepositories();\n            // Sort mock repositories alphabetically\n            repos.sort((a, b) => a.name.localeCompare(b.name));\n            setRepositories(repos);\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching repositories:', error);\n      setError('Failed to fetch repositories. Please check your connection and try again.');\n      // Fallback to mock data for demonstration\n      const mockRepos = getMockRepositories();\n      mockRepos.sort((a, b) => a.name.localeCompare(b.name));\n      setRepositories(mockRepos);\n      // Make sure to stop scanning on error\n      setIsScanning(false);\n      setScanProgress(null);\n      setCurrentlyScanningRepos(new Set());\n    } finally {\n      setLoading(false);\n      // Don't automatically stop scanning here for authenticated progressive scans\n      // or for demo scanning - let them manage their own scanning state\n      if (!githubService.isAuth() && action === 'create') {\n        // Only auto-stop for create action when not authenticated\n        setIsScanning(false);\n        setScanProgress(null);\n        setCurrentlyScanningRepos(new Set());\n      }\n    }\n  }, [profile, action, getMockRepositories, simulateEnhancedScanning]);\n\n  useEffect(() => {\n    // Only proceed if we have valid profile, action and userParam consistency\n    if (!profile || !action || !userParam || profile.login !== userParam) {\n      return;\n    }\n    \n    // Always check cache first on initial load\n    fetchRepositories(false, false); // forceRescan=false, useCachedData=false (but still check cache first)\n  }, [profile, action, userParam, fetchRepositories]);\n\n  const handleRepositorySelect = (repo) => {\n    setSelectedRepository(repo);\n    \n    // For 'edit' action, automatically navigate after selection\n    if (action === 'edit') {\n      // Add a small delay for visual feedback before navigation\n      setTimeout(() => {\n        const repoPath = getRepositoryPath(repo);\n        if (repoPath) {\n          const dashboardUrl = `/dashboard/${repoPath.user}/${repoPath.repo}`;\n          navigate(dashboardUrl, {\n            state: {\n              profile,\n              repository: repo,\n              action\n            }\n          });\n        } else {\n          // Fallback to original behavior if unable to extract path\n          const config = getActionConfig();\n          navigate(config.nextRoute, {\n            state: {\n              profile,\n              repository: repo,\n              action\n            }\n          });\n        }\n      }, 300); // 300ms delay for visual feedback\n    }\n  };\n\n  const handleContinue = () => {\n    if (!selectedRepository) {\n      alert('Please select a repository to continue');\n      return;\n    }\n\n    const config = getActionConfig();\n    \n    if (action === 'edit') {\n      // Go directly to dashboard for editing with user/repo parameters\n      const repoPath = getRepositoryPath(selectedRepository);\n      if (repoPath) {\n        const dashboardUrl = `/dashboard/${repoPath.user}/${repoPath.repo}`;\n        navigate(dashboardUrl, {\n          state: {\n            profile: profile,\n            repository: selectedRepository,\n            action: action\n          }\n        });\n      } else {\n        // Fallback to original behavior if unable to extract path\n        navigate(config.nextRoute, {\n          state: {\n            profile: profile,\n            repository: selectedRepository,\n            action: action\n          }\n        });\n      }\n    } else {\n      // Go to organization selection for fork/create\n      navigate(config.nextRoute, {\n        state: {\n          profile: profile,\n          sourceRepository: selectedRepository,\n          action: action\n        }\n      });\n    }\n  };\n\n  const handleRescan = () => {\n    fetchRepositories(true, false); // Force rescan, don't use cache\n  };\n\n  const handleUseCachedData = () => {\n    fetchRepositories(false, false); // Don't force rescan, check cache first (this should use cache if available)\n  };\n\n  const handleDemoScanning = async () => {\n    // Simulate the enhanced scanning display for demonstration purposes\n    await simulateEnhancedScanning();\n  };\n\n  const handleBack = () => {\n    navigate('/dak-action', { state: { profile: profile } });\n  };\n\n  const handleHomeNavigation = () => {\n    navigate('/');\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  if (!profile || !action || !userParam || profile.login !== userParam) {\n    return <div className=\"dak-selection\"><div style={{color: 'white', textAlign: 'center', padding: '2rem'}}>Redirecting...</div></div>;\n  }\n\n  const config = getActionConfig();\n\n  return (\n    <div className=\"dak-selection\">\n      <div className=\"selection-header\">\n        <div className=\"who-branding\">\n          <h1 onClick={handleHomeNavigation} className=\"clickable-title\">SGEX Workbench</h1>\n          <p className=\"subtitle\">WHO SMART Guidelines Exchange</p>\n        </div>\n        <div className=\"profile-info\">\n          <img \n            src={profile.avatar_url || `https://github.com/${profile.login}.png`} \n            alt=\"Profile\" \n            className=\"profile-avatar\" \n          />\n          <span>{profile.name || profile.login}</span>\n        </div>\n      </div>\n\n      <div className=\"selection-content\">\n        <div className=\"breadcrumb\">\n          <button onClick={() => navigate('/')} className=\"breadcrumb-link\">\n            Select Profile\n          </button>\n          <span className=\"breadcrumb-separator\">›</span>\n          <button onClick={handleBack} className=\"breadcrumb-link\">\n            Choose DAK Action\n          </button>\n          <span className=\"breadcrumb-separator\">›</span>\n          <span className=\"breadcrumb-current\">Select DAK</span>\n        </div>\n\n        <div className=\"selection-main\">\n          <div className=\"selection-intro\">\n            <h2>{config.title}</h2>\n            <p>{config.description}</p>\n            {action === 'create' && (\n              <div className=\"template-notice\">\n                <span className=\"notice-icon\">ℹ️</span>\n                <span>You'll create a new repository based on the WHO SMART Guidelines template.</span>\n              </div>\n            )}\n            \n            {action !== 'create' && githubService.isAuth() && (\n              <div className=\"cache-controls\">\n                {usingCachedData ? (\n                  <div className=\"cache-info\">\n                    <span className=\"cache-icon\">💾</span>\n                    <span>Using cached data. </span>\n                    <button \n                      onClick={handleRescan} \n                      className=\"rescan-link\"\n                      disabled={isScanning}\n                    >\n                      {isScanning ? 'Scanning...' : 'Rescan Repositories'}\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"scan-controls\">\n                    {!isScanning && !loading && (\n                      <>\n                        <button \n                          onClick={handleRescan} \n                          className=\"rescan-btn\"\n                          disabled={isScanning}\n                        >\n                          🔄 Rescan Repositories\n                        </button>\n                        {repositoryCacheService.getCachedRepositories(profile.login, profile.type === 'org' ? 'org' : 'user') && (\n                          <button \n                            onClick={handleUseCachedData} \n                            className=\"cache-btn\"\n                            disabled={isScanning}\n                          >\n                            💾 Use Cached Data\n                          </button>\n                        )}\n                      </>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n            {action !== 'create' && !githubService.isAuth() && !isScanning && !loading && (\n              <div className=\"demo-controls\">\n                <div className=\"demo-info\">\n                  <span className=\"demo-icon\">🎭</span>\n                  <span>Not authenticated. </span>\n                  <button \n                    onClick={handleDemoScanning} \n                    className=\"demo-scan-btn\"\n                    disabled={isScanning}\n                  >\n                    ✨ Demo Enhanced Scanning Display\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {loading ? (\n            <div className=\"loading\">\n              <div className=\"spinner\"></div>\n              <p>Loading repositories...</p>\n            </div>\n          ) : isScanning ? (\n            <div className=\"scanning-status\">\n              <div className=\"scanning-header\">\n                <div className=\"spinner\"></div>\n                <h3>Scanning repositories for SMART Guidelines compatibility...</h3>\n              </div>\n              {scanProgress && (\n                <div className=\"progress-container\">\n                  <div className=\"progress-bar\">\n                    <div \n                      className=\"progress-fill\" \n                      style={{ width: `${scanProgress.progress}%` }}\n                    ></div>\n                  </div>\n                  <div className=\"progress-info\">\n                    {/* Unified scanning status showing percentage and currently testing repos */}\n                    <div className=\"unified-scanning-status\">\n                      <div className=\"scanning-header-unified\">\n                        <div className=\"progress-stats\">\n                          <span className=\"progress-text\">\n                            {scanProgress.current}/{scanProgress.total} repositories\n                          </span>\n                          <span className=\"progress-percentage\">{scanProgress.progress}%</span>\n                        </div>\n                        {/* Always show Currently Testing section to maintain consistent height */}\n                        <div className=\"currently-testing-unified\">\n                          <span className=\"scanning-icon\">🔍</span>\n                          <span>Currently Testing:</span>\n                          <div className=\"currently-scanning-repos\">\n                            {currentlyScanningRepos.size > 0 ? (\n                              Array.from(currentlyScanningRepos).map((repoName) => (\n                                <div key={repoName} className=\"scanning-repo-item\">\n                                  <span className=\"repo-status-indicator\">⚡</span>\n                                  <span className=\"scanning-repo-name\">{repoName}</span>\n                                </div>\n                              ))\n                            ) : (\n                              <div className=\"scanning-repo-item\">\n                                <span className=\"repo-status-indicator\">⏳</span>\n                                <span className=\"scanning-repo-name\">Preparing scan...</span>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"scanning-note\">\n                    <span className=\"note-icon\">⚡</span>\n                    <span>Scanning up to 5 repositories concurrently to improve speed</span>\n                  </div>\n                </div>\n              )}\n              <div className=\"scanning-results\">\n                <p>Found repositories will appear below as they are discovered:</p>\n                <div className=\"repo-grid\">\n                  {repositories.map((repo) => (\n                    <div \n                      key={repo.id}\n                      className={`repo-card ${selectedRepository?.id === repo.id ? 'selected' : ''} scanning-found`}\n                      onClick={() => handleRepositorySelect(repo)}\n                    >\n                      <div className=\"repo-header-info\">\n                        <h3>{repo.name} <span className=\"new-badge\">✨ Found</span></h3>\n                        <div className=\"repo-meta\">\n                          {repo.is_template && (\n                            <span className=\"template-badge\">\n                              {repo.template_config?.name || 'Template'}\n                            </span>\n                          )}\n                          {repo.private && <span className=\"private-badge\">Private</span>}\n                          {repo.language && <span className=\"language-badge\">{repo.language}</span>}\n                          {repo.smart_guidelines_compatible && (\n                            <span className=\"compatible-badge\">SMART Guidelines</span>\n                          )}\n                        </div>\n                      </div>\n                      \n                      <p className=\"repo-description\">{repo.description || 'No description available'}</p>\n                      \n                      <div className=\"repo-topics\">\n                        {(repo.topics || []).slice(0, 3).map((topic) => (\n                          <span key={topic} className=\"topic-tag\">{topic}</span>\n                        ))}\n                        {(repo.topics || []).length > 3 && (\n                          <span className=\"topic-more\">+{(repo.topics || []).length - 3} more</span>\n                        )}\n                      </div>\n                      \n                      <div className=\"repo-stats\">\n                        <div className=\"stat\">\n                          <span className=\"stat-icon\">⭐</span>\n                          <span>{repo.stargazers_count || 0}</span>\n                        </div>\n                        <div className=\"stat\">\n                          <span className=\"stat-icon\">🍴</span>\n                          <span>{repo.forks_count || 0}</span>\n                        </div>\n                        <div className=\"stat\">\n                          <span className=\"stat-icon\">📅</span>\n                          <span>Updated {formatDate(repo.updated_at)}</span>\n                        </div>\n                      </div>\n\n                      {selectedRepository?.id === repo.id && (\n                        <div className=\"selection-indicator\">\n                          <span>✓ Selected</span>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          ) : error ? (\n            <div className=\"error-state\">\n              <h3>Error loading repositories</h3>\n              <p>{error}</p>\n              <button onClick={fetchRepositories} className=\"retry-btn\">\n                Try Again\n              </button>\n            </div>\n          ) : repositories.length === 0 ? (\n            <div className=\"empty-state\">\n              <h3>No repositories found</h3>\n              <p>\n                {action === 'create' \n                  ? 'Unable to load the WHO template repository.'\n                  : 'No DAK repositories found with SMART Guidelines compatibility.'\n                }\n              </p>\n            </div>\n          ) : (\n            <>\n              <div className=\"repo-grid\">\n                {repositories.map((repo) => (\n                  <div \n                    key={repo.id}\n                    className={`repo-card ${selectedRepository?.id === repo.id ? 'selected' : ''}`}\n                    onClick={() => handleRepositorySelect(repo)}\n                  >\n                    <div className=\"repo-header-info\">\n                      <h3>{repo.name}</h3>\n                      <div className=\"repo-meta\">\n                        {repo.is_template && (\n                          <span className=\"template-badge\">\n                            {repo.template_config?.name || 'Template'}\n                          </span>\n                        )}\n                        {repo.private && <span className=\"private-badge\">Private</span>}\n                        {repo.language && <span className=\"language-badge\">{repo.language}</span>}\n                        {repo.smart_guidelines_compatible && (\n                          <span className=\"compatible-badge\">SMART Guidelines</span>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <p className=\"repo-description\">{repo.description || 'No description available'}</p>\n                    \n                    <div className=\"repo-topics\">\n                      {(repo.topics || []).slice(0, 3).map((topic) => (\n                        <span key={topic} className=\"topic-tag\">{topic}</span>\n                      ))}\n                      {(repo.topics || []).length > 3 && (\n                        <span className=\"topic-more\">+{(repo.topics || []).length - 3} more</span>\n                      )}\n                    </div>\n                    \n                    <div className=\"repo-stats\">\n                      <div className=\"stat\">\n                        <span className=\"stat-icon\">⭐</span>\n                        <span>{repo.stargazers_count || 0}</span>\n                      </div>\n                      <div className=\"stat\">\n                        <span className=\"stat-icon\">🍴</span>\n                        <span>{repo.forks_count || 0}</span>\n                      </div>\n                      <div className=\"stat\">\n                        <span className=\"stat-icon\">📅</span>\n                        <span>Updated {formatDate(repo.updated_at)}</span>\n                      </div>\n                    </div>\n\n                    {selectedRepository?.id === repo.id && (\n                      <div className=\"selection-indicator\">\n                        <span>✓ Selected</span>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"selection-footer\">\n                {action !== 'edit' && (\n                  <button \n                    className=\"continue-btn\"\n                    onClick={handleContinue}\n                    disabled={!selectedRepository}\n                  >\n                    {config.buttonText}\n                  </button>\n                )}\n                {action === 'edit' && (\n                  <div className=\"direct-selection-note\">\n                    <span className=\"note-icon\">💡</span>\n                    <span>Click on a repository above to start editing its components</span>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n      \n      <ContextualHelpMascot \n        pageId=\"dak-selection\"\n        contextData={{ profile, selectedRepository, action }}\n      />\n    </div>\n  );\n};\n\nexport default DAKSelection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}