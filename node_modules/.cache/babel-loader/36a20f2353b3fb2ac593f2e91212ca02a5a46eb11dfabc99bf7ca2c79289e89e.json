{"ast":null,"code":"import { isArray, isFunction, forEach } from 'min-dash';\nimport { domify, query as domQuery, attr as domAttr, clear as domClear, classes as domClasses, matches as domMatches, delegate as domDelegate, event as domEvent } from 'min-dom';\nimport { escapeCSS } from '../../util/EscapeUtil';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {import('./PaletteProvider').PaletteEntries} PaletteEntries\n * @typedef {import('./PaletteProvider').default} PaletteProvider\n */\n\nvar TOGGLE_SELECTOR = '.djs-palette-toggle',\n  ENTRY_SELECTOR = '.entry',\n  ELEMENT_SELECTOR = TOGGLE_SELECTOR + ', ' + ENTRY_SELECTOR;\nvar PALETTE_PREFIX = 'djs-palette-',\n  PALETTE_SHOWN_CLS = 'shown',\n  PALETTE_OPEN_CLS = 'open',\n  PALETTE_TWO_COLUMN_CLS = 'two-column';\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A palette containing modeling elements.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function Palette(eventBus, canvas) {\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n  var self = this;\n  eventBus.on('tool-manager.update', function (event) {\n    var tool = event.tool;\n    self.updateToolHighlight(tool);\n  });\n  eventBus.on('i18n.changed', function () {\n    self._update();\n  });\n  eventBus.on('diagram.init', function () {\n    self._diagramInitialized = true;\n    self._rebuild();\n  });\n}\nPalette.$inject = ['eventBus', 'canvas'];\n\n/**\n * @overlord\n *\n * Register a palette provider with default priority. See\n * {@link PaletteProvider} for examples.\n *\n * @param {PaletteProvider} provider\n */\n\n/**\n * Register a palette provider with the given priority. See\n * {@link PaletteProvider} for examples.\n *\n * @param {number} priority\n * @param {PaletteProvider} provider\n */\nPalette.prototype.registerProvider = function (priority, provider) {\n  if (!provider) {\n    provider = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n  this._eventBus.on('palette.getProviders', priority, function (event) {\n    event.providers.push(provider);\n  });\n  this._rebuild();\n};\n\n/**\n * Returns the palette entries.\n *\n * @return {PaletteEntries}\n */\nPalette.prototype.getEntries = function () {\n  var providers = this._getProviders();\n  return providers.reduce(addPaletteEntries, {});\n};\nPalette.prototype._rebuild = function () {\n  if (!this._diagramInitialized) {\n    return;\n  }\n  var providers = this._getProviders();\n  if (!providers.length) {\n    return;\n  }\n  if (!this._container) {\n    this._init();\n  }\n  this._update();\n};\n\n/**\n * Initialize palette.\n */\nPalette.prototype._init = function () {\n  var self = this;\n  var eventBus = this._eventBus;\n  var parentContainer = this._getParentContainer();\n  var container = this._container = domify(Palette.HTML_MARKUP);\n  parentContainer.appendChild(container);\n  domClasses(parentContainer).add(PALETTE_PREFIX + PALETTE_SHOWN_CLS);\n  domDelegate.bind(container, ELEMENT_SELECTOR, 'click', function (event) {\n    var target = event.delegateTarget;\n    if (domMatches(target, TOGGLE_SELECTOR)) {\n      return self.toggle();\n    }\n    self.trigger('click', event);\n  });\n\n  // prevent drag propagation\n  domEvent.bind(container, 'mousedown', function (event) {\n    event.stopPropagation();\n  });\n\n  // prevent drag propagation\n  domDelegate.bind(container, ENTRY_SELECTOR, 'dragstart', function (event) {\n    self.trigger('dragstart', event);\n  });\n  eventBus.on('canvas.resized', this._layoutChanged, this);\n  eventBus.fire('palette.create', {\n    container: container\n  });\n};\nPalette.prototype._getProviders = function (id) {\n  var event = this._eventBus.createEvent({\n    type: 'palette.getProviders',\n    providers: []\n  });\n  this._eventBus.fire(event);\n  return event.providers;\n};\n\n/**\n * Update palette state.\n *\n * @param { {\n *   open?: boolean;\n *   twoColumn?: boolean;\n * } } [state]\n */\nPalette.prototype._toggleState = function (state) {\n  state = state || {};\n  var parent = this._getParentContainer(),\n    container = this._container;\n  var eventBus = this._eventBus;\n  var twoColumn;\n  var cls = domClasses(container),\n    parentCls = domClasses(parent);\n  if ('twoColumn' in state) {\n    twoColumn = state.twoColumn;\n  } else {\n    twoColumn = this._needsCollapse(parent.clientHeight, this._entries || {});\n  }\n\n  // always update two column\n  cls.toggle(PALETTE_TWO_COLUMN_CLS, twoColumn);\n  parentCls.toggle(PALETTE_PREFIX + PALETTE_TWO_COLUMN_CLS, twoColumn);\n  if ('open' in state) {\n    cls.toggle(PALETTE_OPEN_CLS, state.open);\n    parentCls.toggle(PALETTE_PREFIX + PALETTE_OPEN_CLS, state.open);\n  }\n  eventBus.fire('palette.changed', {\n    twoColumn: twoColumn,\n    open: this.isOpen()\n  });\n};\nPalette.prototype._update = function () {\n  var entriesContainer = domQuery('.djs-palette-entries', this._container),\n    entries = this._entries = this.getEntries();\n  domClear(entriesContainer);\n  forEach(entries, function (entry, id) {\n    var grouping = entry.group || 'default';\n    var container = domQuery('[data-group=' + escapeCSS(grouping) + ']', entriesContainer);\n    if (!container) {\n      container = domify('<div class=\"group\"></div>');\n      domAttr(container, 'data-group', grouping);\n      entriesContainer.appendChild(container);\n    }\n    var html = entry.html || (entry.separator ? '<hr class=\"separator\" />' : '<div class=\"entry\" draggable=\"true\"></div>');\n    var control = domify(html);\n    container.appendChild(control);\n    if (!entry.separator) {\n      domAttr(control, 'data-action', id);\n      if (entry.title) {\n        domAttr(control, 'title', entry.title);\n      }\n      if (entry.className) {\n        addClasses(control, entry.className);\n      }\n      if (entry.imageUrl) {\n        var image = domify('<img>');\n        domAttr(image, 'src', entry.imageUrl);\n        control.appendChild(image);\n      }\n    }\n  });\n\n  // open after update\n  this.open();\n};\n\n/**\n * Trigger an action available on the palette\n *\n * @param {string} action\n * @param {Event} event\n * @param {boolean} [autoActivate=false]\n */\nPalette.prototype.trigger = function (action, event, autoActivate) {\n  var entry,\n    originalEvent,\n    button = event.delegateTarget || event.target;\n  if (!button) {\n    return event.preventDefault();\n  }\n  entry = domAttr(button, 'data-action');\n  originalEvent = event.originalEvent || event;\n  return this.triggerEntry(entry, action, originalEvent, autoActivate);\n};\n\n/**\n * @param {string} entryId\n * @param {string} action\n * @param {Event} event\n * @param {boolean} [autoActivate=false]\n */\nPalette.prototype.triggerEntry = function (entryId, action, event, autoActivate) {\n  var entries = this._entries,\n    entry,\n    handler;\n  entry = entries[entryId];\n\n  // when user clicks on the palette and not on an action\n  if (!entry) {\n    return;\n  }\n  handler = entry.action;\n  if (this._eventBus.fire('palette.trigger', {\n    entry,\n    event\n  }) === false) {\n    return;\n  }\n\n  // simple action (via callback function)\n  if (isFunction(handler)) {\n    if (action === 'click') {\n      return handler(event, autoActivate);\n    }\n  } else {\n    if (handler[action]) {\n      return handler[action](event, autoActivate);\n    }\n  }\n\n  // silence other actions\n  event.preventDefault();\n};\nPalette.prototype._layoutChanged = function () {\n  this._toggleState({});\n};\n\n/**\n * Do we need to collapse to two columns?\n *\n * @param {number} availableHeight\n * @param {PaletteEntries} entries\n *\n * @return {boolean}\n */\nPalette.prototype._needsCollapse = function (availableHeight, entries) {\n  // top margin + bottom toggle + bottom margin\n  // implementors must override this method if they\n  // change the palette styles\n  var margin = 20 + 10 + 20;\n  var entriesHeight = Object.keys(entries).length * 46;\n  return availableHeight < entriesHeight + margin;\n};\n\n/**\n * Close the palette.\n */\nPalette.prototype.close = function () {\n  this._toggleState({\n    open: false,\n    twoColumn: false\n  });\n};\n\n/**\n * Open the palette.\n */\nPalette.prototype.open = function () {\n  this._toggleState({\n    open: true\n  });\n};\n\n/**\n * Toggle the palette.\n */\nPalette.prototype.toggle = function () {\n  if (this.isOpen()) {\n    this.close();\n  } else {\n    this.open();\n  }\n};\n\n/**\n * @param {string} tool\n *\n * @return {boolean}\n */\nPalette.prototype.isActiveTool = function (tool) {\n  return tool && this._activeTool === tool;\n};\n\n/**\n * @param {string} name\n */\nPalette.prototype.updateToolHighlight = function (name) {\n  var entriesContainer, toolsContainer;\n  if (!this._toolsContainer) {\n    entriesContainer = domQuery('.djs-palette-entries', this._container);\n    this._toolsContainer = domQuery('[data-group=tools]', entriesContainer);\n  }\n  toolsContainer = this._toolsContainer;\n  forEach(toolsContainer.children, function (tool) {\n    var actionName = tool.getAttribute('data-action');\n    if (!actionName) {\n      return;\n    }\n    var toolClasses = domClasses(tool);\n    actionName = actionName.replace('-tool', '');\n    if (toolClasses.contains('entry') && actionName === name) {\n      toolClasses.add('highlighted-entry');\n    } else {\n      toolClasses.remove('highlighted-entry');\n    }\n  });\n};\n\n/**\n * Return `true` if the palette is opened.\n *\n * @example\n *\n * ```javascript\n * palette.open();\n *\n * if (palette.isOpen()) {\n *   // yes, we are open\n * }\n * ```\n *\n * @return {boolean}\n */\nPalette.prototype.isOpen = function () {\n  return domClasses(this._container).has(PALETTE_OPEN_CLS);\n};\n\n/**\n * Get parent element of palette.\n *\n * @return {HTMLElement}\n */\nPalette.prototype._getParentContainer = function () {\n  return this._canvas.getContainer();\n};\n\n/* markup definition */\n\nPalette.HTML_MARKUP = '<div class=\"djs-palette\">' + '<div class=\"djs-palette-entries\"></div>' + '<div class=\"djs-palette-toggle\"></div>' + '</div>';\n\n// helpers //////////////////////\n\nfunction addClasses(element, classNames) {\n  var classes = domClasses(element);\n  var actualClassNames = isArray(classNames) ? classNames : classNames.split(/\\s+/g);\n  actualClassNames.forEach(function (cls) {\n    classes.add(cls);\n  });\n}\nfunction addPaletteEntries(entries, provider) {\n  var entriesOrUpdater = provider.getPaletteEntries();\n  if (isFunction(entriesOrUpdater)) {\n    return entriesOrUpdater(entries);\n  }\n  forEach(entriesOrUpdater, function (entry, id) {\n    entries[id] = entry;\n  });\n  return entries;\n}","map":{"version":3,"names":["isArray","isFunction","forEach","domify","query","domQuery","attr","domAttr","clear","domClear","classes","domClasses","matches","domMatches","delegate","domDelegate","event","domEvent","escapeCSS","TOGGLE_SELECTOR","ENTRY_SELECTOR","ELEMENT_SELECTOR","PALETTE_PREFIX","PALETTE_SHOWN_CLS","PALETTE_OPEN_CLS","PALETTE_TWO_COLUMN_CLS","DEFAULT_PRIORITY","Palette","eventBus","canvas","_eventBus","_canvas","self","on","tool","updateToolHighlight","_update","_diagramInitialized","_rebuild","$inject","prototype","registerProvider","priority","provider","providers","push","getEntries","_getProviders","reduce","addPaletteEntries","length","_container","_init","parentContainer","_getParentContainer","container","HTML_MARKUP","appendChild","add","bind","target","delegateTarget","toggle","trigger","stopPropagation","_layoutChanged","fire","id","createEvent","type","_toggleState","state","parent","twoColumn","cls","parentCls","_needsCollapse","clientHeight","_entries","open","isOpen","entriesContainer","entries","entry","grouping","group","html","separator","control","title","className","addClasses","imageUrl","image","action","autoActivate","originalEvent","button","preventDefault","triggerEntry","entryId","handler","availableHeight","margin","entriesHeight","Object","keys","close","isActiveTool","_activeTool","name","toolsContainer","_toolsContainer","children","actionName","getAttribute","toolClasses","replace","contains","remove","has","getContainer","element","classNames","actualClassNames","split","entriesOrUpdater","getPaletteEntries"],"sources":["/home/runner/work/sgex/sgex/node_modules/diagram-js/lib/features/palette/Palette.js"],"sourcesContent":["import {\n  isArray,\n  isFunction,\n  forEach\n} from 'min-dash';\n\nimport {\n  domify,\n  query as domQuery,\n  attr as domAttr,\n  clear as domClear,\n  classes as domClasses,\n  matches as domMatches,\n  delegate as domDelegate,\n  event as domEvent\n} from 'min-dom';\n\nimport {\n  escapeCSS\n} from '../../util/EscapeUtil';\n\n/**\n * @typedef {import('../../core/Canvas').default} Canvas\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {import('./PaletteProvider').PaletteEntries} PaletteEntries\n * @typedef {import('./PaletteProvider').default} PaletteProvider\n */\n\nvar TOGGLE_SELECTOR = '.djs-palette-toggle',\n    ENTRY_SELECTOR = '.entry',\n    ELEMENT_SELECTOR = TOGGLE_SELECTOR + ', ' + ENTRY_SELECTOR;\n\nvar PALETTE_PREFIX = 'djs-palette-',\n    PALETTE_SHOWN_CLS = 'shown',\n    PALETTE_OPEN_CLS = 'open',\n    PALETTE_TWO_COLUMN_CLS = 'two-column';\n\nvar DEFAULT_PRIORITY = 1000;\n\n\n/**\n * A palette containing modeling elements.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n */\nexport default function Palette(eventBus, canvas) {\n\n  this._eventBus = eventBus;\n  this._canvas = canvas;\n\n  var self = this;\n\n  eventBus.on('tool-manager.update', function(event) {\n    var tool = event.tool;\n\n    self.updateToolHighlight(tool);\n  });\n\n  eventBus.on('i18n.changed', function() {\n    self._update();\n  });\n\n  eventBus.on('diagram.init', function() {\n\n    self._diagramInitialized = true;\n\n    self._rebuild();\n  });\n}\n\nPalette.$inject = [ 'eventBus', 'canvas' ];\n\n/**\n * @overlord\n *\n * Register a palette provider with default priority. See\n * {@link PaletteProvider} for examples.\n *\n * @param {PaletteProvider} provider\n */\n\n/**\n * Register a palette provider with the given priority. See\n * {@link PaletteProvider} for examples.\n *\n * @param {number} priority\n * @param {PaletteProvider} provider\n */\nPalette.prototype.registerProvider = function(priority, provider) {\n  if (!provider) {\n    provider = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on('palette.getProviders', priority, function(event) {\n    event.providers.push(provider);\n  });\n\n  this._rebuild();\n};\n\n\n/**\n * Returns the palette entries.\n *\n * @return {PaletteEntries}\n */\nPalette.prototype.getEntries = function() {\n  var providers = this._getProviders();\n\n  return providers.reduce(addPaletteEntries, {});\n};\n\nPalette.prototype._rebuild = function() {\n\n  if (!this._diagramInitialized) {\n    return;\n  }\n\n  var providers = this._getProviders();\n\n  if (!providers.length) {\n    return;\n  }\n\n  if (!this._container) {\n    this._init();\n  }\n\n  this._update();\n};\n\n/**\n * Initialize palette.\n */\nPalette.prototype._init = function() {\n\n  var self = this;\n\n  var eventBus = this._eventBus;\n\n  var parentContainer = this._getParentContainer();\n\n  var container = this._container = domify(Palette.HTML_MARKUP);\n\n  parentContainer.appendChild(container);\n  domClasses(parentContainer).add(PALETTE_PREFIX + PALETTE_SHOWN_CLS);\n\n  domDelegate.bind(container, ELEMENT_SELECTOR, 'click', function(event) {\n\n    var target = event.delegateTarget;\n\n    if (domMatches(target, TOGGLE_SELECTOR)) {\n      return self.toggle();\n    }\n\n    self.trigger('click', event);\n  });\n\n  // prevent drag propagation\n  domEvent.bind(container, 'mousedown', function(event) {\n    event.stopPropagation();\n  });\n\n  // prevent drag propagation\n  domDelegate.bind(container, ENTRY_SELECTOR, 'dragstart', function(event) {\n    self.trigger('dragstart', event);\n  });\n\n  eventBus.on('canvas.resized', this._layoutChanged, this);\n\n  eventBus.fire('palette.create', {\n    container: container\n  });\n};\n\nPalette.prototype._getProviders = function(id) {\n\n  var event = this._eventBus.createEvent({\n    type: 'palette.getProviders',\n    providers: []\n  });\n\n  this._eventBus.fire(event);\n\n  return event.providers;\n};\n\n/**\n * Update palette state.\n *\n * @param { {\n *   open?: boolean;\n *   twoColumn?: boolean;\n * } } [state]\n */\nPalette.prototype._toggleState = function(state) {\n\n  state = state || {};\n\n  var parent = this._getParentContainer(),\n      container = this._container;\n\n  var eventBus = this._eventBus;\n\n  var twoColumn;\n\n  var cls = domClasses(container),\n      parentCls = domClasses(parent);\n\n  if ('twoColumn' in state) {\n    twoColumn = state.twoColumn;\n  } else {\n    twoColumn = this._needsCollapse(parent.clientHeight, this._entries || {});\n  }\n\n  // always update two column\n  cls.toggle(PALETTE_TWO_COLUMN_CLS, twoColumn);\n  parentCls.toggle(PALETTE_PREFIX + PALETTE_TWO_COLUMN_CLS, twoColumn);\n\n  if ('open' in state) {\n    cls.toggle(PALETTE_OPEN_CLS, state.open);\n    parentCls.toggle(PALETTE_PREFIX + PALETTE_OPEN_CLS, state.open);\n  }\n\n  eventBus.fire('palette.changed', {\n    twoColumn: twoColumn,\n    open: this.isOpen()\n  });\n};\n\nPalette.prototype._update = function() {\n\n  var entriesContainer = domQuery('.djs-palette-entries', this._container),\n      entries = this._entries = this.getEntries();\n\n  domClear(entriesContainer);\n\n  forEach(entries, function(entry, id) {\n\n    var grouping = entry.group || 'default';\n\n    var container = domQuery('[data-group=' + escapeCSS(grouping) + ']', entriesContainer);\n    if (!container) {\n      container = domify('<div class=\"group\"></div>');\n      domAttr(container, 'data-group', grouping);\n\n      entriesContainer.appendChild(container);\n    }\n\n    var html = entry.html || (\n      entry.separator ?\n        '<hr class=\"separator\" />' :\n        '<div class=\"entry\" draggable=\"true\"></div>');\n\n\n    var control = domify(html);\n    container.appendChild(control);\n\n    if (!entry.separator) {\n      domAttr(control, 'data-action', id);\n\n      if (entry.title) {\n        domAttr(control, 'title', entry.title);\n      }\n\n      if (entry.className) {\n        addClasses(control, entry.className);\n      }\n\n      if (entry.imageUrl) {\n        var image = domify('<img>');\n        domAttr(image, 'src', entry.imageUrl);\n\n        control.appendChild(image);\n      }\n    }\n  });\n\n  // open after update\n  this.open();\n};\n\n\n/**\n * Trigger an action available on the palette\n *\n * @param {string} action\n * @param {Event} event\n * @param {boolean} [autoActivate=false]\n */\nPalette.prototype.trigger = function(action, event, autoActivate) {\n  var entry,\n      originalEvent,\n      button = event.delegateTarget || event.target;\n\n  if (!button) {\n    return event.preventDefault();\n  }\n\n  entry = domAttr(button, 'data-action');\n  originalEvent = event.originalEvent || event;\n\n  return this.triggerEntry(entry, action, originalEvent, autoActivate);\n};\n\n/**\n * @param {string} entryId\n * @param {string} action\n * @param {Event} event\n * @param {boolean} [autoActivate=false]\n */\nPalette.prototype.triggerEntry = function(entryId, action, event, autoActivate) {\n  var entries = this._entries,\n      entry,\n      handler;\n\n  entry = entries[entryId];\n\n  // when user clicks on the palette and not on an action\n  if (!entry) {\n    return;\n  }\n\n  handler = entry.action;\n\n  if (this._eventBus.fire('palette.trigger', { entry, event }) === false) {\n    return;\n  }\n\n  // simple action (via callback function)\n  if (isFunction(handler)) {\n    if (action === 'click') {\n      return handler(event, autoActivate);\n    }\n  } else {\n    if (handler[action]) {\n      return handler[action](event, autoActivate);\n    }\n  }\n\n  // silence other actions\n  event.preventDefault();\n};\n\nPalette.prototype._layoutChanged = function() {\n  this._toggleState({});\n};\n\n/**\n * Do we need to collapse to two columns?\n *\n * @param {number} availableHeight\n * @param {PaletteEntries} entries\n *\n * @return {boolean}\n */\nPalette.prototype._needsCollapse = function(availableHeight, entries) {\n\n  // top margin + bottom toggle + bottom margin\n  // implementors must override this method if they\n  // change the palette styles\n  var margin = 20 + 10 + 20;\n\n  var entriesHeight = Object.keys(entries).length * 46;\n\n  return availableHeight < entriesHeight + margin;\n};\n\n/**\n * Close the palette.\n */\nPalette.prototype.close = function() {\n  this._toggleState({\n    open: false,\n    twoColumn: false\n  });\n};\n\n/**\n * Open the palette.\n */\nPalette.prototype.open = function() {\n  this._toggleState({ open: true });\n};\n\n/**\n * Toggle the palette.\n */\nPalette.prototype.toggle = function() {\n  if (this.isOpen()) {\n    this.close();\n  } else {\n    this.open();\n  }\n};\n\n/**\n * @param {string} tool\n *\n * @return {boolean}\n */\nPalette.prototype.isActiveTool = function(tool) {\n  return tool && this._activeTool === tool;\n};\n\n/**\n * @param {string} name\n */\nPalette.prototype.updateToolHighlight = function(name) {\n  var entriesContainer,\n      toolsContainer;\n\n  if (!this._toolsContainer) {\n    entriesContainer = domQuery('.djs-palette-entries', this._container);\n\n    this._toolsContainer = domQuery('[data-group=tools]', entriesContainer);\n  }\n\n  toolsContainer = this._toolsContainer;\n\n  forEach(toolsContainer.children, function(tool) {\n    var actionName = tool.getAttribute('data-action');\n\n    if (!actionName) {\n      return;\n    }\n\n    var toolClasses = domClasses(tool);\n\n    actionName = actionName.replace('-tool', '');\n\n    if (toolClasses.contains('entry') && actionName === name) {\n      toolClasses.add('highlighted-entry');\n    } else {\n      toolClasses.remove('highlighted-entry');\n    }\n  });\n};\n\n\n/**\n * Return `true` if the palette is opened.\n *\n * @example\n *\n * ```javascript\n * palette.open();\n *\n * if (palette.isOpen()) {\n *   // yes, we are open\n * }\n * ```\n *\n * @return {boolean}\n */\nPalette.prototype.isOpen = function() {\n  return domClasses(this._container).has(PALETTE_OPEN_CLS);\n};\n\n/**\n * Get parent element of palette.\n *\n * @return {HTMLElement}\n */\nPalette.prototype._getParentContainer = function() {\n  return this._canvas.getContainer();\n};\n\n\n/* markup definition */\n\nPalette.HTML_MARKUP =\n  '<div class=\"djs-palette\">' +\n    '<div class=\"djs-palette-entries\"></div>' +\n    '<div class=\"djs-palette-toggle\"></div>' +\n  '</div>';\n\n\n// helpers //////////////////////\n\nfunction addClasses(element, classNames) {\n\n  var classes = domClasses(element);\n\n  var actualClassNames = isArray(classNames) ? classNames : classNames.split(/\\s+/g);\n  actualClassNames.forEach(function(cls) {\n    classes.add(cls);\n  });\n}\n\nfunction addPaletteEntries(entries, provider) {\n\n  var entriesOrUpdater = provider.getPaletteEntries();\n\n  if (isFunction(entriesOrUpdater)) {\n    return entriesOrUpdater(entries);\n  }\n\n  forEach(entriesOrUpdater, function(entry, id) {\n    entries[id] = entry;\n  });\n\n  return entries;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}