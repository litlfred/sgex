{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useLocation,useNavigate}from'react-router-dom';import githubService from'../services/githubService';import{PageLayout,usePageParams}from'./framework';import'./CoreDataDictionaryViewer.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CoreDataDictionaryViewer=()=>{return/*#__PURE__*/_jsx(PageLayout,{pageName:\"core-data-dictionary-viewer\",children:/*#__PURE__*/_jsx(CoreDataDictionaryViewerContent,{})});};const CoreDataDictionaryViewerContent=()=>{const location=useLocation();const navigate=useNavigate();const{params}=usePageParams();// Get data from URL params or location state (for backward compatibility)\nconst{profile,repository,component,selectedBranch}=location.state||{};const user=params===null||params===void 0?void 0:params.user;const repo=params===null||params===void 0?void 0:params.repo;const branch=params===null||params===void 0?void 0:params.branch;const[fshFiles,setFshFiles]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedFile,setSelectedFile]=useState(null);const[fileContent,setFileContent]=useState('');const[showModal,setShowModal]=useState(false);const[branches,setBranches]=useState([]);const[hasGhPages,setHasGhPages]=useState(false);const[dakFshFile,setDakFshFile]=useState(null);const[dakConcepts,setDakConcepts]=useState([]);const[dakTableSearch,setDakTableSearch]=useState('');const[hasPublishedDak,setHasPublishedDak]=useState(false);const[checkingPublishedDak,setCheckingPublishedDak]=useState(false);// Generate base URL for IG Publisher artifacts\nconst getBaseUrl=useCallback(branchName=>{var _repository$owner;const owner=user||(repository===null||repository===void 0?void 0:(_repository$owner=repository.owner)===null||_repository$owner===void 0?void 0:_repository$owner.login)||(repository===null||repository===void 0?void 0:repository.full_name.split('/')[0]);const repoName=repo||(repository===null||repository===void 0?void 0:repository.name);if(branchName===((repository===null||repository===void 0?void 0:repository.default_branch)||'main')){return`https://${owner}.github.io/${repoName}`;}else{return`https://${owner}.github.io/${repoName}/branches/${branchName}`;}},[user,repository,repo]);// Parse DAK.fsh file to extract concepts\nconst parseDakFshConcepts=useCallback(content=>{const concepts=[];// Split by lines and find concept definitions\nconst lines=content.split('\\n');for(let i=0;i<lines.length;i++){const line=lines[i].trim();// Look for concept definitions: * #code \"display\" \"definition\"\nconst conceptMatch=line.match(/^\\*\\s*#([^\\s\"]+)\\s*\"([^\"]+)\"\\s*\"([^\"]+)\"/);if(conceptMatch){const[,code,display,definition]=conceptMatch;concepts.push({code:code.trim(),display:display.trim(),definition:definition.trim()});}}return concepts;},[]);const handleHomeNavigation=()=>{navigate('/');};const handleBackToDashboard=()=>{if(user&&repo){// Use URL parameters for navigation\nconst dashboardPath=branch?`/dashboard/${user}/${repo}/${branch}`:`/dashboard/${user}/${repo}`;navigate(dashboardPath);}else{// Fallback to state-based navigation\nnavigate('/dashboard',{state:{profile,repository,selectedBranch}});}};// Fetch FSH files from input/fsh directory\nuseEffect(()=>{const fetchFshFiles=async()=>{var _repository$owner2;// Support both URL params and state-based data\nconst currentRepository=repository;const currentBranch=branch||selectedBranch;const currentUser=user||(repository===null||repository===void 0?void 0:(_repository$owner2=repository.owner)===null||_repository$owner2===void 0?void 0:_repository$owner2.login)||(repository===null||repository===void 0?void 0:repository.full_name.split('/')[0]);const currentRepo=repo||(repository===null||repository===void 0?void 0:repository.name);if(!currentRepository&&(!currentUser||!currentRepo)||!currentBranch){setLoading(false);return;}// Check if published DAK CodeSystem exists\nconst checkPublishedDakExists=async baseUrl=>{try{setCheckingPublishedDak(true);const dakUrl=`${baseUrl}/CodeSystem-DAK.html`;// Use fetch to check if the URL exists (HEAD request would be better but may have CORS issues)\nconst response=await fetch(dakUrl,{method:'HEAD'});return response.ok;}catch(error){console.warn('Error checking published DAK:',error);return false;}finally{setCheckingPublishedDak(false);}};try{setLoading(true);setError(null);// Try to fetch the input/fsh directory\ntry{const fshDirContents=await githubService.getDirectoryContents(currentUser,currentRepo,'input/fsh',currentBranch);// Filter for .fsh files\nconst fshFilesList=fshDirContents.filter(file=>file.name.endsWith('.fsh')&&file.type==='file').map(file=>({name:file.name,path:file.path,download_url:file.download_url,html_url:file.html_url}));setFshFiles(fshFilesList);}catch(err){if(err.status===404){// input/fsh directory doesn't exist\nsetFshFiles([]);}else{throw err;}}// Try to fetch the DAK.fsh file specifically from input/fsh/codesystems/\ntry{const dakFile=await githubService.getDirectoryContents(currentUser,currentRepo,'input/fsh/codesystems',currentBranch);// Look for DAK.fsh file\nconst dakFsh=dakFile.find(file=>file.name==='DAK.fsh'&&file.type==='file');if(dakFsh){setDakFshFile({name:dakFsh.name,path:dakFsh.path,download_url:dakFsh.download_url,html_url:dakFsh.html_url});// Fetch and parse DAK.fsh content for table display\ntry{const dakContent=await githubService.getFileContent(currentUser,currentRepo,dakFsh.path,currentBranch);const concepts=parseDakFshConcepts(dakContent);setDakConcepts(concepts);}catch(contentErr){console.warn('Could not parse DAK.fsh content:',contentErr);setDakConcepts([]);}}else{setDakFshFile(null);setDakConcepts([]);}}catch(err){if(err.status===404){// input/fsh/codesystems directory doesn't exist or no DAK.fsh\nsetDakFshFile(null);setDakConcepts([]);}else{console.warn('Error fetching DAK.fsh:',err);setDakFshFile(null);setDakConcepts([]);}}// Fetch branches to check for gh-pages\nconst allBranches=await githubService.getBranches(currentUser,currentRepo);const branchNames=allBranches.map(b=>b.name);setBranches(branchNames.filter(name=>name!=='gh-pages'));const hasGhPagesVar=branchNames.includes('gh-pages');setHasGhPages(hasGhPagesVar);// Check if published DAK exists if we have gh-pages\nif(hasGhPagesVar){const baseUrl=getBaseUrl(currentBranch);const dakExists=await checkPublishedDakExists(baseUrl);setHasPublishedDak(dakExists);}else{setHasPublishedDak(false);}}catch(err){console.error('Error fetching FSH files:',err);setError('Failed to load Core Data Dictionary files. Please check repository access.');}finally{setLoading(false);}};fetchFshFiles();},[repository,selectedBranch,user,repo,branch,getBaseUrl,parseDakFshConcepts]);// Fetch file content for modal display\nconst handleViewSource=async file=>{try{var _repository$owner3;setSelectedFile(file);setFileContent('Loading...');setShowModal(true);const currentUser=user||(repository===null||repository===void 0?void 0:(_repository$owner3=repository.owner)===null||_repository$owner3===void 0?void 0:_repository$owner3.login)||(repository===null||repository===void 0?void 0:repository.full_name.split('/')[0]);const currentRepo=repo||(repository===null||repository===void 0?void 0:repository.name);const currentBranch=branch||selectedBranch;const content=await githubService.getFileContent(currentUser,currentRepo,file.path,currentBranch);setFileContent(content);}catch(err){console.error('Error fetching file content:',err);setFileContent('Error loading file content.');}};const closeModal=()=>{setShowModal(false);setSelectedFile(null);setFileContent('');};if((!profile||!repository||!component)&&!user&&!repo){navigate('/');return/*#__PURE__*/_jsx(\"div\",{children:\"Redirecting...\"});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"core-data-dictionary-viewer loading-state\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Loading Core Data Dictionary...\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Fetching FHIR FSH files and repository data...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"core-data-dictionary-viewer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"who-branding\",children:[/*#__PURE__*/_jsx(\"h1\",{onClick:handleHomeNavigation,className:\"clickable-title\",children:\"SGEX Workbench\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"WHO SMART Guidelines Exchange\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"context-info\",children:[/*#__PURE__*/_jsx(\"img\",{src:(profile===null||profile===void 0?void 0:profile.avatar_url)||`https://github.com/${user||(profile===null||profile===void 0?void 0:profile.login)}.png`,alt:\"Profile\",className:\"context-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"context-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"context-repo\",children:repo||(repository===null||repository===void 0?void 0:repository.name)}),/*#__PURE__*/_jsx(\"span\",{className:\"context-component\",children:\"Core Data Dictionary\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"breadcrumb-link\",children:\"Select Profile\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/repositories',{state:{profile}}),className:\"breadcrumb-link\",children:\"Select Repository\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToDashboard,className:\"breadcrumb-link\",children:\"DAK Components\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-current\",children:\"Core Data Dictionary\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"viewer-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"component-intro\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"component-icon\",style:{color:(component===null||component===void 0?void 0:component.color)||'#0078d4'},children:(component===null||component===void 0?void 0:component.icon)||'📊'}),/*#__PURE__*/_jsxs(\"div\",{className:\"intro-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Core Data Dictionary Viewer\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View canonical representations of Component 2 Core Data Dictionary including FHIR CodeSystems, ValueSets, and ConceptMaps stored in FSH format.\"}),(branch||selectedBranch)&&/*#__PURE__*/_jsxs(\"div\",{className:\"branch-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Branch:\"}),\" \",/*#__PURE__*/_jsx(\"code\",{children:branch||selectedBranch})]})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u26A0\\uFE0F Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:\"documentation-section\",children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://smart.who.int/ig-starter-kit/v1.0.0/\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"documentation-link\",children:\"\\uD83D\\uDCDA WHO IG Starter Kit Documentation \\u2197\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"two-column-layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section standard-dictionaries-section left-column\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Standard Dictionaries\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Code Systems\"}),dakFshFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"dak-source-section\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"DAK Source File (FSH)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dak-source-links\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn primary\",onClick:()=>handleViewSource(dakFshFile),title:\"View DAK.fsh source code with syntax highlighting\",children:\"\\uD83D\\uDCC4 View Source\"}),/*#__PURE__*/_jsx(\"a\",{href:dakFshFile.html_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"action-btn secondary\",title:\"View DAK.fsh source on GitHub\",children:\"\\uD83D\\uDD17 GitHub Source \\u2197\"})]})]}),hasGhPages?/*#__PURE__*/_jsxs(\"div\",{className:\"dak-published-section\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Published CodeSystem\"}),checkingPublishedDak?/*#__PURE__*/_jsx(\"p\",{className:\"checking-published\",children:\"Checking published version...\"}):hasPublishedDak?/*#__PURE__*/_jsx(\"div\",{className:\"dictionary-links\",children:/*#__PURE__*/_jsx(\"a\",{href:`${getBaseUrl(branch||selectedBranch)}/CodeSystem-DAK.html`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"dictionary-link primary\",children:\"\\uD83D\\uDCCA View Published Core Data Dictionary (DAK) \\u2197\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"unpublished-dak\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"disabled-link\",children:\"Core Data Dictionary (DAK)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"unpublished-note\",children:\"\\u26A0\\uFE0F The published version is not yet available. The CodeSystem-DAK.html file has not been published to GitHub Pages.\"})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-publication-note\",children:\"Published CodeSystems will be available once GitHub Pages is configured.\"})]}),dakConcepts.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"DAK Concepts (\",dakConcepts.length,\" total)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"dak-table-controls\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search concepts...\",value:dakTableSearch,onChange:e=>setDakTableSearch(e.target.value),className:\"search-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"dak-concepts-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Code\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Display\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Definition\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:dakConcepts.filter(concept=>!dakTableSearch||concept.code.toLowerCase().includes(dakTableSearch.toLowerCase())||concept.display.toLowerCase().includes(dakTableSearch.toLowerCase())||concept.definition.toLowerCase().includes(dakTableSearch.toLowerCase())).map((concept,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"concept-code\",children:concept.code}),/*#__PURE__*/_jsx(\"td\",{className:\"concept-display\",children:concept.display}),/*#__PURE__*/_jsx(\"td\",{className:\"concept-definition\",children:concept.definition})]},index))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subsection\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Value Sets\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"placeholder-links\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"placeholder-link\",children:\"Actors (Coming Soon)\"}),/*#__PURE__*/_jsx(\"span\",{className:\"placeholder-link\",children:\"Workflows (Coming Soon)\"}),/*#__PURE__*/_jsx(\"span\",{className:\"placeholder-link\",children:\"Decision Tables (Coming Soon)\"})]})]})]}),hasGhPages?/*#__PURE__*/_jsxs(\"div\",{className:\"section publications-section right-column\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Publications\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Published FHIR Implementation Guide artifacts generated by the IG Publisher\"}),branches.sort().map(branchName=>/*#__PURE__*/_jsxs(\"div\",{className:\"branch-publication\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Branch: \",/*#__PURE__*/_jsx(\"code\",{children:branchName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"artifact-links\",children:[/*#__PURE__*/_jsx(\"a\",{href:`${getBaseUrl(branchName)}/artifacts.html#terminology-code-systems`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"artifact-link\",children:\"Code Systems \\u2197\"}),/*#__PURE__*/_jsx(\"a\",{href:`${getBaseUrl(branchName)}/artifacts.html#terminology-value-sets`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"artifact-link\",children:\"Value Sets \\u2197\"}),/*#__PURE__*/_jsx(\"a\",{href:`${getBaseUrl(branchName)}/artifacts.html#structures-logical-models`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"artifact-link\",children:\"Logical Models \\u2197\"}),/*#__PURE__*/_jsx(\"a\",{href:`${getBaseUrl(branchName)}/artifacts.html#terminology-concept-maps`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"artifact-link\",children:\"Concept Maps \\u2197\"})]})]},branchName))]}):/*#__PURE__*/_jsxs(\"div\",{className:\"section no-publications-section right-column\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Publications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"no-gh-pages-message\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCCB No published artifacts available\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"This repository does not have a \",/*#__PURE__*/_jsx(\"code\",{children:\"gh-pages\"}),\" branch for publishing FHIR Implementation Guide artifacts.\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section fsh-files-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"FHIR FSH Source Files\"}),/*#__PURE__*/_jsx(\"p\",{children:\"FHIR Shorthand (FSH) files containing CodeSystems, ValueSets, and ConceptMaps\"}),fshFiles.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-files-message\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"No FHIR FSH files found in \",/*#__PURE__*/_jsx(\"code\",{children:\"input/fsh/\"}),\" directory.\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Core Data Dictionary files should be stored in FSH format in this location.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"fsh-files-grid\",children:fshFiles.map(file=>/*#__PURE__*/_jsxs(\"div\",{className:\"fsh-file-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"file-icon\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"file-name\",children:file.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn primary\",onClick:()=>handleViewSource(file),title:\"View source code with syntax highlighting\",children:\"View Source\"}),/*#__PURE__*/_jsx(\"a\",{href:file.html_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"action-btn secondary\",title:\"View source on GitHub\",children:\"GitHub \\u2197\"})]})]},file.path))})]})]})]}),showModal&&selectedFile&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:closeModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:selectedFile.name}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:closeModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"fsh-code\",children:/*#__PURE__*/_jsx(\"code\",{children:fileContent})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"a\",{href:selectedFile.html_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn-secondary\",children:\"View on GitHub \\u2197\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:closeModal,children:\"Close\"})]})]})})]});};export default CoreDataDictionaryViewer;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useLocation","useNavigate","githubService","PageLayout","usePageParams","jsx","_jsx","jsxs","_jsxs","CoreDataDictionaryViewer","pageName","children","CoreDataDictionaryViewerContent","location","navigate","params","profile","repository","component","selectedBranch","state","user","repo","branch","fshFiles","setFshFiles","loading","setLoading","error","setError","selectedFile","setSelectedFile","fileContent","setFileContent","showModal","setShowModal","branches","setBranches","hasGhPages","setHasGhPages","dakFshFile","setDakFshFile","dakConcepts","setDakConcepts","dakTableSearch","setDakTableSearch","hasPublishedDak","setHasPublishedDak","checkingPublishedDak","setCheckingPublishedDak","getBaseUrl","branchName","_repository$owner","owner","login","full_name","split","repoName","name","default_branch","parseDakFshConcepts","content","concepts","lines","i","length","line","trim","conceptMatch","match","code","display","definition","push","handleHomeNavigation","handleBackToDashboard","dashboardPath","fetchFshFiles","_repository$owner2","currentRepository","currentBranch","currentUser","currentRepo","checkPublishedDakExists","baseUrl","dakUrl","response","fetch","method","ok","console","warn","fshDirContents","getDirectoryContents","fshFilesList","filter","file","endsWith","type","map","path","download_url","html_url","err","status","dakFile","dakFsh","find","dakContent","getFileContent","contentErr","allBranches","getBranches","branchNames","b","hasGhPagesVar","includes","dakExists","handleViewSource","_repository$owner3","closeModal","className","onClick","src","avatar_url","alt","style","color","icon","href","target","rel","title","placeholder","value","onChange","e","concept","toLowerCase","index","sort","stopPropagation"],"sources":["/home/runner/work/sgex/sgex/src/components/CoreDataDictionaryViewer.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport githubService from '../services/githubService';\nimport { PageLayout, usePageParams } from './framework';\nimport './CoreDataDictionaryViewer.css';\n\nconst CoreDataDictionaryViewer = () => {\n  return (\n    <PageLayout pageName=\"core-data-dictionary-viewer\">\n      <CoreDataDictionaryViewerContent />\n    </PageLayout>\n  );\n};\n\nconst CoreDataDictionaryViewerContent = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { params } = usePageParams();\n  \n  // Get data from URL params or location state (for backward compatibility)\n  const { profile, repository, component, selectedBranch } = location.state || {};\n  const user = params?.user;\n  const repo = params?.repo;\n  const branch = params?.branch;\n  \n  const [fshFiles, setFshFiles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [fileContent, setFileContent] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [branches, setBranches] = useState([]);\n  const [hasGhPages, setHasGhPages] = useState(false);\n  const [dakFshFile, setDakFshFile] = useState(null);\n  const [dakConcepts, setDakConcepts] = useState([]);\n  const [dakTableSearch, setDakTableSearch] = useState('');\n  const [hasPublishedDak, setHasPublishedDak] = useState(false);\n  const [checkingPublishedDak, setCheckingPublishedDak] = useState(false);\n\n  // Generate base URL for IG Publisher artifacts\n  const getBaseUrl = useCallback((branchName) => {\n    const owner = user || repository?.owner?.login || repository?.full_name.split('/')[0];\n    const repoName = repo || repository?.name;\n    \n    if (branchName === (repository?.default_branch || 'main')) {\n      return `https://${owner}.github.io/${repoName}`;\n    } else {\n      return `https://${owner}.github.io/${repoName}/branches/${branchName}`;\n    }\n  }, [user, repository, repo]);\n\n  // Parse DAK.fsh file to extract concepts\n  const parseDakFshConcepts = useCallback((content) => {\n    const concepts = [];\n    \n    // Split by lines and find concept definitions\n    const lines = content.split('\\n');\n    \n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i].trim();\n      \n      // Look for concept definitions: * #code \"display\" \"definition\"\n      const conceptMatch = line.match(/^\\*\\s*#([^\\s\"]+)\\s*\"([^\"]+)\"\\s*\"([^\"]+)\"/);\n      if (conceptMatch) {\n        const [, code, display, definition] = conceptMatch;\n        concepts.push({\n          code: code.trim(),\n          display: display.trim(),\n          definition: definition.trim()\n        });\n      }\n    }\n    \n    return concepts;\n  }, []);\n\n  const handleHomeNavigation = () => {\n    navigate('/');\n  };\n\n  const handleBackToDashboard = () => {\n    if (user && repo) {\n      // Use URL parameters for navigation\n      const dashboardPath = branch ? \n        `/dashboard/${user}/${repo}/${branch}` : \n        `/dashboard/${user}/${repo}`;\n      navigate(dashboardPath);\n    } else {\n      // Fallback to state-based navigation\n      navigate('/dashboard', { \n        state: { \n          profile, \n          repository, \n          selectedBranch \n        } \n      });\n    }\n  };\n\n  // Fetch FSH files from input/fsh directory\n  useEffect(() => {\n    const fetchFshFiles = async () => {\n      // Support both URL params and state-based data\n      const currentRepository = repository;\n      const currentBranch = branch || selectedBranch;\n      const currentUser = user || repository?.owner?.login || repository?.full_name.split('/')[0];\n      const currentRepo = repo || repository?.name;\n      \n      if ((!currentRepository && (!currentUser || !currentRepo)) || !currentBranch) {\n        setLoading(false);\n        return;\n      }\n\n      // Check if published DAK CodeSystem exists\n      const checkPublishedDakExists = async (baseUrl) => {\n        try {\n          setCheckingPublishedDak(true);\n          const dakUrl = `${baseUrl}/CodeSystem-DAK.html`;\n          \n          // Use fetch to check if the URL exists (HEAD request would be better but may have CORS issues)\n          const response = await fetch(dakUrl, { method: 'HEAD' });\n          return response.ok;\n        } catch (error) {\n          console.warn('Error checking published DAK:', error);\n          return false;\n        } finally {\n          setCheckingPublishedDak(false);\n        }\n      };\n\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Try to fetch the input/fsh directory\n        try {\n          const fshDirContents = await githubService.getDirectoryContents(\n            currentUser, \n            currentRepo, \n            'input/fsh', \n            currentBranch\n          );\n\n          // Filter for .fsh files\n          const fshFilesList = fshDirContents\n            .filter(file => file.name.endsWith('.fsh') && file.type === 'file')\n            .map(file => ({\n              name: file.name,\n              path: file.path,\n              download_url: file.download_url,\n              html_url: file.html_url\n            }));\n\n          setFshFiles(fshFilesList);\n        } catch (err) {\n          if (err.status === 404) {\n            // input/fsh directory doesn't exist\n            setFshFiles([]);\n          } else {\n            throw err;\n          }\n        }\n\n        // Try to fetch the DAK.fsh file specifically from input/fsh/codesystems/\n        try {\n          const dakFile = await githubService.getDirectoryContents(\n            currentUser,\n            currentRepo,\n            'input/fsh/codesystems',\n            currentBranch\n          );\n          \n          // Look for DAK.fsh file\n          const dakFsh = dakFile.find(file => file.name === 'DAK.fsh' && file.type === 'file');\n          if (dakFsh) {\n            setDakFshFile({\n              name: dakFsh.name,\n              path: dakFsh.path,\n              download_url: dakFsh.download_url,\n              html_url: dakFsh.html_url\n            });\n\n            // Fetch and parse DAK.fsh content for table display\n            try {\n              const dakContent = await githubService.getFileContent(\n                currentUser,\n                currentRepo,\n                dakFsh.path,\n                currentBranch\n              );\n              const concepts = parseDakFshConcepts(dakContent);\n              setDakConcepts(concepts);\n            } catch (contentErr) {\n              console.warn('Could not parse DAK.fsh content:', contentErr);\n              setDakConcepts([]);\n            }\n          } else {\n            setDakFshFile(null);\n            setDakConcepts([]);\n          }\n        } catch (err) {\n          if (err.status === 404) {\n            // input/fsh/codesystems directory doesn't exist or no DAK.fsh\n            setDakFshFile(null);\n            setDakConcepts([]);\n          } else {\n            console.warn('Error fetching DAK.fsh:', err);\n            setDakFshFile(null);\n            setDakConcepts([]);\n          }\n        }\n\n        // Fetch branches to check for gh-pages\n        const allBranches = await githubService.getBranches(currentUser, currentRepo);\n        const branchNames = allBranches.map(b => b.name);\n        setBranches(branchNames.filter(name => name !== 'gh-pages'));\n        const hasGhPagesVar = branchNames.includes('gh-pages');\n        setHasGhPages(hasGhPagesVar);\n\n        // Check if published DAK exists if we have gh-pages\n        if (hasGhPagesVar) {\n          const baseUrl = getBaseUrl(currentBranch);\n          const dakExists = await checkPublishedDakExists(baseUrl);\n          setHasPublishedDak(dakExists);\n        } else {\n          setHasPublishedDak(false);\n        }\n\n      } catch (err) {\n        console.error('Error fetching FSH files:', err);\n        setError('Failed to load Core Data Dictionary files. Please check repository access.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchFshFiles();\n  }, [repository, selectedBranch, user, repo, branch, getBaseUrl, parseDakFshConcepts]);\n\n  // Fetch file content for modal display\n  const handleViewSource = async (file) => {\n    try {\n      setSelectedFile(file);\n      setFileContent('Loading...');\n      setShowModal(true);\n\n      const currentUser = user || repository?.owner?.login || repository?.full_name.split('/')[0];\n      const currentRepo = repo || repository?.name;\n      const currentBranch = branch || selectedBranch;\n      \n      const content = await githubService.getFileContent(\n        currentUser,\n        currentRepo,\n        file.path,\n        currentBranch\n      );\n\n      setFileContent(content);\n    } catch (err) {\n      console.error('Error fetching file content:', err);\n      setFileContent('Error loading file content.');\n    }\n  };\n\n  const closeModal = () => {\n    setShowModal(false);\n    setSelectedFile(null);\n    setFileContent('');\n  };\n\n  if ((!profile || !repository || !component) && !user && !repo) {\n    navigate('/');\n    return <div>Redirecting...</div>;\n  }\n\n  if (loading) {\n    return (\n      <div className=\"core-data-dictionary-viewer loading-state\">\n        <div className=\"loading-content\">\n          <h2>Loading Core Data Dictionary...</h2>\n          <p>Fetching FHIR FSH files and repository data...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"core-data-dictionary-viewer\">\n      <div className=\"viewer-header\">\n        <div className=\"who-branding\">\n          <h1 onClick={handleHomeNavigation} className=\"clickable-title\">SGEX Workbench</h1>\n          <p className=\"subtitle\">WHO SMART Guidelines Exchange</p>\n        </div>\n        <div className=\"context-info\">\n          <img \n            src={profile?.avatar_url || `https://github.com/${user || profile?.login}.png`} \n            alt=\"Profile\" \n            className=\"context-avatar\" \n          />\n          <div className=\"context-details\">\n            <span className=\"context-repo\">{repo || repository?.name}</span>\n            <span className=\"context-component\">Core Data Dictionary</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"viewer-content\">\n        <div className=\"breadcrumb\">\n          <button onClick={() => navigate('/')} className=\"breadcrumb-link\">\n            Select Profile\n          </button>\n          <span className=\"breadcrumb-separator\">›</span>\n          <button onClick={() => navigate('/repositories', { state: { profile } })} className=\"breadcrumb-link\">\n            Select Repository\n          </button>\n          <span className=\"breadcrumb-separator\">›</span>\n          <button onClick={handleBackToDashboard} className=\"breadcrumb-link\">\n            DAK Components\n          </button>\n          <span className=\"breadcrumb-separator\">›</span>\n          <span className=\"breadcrumb-current\">Core Data Dictionary</span>\n        </div>\n\n        <div className=\"viewer-main\">\n          <div className=\"component-intro\">\n            <div className=\"component-icon\" style={{ color: component?.color || '#0078d4' }}>\n              {component?.icon || '📊'}\n            </div>\n            <div className=\"intro-content\">\n              <h2>Core Data Dictionary Viewer</h2>\n              <p>\n                View canonical representations of Component 2 Core Data Dictionary including FHIR CodeSystems, \n                ValueSets, and ConceptMaps stored in FSH format.\n              </p>\n              {(branch || selectedBranch) && (\n                <div className=\"branch-info\">\n                  <strong>Branch:</strong> <code>{branch || selectedBranch}</code>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"error-message\">\n              <h3>⚠️ Error</h3>\n              <p>{error}</p>\n            </div>\n          )}\n\n          {/* Documentation Link */}\n          <div className=\"documentation-section\">\n            <p>\n              <a \n                href=\"https://smart.who.int/ig-starter-kit/v1.0.0/\" \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"documentation-link\"\n              >\n                📚 WHO IG Starter Kit Documentation ↗\n              </a>\n            </p>\n          </div>\n\n          {/* Main content layout with two columns */}\n          <div className=\"two-column-layout\">\n            {/* Standard Dictionaries Section - Left Column */}\n            <div className=\"section standard-dictionaries-section left-column\">\n              <h3>Standard Dictionaries</h3>\n              \n              <div className=\"subsection\">\n                <h4>Code Systems</h4>\n                \n                {/* DAK Source File Links */}\n                {dakFshFile && (\n                  <div className=\"dak-source-section\">\n                    <h5>DAK Source File (FSH)</h5>\n                    <div className=\"dak-source-links\">\n                      <button \n                        className=\"action-btn primary\"\n                        onClick={() => handleViewSource(dakFshFile)}\n                        title=\"View DAK.fsh source code with syntax highlighting\"\n                      >\n                        📄 View Source\n                      </button>\n                      <a \n                        href={dakFshFile.html_url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"action-btn secondary\"\n                        title=\"View DAK.fsh source on GitHub\"\n                      >\n                        🔗 GitHub Source ↗\n                      </a>\n                    </div>\n                  </div>\n                )}\n\n                {/* Published DAK CodeSystem */}\n                {hasGhPages ? (\n                  <div className=\"dak-published-section\">\n                    <h5>Published CodeSystem</h5>\n                    {checkingPublishedDak ? (\n                      <p className=\"checking-published\">Checking published version...</p>\n                    ) : hasPublishedDak ? (\n                      <div className=\"dictionary-links\">\n                        <a \n                          href={`${getBaseUrl(branch || selectedBranch)}/CodeSystem-DAK.html`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"dictionary-link primary\"\n                        >\n                          📊 View Published Core Data Dictionary (DAK) ↗\n                        </a>\n                      </div>\n                    ) : (\n                      <div className=\"unpublished-dak\">\n                        <span className=\"disabled-link\">Core Data Dictionary (DAK)</span>\n                        <p className=\"unpublished-note\">\n                          ⚠️ The published version is not yet available. The CodeSystem-DAK.html file has not been published to GitHub Pages.\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <p className=\"no-publication-note\">\n                    Published CodeSystems will be available once GitHub Pages is configured.\n                  </p>\n                )}\n              </div>\n\n              {/* DAK Concepts Table */}\n              {dakConcepts.length > 0 && (\n                <div className=\"subsection\">\n                  <h4>DAK Concepts ({dakConcepts.length} total)</h4>\n                  <div className=\"dak-table-controls\">\n                    <input\n                      type=\"text\"\n                      placeholder=\"Search concepts...\"\n                      value={dakTableSearch}\n                      onChange={(e) => setDakTableSearch(e.target.value)}\n                      className=\"search-input\"\n                    />\n                  </div>\n                  <div className=\"dak-concepts-table\">\n                    <table>\n                      <thead>\n                        <tr>\n                          <th>Code</th>\n                          <th>Display</th>\n                          <th>Definition</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {dakConcepts\n                          .filter(concept => \n                            !dakTableSearch || \n                            concept.code.toLowerCase().includes(dakTableSearch.toLowerCase()) ||\n                            concept.display.toLowerCase().includes(dakTableSearch.toLowerCase()) ||\n                            concept.definition.toLowerCase().includes(dakTableSearch.toLowerCase())\n                          )\n                          .map((concept, index) => (\n                            <tr key={index}>\n                              <td className=\"concept-code\">{concept.code}</td>\n                              <td className=\"concept-display\">{concept.display}</td>\n                              <td className=\"concept-definition\">{concept.definition}</td>\n                            </tr>\n                          ))\n                        }\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"subsection\">\n                <h4>Value Sets</h4>\n                <div className=\"placeholder-links\">\n                  <span className=\"placeholder-link\">Actors (Coming Soon)</span>\n                  <span className=\"placeholder-link\">Workflows (Coming Soon)</span>\n                  <span className=\"placeholder-link\">Decision Tables (Coming Soon)</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Publications Section - Right Column */}\n            {hasGhPages ? (\n              <div className=\"section publications-section right-column\">\n                <h3>Publications</h3>\n                <p>Published FHIR Implementation Guide artifacts generated by the IG Publisher</p>\n                \n                {branches.sort().map((branchName) => (\n                  <div key={branchName} className=\"branch-publication\">\n                    <h4>Branch: <code>{branchName}</code></h4>\n                    <div className=\"artifact-links\">\n                      <a \n                        href={`${getBaseUrl(branchName)}/artifacts.html#terminology-code-systems`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"artifact-link\"\n                      >\n                        Code Systems ↗\n                      </a>\n                      <a \n                        href={`${getBaseUrl(branchName)}/artifacts.html#terminology-value-sets`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"artifact-link\"\n                      >\n                        Value Sets ↗\n                      </a>\n                      <a \n                        href={`${getBaseUrl(branchName)}/artifacts.html#structures-logical-models`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"artifact-link\"\n                      >\n                        Logical Models ↗\n                      </a>\n                      <a \n                        href={`${getBaseUrl(branchName)}/artifacts.html#terminology-concept-maps`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"artifact-link\"\n                      >\n                        Concept Maps ↗\n                      </a>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"section no-publications-section right-column\">\n                <h3>Publications</h3>\n                <div className=\"no-gh-pages-message\">\n                  <p>📋 No published artifacts available</p>\n                  <p>This repository does not have a <code>gh-pages</code> branch for publishing FHIR Implementation Guide artifacts.</p>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* FHIR FSH Files Section */}\n          <div className=\"section fsh-files-section\">\n            <h3>FHIR FSH Source Files</h3>\n            <p>FHIR Shorthand (FSH) files containing CodeSystems, ValueSets, and ConceptMaps</p>\n            \n            {fshFiles.length === 0 ? (\n              <div className=\"no-files-message\">\n                <p>No FHIR FSH files found in <code>input/fsh/</code> directory.</p>\n                <p>Core Data Dictionary files should be stored in FSH format in this location.</p>\n              </div>\n            ) : (\n              <div className=\"fsh-files-grid\">\n                {fshFiles.map((file) => (\n                  <div key={file.path} className=\"fsh-file-card\">\n                    <div className=\"file-header\">\n                      <div className=\"file-icon\">📄</div>\n                      <div className=\"file-name\">{file.name}</div>\n                    </div>\n                    <div className=\"file-actions\">\n                      <button \n                        className=\"action-btn primary\"\n                        onClick={() => handleViewSource(file)}\n                        title=\"View source code with syntax highlighting\"\n                      >\n                        View Source\n                      </button>\n                      <a \n                        href={file.html_url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"action-btn secondary\"\n                        title=\"View source on GitHub\"\n                      >\n                        GitHub ↗\n                      </a>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Source Code Modal */}\n      {showModal && selectedFile && (\n        <div className=\"modal-overlay\" onClick={closeModal}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>{selectedFile.name}</h3>\n              <button className=\"modal-close\" onClick={closeModal}>×</button>\n            </div>\n            <div className=\"modal-body\">\n              <pre className=\"fsh-code\">\n                <code>{fileContent}</code>\n              </pre>\n            </div>\n            <div className=\"modal-footer\">\n              <a \n                href={selectedFile.html_url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"btn-secondary\"\n              >\n                View on GitHub ↗\n              </a>\n              <button className=\"btn-primary\" onClick={closeModal}>\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      </div>\n  );\n};\n\nexport default CoreDataDictionaryViewer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}