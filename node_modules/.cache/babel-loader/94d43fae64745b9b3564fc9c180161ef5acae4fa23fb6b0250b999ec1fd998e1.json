{"ast":null,"code":"import inherits from 'inherits-browser';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { getBusinessObject, is } from '../../../util/ModelUtil';\nimport { isLabel } from '../../../util/LabelUtil';\nimport { getBBox } from 'diagram-js/lib/util/Elements';\nimport { assign, find } from 'min-dash';\nimport { asTRBL } from 'diagram-js/lib/layout/LayoutUtil';\nimport { isConnection } from 'diagram-js/lib/util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\nvar HORIZONTAL_PARTICIPANT_PADDING = 20,\n  VERTICAL_PARTICIPANT_PADDING = 20;\nexport var PARTICIPANT_BORDER_WIDTH = 30;\nvar HIGH_PRIORITY = 2000;\n\n/**\n * BPMN-specific behavior for creating participants.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function CreateParticipantBehavior(canvas, eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n\n  // fit participant\n  eventBus.on(['create.start', 'shape.move.start'], HIGH_PRIORITY, function (event) {\n    var context = event.context,\n      shape = context.shape,\n      rootElement = canvas.getRootElement();\n    if (!is(shape, 'bpmn:Participant') || !is(rootElement, 'bpmn:Process') || !rootElement.children.length) {\n      return;\n    }\n\n    // ignore connections, groups and labels\n    var children = rootElement.children.filter(function (element) {\n      return !is(element, 'bpmn:Group') && !isLabel(element) && !isConnection(element);\n    });\n\n    // ensure for available children to calculate bounds\n    if (!children.length) {\n      return;\n    }\n    var childrenBBox = getBBox(children);\n    var participantBounds = getParticipantBounds(shape, childrenBBox);\n\n    // assign width and height\n    assign(shape, participantBounds);\n\n    // assign create constraints\n    context.createConstraints = getParticipantCreateConstraints(shape, childrenBBox);\n  });\n\n  // force hovering process when creating first participant\n  eventBus.on('create.start', HIGH_PRIORITY, function (event) {\n    var context = event.context,\n      shape = context.shape,\n      rootElement = canvas.getRootElement(),\n      rootElementGfx = canvas.getGraphics(rootElement);\n    function ensureHoveringProcess(event) {\n      event.element = rootElement;\n      event.gfx = rootElementGfx;\n    }\n    if (is(shape, 'bpmn:Participant') && is(rootElement, 'bpmn:Process')) {\n      eventBus.on('element.hover', HIGH_PRIORITY, ensureHoveringProcess);\n      eventBus.once('create.cleanup', function () {\n        eventBus.off('element.hover', ensureHoveringProcess);\n      });\n    }\n  });\n\n  // turn process into collaboration when creating first participant\n  function getOrCreateCollaboration() {\n    var rootElement = canvas.getRootElement();\n    if (is(rootElement, 'bpmn:Collaboration')) {\n      return rootElement;\n    }\n    return modeling.makeCollaboration();\n  }\n\n  // when creating mutliple elements through `elements.create` parent must be set to collaboration\n  // and passed to `shape.create` as hint\n  this.preExecute('elements.create', HIGH_PRIORITY, function (context) {\n    var elements = context.elements,\n      parent = context.parent,\n      participant = findParticipant(elements),\n      hints;\n    if (participant && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n      hints = context.hints = context.hints || {};\n      hints.participant = participant;\n      hints.process = parent;\n      hints.processRef = getBusinessObject(participant).get('processRef');\n    }\n  }, true);\n\n  // when creating single shape through `shape.create` parent must be set to collaboration\n  // unless it was already set through `elements.create`\n  this.preExecute('shape.create', function (context) {\n    var parent = context.parent,\n      shape = context.shape;\n    if (is(shape, 'bpmn:Participant') && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n      context.process = parent;\n      context.processRef = getBusinessObject(shape).get('processRef');\n    }\n  }, true);\n\n  // #execute necessary because #preExecute not called on CommandStack#redo\n  this.execute('shape.create', function (context) {\n    var hints = context.hints || {},\n      process = context.process || hints.process,\n      shape = context.shape,\n      participant = hints.participant;\n\n    // both shape.create and elements.create must be handled\n    if (process && (!participant || shape === participant)) {\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', getBusinessObject(process));\n    }\n  }, true);\n  this.revert('shape.create', function (context) {\n    var hints = context.hints || {},\n      process = context.process || hints.process,\n      processRef = context.processRef || hints.processRef,\n      shape = context.shape,\n      participant = hints.participant;\n\n    // both shape.create and elements.create must be handled\n    if (process && (!participant || shape === participant)) {\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', processRef);\n    }\n  }, true);\n  this.postExecute('shape.create', function (context) {\n    var hints = context.hints || {},\n      process = context.process || context.hints.process,\n      shape = context.shape,\n      participant = hints.participant;\n    if (process) {\n      var children = process.children.slice();\n\n      // both shape.create and elements.create must be handled\n      if (!participant) {\n        modeling.moveElements(children, {\n          x: 0,\n          y: 0\n        }, shape);\n      } else if (shape === participant) {\n        modeling.moveElements(children, {\n          x: 0,\n          y: 0\n        }, participant);\n      }\n    }\n  }, true);\n}\nCreateParticipantBehavior.$inject = ['canvas', 'eventBus', 'modeling'];\ninherits(CreateParticipantBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction getParticipantBounds(shape, childrenBBox) {\n  childrenBBox = {\n    width: childrenBBox.width + HORIZONTAL_PARTICIPANT_PADDING * 2 + PARTICIPANT_BORDER_WIDTH,\n    height: childrenBBox.height + VERTICAL_PARTICIPANT_PADDING * 2\n  };\n  var width = Math.max(shape.width, childrenBBox.width),\n    height = Math.max(shape.height, childrenBBox.height);\n  return {\n    x: -width / 2,\n    y: -height / 2,\n    width: width,\n    height: height\n  };\n}\nfunction getParticipantCreateConstraints(shape, childrenBBox) {\n  childrenBBox = asTRBL(childrenBBox);\n  return {\n    bottom: childrenBBox.top + shape.height / 2 - VERTICAL_PARTICIPANT_PADDING,\n    left: childrenBBox.right - shape.width / 2 + HORIZONTAL_PARTICIPANT_PADDING,\n    top: childrenBBox.bottom - shape.height / 2 + VERTICAL_PARTICIPANT_PADDING,\n    right: childrenBBox.left + shape.width / 2 - HORIZONTAL_PARTICIPANT_PADDING - PARTICIPANT_BORDER_WIDTH\n  };\n}\nfunction findParticipant(elements) {\n  return find(elements, function (element) {\n    return is(element, 'bpmn:Participant');\n  });\n}","map":{"version":3,"names":["inherits","CommandInterceptor","getBusinessObject","is","isLabel","getBBox","assign","find","asTRBL","isConnection","HORIZONTAL_PARTICIPANT_PADDING","VERTICAL_PARTICIPANT_PADDING","PARTICIPANT_BORDER_WIDTH","HIGH_PRIORITY","CreateParticipantBehavior","canvas","eventBus","modeling","call","on","event","context","shape","rootElement","getRootElement","children","length","filter","element","childrenBBox","participantBounds","getParticipantBounds","createConstraints","getParticipantCreateConstraints","rootElementGfx","getGraphics","ensureHoveringProcess","gfx","once","off","getOrCreateCollaboration","makeCollaboration","preExecute","elements","parent","participant","findParticipant","hints","process","processRef","get","execute","set","revert","postExecute","slice","moveElements","x","y","$inject","width","height","Math","max","bottom","top","left","right"],"sources":["/home/runner/work/sgex/sgex/node_modules/bpmn-js/lib/features/modeling/behavior/CreateParticipantBehavior.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getBusinessObject, is } from '../../../util/ModelUtil';\n\nimport { isLabel } from '../../../util/LabelUtil';\n\nimport { getBBox } from 'diagram-js/lib/util/Elements';\n\nimport {\n  assign,\n  find\n} from 'min-dash';\n\nimport { asTRBL } from 'diagram-js/lib/layout/LayoutUtil';\n\nimport { isConnection } from 'diagram-js/lib/util/ModelUtil';\n\n/**\n * @typedef {import('diagram-js/lib/core/Canvas').default} Canvas\n * @typedef {import('diagram-js/lib/core/EventBus').default} EventBus\n * @typedef {import('../Modeling').default} Modeling\n */\n\nvar HORIZONTAL_PARTICIPANT_PADDING = 20,\n    VERTICAL_PARTICIPANT_PADDING = 20;\n\nexport var PARTICIPANT_BORDER_WIDTH = 30;\n\nvar HIGH_PRIORITY = 2000;\n\n\n/**\n * BPMN-specific behavior for creating participants.\n *\n * @param {Canvas} canvas\n * @param {EventBus} eventBus\n * @param {Modeling} modeling\n */\nexport default function CreateParticipantBehavior(canvas, eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n\n  // fit participant\n  eventBus.on([\n    'create.start',\n    'shape.move.start'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement();\n\n    if (!is(shape, 'bpmn:Participant') ||\n      !is(rootElement, 'bpmn:Process') ||\n      !rootElement.children.length) {\n      return;\n    }\n\n    // ignore connections, groups and labels\n    var children = rootElement.children.filter(function(element) {\n      return !is(element, 'bpmn:Group') &&\n        !isLabel(element) &&\n        !isConnection(element);\n    });\n\n    // ensure for available children to calculate bounds\n    if (!children.length) {\n      return;\n    }\n\n    var childrenBBox = getBBox(children);\n\n    var participantBounds = getParticipantBounds(shape, childrenBBox);\n\n    // assign width and height\n    assign(shape, participantBounds);\n\n    // assign create constraints\n    context.createConstraints = getParticipantCreateConstraints(shape, childrenBBox);\n  });\n\n  // force hovering process when creating first participant\n  eventBus.on('create.start', HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement(),\n        rootElementGfx = canvas.getGraphics(rootElement);\n\n    function ensureHoveringProcess(event) {\n      event.element = rootElement;\n      event.gfx = rootElementGfx;\n    }\n\n    if (is(shape, 'bpmn:Participant') && is(rootElement, 'bpmn:Process')) {\n      eventBus.on('element.hover', HIGH_PRIORITY, ensureHoveringProcess);\n\n      eventBus.once('create.cleanup', function() {\n        eventBus.off('element.hover', ensureHoveringProcess);\n      });\n    }\n  });\n\n  // turn process into collaboration when creating first participant\n  function getOrCreateCollaboration() {\n    var rootElement = canvas.getRootElement();\n\n    if (is(rootElement, 'bpmn:Collaboration')) {\n      return rootElement;\n    }\n\n    return modeling.makeCollaboration();\n  }\n\n  // when creating mutliple elements through `elements.create` parent must be set to collaboration\n  // and passed to `shape.create` as hint\n  this.preExecute('elements.create', HIGH_PRIORITY, function(context) {\n    var elements = context.elements,\n        parent = context.parent,\n        participant = findParticipant(elements),\n        hints;\n\n    if (participant && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n\n      hints = context.hints = context.hints || {};\n\n      hints.participant = participant;\n      hints.process = parent;\n      hints.processRef = getBusinessObject(participant).get('processRef');\n    }\n  }, true);\n\n  // when creating single shape through `shape.create` parent must be set to collaboration\n  // unless it was already set through `elements.create`\n  this.preExecute('shape.create', function(context) {\n    var parent = context.parent,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Participant') && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n\n      context.process = parent;\n      context.processRef = getBusinessObject(shape).get('processRef');\n    }\n  }, true);\n\n  // #execute necessary because #preExecute not called on CommandStack#redo\n  this.execute('shape.create', function(context) {\n    var hints = context.hints || {},\n        process = context.process || hints.process,\n        shape = context.shape,\n        participant = hints.participant;\n\n    // both shape.create and elements.create must be handled\n    if (process && (!participant || shape === participant)) {\n\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', getBusinessObject(process));\n    }\n  }, true);\n\n  this.revert('shape.create', function(context) {\n    var hints = context.hints || {},\n        process = context.process || hints.process,\n        processRef = context.processRef || hints.processRef,\n        shape = context.shape,\n        participant = hints.participant;\n\n    // both shape.create and elements.create must be handled\n    if (process && (!participant || shape === participant)) {\n\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', processRef);\n    }\n  }, true);\n\n  this.postExecute('shape.create', function(context) {\n    var hints = context.hints || {},\n        process = context.process || context.hints.process,\n        shape = context.shape,\n        participant = hints.participant;\n\n    if (process) {\n      var children = process.children.slice();\n\n      // both shape.create and elements.create must be handled\n      if (!participant) {\n        modeling.moveElements(children, { x: 0, y: 0 }, shape);\n      } else if (shape === participant) {\n        modeling.moveElements(children, { x: 0, y: 0 }, participant);\n      }\n    }\n  }, true);\n}\n\nCreateParticipantBehavior.$inject = [\n  'canvas',\n  'eventBus',\n  'modeling'\n];\n\ninherits(CreateParticipantBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction getParticipantBounds(shape, childrenBBox) {\n  childrenBBox = {\n    width: childrenBBox.width + HORIZONTAL_PARTICIPANT_PADDING * 2 + PARTICIPANT_BORDER_WIDTH,\n    height: childrenBBox.height + VERTICAL_PARTICIPANT_PADDING * 2\n  };\n\n  var width = Math.max(shape.width, childrenBBox.width),\n      height = Math.max(shape.height, childrenBBox.height);\n\n  return {\n    x: -width / 2,\n    y: -height / 2,\n    width: width,\n    height: height\n  };\n}\n\nfunction getParticipantCreateConstraints(shape, childrenBBox) {\n  childrenBBox = asTRBL(childrenBBox);\n\n  return {\n    bottom: childrenBBox.top + shape.height / 2 - VERTICAL_PARTICIPANT_PADDING,\n    left: childrenBBox.right - shape.width / 2 + HORIZONTAL_PARTICIPANT_PADDING,\n    top: childrenBBox.bottom - shape.height / 2 + VERTICAL_PARTICIPANT_PADDING,\n    right: childrenBBox.left + shape.width / 2 - HORIZONTAL_PARTICIPANT_PADDING - PARTICIPANT_BORDER_WIDTH\n  };\n}\n\nfunction findParticipant(elements) {\n  return find(elements, function(element) {\n    return is(element, 'bpmn:Participant');\n  });\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}