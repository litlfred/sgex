{"ast":null,"code":"import React,{useState,useCallback,useMemo,useEffect}from'react';import{Prism as SyntaxHighlighter}from'react-syntax-highlighter';import{oneLight}from'react-syntax-highlighter/dist/esm/styles/prism';import githubService from'../services/githubService';import sushiWasmService from'../services/sushiWasmService';import{WasmLoader,performanceMonitor}from'../utils/wasmLoader';import'./SushiRunner.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SushiRunner=_ref=>{var _repository$owner;let{repository,selectedBranch,profile,stagingFiles=[]}=_ref;const[isExpanded,setIsExpanded]=useState(false);const[isRunning,setIsRunning]=useState(false);const[showModal,setShowModal]=useState(false);const[logs,setLogs]=useState([]);const[generatedFiles,setGeneratedFiles]=useState([]);const[showFileViewer,setShowFileViewer]=useState(false);const[selectedFile,setSelectedFile]=useState(null);const[activeTab,setActiveTab]=useState('logs');const[logLevelToggles,setLogLevelToggles]=useState({info:true,success:true,warning:true,error:true});const[searchText,setSearchText]=useState('');const[sushiConfig,setSushiConfig]=useState(null);const[fshFiles,setFshFiles]=useState([]);const[includeStagingFiles,setIncludeStagingFiles]=useState(false);const[error,setError]=useState(null);const[executionMode,setExecutionMode]=useState('auto');// 'auto', 'wasm', 'javascript'\nconst[wasmSupported,setWasmSupported]=useState(false);const[wasmInitialized,setWasmInitialized]=useState(false);const owner=((_repository$owner=repository.owner)===null||_repository$owner===void 0?void 0:_repository$owner.login)||repository.full_name.split('/')[0];const repoName=repository.name;const addLog=useCallback(function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';setLogs(prev=>[...prev,{id:Date.now()+Math.random(),message,type,timestamp:new Date().toISOString()}]);},[]);// Check WebAssembly support on component mount\nuseEffect(()=>{const checkWasmSupport=async()=>{const supported=WasmLoader.isSupported();setWasmSupported(supported);if(supported){addLog('ğŸš€ WebAssembly support detected','success');// Initialize WASM service\ntry{await sushiWasmService.initialize();setWasmInitialized(true);addLog('âœ… SUSHI WebAssembly service initialized','success');}catch(err){addLog(`âš ï¸ WASM initialization failed, falling back to JavaScript: ${err.message}`,'warning');}}else{addLog('âš ï¸ WebAssembly not supported, using JavaScript fallback','warning');}};checkWasmSupport();},[addLog]);const fetchRepositoryFiles=async()=>{try{addLog('ğŸ” Fetching sushi-config.yaml...','info');let config=null;try{const configContent=await githubService.getFileContent(owner,repoName,'sushi-config.yaml',selectedBranch);config=configContent;setSushiConfig(config);addLog('âœ… Found sushi-config.yaml','success');}catch(err){addLog('âš ï¸ sushi-config.yaml not found in repository','warning');}addLog('ğŸ” Scanning input/fsh directory recursively...','info');const fshFiles=[];try{// Recursively scan for FSH files\nconst scanDirectory=async function(dirPath){let depth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const maxDepth=5;// Prevent infinite recursion\nif(depth>maxDepth){addLog(`âš ï¸ Maximum directory depth reached for ${dirPath}`,'warning');return;}try{const contents=await githubService.getDirectoryContents(owner,repoName,dirPath,selectedBranch);for(const item of contents){if(item.type==='file'&&item.name.endsWith('.fsh')){try{const fileContent=await githubService.getFileContent(owner,repoName,item.path,selectedBranch);fshFiles.push({name:item.name,path:item.path,content:fileContent});addLog(`ğŸ“„ Found ${item.path}`,'success');}catch(err){addLog(`âŒ Failed to fetch ${item.path}: ${err.message}`,'error');}}else if(item.type==='dir'){// Recursively scan subdirectories\naddLog(`ğŸ“ Scanning subdirectory: ${item.path}`,'info');await scanDirectory(item.path,depth+1);}}}catch(err){addLog(`âš ï¸ Could not scan directory ${dirPath}: ${err.message}`,'warning');}};await scanDirectory('input/fsh');}catch(err){addLog('âš ï¸ input/fsh directory not found or empty','warning');}setFshFiles(fshFiles);addLog(`ğŸ“Š Found ${fshFiles.length} FSH files in repository`,'info');return{config,fshFiles};}catch(err){addLog(`âŒ Error fetching repository files: ${err.message}`,'error');throw err;}};const integrateStagingFiles=repoFshFiles=>{// Start with repository files\nconst integratedFiles=[...repoFshFiles];// Override/add staging files\nstagingFiles.forEach(stagingFile=>{if(stagingFile.path&&stagingFile.path.endsWith('.fsh')){const fileName=stagingFile.path.split('/').pop();const existingIndex=integratedFiles.findIndex(f=>f.name===fileName);if(existingIndex>=0){// Override existing file\nintegratedFiles[existingIndex]={...integratedFiles[existingIndex],content:stagingFile.content,isFromStaging:true};addLog(`ğŸ”„ Overriding ${fileName} with staging version`,'info');}else{// Add new file from staging\nintegratedFiles.push({name:fileName,path:stagingFile.path,content:stagingFile.content,isFromStaging:true});addLog(`â• Adding ${fileName} from staging`,'info');}}});return integratedFiles;};const runSushiInBrowser=async(config,files)=>{try{// Determine execution mode\nconst useWasm=executionMode==='wasm'||executionMode==='auto'&&wasmSupported&&wasmInitialized;const mode=useWasm?'WebAssembly':'JavaScript';addLog(`ğŸš€ Starting FHIR Shorthand compilation using ${mode}...`,'info');// Start performance monitoring\nperformanceMonitor.startTiming('sushi-compilation',useWasm?'wasm':'js');let result;if(useWasm){addLog('ğŸ”§ Using WebAssembly SUSHI engine...','info');result=await runSushiWithWasm(config,files);}else{addLog('âš™ï¸ Using JavaScript fallback engine...','info');result=await runSushiWithJavaScript(config,files);}// End performance monitoring\nconst duration=performanceMonitor.endTiming('sushi-compilation',useWasm?'wasm':'js');addLog(`â±ï¸ Compilation completed in ${duration.toFixed(2)}ms using ${mode}`,'success');return result;}catch(err){addLog(`âŒ Compilation failed: ${err.message}`,'error');// If WASM failed, try JavaScript fallback\nif(executionMode==='auto'&&wasmSupported){addLog('ğŸ”„ Attempting JavaScript fallback...','info');try{return await runSushiWithJavaScript(config,files);}catch(fallbackErr){addLog(`âŒ JavaScript fallback also failed: ${fallbackErr.message}`,'error');throw fallbackErr;}}throw err;}};const runSushiWithWasm=async(config,files)=>{try{addLog('ğŸ“¦ Preparing WebAssembly execution environment...','info');// Use the WASM service\nconst result=await sushiWasmService.runSushi(config,files);if(result.success){addLog(`âœ… WebAssembly compilation successful`,'success');addLog(`ğŸ“Š Generated ${result.files.length} FHIR resources`,'success');// Convert WASM output to the expected format\nconst generatedResources=result.files.map(file=>({type:file.resourceType,filename:file.path,content:file.content,id:file.path.split('.')[0],resourceType:file.resourceType}));setGeneratedFiles(generatedResources);// Log any warnings\nresult.warnings.forEach(warning=>{addLog(`âš ï¸ ${warning}`,'warning');});return{success:true,resourceCount:result.files.length,warnings:result.warnings,errors:result.errors,generatedFiles:generatedResources};}else{// Log errors from WASM compilation\nresult.errors.forEach(error=>{addLog(`âŒ ${error}`,'error');});throw new Error(`WASM compilation failed: ${result.errors.join(', ')}`);}}catch(err){addLog(`ğŸ’¥ WebAssembly execution failed: ${err.message}`,'error');throw err;}};const runSushiWithJavaScript=async(config,files)=>{try{addLog('ğŸš€ Starting FHIR Shorthand compilation...','info');addLog('â„¹ï¸ Using JavaScript FSH processor (Enhanced with WASM-compatible interface)','info');addLog('ğŸ“¦ Loading YAML processing library...','info');const yaml=await import('js-yaml');addLog('âœ… Libraries loaded successfully','success');addLog('ğŸ“ Processing configuration...','info');// Prepare configuration\nlet configObj=null;if(config){try{configObj=typeof config==='string'?yaml.default.load(config):config;addLog(`ğŸ“‹ Package: ${configObj.name||'Unknown'}`,'success');addLog(`ğŸ“‹ Version: ${configObj.version||'Unknown'}`,'success');addLog(`ğŸ“‹ FHIR Version: ${configObj.fhirVersion||'Unknown'}`,'success');}catch(err){addLog(`âš ï¸ Could not parse config: ${err.message}`,'warning');}}else{// Create a default configuration\nconfigObj={name:'browser-generated-ig',version:'1.0.0',fhirVersion:'4.0.1',id:'browser.generated.ig',canonical:'http://example.org/fhir/ig/browser-generated',status:'draft'};addLog('ğŸ“‹ Using default configuration','info');}addLog(`ğŸ” Analyzing ${files.length} FSH files...`,'info');const generatedResources=[];// Enhanced FSH parsing and analysis with realistic FHIR generation\nfor(const file of files){addLog(`ğŸ“„ Processing ${file.name}...`,'info');const content=file.content;// Parse FSH content to extract definitions\nconst extractFSHDefinitions=content=>{const definitions={profiles:[],instances:[],valueSets:[],codeSystems:[],extensions:[]};const lines=content.split('\\n');let currentDefinition=null;let currentType=null;for(let i=0;i<lines.length;i++){const line=lines[i].trim();// Detect definition types\nif(line.startsWith('Profile:')){currentType='profiles';currentDefinition={name:line.substring(8).trim(),type:'Profile',parent:null,id:null,title:null,description:null,rules:[]};}else if(line.startsWith('Instance:')){currentType='instances';currentDefinition={name:line.substring(9).trim(),type:'Instance',instanceOf:null,usage:null,title:null,description:null,rules:[]};}else if(line.startsWith('ValueSet:')){currentType='valueSets';currentDefinition={name:line.substring(9).trim(),type:'ValueSet',id:null,title:null,description:null,rules:[]};}else if(line.startsWith('CodeSystem:')){currentType='codeSystems';currentDefinition={name:line.substring(11).trim(),type:'CodeSystem',id:null,title:null,description:null,rules:[]};}else if(line.startsWith('Extension:')){currentType='extensions';currentDefinition={name:line.substring(10).trim(),type:'Extension',id:null,title:null,description:null,rules:[]};}// Parse properties\nif(currentDefinition){if(line.startsWith('Parent:')){currentDefinition.parent=line.substring(7).trim();}else if(line.startsWith('InstanceOf:')){currentDefinition.instanceOf=line.substring(11).trim();}else if(line.startsWith('Usage:')){currentDefinition.usage=line.substring(6).trim();}else if(line.startsWith('Id:')){currentDefinition.id=line.substring(3).trim();}else if(line.startsWith('Title:')){currentDefinition.title=line.substring(6).trim().replace(/['\"]/g,'');}else if(line.startsWith('Description:')){currentDefinition.description=line.substring(12).trim().replace(/['\"]/g,'');}else if(line.startsWith('* ')){currentDefinition.rules.push(line.substring(2).trim());}// If we hit a new definition or end of content, save current one\nif(line.includes(':')&&!line.startsWith('* ')&&!line.startsWith('Parent:')&&!line.startsWith('InstanceOf:')&&!line.startsWith('Usage:')&&!line.startsWith('Id:')&&!line.startsWith('Title:')&&!line.startsWith('Description:')||i===lines.length-1){if(currentDefinition&&currentType&&currentDefinition.name){definitions[currentType].push(currentDefinition);}currentDefinition=null;currentType=null;i--;// Re-process this line for the new definition\n}}}return definitions;};const definitions=extractFSHDefinitions(content);// Generate realistic FHIR resources from FSH definitions\ndefinitions.profiles.forEach(profile=>{const profileId=profile.id||profile.name.toLowerCase().replace(/\\s+/g,'-');const structureDefinition={resourceType:'StructureDefinition',id:profileId,url:`${configObj.canonical}/StructureDefinition/${profileId}`,name:profile.name,title:profile.title||profile.name,status:'draft',fhirVersion:configObj.fhirVersion||'4.0.1',kind:'resource',abstract:false,type:profile.parent==='Patient'?'Patient':profile.parent==='Observation'?'Observation':profile.parent||'DomainResource',baseDefinition:`http://hl7.org/fhir/StructureDefinition/${profile.parent||'DomainResource'}`,derivation:'constraint',description:profile.description||`Profile for ${profile.name}`};if(profile.rules.length>0){structureDefinition.differential={element:profile.rules.map((rule,index)=>({id:`${structureDefinition.type}.${rule.split(' ')[0]}`,path:`${structureDefinition.type}.${rule.split(' ')[0]}`,short:`Rule: ${rule}`}))};}generatedResources.push({type:'StructureDefinition',filename:`StructureDefinition-${profileId}.json`,content:JSON.stringify(structureDefinition,null,2),id:profileId,name:profile.name,title:structureDefinition.title,url:structureDefinition.url});addLog(`  ğŸ“Š Generated StructureDefinition: ${profile.name}`,'success');});definitions.instances.forEach(instance=>{const instanceId=instance.name.toLowerCase().replace(/\\s+/g,'-');const resourceType=instance.instanceOf==='Patient'?'Patient':instance.instanceOf==='Observation'?'Observation':'Patient';// Default fallback\nconst fhirInstance={resourceType:resourceType,id:instanceId,meta:{profile:instance.instanceOf?[`${configObj.canonical}/StructureDefinition/${instance.instanceOf}`]:undefined}};// Add basic properties based on resource type\nif(resourceType==='Patient'){fhirInstance.name=[{family:instance.name.split(' ').pop(),given:instance.name.split(' ').slice(0,-1)}];}generatedResources.push({type:resourceType,filename:`${instanceId}.json`,content:JSON.stringify(fhirInstance,null,2),id:instanceId,resourceType:resourceType});addLog(`  ğŸ“Š Generated ${resourceType} instance: ${instance.name}`,'success');});definitions.valueSets.forEach(vs=>{const vsId=vs.id||vs.name.toLowerCase().replace(/\\s+/g,'-');const valueSet={resourceType:'ValueSet',id:vsId,url:`${configObj.canonical}/ValueSet/${vsId}`,name:vs.name,title:vs.title||vs.name,status:'draft',description:vs.description||`ValueSet for ${vs.name}`,compose:{include:[{system:'http://example.org/codes',concept:[{code:'example1',display:'Example Code 1'},{code:'example2',display:'Example Code 2'}]}]}};generatedResources.push({type:'ValueSet',filename:`ValueSet-${vsId}.json`,content:JSON.stringify(valueSet,null,2),id:vsId,name:vs.name,title:valueSet.title,url:valueSet.url});addLog(`  ğŸ“Š Generated ValueSet: ${vs.name}`,'success');});definitions.codeSystems.forEach(cs=>{const csId=cs.id||cs.name.toLowerCase().replace(/\\s+/g,'-');const codeSystem={resourceType:'CodeSystem',id:csId,url:`${configObj.canonical}/CodeSystem/${csId}`,name:cs.name,title:cs.title||cs.name,status:'draft',content:'complete',description:cs.description||`CodeSystem for ${cs.name}`,concept:[{code:'concept1',display:'Concept 1'},{code:'concept2',display:'Concept 2'}]};generatedResources.push({type:'CodeSystem',filename:`CodeSystem-${csId}.json`,content:JSON.stringify(codeSystem,null,2),id:csId,name:cs.name,title:codeSystem.title,url:codeSystem.url});addLog(`  ğŸ“Š Generated CodeSystem: ${cs.name}`,'success');});if(file.isFromStaging){addLog(`  ğŸ—ï¸ File from staging ground`,'info');}}// Set generated files\nsetGeneratedFiles(generatedResources);addLog('âœ¨ FSH compilation completed successfully!','success');addLog(`ğŸ“¦ Generated ${generatedResources.length} FHIR resources total`,'success');// Check for staging files\nconst stagingCount=files.filter(f=>f.isFromStaging).length;if(stagingCount>0){addLog(`ğŸ—ï¸ ${stagingCount} file(s) from staging ground included`,'info');}// Handle edge cases\nif(files.length===0){addLog('âš ï¸ No FSH files found to process','warning');}if(!config){addLog('âš ï¸ No sushi-config.yaml found - used default configuration','warning');}return{success:true,resourceCount:generatedResources.length,warnings:[],errors:[],generatedFiles:generatedResources};}catch(err){addLog(`âŒ Compilation failed: ${err.message}`,'error');// Log additional error details if available\nif(err.stack){console.error('Compilation error stack:',err.stack);}throw err;}};const handleRunSushi=async function(){let withStagingFiles=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;setIsRunning(true);setShowModal(true);setLogs([]);setGeneratedFiles([]);setActiveTab('logs');setError(null);setIncludeStagingFiles(withStagingFiles);try{addLog('ğŸ Starting SUSHI client-side execution...','info');if(withStagingFiles&&stagingFiles.length>0){addLog(`ğŸ—‚ï¸ Including ${stagingFiles.length} staging files`,'info');}// Fetch repository files\nconst{config,fshFiles:repoFiles}=await fetchRepositoryFiles();// Integrate staging files if requested\nconst finalFiles=withStagingFiles?integrateStagingFiles(repoFiles):repoFiles;if(withStagingFiles){addLog(`ğŸ“Š Final file count: ${finalFiles.length} FSH files`,'info');}// Run SUSHI\nawait runSushiInBrowser(config,finalFiles);addLog('ğŸ‰ SUSHI execution completed successfully!','success');}catch(err){setError(err.message);addLog(`ğŸ’¥ Execution failed: ${err.message}`,'error');}finally{setIsRunning(false);}};const toggleLogLevel=useCallback(level=>{setLogLevelToggles(prev=>({...prev,[level]:!prev[level]}));},[]);const clearLogs=useCallback(()=>{setLogs([]);setGeneratedFiles([]);setActiveTab('logs');setLogLevelToggles({info:true,success:true,warning:true,error:true});setSearchText('');},[]);const copyAllLogs=useCallback(async()=>{const logText=logs.map(log=>`[${new Date(log.timestamp).toLocaleTimeString()}] ${log.message}`).join('\\n');try{await navigator.clipboard.writeText(logText);}catch(err){console.error('Failed to copy logs:',err);}},[logs]);const copyLogMessage=useCallback(async message=>{try{await navigator.clipboard.writeText(message);}catch(err){console.error('Failed to copy log message:',err);}},[]);// Function to detect and create links for files mentioned in log messages\nconst parseLogMessage=useCallback((message,logId)=>{// More precise regex to find valid file paths - must be preceded by whitespace or start of line\n// and must be a complete path (not part of a longer word)\nconst filePathRegex=/(?:^|\\s)((?:input\\/fsh\\/[a-zA-Z0-9_/-]*\\/)?[a-zA-Z0-9_.-]+\\.(?:fsh|yaml|yml|json))(?=\\s|$|[.,!])/g;const matches=[...message.matchAll(filePathRegex)];if(matches.length===0){return/*#__PURE__*/_jsx(\"span\",{children:message});}let lastIndex=0;const elements=[];matches.forEach((match,index)=>{const fullMatch=match[0];const filePath=match[1];const matchIndex=match.index;// Add text before the match\nif(matchIndex>lastIndex){elements.push(/*#__PURE__*/_jsx(\"span\",{children:message.substring(lastIndex,matchIndex)},`${logId}-text-${index}`));}// Add the leading whitespace if present\nconst leadingWhitespace=fullMatch.substring(0,fullMatch.indexOf(filePath));if(leadingWhitespace){elements.push(/*#__PURE__*/_jsx(\"span\",{children:leadingWhitespace},`${logId}-ws-${index}`));}// Determine link type based on file location and validate the file exists\nconst createFileLink=(path,text)=>{// Check if file exists in our known file lists to avoid creating invalid links\nconst isKnownRepoFile=fshFiles.some(f=>f.path===path);const isFromStaging=stagingFiles.some(f=>f.path&&(f.path===path||f.path.endsWith(`/${path.split('/').pop()}`)));const isSushiConfig=path==='sushi-config.yaml';// Only create links for files we know exist\nif(!isKnownRepoFile&&!isFromStaging&&!isSushiConfig){// File not found in our known files, return as plain text\nreturn/*#__PURE__*/_jsx(\"span\",{className:\"file-mention\",children:text},`${logId}-text-${index}`);}if(isFromStaging){// Link to staging ground\nreturn/*#__PURE__*/_jsxs(\"span\",{className:\"file-link staging-link\",title:\"File from Staging Ground\",children:[\"\\uD83D\\uDCDD \",text]},`${logId}-link-${index}`);}else if(path.startsWith('input/fsh/')){// Determine DAK component based on directory structure\nconst getDakComponentLink=fshPath=>{const pathParts=fshPath.split('/');if(pathParts.length>2){const subDir=pathParts[2];switch(subDir){case'profiles':return{component:'Profiles',icon:'ğŸ‘¤'};case'examples':return{component:'Examples',icon:'ğŸ“‹'};case'valuesets':return{component:'ValueSets',icon:'ğŸ“Š'};case'codesystems':return{component:'CodeSystems',icon:'ğŸ”¢'};case'extensions':return{component:'Extensions',icon:'ğŸ”§'};default:return{component:'FSH Files',icon:'ğŸ“„'};}}return{component:'FSH Files',icon:'ğŸ“„'};};const dakInfo=getDakComponentLink(path);return/*#__PURE__*/_jsxs(\"span\",{className:\"file-link dak-link\",title:`View in DAK ${dakInfo.component}`,children:[dakInfo.icon,\" \",text]},`${logId}-link-${index}`);}else{// Link to GitHub source for valid repository files\nconst githubUrl=`https://github.com/${owner}/${repoName}/blob/${selectedBranch}/${path}`;return/*#__PURE__*/_jsxs(\"a\",{href:githubUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"file-link github-link\",title:\"Open in GitHub\",children:[\"\\uD83D\\uDD17 \",text]},`${logId}-link-${index}`);}};elements.push(createFileLink(filePath,filePath));lastIndex=matchIndex+fullMatch.length;});// Add remaining text\nif(lastIndex<message.length){elements.push(/*#__PURE__*/_jsx(\"span\",{children:message.substring(lastIndex)},`${logId}-text-end`));}return/*#__PURE__*/_jsx(\"span\",{children:elements});},[owner,repoName,selectedBranch,stagingFiles,fshFiles]);// Optimized filtered logs with useMemo to prevent unnecessary re-computations\nconst filteredLogs=useMemo(()=>{return logs.filter(log=>{// Filter by log level toggles\nconst isLevelEnabled=logLevelToggles[log.type];// Filter by search text\nconst matchesSearch=searchText===''||log.message.toLowerCase().includes(searchText.toLowerCase());return isLevelEnabled&&matchesSearch;});},[logs,logLevelToggles,searchText]);// Separate component for log controls to prevent re-renders\nconst LogControls=/*#__PURE__*/React.memo(_ref2=>{let{logLevelToggles,onToggleLogLevel,searchText,onSearchChange,filteredCount,totalCount}=_ref2;const handleSearchChange=useCallback(e=>{onSearchChange(e.target.value);},[onSearchChange]);return/*#__PURE__*/_jsxs(\"div\",{className:\"log-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"log-level-toggles\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"toggle-group-label\",children:\"Show levels:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"toggle-buttons\",children:[{key:'info',label:'Info',icon:'â„¹ï¸'},{key:'success',label:'Success',icon:'âœ…'},{key:'warning',label:'Warning',icon:'âš ï¸'},{key:'error',label:'Error',icon:'âŒ'}].map(_ref3=>{let{key,label,icon}=_ref3;return/*#__PURE__*/_jsxs(\"button\",{className:`log-toggle-btn ${logLevelToggles[key]?'active':'inactive'}`,onClick:()=>onToggleLogLevel(key),title:`Toggle ${label} messages`,children:[icon,\" \",label]},key);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"log-search-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"log-search\",children:\"Search logs:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"log-search\",type:\"text\",value:searchText,onChange:handleSearchChange,placeholder:\"Search log messages...\",className:\"log-search-input\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"log-stats\",children:searchText||Object.values(logLevelToggles).some(v=>!v)?/*#__PURE__*/_jsxs(\"span\",{children:[\"Showing \",filteredCount,\" of \",totalCount,\" logs\"]}):/*#__PURE__*/_jsxs(\"span\",{children:[totalCount,\" logs\"]})})]});});const handleSearchChange=useCallback(value=>{setSearchText(value);},[]);const viewFile=useCallback(file=>{setSelectedFile(file);setShowFileViewer(true);},[]);const closeFileViewer=useCallback(()=>{setShowFileViewer(false);setSelectedFile(null);},[]);const getResourceTypeIcon=type=>{switch(type){case'StructureDefinition':return'ğŸ—ï¸';case'Patient':return'ğŸ‘¤';case'ValueSet':return'ğŸ“Š';case'CodeSystem':return'ğŸ”¢';case'Organization':return'ğŸ¢';case'Practitioner':return'ğŸ‘¨â€âš•ï¸';case'Observation':return'ğŸ“‹';default:return'ğŸ“„';}};const FileViewerModal=()=>{if(!selectedFile)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"file-viewer-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"file-viewer-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-viewer-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[getResourceTypeIcon(selectedFile.type),\" \",selectedFile.filename]}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-viewer-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigator.clipboard.writeText(selectedFile.content),className:\"copy-file-btn\",title:\"Copy file content to clipboard\",children:\"\\uD83D\\uDCCB Copy\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeFileViewer,className:\"close-file-viewer-btn\",children:\"\\u2715\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-viewer-content\",children:/*#__PURE__*/_jsx(SyntaxHighlighter,{language:\"json\",style:oneLight,showLineNumbers:true,wrapLines:true,customStyle:{fontSize:'14px',lineHeight:'1.4',maxHeight:'70vh',overflow:'auto'},children:selectedFile.content})}),/*#__PURE__*/_jsx(\"div\",{className:\"file-viewer-footer\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"file-info\",children:[\"Resource Type: \",selectedFile.type,\" | Size: \",(selectedFile.content.length/1024).toFixed(1),\" KB\"]})})]})});};const LogModal=()=>/*#__PURE__*/_jsx(\"div\",{className:\"sushi-modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-modal-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83C\\uDF63 SUSHI Client-Side Execution\",includeStagingFiles&&/*#__PURE__*/_jsx(\"span\",{className:\"staging-badge\",children:\"+ Staging\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:copyAllLogs,className:\"copy-all-btn\",disabled:logs.length===0,title:\"Copy all logs to clipboard\",children:\"\\uD83D\\uDCCB Copy All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearLogs,className:\"clear-logs-btn\",disabled:isRunning,children:\"\\uD83D\\uDDD1\\uFE0F Clear\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowModal(false),className:\"close-modal-btn\",children:\"\\u2715\"})]})]}),/*#__PURE__*/_jsx(LogControls,{logLevelToggles:logLevelToggles,onToggleLogLevel:toggleLogLevel,searchText:searchText,onSearchChange:handleSearchChange,filteredCount:filteredLogs.length,totalCount:logs.length}),generatedFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"modal-section-toggle\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toggle-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:`toggle-btn ${activeTab==='logs'?'active':''}`,onClick:()=>setActiveTab('logs'),children:\"\\uD83D\\uDCC4 Logs & Messages\"}),/*#__PURE__*/_jsx(\"button\",{className:`toggle-btn ${activeTab==='files'?'active':''}`,onClick:()=>setActiveTab('files'),children:\"\\uD83D\\uDCE6 Generated Resources\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"section-info\",children:activeTab==='logs'?/*#__PURE__*/_jsxs(\"span\",{className:\"info-text\",children:[logs.length,\" log entries \\u2022 Use toggles to filter by level\"]}):/*#__PURE__*/_jsxs(\"span\",{className:\"info-text\",children:[generatedFiles.length,\" FHIR resources generated\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-modal-content\",children:[(activeTab==='logs'||generatedFiles.length===0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"log-container\",children:[filteredLogs.map(log=>/*#__PURE__*/_jsxs(\"div\",{className:`log-entry log-${log.type}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"log-timestamp\",children:new Date(log.timestamp).toLocaleTimeString()}),/*#__PURE__*/_jsx(\"span\",{className:\"log-message\",children:parseLogMessage(log.message,log.id)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyLogMessage(log.message),className:\"copy-log-btn\",title:\"Copy this message to clipboard\",children:\"\\uD83D\\uDCCB\"})]},log.id)),isRunning&&/*#__PURE__*/_jsxs(\"div\",{className:\"log-entry log-running\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"log-timestamp\",children:new Date().toLocaleTimeString()}),/*#__PURE__*/_jsxs(\"span\",{className:\"log-message\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner\",children:\"\\u23F3\"}),\" Processing...\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"copy-log-btn-placeholder\"})]}),filteredLogs.length===0&&!isRunning&&logs.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"log-placeholder\",children:\"No logs match the current filter criteria...\"}),logs.length===0&&!isRunning&&/*#__PURE__*/_jsx(\"div\",{className:\"log-placeholder\",children:\"Logs will appear here during SUSHI execution...\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u274C Execution Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]})]}),activeTab==='files'&&generatedFiles.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"generated-files-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"generated-files-section\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\uD83D\\uDCE6 Generated FHIR Resources (\",generatedFiles.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"generated-files-grid\",children:generatedFiles.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"generated-file-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-card-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"file-icon\",children:getResourceTypeIcon(file.type)}),/*#__PURE__*/_jsx(\"span\",{className:\"file-name\",children:file.filename})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-card-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"file-type\",children:file.type}),/*#__PURE__*/_jsxs(\"span\",{className:\"file-size\",children:[(file.content.length/1024).toFixed(1),\" KB\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-card-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>viewFile(file),className:\"view-file-btn\",title:\"View resource content\",children:\"\\uD83D\\uDC41\\uFE0F View\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigator.clipboard.writeText(file.content),className:\"copy-file-btn\",title:\"Copy to clipboard\",children:\"\\uD83D\\uDCCB\"})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"fhir-viewer-suggestions\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\uD83D\\uDCA1 Enhanced FHIR Viewing Options\"}),/*#__PURE__*/_jsx(\"p\",{children:\"For better FHIR resource visualization, consider these viewers:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"FHIR Tree Viewer:\"}),\" \",/*#__PURE__*/_jsx(\"code\",{children:\"npm install @types/fhir\"}),\" + custom tree renderer\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"FHIR Path Viewer:\"}),\" \",/*#__PURE__*/_jsx(\"code\",{children:\"npm install fhirpath\"}),\" for interactive querying\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"FHIR UI:\"}),\" \",/*#__PURE__*/_jsx(\"code\",{children:\"npm install @asymmetrik/fhir-kit-client\"}),\" with UI components\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"HL7 FHIR Viewer:\"}),\" Integration with official HL7 FHIR viewers\"]})]})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sushi-modal-footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"execution-info\",children:isRunning?/*#__PURE__*/_jsx(\"span\",{className:\"status-running\",children:\"\\uD83D\\uDD04 Running SUSHI...\"}):logs.length>0?/*#__PURE__*/_jsx(\"span\",{className:\"status-complete\",children:\"\\u2705 Execution complete\"}):/*#__PURE__*/_jsx(\"span\",{className:\"status-ready\",children:\"\\uD83C\\uDF63 Ready to run SUSHI\"})})})]})});return/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-runner-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`sushi-status-bar ${isExpanded?'expanded':'collapsed'}`,onClick:()=>setIsExpanded(!isExpanded),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-bar-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:\"\\uD83C\\uDF63\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-title\",children:\"SUSHI (FHIR Shorthand)\"}),/*#__PURE__*/_jsx(\"span\",{className:\"expand-icon\",children:isExpanded?'â–¼':'â–¶'})]}),!isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"status-summary\",children:\"Client-side FHIR Implementation Guide compilation\"})]}),isExpanded&&/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-controls\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sushi-description\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Run SUSHI (FHIR Shorthand) compilation directly in your browser to generate FHIR Implementation Guide resources from FSH files.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"execution-options\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"execution-mode-selector\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u2699\\uFE0F Execution Mode\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mode-options\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"mode-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"executionMode\",value:\"auto\",checked:executionMode==='auto',onChange:e=>setExecutionMode(e.target.value)}),/*#__PURE__*/_jsxs(\"span\",{className:\"mode-label\",children:[\"\\uD83E\\uDD16 Auto (WebAssembly when available)\",wasmSupported&&wasmInitialized&&/*#__PURE__*/_jsx(\"span\",{className:\"wasm-badge\",children:\"WASM Ready\"})]})]}),wasmSupported&&/*#__PURE__*/_jsxs(\"label\",{className:\"mode-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"executionMode\",value:\"wasm\",checked:executionMode==='wasm',onChange:e=>setExecutionMode(e.target.value),disabled:!wasmInitialized}),/*#__PURE__*/_jsxs(\"span\",{className:\"mode-label\",children:[\"\\uD83D\\uDE80 WebAssembly (High Performance)\",!wasmInitialized&&/*#__PURE__*/_jsx(\"span\",{className:\"loading-badge\",children:\"Initializing...\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"mode-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"executionMode\",value:\"javascript\",checked:executionMode==='javascript',onChange:e=>setExecutionMode(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"mode-label\",children:\"\\u2699\\uFE0F JavaScript (Fallback)\"})]})]}),!wasmSupported&&/*#__PURE__*/_jsx(\"div\",{className:\"wasm-not-supported\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u26A0\\uFE0F WebAssembly is not supported in this browser. JavaScript fallback will be used.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"option-group\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCC2 Repository Files Only\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Compile using sushi-config.yaml and input/fsh files from the GitHub repository (\",selectedBranch,\" branch).\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"run-sushi-btn primary\",onClick:()=>handleRunSushi(false),disabled:isRunning,children:isRunning?'â³ Running...':'ğŸš€ Run SUSHI'})]}),stagingFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"option-group\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83C\\uDFD7\\uFE0F Repository + Staging Files\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Compile using repository files, with staging ground files (\",stagingFiles.length,\" files) overriding any repository files with the same name.\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"run-sushi-btn secondary\",onClick:()=>handleRunSushi(true),disabled:isRunning,children:isRunning?'â³ Running...':'ğŸš€ Run SUSHI + Staging'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sushi-status\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Execution:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:wasmSupported&&wasmInitialized?'ğŸš€ WebAssembly Ready':'âš™ï¸ JavaScript'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Config:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:sushiConfig?'âœ… Found':'â“ Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"FSH Files:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[fshFiles.length,\" in repository\"]})]}),stagingFiles.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"status-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Staging:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[stagingFiles.filter(f=>f.path&&f.path.endsWith('.fsh')).length,\" FSH files\"]})]})]})]}),showModal&&/*#__PURE__*/_jsx(LogModal,{}),showFileViewer&&/*#__PURE__*/_jsx(FileViewerModal,{})]});};export default SushiRunner;","map":{"version":3,"names":["React","useState","useCallback","useMemo","useEffect","Prism","SyntaxHighlighter","oneLight","githubService","sushiWasmService","WasmLoader","performanceMonitor","jsx","_jsx","jsxs","_jsxs","SushiRunner","_ref","_repository$owner","repository","selectedBranch","profile","stagingFiles","isExpanded","setIsExpanded","isRunning","setIsRunning","showModal","setShowModal","logs","setLogs","generatedFiles","setGeneratedFiles","showFileViewer","setShowFileViewer","selectedFile","setSelectedFile","activeTab","setActiveTab","logLevelToggles","setLogLevelToggles","info","success","warning","error","searchText","setSearchText","sushiConfig","setSushiConfig","fshFiles","setFshFiles","includeStagingFiles","setIncludeStagingFiles","setError","executionMode","setExecutionMode","wasmSupported","setWasmSupported","wasmInitialized","setWasmInitialized","owner","login","full_name","split","repoName","name","addLog","message","type","arguments","length","undefined","prev","id","Date","now","Math","random","timestamp","toISOString","checkWasmSupport","supported","isSupported","initialize","err","fetchRepositoryFiles","config","configContent","getFileContent","scanDirectory","dirPath","depth","maxDepth","contents","getDirectoryContents","item","endsWith","fileContent","path","push","content","integrateStagingFiles","repoFshFiles","integratedFiles","forEach","stagingFile","fileName","pop","existingIndex","findIndex","f","isFromStaging","runSushiInBrowser","files","useWasm","mode","startTiming","result","runSushiWithWasm","runSushiWithJavaScript","duration","endTiming","toFixed","fallbackErr","runSushi","generatedResources","map","file","resourceType","filename","warnings","resourceCount","errors","Error","join","yaml","configObj","default","load","version","fhirVersion","canonical","status","extractFSHDefinitions","definitions","profiles","instances","valueSets","codeSystems","extensions","lines","currentDefinition","currentType","i","line","trim","startsWith","substring","parent","title","description","rules","instanceOf","usage","replace","includes","profileId","toLowerCase","structureDefinition","url","kind","abstract","baseDefinition","derivation","differential","element","rule","index","short","JSON","stringify","instance","instanceId","fhirInstance","meta","family","given","slice","vs","vsId","valueSet","compose","include","system","concept","code","display","cs","csId","codeSystem","stagingCount","filter","stack","console","handleRunSushi","withStagingFiles","repoFiles","finalFiles","toggleLogLevel","level","clearLogs","copyAllLogs","logText","log","toLocaleTimeString","navigator","clipboard","writeText","copyLogMessage","parseLogMessage","logId","filePathRegex","matches","matchAll","children","lastIndex","elements","match","fullMatch","filePath","matchIndex","leadingWhitespace","indexOf","createFileLink","text","isKnownRepoFile","some","isSushiConfig","className","getDakComponentLink","fshPath","pathParts","subDir","component","icon","dakInfo","githubUrl","href","target","rel","filteredLogs","isLevelEnabled","matchesSearch","LogControls","memo","_ref2","onToggleLogLevel","onSearchChange","filteredCount","totalCount","handleSearchChange","e","value","key","label","_ref3","onClick","htmlFor","onChange","placeholder","Object","values","v","viewFile","closeFileViewer","getResourceTypeIcon","FileViewerModal","language","style","showLineNumbers","wrapLines","customStyle","fontSize","lineHeight","maxHeight","overflow","LogModal","disabled","checked"],"sources":["/home/runner/work/sgex/sgex/src/components/SushiRunner.js"],"sourcesContent":["import React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { oneLight } from 'react-syntax-highlighter/dist/esm/styles/prism';\nimport githubService from '../services/githubService';\nimport sushiWasmService from '../services/sushiWasmService';\nimport { WasmLoader, performanceMonitor } from '../utils/wasmLoader';\nimport './SushiRunner.css';\n\nconst SushiRunner = ({ repository, selectedBranch, profile, stagingFiles = [] }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isRunning, setIsRunning] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [logs, setLogs] = useState([]);\n  const [generatedFiles, setGeneratedFiles] = useState([]);\n  const [showFileViewer, setShowFileViewer] = useState(false);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [activeTab, setActiveTab] = useState('logs');\n  const [logLevelToggles, setLogLevelToggles] = useState({\n    info: true,\n    success: true,\n    warning: true,\n    error: true\n  });\n  const [searchText, setSearchText] = useState('');\n  const [sushiConfig, setSushiConfig] = useState(null);\n  const [fshFiles, setFshFiles] = useState([]);\n  const [includeStagingFiles, setIncludeStagingFiles] = useState(false);\n  const [error, setError] = useState(null);\n  const [executionMode, setExecutionMode] = useState('auto'); // 'auto', 'wasm', 'javascript'\n  const [wasmSupported, setWasmSupported] = useState(false);\n  const [wasmInitialized, setWasmInitialized] = useState(false);\n\n  const owner = repository.owner?.login || repository.full_name.split('/')[0];\n  const repoName = repository.name;\n\n  const addLog = useCallback((message, type = 'info') => {\n    setLogs(prev => [...prev, {\n      id: Date.now() + Math.random(),\n      message,\n      type,\n      timestamp: new Date().toISOString()\n    }]);\n  }, []);\n\n  // Check WebAssembly support on component mount\n  useEffect(() => {\n    const checkWasmSupport = async () => {\n      const supported = WasmLoader.isSupported();\n      setWasmSupported(supported);\n      \n      if (supported) {\n        addLog('ğŸš€ WebAssembly support detected', 'success');\n        \n        // Initialize WASM service\n        try {\n          await sushiWasmService.initialize();\n          setWasmInitialized(true);\n          addLog('âœ… SUSHI WebAssembly service initialized', 'success');\n        } catch (err) {\n          addLog(`âš ï¸ WASM initialization failed, falling back to JavaScript: ${err.message}`, 'warning');\n        }\n      } else {\n        addLog('âš ï¸ WebAssembly not supported, using JavaScript fallback', 'warning');\n      }\n    };\n\n    checkWasmSupport();\n  }, [addLog]);\n\n  const fetchRepositoryFiles = async () => {\n    try {\n      addLog('ğŸ” Fetching sushi-config.yaml...', 'info');\n      \n      let config = null;\n      try {\n        const configContent = await githubService.getFileContent(\n          owner, \n          repoName, \n          'sushi-config.yaml', \n          selectedBranch\n        );\n        config = configContent;\n        setSushiConfig(config);\n        addLog('âœ… Found sushi-config.yaml', 'success');\n      } catch (err) {\n        addLog('âš ï¸ sushi-config.yaml not found in repository', 'warning');\n      }\n\n      addLog('ğŸ” Scanning input/fsh directory recursively...', 'info');\n      \n      const fshFiles = [];\n      try {\n        // Recursively scan for FSH files\n        const scanDirectory = async (dirPath, depth = 0) => {\n          const maxDepth = 5; // Prevent infinite recursion\n          if (depth > maxDepth) {\n            addLog(`âš ï¸ Maximum directory depth reached for ${dirPath}`, 'warning');\n            return;\n          }\n\n          try {\n            const contents = await githubService.getDirectoryContents(\n              owner,\n              repoName,\n              dirPath,\n              selectedBranch\n            );\n            \n            for (const item of contents) {\n              if (item.type === 'file' && item.name.endsWith('.fsh')) {\n                try {\n                  const fileContent = await githubService.getFileContent(\n                    owner,\n                    repoName,\n                    item.path,\n                    selectedBranch\n                  );\n                  fshFiles.push({\n                    name: item.name,\n                    path: item.path,\n                    content: fileContent\n                  });\n                  addLog(`ğŸ“„ Found ${item.path}`, 'success');\n                } catch (err) {\n                  addLog(`âŒ Failed to fetch ${item.path}: ${err.message}`, 'error');\n                }\n              } else if (item.type === 'dir') {\n                // Recursively scan subdirectories\n                addLog(`ğŸ“ Scanning subdirectory: ${item.path}`, 'info');\n                await scanDirectory(item.path, depth + 1);\n              }\n            }\n          } catch (err) {\n            addLog(`âš ï¸ Could not scan directory ${dirPath}: ${err.message}`, 'warning');\n          }\n        };\n\n        await scanDirectory('input/fsh');\n      } catch (err) {\n        addLog('âš ï¸ input/fsh directory not found or empty', 'warning');\n      }\n\n      setFshFiles(fshFiles);\n      addLog(`ğŸ“Š Found ${fshFiles.length} FSH files in repository`, 'info');\n      \n      return { config, fshFiles };\n    } catch (err) {\n      addLog(`âŒ Error fetching repository files: ${err.message}`, 'error');\n      throw err;\n    }\n  };\n\n  const integrateStagingFiles = (repoFshFiles) => {\n    // Start with repository files\n    const integratedFiles = [...repoFshFiles];\n    \n    // Override/add staging files\n    stagingFiles.forEach(stagingFile => {\n      if (stagingFile.path && stagingFile.path.endsWith('.fsh')) {\n        const fileName = stagingFile.path.split('/').pop();\n        const existingIndex = integratedFiles.findIndex(f => f.name === fileName);\n        \n        if (existingIndex >= 0) {\n          // Override existing file\n          integratedFiles[existingIndex] = {\n            ...integratedFiles[existingIndex],\n            content: stagingFile.content,\n            isFromStaging: true\n          };\n          addLog(`ğŸ”„ Overriding ${fileName} with staging version`, 'info');\n        } else {\n          // Add new file from staging\n          integratedFiles.push({\n            name: fileName,\n            path: stagingFile.path,\n            content: stagingFile.content,\n            isFromStaging: true\n          });\n          addLog(`â• Adding ${fileName} from staging`, 'info');\n        }\n      }\n    });\n\n    return integratedFiles;\n  };\n\n  const runSushiInBrowser = async (config, files) => {\n    try {\n      // Determine execution mode\n      const useWasm = executionMode === 'wasm' || \n                     (executionMode === 'auto' && wasmSupported && wasmInitialized);\n      \n      const mode = useWasm ? 'WebAssembly' : 'JavaScript';\n      addLog(`ğŸš€ Starting FHIR Shorthand compilation using ${mode}...`, 'info');\n      \n      // Start performance monitoring\n      performanceMonitor.startTiming('sushi-compilation', useWasm ? 'wasm' : 'js');\n      \n      let result;\n      \n      if (useWasm) {\n        addLog('ğŸ”§ Using WebAssembly SUSHI engine...', 'info');\n        result = await runSushiWithWasm(config, files);\n      } else {\n        addLog('âš™ï¸ Using JavaScript fallback engine...', 'info');\n        result = await runSushiWithJavaScript(config, files);\n      }\n      \n      // End performance monitoring\n      const duration = performanceMonitor.endTiming('sushi-compilation', useWasm ? 'wasm' : 'js');\n      addLog(`â±ï¸ Compilation completed in ${duration.toFixed(2)}ms using ${mode}`, 'success');\n      \n      return result;\n      \n    } catch (err) {\n      addLog(`âŒ Compilation failed: ${err.message}`, 'error');\n      \n      // If WASM failed, try JavaScript fallback\n      if (executionMode === 'auto' && wasmSupported) {\n        addLog('ğŸ”„ Attempting JavaScript fallback...', 'info');\n        try {\n          return await runSushiWithJavaScript(config, files);\n        } catch (fallbackErr) {\n          addLog(`âŒ JavaScript fallback also failed: ${fallbackErr.message}`, 'error');\n          throw fallbackErr;\n        }\n      }\n      \n      throw err;\n    }\n  };\n\n  const runSushiWithWasm = async (config, files) => {\n    try {\n      addLog('ğŸ“¦ Preparing WebAssembly execution environment...', 'info');\n      \n      // Use the WASM service\n      const result = await sushiWasmService.runSushi(config, files);\n      \n      if (result.success) {\n        addLog(`âœ… WebAssembly compilation successful`, 'success');\n        addLog(`ğŸ“Š Generated ${result.files.length} FHIR resources`, 'success');\n        \n        // Convert WASM output to the expected format\n        const generatedResources = result.files.map(file => ({\n          type: file.resourceType,\n          filename: file.path,\n          content: file.content,\n          id: file.path.split('.')[0],\n          resourceType: file.resourceType\n        }));\n        \n        setGeneratedFiles(generatedResources);\n        \n        // Log any warnings\n        result.warnings.forEach(warning => {\n          addLog(`âš ï¸ ${warning}`, 'warning');\n        });\n        \n        return {\n          success: true,\n          resourceCount: result.files.length,\n          warnings: result.warnings,\n          errors: result.errors,\n          generatedFiles: generatedResources\n        };\n      } else {\n        // Log errors from WASM compilation\n        result.errors.forEach(error => {\n          addLog(`âŒ ${error}`, 'error');\n        });\n        \n        throw new Error(`WASM compilation failed: ${result.errors.join(', ')}`);\n      }\n      \n    } catch (err) {\n      addLog(`ğŸ’¥ WebAssembly execution failed: ${err.message}`, 'error');\n      throw err;\n    }\n  };\n\n  const runSushiWithJavaScript = async (config, files) => {\n    try {\n      addLog('ğŸš€ Starting FHIR Shorthand compilation...', 'info');\n      \n      addLog('â„¹ï¸ Using JavaScript FSH processor (Enhanced with WASM-compatible interface)', 'info');\n      \n      addLog('ğŸ“¦ Loading YAML processing library...', 'info');\n      const yaml = await import('js-yaml');\n      addLog('âœ… Libraries loaded successfully', 'success');\n      \n      addLog('ğŸ“ Processing configuration...', 'info');\n      \n      // Prepare configuration\n      let configObj = null;\n      if (config) {\n        try {\n          configObj = typeof config === 'string' ? yaml.default.load(config) : config;\n          addLog(`ğŸ“‹ Package: ${configObj.name || 'Unknown'}`, 'success');\n          addLog(`ğŸ“‹ Version: ${configObj.version || 'Unknown'}`, 'success');\n          addLog(`ğŸ“‹ FHIR Version: ${configObj.fhirVersion || 'Unknown'}`, 'success');\n        } catch (err) {\n          addLog(`âš ï¸ Could not parse config: ${err.message}`, 'warning');\n        }\n      } else {\n        // Create a default configuration\n        configObj = {\n          name: 'browser-generated-ig',\n          version: '1.0.0',\n          fhirVersion: '4.0.1',\n          id: 'browser.generated.ig',\n          canonical: 'http://example.org/fhir/ig/browser-generated',\n          status: 'draft'\n        };\n        addLog('ğŸ“‹ Using default configuration', 'info');\n      }\n\n      addLog(`ğŸ” Analyzing ${files.length} FSH files...`, 'info');\n      \n      const generatedResources = [];\n      \n      // Enhanced FSH parsing and analysis with realistic FHIR generation\n      for (const file of files) {\n        addLog(`ğŸ“„ Processing ${file.name}...`, 'info');\n        \n        const content = file.content;\n        \n        // Parse FSH content to extract definitions\n        const extractFSHDefinitions = (content) => {\n          const definitions = {\n            profiles: [],\n            instances: [],\n            valueSets: [],\n            codeSystems: [],\n            extensions: []\n          };\n          \n          const lines = content.split('\\n');\n          let currentDefinition = null;\n          let currentType = null;\n          \n          for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n            \n            // Detect definition types\n            if (line.startsWith('Profile:')) {\n              currentType = 'profiles';\n              currentDefinition = {\n                name: line.substring(8).trim(),\n                type: 'Profile',\n                parent: null,\n                id: null,\n                title: null,\n                description: null,\n                rules: []\n              };\n            } else if (line.startsWith('Instance:')) {\n              currentType = 'instances';\n              currentDefinition = {\n                name: line.substring(9).trim(),\n                type: 'Instance',\n                instanceOf: null,\n                usage: null,\n                title: null,\n                description: null,\n                rules: []\n              };\n            } else if (line.startsWith('ValueSet:')) {\n              currentType = 'valueSets';\n              currentDefinition = {\n                name: line.substring(9).trim(),\n                type: 'ValueSet',\n                id: null,\n                title: null,\n                description: null,\n                rules: []\n              };\n            } else if (line.startsWith('CodeSystem:')) {\n              currentType = 'codeSystems';\n              currentDefinition = {\n                name: line.substring(11).trim(),\n                type: 'CodeSystem',\n                id: null,\n                title: null,\n                description: null,\n                rules: []\n              };\n            } else if (line.startsWith('Extension:')) {\n              currentType = 'extensions';\n              currentDefinition = {\n                name: line.substring(10).trim(),\n                type: 'Extension',\n                id: null,\n                title: null,\n                description: null,\n                rules: []\n              };\n            }\n            \n            // Parse properties\n            if (currentDefinition) {\n              if (line.startsWith('Parent:')) {\n                currentDefinition.parent = line.substring(7).trim();\n              } else if (line.startsWith('InstanceOf:')) {\n                currentDefinition.instanceOf = line.substring(11).trim();\n              } else if (line.startsWith('Usage:')) {\n                currentDefinition.usage = line.substring(6).trim();\n              } else if (line.startsWith('Id:')) {\n                currentDefinition.id = line.substring(3).trim();\n              } else if (line.startsWith('Title:')) {\n                currentDefinition.title = line.substring(6).trim().replace(/['\"]/g, '');\n              } else if (line.startsWith('Description:')) {\n                currentDefinition.description = line.substring(12).trim().replace(/['\"]/g, '');\n              } else if (line.startsWith('* ')) {\n                currentDefinition.rules.push(line.substring(2).trim());\n              }\n              \n              // If we hit a new definition or end of content, save current one\n              if ((line.includes(':') && !line.startsWith('* ') && \n                   !line.startsWith('Parent:') && !line.startsWith('InstanceOf:') &&\n                   !line.startsWith('Usage:') && !line.startsWith('Id:') &&\n                   !line.startsWith('Title:') && !line.startsWith('Description:')) ||\n                  i === lines.length - 1) {\n                \n                if (currentDefinition && currentType && currentDefinition.name) {\n                  definitions[currentType].push(currentDefinition);\n                }\n                currentDefinition = null;\n                currentType = null;\n                i--; // Re-process this line for the new definition\n              }\n            }\n          }\n          \n          return definitions;\n        };\n        \n        const definitions = extractFSHDefinitions(content);\n        \n        // Generate realistic FHIR resources from FSH definitions\n        definitions.profiles.forEach(profile => {\n          const profileId = profile.id || profile.name.toLowerCase().replace(/\\s+/g, '-');\n          const structureDefinition = {\n            resourceType: 'StructureDefinition',\n            id: profileId,\n            url: `${configObj.canonical}/StructureDefinition/${profileId}`,\n            name: profile.name,\n            title: profile.title || profile.name,\n            status: 'draft',\n            fhirVersion: configObj.fhirVersion || '4.0.1',\n            kind: 'resource',\n            abstract: false,\n            type: profile.parent === 'Patient' ? 'Patient' : \n                   profile.parent === 'Observation' ? 'Observation' :\n                   profile.parent || 'DomainResource',\n            baseDefinition: `http://hl7.org/fhir/StructureDefinition/${profile.parent || 'DomainResource'}`,\n            derivation: 'constraint',\n            description: profile.description || `Profile for ${profile.name}`\n          };\n          \n          if (profile.rules.length > 0) {\n            structureDefinition.differential = {\n              element: profile.rules.map((rule, index) => ({\n                id: `${structureDefinition.type}.${rule.split(' ')[0]}`,\n                path: `${structureDefinition.type}.${rule.split(' ')[0]}`,\n                short: `Rule: ${rule}`\n              }))\n            };\n          }\n          \n          generatedResources.push({\n            type: 'StructureDefinition',\n            filename: `StructureDefinition-${profileId}.json`,\n            content: JSON.stringify(structureDefinition, null, 2),\n            id: profileId,\n            name: profile.name,\n            title: structureDefinition.title,\n            url: structureDefinition.url\n          });\n          \n          addLog(`  ğŸ“Š Generated StructureDefinition: ${profile.name}`, 'success');\n        });\n        \n        definitions.instances.forEach(instance => {\n          const instanceId = instance.name.toLowerCase().replace(/\\s+/g, '-');\n          const resourceType = instance.instanceOf === 'Patient' ? 'Patient' :\n                             instance.instanceOf === 'Observation' ? 'Observation' :\n                             'Patient'; // Default fallback\n                             \n          const fhirInstance = {\n            resourceType: resourceType,\n            id: instanceId,\n            meta: {\n              profile: instance.instanceOf ? [`${configObj.canonical}/StructureDefinition/${instance.instanceOf}`] : undefined\n            }\n          };\n          \n          // Add basic properties based on resource type\n          if (resourceType === 'Patient') {\n            fhirInstance.name = [{\n              family: instance.name.split(' ').pop(),\n              given: instance.name.split(' ').slice(0, -1)\n            }];\n          }\n          \n          generatedResources.push({\n            type: resourceType,\n            filename: `${instanceId}.json`,\n            content: JSON.stringify(fhirInstance, null, 2),\n            id: instanceId,\n            resourceType: resourceType\n          });\n          \n          addLog(`  ğŸ“Š Generated ${resourceType} instance: ${instance.name}`, 'success');\n        });\n        \n        definitions.valueSets.forEach(vs => {\n          const vsId = vs.id || vs.name.toLowerCase().replace(/\\s+/g, '-');\n          const valueSet = {\n            resourceType: 'ValueSet',\n            id: vsId,\n            url: `${configObj.canonical}/ValueSet/${vsId}`,\n            name: vs.name,\n            title: vs.title || vs.name,\n            status: 'draft',\n            description: vs.description || `ValueSet for ${vs.name}`,\n            compose: {\n              include: [{\n                system: 'http://example.org/codes',\n                concept: [\n                  { code: 'example1', display: 'Example Code 1' },\n                  { code: 'example2', display: 'Example Code 2' }\n                ]\n              }]\n            }\n          };\n          \n          generatedResources.push({\n            type: 'ValueSet',\n            filename: `ValueSet-${vsId}.json`,\n            content: JSON.stringify(valueSet, null, 2),\n            id: vsId,\n            name: vs.name,\n            title: valueSet.title,\n            url: valueSet.url\n          });\n          \n          addLog(`  ğŸ“Š Generated ValueSet: ${vs.name}`, 'success');\n        });\n        \n        definitions.codeSystems.forEach(cs => {\n          const csId = cs.id || cs.name.toLowerCase().replace(/\\s+/g, '-');\n          const codeSystem = {\n            resourceType: 'CodeSystem',\n            id: csId,\n            url: `${configObj.canonical}/CodeSystem/${csId}`,\n            name: cs.name,\n            title: cs.title || cs.name,\n            status: 'draft',\n            content: 'complete',\n            description: cs.description || `CodeSystem for ${cs.name}`,\n            concept: [\n              { code: 'concept1', display: 'Concept 1' },\n              { code: 'concept2', display: 'Concept 2' }\n            ]\n          };\n          \n          generatedResources.push({\n            type: 'CodeSystem',\n            filename: `CodeSystem-${csId}.json`,\n            content: JSON.stringify(codeSystem, null, 2),\n            id: csId,\n            name: cs.name,\n            title: codeSystem.title,\n            url: codeSystem.url\n          });\n          \n          addLog(`  ğŸ“Š Generated CodeSystem: ${cs.name}`, 'success');\n        });\n        \n        if (file.isFromStaging) {\n          addLog(`  ğŸ—ï¸ File from staging ground`, 'info');\n        }\n      }\n\n      // Set generated files\n      setGeneratedFiles(generatedResources);\n      \n      addLog('âœ¨ FSH compilation completed successfully!', 'success');\n      addLog(`ğŸ“¦ Generated ${generatedResources.length} FHIR resources total`, 'success');\n      \n      // Check for staging files\n      const stagingCount = files.filter(f => f.isFromStaging).length;\n      if (stagingCount > 0) {\n        addLog(`ğŸ—ï¸ ${stagingCount} file(s) from staging ground included`, 'info');\n      }\n      \n      // Handle edge cases\n      if (files.length === 0) {\n        addLog('âš ï¸ No FSH files found to process', 'warning');\n      }\n      \n      if (!config) {\n        addLog('âš ï¸ No sushi-config.yaml found - used default configuration', 'warning');\n      }\n\n      return {\n        success: true,\n        resourceCount: generatedResources.length,\n        warnings: [],\n        errors: [],\n        generatedFiles: generatedResources\n      };\n      \n    } catch (err) {\n      addLog(`âŒ Compilation failed: ${err.message}`, 'error');\n      \n      // Log additional error details if available\n      if (err.stack) {\n        console.error('Compilation error stack:', err.stack);\n      }\n      \n      throw err;\n    }\n  };\n\n  const handleRunSushi = async (withStagingFiles = false) => {\n    setIsRunning(true);\n    setShowModal(true);\n    setLogs([]);\n    setGeneratedFiles([]);\n    setActiveTab('logs');\n    setError(null);\n    setIncludeStagingFiles(withStagingFiles);\n\n    try {\n      addLog('ğŸ Starting SUSHI client-side execution...', 'info');\n      \n      if (withStagingFiles && stagingFiles.length > 0) {\n        addLog(`ğŸ—‚ï¸ Including ${stagingFiles.length} staging files`, 'info');\n      }\n\n      // Fetch repository files\n      const { config, fshFiles: repoFiles } = await fetchRepositoryFiles();\n      \n      // Integrate staging files if requested\n      const finalFiles = withStagingFiles ? \n        integrateStagingFiles(repoFiles) : \n        repoFiles;\n\n      if (withStagingFiles) {\n        addLog(`ğŸ“Š Final file count: ${finalFiles.length} FSH files`, 'info');\n      }\n\n      // Run SUSHI\n      await runSushiInBrowser(config, finalFiles);\n      \n      addLog('ğŸ‰ SUSHI execution completed successfully!', 'success');\n      \n    } catch (err) {\n      setError(err.message);\n      addLog(`ğŸ’¥ Execution failed: ${err.message}`, 'error');\n    } finally {\n      setIsRunning(false);\n    }\n  };\n\n  const toggleLogLevel = useCallback((level) => {\n    setLogLevelToggles(prev => ({\n      ...prev,\n      [level]: !prev[level]\n    }));\n  }, []);\n\n  const clearLogs = useCallback(() => {\n    setLogs([]);\n    setGeneratedFiles([]);\n    setActiveTab('logs');\n    setLogLevelToggles({\n      info: true,\n      success: true,\n      warning: true,\n      error: true\n    });\n    setSearchText('');\n  }, []);\n\n  const copyAllLogs = useCallback(async () => {\n    const logText = logs.map(log => \n      `[${new Date(log.timestamp).toLocaleTimeString()}] ${log.message}`\n    ).join('\\n');\n    \n    try {\n      await navigator.clipboard.writeText(logText);\n    } catch (err) {\n      console.error('Failed to copy logs:', err);\n    }\n  }, [logs]);\n\n  const copyLogMessage = useCallback(async (message) => {\n    try {\n      await navigator.clipboard.writeText(message);\n    } catch (err) {\n      console.error('Failed to copy log message:', err);\n    }\n  }, []);\n\n  // Function to detect and create links for files mentioned in log messages\n  const parseLogMessage = useCallback((message, logId) => {\n    // More precise regex to find valid file paths - must be preceded by whitespace or start of line\n    // and must be a complete path (not part of a longer word)\n    const filePathRegex = /(?:^|\\s)((?:input\\/fsh\\/[a-zA-Z0-9_/-]*\\/)?[a-zA-Z0-9_.-]+\\.(?:fsh|yaml|yml|json))(?=\\s|$|[.,!])/g;\n    const matches = [...message.matchAll(filePathRegex)];\n    \n    if (matches.length === 0) {\n      return <span>{message}</span>;\n    }\n    \n    let lastIndex = 0;\n    const elements = [];\n    \n    matches.forEach((match, index) => {\n      const fullMatch = match[0];\n      const filePath = match[1];\n      const matchIndex = match.index;\n      \n      // Add text before the match\n      if (matchIndex > lastIndex) {\n        elements.push(\n          <span key={`${logId}-text-${index}`}>\n            {message.substring(lastIndex, matchIndex)}\n          </span>\n        );\n      }\n      \n      // Add the leading whitespace if present\n      const leadingWhitespace = fullMatch.substring(0, fullMatch.indexOf(filePath));\n      if (leadingWhitespace) {\n        elements.push(\n          <span key={`${logId}-ws-${index}`}>\n            {leadingWhitespace}\n          </span>\n        );\n      }\n      \n      // Determine link type based on file location and validate the file exists\n      const createFileLink = (path, text) => {\n        // Check if file exists in our known file lists to avoid creating invalid links\n        const isKnownRepoFile = fshFiles.some(f => f.path === path);\n        const isFromStaging = stagingFiles.some(f => f.path && (f.path === path || f.path.endsWith(`/${path.split('/').pop()}`)));\n        const isSushiConfig = path === 'sushi-config.yaml';\n        \n        // Only create links for files we know exist\n        if (!isKnownRepoFile && !isFromStaging && !isSushiConfig) {\n          // File not found in our known files, return as plain text\n          return (\n            <span key={`${logId}-text-${index}`} className=\"file-mention\">\n              {text}\n            </span>\n          );\n        }\n        \n        if (isFromStaging) {\n          // Link to staging ground\n          return (\n            <span key={`${logId}-link-${index}`} className=\"file-link staging-link\" title=\"File from Staging Ground\">\n              ğŸ“ {text}\n            </span>\n          );\n        } else if (path.startsWith('input/fsh/')) {\n          // Determine DAK component based on directory structure\n          const getDakComponentLink = (fshPath) => {\n            const pathParts = fshPath.split('/');\n            if (pathParts.length > 2) {\n              const subDir = pathParts[2];\n              switch (subDir) {\n                case 'profiles':\n                  return { component: 'Profiles', icon: 'ğŸ‘¤' };\n                case 'examples':\n                  return { component: 'Examples', icon: 'ğŸ“‹' };\n                case 'valuesets':\n                  return { component: 'ValueSets', icon: 'ğŸ“Š' };\n                case 'codesystems':\n                  return { component: 'CodeSystems', icon: 'ğŸ”¢' };\n                case 'extensions':\n                  return { component: 'Extensions', icon: 'ğŸ”§' };\n                default:\n                  return { component: 'FSH Files', icon: 'ğŸ“„' };\n              }\n            }\n            return { component: 'FSH Files', icon: 'ğŸ“„' };\n          };\n          \n          const dakInfo = getDakComponentLink(path);\n          return (\n            <span key={`${logId}-link-${index}`} className=\"file-link dak-link\" title={`View in DAK ${dakInfo.component}`}>\n              {dakInfo.icon} {text}\n            </span>\n          );\n        } else {\n          // Link to GitHub source for valid repository files\n          const githubUrl = `https://github.com/${owner}/${repoName}/blob/${selectedBranch}/${path}`;\n          return (\n            <a \n              key={`${logId}-link-${index}`}\n              href={githubUrl} \n              target=\"_blank\" \n              rel=\"noopener noreferrer\" \n              className=\"file-link github-link\"\n              title=\"Open in GitHub\"\n            >\n              ğŸ”— {text}\n            </a>\n          );\n        }\n      };\n      \n      elements.push(createFileLink(filePath, filePath));\n      lastIndex = matchIndex + fullMatch.length;\n    });\n    \n    // Add remaining text\n    if (lastIndex < message.length) {\n      elements.push(\n        <span key={`${logId}-text-end`}>\n          {message.substring(lastIndex)}\n        </span>\n      );\n    }\n    \n    return <span>{elements}</span>;\n  }, [owner, repoName, selectedBranch, stagingFiles, fshFiles]);\n\n  // Optimized filtered logs with useMemo to prevent unnecessary re-computations\n  const filteredLogs = useMemo(() => {\n    return logs.filter(log => {\n      // Filter by log level toggles\n      const isLevelEnabled = logLevelToggles[log.type];\n      \n      // Filter by search text\n      const matchesSearch = searchText === '' || \n        log.message.toLowerCase().includes(searchText.toLowerCase());\n      \n      return isLevelEnabled && matchesSearch;\n    });\n  }, [logs, logLevelToggles, searchText]);\n\n  // Separate component for log controls to prevent re-renders\n  const LogControls = React.memo(({ \n    logLevelToggles, \n    onToggleLogLevel, \n    searchText, \n    onSearchChange, \n    filteredCount, \n    totalCount \n  }) => {\n    const handleSearchChange = useCallback((e) => {\n      onSearchChange(e.target.value);\n    }, [onSearchChange]);\n\n    return (\n      <div className=\"log-controls\">\n        <div className=\"log-level-toggles\">\n          <label className=\"toggle-group-label\">Show levels:</label>\n          <div className=\"toggle-buttons\">\n            {[\n              { key: 'info', label: 'Info', icon: 'â„¹ï¸' },\n              { key: 'success', label: 'Success', icon: 'âœ…' },\n              { key: 'warning', label: 'Warning', icon: 'âš ï¸' },\n              { key: 'error', label: 'Error', icon: 'âŒ' }\n            ].map(({ key, label, icon }) => (\n              <button\n                key={key}\n                className={`log-toggle-btn ${logLevelToggles[key] ? 'active' : 'inactive'}`}\n                onClick={() => onToggleLogLevel(key)}\n                title={`Toggle ${label} messages`}\n              >\n                {icon} {label}\n              </button>\n            ))}\n          </div>\n        </div>\n        \n        <div className=\"log-search-group\">\n          <label htmlFor=\"log-search\">Search logs:</label>\n          <input\n            id=\"log-search\"\n            type=\"text\"\n            value={searchText}\n            onChange={handleSearchChange}\n            placeholder=\"Search log messages...\"\n            className=\"log-search-input\"\n          />\n        </div>\n        \n        <div className=\"log-stats\">\n          {searchText || Object.values(logLevelToggles).some(v => !v) ? (\n            <span>Showing {filteredCount} of {totalCount} logs</span>\n          ) : (\n            <span>{totalCount} logs</span>\n          )}\n        </div>\n      </div>\n    );\n  });\n\n  const handleSearchChange = useCallback((value) => {\n    setSearchText(value);\n  }, []);\n\n  const viewFile = useCallback((file) => {\n    setSelectedFile(file);\n    setShowFileViewer(true);\n  }, []);\n\n  const closeFileViewer = useCallback(() => {\n    setShowFileViewer(false);\n    setSelectedFile(null);\n  }, []);\n\n  const getResourceTypeIcon = (type) => {\n    switch (type) {\n      case 'StructureDefinition': return 'ğŸ—ï¸';\n      case 'Patient': return 'ğŸ‘¤';\n      case 'ValueSet': return 'ğŸ“Š';\n      case 'CodeSystem': return 'ğŸ”¢';\n      case 'Organization': return 'ğŸ¢';\n      case 'Practitioner': return 'ğŸ‘¨â€âš•ï¸';\n      case 'Observation': return 'ğŸ“‹';\n      default: return 'ğŸ“„';\n    }\n  };\n\n  const FileViewerModal = () => {\n    if (!selectedFile) return null;\n\n    return (\n      <div className=\"file-viewer-overlay\">\n        <div className=\"file-viewer-modal\">\n          <div className=\"file-viewer-header\">\n            <h3>\n              {getResourceTypeIcon(selectedFile.type)} {selectedFile.filename}\n            </h3>\n            <div className=\"file-viewer-actions\">\n              <button\n                onClick={() => navigator.clipboard.writeText(selectedFile.content)}\n                className=\"copy-file-btn\"\n                title=\"Copy file content to clipboard\"\n              >\n                ğŸ“‹ Copy\n              </button>\n              <button\n                onClick={closeFileViewer}\n                className=\"close-file-viewer-btn\"\n              >\n                âœ•\n              </button>\n            </div>\n          </div>\n          <div className=\"file-viewer-content\">\n            <SyntaxHighlighter\n              language=\"json\"\n              style={oneLight}\n              showLineNumbers={true}\n              wrapLines={true}\n              customStyle={{\n                fontSize: '14px',\n                lineHeight: '1.4',\n                maxHeight: '70vh',\n                overflow: 'auto'\n              }}\n            >\n              {selectedFile.content}\n            </SyntaxHighlighter>\n          </div>\n          <div className=\"file-viewer-footer\">\n            <span className=\"file-info\">\n              Resource Type: {selectedFile.type} | \n              Size: {(selectedFile.content.length / 1024).toFixed(1)} KB\n            </span>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const LogModal = () => (\n    <div className=\"sushi-modal-overlay\">\n      <div className=\"sushi-modal\">\n        <div className=\"sushi-modal-header\">\n          <h3>\n            ğŸ£ SUSHI Client-Side Execution \n            {includeStagingFiles && <span className=\"staging-badge\">+ Staging</span>}\n          </h3>\n          <div className=\"modal-actions\">\n            <button \n              onClick={copyAllLogs}\n              className=\"copy-all-btn\"\n              disabled={logs.length === 0}\n              title=\"Copy all logs to clipboard\"\n            >\n              ğŸ“‹ Copy All\n            </button>\n            <button \n              onClick={clearLogs}\n              className=\"clear-logs-btn\"\n              disabled={isRunning}\n            >\n              ğŸ—‘ï¸ Clear\n            </button>\n            <button \n              onClick={() => setShowModal(false)}\n              className=\"close-modal-btn\"\n            >\n              âœ•\n            </button>\n          </div>\n        </div>\n        \n        <LogControls\n          logLevelToggles={logLevelToggles}\n          onToggleLogLevel={toggleLogLevel}\n          searchText={searchText}\n          onSearchChange={handleSearchChange}\n          filteredCount={filteredLogs.length}\n          totalCount={logs.length}\n        />\n        \n        {generatedFiles.length > 0 && (\n          <div className=\"modal-section-toggle\">\n            <div className=\"toggle-options\">\n              <button \n                className={`toggle-btn ${activeTab === 'logs' ? 'active' : ''}`}\n                onClick={() => setActiveTab('logs')}\n              >\n                ğŸ“„ Logs & Messages\n              </button>\n              <button \n                className={`toggle-btn ${activeTab === 'files' ? 'active' : ''}`}\n                onClick={() => setActiveTab('files')}\n              >\n                ğŸ“¦ Generated Resources\n              </button>\n            </div>\n            <div className=\"section-info\">\n              {activeTab === 'logs' ? (\n                <span className=\"info-text\">{logs.length} log entries â€¢ Use toggles to filter by level</span>\n              ) : (\n                <span className=\"info-text\">{generatedFiles.length} FHIR resources generated</span>\n              )}\n            </div>\n          </div>\n        )}\n        \n        <div className=\"sushi-modal-content\">\n          {(activeTab === 'logs' || generatedFiles.length === 0) && (\n            <div className=\"log-container\">\n              {filteredLogs.map(log => (\n                <div key={log.id} className={`log-entry log-${log.type}`}>\n                  <span className=\"log-timestamp\">\n                    {new Date(log.timestamp).toLocaleTimeString()}\n                  </span>\n                  <span className=\"log-message\">\n                    {parseLogMessage(log.message, log.id)}\n                  </span>\n                  <button \n                    onClick={() => copyLogMessage(log.message)}\n                    className=\"copy-log-btn\"\n                    title=\"Copy this message to clipboard\"\n                  >\n                    ğŸ“‹\n                  </button>\n                </div>\n              ))}\n              \n              {isRunning && (\n                <div className=\"log-entry log-running\">\n                  <span className=\"log-timestamp\">\n                    {new Date().toLocaleTimeString()}\n                  </span>\n                  <span className=\"log-message\">\n                    <span className=\"spinner\">â³</span> Processing...\n                  </span>\n                  <div className=\"copy-log-btn-placeholder\"></div>\n                </div>\n              )}\n              \n              {filteredLogs.length === 0 && !isRunning && logs.length > 0 && (\n                <div className=\"log-placeholder\">\n                  No logs match the current filter criteria...\n                </div>\n              )}\n              \n              {logs.length === 0 && !isRunning && (\n                <div className=\"log-placeholder\">\n                  Logs will appear here during SUSHI execution...\n                </div>\n              )}\n              \n              {error && (\n                <div className=\"error-summary\">\n                  <h4>âŒ Execution Error</h4>\n                  <p>{error}</p>\n                </div>\n              )}\n            </div>\n          )}\n          \n          {activeTab === 'files' && generatedFiles.length > 0 && (\n            <div className=\"generated-files-container\">\n              <div className=\"generated-files-section\">\n                <h4>ğŸ“¦ Generated FHIR Resources ({generatedFiles.length})</h4>\n                <div className=\"generated-files-grid\">\n                  {generatedFiles.map((file, index) => (\n                    <div key={index} className=\"generated-file-card\">\n                      <div className=\"file-card-header\">\n                        <span className=\"file-icon\">{getResourceTypeIcon(file.type)}</span>\n                        <span className=\"file-name\">{file.filename}</span>\n                      </div>\n                      <div className=\"file-card-details\">\n                        <span className=\"file-type\">{file.type}</span>\n                        <span className=\"file-size\">\n                          {(file.content.length / 1024).toFixed(1)} KB\n                        </span>\n                      </div>\n                      <div className=\"file-card-actions\">\n                        <button\n                          onClick={() => viewFile(file)}\n                          className=\"view-file-btn\"\n                          title=\"View resource content\"\n                        >\n                          ğŸ‘ï¸ View\n                        </button>\n                        <button\n                          onClick={() => navigator.clipboard.writeText(file.content)}\n                          className=\"copy-file-btn\"\n                          title=\"Copy to clipboard\"\n                        >\n                          ğŸ“‹\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"fhir-viewer-suggestions\">\n                  <h5>ğŸ’¡ Enhanced FHIR Viewing Options</h5>\n                  <p>For better FHIR resource visualization, consider these viewers:</p>\n                  <ul>\n                    <li><strong>FHIR Tree Viewer:</strong> <code>npm install @types/fhir</code> + custom tree renderer</li>\n                    <li><strong>FHIR Path Viewer:</strong> <code>npm install fhirpath</code> for interactive querying</li>\n                    <li><strong>FHIR UI:</strong> <code>npm install @asymmetrik/fhir-kit-client</code> with UI components</li>\n                    <li><strong>HL7 FHIR Viewer:</strong> Integration with official HL7 FHIR viewers</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"sushi-modal-footer\">\n          <div className=\"execution-info\">\n            {isRunning ? (\n              <span className=\"status-running\">ğŸ”„ Running SUSHI...</span>\n            ) : logs.length > 0 ? (\n              <span className=\"status-complete\">âœ… Execution complete</span>\n            ) : (\n              <span className=\"status-ready\">ğŸ£ Ready to run SUSHI</span>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"sushi-runner-section\">\n      <div \n        className={`sushi-status-bar ${isExpanded ? 'expanded' : 'collapsed'}`}\n        onClick={() => setIsExpanded(!isExpanded)}\n      >\n        <div className=\"status-bar-header\">\n          <span className=\"status-icon\">ğŸ£</span>\n          <span className=\"status-title\">SUSHI (FHIR Shorthand)</span>\n          <span className=\"expand-icon\">{isExpanded ? 'â–¼' : 'â–¶'}</span>\n        </div>\n        \n        {!isExpanded && (\n          <div className=\"status-summary\">\n            Client-side FHIR Implementation Guide compilation\n          </div>\n        )}\n      </div>\n\n      {isExpanded && (\n        <div className=\"sushi-controls\">\n          <div className=\"sushi-description\">\n            <p>\n              Run SUSHI (FHIR Shorthand) compilation directly in your browser to generate \n              FHIR Implementation Guide resources from FSH files.\n            </p>\n          </div>\n\n          <div className=\"execution-options\">\n            <div className=\"execution-mode-selector\">\n              <h4>âš™ï¸ Execution Mode</h4>\n              <div className=\"mode-options\">\n                <label className=\"mode-option\">\n                  <input \n                    type=\"radio\" \n                    name=\"executionMode\" \n                    value=\"auto\" \n                    checked={executionMode === 'auto'}\n                    onChange={(e) => setExecutionMode(e.target.value)}\n                  />\n                  <span className=\"mode-label\">\n                    ğŸ¤– Auto (WebAssembly when available)\n                    {wasmSupported && wasmInitialized && <span className=\"wasm-badge\">WASM Ready</span>}\n                  </span>\n                </label>\n                \n                {wasmSupported && (\n                  <label className=\"mode-option\">\n                    <input \n                      type=\"radio\" \n                      name=\"executionMode\" \n                      value=\"wasm\" \n                      checked={executionMode === 'wasm'}\n                      onChange={(e) => setExecutionMode(e.target.value)}\n                      disabled={!wasmInitialized}\n                    />\n                    <span className=\"mode-label\">\n                      ğŸš€ WebAssembly (High Performance)\n                      {!wasmInitialized && <span className=\"loading-badge\">Initializing...</span>}\n                    </span>\n                  </label>\n                )}\n                \n                <label className=\"mode-option\">\n                  <input \n                    type=\"radio\" \n                    name=\"executionMode\" \n                    value=\"javascript\" \n                    checked={executionMode === 'javascript'}\n                    onChange={(e) => setExecutionMode(e.target.value)}\n                  />\n                  <span className=\"mode-label\">\n                    âš™ï¸ JavaScript (Fallback)\n                  </span>\n                </label>\n              </div>\n              \n              {!wasmSupported && (\n                <div className=\"wasm-not-supported\">\n                  <p>âš ï¸ WebAssembly is not supported in this browser. JavaScript fallback will be used.</p>\n                </div>\n              )}\n            </div>\n\n            <div className=\"option-group\">\n              <h4>ğŸ“‚ Repository Files Only</h4>\n              <p>\n                Compile using sushi-config.yaml and input/fsh files from the GitHub repository ({selectedBranch} branch).\n              </p>\n              <button\n                className=\"run-sushi-btn primary\"\n                onClick={() => handleRunSushi(false)}\n                disabled={isRunning}\n              >\n                {isRunning ? 'â³ Running...' : 'ğŸš€ Run SUSHI'}\n              </button>\n            </div>\n\n            {stagingFiles.length > 0 && (\n              <div className=\"option-group\">\n                <h4>ğŸ—ï¸ Repository + Staging Files</h4>\n                <p>\n                  Compile using repository files, with staging ground files ({stagingFiles.length} files) \n                  overriding any repository files with the same name.\n                </p>\n                <button\n                  className=\"run-sushi-btn secondary\"\n                  onClick={() => handleRunSushi(true)}\n                  disabled={isRunning}\n                >\n                  {isRunning ? 'â³ Running...' : 'ğŸš€ Run SUSHI + Staging'}\n                </button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"sushi-status\">\n            <div className=\"status-item\">\n              <span className=\"label\">Execution:</span>\n              <span className=\"value\">\n                {wasmSupported && wasmInitialized ? 'ğŸš€ WebAssembly Ready' : 'âš™ï¸ JavaScript'}\n              </span>\n            </div>\n            <div className=\"status-item\">\n              <span className=\"label\">Config:</span>\n              <span className=\"value\">{sushiConfig ? 'âœ… Found' : 'â“ Unknown'}</span>\n            </div>\n            <div className=\"status-item\">\n              <span className=\"label\">FSH Files:</span>\n              <span className=\"value\">{fshFiles.length} in repository</span>\n            </div>\n            {stagingFiles.length > 0 && (\n              <div className=\"status-item\">\n                <span className=\"label\">Staging:</span>\n                <span className=\"value\">{stagingFiles.filter(f => f.path && f.path.endsWith('.fsh')).length} FSH files</span>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {showModal && <LogModal />}\n      {showFileViewer && <FileViewerModal />}\n    </div>\n  );\n};\n\nexport default SushiRunner;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,WAAW,CAAEC,OAAO,CAAEC,SAAS,KAAQ,OAAO,CACxE,OAASC,KAAK,GAAI,CAAAC,iBAAiB,KAAQ,0BAA0B,CACrE,OAASC,QAAQ,KAAQ,gDAAgD,CACzE,MAAO,CAAAC,aAAa,KAAM,2BAA2B,CACrD,MAAO,CAAAC,gBAAgB,KAAM,8BAA8B,CAC3D,OAASC,UAAU,CAAEC,kBAAkB,KAAQ,qBAAqB,CACpE,MAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3B,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAAgE,KAAAC,iBAAA,IAA/D,CAAEC,UAAU,CAAEC,cAAc,CAAEC,OAAO,CAAEC,YAAY,CAAG,EAAG,CAAC,CAAAL,IAAA,CAC7E,KAAM,CAACM,UAAU,CAAEC,aAAa,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACwB,SAAS,CAAEC,YAAY,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAC0B,SAAS,CAAEC,YAAY,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAC4B,IAAI,CAAEC,OAAO,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAC8B,cAAc,CAAEC,iBAAiB,CAAC,CAAG/B,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACgC,cAAc,CAAEC,iBAAiB,CAAC,CAAGjC,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACkC,YAAY,CAAEC,eAAe,CAAC,CAAGnC,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACoC,SAAS,CAAEC,YAAY,CAAC,CAAGrC,QAAQ,CAAC,MAAM,CAAC,CAClD,KAAM,CAACsC,eAAe,CAAEC,kBAAkB,CAAC,CAAGvC,QAAQ,CAAC,CACrDwC,IAAI,CAAE,IAAI,CACVC,OAAO,CAAE,IAAI,CACbC,OAAO,CAAE,IAAI,CACbC,KAAK,CAAE,IACT,CAAC,CAAC,CACF,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAG7C,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC8C,WAAW,CAAEC,cAAc,CAAC,CAAG/C,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACgD,QAAQ,CAAEC,WAAW,CAAC,CAAGjD,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACkD,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGnD,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAAC2C,KAAK,CAAES,QAAQ,CAAC,CAAGpD,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACqD,aAAa,CAAEC,gBAAgB,CAAC,CAAGtD,QAAQ,CAAC,MAAM,CAAC,CAAE;AAC5D,KAAM,CAACuD,aAAa,CAAEC,gBAAgB,CAAC,CAAGxD,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACyD,eAAe,CAAEC,kBAAkB,CAAC,CAAG1D,QAAQ,CAAC,KAAK,CAAC,CAE7D,KAAM,CAAA2D,KAAK,CAAG,EAAA1C,iBAAA,CAAAC,UAAU,CAACyC,KAAK,UAAA1C,iBAAA,iBAAhBA,iBAAA,CAAkB2C,KAAK,GAAI1C,UAAU,CAAC2C,SAAS,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAC3E,KAAM,CAAAC,QAAQ,CAAG7C,UAAU,CAAC8C,IAAI,CAEhC,KAAM,CAAAC,MAAM,CAAGhE,WAAW,CAAC,SAACiE,OAAO,CAAoB,IAAlB,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,MAAM,CAChDvC,OAAO,CAAC0C,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CACxBC,EAAE,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAC9BV,OAAO,CACPC,IAAI,CACJU,SAAS,CAAE,GAAI,CAAAJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC,CACpC,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN;AACA3E,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4E,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,KAAM,CAAAC,SAAS,CAAGvE,UAAU,CAACwE,WAAW,CAAC,CAAC,CAC1CzB,gBAAgB,CAACwB,SAAS,CAAC,CAE3B,GAAIA,SAAS,CAAE,CACbf,MAAM,CAAC,iCAAiC,CAAE,SAAS,CAAC,CAEpD;AACA,GAAI,CACF,KAAM,CAAAzD,gBAAgB,CAAC0E,UAAU,CAAC,CAAC,CACnCxB,kBAAkB,CAAC,IAAI,CAAC,CACxBO,MAAM,CAAC,yCAAyC,CAAE,SAAS,CAAC,CAC9D,CAAE,MAAOkB,GAAG,CAAE,CACZlB,MAAM,CAAC,8DAA8DkB,GAAG,CAACjB,OAAO,EAAE,CAAE,SAAS,CAAC,CAChG,CACF,CAAC,IAAM,CACLD,MAAM,CAAC,yDAAyD,CAAE,SAAS,CAAC,CAC9E,CACF,CAAC,CAEDc,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,CAACd,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAmB,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACFnB,MAAM,CAAC,kCAAkC,CAAE,MAAM,CAAC,CAElD,GAAI,CAAAoB,MAAM,CAAG,IAAI,CACjB,GAAI,CACF,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAA/E,aAAa,CAACgF,cAAc,CACtD5B,KAAK,CACLI,QAAQ,CACR,mBAAmB,CACnB5C,cACF,CAAC,CACDkE,MAAM,CAAGC,aAAa,CACtBvC,cAAc,CAACsC,MAAM,CAAC,CACtBpB,MAAM,CAAC,2BAA2B,CAAE,SAAS,CAAC,CAChD,CAAE,MAAOkB,GAAG,CAAE,CACZlB,MAAM,CAAC,8CAA8C,CAAE,SAAS,CAAC,CACnE,CAEAA,MAAM,CAAC,gDAAgD,CAAE,MAAM,CAAC,CAEhE,KAAM,CAAAjB,QAAQ,CAAG,EAAE,CACnB,GAAI,CACF;AACA,KAAM,CAAAwC,aAAa,CAAG,cAAAA,CAAOC,OAAO,CAAgB,IAAd,CAAAC,KAAK,CAAAtB,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAC7C,KAAM,CAAAuB,QAAQ,CAAG,CAAC,CAAE;AACpB,GAAID,KAAK,CAAGC,QAAQ,CAAE,CACpB1B,MAAM,CAAC,0CAA0CwB,OAAO,EAAE,CAAE,SAAS,CAAC,CACtE,OACF,CAEA,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAArF,aAAa,CAACsF,oBAAoB,CACvDlC,KAAK,CACLI,QAAQ,CACR0B,OAAO,CACPtE,cACF,CAAC,CAED,IAAK,KAAM,CAAA2E,IAAI,GAAI,CAAAF,QAAQ,CAAE,CAC3B,GAAIE,IAAI,CAAC3B,IAAI,GAAK,MAAM,EAAI2B,IAAI,CAAC9B,IAAI,CAAC+B,QAAQ,CAAC,MAAM,CAAC,CAAE,CACtD,GAAI,CACF,KAAM,CAAAC,WAAW,CAAG,KAAM,CAAAzF,aAAa,CAACgF,cAAc,CACpD5B,KAAK,CACLI,QAAQ,CACR+B,IAAI,CAACG,IAAI,CACT9E,cACF,CAAC,CACD6B,QAAQ,CAACkD,IAAI,CAAC,CACZlC,IAAI,CAAE8B,IAAI,CAAC9B,IAAI,CACfiC,IAAI,CAAEH,IAAI,CAACG,IAAI,CACfE,OAAO,CAAEH,WACX,CAAC,CAAC,CACF/B,MAAM,CAAC,YAAY6B,IAAI,CAACG,IAAI,EAAE,CAAE,SAAS,CAAC,CAC5C,CAAE,MAAOd,GAAG,CAAE,CACZlB,MAAM,CAAC,qBAAqB6B,IAAI,CAACG,IAAI,KAAKd,GAAG,CAACjB,OAAO,EAAE,CAAE,OAAO,CAAC,CACnE,CACF,CAAC,IAAM,IAAI4B,IAAI,CAAC3B,IAAI,GAAK,KAAK,CAAE,CAC9B;AACAF,MAAM,CAAC,6BAA6B6B,IAAI,CAACG,IAAI,EAAE,CAAE,MAAM,CAAC,CACxD,KAAM,CAAAT,aAAa,CAACM,IAAI,CAACG,IAAI,CAAEP,KAAK,CAAG,CAAC,CAAC,CAC3C,CACF,CACF,CAAE,MAAOP,GAAG,CAAE,CACZlB,MAAM,CAAC,+BAA+BwB,OAAO,KAAKN,GAAG,CAACjB,OAAO,EAAE,CAAE,SAAS,CAAC,CAC7E,CACF,CAAC,CAED,KAAM,CAAAsB,aAAa,CAAC,WAAW,CAAC,CAClC,CAAE,MAAOL,GAAG,CAAE,CACZlB,MAAM,CAAC,2CAA2C,CAAE,SAAS,CAAC,CAChE,CAEAhB,WAAW,CAACD,QAAQ,CAAC,CACrBiB,MAAM,CAAC,YAAYjB,QAAQ,CAACqB,MAAM,0BAA0B,CAAE,MAAM,CAAC,CAErE,MAAO,CAAEgB,MAAM,CAAErC,QAAS,CAAC,CAC7B,CAAE,MAAOmC,GAAG,CAAE,CACZlB,MAAM,CAAC,sCAAsCkB,GAAG,CAACjB,OAAO,EAAE,CAAE,OAAO,CAAC,CACpE,KAAM,CAAAiB,GAAG,CACX,CACF,CAAC,CAED,KAAM,CAAAiB,qBAAqB,CAAIC,YAAY,EAAK,CAC9C;AACA,KAAM,CAAAC,eAAe,CAAG,CAAC,GAAGD,YAAY,CAAC,CAEzC;AACAhF,YAAY,CAACkF,OAAO,CAACC,WAAW,EAAI,CAClC,GAAIA,WAAW,CAACP,IAAI,EAAIO,WAAW,CAACP,IAAI,CAACF,QAAQ,CAAC,MAAM,CAAC,CAAE,CACzD,KAAM,CAAAU,QAAQ,CAAGD,WAAW,CAACP,IAAI,CAACnC,KAAK,CAAC,GAAG,CAAC,CAAC4C,GAAG,CAAC,CAAC,CAClD,KAAM,CAAAC,aAAa,CAAGL,eAAe,CAACM,SAAS,CAACC,CAAC,EAAIA,CAAC,CAAC7C,IAAI,GAAKyC,QAAQ,CAAC,CAEzE,GAAIE,aAAa,EAAI,CAAC,CAAE,CACtB;AACAL,eAAe,CAACK,aAAa,CAAC,CAAG,CAC/B,GAAGL,eAAe,CAACK,aAAa,CAAC,CACjCR,OAAO,CAAEK,WAAW,CAACL,OAAO,CAC5BW,aAAa,CAAE,IACjB,CAAC,CACD7C,MAAM,CAAC,iBAAiBwC,QAAQ,uBAAuB,CAAE,MAAM,CAAC,CAClE,CAAC,IAAM,CACL;AACAH,eAAe,CAACJ,IAAI,CAAC,CACnBlC,IAAI,CAAEyC,QAAQ,CACdR,IAAI,CAAEO,WAAW,CAACP,IAAI,CACtBE,OAAO,CAAEK,WAAW,CAACL,OAAO,CAC5BW,aAAa,CAAE,IACjB,CAAC,CAAC,CACF7C,MAAM,CAAC,YAAYwC,QAAQ,eAAe,CAAE,MAAM,CAAC,CACrD,CACF,CACF,CAAC,CAAC,CAEF,MAAO,CAAAH,eAAe,CACxB,CAAC,CAED,KAAM,CAAAS,iBAAiB,CAAG,KAAAA,CAAO1B,MAAM,CAAE2B,KAAK,GAAK,CACjD,GAAI,CACF;AACA,KAAM,CAAAC,OAAO,CAAG5D,aAAa,GAAK,MAAM,EACxBA,aAAa,GAAK,MAAM,EAAIE,aAAa,EAAIE,eAAgB,CAE7E,KAAM,CAAAyD,IAAI,CAAGD,OAAO,CAAG,aAAa,CAAG,YAAY,CACnDhD,MAAM,CAAC,gDAAgDiD,IAAI,KAAK,CAAE,MAAM,CAAC,CAEzE;AACAxG,kBAAkB,CAACyG,WAAW,CAAC,mBAAmB,CAAEF,OAAO,CAAG,MAAM,CAAG,IAAI,CAAC,CAE5E,GAAI,CAAAG,MAAM,CAEV,GAAIH,OAAO,CAAE,CACXhD,MAAM,CAAC,sCAAsC,CAAE,MAAM,CAAC,CACtDmD,MAAM,CAAG,KAAM,CAAAC,gBAAgB,CAAChC,MAAM,CAAE2B,KAAK,CAAC,CAChD,CAAC,IAAM,CACL/C,MAAM,CAAC,wCAAwC,CAAE,MAAM,CAAC,CACxDmD,MAAM,CAAG,KAAM,CAAAE,sBAAsB,CAACjC,MAAM,CAAE2B,KAAK,CAAC,CACtD,CAEA;AACA,KAAM,CAAAO,QAAQ,CAAG7G,kBAAkB,CAAC8G,SAAS,CAAC,mBAAmB,CAAEP,OAAO,CAAG,MAAM,CAAG,IAAI,CAAC,CAC3FhD,MAAM,CAAC,+BAA+BsD,QAAQ,CAACE,OAAO,CAAC,CAAC,CAAC,YAAYP,IAAI,EAAE,CAAE,SAAS,CAAC,CAEvF,MAAO,CAAAE,MAAM,CAEf,CAAE,MAAOjC,GAAG,CAAE,CACZlB,MAAM,CAAC,yBAAyBkB,GAAG,CAACjB,OAAO,EAAE,CAAE,OAAO,CAAC,CAEvD;AACA,GAAIb,aAAa,GAAK,MAAM,EAAIE,aAAa,CAAE,CAC7CU,MAAM,CAAC,sCAAsC,CAAE,MAAM,CAAC,CACtD,GAAI,CACF,MAAO,MAAM,CAAAqD,sBAAsB,CAACjC,MAAM,CAAE2B,KAAK,CAAC,CACpD,CAAE,MAAOU,WAAW,CAAE,CACpBzD,MAAM,CAAC,sCAAsCyD,WAAW,CAACxD,OAAO,EAAE,CAAE,OAAO,CAAC,CAC5E,KAAM,CAAAwD,WAAW,CACnB,CACF,CAEA,KAAM,CAAAvC,GAAG,CACX,CACF,CAAC,CAED,KAAM,CAAAkC,gBAAgB,CAAG,KAAAA,CAAOhC,MAAM,CAAE2B,KAAK,GAAK,CAChD,GAAI,CACF/C,MAAM,CAAC,mDAAmD,CAAE,MAAM,CAAC,CAEnE;AACA,KAAM,CAAAmD,MAAM,CAAG,KAAM,CAAA5G,gBAAgB,CAACmH,QAAQ,CAACtC,MAAM,CAAE2B,KAAK,CAAC,CAE7D,GAAII,MAAM,CAAC3E,OAAO,CAAE,CAClBwB,MAAM,CAAC,sCAAsC,CAAE,SAAS,CAAC,CACzDA,MAAM,CAAC,gBAAgBmD,MAAM,CAACJ,KAAK,CAAC3C,MAAM,iBAAiB,CAAE,SAAS,CAAC,CAEvE;AACA,KAAM,CAAAuD,kBAAkB,CAAGR,MAAM,CAACJ,KAAK,CAACa,GAAG,CAACC,IAAI,GAAK,CACnD3D,IAAI,CAAE2D,IAAI,CAACC,YAAY,CACvBC,QAAQ,CAAEF,IAAI,CAAC7B,IAAI,CACnBE,OAAO,CAAE2B,IAAI,CAAC3B,OAAO,CACrB3B,EAAE,CAAEsD,IAAI,CAAC7B,IAAI,CAACnC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAC3BiE,YAAY,CAAED,IAAI,CAACC,YACrB,CAAC,CAAC,CAAC,CAEHhG,iBAAiB,CAAC6F,kBAAkB,CAAC,CAErC;AACAR,MAAM,CAACa,QAAQ,CAAC1B,OAAO,CAAC7D,OAAO,EAAI,CACjCuB,MAAM,CAAC,MAAMvB,OAAO,EAAE,CAAE,SAAS,CAAC,CACpC,CAAC,CAAC,CAEF,MAAO,CACLD,OAAO,CAAE,IAAI,CACbyF,aAAa,CAAEd,MAAM,CAACJ,KAAK,CAAC3C,MAAM,CAClC4D,QAAQ,CAAEb,MAAM,CAACa,QAAQ,CACzBE,MAAM,CAAEf,MAAM,CAACe,MAAM,CACrBrG,cAAc,CAAE8F,kBAClB,CAAC,CACH,CAAC,IAAM,CACL;AACAR,MAAM,CAACe,MAAM,CAAC5B,OAAO,CAAC5D,KAAK,EAAI,CAC7BsB,MAAM,CAAC,KAAKtB,KAAK,EAAE,CAAE,OAAO,CAAC,CAC/B,CAAC,CAAC,CAEF,KAAM,IAAI,CAAAyF,KAAK,CAAC,4BAA4BhB,MAAM,CAACe,MAAM,CAACE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CACzE,CAEF,CAAE,MAAOlD,GAAG,CAAE,CACZlB,MAAM,CAAC,oCAAoCkB,GAAG,CAACjB,OAAO,EAAE,CAAE,OAAO,CAAC,CAClE,KAAM,CAAAiB,GAAG,CACX,CACF,CAAC,CAED,KAAM,CAAAmC,sBAAsB,CAAG,KAAAA,CAAOjC,MAAM,CAAE2B,KAAK,GAAK,CACtD,GAAI,CACF/C,MAAM,CAAC,2CAA2C,CAAE,MAAM,CAAC,CAE3DA,MAAM,CAAC,6EAA6E,CAAE,MAAM,CAAC,CAE7FA,MAAM,CAAC,uCAAuC,CAAE,MAAM,CAAC,CACvD,KAAM,CAAAqE,IAAI,CAAG,KAAM,OAAM,CAAC,SAAS,CAAC,CACpCrE,MAAM,CAAC,iCAAiC,CAAE,SAAS,CAAC,CAEpDA,MAAM,CAAC,gCAAgC,CAAE,MAAM,CAAC,CAEhD;AACA,GAAI,CAAAsE,SAAS,CAAG,IAAI,CACpB,GAAIlD,MAAM,CAAE,CACV,GAAI,CACFkD,SAAS,CAAG,MAAO,CAAAlD,MAAM,GAAK,QAAQ,CAAGiD,IAAI,CAACE,OAAO,CAACC,IAAI,CAACpD,MAAM,CAAC,CAAGA,MAAM,CAC3EpB,MAAM,CAAC,eAAesE,SAAS,CAACvE,IAAI,EAAI,SAAS,EAAE,CAAE,SAAS,CAAC,CAC/DC,MAAM,CAAC,eAAesE,SAAS,CAACG,OAAO,EAAI,SAAS,EAAE,CAAE,SAAS,CAAC,CAClEzE,MAAM,CAAC,oBAAoBsE,SAAS,CAACI,WAAW,EAAI,SAAS,EAAE,CAAE,SAAS,CAAC,CAC7E,CAAE,MAAOxD,GAAG,CAAE,CACZlB,MAAM,CAAC,8BAA8BkB,GAAG,CAACjB,OAAO,EAAE,CAAE,SAAS,CAAC,CAChE,CACF,CAAC,IAAM,CACL;AACAqE,SAAS,CAAG,CACVvE,IAAI,CAAE,sBAAsB,CAC5B0E,OAAO,CAAE,OAAO,CAChBC,WAAW,CAAE,OAAO,CACpBnE,EAAE,CAAE,sBAAsB,CAC1BoE,SAAS,CAAE,8CAA8C,CACzDC,MAAM,CAAE,OACV,CAAC,CACD5E,MAAM,CAAC,gCAAgC,CAAE,MAAM,CAAC,CAClD,CAEAA,MAAM,CAAC,gBAAgB+C,KAAK,CAAC3C,MAAM,eAAe,CAAE,MAAM,CAAC,CAE3D,KAAM,CAAAuD,kBAAkB,CAAG,EAAE,CAE7B;AACA,IAAK,KAAM,CAAAE,IAAI,GAAI,CAAAd,KAAK,CAAE,CACxB/C,MAAM,CAAC,iBAAiB6D,IAAI,CAAC9D,IAAI,KAAK,CAAE,MAAM,CAAC,CAE/C,KAAM,CAAAmC,OAAO,CAAG2B,IAAI,CAAC3B,OAAO,CAE5B;AACA,KAAM,CAAA2C,qBAAqB,CAAI3C,OAAO,EAAK,CACzC,KAAM,CAAA4C,WAAW,CAAG,CAClBC,QAAQ,CAAE,EAAE,CACZC,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,EAAE,CACbC,WAAW,CAAE,EAAE,CACfC,UAAU,CAAE,EACd,CAAC,CAED,KAAM,CAAAC,KAAK,CAAGlD,OAAO,CAACrC,KAAK,CAAC,IAAI,CAAC,CACjC,GAAI,CAAAwF,iBAAiB,CAAG,IAAI,CAC5B,GAAI,CAAAC,WAAW,CAAG,IAAI,CAEtB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGH,KAAK,CAAChF,MAAM,CAAEmF,CAAC,EAAE,CAAE,CACrC,KAAM,CAAAC,IAAI,CAAGJ,KAAK,CAACG,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC,CAE5B;AACA,GAAID,IAAI,CAACE,UAAU,CAAC,UAAU,CAAC,CAAE,CAC/BJ,WAAW,CAAG,UAAU,CACxBD,iBAAiB,CAAG,CAClBtF,IAAI,CAAEyF,IAAI,CAACG,SAAS,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CAC9BvF,IAAI,CAAE,SAAS,CACf0F,MAAM,CAAE,IAAI,CACZrF,EAAE,CAAE,IAAI,CACRsF,KAAK,CAAE,IAAI,CACXC,WAAW,CAAE,IAAI,CACjBC,KAAK,CAAE,EACT,CAAC,CACH,CAAC,IAAM,IAAIP,IAAI,CAACE,UAAU,CAAC,WAAW,CAAC,CAAE,CACvCJ,WAAW,CAAG,WAAW,CACzBD,iBAAiB,CAAG,CAClBtF,IAAI,CAAEyF,IAAI,CAACG,SAAS,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CAC9BvF,IAAI,CAAE,UAAU,CAChB8F,UAAU,CAAE,IAAI,CAChBC,KAAK,CAAE,IAAI,CACXJ,KAAK,CAAE,IAAI,CACXC,WAAW,CAAE,IAAI,CACjBC,KAAK,CAAE,EACT,CAAC,CACH,CAAC,IAAM,IAAIP,IAAI,CAACE,UAAU,CAAC,WAAW,CAAC,CAAE,CACvCJ,WAAW,CAAG,WAAW,CACzBD,iBAAiB,CAAG,CAClBtF,IAAI,CAAEyF,IAAI,CAACG,SAAS,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CAC9BvF,IAAI,CAAE,UAAU,CAChBK,EAAE,CAAE,IAAI,CACRsF,KAAK,CAAE,IAAI,CACXC,WAAW,CAAE,IAAI,CACjBC,KAAK,CAAE,EACT,CAAC,CACH,CAAC,IAAM,IAAIP,IAAI,CAACE,UAAU,CAAC,aAAa,CAAC,CAAE,CACzCJ,WAAW,CAAG,aAAa,CAC3BD,iBAAiB,CAAG,CAClBtF,IAAI,CAAEyF,IAAI,CAACG,SAAS,CAAC,EAAE,CAAC,CAACF,IAAI,CAAC,CAAC,CAC/BvF,IAAI,CAAE,YAAY,CAClBK,EAAE,CAAE,IAAI,CACRsF,KAAK,CAAE,IAAI,CACXC,WAAW,CAAE,IAAI,CACjBC,KAAK,CAAE,EACT,CAAC,CACH,CAAC,IAAM,IAAIP,IAAI,CAACE,UAAU,CAAC,YAAY,CAAC,CAAE,CACxCJ,WAAW,CAAG,YAAY,CAC1BD,iBAAiB,CAAG,CAClBtF,IAAI,CAAEyF,IAAI,CAACG,SAAS,CAAC,EAAE,CAAC,CAACF,IAAI,CAAC,CAAC,CAC/BvF,IAAI,CAAE,WAAW,CACjBK,EAAE,CAAE,IAAI,CACRsF,KAAK,CAAE,IAAI,CACXC,WAAW,CAAE,IAAI,CACjBC,KAAK,CAAE,EACT,CAAC,CACH,CAEA;AACA,GAAIV,iBAAiB,CAAE,CACrB,GAAIG,IAAI,CAACE,UAAU,CAAC,SAAS,CAAC,CAAE,CAC9BL,iBAAiB,CAACO,MAAM,CAAGJ,IAAI,CAACG,SAAS,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CACrD,CAAC,IAAM,IAAID,IAAI,CAACE,UAAU,CAAC,aAAa,CAAC,CAAE,CACzCL,iBAAiB,CAACW,UAAU,CAAGR,IAAI,CAACG,SAAS,CAAC,EAAE,CAAC,CAACF,IAAI,CAAC,CAAC,CAC1D,CAAC,IAAM,IAAID,IAAI,CAACE,UAAU,CAAC,QAAQ,CAAC,CAAE,CACpCL,iBAAiB,CAACY,KAAK,CAAGT,IAAI,CAACG,SAAS,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CACpD,CAAC,IAAM,IAAID,IAAI,CAACE,UAAU,CAAC,KAAK,CAAC,CAAE,CACjCL,iBAAiB,CAAC9E,EAAE,CAAGiF,IAAI,CAACG,SAAS,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CACjD,CAAC,IAAM,IAAID,IAAI,CAACE,UAAU,CAAC,QAAQ,CAAC,CAAE,CACpCL,iBAAiB,CAACQ,KAAK,CAAGL,IAAI,CAACG,SAAS,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CAACS,OAAO,CAAC,OAAO,CAAE,EAAE,CAAC,CACzE,CAAC,IAAM,IAAIV,IAAI,CAACE,UAAU,CAAC,cAAc,CAAC,CAAE,CAC1CL,iBAAiB,CAACS,WAAW,CAAGN,IAAI,CAACG,SAAS,CAAC,EAAE,CAAC,CAACF,IAAI,CAAC,CAAC,CAACS,OAAO,CAAC,OAAO,CAAE,EAAE,CAAC,CAChF,CAAC,IAAM,IAAIV,IAAI,CAACE,UAAU,CAAC,IAAI,CAAC,CAAE,CAChCL,iBAAiB,CAACU,KAAK,CAAC9D,IAAI,CAACuD,IAAI,CAACG,SAAS,CAAC,CAAC,CAAC,CAACF,IAAI,CAAC,CAAC,CAAC,CACxD,CAEA;AACA,GAAKD,IAAI,CAACW,QAAQ,CAAC,GAAG,CAAC,EAAI,CAACX,IAAI,CAACE,UAAU,CAAC,IAAI,CAAC,EAC5C,CAACF,IAAI,CAACE,UAAU,CAAC,SAAS,CAAC,EAAI,CAACF,IAAI,CAACE,UAAU,CAAC,aAAa,CAAC,EAC9D,CAACF,IAAI,CAACE,UAAU,CAAC,QAAQ,CAAC,EAAI,CAACF,IAAI,CAACE,UAAU,CAAC,KAAK,CAAC,EACrD,CAACF,IAAI,CAACE,UAAU,CAAC,QAAQ,CAAC,EAAI,CAACF,IAAI,CAACE,UAAU,CAAC,cAAc,CAAC,EAC/DH,CAAC,GAAKH,KAAK,CAAChF,MAAM,CAAG,CAAC,CAAE,CAE1B,GAAIiF,iBAAiB,EAAIC,WAAW,EAAID,iBAAiB,CAACtF,IAAI,CAAE,CAC9D+E,WAAW,CAACQ,WAAW,CAAC,CAACrD,IAAI,CAACoD,iBAAiB,CAAC,CAClD,CACAA,iBAAiB,CAAG,IAAI,CACxBC,WAAW,CAAG,IAAI,CAClBC,CAAC,EAAE,CAAE;AACP,CACF,CACF,CAEA,MAAO,CAAAT,WAAW,CACpB,CAAC,CAED,KAAM,CAAAA,WAAW,CAAGD,qBAAqB,CAAC3C,OAAO,CAAC,CAElD;AACA4C,WAAW,CAACC,QAAQ,CAACzC,OAAO,CAACnF,OAAO,EAAI,CACtC,KAAM,CAAAiJ,SAAS,CAAGjJ,OAAO,CAACoD,EAAE,EAAIpD,OAAO,CAAC4C,IAAI,CAACsG,WAAW,CAAC,CAAC,CAACH,OAAO,CAAC,MAAM,CAAE,GAAG,CAAC,CAC/E,KAAM,CAAAI,mBAAmB,CAAG,CAC1BxC,YAAY,CAAE,qBAAqB,CACnCvD,EAAE,CAAE6F,SAAS,CACbG,GAAG,CAAE,GAAGjC,SAAS,CAACK,SAAS,wBAAwByB,SAAS,EAAE,CAC9DrG,IAAI,CAAE5C,OAAO,CAAC4C,IAAI,CAClB8F,KAAK,CAAE1I,OAAO,CAAC0I,KAAK,EAAI1I,OAAO,CAAC4C,IAAI,CACpC6E,MAAM,CAAE,OAAO,CACfF,WAAW,CAAEJ,SAAS,CAACI,WAAW,EAAI,OAAO,CAC7C8B,IAAI,CAAE,UAAU,CAChBC,QAAQ,CAAE,KAAK,CACfvG,IAAI,CAAE/C,OAAO,CAACyI,MAAM,GAAK,SAAS,CAAG,SAAS,CACvCzI,OAAO,CAACyI,MAAM,GAAK,aAAa,CAAG,aAAa,CAChDzI,OAAO,CAACyI,MAAM,EAAI,gBAAgB,CACzCc,cAAc,CAAE,2CAA2CvJ,OAAO,CAACyI,MAAM,EAAI,gBAAgB,EAAE,CAC/Fe,UAAU,CAAE,YAAY,CACxBb,WAAW,CAAE3I,OAAO,CAAC2I,WAAW,EAAI,eAAe3I,OAAO,CAAC4C,IAAI,EACjE,CAAC,CAED,GAAI5C,OAAO,CAAC4I,KAAK,CAAC3F,MAAM,CAAG,CAAC,CAAE,CAC5BkG,mBAAmB,CAACM,YAAY,CAAG,CACjCC,OAAO,CAAE1J,OAAO,CAAC4I,KAAK,CAACnC,GAAG,CAAC,CAACkD,IAAI,CAAEC,KAAK,IAAM,CAC3CxG,EAAE,CAAE,GAAG+F,mBAAmB,CAACpG,IAAI,IAAI4G,IAAI,CAACjH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CACvDmC,IAAI,CAAE,GAAGsE,mBAAmB,CAACpG,IAAI,IAAI4G,IAAI,CAACjH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CACzDmH,KAAK,CAAE,SAASF,IAAI,EACtB,CAAC,CAAC,CACJ,CAAC,CACH,CAEAnD,kBAAkB,CAAC1B,IAAI,CAAC,CACtB/B,IAAI,CAAE,qBAAqB,CAC3B6D,QAAQ,CAAE,uBAAuBqC,SAAS,OAAO,CACjDlE,OAAO,CAAE+E,IAAI,CAACC,SAAS,CAACZ,mBAAmB,CAAE,IAAI,CAAE,CAAC,CAAC,CACrD/F,EAAE,CAAE6F,SAAS,CACbrG,IAAI,CAAE5C,OAAO,CAAC4C,IAAI,CAClB8F,KAAK,CAAES,mBAAmB,CAACT,KAAK,CAChCU,GAAG,CAAED,mBAAmB,CAACC,GAC3B,CAAC,CAAC,CAEFvG,MAAM,CAAC,uCAAuC7C,OAAO,CAAC4C,IAAI,EAAE,CAAE,SAAS,CAAC,CAC1E,CAAC,CAAC,CAEF+E,WAAW,CAACE,SAAS,CAAC1C,OAAO,CAAC6E,QAAQ,EAAI,CACxC,KAAM,CAAAC,UAAU,CAAGD,QAAQ,CAACpH,IAAI,CAACsG,WAAW,CAAC,CAAC,CAACH,OAAO,CAAC,MAAM,CAAE,GAAG,CAAC,CACnE,KAAM,CAAApC,YAAY,CAAGqD,QAAQ,CAACnB,UAAU,GAAK,SAAS,CAAG,SAAS,CAC/CmB,QAAQ,CAACnB,UAAU,GAAK,aAAa,CAAG,aAAa,CACrD,SAAS,CAAE;AAE9B,KAAM,CAAAqB,YAAY,CAAG,CACnBvD,YAAY,CAAEA,YAAY,CAC1BvD,EAAE,CAAE6G,UAAU,CACdE,IAAI,CAAE,CACJnK,OAAO,CAAEgK,QAAQ,CAACnB,UAAU,CAAG,CAAC,GAAG1B,SAAS,CAACK,SAAS,wBAAwBwC,QAAQ,CAACnB,UAAU,EAAE,CAAC,CAAG3F,SACzG,CACF,CAAC,CAED;AACA,GAAIyD,YAAY,GAAK,SAAS,CAAE,CAC9BuD,YAAY,CAACtH,IAAI,CAAG,CAAC,CACnBwH,MAAM,CAAEJ,QAAQ,CAACpH,IAAI,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC4C,GAAG,CAAC,CAAC,CACtC+E,KAAK,CAAEL,QAAQ,CAACpH,IAAI,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC4H,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAC7C,CAAC,CAAC,CACJ,CAEA9D,kBAAkB,CAAC1B,IAAI,CAAC,CACtB/B,IAAI,CAAE4D,YAAY,CAClBC,QAAQ,CAAE,GAAGqD,UAAU,OAAO,CAC9BlF,OAAO,CAAE+E,IAAI,CAACC,SAAS,CAACG,YAAY,CAAE,IAAI,CAAE,CAAC,CAAC,CAC9C9G,EAAE,CAAE6G,UAAU,CACdtD,YAAY,CAAEA,YAChB,CAAC,CAAC,CAEF9D,MAAM,CAAC,kBAAkB8D,YAAY,cAAcqD,QAAQ,CAACpH,IAAI,EAAE,CAAE,SAAS,CAAC,CAChF,CAAC,CAAC,CAEF+E,WAAW,CAACG,SAAS,CAAC3C,OAAO,CAACoF,EAAE,EAAI,CAClC,KAAM,CAAAC,IAAI,CAAGD,EAAE,CAACnH,EAAE,EAAImH,EAAE,CAAC3H,IAAI,CAACsG,WAAW,CAAC,CAAC,CAACH,OAAO,CAAC,MAAM,CAAE,GAAG,CAAC,CAChE,KAAM,CAAA0B,QAAQ,CAAG,CACf9D,YAAY,CAAE,UAAU,CACxBvD,EAAE,CAAEoH,IAAI,CACRpB,GAAG,CAAE,GAAGjC,SAAS,CAACK,SAAS,aAAagD,IAAI,EAAE,CAC9C5H,IAAI,CAAE2H,EAAE,CAAC3H,IAAI,CACb8F,KAAK,CAAE6B,EAAE,CAAC7B,KAAK,EAAI6B,EAAE,CAAC3H,IAAI,CAC1B6E,MAAM,CAAE,OAAO,CACfkB,WAAW,CAAE4B,EAAE,CAAC5B,WAAW,EAAI,gBAAgB4B,EAAE,CAAC3H,IAAI,EAAE,CACxD8H,OAAO,CAAE,CACPC,OAAO,CAAE,CAAC,CACRC,MAAM,CAAE,0BAA0B,CAClCC,OAAO,CAAE,CACP,CAAEC,IAAI,CAAE,UAAU,CAAEC,OAAO,CAAE,gBAAiB,CAAC,CAC/C,CAAED,IAAI,CAAE,UAAU,CAAEC,OAAO,CAAE,gBAAiB,CAAC,CAEnD,CAAC,CACH,CACF,CAAC,CAEDvE,kBAAkB,CAAC1B,IAAI,CAAC,CACtB/B,IAAI,CAAE,UAAU,CAChB6D,QAAQ,CAAE,YAAY4D,IAAI,OAAO,CACjCzF,OAAO,CAAE+E,IAAI,CAACC,SAAS,CAACU,QAAQ,CAAE,IAAI,CAAE,CAAC,CAAC,CAC1CrH,EAAE,CAAEoH,IAAI,CACR5H,IAAI,CAAE2H,EAAE,CAAC3H,IAAI,CACb8F,KAAK,CAAE+B,QAAQ,CAAC/B,KAAK,CACrBU,GAAG,CAAEqB,QAAQ,CAACrB,GAChB,CAAC,CAAC,CAEFvG,MAAM,CAAC,4BAA4B0H,EAAE,CAAC3H,IAAI,EAAE,CAAE,SAAS,CAAC,CAC1D,CAAC,CAAC,CAEF+E,WAAW,CAACI,WAAW,CAAC5C,OAAO,CAAC6F,EAAE,EAAI,CACpC,KAAM,CAAAC,IAAI,CAAGD,EAAE,CAAC5H,EAAE,EAAI4H,EAAE,CAACpI,IAAI,CAACsG,WAAW,CAAC,CAAC,CAACH,OAAO,CAAC,MAAM,CAAE,GAAG,CAAC,CAChE,KAAM,CAAAmC,UAAU,CAAG,CACjBvE,YAAY,CAAE,YAAY,CAC1BvD,EAAE,CAAE6H,IAAI,CACR7B,GAAG,CAAE,GAAGjC,SAAS,CAACK,SAAS,eAAeyD,IAAI,EAAE,CAChDrI,IAAI,CAAEoI,EAAE,CAACpI,IAAI,CACb8F,KAAK,CAAEsC,EAAE,CAACtC,KAAK,EAAIsC,EAAE,CAACpI,IAAI,CAC1B6E,MAAM,CAAE,OAAO,CACf1C,OAAO,CAAE,UAAU,CACnB4D,WAAW,CAAEqC,EAAE,CAACrC,WAAW,EAAI,kBAAkBqC,EAAE,CAACpI,IAAI,EAAE,CAC1DiI,OAAO,CAAE,CACP,CAAEC,IAAI,CAAE,UAAU,CAAEC,OAAO,CAAE,WAAY,CAAC,CAC1C,CAAED,IAAI,CAAE,UAAU,CAAEC,OAAO,CAAE,WAAY,CAAC,CAE9C,CAAC,CAEDvE,kBAAkB,CAAC1B,IAAI,CAAC,CACtB/B,IAAI,CAAE,YAAY,CAClB6D,QAAQ,CAAE,cAAcqE,IAAI,OAAO,CACnClG,OAAO,CAAE+E,IAAI,CAACC,SAAS,CAACmB,UAAU,CAAE,IAAI,CAAE,CAAC,CAAC,CAC5C9H,EAAE,CAAE6H,IAAI,CACRrI,IAAI,CAAEoI,EAAE,CAACpI,IAAI,CACb8F,KAAK,CAAEwC,UAAU,CAACxC,KAAK,CACvBU,GAAG,CAAE8B,UAAU,CAAC9B,GAClB,CAAC,CAAC,CAEFvG,MAAM,CAAC,8BAA8BmI,EAAE,CAACpI,IAAI,EAAE,CAAE,SAAS,CAAC,CAC5D,CAAC,CAAC,CAEF,GAAI8D,IAAI,CAAChB,aAAa,CAAE,CACtB7C,MAAM,CAAC,gCAAgC,CAAE,MAAM,CAAC,CAClD,CACF,CAEA;AACAlC,iBAAiB,CAAC6F,kBAAkB,CAAC,CAErC3D,MAAM,CAAC,2CAA2C,CAAE,SAAS,CAAC,CAC9DA,MAAM,CAAC,gBAAgB2D,kBAAkB,CAACvD,MAAM,uBAAuB,CAAE,SAAS,CAAC,CAEnF;AACA,KAAM,CAAAkI,YAAY,CAAGvF,KAAK,CAACwF,MAAM,CAAC3F,CAAC,EAAIA,CAAC,CAACC,aAAa,CAAC,CAACzC,MAAM,CAC9D,GAAIkI,YAAY,CAAG,CAAC,CAAE,CACpBtI,MAAM,CAAC,OAAOsI,YAAY,uCAAuC,CAAE,MAAM,CAAC,CAC5E,CAEA;AACA,GAAIvF,KAAK,CAAC3C,MAAM,GAAK,CAAC,CAAE,CACtBJ,MAAM,CAAC,kCAAkC,CAAE,SAAS,CAAC,CACvD,CAEA,GAAI,CAACoB,MAAM,CAAE,CACXpB,MAAM,CAAC,4DAA4D,CAAE,SAAS,CAAC,CACjF,CAEA,MAAO,CACLxB,OAAO,CAAE,IAAI,CACbyF,aAAa,CAAEN,kBAAkB,CAACvD,MAAM,CACxC4D,QAAQ,CAAE,EAAE,CACZE,MAAM,CAAE,EAAE,CACVrG,cAAc,CAAE8F,kBAClB,CAAC,CAEH,CAAE,MAAOzC,GAAG,CAAE,CACZlB,MAAM,CAAC,yBAAyBkB,GAAG,CAACjB,OAAO,EAAE,CAAE,OAAO,CAAC,CAEvD;AACA,GAAIiB,GAAG,CAACsH,KAAK,CAAE,CACbC,OAAO,CAAC/J,KAAK,CAAC,0BAA0B,CAAEwC,GAAG,CAACsH,KAAK,CAAC,CACtD,CAEA,KAAM,CAAAtH,GAAG,CACX,CACF,CAAC,CAED,KAAM,CAAAwH,cAAc,CAAG,cAAAA,CAAA,CAAoC,IAA7B,CAAAC,gBAAgB,CAAAxI,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CACpD3C,YAAY,CAAC,IAAI,CAAC,CAClBE,YAAY,CAAC,IAAI,CAAC,CAClBE,OAAO,CAAC,EAAE,CAAC,CACXE,iBAAiB,CAAC,EAAE,CAAC,CACrBM,YAAY,CAAC,MAAM,CAAC,CACpBe,QAAQ,CAAC,IAAI,CAAC,CACdD,sBAAsB,CAACyJ,gBAAgB,CAAC,CAExC,GAAI,CACF3I,MAAM,CAAC,4CAA4C,CAAE,MAAM,CAAC,CAE5D,GAAI2I,gBAAgB,EAAIvL,YAAY,CAACgD,MAAM,CAAG,CAAC,CAAE,CAC/CJ,MAAM,CAAC,iBAAiB5C,YAAY,CAACgD,MAAM,gBAAgB,CAAE,MAAM,CAAC,CACtE,CAEA;AACA,KAAM,CAAEgB,MAAM,CAAErC,QAAQ,CAAE6J,SAAU,CAAC,CAAG,KAAM,CAAAzH,oBAAoB,CAAC,CAAC,CAEpE;AACA,KAAM,CAAA0H,UAAU,CAAGF,gBAAgB,CACjCxG,qBAAqB,CAACyG,SAAS,CAAC,CAChCA,SAAS,CAEX,GAAID,gBAAgB,CAAE,CACpB3I,MAAM,CAAC,wBAAwB6I,UAAU,CAACzI,MAAM,YAAY,CAAE,MAAM,CAAC,CACvE,CAEA;AACA,KAAM,CAAA0C,iBAAiB,CAAC1B,MAAM,CAAEyH,UAAU,CAAC,CAE3C7I,MAAM,CAAC,4CAA4C,CAAE,SAAS,CAAC,CAEjE,CAAE,MAAOkB,GAAG,CAAE,CACZ/B,QAAQ,CAAC+B,GAAG,CAACjB,OAAO,CAAC,CACrBD,MAAM,CAAC,wBAAwBkB,GAAG,CAACjB,OAAO,EAAE,CAAE,OAAO,CAAC,CACxD,CAAC,OAAS,CACRzC,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAsL,cAAc,CAAG9M,WAAW,CAAE+M,KAAK,EAAK,CAC5CzK,kBAAkB,CAACgC,IAAI,GAAK,CAC1B,GAAGA,IAAI,CACP,CAACyI,KAAK,EAAG,CAACzI,IAAI,CAACyI,KAAK,CACtB,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,SAAS,CAAGhN,WAAW,CAAC,IAAM,CAClC4B,OAAO,CAAC,EAAE,CAAC,CACXE,iBAAiB,CAAC,EAAE,CAAC,CACrBM,YAAY,CAAC,MAAM,CAAC,CACpBE,kBAAkB,CAAC,CACjBC,IAAI,CAAE,IAAI,CACVC,OAAO,CAAE,IAAI,CACbC,OAAO,CAAE,IAAI,CACbC,KAAK,CAAE,IACT,CAAC,CAAC,CACFE,aAAa,CAAC,EAAE,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAqK,WAAW,CAAGjN,WAAW,CAAC,SAAY,CAC1C,KAAM,CAAAkN,OAAO,CAAGvL,IAAI,CAACiG,GAAG,CAACuF,GAAG,EAC1B,IAAI,GAAI,CAAA3I,IAAI,CAAC2I,GAAG,CAACvI,SAAS,CAAC,CAACwI,kBAAkB,CAAC,CAAC,KAAKD,GAAG,CAAClJ,OAAO,EAClE,CAAC,CAACmE,IAAI,CAAC,IAAI,CAAC,CAEZ,GAAI,CACF,KAAM,CAAAiF,SAAS,CAACC,SAAS,CAACC,SAAS,CAACL,OAAO,CAAC,CAC9C,CAAE,MAAOhI,GAAG,CAAE,CACZuH,OAAO,CAAC/J,KAAK,CAAC,sBAAsB,CAAEwC,GAAG,CAAC,CAC5C,CACF,CAAC,CAAE,CAACvD,IAAI,CAAC,CAAC,CAEV,KAAM,CAAA6L,cAAc,CAAGxN,WAAW,CAAC,KAAO,CAAAiE,OAAO,EAAK,CACpD,GAAI,CACF,KAAM,CAAAoJ,SAAS,CAACC,SAAS,CAACC,SAAS,CAACtJ,OAAO,CAAC,CAC9C,CAAE,MAAOiB,GAAG,CAAE,CACZuH,OAAO,CAAC/J,KAAK,CAAC,6BAA6B,CAAEwC,GAAG,CAAC,CACnD,CACF,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAuI,eAAe,CAAGzN,WAAW,CAAC,CAACiE,OAAO,CAAEyJ,KAAK,GAAK,CACtD;AACA;AACA,KAAM,CAAAC,aAAa,CAAG,mGAAmG,CACzH,KAAM,CAAAC,OAAO,CAAG,CAAC,GAAG3J,OAAO,CAAC4J,QAAQ,CAACF,aAAa,CAAC,CAAC,CAEpD,GAAIC,OAAO,CAACxJ,MAAM,GAAK,CAAC,CAAE,CACxB,mBAAOzD,IAAA,SAAAmN,QAAA,CAAO7J,OAAO,CAAO,CAAC,CAC/B,CAEA,GAAI,CAAA8J,SAAS,CAAG,CAAC,CACjB,KAAM,CAAAC,QAAQ,CAAG,EAAE,CAEnBJ,OAAO,CAACtH,OAAO,CAAC,CAAC2H,KAAK,CAAElD,KAAK,GAAK,CAChC,KAAM,CAAAmD,SAAS,CAAGD,KAAK,CAAC,CAAC,CAAC,CAC1B,KAAM,CAAAE,QAAQ,CAAGF,KAAK,CAAC,CAAC,CAAC,CACzB,KAAM,CAAAG,UAAU,CAAGH,KAAK,CAAClD,KAAK,CAE9B;AACA,GAAIqD,UAAU,CAAGL,SAAS,CAAE,CAC1BC,QAAQ,CAAC/H,IAAI,cACXtF,IAAA,SAAAmN,QAAA,CACG7J,OAAO,CAAC0F,SAAS,CAACoE,SAAS,CAAEK,UAAU,CAAC,EADhC,GAAGV,KAAK,SAAS3C,KAAK,EAE3B,CACR,CAAC,CACH,CAEA;AACA,KAAM,CAAAsD,iBAAiB,CAAGH,SAAS,CAACvE,SAAS,CAAC,CAAC,CAAEuE,SAAS,CAACI,OAAO,CAACH,QAAQ,CAAC,CAAC,CAC7E,GAAIE,iBAAiB,CAAE,CACrBL,QAAQ,CAAC/H,IAAI,cACXtF,IAAA,SAAAmN,QAAA,CACGO,iBAAiB,EADT,GAAGX,KAAK,OAAO3C,KAAK,EAEzB,CACR,CAAC,CACH,CAEA;AACA,KAAM,CAAAwD,cAAc,CAAGA,CAACvI,IAAI,CAAEwI,IAAI,GAAK,CACrC;AACA,KAAM,CAAAC,eAAe,CAAG1L,QAAQ,CAAC2L,IAAI,CAAC9H,CAAC,EAAIA,CAAC,CAACZ,IAAI,GAAKA,IAAI,CAAC,CAC3D,KAAM,CAAAa,aAAa,CAAGzF,YAAY,CAACsN,IAAI,CAAC9H,CAAC,EAAIA,CAAC,CAACZ,IAAI,GAAKY,CAAC,CAACZ,IAAI,GAAKA,IAAI,EAAIY,CAAC,CAACZ,IAAI,CAACF,QAAQ,CAAC,IAAIE,IAAI,CAACnC,KAAK,CAAC,GAAG,CAAC,CAAC4C,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACzH,KAAM,CAAAkI,aAAa,CAAG3I,IAAI,GAAK,mBAAmB,CAElD;AACA,GAAI,CAACyI,eAAe,EAAI,CAAC5H,aAAa,EAAI,CAAC8H,aAAa,CAAE,CACxD;AACA,mBACEhO,IAAA,SAAqCiO,SAAS,CAAC,cAAc,CAAAd,QAAA,CAC1DU,IAAI,EADI,GAAGd,KAAK,SAAS3C,KAAK,EAE3B,CAAC,CAEX,CAEA,GAAIlE,aAAa,CAAE,CACjB;AACA,mBACEhG,KAAA,SAAqC+N,SAAS,CAAC,wBAAwB,CAAC/E,KAAK,CAAC,0BAA0B,CAAAiE,QAAA,EAAC,eACpG,CAACU,IAAI,GADC,GAAGd,KAAK,SAAS3C,KAAK,EAE3B,CAAC,CAEX,CAAC,IAAM,IAAI/E,IAAI,CAAC0D,UAAU,CAAC,YAAY,CAAC,CAAE,CACxC;AACA,KAAM,CAAAmF,mBAAmB,CAAIC,OAAO,EAAK,CACvC,KAAM,CAAAC,SAAS,CAAGD,OAAO,CAACjL,KAAK,CAAC,GAAG,CAAC,CACpC,GAAIkL,SAAS,CAAC3K,MAAM,CAAG,CAAC,CAAE,CACxB,KAAM,CAAA4K,MAAM,CAAGD,SAAS,CAAC,CAAC,CAAC,CAC3B,OAAQC,MAAM,EACZ,IAAK,UAAU,CACb,MAAO,CAAEC,SAAS,CAAE,UAAU,CAAEC,IAAI,CAAE,IAAK,CAAC,CAC9C,IAAK,UAAU,CACb,MAAO,CAAED,SAAS,CAAE,UAAU,CAAEC,IAAI,CAAE,IAAK,CAAC,CAC9C,IAAK,WAAW,CACd,MAAO,CAAED,SAAS,CAAE,WAAW,CAAEC,IAAI,CAAE,IAAK,CAAC,CAC/C,IAAK,aAAa,CAChB,MAAO,CAAED,SAAS,CAAE,aAAa,CAAEC,IAAI,CAAE,IAAK,CAAC,CACjD,IAAK,YAAY,CACf,MAAO,CAAED,SAAS,CAAE,YAAY,CAAEC,IAAI,CAAE,IAAK,CAAC,CAChD,QACE,MAAO,CAAED,SAAS,CAAE,WAAW,CAAEC,IAAI,CAAE,IAAK,CAAC,CACjD,CACF,CACA,MAAO,CAAED,SAAS,CAAE,WAAW,CAAEC,IAAI,CAAE,IAAK,CAAC,CAC/C,CAAC,CAED,KAAM,CAAAC,OAAO,CAAGN,mBAAmB,CAAC7I,IAAI,CAAC,CACzC,mBACEnF,KAAA,SAAqC+N,SAAS,CAAC,oBAAoB,CAAC/E,KAAK,CAAE,eAAesF,OAAO,CAACF,SAAS,EAAG,CAAAnB,QAAA,EAC3GqB,OAAO,CAACD,IAAI,CAAC,GAAC,CAACV,IAAI,GADX,GAAGd,KAAK,SAAS3C,KAAK,EAE3B,CAAC,CAEX,CAAC,IAAM,CACL;AACA,KAAM,CAAAqE,SAAS,CAAG,sBAAsB1L,KAAK,IAAII,QAAQ,SAAS5C,cAAc,IAAI8E,IAAI,EAAE,CAC1F,mBACEnF,KAAA,MAEEwO,IAAI,CAAED,SAAU,CAChBE,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBX,SAAS,CAAC,uBAAuB,CACjC/E,KAAK,CAAC,gBAAgB,CAAAiE,QAAA,EACvB,eACI,CAACU,IAAI,GAPH,GAAGd,KAAK,SAAS3C,KAAK,EAQ1B,CAAC,CAER,CACF,CAAC,CAEDiD,QAAQ,CAAC/H,IAAI,CAACsI,cAAc,CAACJ,QAAQ,CAAEA,QAAQ,CAAC,CAAC,CACjDJ,SAAS,CAAGK,UAAU,CAAGF,SAAS,CAAC9J,MAAM,CAC3C,CAAC,CAAC,CAEF;AACA,GAAI2J,SAAS,CAAG9J,OAAO,CAACG,MAAM,CAAE,CAC9B4J,QAAQ,CAAC/H,IAAI,cACXtF,IAAA,SAAAmN,QAAA,CACG7J,OAAO,CAAC0F,SAAS,CAACoE,SAAS,CAAC,EADpB,GAAGL,KAAK,WAEb,CACR,CAAC,CACH,CAEA,mBAAO/M,IAAA,SAAAmN,QAAA,CAAOE,QAAQ,CAAO,CAAC,CAChC,CAAC,CAAE,CAACtK,KAAK,CAAEI,QAAQ,CAAE5C,cAAc,CAAEE,YAAY,CAAE2B,QAAQ,CAAC,CAAC,CAE7D;AACA,KAAM,CAAAyM,YAAY,CAAGvP,OAAO,CAAC,IAAM,CACjC,MAAO,CAAA0B,IAAI,CAAC4K,MAAM,CAACY,GAAG,EAAI,CACxB;AACA,KAAM,CAAAsC,cAAc,CAAGpN,eAAe,CAAC8K,GAAG,CAACjJ,IAAI,CAAC,CAEhD;AACA,KAAM,CAAAwL,aAAa,CAAG/M,UAAU,GAAK,EAAE,EACrCwK,GAAG,CAAClJ,OAAO,CAACoG,WAAW,CAAC,CAAC,CAACF,QAAQ,CAACxH,UAAU,CAAC0H,WAAW,CAAC,CAAC,CAAC,CAE9D,MAAO,CAAAoF,cAAc,EAAIC,aAAa,CACxC,CAAC,CAAC,CACJ,CAAC,CAAE,CAAC/N,IAAI,CAAEU,eAAe,CAAEM,UAAU,CAAC,CAAC,CAEvC;AACA,KAAM,CAAAgN,WAAW,cAAG7P,KAAK,CAAC8P,IAAI,CAACC,KAAA,EAOzB,IAP0B,CAC9BxN,eAAe,CACfyN,gBAAgB,CAChBnN,UAAU,CACVoN,cAAc,CACdC,aAAa,CACbC,UACF,CAAC,CAAAJ,KAAA,CACC,KAAM,CAAAK,kBAAkB,CAAGlQ,WAAW,CAAEmQ,CAAC,EAAK,CAC5CJ,cAAc,CAACI,CAAC,CAACb,MAAM,CAACc,KAAK,CAAC,CAChC,CAAC,CAAE,CAACL,cAAc,CAAC,CAAC,CAEpB,mBACElP,KAAA,QAAK+N,SAAS,CAAC,cAAc,CAAAd,QAAA,eAC3BjN,KAAA,QAAK+N,SAAS,CAAC,mBAAmB,CAAAd,QAAA,eAChCnN,IAAA,UAAOiO,SAAS,CAAC,oBAAoB,CAAAd,QAAA,CAAC,cAAY,CAAO,CAAC,cAC1DnN,IAAA,QAAKiO,SAAS,CAAC,gBAAgB,CAAAd,QAAA,CAC5B,CACC,CAAEuC,GAAG,CAAE,MAAM,CAAEC,KAAK,CAAE,MAAM,CAAEpB,IAAI,CAAE,IAAK,CAAC,CAC1C,CAAEmB,GAAG,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAS,CAAEpB,IAAI,CAAE,GAAI,CAAC,CAC/C,CAAEmB,GAAG,CAAE,SAAS,CAAEC,KAAK,CAAE,SAAS,CAAEpB,IAAI,CAAE,IAAK,CAAC,CAChD,CAAEmB,GAAG,CAAE,OAAO,CAAEC,KAAK,CAAE,OAAO,CAAEpB,IAAI,CAAE,GAAI,CAAC,CAC5C,CAACtH,GAAG,CAAC2I,KAAA,MAAC,CAAEF,GAAG,CAAEC,KAAK,CAAEpB,IAAK,CAAC,CAAAqB,KAAA,oBACzB1P,KAAA,WAEE+N,SAAS,CAAE,kBAAkBvM,eAAe,CAACgO,GAAG,CAAC,CAAG,QAAQ,CAAG,UAAU,EAAG,CAC5EG,OAAO,CAAEA,CAAA,GAAMV,gBAAgB,CAACO,GAAG,CAAE,CACrCxG,KAAK,CAAE,UAAUyG,KAAK,WAAY,CAAAxC,QAAA,EAEjCoB,IAAI,CAAC,GAAC,CAACoB,KAAK,GALRD,GAMC,CAAC,EACV,CAAC,CACC,CAAC,EACH,CAAC,cAENxP,KAAA,QAAK+N,SAAS,CAAC,kBAAkB,CAAAd,QAAA,eAC/BnN,IAAA,UAAO8P,OAAO,CAAC,YAAY,CAAA3C,QAAA,CAAC,cAAY,CAAO,CAAC,cAChDnN,IAAA,UACE4D,EAAE,CAAC,YAAY,CACfL,IAAI,CAAC,MAAM,CACXkM,KAAK,CAAEzN,UAAW,CAClB+N,QAAQ,CAAER,kBAAmB,CAC7BS,WAAW,CAAC,wBAAwB,CACpC/B,SAAS,CAAC,kBAAkB,CAC7B,CAAC,EACC,CAAC,cAENjO,IAAA,QAAKiO,SAAS,CAAC,WAAW,CAAAd,QAAA,CACvBnL,UAAU,EAAIiO,MAAM,CAACC,MAAM,CAACxO,eAAe,CAAC,CAACqM,IAAI,CAACoC,CAAC,EAAI,CAACA,CAAC,CAAC,cACzDjQ,KAAA,SAAAiN,QAAA,EAAM,UAAQ,CAACkC,aAAa,CAAC,MAAI,CAACC,UAAU,CAAC,OAAK,EAAM,CAAC,cAEzDpP,KAAA,SAAAiN,QAAA,EAAOmC,UAAU,CAAC,OAAK,EAAM,CAC9B,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAAC,CAEF,KAAM,CAAAC,kBAAkB,CAAGlQ,WAAW,CAAEoQ,KAAK,EAAK,CAChDxN,aAAa,CAACwN,KAAK,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAW,QAAQ,CAAG/Q,WAAW,CAAE6H,IAAI,EAAK,CACrC3F,eAAe,CAAC2F,IAAI,CAAC,CACrB7F,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAgP,eAAe,CAAGhR,WAAW,CAAC,IAAM,CACxCgC,iBAAiB,CAAC,KAAK,CAAC,CACxBE,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAA+O,mBAAmB,CAAI/M,IAAI,EAAK,CACpC,OAAQA,IAAI,EACV,IAAK,qBAAqB,CAAE,MAAO,KAAK,CACxC,IAAK,SAAS,CAAE,MAAO,IAAI,CAC3B,IAAK,UAAU,CAAE,MAAO,IAAI,CAC5B,IAAK,YAAY,CAAE,MAAO,IAAI,CAC9B,IAAK,cAAc,CAAE,MAAO,IAAI,CAChC,IAAK,cAAc,CAAE,MAAO,OAAO,CACnC,IAAK,aAAa,CAAE,MAAO,IAAI,CAC/B,QAAS,MAAO,IAAI,CACtB,CACF,CAAC,CAED,KAAM,CAAAgN,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI,CAACjP,YAAY,CAAE,MAAO,KAAI,CAE9B,mBACEtB,IAAA,QAAKiO,SAAS,CAAC,qBAAqB,CAAAd,QAAA,cAClCjN,KAAA,QAAK+N,SAAS,CAAC,mBAAmB,CAAAd,QAAA,eAChCjN,KAAA,QAAK+N,SAAS,CAAC,oBAAoB,CAAAd,QAAA,eACjCjN,KAAA,OAAAiN,QAAA,EACGmD,mBAAmB,CAAChP,YAAY,CAACiC,IAAI,CAAC,CAAC,GAAC,CAACjC,YAAY,CAAC8F,QAAQ,EAC7D,CAAC,cACLlH,KAAA,QAAK+N,SAAS,CAAC,qBAAqB,CAAAd,QAAA,eAClCnN,IAAA,WACE6P,OAAO,CAAEA,CAAA,GAAMnD,SAAS,CAACC,SAAS,CAACC,SAAS,CAACtL,YAAY,CAACiE,OAAO,CAAE,CACnE0I,SAAS,CAAC,eAAe,CACzB/E,KAAK,CAAC,gCAAgC,CAAAiE,QAAA,CACvC,mBAED,CAAQ,CAAC,cACTnN,IAAA,WACE6P,OAAO,CAAEQ,eAAgB,CACzBpC,SAAS,CAAC,uBAAuB,CAAAd,QAAA,CAClC,QAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cACNnN,IAAA,QAAKiO,SAAS,CAAC,qBAAqB,CAAAd,QAAA,cAClCnN,IAAA,CAACP,iBAAiB,EAChB+Q,QAAQ,CAAC,MAAM,CACfC,KAAK,CAAE/Q,QAAS,CAChBgR,eAAe,CAAE,IAAK,CACtBC,SAAS,CAAE,IAAK,CAChBC,WAAW,CAAE,CACXC,QAAQ,CAAE,MAAM,CAChBC,UAAU,CAAE,KAAK,CACjBC,SAAS,CAAE,MAAM,CACjBC,QAAQ,CAAE,MACZ,CAAE,CAAA7D,QAAA,CAED7L,YAAY,CAACiE,OAAO,CACJ,CAAC,CACjB,CAAC,cACNvF,IAAA,QAAKiO,SAAS,CAAC,oBAAoB,CAAAd,QAAA,cACjCjN,KAAA,SAAM+N,SAAS,CAAC,WAAW,CAAAd,QAAA,EAAC,iBACX,CAAC7L,YAAY,CAACiC,IAAI,CAAC,WAC5B,CAAC,CAACjC,YAAY,CAACiE,OAAO,CAAC9B,MAAM,CAAG,IAAI,EAAEoD,OAAO,CAAC,CAAC,CAAC,CAAC,KACzD,EAAM,CAAC,CACJ,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,KAAM,CAAAoK,QAAQ,CAAGA,CAAA,gBACfjR,IAAA,QAAKiO,SAAS,CAAC,qBAAqB,CAAAd,QAAA,cAClCjN,KAAA,QAAK+N,SAAS,CAAC,aAAa,CAAAd,QAAA,eAC1BjN,KAAA,QAAK+N,SAAS,CAAC,oBAAoB,CAAAd,QAAA,eACjCjN,KAAA,OAAAiN,QAAA,EAAI,0CAEF,CAAC7K,mBAAmB,eAAItC,IAAA,SAAMiO,SAAS,CAAC,eAAe,CAAAd,QAAA,CAAC,WAAS,CAAM,CAAC,EACtE,CAAC,cACLjN,KAAA,QAAK+N,SAAS,CAAC,eAAe,CAAAd,QAAA,eAC5BnN,IAAA,WACE6P,OAAO,CAAEvD,WAAY,CACrB2B,SAAS,CAAC,cAAc,CACxBiD,QAAQ,CAAElQ,IAAI,CAACyC,MAAM,GAAK,CAAE,CAC5ByF,KAAK,CAAC,4BAA4B,CAAAiE,QAAA,CACnC,uBAED,CAAQ,CAAC,cACTnN,IAAA,WACE6P,OAAO,CAAExD,SAAU,CACnB4B,SAAS,CAAC,gBAAgB,CAC1BiD,QAAQ,CAAEtQ,SAAU,CAAAuM,QAAA,CACrB,0BAED,CAAQ,CAAC,cACTnN,IAAA,WACE6P,OAAO,CAAEA,CAAA,GAAM9O,YAAY,CAAC,KAAK,CAAE,CACnCkN,SAAS,CAAC,iBAAiB,CAAAd,QAAA,CAC5B,QAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAENnN,IAAA,CAACgP,WAAW,EACVtN,eAAe,CAAEA,eAAgB,CACjCyN,gBAAgB,CAAEhD,cAAe,CACjCnK,UAAU,CAAEA,UAAW,CACvBoN,cAAc,CAAEG,kBAAmB,CACnCF,aAAa,CAAER,YAAY,CAACpL,MAAO,CACnC6L,UAAU,CAAEtO,IAAI,CAACyC,MAAO,CACzB,CAAC,CAEDvC,cAAc,CAACuC,MAAM,CAAG,CAAC,eACxBvD,KAAA,QAAK+N,SAAS,CAAC,sBAAsB,CAAAd,QAAA,eACnCjN,KAAA,QAAK+N,SAAS,CAAC,gBAAgB,CAAAd,QAAA,eAC7BnN,IAAA,WACEiO,SAAS,CAAE,cAAczM,SAAS,GAAK,MAAM,CAAG,QAAQ,CAAG,EAAE,EAAG,CAChEqO,OAAO,CAAEA,CAAA,GAAMpO,YAAY,CAAC,MAAM,CAAE,CAAA0L,QAAA,CACrC,8BAED,CAAQ,CAAC,cACTnN,IAAA,WACEiO,SAAS,CAAE,cAAczM,SAAS,GAAK,OAAO,CAAG,QAAQ,CAAG,EAAE,EAAG,CACjEqO,OAAO,CAAEA,CAAA,GAAMpO,YAAY,CAAC,OAAO,CAAE,CAAA0L,QAAA,CACtC,kCAED,CAAQ,CAAC,EACN,CAAC,cACNnN,IAAA,QAAKiO,SAAS,CAAC,cAAc,CAAAd,QAAA,CAC1B3L,SAAS,GAAK,MAAM,cACnBtB,KAAA,SAAM+N,SAAS,CAAC,WAAW,CAAAd,QAAA,EAAEnM,IAAI,CAACyC,MAAM,CAAC,oDAA6C,EAAM,CAAC,cAE7FvD,KAAA,SAAM+N,SAAS,CAAC,WAAW,CAAAd,QAAA,EAAEjM,cAAc,CAACuC,MAAM,CAAC,2BAAyB,EAAM,CACnF,CACE,CAAC,EACH,CACN,cAEDvD,KAAA,QAAK+N,SAAS,CAAC,qBAAqB,CAAAd,QAAA,EACjC,CAAC3L,SAAS,GAAK,MAAM,EAAIN,cAAc,CAACuC,MAAM,GAAK,CAAC,gBACnDvD,KAAA,QAAK+N,SAAS,CAAC,eAAe,CAAAd,QAAA,EAC3B0B,YAAY,CAAC5H,GAAG,CAACuF,GAAG,eACnBtM,KAAA,QAAkB+N,SAAS,CAAE,iBAAiBzB,GAAG,CAACjJ,IAAI,EAAG,CAAA4J,QAAA,eACvDnN,IAAA,SAAMiO,SAAS,CAAC,eAAe,CAAAd,QAAA,CAC5B,GAAI,CAAAtJ,IAAI,CAAC2I,GAAG,CAACvI,SAAS,CAAC,CAACwI,kBAAkB,CAAC,CAAC,CACzC,CAAC,cACPzM,IAAA,SAAMiO,SAAS,CAAC,aAAa,CAAAd,QAAA,CAC1BL,eAAe,CAACN,GAAG,CAAClJ,OAAO,CAAEkJ,GAAG,CAAC5I,EAAE,CAAC,CACjC,CAAC,cACP5D,IAAA,WACE6P,OAAO,CAAEA,CAAA,GAAMhD,cAAc,CAACL,GAAG,CAAClJ,OAAO,CAAE,CAC3C2K,SAAS,CAAC,cAAc,CACxB/E,KAAK,CAAC,gCAAgC,CAAAiE,QAAA,CACvC,cAED,CAAQ,CAAC,GAbDX,GAAG,CAAC5I,EAcT,CACN,CAAC,CAEDhD,SAAS,eACRV,KAAA,QAAK+N,SAAS,CAAC,uBAAuB,CAAAd,QAAA,eACpCnN,IAAA,SAAMiO,SAAS,CAAC,eAAe,CAAAd,QAAA,CAC5B,GAAI,CAAAtJ,IAAI,CAAC,CAAC,CAAC4I,kBAAkB,CAAC,CAAC,CAC5B,CAAC,cACPvM,KAAA,SAAM+N,SAAS,CAAC,aAAa,CAAAd,QAAA,eAC3BnN,IAAA,SAAMiO,SAAS,CAAC,SAAS,CAAAd,QAAA,CAAC,QAAC,CAAM,CAAC,iBACpC,EAAM,CAAC,cACPnN,IAAA,QAAKiO,SAAS,CAAC,0BAA0B,CAAM,CAAC,EAC7C,CACN,CAEAY,YAAY,CAACpL,MAAM,GAAK,CAAC,EAAI,CAAC7C,SAAS,EAAII,IAAI,CAACyC,MAAM,CAAG,CAAC,eACzDzD,IAAA,QAAKiO,SAAS,CAAC,iBAAiB,CAAAd,QAAA,CAAC,8CAEjC,CAAK,CACN,CAEAnM,IAAI,CAACyC,MAAM,GAAK,CAAC,EAAI,CAAC7C,SAAS,eAC9BZ,IAAA,QAAKiO,SAAS,CAAC,iBAAiB,CAAAd,QAAA,CAAC,iDAEjC,CAAK,CACN,CAEApL,KAAK,eACJ7B,KAAA,QAAK+N,SAAS,CAAC,eAAe,CAAAd,QAAA,eAC5BnN,IAAA,OAAAmN,QAAA,CAAI,wBAAiB,CAAI,CAAC,cAC1BnN,IAAA,MAAAmN,QAAA,CAAIpL,KAAK,CAAI,CAAC,EACX,CACN,EACE,CACN,CAEAP,SAAS,GAAK,OAAO,EAAIN,cAAc,CAACuC,MAAM,CAAG,CAAC,eACjDzD,IAAA,QAAKiO,SAAS,CAAC,2BAA2B,CAAAd,QAAA,cACxCjN,KAAA,QAAK+N,SAAS,CAAC,yBAAyB,CAAAd,QAAA,eACtCjN,KAAA,OAAAiN,QAAA,EAAI,yCAA6B,CAACjM,cAAc,CAACuC,MAAM,CAAC,GAAC,EAAI,CAAC,cAC9DzD,IAAA,QAAKiO,SAAS,CAAC,sBAAsB,CAAAd,QAAA,CAClCjM,cAAc,CAAC+F,GAAG,CAAC,CAACC,IAAI,CAAEkD,KAAK,gBAC9BlK,KAAA,QAAiB+N,SAAS,CAAC,qBAAqB,CAAAd,QAAA,eAC9CjN,KAAA,QAAK+N,SAAS,CAAC,kBAAkB,CAAAd,QAAA,eAC/BnN,IAAA,SAAMiO,SAAS,CAAC,WAAW,CAAAd,QAAA,CAAEmD,mBAAmB,CAACpJ,IAAI,CAAC3D,IAAI,CAAC,CAAO,CAAC,cACnEvD,IAAA,SAAMiO,SAAS,CAAC,WAAW,CAAAd,QAAA,CAAEjG,IAAI,CAACE,QAAQ,CAAO,CAAC,EAC/C,CAAC,cACNlH,KAAA,QAAK+N,SAAS,CAAC,mBAAmB,CAAAd,QAAA,eAChCnN,IAAA,SAAMiO,SAAS,CAAC,WAAW,CAAAd,QAAA,CAAEjG,IAAI,CAAC3D,IAAI,CAAO,CAAC,cAC9CrD,KAAA,SAAM+N,SAAS,CAAC,WAAW,CAAAd,QAAA,EACxB,CAACjG,IAAI,CAAC3B,OAAO,CAAC9B,MAAM,CAAG,IAAI,EAAEoD,OAAO,CAAC,CAAC,CAAC,CAAC,KAC3C,EAAM,CAAC,EACJ,CAAC,cACN3G,KAAA,QAAK+N,SAAS,CAAC,mBAAmB,CAAAd,QAAA,eAChCnN,IAAA,WACE6P,OAAO,CAAEA,CAAA,GAAMO,QAAQ,CAAClJ,IAAI,CAAE,CAC9B+G,SAAS,CAAC,eAAe,CACzB/E,KAAK,CAAC,uBAAuB,CAAAiE,QAAA,CAC9B,yBAED,CAAQ,CAAC,cACTnN,IAAA,WACE6P,OAAO,CAAEA,CAAA,GAAMnD,SAAS,CAACC,SAAS,CAACC,SAAS,CAAC1F,IAAI,CAAC3B,OAAO,CAAE,CAC3D0I,SAAS,CAAC,eAAe,CACzB/E,KAAK,CAAC,mBAAmB,CAAAiE,QAAA,CAC1B,cAED,CAAQ,CAAC,EACN,CAAC,GA1BE/C,KA2BL,CACN,CAAC,CACC,CAAC,cACNlK,KAAA,QAAK+N,SAAS,CAAC,yBAAyB,CAAAd,QAAA,eACtCnN,IAAA,OAAAmN,QAAA,CAAI,4CAAgC,CAAI,CAAC,cACzCnN,IAAA,MAAAmN,QAAA,CAAG,iEAA+D,CAAG,CAAC,cACtEjN,KAAA,OAAAiN,QAAA,eACEjN,KAAA,OAAAiN,QAAA,eAAInN,IAAA,WAAAmN,QAAA,CAAQ,mBAAiB,CAAQ,CAAC,IAAC,cAAAnN,IAAA,SAAAmN,QAAA,CAAM,yBAAuB,CAAM,CAAC,0BAAuB,EAAI,CAAC,cACvGjN,KAAA,OAAAiN,QAAA,eAAInN,IAAA,WAAAmN,QAAA,CAAQ,mBAAiB,CAAQ,CAAC,IAAC,cAAAnN,IAAA,SAAAmN,QAAA,CAAM,sBAAoB,CAAM,CAAC,4BAAyB,EAAI,CAAC,cACtGjN,KAAA,OAAAiN,QAAA,eAAInN,IAAA,WAAAmN,QAAA,CAAQ,UAAQ,CAAQ,CAAC,IAAC,cAAAnN,IAAA,SAAAmN,QAAA,CAAM,yCAAuC,CAAM,CAAC,sBAAmB,EAAI,CAAC,cAC1GjN,KAAA,OAAAiN,QAAA,eAAInN,IAAA,WAAAmN,QAAA,CAAQ,kBAAgB,CAAQ,CAAC,8CAA2C,EAAI,CAAC,EACnF,CAAC,EACF,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,cAENnN,IAAA,QAAKiO,SAAS,CAAC,oBAAoB,CAAAd,QAAA,cACjCnN,IAAA,QAAKiO,SAAS,CAAC,gBAAgB,CAAAd,QAAA,CAC5BvM,SAAS,cACRZ,IAAA,SAAMiO,SAAS,CAAC,gBAAgB,CAAAd,QAAA,CAAC,+BAAmB,CAAM,CAAC,CACzDnM,IAAI,CAACyC,MAAM,CAAG,CAAC,cACjBzD,IAAA,SAAMiO,SAAS,CAAC,iBAAiB,CAAAd,QAAA,CAAC,2BAAoB,CAAM,CAAC,cAE7DnN,IAAA,SAAMiO,SAAS,CAAC,cAAc,CAAAd,QAAA,CAAC,iCAAqB,CAAM,CAC3D,CACE,CAAC,CACH,CAAC,EACH,CAAC,CACH,CACN,CAED,mBACEjN,KAAA,QAAK+N,SAAS,CAAC,sBAAsB,CAAAd,QAAA,eACnCjN,KAAA,QACE+N,SAAS,CAAE,oBAAoBvN,UAAU,CAAG,UAAU,CAAG,WAAW,EAAG,CACvEmP,OAAO,CAAEA,CAAA,GAAMlP,aAAa,CAAC,CAACD,UAAU,CAAE,CAAAyM,QAAA,eAE1CjN,KAAA,QAAK+N,SAAS,CAAC,mBAAmB,CAAAd,QAAA,eAChCnN,IAAA,SAAMiO,SAAS,CAAC,aAAa,CAAAd,QAAA,CAAC,cAAE,CAAM,CAAC,cACvCnN,IAAA,SAAMiO,SAAS,CAAC,cAAc,CAAAd,QAAA,CAAC,wBAAsB,CAAM,CAAC,cAC5DnN,IAAA,SAAMiO,SAAS,CAAC,aAAa,CAAAd,QAAA,CAAEzM,UAAU,CAAG,GAAG,CAAG,GAAG,CAAO,CAAC,EAC1D,CAAC,CAEL,CAACA,UAAU,eACVV,IAAA,QAAKiO,SAAS,CAAC,gBAAgB,CAAAd,QAAA,CAAC,mDAEhC,CAAK,CACN,EACE,CAAC,CAELzM,UAAU,eACTR,KAAA,QAAK+N,SAAS,CAAC,gBAAgB,CAAAd,QAAA,eAC7BnN,IAAA,QAAKiO,SAAS,CAAC,mBAAmB,CAAAd,QAAA,cAChCnN,IAAA,MAAAmN,QAAA,CAAG,iIAGH,CAAG,CAAC,CACD,CAAC,cAENjN,KAAA,QAAK+N,SAAS,CAAC,mBAAmB,CAAAd,QAAA,eAChCjN,KAAA,QAAK+N,SAAS,CAAC,yBAAyB,CAAAd,QAAA,eACtCnN,IAAA,OAAAmN,QAAA,CAAI,6BAAiB,CAAI,CAAC,cAC1BjN,KAAA,QAAK+N,SAAS,CAAC,cAAc,CAAAd,QAAA,eAC3BjN,KAAA,UAAO+N,SAAS,CAAC,aAAa,CAAAd,QAAA,eAC5BnN,IAAA,UACEuD,IAAI,CAAC,OAAO,CACZH,IAAI,CAAC,eAAe,CACpBqM,KAAK,CAAC,MAAM,CACZ0B,OAAO,CAAE1O,aAAa,GAAK,MAAO,CAClCsN,QAAQ,CAAGP,CAAC,EAAK9M,gBAAgB,CAAC8M,CAAC,CAACb,MAAM,CAACc,KAAK,CAAE,CACnD,CAAC,cACFvP,KAAA,SAAM+N,SAAS,CAAC,YAAY,CAAAd,QAAA,EAAC,gDAE3B,CAACxK,aAAa,EAAIE,eAAe,eAAI7C,IAAA,SAAMiO,SAAS,CAAC,YAAY,CAAAd,QAAA,CAAC,YAAU,CAAM,CAAC,EAC/E,CAAC,EACF,CAAC,CAEPxK,aAAa,eACZzC,KAAA,UAAO+N,SAAS,CAAC,aAAa,CAAAd,QAAA,eAC5BnN,IAAA,UACEuD,IAAI,CAAC,OAAO,CACZH,IAAI,CAAC,eAAe,CACpBqM,KAAK,CAAC,MAAM,CACZ0B,OAAO,CAAE1O,aAAa,GAAK,MAAO,CAClCsN,QAAQ,CAAGP,CAAC,EAAK9M,gBAAgB,CAAC8M,CAAC,CAACb,MAAM,CAACc,KAAK,CAAE,CAClDyB,QAAQ,CAAE,CAACrO,eAAgB,CAC5B,CAAC,cACF3C,KAAA,SAAM+N,SAAS,CAAC,YAAY,CAAAd,QAAA,EAAC,6CAE3B,CAAC,CAACtK,eAAe,eAAI7C,IAAA,SAAMiO,SAAS,CAAC,eAAe,CAAAd,QAAA,CAAC,iBAAe,CAAM,CAAC,EACvE,CAAC,EACF,CACR,cAEDjN,KAAA,UAAO+N,SAAS,CAAC,aAAa,CAAAd,QAAA,eAC5BnN,IAAA,UACEuD,IAAI,CAAC,OAAO,CACZH,IAAI,CAAC,eAAe,CACpBqM,KAAK,CAAC,YAAY,CAClB0B,OAAO,CAAE1O,aAAa,GAAK,YAAa,CACxCsN,QAAQ,CAAGP,CAAC,EAAK9M,gBAAgB,CAAC8M,CAAC,CAACb,MAAM,CAACc,KAAK,CAAE,CACnD,CAAC,cACFzP,IAAA,SAAMiO,SAAS,CAAC,YAAY,CAAAd,QAAA,CAAC,oCAE7B,CAAM,CAAC,EACF,CAAC,EACL,CAAC,CAEL,CAACxK,aAAa,eACb3C,IAAA,QAAKiO,SAAS,CAAC,oBAAoB,CAAAd,QAAA,cACjCnN,IAAA,MAAAmN,QAAA,CAAG,8FAAkF,CAAG,CAAC,CACtF,CACN,EACE,CAAC,cAENjN,KAAA,QAAK+N,SAAS,CAAC,cAAc,CAAAd,QAAA,eAC3BnN,IAAA,OAAAmN,QAAA,CAAI,oCAAwB,CAAI,CAAC,cACjCjN,KAAA,MAAAiN,QAAA,EAAG,kFAC+E,CAAC5M,cAAc,CAAC,WAClG,EAAG,CAAC,cACJP,IAAA,WACEiO,SAAS,CAAC,uBAAuB,CACjC4B,OAAO,CAAEA,CAAA,GAAM9D,cAAc,CAAC,KAAK,CAAE,CACrCmF,QAAQ,CAAEtQ,SAAU,CAAAuM,QAAA,CAEnBvM,SAAS,CAAG,cAAc,CAAG,cAAc,CACtC,CAAC,EACN,CAAC,CAELH,YAAY,CAACgD,MAAM,CAAG,CAAC,eACtBvD,KAAA,QAAK+N,SAAS,CAAC,cAAc,CAAAd,QAAA,eAC3BnN,IAAA,OAAAmN,QAAA,CAAI,+CAA8B,CAAI,CAAC,cACvCjN,KAAA,MAAAiN,QAAA,EAAG,6DAC0D,CAAC1M,YAAY,CAACgD,MAAM,CAAC,6DAElF,EAAG,CAAC,cACJzD,IAAA,WACEiO,SAAS,CAAC,yBAAyB,CACnC4B,OAAO,CAAEA,CAAA,GAAM9D,cAAc,CAAC,IAAI,CAAE,CACpCmF,QAAQ,CAAEtQ,SAAU,CAAAuM,QAAA,CAEnBvM,SAAS,CAAG,cAAc,CAAG,wBAAwB,CAChD,CAAC,EACN,CACN,EACE,CAAC,cAENV,KAAA,QAAK+N,SAAS,CAAC,cAAc,CAAAd,QAAA,eAC3BjN,KAAA,QAAK+N,SAAS,CAAC,aAAa,CAAAd,QAAA,eAC1BnN,IAAA,SAAMiO,SAAS,CAAC,OAAO,CAAAd,QAAA,CAAC,YAAU,CAAM,CAAC,cACzCnN,IAAA,SAAMiO,SAAS,CAAC,OAAO,CAAAd,QAAA,CACpBxK,aAAa,EAAIE,eAAe,CAAG,sBAAsB,CAAG,eAAe,CACxE,CAAC,EACJ,CAAC,cACN3C,KAAA,QAAK+N,SAAS,CAAC,aAAa,CAAAd,QAAA,eAC1BnN,IAAA,SAAMiO,SAAS,CAAC,OAAO,CAAAd,QAAA,CAAC,SAAO,CAAM,CAAC,cACtCnN,IAAA,SAAMiO,SAAS,CAAC,OAAO,CAAAd,QAAA,CAAEjL,WAAW,CAAG,SAAS,CAAG,WAAW,CAAO,CAAC,EACnE,CAAC,cACNhC,KAAA,QAAK+N,SAAS,CAAC,aAAa,CAAAd,QAAA,eAC1BnN,IAAA,SAAMiO,SAAS,CAAC,OAAO,CAAAd,QAAA,CAAC,YAAU,CAAM,CAAC,cACzCjN,KAAA,SAAM+N,SAAS,CAAC,OAAO,CAAAd,QAAA,EAAE/K,QAAQ,CAACqB,MAAM,CAAC,gBAAc,EAAM,CAAC,EAC3D,CAAC,CACLhD,YAAY,CAACgD,MAAM,CAAG,CAAC,eACtBvD,KAAA,QAAK+N,SAAS,CAAC,aAAa,CAAAd,QAAA,eAC1BnN,IAAA,SAAMiO,SAAS,CAAC,OAAO,CAAAd,QAAA,CAAC,UAAQ,CAAM,CAAC,cACvCjN,KAAA,SAAM+N,SAAS,CAAC,OAAO,CAAAd,QAAA,EAAE1M,YAAY,CAACmL,MAAM,CAAC3F,CAAC,EAAIA,CAAC,CAACZ,IAAI,EAAIY,CAAC,CAACZ,IAAI,CAACF,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC1B,MAAM,CAAC,YAAU,EAAM,CAAC,EAC1G,CACN,EACE,CAAC,EACH,CACN,CAEA3C,SAAS,eAAId,IAAA,CAACiR,QAAQ,GAAE,CAAC,CACzB7P,cAAc,eAAIpB,IAAA,CAACuQ,eAAe,GAAE,CAAC,EACnC,CAAC,CAEV,CAAC,CAED,cAAe,CAAApQ,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}