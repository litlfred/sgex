{"ast":null,"code":"import React,{useState,useEffect}from'react';import githubService from'../services/githubService';import StagingGround from'./StagingGround';import'./Publications.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Publications=_ref=>{var _repository$owner;let{profile,repository,selectedBranch,hasWriteAccess}=_ref;const[branches,setBranches]=useState([]);const[workflows,setWorkflows]=useState([]);const[workflowRuns,setWorkflowRuns]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const owner=((_repository$owner=repository.owner)===null||_repository$owner===void 0?void 0:_repository$owner.login)||repository.full_name.split('/')[0];const repoName=repository.name;useEffect(()=>{const fetchPublicationData=async()=>{try{setLoading(true);setError(null);// Handle demo mode - provide mock data\nif(profile!==null&&profile!==void 0&&profile.isDemo){const mockBranches=[{name:'main',commit:{sha:'abc123'}},{name:'feature/updates',commit:{sha:'def456'}},{name:'dev',commit:{sha:'ghi789'}}];setBranches(mockBranches);const mockWorkflows=[{id:'pages-build',name:'Deploy to GitHub Pages',triggers:['push','manual']}];setWorkflows(mockWorkflows);// Mock workflow runs\nconst mockWorkflowRuns={'main':{status:'completed',conclusion:'success',html_url:\"https://github.com/\".concat(owner,\"/\").concat(repoName,\"/actions/runs/123456\"),updated_at:new Date().toISOString()},'feature/updates':{status:'completed',conclusion:'action_required',html_url:\"https://github.com/\".concat(owner,\"/\").concat(repoName,\"/actions/runs/123457\"),updated_at:new Date().toISOString()},'dev':{status:'completed',conclusion:'failure',html_url:\"https://github.com/\".concat(owner,\"/\").concat(repoName,\"/actions/runs/123458\"),updated_at:new Date().toISOString()}};setWorkflowRuns(mockWorkflowRuns);setLoading(false);return;}// Fetch branches (excluding gh-pages)\nconst branchesData=await githubService.getBranches(owner,repoName);const filteredBranches=branchesData.filter(branch=>branch.name!=='gh-pages');setBranches(filteredBranches);// Fetch workflows to find ghbuild workflow\nconst workflowsData=await githubService.getWorkflows(owner,repoName);setWorkflows(workflowsData);// Find the ghbuild workflow (look for workflow with 'build' or 'publish' in name)\nconst ghbuildWorkflow=workflowsData.find(workflow=>workflow.name.toLowerCase().includes('build')||workflow.name.toLowerCase().includes('publish')||workflow.name.toLowerCase().includes('pages'));// Fetch recent workflow runs for each branch if ghbuild workflow exists and has valid ID\nif(ghbuildWorkflow&&ghbuildWorkflow.id){const runsByBranch={};for(const branch of filteredBranches){try{const runs=await githubService.getWorkflowRunsForWorkflow(owner,repoName,ghbuildWorkflow.id,{branch:branch.name,per_page:1});if(runs.length>0){runsByBranch[branch.name]=runs[0];}}catch(err){console.warn(\"Could not fetch workflow runs for branch \".concat(branch.name,\":\"),err);}}setWorkflowRuns(runsByBranch);}else if(ghbuildWorkflow&&!ghbuildWorkflow.id){console.warn('Found workflow but missing ID:',ghbuildWorkflow);}setLoading(false);}catch(err){console.error('Error fetching publication data:',err);setError('Failed to load publication data');setLoading(false);}};fetchPublicationData();},[owner,repoName,profile===null||profile===void 0?void 0:profile.isDemo]);const getPublicationUrl=branchName=>{if(branchName===repository.default_branch||branchName==='main'){return\"https://\".concat(owner,\".github.io/\").concat(repoName,\"/\");}else{return\"https://\".concat(owner,\".github.io/\").concat(repoName,\"/branches/\").concat(branchName,\"/\");}};const getWorkflowStatusIcon=branchName=>{const run=workflowRuns[branchName];if(!run)return{icon:'‚ö™',title:'No recent workflow runs',link:null};const status=run.status;const conclusion=run.conclusion;if(status==='in_progress'||status==='queued'){return{icon:'üîÑ',title:'Workflow running',link:run.html_url,className:'running'};}else if(conclusion==='success'){return{icon:'‚úÖ',title:'Last build successful',link:run.html_url,className:'success'};}else if(conclusion==='failure'){return{icon:'‚ùå',title:'Last build failed',link:run.html_url,className:'failure'};}else if(conclusion==='action_required'){return{icon:'‚è≥',title:'Workflow requires approval',link:run.html_url,className:'approval-required'};}else{return{icon:'‚ö†Ô∏è',title:\"Build \".concat(conclusion||status),link:run.html_url,className:'warning'};}};const handleRestartWorkflow=async branchName=>{// Handle demo mode\nif(profile!==null&&profile!==void 0&&profile.isDemo){alert(\"Demo Mode: Workflow restart simulated for branch: \".concat(branchName));return;}const ghbuildWorkflow=workflows.find(workflow=>workflow.name.toLowerCase().includes('build')||workflow.name.toLowerCase().includes('publish')||workflow.name.toLowerCase().includes('pages'));if(!ghbuildWorkflow){alert('No suitable workflow found to restart');return;}if(!ghbuildWorkflow.id){alert('Workflow found but missing ID - cannot restart');console.warn('Workflow missing ID:',ghbuildWorkflow);return;}try{await githubService.triggerWorkflow(owner,repoName,ghbuildWorkflow.id,branchName);alert(\"Workflow restarted for branch: \".concat(branchName));// Refresh workflow runs after a delay\nsetTimeout(()=>{window.location.reload();},2000);}catch(err){console.error('Error restarting workflow:',err);alert('Failed to restart workflow. Please check your permissions.');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"publications-loading\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Loading Publications...\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Fetching branch and workflow information...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"publications-error\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Error Loading Publications\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"publications-section\",children:[/*#__PURE__*/_jsx(StagingGround,{repository:repository,selectedBranch:selectedBranch,hasWriteAccess:hasWriteAccess,profile:profile}),/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"Published DAK Content\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-description\",children:\"Access published Implementation Guide content for this DAK repository. Each branch is published automatically via GitHub Actions to GitHub Pages.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"publications-grid\",children:branches.map(branch=>{const isMainBranch=branch.name===repository.default_branch||branch.name==='main';const publicationUrl=getPublicationUrl(branch.name);const workflowStatus=getWorkflowStatusIcon(branch.name);return/*#__PURE__*/_jsxs(\"div\",{className:\"publication-card \".concat(isMainBranch?'main-branch':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"publication-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"branch-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"branch-icon\",children:\"\\uD83C\\uDF3F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"branch-name\",children:branch.name}),isMainBranch&&/*#__PURE__*/_jsx(\"span\",{className:\"main-badge\",children:\"MAIN\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"workflow-status\",children:workflowStatus.link?/*#__PURE__*/_jsx(\"a\",{href:workflowStatus.link,target:\"_blank\",rel:\"noopener noreferrer\",className:\"status-icon \".concat(workflowStatus.className||''),title:workflowStatus.title,children:workflowStatus.icon}):/*#__PURE__*/_jsx(\"span\",{className:\"status-icon \".concat(workflowStatus.className||''),title:workflowStatus.title,children:workflowStatus.icon})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"publication-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"publication-url\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Published at:\"}),/*#__PURE__*/_jsxs(\"a\",{href:publicationUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"publication-link\",children:[publicationUrl,/*#__PURE__*/_jsx(\"span\",{className:\"external-link\",children:\"\\u2197\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"publication-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"restart-workflow-btn\",onClick:()=>handleRestartWorkflow(branch.name),disabled:!hasWriteAccess,title:hasWriteAccess?'Restart build workflow for this branch':'Write permissions required',children:\"\\uD83D\\uDD04 Rebuild\"}),/*#__PURE__*/_jsx(\"a\",{href:\"https://github.com/\".concat(owner,\"/\").concat(repoName,\"/tree/\").concat(branch.name),target:\"_blank\",rel:\"noopener noreferrer\",className:\"view-source-btn\",title:\"View source code for this branch\",children:\"\\uD83D\\uDC41\\uFE0F View Source\"})]})]})]},branch.name);})}),branches.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-branches\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No publishable branches found (excluding gh-pages).\"})})]});};export default Publications;","map":{"version":3,"names":["React","useState","useEffect","githubService","StagingGround","jsx","_jsx","jsxs","_jsxs","Publications","_ref","_repository$owner","profile","repository","selectedBranch","hasWriteAccess","branches","setBranches","workflows","setWorkflows","workflowRuns","setWorkflowRuns","loading","setLoading","error","setError","owner","login","full_name","split","repoName","name","fetchPublicationData","isDemo","mockBranches","commit","sha","mockWorkflows","id","triggers","mockWorkflowRuns","status","conclusion","html_url","concat","updated_at","Date","toISOString","branchesData","getBranches","filteredBranches","filter","branch","workflowsData","getWorkflows","ghbuildWorkflow","find","workflow","toLowerCase","includes","runsByBranch","runs","getWorkflowRunsForWorkflow","per_page","length","err","console","warn","getPublicationUrl","branchName","default_branch","getWorkflowStatusIcon","run","icon","title","link","className","handleRestartWorkflow","alert","triggerWorkflow","setTimeout","window","location","reload","children","map","isMainBranch","publicationUrl","workflowStatus","href","target","rel","onClick","disabled"],"sources":["/home/runner/work/sgex/sgex/src/components/Publications.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport githubService from '../services/githubService';\nimport StagingGround from './StagingGround';\nimport './Publications.css';\n\nconst Publications = ({ profile, repository, selectedBranch, hasWriteAccess }) => {\n  const [branches, setBranches] = useState([]);\n  const [workflows, setWorkflows] = useState([]);\n  const [workflowRuns, setWorkflowRuns] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const owner = repository.owner?.login || repository.full_name.split('/')[0];\n  const repoName = repository.name;\n\n  useEffect(() => {\n    const fetchPublicationData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        // Handle demo mode - provide mock data\n        if (profile?.isDemo) {\n          const mockBranches = [\n            { name: 'main', commit: { sha: 'abc123' } },\n            { name: 'feature/updates', commit: { sha: 'def456' } },\n            { name: 'dev', commit: { sha: 'ghi789' } }\n          ];\n          setBranches(mockBranches);\n\n          const mockWorkflows = [\n            { id: 'pages-build', name: 'Deploy to GitHub Pages', triggers: ['push', 'manual'] }\n          ];\n          setWorkflows(mockWorkflows);\n\n          // Mock workflow runs\n          const mockWorkflowRuns = {\n            'main': { \n              status: 'completed', \n              conclusion: 'success', \n              html_url: `https://github.com/${owner}/${repoName}/actions/runs/123456`,\n              updated_at: new Date().toISOString()\n            },\n            'feature/updates': { \n              status: 'completed', \n              conclusion: 'action_required', \n              html_url: `https://github.com/${owner}/${repoName}/actions/runs/123457`,\n              updated_at: new Date().toISOString()\n            },\n            'dev': { \n              status: 'completed', \n              conclusion: 'failure', \n              html_url: `https://github.com/${owner}/${repoName}/actions/runs/123458`,\n              updated_at: new Date().toISOString()\n            }\n          };\n          setWorkflowRuns(mockWorkflowRuns);\n          setLoading(false);\n          return;\n        }\n\n        // Fetch branches (excluding gh-pages)\n        const branchesData = await githubService.getBranches(owner, repoName);\n        const filteredBranches = branchesData.filter(branch => branch.name !== 'gh-pages');\n        setBranches(filteredBranches);\n\n        // Fetch workflows to find ghbuild workflow\n        const workflowsData = await githubService.getWorkflows(owner, repoName);\n        setWorkflows(workflowsData);\n\n        // Find the ghbuild workflow (look for workflow with 'build' or 'publish' in name)\n        const ghbuildWorkflow = workflowsData.find(workflow => \n          workflow.name.toLowerCase().includes('build') || \n          workflow.name.toLowerCase().includes('publish') ||\n          workflow.name.toLowerCase().includes('pages')\n        );\n\n        // Fetch recent workflow runs for each branch if ghbuild workflow exists and has valid ID\n        if (ghbuildWorkflow && ghbuildWorkflow.id) {\n          const runsByBranch = {};\n          for (const branch of filteredBranches) {\n            try {\n              const runs = await githubService.getWorkflowRunsForWorkflow(\n                owner, \n                repoName, \n                ghbuildWorkflow.id,\n                { branch: branch.name, per_page: 1 }\n              );\n              if (runs.length > 0) {\n                runsByBranch[branch.name] = runs[0];\n              }\n            } catch (err) {\n              console.warn(`Could not fetch workflow runs for branch ${branch.name}:`, err);\n            }\n          }\n          setWorkflowRuns(runsByBranch);\n        } else if (ghbuildWorkflow && !ghbuildWorkflow.id) {\n          console.warn('Found workflow but missing ID:', ghbuildWorkflow);\n        }\n\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching publication data:', err);\n        setError('Failed to load publication data');\n        setLoading(false);\n      }\n    };\n\n    fetchPublicationData();\n  }, [owner, repoName, profile?.isDemo]);\n\n  const getPublicationUrl = (branchName) => {\n    if (branchName === repository.default_branch || branchName === 'main') {\n      return `https://${owner}.github.io/${repoName}/`;\n    } else {\n      return `https://${owner}.github.io/${repoName}/branches/${branchName}/`;\n    }\n  };\n\n  const getWorkflowStatusIcon = (branchName) => {\n    const run = workflowRuns[branchName];\n    if (!run) return { icon: '‚ö™', title: 'No recent workflow runs', link: null };\n\n    const status = run.status;\n    const conclusion = run.conclusion;\n\n    if (status === 'in_progress' || status === 'queued') {\n      return { \n        icon: 'üîÑ', \n        title: 'Workflow running', \n        link: run.html_url,\n        className: 'running' \n      };\n    } else if (conclusion === 'success') {\n      return { \n        icon: '‚úÖ', \n        title: 'Last build successful', \n        link: run.html_url,\n        className: 'success' \n      };\n    } else if (conclusion === 'failure') {\n      return { \n        icon: '‚ùå', \n        title: 'Last build failed', \n        link: run.html_url,\n        className: 'failure' \n      };\n    } else if (conclusion === 'action_required') {\n      return { \n        icon: '‚è≥', \n        title: 'Workflow requires approval', \n        link: run.html_url,\n        className: 'approval-required' \n      };\n    } else {\n      return { \n        icon: '‚ö†Ô∏è', \n        title: `Build ${conclusion || status}`, \n        link: run.html_url,\n        className: 'warning' \n      };\n    }\n  };\n\n  const handleRestartWorkflow = async (branchName) => {\n    // Handle demo mode\n    if (profile?.isDemo) {\n      alert(`Demo Mode: Workflow restart simulated for branch: ${branchName}`);\n      return;\n    }\n\n    const ghbuildWorkflow = workflows.find(workflow => \n      workflow.name.toLowerCase().includes('build') || \n      workflow.name.toLowerCase().includes('publish') ||\n      workflow.name.toLowerCase().includes('pages')\n    );\n\n    if (!ghbuildWorkflow) {\n      alert('No suitable workflow found to restart');\n      return;\n    }\n\n    if (!ghbuildWorkflow.id) {\n      alert('Workflow found but missing ID - cannot restart');\n      console.warn('Workflow missing ID:', ghbuildWorkflow);\n      return;\n    }\n\n    try {\n      await githubService.triggerWorkflow(owner, repoName, ghbuildWorkflow.id, branchName);\n      alert(`Workflow restarted for branch: ${branchName}`);\n      \n      // Refresh workflow runs after a delay\n      setTimeout(() => {\n        window.location.reload();\n      }, 2000);\n    } catch (err) {\n      console.error('Error restarting workflow:', err);\n      alert('Failed to restart workflow. Please check your permissions.');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"publications-loading\">\n        <div className=\"loading-content\">\n          <h3>Loading Publications...</h3>\n          <p>Fetching branch and workflow information...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"publications-error\">\n        <div className=\"error-content\">\n          <h3>Error Loading Publications</h3>\n          <p>{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"publications-section\">\n      {/* Staging Ground Section */}\n      <StagingGround\n        repository={repository}\n        selectedBranch={selectedBranch}\n        hasWriteAccess={hasWriteAccess}\n        profile={profile}\n      />\n      \n      <div className=\"section-header\">\n        <h3 className=\"section-title\">Published DAK Content</h3>\n        <p className=\"section-description\">\n          Access published Implementation Guide content for this DAK repository. Each branch is published \n          automatically via GitHub Actions to GitHub Pages.\n        </p>\n      </div>\n\n      <div className=\"publications-grid\">\n        {branches.map((branch) => {\n          const isMainBranch = branch.name === repository.default_branch || branch.name === 'main';\n          const publicationUrl = getPublicationUrl(branch.name);\n          const workflowStatus = getWorkflowStatusIcon(branch.name);\n\n          return (\n            <div key={branch.name} className={`publication-card ${isMainBranch ? 'main-branch' : ''}`}>\n              <div className=\"publication-header\">\n                <div className=\"branch-info\">\n                  <span className=\"branch-icon\">üåø</span>\n                  <span className=\"branch-name\">{branch.name}</span>\n                  {isMainBranch && <span className=\"main-badge\">MAIN</span>}\n                </div>\n                <div className=\"workflow-status\">\n                  {workflowStatus.link ? (\n                    <a \n                      href={workflowStatus.link} \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className={`status-icon ${workflowStatus.className || ''}`}\n                      title={workflowStatus.title}\n                    >\n                      {workflowStatus.icon}\n                    </a>\n                  ) : (\n                    <span \n                      className={`status-icon ${workflowStatus.className || ''}`}\n                      title={workflowStatus.title}\n                    >\n                      {workflowStatus.icon}\n                    </span>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"publication-content\">\n                <div className=\"publication-url\">\n                  <label>Published at:</label>\n                  <a \n                    href={publicationUrl}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"publication-link\"\n                  >\n                    {publicationUrl}\n                    <span className=\"external-link\">‚Üó</span>\n                  </a>\n                </div>\n\n                <div className=\"publication-actions\">\n                  <button\n                    className=\"restart-workflow-btn\"\n                    onClick={() => handleRestartWorkflow(branch.name)}\n                    disabled={!hasWriteAccess}\n                    title={hasWriteAccess ? 'Restart build workflow for this branch' : 'Write permissions required'}\n                  >\n                    üîÑ Rebuild\n                  </button>\n                  \n                  <a \n                    href={`https://github.com/${owner}/${repoName}/tree/${branch.name}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"view-source-btn\"\n                    title=\"View source code for this branch\"\n                  >\n                    üëÅÔ∏è View Source\n                  </a>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {branches.length === 0 && (\n        <div className=\"no-branches\">\n          <p>No publishable branches found (excluding gh-pages).</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Publications;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}