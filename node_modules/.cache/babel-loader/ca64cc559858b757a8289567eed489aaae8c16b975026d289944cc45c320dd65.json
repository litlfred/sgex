{"ast":null,"code":"import inherits from 'inherits-browser';\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\nimport { filter } from 'min-dash';\nimport { is } from '../../util/ModelUtil';\nimport { getBBox } from 'diagram-js/lib/util/Elements';\n\n/**\n * @typedef {import('didi').Injector} Injector\n */\n\n/**\n * Registers and executes BPMN specific editor actions.\n *\n * @param {Injector} injector\n */\nexport default function BpmnEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\ninherits(BpmnEditorActions, EditorActions);\nBpmnEditorActions.$inject = ['injector'];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nBpmnEditorActions.prototype._registerDefaultActions = function (injector) {\n  // (0) invoke super method\n\n  EditorActions.prototype._registerDefaultActions.call(this, injector);\n\n  // (1) retrieve optional components to integrate with\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var spaceTool = injector.get('spaceTool', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var globalConnect = injector.get('globalConnect', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n  var directEditing = injector.get('directEditing', false);\n  var searchPad = injector.get('searchPad', false);\n  var modeling = injector.get('modeling', false);\n  var contextPad = injector.get('contextPad', false);\n\n  // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function () {\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n      var elements = elementRegistry.filter(function (element) {\n        return element !== rootElement;\n      });\n      selection.select(elements);\n      return elements;\n    });\n  }\n  if (spaceTool) {\n    this._registerAction('spaceTool', function () {\n      spaceTool.toggle();\n    });\n  }\n  if (lassoTool) {\n    this._registerAction('lassoTool', function () {\n      lassoTool.toggle();\n    });\n  }\n  if (handTool) {\n    this._registerAction('handTool', function () {\n      handTool.toggle();\n    });\n  }\n  if (globalConnect) {\n    this._registerAction('globalConnectTool', function () {\n      globalConnect.toggle();\n    });\n  }\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function (opts) {\n      var currentSelection = selection.get(),\n        type = opts.type;\n      if (currentSelection.length) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function (opts) {\n      var currentSelection = selection.get(),\n        aligneableElements = [],\n        type = opts.type;\n      if (currentSelection.length) {\n        aligneableElements = filter(currentSelection, function (element) {\n          return !is(element, 'bpmn:Lane');\n        });\n        alignElements.trigger(aligneableElements, type);\n      }\n    });\n  }\n  if (selection && modeling) {\n    this._registerAction('setColor', function (opts) {\n      var currentSelection = selection.get();\n      if (currentSelection.length) {\n        modeling.setColor(currentSelection, opts);\n      }\n    });\n  }\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function () {\n      var currentSelection = selection.get();\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n  if (searchPad) {\n    this._registerAction('find', function () {\n      searchPad.toggle();\n    });\n  }\n  if (canvas && modeling) {\n    this._registerAction('moveToOrigin', function () {\n      var rootElement = canvas.getRootElement(),\n        boundingBox,\n        elements;\n      if (is(rootElement, 'bpmn:Collaboration')) {\n        elements = elementRegistry.filter(function (element) {\n          return is(element.parent, 'bpmn:Collaboration');\n        });\n      } else {\n        elements = elementRegistry.filter(function (element) {\n          return element !== rootElement && !is(element.parent, 'bpmn:SubProcess');\n        });\n      }\n      boundingBox = getBBox(elements);\n      modeling.moveElements(elements, {\n        x: -boundingBox.x,\n        y: -boundingBox.y\n      }, rootElement);\n    });\n  }\n  if (selection && contextPad) {\n    this._registerAction('replaceElement', function (event) {\n      contextPad.triggerEntry('replace', 'click', event);\n    });\n  }\n};","map":{"version":3,"names":["inherits","EditorActions","filter","is","getBBox","BpmnEditorActions","injector","invoke","$inject","prototype","_registerDefaultActions","call","canvas","get","elementRegistry","selection","spaceTool","lassoTool","handTool","globalConnect","distributeElements","alignElements","directEditing","searchPad","modeling","contextPad","_registerAction","rootElement","getRootElement","elements","element","select","toggle","opts","currentSelection","type","length","trigger","aligneableElements","setColor","activate","boundingBox","parent","moveElements","x","y","event","triggerEntry"],"sources":["/home/runner/work/sgex/sgex/node_modules/bpmn-js/lib/features/editor-actions/BpmnEditorActions.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\n\nimport { filter } from 'min-dash';\n\nimport { is } from '../../util/ModelUtil';\n\nimport {\n  getBBox\n} from 'diagram-js/lib/util/Elements';\n\n/**\n * @typedef {import('didi').Injector} Injector\n */\n\n/**\n * Registers and executes BPMN specific editor actions.\n *\n * @param {Injector} injector\n */\nexport default function BpmnEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\n\ninherits(BpmnEditorActions, EditorActions);\n\nBpmnEditorActions.$inject = [\n  'injector'\n];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nBpmnEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (0) invoke super method\n\n  EditorActions.prototype._registerDefaultActions.call(this, injector);\n\n  // (1) retrieve optional components to integrate with\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var spaceTool = injector.get('spaceTool', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var globalConnect = injector.get('globalConnect', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n  var directEditing = injector.get('directEditing', false);\n  var searchPad = injector.get('searchPad', false);\n  var modeling = injector.get('modeling', false);\n  var contextPad = injector.get('contextPad', false);\n\n  // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function() {\n\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n\n      var elements = elementRegistry.filter(function(element) {\n        return element !== rootElement;\n      });\n\n      selection.select(elements);\n\n      return elements;\n    });\n  }\n\n  if (spaceTool) {\n    this._registerAction('spaceTool', function() {\n      spaceTool.toggle();\n    });\n  }\n\n  if (lassoTool) {\n    this._registerAction('lassoTool', function() {\n      lassoTool.toggle();\n    });\n  }\n\n  if (handTool) {\n    this._registerAction('handTool', function() {\n      handTool.toggle();\n    });\n  }\n\n  if (globalConnect) {\n    this._registerAction('globalConnectTool', function() {\n      globalConnect.toggle();\n    });\n  }\n\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function(opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function(opts) {\n      var currentSelection = selection.get(),\n          aligneableElements = [],\n          type = opts.type;\n\n      if (currentSelection.length) {\n        aligneableElements = filter(currentSelection, function(element) {\n          return !is(element, 'bpmn:Lane');\n        });\n\n        alignElements.trigger(aligneableElements, type);\n      }\n    });\n  }\n\n  if (selection && modeling) {\n    this._registerAction('setColor', function(opts) {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        modeling.setColor(currentSelection, opts);\n      }\n    });\n  }\n\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function() {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n\n  if (searchPad) {\n    this._registerAction('find', function() {\n      searchPad.toggle();\n    });\n  }\n\n  if (canvas && modeling) {\n    this._registerAction('moveToOrigin', function() {\n      var rootElement = canvas.getRootElement(),\n          boundingBox,\n          elements;\n\n      if (is(rootElement, 'bpmn:Collaboration')) {\n        elements = elementRegistry.filter(function(element) {\n          return is(element.parent, 'bpmn:Collaboration');\n        });\n      } else {\n        elements = elementRegistry.filter(function(element) {\n          return element !== rootElement && !is(element.parent, 'bpmn:SubProcess');\n        });\n      }\n\n      boundingBox = getBBox(elements);\n\n      modeling.moveElements(\n        elements,\n        { x: -boundingBox.x, y: -boundingBox.y },\n        rootElement\n      );\n    });\n  }\n\n  if (selection && contextPad) {\n    this._registerAction('replaceElement', function(event) {\n      contextPad.triggerEntry('replace', 'click', event);\n    });\n  }\n\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}