{"ast":null,"code":"import { useEffect, useRef, useState, useLayoutEffect, html, useMemo, useCallback } from '../../ui';\nimport { closest as domClosest, matches as domMatches } from 'min-dom';\nimport PopupMenuHeader from './PopupMenuHeader';\nimport PopupMenuList from './PopupMenuList';\nimport classNames from 'clsx';\nimport { isDefined, isFunction } from 'min-dash';\n\n/**\n * @typedef {import('./PopupMenuProvider').PopupMenuEntry} PopupMenuEntry\n * @typedef {import('./PopupMenuProvider').PopupMenuHeaderEntry} PopupMenuHeaderEntry\n * @typedef {import('./PopupMenuProvider').PopupMenuEmptyPlaceholderProvider | import('./PopupMenuProvider').PopupMenuEmptyPlaceholder} PopupMenuEmptyPlaceholder\n *\n * @typedef {import('../search/search').default} search\n *\n * @typedef {import('../../util/Types').Point} Point\n */\n\n/**\n * A component that renders the popup menus.\n *\n * @param {Object} props\n * @param {() => void} props.onClose\n * @param {() => void} props.onSelect\n * @param {(element: HTMLElement) => Point} props.position\n * @param {string} props.className\n * @param {PopupMenuEntry[]} props.entries\n * @param {PopupMenuHeaderEntry[]} props.headerEntries\n * @param {number} props.scale\n * @param {string} [props.title]\n * @param {boolean} [props.search]\n * @param {PopupMenuEmptyPlaceholder} [props.emptyPlaceholder]\n * @param {number} [props.width]\n * @param {search} props.searchFn\n */\nexport default function PopupMenuComponent(props) {\n  const {\n    onClose,\n    onSelect,\n    className,\n    headerEntries,\n    position,\n    title,\n    width,\n    scale,\n    search,\n    emptyPlaceholder,\n    searchFn,\n    entries: originalEntries,\n    onOpened,\n    onClosed\n  } = props;\n  const searchable = useMemo(() => {\n    if (!isDefined(search)) {\n      return false;\n    }\n    return originalEntries.length > 5;\n  }, [search, originalEntries]);\n  const [searchValue, setSearchValue] = useState('');\n  const filterEntries = useCallback((originalEntries, searchValue) => {\n    if (!searchable) {\n      return originalEntries;\n    }\n    if (!searchValue.trim()) {\n      return originalEntries.filter(_ref => {\n        let {\n          rank = 0\n        } = _ref;\n        return rank >= 0;\n      });\n    }\n    const searchableEntries = originalEntries.filter(_ref2 => {\n      let {\n        searchable\n      } = _ref2;\n      return searchable !== false;\n    });\n    return searchFn(searchableEntries, searchValue, {\n      keys: ['label', 'search', 'description']\n    }).map(_ref3 => {\n      let {\n        item\n      } = _ref3;\n      return item;\n    });\n  }, [searchable]);\n  const [entries, setEntries] = useState(filterEntries(originalEntries, searchValue));\n  const [selectedEntry, setSelectedEntry] = useState(entries[0]);\n  const updateEntries = useCallback(newEntries => {\n    // always select first\n    setSelectedEntry(newEntries[0]);\n    setEntries(newEntries);\n  }, [selectedEntry, setEntries, setSelectedEntry]);\n\n  // filter entries on search value change\n  useEffect(() => {\n    updateEntries(filterEntries(originalEntries, searchValue));\n  }, [searchValue, originalEntries]);\n\n  // handle keyboard seleciton\n  const keyboardSelect = useCallback(direction => {\n    const idx = entries.indexOf(selectedEntry);\n    let nextIdx = idx + direction;\n    if (nextIdx < 0) {\n      nextIdx = entries.length - 1;\n    }\n    if (nextIdx >= entries.length) {\n      nextIdx = 0;\n    }\n    setSelectedEntry(entries[nextIdx]);\n  }, [entries, selectedEntry, setSelectedEntry]);\n  const handleKeyDown = useCallback(event => {\n    if (event.key === 'Enter' && selectedEntry) {\n      return onSelect(event, selectedEntry);\n    }\n\n    // ARROW_UP\n    if (event.key === 'ArrowUp') {\n      keyboardSelect(-1);\n      return event.preventDefault();\n    }\n\n    // ARROW_DOWN\n    if (event.key === 'ArrowDown') {\n      keyboardSelect(1);\n      return event.preventDefault();\n    }\n  }, [onSelect, selectedEntry, keyboardSelect]);\n  const handleKey = useCallback(event => {\n    if (domMatches(event.target, 'input')) {\n      setSearchValue(() => event.target.value);\n    }\n  }, [setSearchValue]);\n  useEffect(() => {\n    onOpened();\n    return () => {\n      onClosed();\n    };\n  }, []);\n  const displayHeader = useMemo(() => title || headerEntries.length > 0, [title, headerEntries]);\n  return html`\n    <${PopupMenuWrapper}\n      onClose=${onClose}\n      onKeyup=${handleKey}\n      onKeydown=${handleKeyDown}\n      className=${className}\n      position=${position}\n      width=${width}\n      scale=${scale}\n    >\n      ${displayHeader && html`\n        <${PopupMenuHeader}\n          headerEntries=${headerEntries}\n          onSelect=${onSelect}\n          selectedEntry=${selectedEntry}\n          setSelectedEntry=${setSelectedEntry}\n          title=${title}\n        />\n      `}\n      ${originalEntries.length > 0 && html`\n        <div class=\"djs-popup-body\">\n\n          ${searchable && html`\n          <div class=\"djs-popup-search\">\n            <svg class=\"djs-popup-search-icon\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z\" fill=\"#22242A\"/>\n            </svg>\n            <input type=\"text\" spellcheck=${false} aria-label=\"${title}\" />\n          </div>\n          `}\n\n          <${PopupMenuList}\n            entries=${entries}\n            selectedEntry=${selectedEntry}\n            setSelectedEntry=${setSelectedEntry}\n            onAction=${onSelect}\n          />\n        </div>\n      `}\n    ${emptyPlaceholder && entries.length === 0 && html`\n      <div class=\"djs-popup-no-results\">${isFunction(emptyPlaceholder) ? emptyPlaceholder(searchValue) : emptyPlaceholder}</div>\n    `}\n    </${PopupMenuWrapper}>\n  `;\n}\n\n/**\n * A component that wraps the popup menu.\n *\n * @param {*} props\n */\nfunction PopupMenuWrapper(props) {\n  const {\n    onClose,\n    onKeydown,\n    onKeyup,\n    className,\n    children,\n    position: positionGetter\n  } = props;\n  const popupRef = useRef();\n\n  // initial position\n  useLayoutEffect(() => {\n    if (typeof positionGetter !== 'function') {\n      return;\n    }\n    const popupEl = popupRef.current;\n    const position = positionGetter(popupEl);\n    popupEl.style.left = `${position.x}px`;\n    popupEl.style.top = `${position.y}px`;\n  }, [popupRef.current, positionGetter]);\n\n  // initial focus\n  useLayoutEffect(() => {\n    const popupEl = popupRef.current;\n    if (!popupEl) {\n      return;\n    }\n    const inputEl = popupEl.querySelector('input');\n    (inputEl || popupEl).focus();\n  }, []);\n\n  // global <Escape> / blur handlers\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (event.key === 'Escape') {\n        event.preventDefault();\n        return onClose();\n      }\n    };\n    const handleClick = event => {\n      const popup = domClosest(event.target, '.djs-popup', true);\n      if (popup) {\n        return;\n      }\n      return onClose();\n    };\n    document.documentElement.addEventListener('keydown', handleKeyDown);\n    document.body.addEventListener('click', handleClick);\n    return () => {\n      document.documentElement.removeEventListener('keydown', handleKeyDown);\n      document.body.removeEventListener('click', handleClick);\n    };\n  }, []);\n  return html`\n    <div\n      class=${classNames('djs-popup', className)}\n      style=${getPopupStyle(props)}\n      onKeydown=${onKeydown}\n      onKeyup=${onKeyup}\n      ref=${popupRef}\n      tabIndex=\"-1\"\n    >\n      ${children}\n    </div>\n  `;\n}\n\n// helpers //////////////////////\n\nfunction getPopupStyle(props) {\n  return {\n    transform: `scale(${props.scale})`,\n    width: `${props.width}px`,\n    'transform-origin': 'top left'\n  };\n}","map":{"version":3,"names":["useEffect","useRef","useState","useLayoutEffect","html","useMemo","useCallback","closest","domClosest","matches","domMatches","PopupMenuHeader","PopupMenuList","classNames","isDefined","isFunction","PopupMenuComponent","props","onClose","onSelect","className","headerEntries","position","title","width","scale","search","emptyPlaceholder","searchFn","entries","originalEntries","onOpened","onClosed","searchable","length","searchValue","setSearchValue","filterEntries","trim","filter","_ref","rank","searchableEntries","_ref2","keys","map","_ref3","item","setEntries","selectedEntry","setSelectedEntry","updateEntries","newEntries","keyboardSelect","direction","idx","indexOf","nextIdx","handleKeyDown","event","key","preventDefault","handleKey","target","value","displayHeader","PopupMenuWrapper","onKeydown","onKeyup","children","positionGetter","popupRef","popupEl","current","style","left","x","top","y","inputEl","querySelector","focus","handleClick","popup","document","documentElement","addEventListener","body","removeEventListener","getPopupStyle","transform"],"sources":["/home/runner/work/sgex/sgex/node_modules/diagram-js/lib/features/popup-menu/PopupMenuComponent.js"],"sourcesContent":["import {\n  useEffect,\n  useRef,\n  useState,\n  useLayoutEffect,\n  html,\n  useMemo,\n  useCallback\n} from '../../ui';\n\nimport {\n  closest as domClosest,\n  matches as domMatches\n} from 'min-dom';\n\nimport PopupMenuHeader from './PopupMenuHeader';\nimport PopupMenuList from './PopupMenuList';\nimport classNames from 'clsx';\nimport { isDefined, isFunction } from 'min-dash';\n\n/**\n * @typedef {import('./PopupMenuProvider').PopupMenuEntry} PopupMenuEntry\n * @typedef {import('./PopupMenuProvider').PopupMenuHeaderEntry} PopupMenuHeaderEntry\n * @typedef {import('./PopupMenuProvider').PopupMenuEmptyPlaceholderProvider | import('./PopupMenuProvider').PopupMenuEmptyPlaceholder} PopupMenuEmptyPlaceholder\n *\n * @typedef {import('../search/search').default} search\n *\n * @typedef {import('../../util/Types').Point} Point\n */\n\n/**\n * A component that renders the popup menus.\n *\n * @param {Object} props\n * @param {() => void} props.onClose\n * @param {() => void} props.onSelect\n * @param {(element: HTMLElement) => Point} props.position\n * @param {string} props.className\n * @param {PopupMenuEntry[]} props.entries\n * @param {PopupMenuHeaderEntry[]} props.headerEntries\n * @param {number} props.scale\n * @param {string} [props.title]\n * @param {boolean} [props.search]\n * @param {PopupMenuEmptyPlaceholder} [props.emptyPlaceholder]\n * @param {number} [props.width]\n * @param {search} props.searchFn\n */\nexport default function PopupMenuComponent(props) {\n  const {\n    onClose,\n    onSelect,\n    className,\n    headerEntries,\n    position,\n    title,\n    width,\n    scale,\n    search,\n    emptyPlaceholder,\n    searchFn,\n    entries: originalEntries,\n    onOpened,\n    onClosed\n  } = props;\n\n  const searchable = useMemo(() => {\n    if (!isDefined(search)) {\n      return false;\n    }\n\n    return originalEntries.length > 5;\n  }, [ search, originalEntries ]);\n\n  const [ searchValue, setSearchValue ] = useState('');\n\n  const filterEntries = useCallback((originalEntries, searchValue) => {\n\n    if (!searchable) {\n      return originalEntries;\n    }\n\n    if (!searchValue.trim()) {\n      return originalEntries.filter(({ rank = 0 }) => rank >= 0);\n    }\n\n    const searchableEntries = originalEntries.filter(({ searchable }) => searchable !== false);\n\n    return searchFn(searchableEntries, searchValue, {\n      keys: [\n        'label',\n        'search',\n        'description'\n      ]\n    }).map(({ item }) => item);\n  }, [ searchable ]);\n\n  const [ entries, setEntries ] = useState(filterEntries(originalEntries, searchValue));\n  const [ selectedEntry, setSelectedEntry ] = useState(entries[0]);\n\n  const updateEntries = useCallback((newEntries) => {\n\n    // always select first\n    setSelectedEntry(newEntries[0]);\n\n    setEntries(newEntries);\n  }, [ selectedEntry, setEntries, setSelectedEntry ]);\n\n  // filter entries on search value change\n  useEffect(() => {\n    updateEntries(filterEntries(originalEntries, searchValue));\n  }, [ searchValue, originalEntries ]);\n\n  // handle keyboard seleciton\n  const keyboardSelect = useCallback(direction => {\n    const idx = entries.indexOf(selectedEntry);\n\n    let nextIdx = idx + direction;\n\n    if (nextIdx < 0) {\n      nextIdx = entries.length - 1;\n    }\n\n    if (nextIdx >= entries.length) {\n      nextIdx = 0;\n    }\n\n    setSelectedEntry(entries[nextIdx]);\n  }, [ entries, selectedEntry, setSelectedEntry ]);\n\n  const handleKeyDown = useCallback(event => {\n    if (event.key === 'Enter' && selectedEntry) {\n      return onSelect(event, selectedEntry);\n    }\n\n    // ARROW_UP\n    if (event.key === 'ArrowUp') {\n      keyboardSelect(-1);\n\n      return event.preventDefault();\n    }\n\n    // ARROW_DOWN\n    if (event.key === 'ArrowDown') {\n      keyboardSelect(1);\n\n      return event.preventDefault();\n    }\n  }, [ onSelect, selectedEntry, keyboardSelect ]);\n\n  const handleKey = useCallback(event => {\n    if (domMatches(event.target, 'input')) {\n      setSearchValue(() => event.target.value);\n    }\n  }, [ setSearchValue ]);\n\n  useEffect(() => {\n    onOpened();\n\n    return () => {\n      onClosed();\n    };\n  }, []);\n\n  const displayHeader = useMemo(() => title || headerEntries.length > 0, [ title, headerEntries ]);\n\n  return html`\n    <${PopupMenuWrapper}\n      onClose=${ onClose }\n      onKeyup=${ handleKey }\n      onKeydown=${ handleKeyDown }\n      className=${ className }\n      position=${ position }\n      width=${ width }\n      scale=${ scale }\n    >\n      ${ displayHeader && html`\n        <${PopupMenuHeader}\n          headerEntries=${ headerEntries }\n          onSelect=${ onSelect }\n          selectedEntry=${ selectedEntry }\n          setSelectedEntry=${ setSelectedEntry }\n          title=${ title }\n        />\n      ` }\n      ${ originalEntries.length > 0 && html`\n        <div class=\"djs-popup-body\">\n\n          ${ searchable && html`\n          <div class=\"djs-popup-search\">\n            <svg class=\"djs-popup-search-icon\" width=\"14\" height=\"14\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z\" fill=\"#22242A\"/>\n            </svg>\n            <input type=\"text\" spellcheck=${ false } aria-label=\"${ title }\" />\n          </div>\n          ` }\n\n          <${PopupMenuList}\n            entries=${ entries }\n            selectedEntry=${ selectedEntry }\n            setSelectedEntry=${ setSelectedEntry }\n            onAction=${ onSelect }\n          />\n        </div>\n      ` }\n    ${ emptyPlaceholder && entries.length === 0 && html`\n      <div class=\"djs-popup-no-results\">${ isFunction(emptyPlaceholder) ? emptyPlaceholder(searchValue) : emptyPlaceholder }</div>\n    ` }\n    </${PopupMenuWrapper}>\n  `;\n}\n\n/**\n * A component that wraps the popup menu.\n *\n * @param {*} props\n */\nfunction PopupMenuWrapper(props) {\n  const {\n    onClose,\n    onKeydown,\n    onKeyup,\n    className,\n    children,\n    position: positionGetter\n  } = props;\n\n  const popupRef = useRef();\n\n  // initial position\n  useLayoutEffect(() => {\n    if (typeof positionGetter !== 'function') {\n      return;\n    }\n\n    const popupEl = popupRef.current;\n    const position = positionGetter(popupEl);\n\n    popupEl.style.left = `${position.x}px`;\n    popupEl.style.top = `${position.y}px`;\n  }, [ popupRef.current, positionGetter ]);\n\n  // initial focus\n  useLayoutEffect(() => {\n    const popupEl = popupRef.current;\n\n    if (!popupEl) {\n      return;\n    }\n\n    const inputEl = popupEl.querySelector('input');\n\n    (inputEl || popupEl).focus();\n  }, []);\n\n  // global <Escape> / blur handlers\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (event.key === 'Escape') {\n        event.preventDefault();\n\n        return onClose();\n      }\n    };\n\n    const handleClick = event => {\n      const popup = domClosest(event.target, '.djs-popup', true);\n\n      if (popup) {\n        return;\n      }\n\n      return onClose();\n    };\n\n    document.documentElement.addEventListener('keydown', handleKeyDown);\n    document.body.addEventListener('click', handleClick);\n\n    return () => {\n      document.documentElement.removeEventListener('keydown', handleKeyDown);\n      document.body.removeEventListener('click', handleClick);\n    };\n  }, []);\n\n  return html`\n    <div\n      class=${ classNames('djs-popup', className) }\n      style=${ getPopupStyle(props) }\n      onKeydown=${ onKeydown }\n      onKeyup=${ onKeyup }\n      ref=${ popupRef }\n      tabIndex=\"-1\"\n    >\n      ${ children }\n    </div>\n  `;\n}\n\n// helpers //////////////////////\n\nfunction getPopupStyle(props) {\n  return {\n    transform: `scale(${props.scale})`,\n    width: `${props.width}px`,\n    'transform-origin': 'top left'\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}