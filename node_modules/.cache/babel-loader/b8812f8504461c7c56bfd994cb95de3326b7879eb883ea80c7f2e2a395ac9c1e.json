{"ast":null,"code":"import inherits from 'inherits-browser';\nimport CreateShapeHandler from './CreateShapeHandler';\n\n/**\n * @typedef {import('../../../core/Canvas').default} Canvas\n *\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../model/Types').Parent} Parent\n * @typedef {import('../../../model/Types').Shape} Shape\n * @typedef {import('../../../util/Types').Point} Point\n */\n\n/**\n * A handler that attaches a label to a given target shape.\n *\n * @param {Canvas} canvas\n */\nexport default function CreateLabelHandler(canvas) {\n  CreateShapeHandler.call(this, canvas);\n}\ninherits(CreateLabelHandler, CreateShapeHandler);\nCreateLabelHandler.$inject = ['canvas'];\n\n// api //////////////////////\n\nvar originalExecute = CreateShapeHandler.prototype.execute;\n\n/**\n * Append label to element.\n *\n * @param { {\n *   parent: Parent;\n *   position: Point;\n *   shape: Shape;\n *   target: Element;\n * } } context\n */\nCreateLabelHandler.prototype.execute = function (context) {\n  var label = context.shape;\n  ensureValidDimensions(label);\n  label.labelTarget = context.labelTarget;\n  return originalExecute.call(this, context);\n};\nvar originalRevert = CreateShapeHandler.prototype.revert;\n\n/**\n * Revert appending by removing label.\n */\nCreateLabelHandler.prototype.revert = function (context) {\n  context.shape.labelTarget = null;\n  return originalRevert.call(this, context);\n};\n\n// helpers //////////////////////\n\nfunction ensureValidDimensions(label) {\n  // make sure a label has valid { width, height } dimensions\n  ['width', 'height'].forEach(function (prop) {\n    if (typeof label[prop] === 'undefined') {\n      label[prop] = 0;\n    }\n  });\n}","map":{"version":3,"names":["inherits","CreateShapeHandler","CreateLabelHandler","canvas","call","$inject","originalExecute","prototype","execute","context","label","shape","ensureValidDimensions","labelTarget","originalRevert","revert","forEach","prop"],"sources":["/home/runner/work/sgex/sgex/node_modules/diagram-js/lib/features/modeling/cmd/CreateLabelHandler.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport CreateShapeHandler from './CreateShapeHandler';\n\n/**\n * @typedef {import('../../../core/Canvas').default} Canvas\n *\n * @typedef {import('../../../model/Types').Element} Element\n * @typedef {import('../../../model/Types').Parent} Parent\n * @typedef {import('../../../model/Types').Shape} Shape\n * @typedef {import('../../../util/Types').Point} Point\n */\n\n/**\n * A handler that attaches a label to a given target shape.\n *\n * @param {Canvas} canvas\n */\nexport default function CreateLabelHandler(canvas) {\n  CreateShapeHandler.call(this, canvas);\n}\n\ninherits(CreateLabelHandler, CreateShapeHandler);\n\nCreateLabelHandler.$inject = [ 'canvas' ];\n\n\n// api //////////////////////\n\n\nvar originalExecute = CreateShapeHandler.prototype.execute;\n\n/**\n * Append label to element.\n *\n * @param { {\n *   parent: Parent;\n *   position: Point;\n *   shape: Shape;\n *   target: Element;\n * } } context\n */\nCreateLabelHandler.prototype.execute = function(context) {\n\n  var label = context.shape;\n\n  ensureValidDimensions(label);\n\n  label.labelTarget = context.labelTarget;\n\n  return originalExecute.call(this, context);\n};\n\nvar originalRevert = CreateShapeHandler.prototype.revert;\n\n/**\n * Revert appending by removing label.\n */\nCreateLabelHandler.prototype.revert = function(context) {\n  context.shape.labelTarget = null;\n\n  return originalRevert.call(this, context);\n};\n\n\n// helpers //////////////////////\n\nfunction ensureValidDimensions(label) {\n\n  // make sure a label has valid { width, height } dimensions\n  [ 'width', 'height' ].forEach(function(prop) {\n    if (typeof label[prop] === 'undefined') {\n      label[prop] = 0;\n    }\n  });\n}"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,kBAAkB;AAEvC,OAAOC,kBAAkB,MAAM,sBAAsB;;AAErD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,kBAAkBA,CAACC,MAAM,EAAE;EACjDF,kBAAkB,CAACG,IAAI,CAAC,IAAI,EAAED,MAAM,CAAC;AACvC;AAEAH,QAAQ,CAACE,kBAAkB,EAAED,kBAAkB,CAAC;AAEhDC,kBAAkB,CAACG,OAAO,GAAG,CAAE,QAAQ,CAAE;;AAGzC;;AAGA,IAAIC,eAAe,GAAGL,kBAAkB,CAACM,SAAS,CAACC,OAAO;;AAE1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAN,kBAAkB,CAACK,SAAS,CAACC,OAAO,GAAG,UAASC,OAAO,EAAE;EAEvD,IAAIC,KAAK,GAAGD,OAAO,CAACE,KAAK;EAEzBC,qBAAqB,CAACF,KAAK,CAAC;EAE5BA,KAAK,CAACG,WAAW,GAAGJ,OAAO,CAACI,WAAW;EAEvC,OAAOP,eAAe,CAACF,IAAI,CAAC,IAAI,EAAEK,OAAO,CAAC;AAC5C,CAAC;AAED,IAAIK,cAAc,GAAGb,kBAAkB,CAACM,SAAS,CAACQ,MAAM;;AAExD;AACA;AACA;AACAb,kBAAkB,CAACK,SAAS,CAACQ,MAAM,GAAG,UAASN,OAAO,EAAE;EACtDA,OAAO,CAACE,KAAK,CAACE,WAAW,GAAG,IAAI;EAEhC,OAAOC,cAAc,CAACV,IAAI,CAAC,IAAI,EAAEK,OAAO,CAAC;AAC3C,CAAC;;AAGD;;AAEA,SAASG,qBAAqBA,CAACF,KAAK,EAAE;EAEpC;EACA,CAAE,OAAO,EAAE,QAAQ,CAAE,CAACM,OAAO,CAAC,UAASC,IAAI,EAAE;IAC3C,IAAI,OAAOP,KAAK,CAACO,IAAI,CAAC,KAAK,WAAW,EAAE;MACtCP,KAAK,CAACO,IAAI,CAAC,GAAG,CAAC;IACjB;EACF,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}