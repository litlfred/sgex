{"ast":null,"code":"import { append as svgAppend, attr as svgAttr, create as svgCreate, classes as svgClasses, clear as svgClear } from 'tiny-svg';\nimport { assign } from 'min-dash';\nimport { getBBox } from '../../util/Elements';\nvar SELECTION_OUTLINE_PADDING = 6;\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../selection/Selection').default} Selection\n * @typedef {import('../../core/Canvas').default} Canvas\n */\n\n/**\n * @class\n *\n * A plugin that adds an outline to shapes and connections that may be activated and styled\n * via CSS classes.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Selection} selection\n */\nexport default function MultiSelectionOutline(eventBus, canvas, selection) {\n  this._canvas = canvas;\n  var self = this;\n  eventBus.on('element.changed', function (event) {\n    if (selection.isSelected(event.element)) {\n      self._updateMultiSelectionOutline(selection.get());\n    }\n  });\n  eventBus.on('selection.changed', function (event) {\n    var newSelection = event.newSelection;\n    self._updateMultiSelectionOutline(newSelection);\n  });\n}\nMultiSelectionOutline.prototype._updateMultiSelectionOutline = function (selection) {\n  var layer = this._canvas.getLayer('selectionOutline');\n  svgClear(layer);\n  var enabled = selection.length > 1;\n  var container = this._canvas.getContainer();\n  svgClasses(container)[enabled ? 'add' : 'remove']('djs-multi-select');\n  if (!enabled) {\n    return;\n  }\n  var bBox = addSelectionOutlinePadding(getBBox(selection));\n  var rect = svgCreate('rect');\n  svgAttr(rect, assign({\n    rx: 3\n  }, bBox));\n  svgClasses(rect).add('djs-selection-outline');\n  svgAppend(layer, rect);\n};\nMultiSelectionOutline.$inject = ['eventBus', 'canvas', 'selection'];\n\n// helpers //////////\n\nfunction addSelectionOutlinePadding(bBox) {\n  return {\n    x: bBox.x - SELECTION_OUTLINE_PADDING,\n    y: bBox.y - SELECTION_OUTLINE_PADDING,\n    width: bBox.width + SELECTION_OUTLINE_PADDING * 2,\n    height: bBox.height + SELECTION_OUTLINE_PADDING * 2\n  };\n}","map":{"version":3,"names":["append","svgAppend","attr","svgAttr","create","svgCreate","classes","svgClasses","clear","svgClear","assign","getBBox","SELECTION_OUTLINE_PADDING","MultiSelectionOutline","eventBus","canvas","selection","_canvas","self","on","event","isSelected","element","_updateMultiSelectionOutline","get","newSelection","prototype","layer","getLayer","enabled","length","container","getContainer","bBox","addSelectionOutlinePadding","rect","rx","add","$inject","x","y","width","height"],"sources":["/home/runner/work/sgex/sgex/node_modules/diagram-js/lib/features/outline/MultiSelectionOutline.js"],"sourcesContent":["import {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  classes as svgClasses,\n  clear as svgClear\n} from 'tiny-svg';\n\nimport { assign } from 'min-dash';\n\nimport { getBBox } from '../../util/Elements';\n\nvar SELECTION_OUTLINE_PADDING = 6;\n\n/**\n * @typedef {import('../../model/Types').Element} Element\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('../selection/Selection').default} Selection\n * @typedef {import('../../core/Canvas').default} Canvas\n */\n\n/**\n * @class\n *\n * A plugin that adds an outline to shapes and connections that may be activated and styled\n * via CSS classes.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {Selection} selection\n */\nexport default function MultiSelectionOutline(eventBus, canvas, selection) {\n  this._canvas = canvas;\n\n  var self = this;\n\n  eventBus.on('element.changed', function(event) {\n    if (selection.isSelected(event.element)) {\n      self._updateMultiSelectionOutline(selection.get());\n    }\n  });\n\n  eventBus.on('selection.changed', function(event) {\n    var newSelection = event.newSelection;\n\n    self._updateMultiSelectionOutline(newSelection);\n  });\n}\n\n\n\nMultiSelectionOutline.prototype._updateMultiSelectionOutline = function(selection) {\n  var layer = this._canvas.getLayer('selectionOutline');\n\n  svgClear(layer);\n\n  var enabled = selection.length > 1;\n\n  var container = this._canvas.getContainer();\n\n  svgClasses(container)[enabled ? 'add' : 'remove']('djs-multi-select');\n\n  if (!enabled) {\n    return;\n  }\n\n  var bBox = addSelectionOutlinePadding(getBBox(selection));\n\n  var rect = svgCreate('rect');\n\n  svgAttr(rect, assign({\n    rx: 3\n  }, bBox));\n\n  svgClasses(rect).add('djs-selection-outline');\n\n  svgAppend(layer, rect);\n};\n\n\nMultiSelectionOutline.$inject = [ 'eventBus', 'canvas', 'selection' ];\n\n// helpers //////////\n\nfunction addSelectionOutlinePadding(bBox) {\n  return {\n    x: bBox.x - SELECTION_OUTLINE_PADDING,\n    y: bBox.y - SELECTION_OUTLINE_PADDING,\n    width: bBox.width + SELECTION_OUTLINE_PADDING * 2,\n    height: bBox.height + SELECTION_OUTLINE_PADDING * 2\n  };\n}"],"mappings":"AAAA,SACEA,MAAM,IAAIC,SAAS,EACnBC,IAAI,IAAIC,OAAO,EACfC,MAAM,IAAIC,SAAS,EACnBC,OAAO,IAAIC,UAAU,EACrBC,KAAK,IAAIC,QAAQ,QACZ,UAAU;AAEjB,SAASC,MAAM,QAAQ,UAAU;AAEjC,SAASC,OAAO,QAAQ,qBAAqB;AAE7C,IAAIC,yBAAyB,GAAG,CAAC;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,qBAAqBA,CAACC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAE;EACzE,IAAI,CAACC,OAAO,GAAGF,MAAM;EAErB,IAAIG,IAAI,GAAG,IAAI;EAEfJ,QAAQ,CAACK,EAAE,CAAC,iBAAiB,EAAE,UAASC,KAAK,EAAE;IAC7C,IAAIJ,SAAS,CAACK,UAAU,CAACD,KAAK,CAACE,OAAO,CAAC,EAAE;MACvCJ,IAAI,CAACK,4BAA4B,CAACP,SAAS,CAACQ,GAAG,CAAC,CAAC,CAAC;IACpD;EACF,CAAC,CAAC;EAEFV,QAAQ,CAACK,EAAE,CAAC,mBAAmB,EAAE,UAASC,KAAK,EAAE;IAC/C,IAAIK,YAAY,GAAGL,KAAK,CAACK,YAAY;IAErCP,IAAI,CAACK,4BAA4B,CAACE,YAAY,CAAC;EACjD,CAAC,CAAC;AACJ;AAIAZ,qBAAqB,CAACa,SAAS,CAACH,4BAA4B,GAAG,UAASP,SAAS,EAAE;EACjF,IAAIW,KAAK,GAAG,IAAI,CAACV,OAAO,CAACW,QAAQ,CAAC,kBAAkB,CAAC;EAErDnB,QAAQ,CAACkB,KAAK,CAAC;EAEf,IAAIE,OAAO,GAAGb,SAAS,CAACc,MAAM,GAAG,CAAC;EAElC,IAAIC,SAAS,GAAG,IAAI,CAACd,OAAO,CAACe,YAAY,CAAC,CAAC;EAE3CzB,UAAU,CAACwB,SAAS,CAAC,CAACF,OAAO,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAC,kBAAkB,CAAC;EAErE,IAAI,CAACA,OAAO,EAAE;IACZ;EACF;EAEA,IAAII,IAAI,GAAGC,0BAA0B,CAACvB,OAAO,CAACK,SAAS,CAAC,CAAC;EAEzD,IAAImB,IAAI,GAAG9B,SAAS,CAAC,MAAM,CAAC;EAE5BF,OAAO,CAACgC,IAAI,EAAEzB,MAAM,CAAC;IACnB0B,EAAE,EAAE;EACN,CAAC,EAAEH,IAAI,CAAC,CAAC;EAET1B,UAAU,CAAC4B,IAAI,CAAC,CAACE,GAAG,CAAC,uBAAuB,CAAC;EAE7CpC,SAAS,CAAC0B,KAAK,EAAEQ,IAAI,CAAC;AACxB,CAAC;AAGDtB,qBAAqB,CAACyB,OAAO,GAAG,CAAE,UAAU,EAAE,QAAQ,EAAE,WAAW,CAAE;;AAErE;;AAEA,SAASJ,0BAA0BA,CAACD,IAAI,EAAE;EACxC,OAAO;IACLM,CAAC,EAAEN,IAAI,CAACM,CAAC,GAAG3B,yBAAyB;IACrC4B,CAAC,EAAEP,IAAI,CAACO,CAAC,GAAG5B,yBAAyB;IACrC6B,KAAK,EAAER,IAAI,CAACQ,KAAK,GAAG7B,yBAAyB,GAAG,CAAC;IACjD8B,MAAM,EAAET,IAAI,CAACS,MAAM,GAAG9B,yBAAyB,GAAG;EACpD,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}