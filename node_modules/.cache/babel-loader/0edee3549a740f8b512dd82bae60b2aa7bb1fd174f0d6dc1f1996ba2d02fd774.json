{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import stagingGroundService from'../services/stagingGroundService';import dakComplianceService from'../services/dakComplianceService';import SaveDialog from'./SaveDialog';import'./StagingGround.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const StagingGround=_ref=>{let{repository,selectedBranch,hasWriteAccess,profile}=_ref;const[stagingGround,setStagingGround]=useState(null);const[validation,setValidation]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[showSaveDialog,setShowSaveDialog]=useState(false);// Load staging ground data\nconst loadStagingGroundData=useCallback(async()=>{setLoading(true);setError(null);try{const currentStagingGround=stagingGroundService.getStagingGround();setStagingGround(currentStagingGround);if(currentStagingGround.files.length>0){await validateStagingGround(currentStagingGround);}}catch(err){setError('Failed to load staging ground data');console.error('Error loading staging ground:',err);}finally{setLoading(false);}},[]);// Initialize staging ground service\nuseEffect(()=>{if(repository&&selectedBranch){stagingGroundService.initialize(repository,selectedBranch);loadStagingGroundData();// Subscribe to staging ground changes\nconst unsubscribe=stagingGroundService.addListener(updatedStagingGround=>{setStagingGround(updatedStagingGround);validateStagingGround(updatedStagingGround);});return unsubscribe;}},[repository,selectedBranch,loadStagingGroundData]);// Validate staging ground\nconst validateStagingGround=async stagingGroundData=>{if(!stagingGroundData||stagingGroundData.files.length===0){setValidation(null);return;}try{const validationResult=await dakComplianceService.validateStagingGround(stagingGroundData);setValidation(validationResult);}catch(err){console.error('Error validating staging ground:',err);setValidation(null);}};// Handle saving changes\nconst handleSave=()=>{if(!hasWriteAccess){alert('You need write permissions to save changes to this repository.');return;}setShowSaveDialog(true);};// Handle successful save\nconst handleSaveSuccess=result=>{setShowSaveDialog(false);// Clear staging ground after successful save\nstagingGroundService.clearStagingGround();// Show success message\nalert(`Changes saved successfully! Commit: ${result.sha.substring(0,7)}`);};// Handle clearing staging ground\nconst handleClearChanges=()=>{if(window.confirm('Are you sure you want to discard all changes? This cannot be undone.')){stagingGroundService.clearStagingGround();}};// Handle removing individual file\nconst handleRemoveFile=filePath=>{if(window.confirm(`Are you sure you want to remove \"${filePath}\" from staging? This cannot be undone.`)){stagingGroundService.removeFile(filePath);}};// Get validation summary for display\nconst getValidationSummary=()=>{if(!validation){return{error:0,warning:0,info:0,canSave:true};}return dakComplianceService.getValidationSummary(validation);};// Format file list for display\nconst formatFileList=()=>{if(!stagingGround||!stagingGround.files)return[];return stagingGround.files.map(file=>({path:file.path,size:new Blob([file.content]).size,lastModified:file.timestamp}));};const validationSummary=getValidationSummary();const hasChanges=stagingGround&&stagingGround.files.length>0;const filesCount=stagingGround?stagingGround.files.length:0;return/*#__PURE__*/_jsxs(\"div\",{className:\"staging-ground-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"section-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"section-icon\",children:\"\\uD83D\\uDCDD\"}),\"Staging Ground\",hasChanges&&/*#__PURE__*/_jsxs(\"span\",{className:\"files-badge\",children:[filesCount,\" file\",filesCount!==1?'s':'']})]}),/*#__PURE__*/_jsx(\"p\",{className:\"section-description\",children:\"Changes made through DAK component editors are staged here before being committed to the repository. Review and commit your changes when ready.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"staging-content\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading-spinner\",children:\"\\u23F3\"}),\"Loading staging ground...\"]}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"error-icon\",children:\"\\u26A0\\uFE0F\"}),error]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"staging-status-bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-indicators\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"validation-stoplight\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`stoplight-indicator error ${validationSummary.error===0?'lit':''}`,children:[\"\\uD83D\\uDD34\",validationSummary.error>0&&/*#__PURE__*/_jsx(\"span\",{className:\"indicator-badge\",children:validationSummary.error})]}),/*#__PURE__*/_jsxs(\"div\",{className:`stoplight-indicator warning ${validationSummary.warning===0?'lit':''}`,children:[\"\\uD83D\\uDFE1\",validationSummary.warning>0&&/*#__PURE__*/_jsx(\"span\",{className:\"indicator-badge\",children:validationSummary.warning})]}),/*#__PURE__*/_jsxs(\"div\",{className:`stoplight-indicator info ${validationSummary.info===0?'lit':''}`,children:[\"\\uD83D\\uDFE2\",validationSummary.info>0&&/*#__PURE__*/_jsx(\"span\",{className:\"indicator-badge\",children:validationSummary.info})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:`save-btn ${!hasChanges||!validationSummary.canSave?'disabled':''}`,onClick:handleSave,disabled:!hasChanges||!hasWriteAccess,title:!hasChanges?'No changes to save':!hasWriteAccess?'Write access required':!validationSummary.canSave?'Fix validation errors first':'Save changes to repository',children:\"\\uD83D\\uDCBE Save Changes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"staging-files-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCC1 Changed Files\"}),hasChanges?/*#__PURE__*/_jsxs(\"div\",{className:\"changed-files\",children:[formatFileList().map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"file-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"file-icon\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"file-path\",children:file.path})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"file-size\",children:[(file.size/1024).toFixed(1),\" KB\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"file-time\",children:new Date(file.lastModified).toLocaleTimeString()}),/*#__PURE__*/_jsx(\"button\",{className:\"remove-file-btn\",onClick:e=>{e.stopPropagation();handleRemoveFile(file.path);},title:`Remove ${file.path} from staging`,children:\"\\uD83D\\uDDD1\\uFE0F\"})]})]},index)),/*#__PURE__*/_jsx(\"div\",{className:\"file-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"action-btn secondary small\",onClick:handleClearChanges,children:\"\\uD83D\\uDDD1\\uFE0F Clear All Changes\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"no-changes\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No changes in staging ground\"}),/*#__PURE__*/_jsx(\"p\",{className:\"help-text\",children:\"Changes made through DAK component editors will appear here before being saved to the repository.\"})]})]}),hasChanges&&stagingGround.message&&/*#__PURE__*/_jsxs(\"div\",{className:\"commit-message-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u270D\\uFE0F Commit Message\"}),/*#__PURE__*/_jsx(\"div\",{className:\"commit-preview\",children:/*#__PURE__*/_jsx(\"p\",{children:stagingGround.message})})]})]})}),/*#__PURE__*/_jsx(SaveDialog,{isOpen:showSaveDialog,onClose:()=>setShowSaveDialog(false),stagingGround:stagingGround,validation:validation,repository:repository,selectedBranch:selectedBranch,hasWriteAccess:hasWriteAccess,onSaveSuccess:handleSaveSuccess})]});};export default StagingGround;","map":{"version":3,"names":["React","useState","useEffect","useCallback","stagingGroundService","dakComplianceService","SaveDialog","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StagingGround","_ref","repository","selectedBranch","hasWriteAccess","profile","stagingGround","setStagingGround","validation","setValidation","loading","setLoading","error","setError","showSaveDialog","setShowSaveDialog","loadStagingGroundData","currentStagingGround","getStagingGround","files","length","validateStagingGround","err","console","initialize","unsubscribe","addListener","updatedStagingGround","stagingGroundData","validationResult","handleSave","alert","handleSaveSuccess","result","clearStagingGround","sha","substring","handleClearChanges","window","confirm","handleRemoveFile","filePath","removeFile","getValidationSummary","warning","info","canSave","formatFileList","map","file","path","size","Blob","content","lastModified","timestamp","validationSummary","hasChanges","filesCount","className","children","onClick","disabled","title","index","toFixed","Date","toLocaleTimeString","e","stopPropagation","message","isOpen","onClose","onSaveSuccess"],"sources":["/home/runner/work/sgex/sgex/src/components/StagingGround.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport stagingGroundService from '../services/stagingGroundService';\nimport dakComplianceService from '../services/dakComplianceService';\nimport SaveDialog from './SaveDialog';\nimport './StagingGround.css';\n\nconst StagingGround = ({ repository, selectedBranch, hasWriteAccess, profile }) => {\n  const [stagingGround, setStagingGround] = useState(null);\n  const [validation, setValidation] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [showSaveDialog, setShowSaveDialog] = useState(false);\n\n  // Load staging ground data\n  const loadStagingGroundData = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const currentStagingGround = stagingGroundService.getStagingGround();\n      setStagingGround(currentStagingGround);\n      \n      if (currentStagingGround.files.length > 0) {\n        await validateStagingGround(currentStagingGround);\n      }\n    } catch (err) {\n      setError('Failed to load staging ground data');\n      console.error('Error loading staging ground:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Initialize staging ground service\n  useEffect(() => {\n    if (repository && selectedBranch) {\n      stagingGroundService.initialize(repository, selectedBranch);\n      loadStagingGroundData();\n\n      // Subscribe to staging ground changes\n      const unsubscribe = stagingGroundService.addListener((updatedStagingGround) => {\n        setStagingGround(updatedStagingGround);\n        validateStagingGround(updatedStagingGround);\n      });\n\n      return unsubscribe;\n    }\n  }, [repository, selectedBranch, loadStagingGroundData]);\n\n  // Validate staging ground\n  const validateStagingGround = async (stagingGroundData) => {\n    if (!stagingGroundData || stagingGroundData.files.length === 0) {\n      setValidation(null);\n      return;\n    }\n\n    try {\n      const validationResult = await dakComplianceService.validateStagingGround(stagingGroundData);\n      setValidation(validationResult);\n    } catch (err) {\n      console.error('Error validating staging ground:', err);\n      setValidation(null);\n    }\n  };\n\n  // Handle saving changes\n  const handleSave = () => {\n    if (!hasWriteAccess) {\n      alert('You need write permissions to save changes to this repository.');\n      return;\n    }\n    \n    setShowSaveDialog(true);\n  };\n\n  // Handle successful save\n  const handleSaveSuccess = (result) => {\n    setShowSaveDialog(false);\n    \n    // Clear staging ground after successful save\n    stagingGroundService.clearStagingGround();\n    \n    // Show success message\n    alert(`Changes saved successfully! Commit: ${result.sha.substring(0, 7)}`);\n  };\n\n  // Handle clearing staging ground\n  const handleClearChanges = () => {\n    if (window.confirm('Are you sure you want to discard all changes? This cannot be undone.')) {\n      stagingGroundService.clearStagingGround();\n    }\n  };\n\n  // Handle removing individual file\n  const handleRemoveFile = (filePath) => {\n    if (window.confirm(`Are you sure you want to remove \"${filePath}\" from staging? This cannot be undone.`)) {\n      stagingGroundService.removeFile(filePath);\n    }\n  };\n\n  // Get validation summary for display\n  const getValidationSummary = () => {\n    if (!validation) {\n      return { error: 0, warning: 0, info: 0, canSave: true };\n    }\n    return dakComplianceService.getValidationSummary(validation);\n  };\n\n  // Format file list for display\n  const formatFileList = () => {\n    if (!stagingGround || !stagingGround.files) return [];\n    \n    return stagingGround.files.map(file => ({\n      path: file.path,\n      size: new Blob([file.content]).size,\n      lastModified: file.timestamp\n    }));\n  };\n\n  const validationSummary = getValidationSummary();\n  const hasChanges = stagingGround && stagingGround.files.length > 0;\n  const filesCount = stagingGround ? stagingGround.files.length : 0;\n\n  return (\n    <div className=\"staging-ground-section\">\n      <div className=\"section-header\">\n        <h3 className=\"section-title\">\n          <span className=\"section-icon\">📝</span>\n          Staging Ground\n          {hasChanges && (\n            <span className=\"files-badge\">\n              {filesCount} file{filesCount !== 1 ? 's' : ''}\n            </span>\n          )}\n        </h3>\n        <p className=\"section-description\">\n          Changes made through DAK component editors are staged here before being committed to the repository.\n          Review and commit your changes when ready.\n        </p>\n      </div>\n\n      <div className=\"staging-content\">\n        {loading ? (\n          <div className=\"loading-indicator\">\n            <span className=\"loading-spinner\">⏳</span>\n            Loading staging ground...\n          </div>\n        ) : error ? (\n          <div className=\"error-message\">\n            <span className=\"error-icon\">⚠️</span>\n            {error}\n          </div>\n        ) : (\n          <>\n            {/* Staging Status Bar */}\n            <div className=\"staging-status-bar\">\n              <div className=\"status-indicators\">\n                {/* Validation stoplight */}\n                <div className=\"validation-stoplight\">\n                  <div className={`stoplight-indicator error ${validationSummary.error === 0 ? 'lit' : ''}`}>\n                    🔴\n                    {validationSummary.error > 0 && (\n                      <span className=\"indicator-badge\">{validationSummary.error}</span>\n                    )}\n                  </div>\n                  <div className={`stoplight-indicator warning ${validationSummary.warning === 0 ? 'lit' : ''}`}>\n                    🟡\n                    {validationSummary.warning > 0 && (\n                      <span className=\"indicator-badge\">{validationSummary.warning}</span>\n                    )}\n                  </div>\n                  <div className={`stoplight-indicator info ${validationSummary.info === 0 ? 'lit' : ''}`}>\n                    🟢\n                    {validationSummary.info > 0 && (\n                      <span className=\"indicator-badge\">{validationSummary.info}</span>\n                    )}\n                  </div>\n                </div>\n              </div>\n              \n              {/* Save button */}\n              <button\n                className={`save-btn ${!hasChanges || !validationSummary.canSave ? 'disabled' : ''}`}\n                onClick={handleSave}\n                disabled={!hasChanges || !hasWriteAccess}\n                title={\n                  !hasChanges ? 'No changes to save' :\n                  !hasWriteAccess ? 'Write access required' :\n                  !validationSummary.canSave ? 'Fix validation errors first' :\n                  'Save changes to repository'\n                }\n              >\n                💾 Save Changes\n              </button>\n            </div>\n\n            {/* Changed Files Section */}\n            <div className=\"staging-files-section\">\n              <h4>📁 Changed Files</h4>\n              {hasChanges ? (\n                <div className=\"changed-files\">\n                  {formatFileList().map((file, index) => (\n                    <div key={index} className=\"file-item\">\n                      <div className=\"file-info\">\n                        <span className=\"file-icon\">📄</span>\n                        <span className=\"file-path\">{file.path}</span>\n                      </div>\n                      <div className=\"file-meta\">\n                        <span className=\"file-size\">\n                          {(file.size / 1024).toFixed(1)} KB\n                        </span>\n                        <span className=\"file-time\">\n                          {new Date(file.lastModified).toLocaleTimeString()}\n                        </span>\n                        <button\n                          className=\"remove-file-btn\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleRemoveFile(file.path);\n                          }}\n                          title={`Remove ${file.path} from staging`}\n                        >\n                          🗑️\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                  <div className=\"file-actions\">\n                    <button\n                      className=\"action-btn secondary small\"\n                      onClick={handleClearChanges}\n                    >\n                      🗑️ Clear All Changes\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"no-changes\">\n                  <p>No changes in staging ground</p>\n                  <p className=\"help-text\">\n                    Changes made through DAK component editors will appear here before being saved to the repository.\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* Commit Message Preview */}\n            {hasChanges && stagingGround.message && (\n              <div className=\"commit-message-section\">\n                <h4>✍️ Commit Message</h4>\n                <div className=\"commit-preview\">\n                  <p>{stagingGround.message}</p>\n                </div>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Save Dialog */}\n      <SaveDialog\n        isOpen={showSaveDialog}\n        onClose={() => setShowSaveDialog(false)}\n        stagingGround={stagingGround}\n        validation={validation}\n        repository={repository}\n        selectedBranch={selectedBranch}\n        hasWriteAccess={hasWriteAccess}\n        onSaveSuccess={handleSaveSuccess}\n      />\n    </div>\n  );\n};\n\nexport default StagingGround;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}