{"ast":null,"code":"import inherits from 'inherits-browser';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { is } from '../../../util/ModelUtil';\nimport { isExpanded } from '../../../util/DiUtil.js';\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * Add start event replacing element with expanded sub process.\n *\n * @param {Injector} injector\n * @param {Modeling} modeling\n */\nexport default function SubProcessStartEventBehavior(injector, modeling) {\n  injector.invoke(CommandInterceptor, this);\n  this.postExecuted('shape.replace', function (event) {\n    var oldShape = event.context.oldShape,\n      newShape = event.context.newShape;\n    if (!is(newShape, 'bpmn:SubProcess') || is(newShape, 'bpmn:AdHocSubProcess') || !(is(oldShape, 'bpmn:Task') || is(oldShape, 'bpmn:CallActivity')) || !isExpanded(newShape)) {\n      return;\n    }\n    var position = getStartEventPosition(newShape);\n    modeling.createShape({\n      type: 'bpmn:StartEvent'\n    }, position, newShape);\n  });\n}\nSubProcessStartEventBehavior.$inject = ['injector', 'modeling'];\ninherits(SubProcessStartEventBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction getStartEventPosition(shape) {\n  return {\n    x: shape.x + shape.width / 6,\n    y: shape.y + shape.height / 2\n  };\n}","map":{"version":3,"names":["inherits","CommandInterceptor","is","isExpanded","SubProcessStartEventBehavior","injector","modeling","invoke","postExecuted","event","oldShape","context","newShape","position","getStartEventPosition","createShape","type","$inject","shape","x","width","y","height"],"sources":["/home/runner/work/sgex/sgex/node_modules/bpmn-js/lib/features/modeling/behavior/SubProcessStartEventBehavior.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\nimport { isExpanded } from '../../../util/DiUtil.js';\n\n/**\n * @typedef {import('didi').Injector} Injector\n * @typedef {import('../Modeling').default} Modeling\n */\n\n/**\n * Add start event replacing element with expanded sub process.\n *\n * @param {Injector} injector\n * @param {Modeling} modeling\n */\nexport default function SubProcessStartEventBehavior(injector, modeling) {\n  injector.invoke(CommandInterceptor, this);\n\n  this.postExecuted('shape.replace', function(event) {\n    var oldShape = event.context.oldShape,\n        newShape = event.context.newShape;\n\n    if (\n      !is(newShape, 'bpmn:SubProcess') ||\n      is(newShape,'bpmn:AdHocSubProcess') ||\n      ! (is(oldShape, 'bpmn:Task') || is(oldShape, 'bpmn:CallActivity')) ||\n      !isExpanded(newShape)\n    ) {\n      return;\n    }\n\n    var position = getStartEventPosition(newShape);\n\n    modeling.createShape({ type: 'bpmn:StartEvent' }, position, newShape);\n  });\n}\n\nSubProcessStartEventBehavior.$inject = [\n  'injector',\n  'modeling'\n];\n\ninherits(SubProcessStartEventBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction getStartEventPosition(shape) {\n  return {\n    x: shape.x + shape.width / 6,\n    y: shape.y + shape.height / 2\n  };\n}\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,kBAAkB;AAEvC,OAAOC,kBAAkB,MAAM,2CAA2C;AAE1E,SAASC,EAAE,QAAQ,yBAAyB;AAE5C,SAASC,UAAU,QAAQ,yBAAyB;;AAEpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,4BAA4BA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;EACvED,QAAQ,CAACE,MAAM,CAACN,kBAAkB,EAAE,IAAI,CAAC;EAEzC,IAAI,CAACO,YAAY,CAAC,eAAe,EAAE,UAASC,KAAK,EAAE;IACjD,IAAIC,QAAQ,GAAGD,KAAK,CAACE,OAAO,CAACD,QAAQ;MACjCE,QAAQ,GAAGH,KAAK,CAACE,OAAO,CAACC,QAAQ;IAErC,IACE,CAACV,EAAE,CAACU,QAAQ,EAAE,iBAAiB,CAAC,IAChCV,EAAE,CAACU,QAAQ,EAAC,sBAAsB,CAAC,IACnC,EAAGV,EAAE,CAACQ,QAAQ,EAAE,WAAW,CAAC,IAAIR,EAAE,CAACQ,QAAQ,EAAE,mBAAmB,CAAC,CAAC,IAClE,CAACP,UAAU,CAACS,QAAQ,CAAC,EACrB;MACA;IACF;IAEA,IAAIC,QAAQ,GAAGC,qBAAqB,CAACF,QAAQ,CAAC;IAE9CN,QAAQ,CAACS,WAAW,CAAC;MAAEC,IAAI,EAAE;IAAkB,CAAC,EAAEH,QAAQ,EAAED,QAAQ,CAAC;EACvE,CAAC,CAAC;AACJ;AAEAR,4BAA4B,CAACa,OAAO,GAAG,CACrC,UAAU,EACV,UAAU,CACX;AAEDjB,QAAQ,CAACI,4BAA4B,EAAEH,kBAAkB,CAAC;;AAE1D;;AAEA,SAASa,qBAAqBA,CAACI,KAAK,EAAE;EACpC,OAAO;IACLC,CAAC,EAAED,KAAK,CAACC,CAAC,GAAGD,KAAK,CAACE,KAAK,GAAG,CAAC;IAC5BC,CAAC,EAAEH,KAAK,CAACG,CAAC,GAAGH,KAAK,CAACI,MAAM,GAAG;EAC9B,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}