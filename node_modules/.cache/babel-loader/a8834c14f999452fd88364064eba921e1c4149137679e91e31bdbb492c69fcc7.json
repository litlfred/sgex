{"ast":null,"code":"import { assign } from 'min-dash';\nimport { attr as svgAttr, create as svgCreate } from 'tiny-svg';\nimport { is, isAny } from '../../util/ModelUtil';\nimport { isLabel } from '../../util/LabelUtil';\nimport { DATA_OBJECT_REFERENCE_OUTLINE_PATH, DATA_STORE_REFERENCE_OUTLINE_PATH, DATA_OBJECT_REFERENCE_STANDARD_SIZE, DATA_STORE_REFERENCE_STANDARD_SIZE, createPath } from './OutlineUtil';\n\n/**\n * @typedef { import('diagram-js/lib/features/outline/OutlineProvider').default } BaseOutlineProvider\n *\n * @typedef { import('diagram-js/lib/features/outline/OutlineProvider').Outline } Outline\n *\n * @typedef { import('diagram-js/lib/draw/Styles').default } Styles\n *\n * @typedef { import('diagram-js/lib/model/Types').Element } Element\n */\n\nconst DEFAULT_OFFSET = 5;\n\n/**\n * BPMN-specific outline provider.\n *\n * @implements {BaseOutlineProvider}\n *\n * @param {Outline} outline\n * @param {Styles} styles\n */\nexport default function OutlineProvider(outline, styles) {\n  this._styles = styles;\n  outline.registerProvider(this);\n}\nOutlineProvider.$inject = ['outline', 'styles'];\n\n/**\n * Returns outline for a given element.\n *\n * @param {Element} element\n *\n * @return {Outline}\n */\nOutlineProvider.prototype.getOutline = function (element) {\n  const OUTLINE_STYLE = this._styles.cls('djs-outline', ['no-fill']);\n  var outline;\n  if (isLabel(element)) {\n    return;\n  }\n  if (is(element, 'bpmn:Gateway')) {\n    outline = svgCreate('rect');\n    assign(outline.style, {\n      'transform-box': 'fill-box',\n      'transform': 'rotate(45deg)',\n      'transform-origin': 'center'\n    });\n    svgAttr(outline, assign({\n      x: 2,\n      y: 2,\n      rx: 4,\n      width: element.width - 4,\n      height: element.height - 4\n    }, OUTLINE_STYLE));\n  } else if (isAny(element, ['bpmn:Task', 'bpmn:SubProcess', 'bpmn:Group', 'bpmn:CallActivity'])) {\n    outline = svgCreate('rect');\n    svgAttr(outline, assign({\n      x: -DEFAULT_OFFSET,\n      y: -DEFAULT_OFFSET,\n      rx: 14,\n      width: element.width + DEFAULT_OFFSET * 2,\n      height: element.height + DEFAULT_OFFSET * 2\n    }, OUTLINE_STYLE));\n  } else if (is(element, 'bpmn:EndEvent')) {\n    outline = svgCreate('circle');\n\n    // Extra 1px offset needed due to increased stroke-width of end event\n    // which makes it bigger than other events.\n\n    svgAttr(outline, assign({\n      cx: element.width / 2,\n      cy: element.height / 2,\n      r: element.width / 2 + DEFAULT_OFFSET + 1\n    }, OUTLINE_STYLE));\n  } else if (is(element, 'bpmn:Event')) {\n    outline = svgCreate('circle');\n    svgAttr(outline, assign({\n      cx: element.width / 2,\n      cy: element.height / 2,\n      r: element.width / 2 + DEFAULT_OFFSET\n    }, OUTLINE_STYLE));\n  } else if (is(element, 'bpmn:DataObjectReference') && isStandardSize(element, 'bpmn:DataObjectReference')) {\n    outline = createPath(DATA_OBJECT_REFERENCE_OUTLINE_PATH, {\n      x: -6,\n      y: -6\n    }, OUTLINE_STYLE);\n  } else if (is(element, 'bpmn:DataStoreReference') && isStandardSize(element, 'bpmn:DataStoreReference')) {\n    outline = createPath(DATA_STORE_REFERENCE_OUTLINE_PATH, {\n      x: -6,\n      y: -6\n    }, OUTLINE_STYLE);\n  }\n  return outline;\n};\n\n/**\n * Updates the outline for a given element.\n * Returns true if the update for the given element was handled by this provider.\n *\n * @param {Element} element\n * @param {Outline} outline\n * @returns {boolean}\n */\nOutlineProvider.prototype.updateOutline = function (element, outline) {\n  if (isLabel(element)) {\n    return;\n  }\n  if (isAny(element, ['bpmn:SubProcess', 'bpmn:Group'])) {\n    svgAttr(outline, {\n      width: element.width + DEFAULT_OFFSET * 2,\n      height: element.height + DEFAULT_OFFSET * 2\n    });\n    return true;\n  } else if (isAny(element, ['bpmn:Event', 'bpmn:Gateway', 'bpmn:DataStoreReference', 'bpmn:DataObjectReference'])) {\n    return true;\n  }\n  return false;\n};\n\n// helpers //////////\n\nfunction isStandardSize(element, type) {\n  var standardSize;\n  if (type === 'bpmn:DataObjectReference') {\n    standardSize = DATA_OBJECT_REFERENCE_STANDARD_SIZE;\n  } else if (type === 'bpmn:DataStoreReference') {\n    standardSize = DATA_STORE_REFERENCE_STANDARD_SIZE;\n  }\n  return element.width === standardSize.width && element.height === standardSize.height;\n}","map":{"version":3,"names":["assign","attr","svgAttr","create","svgCreate","is","isAny","isLabel","DATA_OBJECT_REFERENCE_OUTLINE_PATH","DATA_STORE_REFERENCE_OUTLINE_PATH","DATA_OBJECT_REFERENCE_STANDARD_SIZE","DATA_STORE_REFERENCE_STANDARD_SIZE","createPath","DEFAULT_OFFSET","OutlineProvider","outline","styles","_styles","registerProvider","$inject","prototype","getOutline","element","OUTLINE_STYLE","cls","style","x","y","rx","width","height","cx","cy","r","isStandardSize","updateOutline","type","standardSize"],"sources":["/home/runner/work/sgex/sgex/node_modules/bpmn-js/lib/features/outline/OutlineProvider.js"],"sourcesContent":["import { assign } from 'min-dash';\n\nimport {\n  attr as svgAttr,\n  create as svgCreate\n} from 'tiny-svg';\n\nimport {\n  is,\n  isAny\n} from '../../util/ModelUtil';\n\nimport { isLabel } from '../../util/LabelUtil';\n\nimport {\n  DATA_OBJECT_REFERENCE_OUTLINE_PATH,\n  DATA_STORE_REFERENCE_OUTLINE_PATH,\n  DATA_OBJECT_REFERENCE_STANDARD_SIZE,\n  DATA_STORE_REFERENCE_STANDARD_SIZE,\n  createPath\n} from './OutlineUtil';\n\n/**\n * @typedef { import('diagram-js/lib/features/outline/OutlineProvider').default } BaseOutlineProvider\n *\n * @typedef { import('diagram-js/lib/features/outline/OutlineProvider').Outline } Outline\n *\n * @typedef { import('diagram-js/lib/draw/Styles').default } Styles\n *\n * @typedef { import('diagram-js/lib/model/Types').Element } Element\n */\n\nconst DEFAULT_OFFSET = 5;\n\n/**\n * BPMN-specific outline provider.\n *\n * @implements {BaseOutlineProvider}\n *\n * @param {Outline} outline\n * @param {Styles} styles\n */\nexport default function OutlineProvider(outline, styles) {\n\n  this._styles = styles;\n  outline.registerProvider(this);\n}\n\nOutlineProvider.$inject = [\n  'outline',\n  'styles'\n];\n\n/**\n * Returns outline for a given element.\n *\n * @param {Element} element\n *\n * @return {Outline}\n */\nOutlineProvider.prototype.getOutline = function(element) {\n\n  const OUTLINE_STYLE = this._styles.cls('djs-outline', [ 'no-fill' ]);\n\n  var outline;\n\n  if (isLabel(element)) {\n    return;\n  }\n\n  if (is(element, 'bpmn:Gateway')) {\n    outline = svgCreate('rect');\n\n    assign(outline.style, {\n      'transform-box': 'fill-box',\n      'transform': 'rotate(45deg)',\n      'transform-origin': 'center'\n    });\n\n    svgAttr(outline, assign({\n      x: 2,\n      y: 2,\n      rx: 4,\n      width: element.width - 4,\n      height: element.height - 4,\n    }, OUTLINE_STYLE));\n\n  } else if (isAny(element, [ 'bpmn:Task', 'bpmn:SubProcess', 'bpmn:Group', 'bpmn:CallActivity' ])) {\n    outline = svgCreate('rect');\n\n    svgAttr(outline, assign({\n      x: -DEFAULT_OFFSET,\n      y: -DEFAULT_OFFSET,\n      rx: 14,\n      width: element.width + DEFAULT_OFFSET * 2,\n      height: element.height + DEFAULT_OFFSET * 2\n    }, OUTLINE_STYLE));\n\n  } else if (is(element, 'bpmn:EndEvent')) {\n\n    outline = svgCreate('circle');\n\n    // Extra 1px offset needed due to increased stroke-width of end event\n    // which makes it bigger than other events.\n\n    svgAttr(outline, assign({\n      cx: element.width / 2,\n      cy: element.height / 2,\n      r: element.width / 2 + DEFAULT_OFFSET + 1\n    }, OUTLINE_STYLE));\n\n  } else if (is(element, 'bpmn:Event')) {\n    outline = svgCreate('circle');\n\n    svgAttr(outline, assign({\n      cx: element.width / 2,\n      cy: element.height / 2,\n      r: element.width / 2 + DEFAULT_OFFSET\n    }, OUTLINE_STYLE));\n\n  } else if (is(element, 'bpmn:DataObjectReference') && isStandardSize(element, 'bpmn:DataObjectReference')) {\n\n    outline = createPath(\n      DATA_OBJECT_REFERENCE_OUTLINE_PATH,\n      { x: -6, y: -6 },\n      OUTLINE_STYLE\n    );\n\n  } else if (is(element, 'bpmn:DataStoreReference') && isStandardSize(element, 'bpmn:DataStoreReference')) {\n\n    outline = createPath(\n      DATA_STORE_REFERENCE_OUTLINE_PATH,\n      { x: -6, y: -6 },\n      OUTLINE_STYLE\n    );\n  }\n\n  return outline;\n};\n\n/**\n * Updates the outline for a given element.\n * Returns true if the update for the given element was handled by this provider.\n *\n * @param {Element} element\n * @param {Outline} outline\n * @returns {boolean}\n */\nOutlineProvider.prototype.updateOutline = function(element, outline) {\n\n  if (isLabel(element)) {\n    return;\n  }\n\n  if (isAny(element, [ 'bpmn:SubProcess', 'bpmn:Group' ])) {\n\n    svgAttr(outline, {\n      width: element.width + DEFAULT_OFFSET * 2,\n      height: element.height + DEFAULT_OFFSET * 2\n    });\n\n    return true;\n\n  } else if (isAny(element, [\n    'bpmn:Event',\n    'bpmn:Gateway',\n    'bpmn:DataStoreReference',\n    'bpmn:DataObjectReference'\n  ])) {\n    return true;\n  }\n\n  return false;\n};\n\n\n// helpers //////////\n\nfunction isStandardSize(element, type) {\n  var standardSize;\n\n  if (type === 'bpmn:DataObjectReference') {\n    standardSize = DATA_OBJECT_REFERENCE_STANDARD_SIZE;\n  } else if (type === 'bpmn:DataStoreReference') {\n    standardSize = DATA_STORE_REFERENCE_STANDARD_SIZE;\n  }\n\n  return element.width === standardSize.width\n          && element.height === standardSize.height;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}