"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[76],{97076:(e,s,r)=>{r.r(s),r.d(s,{Render:()=>u,execute:()=>l,metadata:()=>c});r(9950);var t=r(67818),o=r(49162),n=r(44414);const a=()=>{if("undefined"!==typeof DOMParser)return DOMParser;throw new Error("DOMParser not available (browser environment required for BPMN parsing)")},c=new o.Q5({id:"business-process-workflows",level:o.x.COMPONENT,title:"Business Process Workflows",description:"Scans BPMN diagrams and extracts workflow definitions with @name attributes",parameters:[new o.hI({name:"bpmnDirectory",type:"string",required:!1,defaultValue:"input/images",description:"Directory containing BPMN files"}),new o.hI({name:"includeSubprocesses",type:"boolean",required:!1,defaultValue:!0,description:"Whether to include subprocess definitions"})],tags:["component","business-process","workflows","bpmn"],version:"1.0.0",componentTypes:["businessProcess"]});async function l(e){const{locale:s="en_US",bpmnDirectory:r="input/images",includeSubprocesses:t=!0,storage:n}=e,a=[],c=[],l=[];try{const e=await n.listFiles("".concat(r,"/*.bpmn"));0===e.length&&a.push(p(s,"no_bpmn_files",{directory:r}));for(const r of e)try{const e=await n.readFile(r),s=await i(e.toString("utf-8"),r,t);s&&l.push(s)}catch(d){c.push(p(s,"parse_error",{file:r,error:d.message}))}const u={totalWorkflows:l.length,totalProcesses:l.reduce((e,s)=>{var r;return e+((null===(r=s.processes)||void 0===r?void 0:r.length)||0)},0),totalSubprocesses:l.reduce((e,s)=>{var r;return e+((null===(r=s.subprocesses)||void 0===r?void 0:r.length)||0)},0),totalTasks:l.reduce((e,s)=>{var r;return e+((null===(r=s.tasks)||void 0===r?void 0:r.length)||0)},0)};return new o.uC({structured:{workflows:l,statistics:u,bpmnDirectory:r,filesScanned:e.length},narrative:m(s,"success",{workflows:l,stats:u}),warnings:a,errors:c,meta:{cacheHint:new o.kv({scope:"repository",key:"business-process-workflows-".concat(r),ttl:1800,dependencies:e})}})}catch(d){return new o.uC({structured:{workflows:[],statistics:{}},narrative:m(s,"error"),errors:[p(s,"general_error",{error:d.message})],meta:{cacheHint:new o.kv({scope:"repository",key:"business-process-workflows-".concat(r),ttl:60,dependencies:[]})}})}}async function i(e,s,r){try{const t=a(),o=(new t).parseFromString(e,"text/xml"),n=o.getElementsByTagName("parsererror")[0];if(n)throw new Error("XML parsing error: ".concat(n.textContent));const c={fileName:s,processes:[],subprocesses:[],tasks:[],name:null,description:null},l=o.getElementsByTagNameNS("*","process")||o.getElementsByTagName("process");for(let e=0;e<l.length;e++){const s=l[e],r={id:s.getAttribute("id"),name:s.getAttribute("name")||d(s),isExecutable:"true"===s.getAttribute("isExecutable"),type:"process"};if(r.name&&r.name.includes("@name")){const e=r.name.match(/@name\s*=\s*["']([^"']+)["']/);e&&(r.extractedName=e[1])}c.processes.push(r),!c.name&&r.name&&(c.name=r.extractedName||r.name)}if(r){const e=o.getElementsByTagNameNS("*","subProcess")||o.getElementsByTagName("subProcess");for(let s=0;s<e.length;s++){const r=e[s],t={id:r.getAttribute("id"),name:r.getAttribute("name")||d(r),type:"subprocess"};if(t.name&&t.name.includes("@name")){const e=t.name.match(/@name\s*=\s*["']([^"']+)["']/);e&&(t.extractedName=e[1])}c.subprocesses.push(t)}}const i=["task","userTask","serviceTask","scriptTask","manualTask","businessRuleTask"];for(const e of i){const s=o.getElementsByTagNameNS("*",e)||o.getElementsByTagName(e);for(let r=0;r<s.length;r++){const t=s[r],o={id:t.getAttribute("id"),name:t.getAttribute("name")||d(t),type:e};c.tasks.push(o)}}return c}catch(t){throw new Error("Failed to parse BPMN file ".concat(s,": ").concat(t.message))}}function d(e){const s=e.getElementsByTagNameNS("*","documentation")[0]||e.getElementsByTagName("documentation")[0];if(s&&s.textContent){const e=s.textContent.trim(),r=e.match(/@name\s*=\s*["']([^"']+)["']/);return r?r[1]:e.length>0?e:null}return null}function u(e){var s,r;let{result:o,locale:a="en_US"}=e;const{t:c}=(0,t.Bd)();if(!o||!o.structured)return(0,n.jsx)("div",{className:"faq-answer error",children:c("dak.faq.workflows.no_data")});const{workflows:l,statistics:i,bpmnDirectory:d,filesScanned:u}=o.structured;return(0,n.jsxs)("div",{className:"faq-answer success",children:[(0,n.jsx)("h4",{children:c("dak.faq.workflows.title")}),(0,n.jsxs)("div",{className:"workflow-summary",children:[(0,n.jsxs)("p",{children:[(0,n.jsxs)("strong",{children:[c("dak.faq.workflows.scanned_files"),": "]}),u," files in ",(0,n.jsx)("code",{children:d})]}),i&&(0,n.jsxs)("div",{className:"workflow-stats",children:[(0,n.jsxs)("div",{className:"stat-item",children:[(0,n.jsxs)("span",{className:"stat-label",children:[c("dak.faq.workflows.total_workflows"),": "]}),(0,n.jsx)("span",{className:"stat-value",children:i.totalWorkflows})]}),(0,n.jsxs)("div",{className:"stat-item",children:[(0,n.jsxs)("span",{className:"stat-label",children:[c("dak.faq.workflows.total_processes"),": "]}),(0,n.jsx)("span",{className:"stat-value",children:i.totalProcesses})]}),(0,n.jsxs)("div",{className:"stat-item",children:[(0,n.jsxs)("span",{className:"stat-label",children:[c("dak.faq.workflows.total_subprocesses"),": "]}),(0,n.jsx)("span",{className:"stat-value",children:i.totalSubprocesses})]}),(0,n.jsxs)("div",{className:"stat-item",children:[(0,n.jsxs)("span",{className:"stat-label",children:[c("dak.faq.workflows.total_tasks"),": "]}),(0,n.jsx)("span",{className:"stat-value",children:i.totalTasks})]})]})]}),l.length>0&&(0,n.jsxs)("div",{className:"workflows-list",children:[(0,n.jsx)("h5",{children:c("dak.faq.workflows.workflows_found")}),l.map((e,s)=>(0,n.jsxs)("div",{className:"workflow-item",children:[(0,n.jsxs)("div",{className:"workflow-header",children:[(0,n.jsx)("strong",{children:e.name||e.fileName}),(0,n.jsxs)("small",{className:"file-name",children:["(",e.fileName,")"]})]}),e.processes.length>0&&(0,n.jsxs)("div",{className:"workflow-processes",children:[(0,n.jsxs)("strong",{children:[c("dak.faq.workflows.processes"),": "]}),(0,n.jsx)("ul",{children:e.processes.map((e,s)=>(0,n.jsxs)("li",{children:[e.extractedName||e.name||e.id,e.isExecutable&&(0,n.jsx)("span",{className:"executable-badge",children:"Executable"})]},s))})]}),e.subprocesses.length>0&&(0,n.jsxs)("div",{className:"workflow-subprocesses",children:[(0,n.jsxs)("strong",{children:[c("dak.faq.workflows.subprocesses"),": "]}),(0,n.jsx)("ul",{children:e.subprocesses.map((e,s)=>(0,n.jsx)("li",{children:e.extractedName||e.name||e.id},s))})]})]},s))]}),null===(s=o.warnings)||void 0===s?void 0:s.map((e,s)=>(0,n.jsx)("div",{className:"warning-message",children:e},s)),null===(r=o.errors)||void 0===r?void 0:r.map((e,s)=>(0,n.jsx)("div",{className:"error-message",children:e},s))]})}function m(e,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const t={en_US:{success:(()=>{const{workflows:e,stats:s}=r;let t="<h4>Business Process Workflows</h4>";return 0===e.length?t+="<p>No workflows found in BPMN files.</p>":(t+="<p>Found <strong>".concat(e.length,"</strong> workflow(s) with <strong>").concat(s.totalProcesses,"</strong> process(es).</p>"),t+="<ul>",e.forEach(e=>{t+="<li><strong>".concat(e.name||e.fileName,"</strong> - ").concat(e.processes.length," process(es)</li>")}),t+="</ul>"),t})(),error:'<h4>Business Process Workflows</h4><p class="error">An error occurred while scanning BPMN files.</p>'},fr_FR:{success:(()=>{const{workflows:e,stats:s}=r;let t="<h4>Flux de processus m\xe9tier</h4>";return 0===e.length?t+="<p>Aucun flux de travail trouv\xe9 dans les fichiers BPMN.</p>":(t+="<p>Trouv\xe9 <strong>".concat(e.length,"</strong> flux de travail avec <strong>").concat(s.totalProcesses,"</strong> processus.</p>"),t+="<ul>",e.forEach(e=>{t+="<li><strong>".concat(e.name||e.fileName,"</strong> - ").concat(e.processes.length," processus</li>")}),t+="</ul>"),t})(),error:"<h4>Flux de processus m\xe9tier</h4><p class=\"error\">Une erreur s'est produite lors de l'analyse des fichiers BPMN.</p>"},es_ES:{success:(()=>{const{workflows:e,stats:s}=r;let t="<h4>Flujos de procesos de negocio</h4>";return 0===e.length?t+="<p>No se encontraron flujos de trabajo en los archivos BPMN.</p>":(t+="<p>Se encontraron <strong>".concat(e.length,"</strong> flujo(s) de trabajo con <strong>").concat(s.totalProcesses,"</strong> proceso(s).</p>"),t+="<ul>",e.forEach(e=>{t+="<li><strong>".concat(e.name||e.fileName,"</strong> - ").concat(e.processes.length," proceso(s)</li>")}),t+="</ul>"),t})(),error:'<h4>Flujos de procesos de negocio</h4><p class="error">Ocurri\xf3 un error al escanear los archivos BPMN.</p>'}},o=t[e]||t.en_US;return o[s]||o.error}function p(e,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const t={en_US:{no_bpmn_files:"No BPMN files found in directory: ".concat(r.directory),parse_error:"Failed to parse BPMN file ".concat(r.file,": ").concat(r.error),general_error:"Error scanning business processes: ".concat(r.error)},fr_FR:{no_bpmn_files:"Aucun fichier BPMN trouv\xe9 dans le r\xe9pertoire: ".concat(r.directory),parse_error:"\xc9chec de l'analyse du fichier BPMN ".concat(r.file,": ").concat(r.error),general_error:"Erreur lors de l'analyse des processus m\xe9tier: ".concat(r.error)},es_ES:{no_bpmn_files:"No se encontraron archivos BPMN en el directorio: ".concat(r.directory),parse_error:"Error al analizar el archivo BPMN ".concat(r.file,": ").concat(r.error),general_error:"Error al escanear procesos de negocio: ".concat(r.error)}};return(t[e]||t.en_US)[s]||"Unknown error: ".concat(s)}}}]);