"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[584],{1932:(e,t,s)=>{s.d(t,{Rb:()=>n,hX:()=>o});const n=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(e=>"/"===e.pathname||""===e.pathname)(t)?null!==s&&void 0!==s&&s.current?s.current.focus():window.dispatchEvent(new CustomEvent("focusPATInput")):e("/",{state:{focusPATInput:!0}})},o=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((e=>!!(null!==e&&void 0!==e&&e.ctrlKey||null!==e&&void 0!==e&&e.metaKey))(e)){const e=(e=>{const t="/sgex/copilot-fix-930",s=window.location.origin,n=e.startsWith("/")?e.slice(1):e;if(!t)return"".concat(s,"/").concat(n);const o=t.endsWith("/")?t:t+"/";return"".concat(s).concat(o).concat(n)})(t);window.open(e,"_blank","noopener,noreferrer")}else n?s(t,{state:n}):s(t)}},15429:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(29946),o=s(85571);const a=new class{constructor(){this.storageKey="sgex_tracked_items",this.repositoryFiltersKey="sgex_repository_filters",this.logger=o.A.getLogger("IssueTrackingService"),this.syncInterval=null,this.syncIntervalMs=3e5}_getStorageKey(){return this.storageKey}_getStoredData(){try{const e=localStorage.getItem(this._getStorageKey());return e?JSON.parse(e):{trackedItems:{}}}catch(e){return this.logger.error("Failed to parse stored tracking data:",e),{trackedItems:{}}}}_getRepositoryFilters(){try{const e=localStorage.getItem(this.repositoryFiltersKey);return e?JSON.parse(e):{}}catch(e){return this.logger.error("Failed to parse repository filters:",e),{}}}_saveRepositoryFilters(e){try{return localStorage.setItem(this.repositoryFiltersKey,JSON.stringify(e)),!0}catch(t){return this.logger.error("Failed to save repository filters:",t),!1}}_saveStoredData(e){try{return localStorage.setItem(this._getStorageKey(),JSON.stringify(e)),!0}catch(t){return this.logger.error("Failed to save tracking data:",t),!1}}async _getCurrentUsername(){if(!n.A.isAuth())return null;try{return(await n.A.getCurrentUser()).login}catch(e){return this.logger.error("Failed to get current user:",e),null}}async getTrackedItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e&&(e=await this._getCurrentUsername(),!e))return{issues:[],pullRequests:[]};const t=this._getStoredData().trackedItems[e]||{issues:[],pullRequests:[]};return{issues:t.issues||[],pullRequests:t.pullRequests||[]}}async _initializeDefaultFilters(e){const t=this._getRepositoryFilters();t[e]||(t[e]={});const s=await this.getTrackedRepositories();let n=!1;for(const o of s)t[e][o]||(t[e][o]="litlfred/sgex"===o?{hidden:!1}:{hidden:!0},n=!0);n&&this._saveRepositoryFilters(t)}async enableDAKRepositoryFilter(e){const t=await this._getCurrentUsername();if(!t||!e)return!1;let s=this._getRepositoryFilters();return s[t]||(await this._initializeDefaultFilters(t),s=this._getRepositoryFilters()),s[t]||(s[t]={}),s[t][e]={hidden:!1},this._saveRepositoryFilters(s)}async cleanupNonDAKRepositories(){const e=await this._getCurrentUsername();if(!e)return!1;const t=await this.getTrackedItems(e);let s=!1;const n=[];for(const a of t.issues){await this._isAllowedRepository(a.repository)?n.push(a):(this.logger.info("Removing tracked issue from non-DAK repository: ".concat(a.repository,"#").concat(a.number)),s=!0)}const o=[];for(const a of t.pullRequests){await this._isAllowedRepository(a.repository)?o.push(a):(this.logger.info("Removing tracked PR from non-DAK repository: ".concat(a.repository,"#").concat(a.number)),s=!0)}if(s){const t=this._getStoredData();t.trackedItems[e]={issues:n,pullRequests:o},this._saveStoredData(t),this.logger.info("Cleaned up tracked items from non-DAK repositories")}return s}async getFilteredTrackedItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await this.cleanupNonDAKRepositories();const t=await this.getTrackedItems(e);if(!e&&(e=await this._getCurrentUsername(),!e))return t;await this._initializeDefaultFilters(e);const s=this._getRepositoryFilters()[e]||{};return{issues:t.issues.filter(e=>{const t=e.repository;return void 0!==s[t]?!s[t].hidden:"litlfred/sgex"===t}),pullRequests:t.pullRequests.filter(e=>{const t=e.repository;return void 0!==s[t]?!s[t].hidden:"litlfred/sgex"===t})}}async addTrackedIssue(e){const t=await this._getCurrentUsername();if(!t)return this.logger.warn("Cannot track issue: user not authenticated"),!1;const s=this._getStoredData();s.trackedItems[t]||(s.trackedItems[t]={issues:[],pullRequests:[]});if(s.trackedItems[t].issues.find(t=>t.id===e.id||t.number===e.number))return this.logger.debug("Issue already tracked:",e.number),!0;const n={id:e.id,number:e.number,title:e.title,html_url:e.html_url,created_at:e.created_at||(new Date).toISOString(),updated_at:e.updated_at||e.created_at||(new Date).toISOString(),repository:e.repository||"litlfred/sgex",state:e.state||"open",labels:e.labels||[],trackedAt:(new Date).toISOString()};s.trackedItems[t].issues.push(n);const o=this._saveStoredData(s);return o&&(this.logger.info("Issue tracked successfully:",n.number),this.startBackgroundSync(),this._findRelatedPRs(t,n)),o}async addTrackedPR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=await this._getCurrentUsername();if(!s)return this.logger.warn("Cannot track PR: user not authenticated"),!1;const n=this._getStoredData();n.trackedItems[s]||(n.trackedItems[s]={issues:[],pullRequests:[]});const o=n.trackedItems[s].pullRequests.find(t=>t.id===e.id||t.number===e.number);if(o)return t.length>0&&(o.linkedIssues=[...new Set([...o.linkedIssues||[],...t])],this._saveStoredData(n)),!0;const a={id:e.id,number:e.number,title:e.title,html_url:e.html_url,created_at:e.created_at||(new Date).toISOString(),updated_at:e.updated_at||e.created_at||(new Date).toISOString(),repository:e.repository||"litlfred/sgex",state:e.state||"open",linkedIssues:t,trackedAt:(new Date).toISOString()};n.trackedItems[s].pullRequests.push(a);const r=this._saveStoredData(n);return r&&this.logger.info("PR tracked successfully:",a.number),r}async removeTrackedIssue(e){const t=await this._getCurrentUsername();if(!t)return!1;const s=this._getStoredData();if(!s.trackedItems[t]||!s.trackedItems[t].issues)return!1;const n=s.trackedItems[t].issues.length;return s.trackedItems[t].issues=s.trackedItems[t].issues.filter(t=>t.number!==e),s.trackedItems[t].issues.length<n&&(this._saveStoredData(s),this.logger.info("Issue untracked:",e),!0)}async removeTrackedPR(e){const t=await this._getCurrentUsername();if(!t)return!1;const s=this._getStoredData();if(!s.trackedItems[t]||!s.trackedItems[t].pullRequests)return!1;const n=s.trackedItems[t].pullRequests.length;return s.trackedItems[t].pullRequests=s.trackedItems[t].pullRequests.filter(t=>t.number!==e),s.trackedItems[t].pullRequests.length<n&&(this._saveStoredData(s),this.logger.info("PR untracked:",e),!0)}async getTrackedCounts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=await this.getFilteredTrackedItems(e);return{issues:t.issues.length,pullRequests:t.pullRequests.length,total:t.issues.length+t.pullRequests.length}}async setRepositoryVisibility(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=await this._getCurrentUsername();if(!s)return!1;const n=this._getRepositoryFilters();return n[s]||(n[s]={}),n[s][e]||(n[s][e]={}),n[s][e].hidden=t,this._saveRepositoryFilters(n)}async getRepositoryFilters(){const e=await this._getCurrentUsername();if(!e)return{};return this._getRepositoryFilters()[e]||{}}async getTrackedRepositories(){const e=await this.getTrackedItems(),t=new Set;return e.issues.forEach(e=>t.add(e.repository)),e.pullRequests.forEach(e=>t.add(e.repository)),Array.from(t).sort()}async _isAllowedRepository(e){if("litlfred/sgex"===e)return!0;try{const[t,s]=e.split("/");if(!t||!s)return!1;return(await n.A.checkSmartGuidelinesCompatibility(t,s)).compatible}catch(t){return this.logger.debug("Failed to check DAK compatibility for ".concat(e,":"),t),!1}}async _discoverUserActivity(e,t){const s=[],o=[];try{const a="is:issue author:".concat(e," state:open"),r=await n.A.searchIssues(a,{per_page:50}),i="is:issue commenter:".concat(e," state:open"),l=await n.A.searchIssues(i,{per_page:50}),c="is:pr author:".concat(e," state:open"),d=await n.A.searchPullRequests(c,{per_page:50}),u="is:pr commenter:".concat(e," state:open"),h=await n.A.searchPullRequests(u,{per_page:50}),g=[...r.items||[],...l.items||[]],m=this._deduplicateItems(g),p=[...d.items||[],...h.items||[]],f=this._deduplicateItems(p);for(const e of m){if(!t.issues.some(t=>t.id===e.id||t.number===e.number)){const t=e.repository?e.repository.full_name:"unknown/unknown";if(!await this._isAllowedRepository(t)){this.logger.debug("Skipping issue from non-DAK repository: ".concat(t));continue}const n={id:e.id,number:e.number,title:e.title,html_url:e.html_url,created_at:e.created_at,updated_at:e.updated_at||e.created_at,repository:t,state:e.state,labels:e.labels||[],trackedAt:(new Date).toISOString(),discoveredBy:"sync"};s.push(n)}}for(const e of f){if(!t.pullRequests.some(t=>t.id===e.id||t.number===e.number)){const t=e.repository?e.repository.full_name:"unknown/unknown";if(!await this._isAllowedRepository(t)){this.logger.debug("Skipping PR from non-DAK repository: ".concat(t));continue}const s={id:e.id,number:e.number,title:e.title,html_url:e.html_url,created_at:e.created_at,updated_at:e.updated_at||e.created_at,repository:t,state:e.state,linkedIssues:[],trackedAt:(new Date).toISOString(),discoveredBy:"sync"};o.push(s)}}}catch(a){this.logger.error("Failed to discover user activity:",a)}return{issues:s,pullRequests:o}}_deduplicateItems(e){const t=new Set;return e.filter(e=>!t.has(e.id)&&(t.add(e.id),!0))}async _findRelatedPRs(e,t){if(n.A.isAuth())try{const[e,s]=t.repository.split("/");if(!e||!s)return;const o="is:pr repo:".concat(e,"/").concat(s," is:unmerged ").concat(t.number),a=await n.A.searchPullRequests(o);if(a&&a.items&&a.items.length>0)for(const n of a.items){const e="".concat(n.title," ").concat(n.body||"").toLowerCase(),s=["#".concat(t.number),"issue ".concat(t.number),"fixes #".concat(t.number),"closes #".concat(t.number),"resolves #".concat(t.number)];s.some(t=>e.includes(t.toLowerCase()))&&await this.addTrackedPR({id:n.id,number:n.number,title:n.title,html_url:n.html_url,created_at:n.created_at,repository:t.repository,state:n.state},[t.number])}}catch(s){this.logger.error("Failed to find related PRs:",s)}}async syncTrackedItems(){if(!n.A.isAuth())return;const e=await this._getCurrentUsername();if(!e)return;const t=await this.getTrackedItems(e);let s=!1;for(const a of t.issues)try{const[e,t]=a.repository.split("/");if(!e||!t)continue;const o=await n.A.getIssue(e,t,a.number);o&&o.state!==a.state&&(a.state=o.state,a.updated_at=o.updated_at||a.updated_at,s=!0)}catch(o){this.logger.debug("Failed to sync issue ".concat(a.number,":"),o)}for(const a of t.pullRequests)try{const[e,t]=a.repository.split("/");if(!e||!t)continue;const o=await n.A.getPullRequest(e,t,a.number);o&&o.state!==a.state&&(a.state=o.state,a.updated_at=o.updated_at||a.updated_at,s=!0)}catch(o){this.logger.debug("Failed to sync PR ".concat(a.number,":"),o)}try{const n=await this._discoverUserActivity(e,t);(n.issues.length>0||n.pullRequests.length>0)&&(t.issues.push(...n.issues),t.pullRequests.push(...n.pullRequests),s=!0,this.logger.info("Discovered new user activity",{newIssues:n.issues.length,newPRs:n.pullRequests.length}))}catch(o){this.logger.debug("Failed to discover new user activity:",o)}if(s){const s=this._getStoredData();s.trackedItems[e]=t,this._saveStoredData(s),this.logger.info("Tracked items synced successfully")}}startBackgroundSync(){this.syncInterval||(this.syncInterval=setInterval(()=>{this.syncTrackedItems().catch(e=>{this.logger.error("Background sync failed:",e)})},this.syncIntervalMs),this.logger.debug("Background sync started"))}stopBackgroundSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null,this.logger.debug("Background sync stopped"))}async clearTrackedItems(){const e=await this._getCurrentUsername();if(!e)return!1;const t=this._getStoredData();return!!t.trackedItems[e]&&(delete t.trackedItems[e],this._saveStoredData(t),this.logger.info("All tracked items cleared for user:",e),!0)}clearAllData(){localStorage.removeItem(this._getStorageKey()),this.stopBackgroundSync(),this.logger.info("All tracking data cleared")}}},19374:(e,t,s)=>{s.d(t,{A:()=>u});var n=s(9950),o=s(67818),a=s(88259),r=s(67770),i=s(26987),l=s(95388),c=s(44414);const d=e=>{let{tutorialId:t,onClose:s,contextData:r={}}=e;const{t:d}=(0,o.Bd)(),[u,h]=(0,n.useState)(null),[g,m]=(0,n.useState)(0),[p,f]=(0,n.useState)({}),[b,v]=(0,n.useState)(!0),[w,y]=(0,n.useState)(!1),k=(0,a.A)("sgex-mascot.png");(0,n.useEffect)(()=>{if(t){const e=i.A.getTutorial(t);if(e){h(e);const s=i.A.loadTutorialProgress(t,r);s&&s.state&&(m(s.state.currentStepIndex||0),f(s.state.context||{}))}v(!1)}},[t,r]),(0,n.useEffect)(()=>{u&&g>=0&&i.A.saveTutorialProgress(t,{currentStepIndex:g,context:p},r)},[u,t,g,p,r]);const x=e=>{e.target===e.currentTarget&&s()},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!u)return;let n=g;if("next"===e){const e=i.A.processStep(u,g,t,p);if(e.isComplete)return void s();n=void 0!==e.stepIndex?e.stepIndex+1:g+1,e.context&&f(e.context)}else"previous"===e?n=Math.max(0,g-1):"number"===typeof e&&(n=e);m(n),y(!1)};return b?(0,c.jsx)("div",{className:"enhanced-tutorial-overlay",onClick:x,children:(0,c.jsx)("div",{className:"enhanced-tutorial-modal",children:(0,c.jsxs)("div",{className:"tutorial-loading",children:[(0,c.jsx)("img",{src:k,alt:(0,l.lm)(d,l.ld.MASCOT_HELPER,"SGEX Helper"),className:"loading-mascot"}),(0,c.jsx)("p",{children:"Loading tutorial..."})]})})}):u?(0,c.jsx)("div",{className:"enhanced-tutorial-overlay",onClick:x,children:(0,c.jsxs)("div",{className:"enhanced-tutorial-modal",children:[(0,c.jsxs)("div",{className:"tutorial-modal-header",children:[(0,c.jsxs)("div",{className:"tutorial-title-section",children:[u.badge&&(0,c.jsx)("img",{src:u.badge,alt:"",className:"tutorial-badge",role:"presentation"}),(0,c.jsxs)("div",{className:"tutorial-title-info",children:[(0,c.jsx)("h2",{children:u.title}),u.description&&(0,c.jsx)("p",{className:"tutorial-description",children:u.description})]})]}),(0,c.jsx)("button",{className:"tutorial-close-btn",onClick:s,"aria-label":"Close tutorial",children:"\xd7"})]}),(0,c.jsx)("div",{className:"tutorial-modal-content",children:(()=>{if(!u||!u.steps||g>=u.steps.length)return null;const e=u.steps[g],t=(i.A.processStep(u,g,null,p),e.branches&&e.branches.length>0);return(0,c.jsxs)("div",{className:"enhanced-tutorial-step",children:[(0,c.jsxs)("div",{className:"tutorial-header",children:[(0,c.jsx)("h3",{children:e.title}),(0,c.jsxs)("div",{className:"step-counter",children:[(0,c.jsx)("span",{className:"current-step",children:g+1}),(0,c.jsx)("span",{className:"step-separator",children:"of"}),(0,c.jsx)("span",{className:"total-steps",children:u.steps.length})]})]}),(0,c.jsxs)("div",{className:"tutorial-content",children:[(0,c.jsx)("div",{className:"step-content",dangerouslySetInnerHTML:{__html:e.content}}),t&&(0,c.jsx)("div",{className:"tutorial-choices",children:(0,c.jsx)("div",{className:"choices-container",children:e.branches.map((e,t)=>(0,c.jsxs)("button",{className:"choice-btn",onClick:()=>{return t=e.choice,void N("next",t);var t},"aria-describedby":"choice-desc-".concat(t),children:[(0,c.jsx)("span",{className:"choice-label",children:e.label}),e.description&&(0,c.jsx)("span",{id:"choice-desc-".concat(t),className:"choice-description",children:e.description})]},t))})})]}),(0,c.jsxs)("div",{className:"tutorial-controls",children:[(0,c.jsxs)("button",{onClick:()=>N("previous"),disabled:0===g,className:"nav-btn nav-btn-prev","aria-label":"Previous step",children:[(0,c.jsx)("span",{className:"nav-icon",children:"\u2190"}),(0,c.jsx)("span",{className:"nav-label",children:"Previous"})]}),(0,c.jsx)("div",{className:"step-indicators",children:u.steps.map((e,t)=>(0,c.jsx)("button",{className:"step-dot ".concat(t===g?"active":""," ").concat(t<g?"completed":""),onClick:()=>N(t),"aria-label":"Go to step ".concat(t+1,": ").concat(u.steps[t].title),title:u.steps[t].title},t))}),!t&&(0,c.jsxs)("button",{onClick:()=>N("next"),disabled:g>=u.steps.length-1,className:"nav-btn nav-btn-next","aria-label":"Next step",children:[(0,c.jsx)("span",{className:"nav-label",children:g>=u.steps.length-1?"Complete":"Next"}),(0,c.jsx)("span",{className:"nav-icon",children:"\u2192"})]})]})]})})()})]})}):(0,c.jsx)("div",{className:"enhanced-tutorial-overlay",onClick:x,children:(0,c.jsx)("div",{className:"enhanced-tutorial-modal",children:(0,c.jsxs)("div",{className:"tutorial-error",children:[(0,c.jsx)("img",{src:k,alt:(0,l.lm)(d,l.ld.MASCOT_HELPER,"SGEX Helper"),className:"error-mascot"}),(0,c.jsx)("h3",{children:"Tutorial Not Found"}),(0,c.jsx)("p",{children:"The requested tutorial could not be found."}),(0,c.jsx)("button",{onClick:s,className:"error-close-btn",children:"Close"})]})})})},u=e=>{let{topic:t,helpTopic:u,contextData:h,onClose:g,tutorialId:m}=e;const{t:p}=(0,o.Bd)(),[f,b]=(0,n.useState)(!1),[v,w]=(0,n.useState)(0),[y,k]=(0,n.useState)(!1),[x,N]=(0,n.useState)(!1),[j,S]=(0,n.useState)(m);(0,n.useEffect)(()=>{if(m){if(i.A.getTutorial(m))return S(m),void N(!0)}if(u&&"slideshow"===u.type&&u.id){const e=i.A.convertHelpTopicToTutorial(u);if(e)return i.A.registerTutorial("legacy-".concat(u.id),e),S("legacy-".concat(u.id)),void N(!0)}},[m,u]);const A=(0,a.A)("sgex-mascot.png");(0,n.useEffect)(()=>{const e=(e,t)=>{var s;const n=new URLSearchParams(t);h.pageId&&n.set("sgex_page",h.pageId);const o=window.location.href;return n.set("sgex_current_url",o),null!==(s=h.selectedDak)&&void 0!==s&&s.name&&n.set("sgex_selected_dak",h.selectedDak.name),"".concat(e,"?").concat(n.toString())};return window.helpModalInstance={openSgexIssue:t=>{if("bug"===t)return void k(!0);let s={};switch(t){case"feature":s.template="feature_request.yml",s.labels="enhancement";break;case"question":s.template="question.yml",s.labels="question";break;case"documentation":s.template="documentation.yml",s.labels="documentation";break;case"blank":s.labels="blank-issue";break;default:s.labels="needs-triage"}const n=e("https://github.com/litlfred/sgex/issues/new",s);try{const e=window.open(n,"_blank");var o,a;if(!e||e.closed)null===(o=window.helpModalInstance)||void 0===o||null===(a=o.showFallbackInstructions)||void 0===a||a.call(o,"github-blocked",n,t);else setTimeout(()=>{try{var s,o;if(e.closed||!e.location||"about:blank"===e.location.href)e.close(),null===(s=window.helpModalInstance)||void 0===s||null===(o=s.showFallbackInstructions)||void 0===o||o.call(s,"github-blocked",n,t)}catch(a){}},1e3)}catch(l){var r,i;console.warn("Failed to open GitHub issue:",l),null===(r=window.helpModalInstance)||void 0===r||null===(i=r.showFallbackInstructions)||void 0===i||i.call(r,"github-blocked",n,t)}},openDakIssue:t=>{const s=h.repository||h.selectedDak;if(!s)return void console.warn("No DAK repository specified for feedback");const n="https://github.com/".concat(s.owner,"/").concat(s.name,"/issues/new");let o={};switch(t){case"bug":o.template="dak_bug_report.yml",o.labels="bug,dak-issue";break;case"improvement":o.template="dak_feature_request.yml",o.labels="enhancement,dak-improvement";break;case"content":o.template="dak_content_error.yml",o.labels="content-issue,clinical-content";break;case"question":o.template="dak_question.yml",o.labels="question,dak-question";break;case"blank":o.labels="blank-issue,dak-feedback";break;default:o.labels="dak-feedback"}s.name&&(o.sgex_dak_repository="".concat(s.owner,"/").concat(s.name));const a=e(n,o);try{const e=window.open(a,"_blank");var r,i;if(!e||e.closed)null===(r=window.helpModalInstance)||void 0===r||null===(i=r.showFallbackInstructions)||void 0===i||i.call(r,"github-blocked",a,"dak-".concat(t));else setTimeout(()=>{try{var s,n;if(e.closed||!e.location||"about:blank"===e.location.href)e.close(),null===(s=window.helpModalInstance)||void 0===s||null===(n=s.showFallbackInstructions)||void 0===n||n.call(s,"github-blocked",a,"dak-".concat(t))}catch(o){}},1e3)}catch(d){var l,c;console.warn("Failed to open DAK issue:",d),null===(l=window.helpModalInstance)||void 0===l||null===(c=l.showFallbackInstructions)||void 0===c||c.call(l,"github-blocked",a,"dak-".concat(t))}},showFallbackInstructions:(e,t,s)=>{const n={"github-blocked":{title:"GitHub Access Required",message:'\n              <div class="help-fallback-notice">\n                <h4>\ud83d\udd17 GitHub Link Blocked</h4>\n                <p>It looks like GitHub access is restricted in your current environment.</p>\n                <h5>To report this issue:</h5>\n                <ol>\n                  <li>Copy the link below</li>\n                  <li>Open it in a browser with GitHub access</li>\n                  <li>Fill out the issue template</li>\n                </ol>\n                <div class="fallback-url">\n                  <strong>Link to copy:</strong><br>\n                  <textarea readonly onclick="this.select()" style="width: 100%; height: 60px; margin: 5px 0; padding: 5px; font-family: monospace; font-size: 12px;">'.concat(t,'</textarea>\n                </div>\n                <p><em>\ud83d\udca1 Tip: You can also email us at <a href="mailto:smart@who.int">smart@who.int</a> with your issue details.</em></p>\n              </div>\n            ')}}[e]||{title:"External Link Issue",message:"<p>Unable to open external link. Please copy and visit: <br><code>".concat(t,"</code></p>")},o=document.querySelector(".help-fallback-overlay");o&&o.remove();const a=document.createElement("div");a.className="help-fallback-overlay",a.style.cssText="\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.7);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 10000;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        ";const r=document.createElement("div");r.style.cssText="\n          background: var(--who-card-bg, white);\n          border-radius: 8px;\n          padding: 20px;\n          max-width: 500px;\n          max-height: 80vh;\n          overflow-y: auto;\n          position: relative;\n          box-shadow: 0 10px 25px rgba(0,0,0,0.3);\n        ",r.innerHTML='\n          <button onclick="this.closest(\'.help-fallback-overlay\').remove()" style="\n            position: absolute;\n            top: 10px;\n            right: 15px;\n            background: none;\n            border: none;\n            font-size: 24px;\n            cursor: pointer;\n            color: var(--who-text-secondary, #666);\n          ">\xd7</button>\n          <h3 style="margin-top: 0; color: var(--who-text-primary, #333);">'.concat(n.title,'</h3>\n          <div style="color: var(--who-text-primary, #555); line-height: 1.5;">').concat(n.message,"</div>\n        "),a.appendChild(r),document.body.appendChild(a),a.addEventListener("click",e=>{e.target===a&&a.remove()}),setTimeout(()=>{document.body.contains(a)&&a.remove()},3e4)},triggerBugReport:e=>{Promise.resolve().then(s.bind(s,61115)).then(t=>{let{default:s}=t;s.triggerBugReport(e)})}},()=>{delete window.helpModalInstance}},[h]);const C=e=>{e.target===e.currentTarget&&g()},R=()=>{v>0&&w(v-1)},I=()=>{null!==u&&void 0!==u&&u.content&&v<u.content.length-1&&w(v+1)},T=()=>{if(null===u||void 0===u||!u.content||"slideshow"!==u.type)return null;const e=u.content,t=e[v];let s=t.content;return"provide-dak-feedback"===u.id&&(s=s.replace(/onclick="this\.openDakIssue\('([^']+)'\)"/g,"onclick=\"window.helpModalInstance?.openDakIssue('$1')\"")),(0,c.jsxs)("div",{className:"help-slideshow",children:[(0,c.jsxs)("div",{className:"slideshow-header",children:[(0,c.jsx)("h3",{children:t.title}),(0,c.jsxs)("div",{className:"slide-counter",children:[v+1," of ",e.length]})]}),(0,c.jsx)("div",{className:"slideshow-content",dangerouslySetInnerHTML:{__html:s}}),(0,c.jsxs)("div",{className:"slideshow-controls",children:[(0,c.jsx)("button",{onClick:R,disabled:0===v,className:"slide-nav-btn",children:"\u2190 Previous"}),(0,c.jsx)("div",{className:"slide-dots",children:e.map((e,t)=>(0,c.jsx)("button",{className:"slide-dot ".concat(t===v?"active":""),onClick:()=>w(t),"aria-label":"Go to slide ".concat(t+1)},t))}),(0,c.jsx)("button",{onClick:I,disabled:v===e.length-1,className:"slide-nav-btn",children:"Next \u2192"})]})]})},{title:_,content:P}=(()=>{if(u)return{title:u.title,content:"slideshow"===u.type?T():(0,c.jsx)("div",{className:"help-content",children:(0,c.jsxs)("div",{className:"mascot-message",children:[(0,c.jsx)("img",{src:A,alt:(0,l.lm)(p,l.ld.MASCOT_HELPER,"SGEX Helper"),className:"help-mascot"}),(0,c.jsx)("div",{className:"message-bubble",children:(0,c.jsx)("div",{dangerouslySetInnerHTML:{__html:u.content}})})]})})};switch(t){case"github-token":case"pat-help":return{title:"GitHub Authentication Help",content:(0,c.jsx)("div",{className:"help-content",children:(0,c.jsxs)("div",{className:"mascot-message",children:[(0,c.jsx)("img",{src:A,alt:(0,l.lm)(p,l.ld.MASCOT_HELPER,"SGEX Helper"),className:"help-mascot"}),(0,c.jsxs)("div",{className:"message-bubble",children:[(0,c.jsx)("p",{children:"SGEX Workbench uses GitHub Personal Access Tokens for secure authentication!"}),(0,c.jsx)("p",{children:(0,c.jsx)("strong",{children:"How it works:"})}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:"Create a Personal Access Token in your GitHub settings"}),(0,c.jsx)("li",{children:"Enter the token in the login form"}),(0,c.jsx)("li",{children:"SGEX will securely connect to your GitHub repositories"}),(0,c.jsx)("li",{children:"No backend server required - works entirely in your browser!"})]}),(0,c.jsx)("p",{children:"This approach ensures compliance with our no-backend requirement while keeping your data secure."}),(0,c.jsx)("p",{children:"If you're having trouble, please use the menu above to get additional support."})]})]})})};default:return{title:"SGEX Workbench Help",content:(0,c.jsx)("div",{className:"help-content",children:(0,c.jsxs)("div",{className:"mascot-message",children:[(0,c.jsx)("img",{src:A,alt:(0,l.lm)(p,l.ld.MASCOT_HELPER,"SGEX Helper"),className:"help-mascot"}),(0,c.jsxs)("div",{className:"message-bubble",children:[(0,c.jsx)("p",{children:"Hi! I'm here to help you with the SGEX Workbench."}),(0,c.jsx)("p",{children:"Use the menu in the top right to get additional support options."})]})]})})}}})();return x&&j?(0,c.jsx)(d,{tutorialId:j,onClose:()=>{N(!1),S(null),g()},contextData:h}):y?(0,c.jsx)("div",{className:"help-modal-overlay bug-report-overlay",onClick:C,children:(0,c.jsx)(r.A,{onClose:()=>{k(!1),g()},contextData:h})}):(0,c.jsx)("div",{className:"help-modal-overlay",onClick:C,children:(0,c.jsxs)("div",{className:"help-modal",children:[(0,c.jsxs)("div",{className:"help-modal-header",children:[(0,c.jsx)("h2",{children:_}),(0,c.jsxs)("div",{className:"help-modal-actions",children:[(0,c.jsxs)("button",{className:"hamburger-menu-btn",onClick:()=>{b(!f)},"aria-label":"More options",children:[(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{})]}),(0,c.jsx)("button",{className:"close-btn",onClick:g,"aria-label":"Close help",children:"\xd7"})]}),f&&(0,c.jsxs)("div",{className:"help-menu-dropdown",children:[(0,c.jsxs)("button",{onClick:()=>{window.open("/docs/overview","_blank")},className:"menu-item",children:[(0,c.jsx)("span",{className:"menu-icon",children:"\ud83d\udcd6"}),"Documentation"]}),(0,c.jsxs)("button",{onClick:()=>{k(!0)},className:"menu-item",children:[(0,c.jsx)("img",{src:"/sgex/bug-report-icon.svg",alt:(0,l.lm)(p,l.ld.ICON_BUG_REPORT,"Bug Report"),className:"menu-icon"}),"File Bug Report"]}),h.repository&&(0,c.jsxs)("button",{onClick:()=>{var e;h.repository&&(null!==(e=window.helpModalInstance)&&void 0!==e&&e.openDakIssue&&window.helpModalInstance.openDakIssue("content"))},className:"menu-item",children:[(0,c.jsx)("span",{className:"menu-icon",children:"\ud83d\udcdd"}),"Provide DAK Feedback"]}),(0,c.jsxs)("button",{onClick:()=>{const e=(null===u||void 0===u?void 0:u.title)||t,s=encodeURIComponent("SGEX Workbench Support: ".concat(e)),n=encodeURIComponent("\nHello SMART Guidelines Team,\n\nI need assistance with the SGEX Workbench.\n\nTopic: ".concat(e,"\nPage: ").concat(window.location.pathname,"\n\nPlease describe your question or issue:\n\n\nBest regards,\n    ").trim());window.open("mailto:smart@who.int?subject=".concat(s,"&body=").concat(n))},className:"menu-item",children:[(0,c.jsx)("span",{className:"menu-icon",children:"\ud83d\udce7"}),"Email Support"]})]})]}),(0,c.jsx)("div",{className:"help-modal-content",children:P})]})})}},26987:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(89379);const o=new class{constructor(){this.tutorials=new Map,this.categories={"getting-started":"Getting Started",authentication:"Authentication","dak-management":"DAK Management","content-editing":"Content Editing",collaboration:"Collaboration",troubleshooting:"Troubleshooting"},this.initializeBuiltInTutorials()}registerTutorial(e,t){if(!/^[a-zA-Z0-9-]+$/.test(e))throw new Error("Invalid tutorial ID format: ".concat(e,". Must contain only alphanumeric characters and dashes."));this.validateTutorialDefinition(t),this.tutorials.set(e,(0,n.A)((0,n.A)({id:e},t),{},{registeredAt:(new Date).toISOString()}))}getTutorial(e){return this.tutorials.get(e)||null}getTutorialsForPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[];for(const[,n]of this.tutorials)n.pages&&n.pages.includes(e)&&this.isTutorialApplicable(n,t)&&s.push(n);return s.sort((e,t)=>(e.priority||0)-(t.priority||0))}getTutorialsByCategory(e){const t=[];for(const[,s]of this.tutorials)s.category===e&&t.push(s);return t.sort((e,t)=>(e.title||"").localeCompare(t.title||""))}getCategories(){return(0,n.A)({},this.categories)}processStep(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e||!e.steps||t>=e.steps.length)return{step:null,isComplete:!0};const o=e.steps[t];if(o.branches&&s){const t=o.branches.find(e=>e.choice===s);if(t&&(t.updateContext&&Object.assign(n,t.updateContext),void 0!==t.targetStep))return{step:e.steps[t.targetStep]||null,stepIndex:t.targetStep,isComplete:t.targetStep>=e.steps.length,context:n}}return{step:o,stepIndex:t,isComplete:!1,hasNext:t+1<e.steps.length,hasPrevious:t>0,context:n}}validateTutorialDefinition(e){const t=["title","steps"];for(const s of t)if(!e[s])throw new Error("Tutorial definition missing required field: ".concat(s));if(!Array.isArray(e.steps)||0===e.steps.length)throw new Error("Tutorial must have at least one step");e.steps.forEach((e,t)=>{if(!e.title||!e.content)throw new Error("Step ".concat(t," missing required title or content"));if(e.branches){if(!Array.isArray(e.branches))throw new Error("Step ".concat(t," branches must be an array"));e.branches.forEach((e,s)=>{if(!e.choice||!e.label)throw new Error("Step ".concat(t," branch ").concat(s," missing choice or label"))})}})}isTutorialApplicable(e,t){return!(e.requiresAuth&&!t.isAuthenticated)&&(!(e.requiresDak&&!t.repository)&&(!e.condition||"function"!==typeof e.condition||e.condition(t)))}initializeBuiltInTutorials(){this.registerTutorial("github-pat-setup",{title:"How to Create a GitHub Personal Access Token",description:"Step-by-step guide to creating and configuring GitHub Personal Access Tokens for SGEX",category:"authentication",pages:["landing-page-unauthenticated","welcome","pat-login","pat-setup-instructions"],priority:1,badge:"/sgex/cat-paw-lock-icon.svg",steps:[{title:"Step 1: Go to GitHub Settings",content:'\n            <p>Navigate to your GitHub account settings:</p>\n            <ol>\n              <li>Click your profile picture in the top right</li>\n              <li>Select "Settings" from the dropdown</li>\n              <li>Go to "Developer settings" \u2192 "Personal access tokens"</li>\n              <li>Choose "Fine-grained tokens" (recommended) or "Tokens (classic)"</li>\n            </ol>\n            <div class="help-tip">\n              <strong>\ud83d\udca1 Tip:</strong> Fine-grained tokens provide better security with repository-specific access.\n            </div>\n          '},{title:"Step 2: Generate New Token",content:'\n            <p>Create your new token:</p>\n            <ol>\n              <li>Click "Generate new token"</li>\n              <li>Give it a descriptive name like "SGEX Workbench"</li>\n              <li>Set expiration (90 days recommended)</li>\n              <li>Select repository access (specific repos or all)</li>\n            </ol>\n            <div class="help-warning">\n              <strong>\u26a0\ufe0f Important:</strong> You\'ll only see the token once, so copy it immediately!\n            </div>\n          '},{title:"Step 3: Set Required Permissions",content:"\n            <h4>Which token type are you creating?</h4>\n            <p>The permissions needed depend on your token type:</p>\n          ",branches:[{choice:"fine-grained",label:"\ud83c\udfaf Fine-grained Token (Recommended)",targetStep:3},{choice:"classic",label:"\ud83d\udd27 Classic Token",targetStep:4}]},{title:"Fine-grained Token Permissions",content:'\n            <p>For <strong>fine-grained tokens</strong>, enable these permissions:</p>\n            <ul>\n              <li><strong>Contents:</strong> Read and Write</li>\n              <li><strong>Metadata:</strong> Read</li>\n              <li><strong>Pull requests:</strong> Read and Write</li>\n            </ul>\n            <div class="help-tip">\n              <strong>\ud83d\udd12 Security:</strong> Fine-grained tokens provide better security with minimal permissions.\n            </div>\n          ',next:5},{title:"Classic Token Permissions",content:'\n            <p>For <strong>classic tokens</strong>, select these scopes:</p>\n            <ul>\n              <li><strong>repo</strong> - Full control of private repositories</li>\n              <li><strong>read:org</strong> - Read org and team membership</li>\n            </ul>\n            <div class="help-tip">\n              <strong>\ud83d\udcdd Note:</strong> Classic tokens have broader permissions but simpler setup.\n            </div>\n          ',next:5},{title:"Step 4: Use Your Token",content:'\n            <p>Now you can authenticate with SGEX:</p>\n            <ol>\n              <li>Copy your newly generated token</li>\n              <li>Paste it into the login form</li>\n              <li>Click "Sign in with Personal Access Token"</li>\n            </ol>\n            <div class="help-tip">\n              <strong>\ud83d\udd12 Security:</strong> Your token is stored securely in your browser and never shared with servers.\n            </div>\n          '}]}),this.registerTutorial("dak-components-overview",{title:"Understanding DAK Components",description:"Learn about the 8 core components of WHO SMART Guidelines Digital Adaptation Kits",category:"dak-management",pages:["dak-dashboard"],priority:1,steps:[{title:"WHO SMART Guidelines DAK Components",content:'\n            <p>Digital Adaptation Kits (DAKs) contain 8 core components organized in two levels:</p>\n            <h4>Level 2: Business Logic & Processes</h4>\n            <ul>\n              <li><strong>Business Processes:</strong> BPMN workflows</li>\n              <li><strong>Decision Support Logic:</strong> DMN decision tables</li>\n              <li><strong>Indicators & Measures:</strong> Performance metrics</li>\n              <li><strong>Data Entry Forms:</strong> Structured questionnaires</li>\n            </ul>\n            <h4>Level 3: Technical Implementation</h4>\n            <ul>\n              <li><strong>Terminology:</strong> Code systems and value sets</li>\n              <li><strong>FHIR Profiles:</strong> Resource structure definitions</li>\n              <li><strong>FHIR Extensions:</strong> Custom data elements</li>\n              <li><strong>Test Data & Examples:</strong> Sample data for validation</li>\n            </ul>\n            <div class="help-tip">\n              <strong>\ud83d\udca1 Tip:</strong> Start with Level 2 components to define business logic, then move to Level 3 for technical implementation.\n            </div>\n          '},{title:"Where to Start?",content:"\n            <h4>What would you like to focus on first?</h4>\n            <p>Choose your primary interest to continue with specific guidance:</p>\n          ",branches:[{choice:"business-logic",label:"\ud83d\udccb Business Logic & Clinical Workflows",targetStep:2},{choice:"technical-implementation",label:"\u2699\ufe0f Technical Implementation & FHIR",targetStep:4},{choice:"overview-complete",label:"\u2705 Just wanted an overview, I'm good to go!",targetStep:6}]},{title:"Business Logic Components",content:'\n            <p>Business logic components define <em>what</em> your DAK does:</p>\n            <h4>\ud83d\udd04 Business Processes</h4>\n            <p>Define clinical workflows and care processes using BPMN diagrams.</p>\n            <h4>\ud83e\udde0 Decision Support Logic</h4>\n            <p>Create decision tables and rules using DMN notation.</p>\n            <h4>\ud83d\udcca Indicators & Measures</h4>\n            <p>Define performance metrics and measurement criteria.</p>\n            <h4>\ud83d\udcdd Data Entry Forms</h4>\n            <p>Design structured questionnaires for data collection.</p>\n            <div class="help-tip">\n              <strong>\ud83c\udfaf Best Practice:</strong> Start with business processes to map out your clinical workflow, then add decision logic and forms.\n            </div>\n          ',next:5},{title:"Getting Started with Business Logic",content:'\n            <h4>Recommended starting order:</h4>\n            <ol>\n              <li><strong>Business Processes:</strong> Map your clinical workflow first</li>\n              <li><strong>Data Entry Forms:</strong> Design forms for data collection points</li>\n              <li><strong>Decision Support Logic:</strong> Add decision rules and logic</li>\n              <li><strong>Indicators & Measures:</strong> Define success metrics</li>\n            </ol>\n            <div class="help-tip">\n              <strong>\ud83d\udca1 Next Steps:</strong> Click on "Business Processes" in the dashboard to start creating your first workflow diagram.\n            </div>\n          ',next:6},{title:"Technical Implementation Components",content:'\n            <p>Technical components define <em>how</em> your DAK integrates with systems:</p>\n            <h4>\ud83c\udff7\ufe0f Terminology</h4>\n            <p>Define code systems, value sets, and concept mappings.</p>\n            <h4>\ud83d\udccb FHIR Profiles</h4>\n            <p>Structure definitions for healthcare data resources.</p>\n            <h4>\ud83d\udd27 FHIR Extensions</h4>\n            <p>Custom data elements and extensions to FHIR.</p>\n            <h4>\ud83e\uddea Test Data & Examples</h4>\n            <p>Sample data and test cases for validation.</p>\n            <div class="help-tip">\n              <strong>\ud83c\udfaf Best Practice:</strong> Define terminology first, then create profiles, extensions, and test data.\n            </div>\n          ',next:5},{title:"Getting Started with Technical Implementation",content:'\n            <h4>Recommended starting order:</h4>\n            <ol>\n              <li><strong>Terminology:</strong> Define your code systems and value sets</li>\n              <li><strong>FHIR Profiles:</strong> Create resource structure definitions</li>\n              <li><strong>FHIR Extensions:</strong> Add custom data elements as needed</li>\n              <li><strong>Test Data & Examples:</strong> Create validation examples</li>\n            </ol>\n            <div class="help-tip">\n              <strong>\ud83d\udca1 Next Steps:</strong> Click on "Terminology" in the dashboard to start defining your code systems and value sets.\n            </div>\n          '},{title:"You're Ready to Go!",content:'\n            <p>Great! You now understand the DAK component structure:</p>\n            <ul>\n              <li>\u2705 Know the 8 core DAK components</li>\n              <li>\u2705 Understand Level 2 vs Level 3 distinction</li>\n              <li>\u2705 Ready to start building your DAK</li>\n            </ul>\n            <div class="help-tip">\n              <strong>\ud83d\ude80 Pro Tip:</strong> Use the contextual help on each component page for specific guidance as you work.\n            </div>\n          '}]}),this.registerTutorial("tutorial-framework-demo",{title:"Enhanced Tutorial System Demo",description:"Demonstration of the new branching tutorial capabilities in SGEX",category:"getting-started",pages:["dak-dashboard","landing-page-authenticated"],priority:0,badge:"/sgex/cat-paw-icon.svg",steps:[{title:"Welcome to Enhanced Tutorials!",content:'\n            <p>\ud83c\udf89 Welcome to the new enhanced tutorial system in SGEX Workbench!</p>\n            <p>This tutorial demonstrates the new features:</p>\n            <ul>\n              <li><strong>Branching Logic:</strong> Choose your own path through tutorials</li>\n              <li><strong>Progress Tracking:</strong> Your progress is automatically saved</li>\n              <li><strong>Interactive Choices:</strong> Click buttons to make decisions</li>\n              <li><strong>Contextual Content:</strong> Tutorials adapt to your current workflow</li>\n            </ul>\n            <div class="help-tip">\n              <strong>\ud83d\ude80 New Feature:</strong> This tutorial system supports conditional navigation based on user choices!\n            </div>\n          '},{title:"Choose Your Learning Path",content:"\n            <p>Let's demonstrate branching logic! What would you like to learn about?</p>\n            <h4>Select your area of interest:</h4>\n          ",branches:[{choice:"tutorial-features",label:"\ud83d\udd27 Tutorial System Features",description:"Learn about the capabilities of the new tutorial framework"},{choice:"accessibility-features",label:"\u267f Accessibility & Standards",description:"Discover how tutorials support accessibility and internationalization"},{choice:"developer-features",label:"\ud83d\udc69\u200d\ud83d\udcbb Developer Integration",description:"See how developers can create and integrate new tutorials"}]},{title:"Tutorial System Features",content:'\n            <p>You chose to learn about tutorial features! Here\'s what makes this system powerful:</p>\n            <h4>\ud83c\udfaf Key Features</h4>\n            <ul>\n              <li><strong>Branching Navigation:</strong> Users can choose different paths through content</li>\n              <li><strong>Progress Persistence:</strong> Tutorial state is saved automatically</li>\n              <li><strong>Context Awareness:</strong> Tutorials adapt based on current page and user state</li>\n              <li><strong>Category Organization:</strong> Tutorials are organized by topic and difficulty</li>\n              <li><strong>Responsive Design:</strong> Works perfectly on desktop and mobile</li>\n            </ul>\n            <div class="help-tip">\n              <strong>\ud83d\udca1 Implementation:</strong> Tutorials use alphanumeric IDs with dashes for easy identification and management.\n            </div>\n          ',next:5},{title:"Accessibility & Standards Compliance",content:'\n            <p>You chose accessibility! Great choice - SGEX tutorials are built with standards in mind:</p>\n            <h4>\u267f Accessibility Features</h4>\n            <ul>\n              <li><strong>WCAG 2.1 AA Compliance:</strong> Proper color contrast and keyboard navigation</li>\n              <li><strong>Screen Reader Support:</strong> Semantic HTML and ARIA labels</li>\n              <li><strong>Keyboard Navigation:</strong> Full keyboard support for all interactions</li>\n              <li><strong>Focus Management:</strong> Clear focus indicators and logical tab order</li>\n            </ul>\n            <h4>\ud83c\udf0d Internationalization</h4>\n            <ul>\n              <li><strong>i18n Ready:</strong> All content supports translation</li>\n              <li><strong>RTL Support:</strong> Right-to-left languages supported</li>\n              <li><strong>Default Locale:</strong> en_US with fallback support</li>\n            </ul>\n            <div class="help-tip">\n              <strong>\ud83c\udfc6 Standards:</strong> Follows WHO Enterprise Architecture guidelines for healthcare applications.\n            </div>\n          ',next:5},{title:"Developer Integration Guide",content:'\n            <p>You chose the developer path! Here\'s how to integrate tutorials into your components:</p>\n            <h4>\ud83d\udc69\u200d\ud83d\udcbb Integration Methods</h4>\n            <ul>\n              <li><strong>TutorialManager:</strong> Higher-order component for page-level tutorial management</li>\n              <li><strong>TutorialLauncher:</strong> Button component to launch specific tutorials</li>\n              <li><strong>useTutorials Hook:</strong> React hook for functional components</li>\n              <li><strong>Direct Service:</strong> Import tutorialService for advanced usage</li>\n            </ul>\n            <div class="help-tip">\n              <strong>\ud83d\udee0\ufe0f Code Example:</strong><br>\n              <code>import { TutorialLauncher } from \'../components/TutorialManager\';</code><br>\n              <code>&lt;TutorialLauncher tutorialId="my-tutorial" /&gt;</code>\n            </div>\n          ',next:5},{title:"Tutorial Complete!",content:"\n            <p>\ud83c\udf8a Congratulations! You've experienced the enhanced tutorial system!</p>\n            <h4>What You've Learned</h4>\n            <ul>\n              <li>\u2705 How branching logic works in tutorials</li>\n              <li>\u2705 The key features available to content creators</li>\n              <li>\u2705 Accessibility and internationalization support</li>\n              <li>\u2705 Developer integration options</li>\n            </ul>\n            <h4>\ud83d\ude80 Next Steps</h4>\n            <p>Now you can:</p>\n            <ul>\n              <li>Create your own tutorials using the framework</li>\n              <li>Use the TutorialManager components in your pages</li>\n              <li>Explore other tutorials available in the system</li>\n            </ul>\n            <div class=\"help-tip\">\n              <strong>\ud83d\udca1 Tip:</strong> Look for the contextual help button on any page to access page-specific tutorials!\n            </div>\n          "}]})}convertHelpTopicToTutorial(e){return e&&"slideshow"===e.type?{id:e.id,title:e.title,description:"Converted from help topic: ".concat(e.title),category:"legacy",badge:e.badge,steps:e.content.map(e=>({title:e.title,content:e.content}))}:null}getTutorialStateKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"sgex_tutorial_".concat(e)+(t.repository?"_".concat(t.repository.owner,"_").concat(t.repository.name):"")}saveTutorialProgress(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const n=this.getTutorialStateKey(e,s),o={tutorialId:e,state:t,lastAccessed:(new Date).toISOString(),contextData:{page:s.pageId,repository:s.repository?"".concat(s.repository.owner,"/").concat(s.repository.name):null}};localStorage.setItem(n,JSON.stringify(o))}catch(n){console.warn("Failed to save tutorial progress:",n)}}loadTutorialProgress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const s=this.getTutorialStateKey(e,t),n=localStorage.getItem(s);if(n)return JSON.parse(n)}catch(s){console.warn("Failed to load tutorial progress:",s)}return null}}},29166:(e,t,s)=>{s.d(t,{A:()=>A});var n=s(89379),o=s(9950),a=s(85001),r=s(67818),i=s(61115),l=(s(26987),s(29473)),c=s(18354),d=s(85571);const u=new class{constructor(){this.logger=d.A.getLogger("CacheManagementService")}clearAllCache(){try{this.logger.info("Starting complete cache clear operation");const e=l.A.clearAllCaches();return this.logger.debug("Repository cache cleared",{success:e}),c.default.clearAllBranchContext(),this.logger.debug("Branch context cleared"),this.clearAllStagingGrounds(),this.logger.debug("Staging ground data cleared"),this.clearOtherSGEXData(),this.logger.debug("Other SGEX data cleared"),this.logger.info("Complete cache clear operation completed successfully"),!0}catch(e){return this.logger.error("Error during cache clear operation",{error:e.message}),console.error("Error clearing cache:",e),!1}}clearAllStagingGrounds(){try{const e=Object.keys(localStorage);e.filter(e=>e.startsWith("sgex_staging_")).forEach(e=>{localStorage.removeItem(e),this.logger.debug("Removed staging ground",{key:e})});return e.filter(e=>e.startsWith("sgex_staging_history_")).forEach(e=>{localStorage.removeItem(e),this.logger.debug("Removed staging ground history",{key:e})}),!0}catch(e){return this.logger.error("Error clearing staging grounds",{error:e.message}),console.warn("Error clearing staging grounds:",e),!1}}clearOtherSGEXData(){try{const e=Object.keys(localStorage);e.filter(e=>e.startsWith("sgex_")&&!e.startsWith("sgex_repo_cache_")&&!e.startsWith("sgex_staging_")).forEach(e=>{localStorage.removeItem(e),this.logger.debug("Removed other SGEX data",{key:e})});const t=Object.keys(sessionStorage);return t.filter(e=>e.startsWith("sgex_")&&"sgex_branch_context"!==e).forEach(e=>{sessionStorage.removeItem(e),this.logger.debug("Removed SGEX session data",{key:e})}),!0}catch(e){return this.logger.error("Error clearing other SGEX data",{error:e.message}),console.warn("Error clearing other SGEX data:",e),!1}}getCacheInfo(){try{const t={repositoryCache:{count:0,keys:[]},branchContext:{hasData:!1,repositoryCount:0},stagingGround:{count:0,keys:[]},other:{count:0,keys:[]}},s=Object.keys(localStorage);t.repositoryCache.keys=s.filter(e=>e.startsWith("sgex_repo_cache_")),t.repositoryCache.count=t.repositoryCache.keys.length,t.stagingGround.keys=s.filter(e=>e.startsWith("sgex_staging_")||e.startsWith("sgex_staging_history_")),t.stagingGround.count=t.stagingGround.keys.length,t.other.keys=s.filter(e=>e.startsWith("sgex_")&&!e.startsWith("sgex_repo_cache_")&&!e.startsWith("sgex_staging_")),t.other.count=t.other.keys.length;try{const e=sessionStorage.getItem("sgex_branch_context");if(e){const s=JSON.parse(e);t.branchContext.hasData=!0,t.branchContext.repositoryCount=Object.keys(s).length}}catch(e){}return t}catch(t){return this.logger.error("Error getting cache info",{error:t.message}),null}}getUncommittedWork(){try{const e=[],t=Object.keys(localStorage);return t.filter(e=>e.startsWith("sgex_staging_")&&!e.includes("_history_")).forEach(t=>{try{const s=JSON.parse(localStorage.getItem(t));if(s&&s.files&&s.files.length>0){const n=t.replace("sgex_staging_","").split("_"),o=n.pop(),a=n.join("_");e.push({repository:a,branch:o,fileCount:s.files.length,lastModified:s.timestamp?new Date(s.timestamp):null,message:s.message||""})}}catch(s){}}),e}catch(e){return this.logger.error("Error checking uncommitted work",{error:e.message}),[]}}};var h=s(15429),g=s(29946),m=s(19374),p=s(67770),f=s(44414);const b=e=>{let{onClose:t}=e;const[s,n]=(0,o.useState)({issues:[],pullRequests:[]}),[a,r]=(0,o.useState)(!0),[i,l]=(0,o.useState)(null),[c,d]=(0,o.useState)("issues"),[u,m]=(0,o.useState)(!1),[p,b]=(0,o.useState)(!1),[v,w]=(0,o.useState)({}),[y,k]=(0,o.useState)([]),[x,N]=(0,o.useState)("updated"),[j,S]=(0,o.useState)("desc");(0,o.useEffect)(()=>{A()},[]);const A=async()=>{try{r(!0),l(null);const[e,t,s]=await Promise.all([h.A.getFilteredTrackedItems(),h.A.getRepositoryFilters(),h.A.getTrackedRepositories()]);n(e),w(t),k(s)}catch(e){console.error("Failed to load tracked items:",e),l("Failed to load tracked items")}finally{r(!1)}},C=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),R=(e,t,s)=>[...e].sort((e,n)=>{let o=0;switch(t){case"number":o=e.number-n.number;break;case"created":o=new Date(e.created_at)-new Date(n.created_at);break;default:o=new Date(e.updated_at||e.created_at)-new Date(n.updated_at||n.created_at)}return"desc"===s?-o:o}),I=e=>{switch(e){case"open":return"#28a745";case"closed":return"#cb2431";case"merged":return"#6f42c1";default:return"#6a737d"}},T=e=>(0,f.jsxs)("div",{className:"tracked-item",children:[(0,f.jsxs)("div",{className:"tracked-item-header",children:[(0,f.jsx)("div",{className:"tracked-item-title",children:(0,f.jsxs)("a",{href:e.html_url,target:"_blank",rel:"noopener noreferrer",className:"tracked-item-link",children:["#",e.number," ",e.title]})}),(0,f.jsxs)("div",{className:"tracked-item-actions",children:[(0,f.jsx)("span",{className:"tracked-item-state",style:{backgroundColor:I(e.state)},children:e.state}),(0,f.jsx)("button",{onClick:()=>(async e=>{try{await h.A.removeTrackedIssue(e),await A()}catch(t){console.error("Failed to remove tracked issue:",t),l("Failed to remove tracked issue")}})(e.number),className:"tracked-item-remove",title:"Stop tracking this issue",children:"\xd7"})]})]}),(0,f.jsxs)("div",{className:"tracked-item-meta",children:[(0,f.jsx)("span",{className:"tracked-item-repo",children:e.repository}),(0,f.jsxs)("span",{className:"tracked-item-date",children:["Created ",C(e.created_at)]})]}),e.labels&&e.labels.length>0&&(0,f.jsx)("div",{className:"tracked-item-labels",children:e.labels.map((e,t)=>(0,f.jsx)("span",{className:"tracked-item-label",style:{backgroundColor:"#".concat(e.color)},children:e.name},t))})]},e.id),_=e=>(0,f.jsxs)("div",{className:"tracked-item",children:[(0,f.jsxs)("div",{className:"tracked-item-header",children:[(0,f.jsx)("div",{className:"tracked-item-title",children:(0,f.jsxs)("a",{href:e.html_url,target:"_blank",rel:"noopener noreferrer",className:"tracked-item-link",children:["#",e.number," ",e.title]})}),(0,f.jsxs)("div",{className:"tracked-item-actions",children:[(0,f.jsx)("span",{className:"tracked-item-state",style:{backgroundColor:I(e.state)},children:e.state}),(0,f.jsx)("button",{onClick:()=>(async e=>{try{await h.A.removeTrackedPR(e),await A()}catch(t){console.error("Failed to remove tracked PR:",t),l("Failed to remove tracked PR")}})(e.number),className:"tracked-item-remove",title:"Stop tracking this PR",children:"\xd7"})]})]}),(0,f.jsxs)("div",{className:"tracked-item-meta",children:[(0,f.jsx)("span",{className:"tracked-item-repo",children:e.repository}),(0,f.jsxs)("span",{className:"tracked-item-date",children:["Created ",C(e.created_at)]})]}),e.linkedIssues&&e.linkedIssues.length>0&&(0,f.jsxs)("div",{className:"tracked-item-linked",children:["Linked to issues: ",e.linkedIssues.map(e=>"#".concat(e)).join(", ")]})]},e.id);return a?(0,f.jsx)("div",{className:"tracked-items-modal-overlay",children:(0,f.jsxs)("div",{className:"tracked-items-modal",children:[(0,f.jsxs)("div",{className:"tracked-items-header",children:[(0,f.jsx)("h2",{children:"Tracked Items"}),(0,f.jsx)("button",{onClick:t,className:"tracked-items-close",children:"\xd7"})]}),(0,f.jsxs)("div",{className:"tracked-items-loading",children:[(0,f.jsx)("div",{className:"loading-spinner"}),(0,f.jsx)("p",{children:"Loading tracked items..."})]})]})}):(0,f.jsx)("div",{className:"tracked-items-modal-overlay",children:(0,f.jsxs)("div",{className:"tracked-items-modal",children:[(0,f.jsxs)("div",{className:"tracked-items-header",children:[(0,f.jsx)("h2",{children:"Tracked Items"}),(0,f.jsxs)("div",{className:"tracked-items-header-actions",children:[y.length>1&&(0,f.jsx)("button",{onClick:()=>b(!p),className:"tracked-items-filter-toggle",title:"Filter repositories",children:"\ud83d\udd3d Filters"}),g.A.isAuth()&&(0,f.jsxs)("button",{onClick:async()=>{if(g.A.isAuth())try{m(!0),await h.A.syncTrackedItems(),await A()}catch(e){console.error("Failed to sync tracked items:",e),l("Failed to sync tracked items")}finally{m(!1)}else l("Authentication required to sync items")},className:"tracked-items-sync",disabled:u,title:"Sync with GitHub to update status",children:[u?"\ud83d\udd04":"\u21bb"," ",u?"Syncing...":"Sync"]}),(0,f.jsx)("button",{onClick:t,className:"tracked-items-close",children:"\xd7"})]})]}),i&&(0,f.jsxs)("div",{className:"tracked-items-error",children:[i,(0,f.jsx)("button",{onClick:()=>l(null),children:"\xd7"})]}),p&&y.length>1&&(0,f.jsxs)("div",{className:"tracked-items-filters",children:[(0,f.jsx)("h3",{children:"Repository Filters"}),(0,f.jsx)("div",{className:"repository-filters-list",children:y.map(e=>{var t;return(0,f.jsx)("div",{className:"repository-filter-item",children:(0,f.jsxs)("label",{className:"repository-filter-label",children:[(0,f.jsx)("input",{type:"checkbox",checked:!(null!==(t=v[e])&&void 0!==t&&t.hidden),onChange:t=>(async(e,t)=>{try{await h.A.setRepositoryVisibility(e,t),await A()}catch(s){console.error("Failed to update repository filter:",s),l("Failed to update repository filter")}})(e,!t.target.checked),className:"repository-filter-checkbox"}),(0,f.jsx)("span",{className:"repository-filter-name",children:e})]})},e)})})]}),(0,f.jsx)("div",{className:"tracked-items-controls",children:(0,f.jsxs)("div",{className:"tracked-items-sort-controls",children:[(0,f.jsx)("label",{htmlFor:"sort-by",children:"Sort by:"}),(0,f.jsxs)("select",{id:"sort-by",value:x,onChange:e=>N(e.target.value),className:"sort-select",children:[(0,f.jsx)("option",{value:"updated",children:"Last Modified"}),(0,f.jsx)("option",{value:"created",children:"Created Date"}),(0,f.jsx)("option",{value:"number",children:"Issue/PR Number"})]}),(0,f.jsxs)("select",{value:j,onChange:e=>S(e.target.value),className:"sort-select",children:[(0,f.jsx)("option",{value:"desc",children:"Newest First"}),(0,f.jsx)("option",{value:"asc",children:"Oldest First"})]})]})}),(0,f.jsxs)("div",{className:"tracked-items-tabs",children:[(0,f.jsxs)("button",{className:"tracked-items-tab ".concat("issues"===c?"active":""),onClick:()=>d("issues"),children:["Issues (",s.issues.length,")"]}),(0,f.jsxs)("button",{className:"tracked-items-tab ".concat("pullRequests"===c?"active":""),onClick:()=>d("pullRequests"),children:["Pull Requests (",s.pullRequests.length,")"]})]}),(0,f.jsx)("div",{className:"tracked-items-content",children:(()=>{const e={issues:R((t=s).issues,x,j),pullRequests:R(t.pullRequests,x,j)};var t;return"issues"===c?(0,f.jsx)("div",{className:"tracked-items-list",children:0===e.issues.length?(0,f.jsxs)("div",{className:"tracked-items-empty",children:[(0,f.jsx)("p",{children:"No tracked issues yet."}),(0,f.jsx)("p",{children:"Issues you create while authenticated will appear here."})]}):e.issues.map(T)}):"pullRequests"===c?(0,f.jsx)("div",{className:"tracked-items-list",children:0===e.pullRequests.length?(0,f.jsxs)("div",{className:"tracked-items-empty",children:[(0,f.jsx)("p",{children:"No tracked pull requests yet."}),(0,f.jsx)("p",{children:"PRs related to your tracked issues will appear here automatically."})]}):e.pullRequests.map(_)}):null})()}),(0,f.jsx)("div",{className:"tracked-items-footer",children:(0,f.jsxs)("p",{className:"tracked-items-help",children:["Items are tracked locally in your browser.",g.A.isAuth()?" Use sync to update status from GitHub.":" Login to sync status with GitHub."]})})]})})},v=[{code:"en",name:"language.english",flag:"\ud83c\uddfa\ud83c\uddf8"},{code:"fr",name:"language.french",flag:"\ud83c\uddeb\ud83c\uddf7"},{code:"es",name:"language.spanish",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"ar",name:"language.arabic",flag:"\ud83c\uddf8\ud83c\udde6"},{code:"zh",name:"language.chinese",flag:"\ud83c\udde8\ud83c\uddf3"},{code:"ru",name:"language.russian",flag:"\ud83c\uddf7\ud83c\uddfa"}],w=[{code:"de",name:"Deutsch",englishName:"German",flag:"\ud83c\udde9\ud83c\uddea"},{code:"it",name:"Italiano",englishName:"Italian",flag:"\ud83c\uddee\ud83c\uddf9"},{code:"pt",name:"Portugu\xeas",englishName:"Portuguese",flag:"\ud83c\uddf5\ud83c\uddf9"},{code:"nl",name:"Nederlands",englishName:"Dutch",flag:"\ud83c\uddf3\ud83c\uddf1"},{code:"sv",name:"Svenska",englishName:"Swedish",flag:"\ud83c\uddf8\ud83c\uddea"},{code:"no",name:"Norsk",englishName:"Norwegian",flag:"\ud83c\uddf3\ud83c\uddf4"},{code:"da",name:"Dansk",englishName:"Danish",flag:"\ud83c\udde9\ud83c\uddf0"},{code:"fi",name:"Suomi",englishName:"Finnish",flag:"\ud83c\uddeb\ud83c\uddee"},{code:"pl",name:"Polski",englishName:"Polish",flag:"\ud83c\uddf5\ud83c\uddf1"},{code:"cs",name:"\u010ce\u0161tina",englishName:"Czech",flag:"\ud83c\udde8\ud83c\uddff"},{code:"sk",name:"Sloven\u010dina",englishName:"Slovak",flag:"\ud83c\uddf8\ud83c\uddf0"},{code:"hu",name:"Magyar",englishName:"Hungarian",flag:"\ud83c\udded\ud83c\uddfa"},{code:"ro",name:"Rom\xe2n\u0103",englishName:"Romanian",flag:"\ud83c\uddf7\ud83c\uddf4"},{code:"bg",name:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",englishName:"Bulgarian",flag:"\ud83c\udde7\ud83c\uddec"},{code:"hr",name:"Hrvatski",englishName:"Croatian",flag:"\ud83c\udded\ud83c\uddf7"},{code:"el",name:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",englishName:"Greek",flag:"\ud83c\uddec\ud83c\uddf7"},{code:"sr",name:"\u0421\u0440\u043f\u0441\u043a\u0438",englishName:"Serbian",flag:"\ud83c\uddf7\ud83c\uddf8"},{code:"sl",name:"Sloven\u0161\u010dina",englishName:"Slovenian",flag:"\ud83c\uddf8\ud83c\uddee"},{code:"lv",name:"Latvie\u0161u",englishName:"Latvian",flag:"\ud83c\uddf1\ud83c\uddfb"},{code:"lt",name:"Lietuvi\u0173",englishName:"Lithuanian",flag:"\ud83c\uddf1\ud83c\uddf9"},{code:"et",name:"Eesti",englishName:"Estonian",flag:"\ud83c\uddea\ud83c\uddea"},{code:"mt",name:"Malti",englishName:"Maltese",flag:"\ud83c\uddf2\ud83c\uddf9"},{code:"is",name:"\xcdslenska",englishName:"Icelandic",flag:"\ud83c\uddee\ud83c\uddf8"},{code:"ga",name:"Gaeilge",englishName:"Irish",flag:"\ud83c\uddee\ud83c\uddea"},{code:"cy",name:"Cymraeg",englishName:"Welsh",flag:"\ud83c\udff4"},{code:"eu",name:"Euskera",englishName:"Basque",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"ca",name:"Catal\xe0",englishName:"Catalan",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"gl",name:"Galego",englishName:"Galician",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"tr",name:"T\xfcrk\xe7e",englishName:"Turkish",flag:"\ud83c\uddf9\ud83c\uddf7"},{code:"he",name:"\u05e2\u05d1\u05e8\u05d9\u05ea",englishName:"Hebrew",flag:"\ud83c\uddee\ud83c\uddf1"},{code:"fa",name:"\u0641\u0627\u0631\u0633\u06cc",englishName:"Persian",flag:"\ud83c\uddee\ud83c\uddf7"},{code:"ur",name:"\u0627\u0631\u062f\u0648",englishName:"Urdu",flag:"\ud83c\uddf5\ud83c\uddf0"},{code:"ku",name:"Kurd\xee",englishName:"Kurdish",flag:"\ud83c\uddf9\ud83c\uddf7"},{code:"az",name:"Az\u0259rbaycan",englishName:"Azerbaijani",flag:"\ud83c\udde6\ud83c\uddff"},{code:"hy",name:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",englishName:"Armenian",flag:"\ud83c\udde6\ud83c\uddf2"},{code:"ka",name:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",englishName:"Georgian",flag:"\ud83c\uddec\ud83c\uddea"},{code:"ja",name:"\u65e5\u672c\u8a9e",englishName:"Japanese",flag:"\ud83c\uddef\ud83c\uddf5"},{code:"ko",name:"\ud55c\uad6d\uc5b4",englishName:"Korean",flag:"\ud83c\uddf0\ud83c\uddf7"},{code:"hi",name:"\u0939\u093f\u0928\u094d\u0926\u0940",englishName:"Hindi",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"th",name:"\u0e44\u0e17\u0e22",englishName:"Thai",flag:"\ud83c\uddf9\ud83c\udded"},{code:"vi",name:"Ti\u1ebfng Vi\u1ec7t",englishName:"Vietnamese",flag:"\ud83c\uddfb\ud83c\uddf3"},{code:"bn",name:"\u09ac\u09be\u0982\u09b2\u09be",englishName:"Bengali",flag:"\ud83c\udde7\ud83c\udde9"},{code:"ta",name:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",englishName:"Tamil",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"te",name:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",englishName:"Telugu",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"ml",name:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",englishName:"Malayalam",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"kn",name:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",englishName:"Kannada",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"gu",name:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",englishName:"Gujarati",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"mr",name:"\u092e\u0930\u093e\u0920\u0940",englishName:"Marathi",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"pa",name:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",englishName:"Punjabi",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"or",name:"\u0b13\u0b21\u0b3c\u0b3f\u0b06",englishName:"Odia",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"as",name:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",englishName:"Assamese",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"ne",name:"\u0928\u0947\u092a\u093e\u0932\u0940",englishName:"Nepali",flag:"\ud83c\uddf3\ud83c\uddf5"},{code:"si",name:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",englishName:"Sinhala",flag:"\ud83c\uddf1\ud83c\uddf0"},{code:"my",name:"\u1019\u103c\u1014\u103a\u1019\u102c",englishName:"Myanmar",flag:"\ud83c\uddf2\ud83c\uddf2"},{code:"km",name:"\u1781\u17d2\u1798\u17c2\u179a",englishName:"Khmer",flag:"\ud83c\uddf0\ud83c\udded"},{code:"lo",name:"\u0ea5\u0eb2\u0ea7",englishName:"Lao",flag:"\ud83c\uddf1\ud83c\udde6"},{code:"mn",name:"\u041c\u043e\u043d\u0433\u043e\u043b",englishName:"Mongolian",flag:"\ud83c\uddf2\ud83c\uddf3"},{code:"bo",name:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",englishName:"Tibetan",flag:"\ud83c\udde8\ud83c\uddf3"},{code:"dz",name:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",englishName:"Dzongkha",flag:"\ud83c\udde7\ud83c\uddf9"},{code:"id",name:"Bahasa Indonesia",englishName:"Indonesian",flag:"\ud83c\uddee\ud83c\udde9"},{code:"ms",name:"Bahasa Melayu",englishName:"Malay",flag:"\ud83c\uddf2\ud83c\uddfe"},{code:"tl",name:"Filipino",englishName:"Filipino",flag:"\ud83c\uddf5\ud83c\udded"},{code:"ceb",name:"Cebuano",englishName:"Cebuano",flag:"\ud83c\uddf5\ud83c\udded"},{code:"jv",name:"Basa Jawa",englishName:"Javanese",flag:"\ud83c\uddee\ud83c\udde9"},{code:"sw",name:"Kiswahili",englishName:"Swahili",flag:"\ud83c\uddf0\ud83c\uddea"},{code:"am",name:"\u12a0\u121b\u122d\u129b",englishName:"Amharic",flag:"\ud83c\uddea\ud83c\uddf9"},{code:"yo",name:"Yor\xf9b\xe1",englishName:"Yoruba",flag:"\ud83c\uddf3\ud83c\uddec"},{code:"ig",name:"Igbo",englishName:"Igbo",flag:"\ud83c\uddf3\ud83c\uddec"},{code:"ha",name:"Hausa",englishName:"Hausa",flag:"\ud83c\uddf3\ud83c\uddec"},{code:"zu",name:"isiZulu",englishName:"Zulu",flag:"\ud83c\uddff\ud83c\udde6"},{code:"af",name:"Afrikaans",englishName:"Afrikaans",flag:"\ud83c\uddff\ud83c\udde6"},{code:"xh",name:"isiXhosa",englishName:"Xhosa",flag:"\ud83c\uddff\ud83c\udde6"},{code:"st",name:"Sesotho",englishName:"Sotho",flag:"\ud83c\uddf1\ud83c\uddf8"},{code:"tn",name:"Setswana",englishName:"Tswana",flag:"\ud83c\udde7\ud83c\uddfc"},{code:"ss",name:"SiSwati",englishName:"Swati",flag:"\ud83c\uddf8\ud83c\uddff"},{code:"ve",name:"Tshiven\u1e13a",englishName:"Venda",flag:"\ud83c\uddff\ud83c\udde6"},{code:"ts",name:"Xitsonga",englishName:"Tsonga",flag:"\ud83c\uddff\ud83c\udde6"},{code:"sn",name:"ChiShona",englishName:"Shona",flag:"\ud83c\uddff\ud83c\uddfc"},{code:"ny",name:"ChiChe\u0175a",englishName:"Chewa",flag:"\ud83c\uddf2\ud83c\uddfc"},{code:"rw",name:"Kinyarwanda",englishName:"Kinyarwanda",flag:"\ud83c\uddf7\ud83c\uddfc"},{code:"rn",name:"Kirundi",englishName:"Kirundi",flag:"\ud83c\udde7\ud83c\uddee"},{code:"lg",name:"Luganda",englishName:"Luganda",flag:"\ud83c\uddfa\ud83c\uddec"},{code:"so",name:"Soomaali",englishName:"Somali",flag:"\ud83c\uddf8\ud83c\uddf4"},{code:"om",name:"Afaan Oromoo",englishName:"Oromo",flag:"\ud83c\uddea\ud83c\uddf9"},{code:"ti",name:"\u1275\u130d\u122d\u129b",englishName:"Tigrinya",flag:"\ud83c\uddea\ud83c\uddf7"},{code:"qu",name:"Quechua",englishName:"Quechua",flag:"\ud83c\uddf5\ud83c\uddea"},{code:"gn",name:"Guaran\xed",englishName:"Guarani",flag:"\ud83c\uddf5\ud83c\uddfe"},{code:"ay",name:"Aymar\xe1",englishName:"Aymara",flag:"\ud83c\udde7\ud83c\uddf4"},{code:"mi",name:"Te Reo M\u0101ori",englishName:"Maori",flag:"\ud83c\uddf3\ud83c\uddff"},{code:"sm",name:"Gagana Samoa",englishName:"Samoan",flag:"\ud83c\uddfc\ud83c\uddf8"},{code:"to",name:"Lea Faka-Tonga",englishName:"Tongan",flag:"\ud83c\uddf9\ud83c\uddf4"},{code:"fj",name:"Na Vosa Vakaviti",englishName:"Fijian",flag:"\ud83c\uddeb\ud83c\uddef"},{code:"fo",name:"F\xf8royskt",englishName:"Faroese",flag:"\ud83c\uddeb\ud83c\uddf4"},{code:"kl",name:"Kalaallisut",englishName:"Greenlandic",flag:"\ud83c\uddec\ud83c\uddf1"},{code:"se",name:"Davvis\xe1megiella",englishName:"Northern Sami",flag:"\ud83c\uddf3\ud83c\uddf4"},{code:"eo",name:"Esperanto",englishName:"Esperanto",flag:"\ud83c\udf0d"},{code:"la",name:"Latina",englishName:"Latin",flag:"\ud83c\uddfb\ud83c\udde6"},{code:"sa",name:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",englishName:"Sanskrit",flag:"\ud83c\uddee\ud83c\uddf3"}],y=e=>{let{className:t=""}=e;const{i18n:s,t:a}=(0,r.Bd)(),[i,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)(""),[u,h]=(0,o.useState)(()=>{const e=localStorage.getItem("sgex-selected-languages");return e?JSON.parse(e):v.map(e=>e.code)}),g=(0,o.useMemo)(()=>{const e=[...v];return u.forEach(t=>{if(!v.some(e=>e.code===t)){const s=w.find(e=>e.code===t);s&&e.push({code:s.code,name:s.name,englishName:s.englishName,flag:s.flag})}}),e.map(e=>(0,n.A)((0,n.A)({},e),{},{name:v.some(t=>t.code===e.code)?a(e.name):e.name}))},[u,a]),m=(0,o.useMemo)(()=>{if(!c)return[];const e=c.toLowerCase();return w.filter(t=>!u.includes(t.code)&&(t.name.toLowerCase().includes(e)||t.englishName.toLowerCase().includes(e)||t.code.toLowerCase().includes(e))).slice(0,10)},[c,u]),p=g.find(e=>e.code===s.language)||g[0];return(0,f.jsxs)("div",{className:"language-selector ".concat(t),children:[(0,f.jsxs)("button",{className:"language-toggle",onClick:()=>l(!i),"aria-label":a("language.select"),title:a("language.select"),children:[(0,f.jsx)("span",{className:"language-icon",children:"\ud83d\udc3e\ud83c\udfa7"}),(0,f.jsx)("span",{className:"language-name",children:null===p||void 0===p?void 0:p.name}),(0,f.jsx)("span",{className:"dropdown-arrow ".concat(i?"open":""),children:"\u25bc"})]}),i&&(0,f.jsxs)("div",{className:"language-dropdown",children:[g.map(e=>(0,f.jsxs)("button",{className:"language-option ".concat(s.language===e.code?"active":""),onClick:()=>{return t=e.code,s.changeLanguage(t),l(!1),void d("");var t},children:[(0,f.jsx)("span",{className:"language-flag",children:e.flag}),(0,f.jsx)("span",{className:"language-name",children:e.name}),s.language===e.code&&(0,f.jsx)("span",{className:"language-checkmark",children:"\u2713"})]},e.code)),(0,f.jsxs)("div",{className:"language-search-section",children:[(0,f.jsx)("div",{className:"language-search-divider"}),(0,f.jsx)("div",{className:"language-search-input",children:(0,f.jsx)("input",{type:"text",placeholder:a("language.search"),value:c,onChange:e=>{d(e.target.value)},className:"language-search",autoFocus:!1})}),m.map(e=>(0,f.jsxs)("button",{className:"language-option language-option-addable",onClick:()=>(e=>{const t=[...u,e];h(t),localStorage.setItem("sgex-selected-languages",JSON.stringify(t)),s.changeLanguage(e),l(!1),d("")})(e.code),children:[(0,f.jsx)("span",{className:"language-flag",children:e.flag}),(0,f.jsxs)("span",{className:"language-name",children:[e.name,e.englishName!==e.name&&(0,f.jsxs)("span",{className:"language-english-name",children:[" (",e.englishName,")"]})]}),(0,f.jsx)("span",{className:"language-add-icon",children:"+"})]},e.code)),c&&0===m.length&&(0,f.jsxs)("div",{className:"language-no-results",children:['No languages found for "',c,'"']})]})]})]})};var k=s(88259),x=s(6947),N=s(95388);const j="sgex-help-state",S=()=>{try{const e=localStorage.getItem(j);return e?parseInt(e,10):0}catch(e){return console.warn("Failed to load help state from localStorage:",e),0}},A=e=>{let{pageId:t,helpContent:s,position:l="bottom-right",contextData:c={},notificationBadge:d=!1}=e;const{t:v,i18n:w}=(0,r.Bd)(),{user:A,repo:C}=(0,a.g)(),[R,I]=(0,o.useState)(!1),[T,_]=(0,o.useState)(!1),[P,D]=(0,o.useState)(null),[E,F]=(0,o.useState)("dark"===(0,x.zy)()),[G,L]=(0,o.useState)(!1),[M,H]=(0,o.useState)(!1),[O,B]=(0,o.useState)(!1),[U,q]=(0,o.useState)(0),[K,W]=(0,o.useState)(!1),[z,X]=(0,o.useState)(()=>S()),[Y,J]=(0,o.useState)(!1),[V,Q]=(0,o.useState)(null),Z=(0,k.A)("sgex-mascot.png");(0,o.useEffect)(()=>{const e=S();switch(X(e),e){case 0:I(!1),_(!1);break;case 1:I(!0),_(!1);break;case 2:I(!0),_(!0)}},[]),(0,o.useEffect)(()=>{(e=>{try{localStorage.setItem(j,e.toString())}catch(t){console.warn("Failed to save help state to localStorage:",t)}})(z)},[z]),(0,o.useEffect)(()=>{const e=(0,x.zy)();F("dark"===e)},[]),(0,o.useEffect)(()=>{const e=w.language||"en",t=["ar","he","fa"].includes(e);document.documentElement.dir=t?"rtl":"ltr",document.documentElement.lang=e},[w.language]),(0,o.useEffect)(()=>{const e=async()=>{const e=g.A.isAuth();if(W(e),e)try{const e=await h.A.getTrackedCounts();q(t=>t!==e.total?e.total:t)}catch(t){console.warn("Failed to get tracked items count:",t),q(0)}else q(0)};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[]),(0,o.useEffect)(()=>(K?h.A.startBackgroundSync():h.A.stopBackgroundSync(),()=>{h.A.stopBackgroundSync()}),[K]),(0,o.useEffect)(()=>{(async()=>{if(K&&A&&C){const t="".concat(A,"/").concat(C);try{await h.A.enableDAKRepositoryFilter(t)}catch(e){console.warn("Failed to enable DAK repository filter:",e)}}})()},[K,A,C]),(0,o.useEffect)(()=>{const e=e=>{var t,s;const n=(null===(t=e.detail)||void 0===t?void 0:t.templateType)||(null===(s=e.detail)||void 0===s?void 0:s.issueType)||"bug";Q(n),J(!0),I(!1),_(!1),X(0)};return window.addEventListener("sgex-show-bug-report",e),()=>{window.removeEventListener("sgex-show-bug-report",e)}},[]);const $=()=>{const e=(0,x.OD)();F("dark"===e)},ee=[...t?i.default.getHelpTopicsForPage(t,c):[],...K?[{id:"tracked-items",title:U>0?"Tracked Items (".concat(U,")"):"Tracked Items",badge:"/sgex/cat-paw-icon.svg",type:"action",action:()=>B(!0)}]:[]],te=async()=>{if(!G){L(!0),H(!1);try{u.clearAllCache()?(H(!0),setTimeout(()=>{H(!1)},3e3)):(console.error("Failed to clear cache"),alert("Failed to clear cache. Please try again."))}catch(e){console.error("Error clearing cache:",e),alert("Error clearing cache. Please try again.")}finally{L(!1)}}};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"contextual-help-mascot ".concat(l),children:[(0,f.jsxs)("div",{className:"mascot-container",onMouseEnter:()=>{1===z&&I(!0)},onMouseLeave:()=>{1===z&&I(!1)},onClick:()=>{const e=(z+1)%3;switch(X(e),e){case 0:I(!1),_(!1);break;case 1:I(!0),_(!1);break;case 2:I(!0),_(!0)}},children:[(0,f.jsx)("img",{src:Z,alt:(0,N.lm)(v,N.ld.MASCOT_HELPER,"SGEX Helper"),className:"mascot-icon"}),d&&(0,f.jsx)("div",{className:"notification-badge",children:"!"}),!d&&(0,f.jsx)("div",{className:"question-bubble ".concat(R?"help-open":""),children:"?"})]}),R&&(0,f.jsxs)("div",{className:"help-thought-bubble",children:[(0,f.jsxs)("div",{className:"bubble-content",children:[2===z&&(0,f.jsx)("button",{className:"close-bubble-btn",onClick:()=>{I(!1),_(!1),X(0)},"aria-label":"Close help",children:"\xd7"}),(0,f.jsx)("div",{className:"help-text",children:ee.length>0?(0,f.jsxs)("div",{className:"help-topics-list",children:[(0,f.jsx)("h4",{children:v("help.title")}),ee.map(e=>(0,f.jsxs)("button",{className:"help-topic-btn",onClick:()=>(e=>{if(e.tutorialId)return D((0,n.A)((0,n.A)({},e),{},{type:"enhanced-tutorial"})),I(!1),_(!1),void X(0);"action"===e.type&&e.action?(e.action(),I(!1),_(!1),X(0)):(D(e),I(!1),_(!1),X(0))})(e),children:[e.badge&&(0,f.jsx)("img",{src:e.badge,alt:"",className:"help-topic-badge"}),(0,f.jsx)("span",{className:"help-topic-title",children:e.title}),e.notificationBadge&&(0,f.jsx)("span",{className:"help-topic-notification-badge",children:e.notificationBadge})]},e.id)),(0,f.jsx)("div",{className:"help-menu-divider"}),(0,f.jsx)(y,{className:"help-menu-language-selector"}),(0,f.jsx)("div",{className:"help-menu-divider"}),(0,f.jsxs)("button",{className:"help-theme-toggle-btn ".concat(E?"dark":"light"),onClick:$,"aria-label":v("theme.toggle"),title:v("theme.toggle"),children:[(0,f.jsx)("span",{className:"theme-icon",children:E?"\ud83c\udf1e":"\ud83c\udf19"}),(0,f.jsx)("span",{className:"theme-label",children:E?v("theme.switchToLight","Light Mode"):v("theme.switchToDark","Dark Mode")})]}),(0,f.jsx)("div",{className:"help-menu-divider"}),(0,f.jsx)("div",{className:"help-menu-cache-section",children:M?(0,f.jsx)("div",{className:"cache-success-message",children:"\u2705 Cache cleared successfully!"}):(0,f.jsx)("button",{className:"help-cache-btn",onClick:te,disabled:G,title:"Clear all cached data including repository info, branch context, and staging ground data",children:G?"\ud83d\udd04 Clearing...":"\ud83d\uddd1\ufe0f Flush Cache"})})]}):(0,f.jsxs)("div",{children:[s,(0,f.jsx)("div",{className:"help-menu-divider"}),(0,f.jsx)(y,{className:"help-menu-language-selector"}),(0,f.jsx)("div",{className:"help-menu-divider"}),(0,f.jsxs)("button",{className:"help-theme-toggle-btn ".concat(E?"dark":"light"),onClick:$,"aria-label":v("theme.toggle"),title:v("theme.toggle"),children:[(0,f.jsx)("span",{className:"theme-icon",children:E?"\ud83c\udf1e":"\ud83c\udf19"}),(0,f.jsx)("span",{className:"theme-label",children:E?v("theme.switchToLight","Light Mode"):v("theme.switchToDark","Dark Mode")})]}),(0,f.jsx)("div",{className:"help-menu-divider"}),(0,f.jsx)("div",{className:"help-menu-cache-section",children:M?(0,f.jsx)("div",{className:"cache-success-message",children:"\u2705 Cache cleared successfully!"}):(0,f.jsx)("button",{className:"help-cache-btn",onClick:te,disabled:G,title:"Clear all cached data including repository info, branch context, and staging ground data",children:G?"\ud83d\udd04 Clearing...":"\ud83d\uddd1\ufe0f Flush Cache"})})]})})]}),(0,f.jsx)("div",{className:"bubble-tail"})]})]}),P&&(0,f.jsx)(m.A,{helpTopic:P,tutorialId:"enhanced-tutorial"===P.type?P.tutorialId:null,contextData:c,onClose:()=>{D(null)}}),O&&(0,f.jsx)(b,{onClose:()=>B(!1)}),Y&&(0,f.jsx)("div",{className:"help-modal-overlay bug-report-overlay",children:(0,f.jsx)(p.A,{onClose:()=>{J(!1),Q(null)},preselectedTemplateType:V,contextData:(0,n.A)((0,n.A)({pageId:t},c),{},{user:A,repo:C,currentUrl:window.location.href})})})]})}},29473:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(85571);const o=new class{constructor(){this.CACHE_KEY_PREFIX="sgex_repo_cache_",this.CACHE_EXPIRY_HOURS=24,this.logger=n.A.getLogger("RepositoryCacheService"),this.logger.debug("RepositoryCacheService initialized",{cacheExpiryHours:this.CACHE_EXPIRY_HOURS})}getCacheKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n="".concat(this.CACHE_KEY_PREFIX).concat(t,"_").concat(e);return s?"".concat(n,"_").concat(s):n}isStale(e){return Date.now()-e>60*this.CACHE_EXPIRY_HOURS*60*1e3}getCachedRepositories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var n;const o=this.getCacheKey(e,t,s);this.logger.cache("get",o);const a=localStorage.getItem(o);if(!a)return this.logger.cache("miss",o,"No cached data found"),null;const r=JSON.parse(a);return this.isStale(r.timestamp)?(this.logger.cache("expired",o,{age:Date.now()-r.timestamp}),localStorage.removeItem(o),null):(this.logger.cache("hit",o,{repositoryCount:(null===(n=r.repositories)||void 0===n?void 0:n.length)||0,age:Date.now()-r.timestamp}),{repositories:r.repositories,timestamp:r.timestamp,owner:r.owner,type:r.type})}catch(o){const n=this.getCacheKey(e,t,s);return this.logger.error("Error reading repository cache",{cacheKey:n,error:o.message}),console.warn("Error reading repository cache:",o),null}}setCachedRepositories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{const o=this.getCacheKey(e,t,n),a={repositories:s,timestamp:Date.now(),owner:e,type:t};return this.logger.cache("set",o,{repositoryCount:(null===s||void 0===s?void 0:s.length)||0,owner:e,type:t}),localStorage.setItem(o,JSON.stringify(a)),!0}catch(o){const s=this.getCacheKey(e,t,n);return this.logger.error("Error caching repositories",{cacheKey:s,error:o.message}),console.warn("Error caching repositories:",o),!1}}clearCache(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";try{const s=this.getCacheKey(e,t);return this.logger.cache("clear",s,{owner:e,type:t}),localStorage.removeItem(s),!0}catch(s){const n=this.getCacheKey(e,t);return this.logger.error("Error clearing repository cache",{cacheKey:n,error:s.message}),console.warn("Error clearing repository cache:",s),!1}}clearAllCaches(){try{return Object.keys(localStorage).forEach(e=>{e.startsWith(this.CACHE_KEY_PREFIX)&&localStorage.removeItem(e)}),!0}catch(e){return console.warn("Error clearing all repository caches:",e),!1}}getCacheInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=this.getCachedRepositories(e,t,s);if(!n)return{exists:!1,stale:!0};const o=Date.now()-n.timestamp,a=Math.round(o/36e5);return{exists:!0,stale:this.isStale(n.timestamp),age:o,ageHours:a,repositoryCount:n.repositories.length,timestamp:new Date(n.timestamp).toISOString()}}}},57561:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(80045),o=s(89379);const a=["savedAt"];const r=new class{constructor(){this.listeners=new Set,this.currentRepository=null,this.currentBranch=null}initialize(e,t){this.currentRepository=e,this.currentBranch=t,this.notifyListeners()}getStorageKey(){if(!this.currentRepository||!this.currentBranch)throw new Error("Staging ground not initialized");return"sgex_staging_".concat(this.currentRepository.full_name,"_").concat(this.currentBranch)}getStagingGround(){try{const e=this.getStorageKey(),t=localStorage.getItem(e);return t?JSON.parse(t):this.createEmptyStagingGround()}catch(e){return console.warn("Error reading staging ground from localStorage:",e),this.createEmptyStagingGround()}}createEmptyStagingGround(){var e;return{message:"",files:[],timestamp:Date.now(),branch:this.currentBranch,repository:null===(e=this.currentRepository)||void 0===e?void 0:e.full_name}}saveStagingGround(e){try{var t;const s=this.getStorageKey();return e.timestamp=Date.now(),e.branch=this.currentBranch,e.repository=null===(t=this.currentRepository)||void 0===t?void 0:t.full_name,localStorage.setItem(s,JSON.stringify(e)),this.saveToHistory(e),this.notifyListeners(),!0}catch(s){return console.error("Error saving staging ground to localStorage:",s),!1}}updateFile(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getStagingGround(),a=n.files.findIndex(t=>t.path===e),r={path:e,content:t,metadata:(0,o.A)((0,o.A)({},s),{},{lastModified:Date.now()}),timestamp:Date.now()};return a>=0?n.files[a]=r:n.files.push(r),this.saveStagingGround(n)}removeFile(e){const t=this.getStagingGround();return t.files=t.files.filter(t=>t.path!==e),this.saveStagingGround(t)}updateCommitMessage(e){const t=this.getStagingGround();return t.message=e,this.saveStagingGround(t)}hasChanges(){return this.getStagingGround().files.length>0}getChangedFilesCount(){return this.getStagingGround().files.length}clearStagingGround(){const e=this.createEmptyStagingGround();return this.saveStagingGround(e)}saveToHistory(e){try{const t="".concat(this.getStorageKey(),"_history"),s=this.getHistory();s.push((0,o.A)((0,o.A)({},e),{},{savedAt:Date.now()}));const n=s.slice(-10);localStorage.setItem(t,JSON.stringify(n))}catch(t){console.warn("Error saving to history:",t)}}getHistory(){try{const e="".concat(this.getStorageKey(),"_history"),t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(e){return console.warn("Error reading history:",e),[]}}rollbackToSave(e){const t=this.getHistory().find(t=>t.savedAt===e);if(!t)throw new Error("Save not found in history");const{savedAt:s}=t,o=(0,n.A)(t,a);return this.saveStagingGround(o)}exportStagingGround(){var e;return{current:this.getStagingGround(),history:this.getHistory(),exportedAt:Date.now(),repository:null===(e=this.currentRepository)||void 0===e?void 0:e.full_name,branch:this.currentBranch}}importStagingGround(e){var t;if(!e.current||!e.repository||!e.branch)throw new Error("Invalid export data format");if(e.repository!==(null===(t=this.currentRepository)||void 0===t?void 0:t.full_name)||e.branch!==this.currentBranch)throw new Error("Export data is for different repository or branch");if(this.saveStagingGround(e.current),e.history)try{const t="".concat(this.getStorageKey(),"_history");localStorage.setItem(t,JSON.stringify(e.history))}catch(s){console.warn("Error importing history:",s)}return!0}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6048e5;try{const s=Date.now(),n=[];for(let o=0;o<localStorage.length;o++){const a=localStorage.key(o);if(a&&a.startsWith("sgex_staging_"))try{const t=JSON.parse(localStorage.getItem(a));t.timestamp&&s-t.timestamp>e&&(n.push(a),n.push("".concat(a,"_history")))}catch(t){n.push(a)}}return n.forEach(e=>{localStorage.removeItem(e)}),n.length}catch(t){return console.error("Error during cleanup:",t),0}}addListener(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}notifyListeners(){const e=this.getStagingGround();this.listeners.forEach(t=>{try{t(e)}catch(s){console.error("Error in staging ground listener:",s)}})}contributeFiles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Array.isArray(e)||(e=[e]);let s=!0;const n=[];return e.forEach(e=>{if(!e.path||!e.content)return n.push({path:e.path,success:!1,error:"Missing path or content"}),void(s=!1);const a=this.updateFile(e.path,e.content,(0,o.A)((0,o.A)({},t),{},{source:t.tool||"unknown",contributedAt:Date.now()}));n.push({path:e.path,success:a}),a||(s=!1)}),{success:s,results:n}}getStatus(){var e;const t=this.getStagingGround();return{hasChanges:this.hasChanges(),filesCount:this.getChangedFilesCount(),lastModified:t.timestamp,branch:this.currentBranch,repository:null===(e=this.currentRepository)||void 0===e?void 0:e.full_name}}}},61115:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});const n=new class{constructor(){this.universalTopics={documentation:{id:"sgex-documentation",title:"View Documentation",badge:"/sgex/cat-paw-info-icon.svg",type:"action",action:()=>{const e=window.location.pathname;let t="";if(e.includes("/sgex")){const s=e.split("/"),n=s.indexOf("sgex");if(-1!==n&&s.length>n+1){const e=s[n+1];t=e&&!["dashboard","docs","select_profile","dak-action","dak-selection","main"].includes(e)?"/sgex/".concat(e,"/docs"):"/sgex/main/docs"}else t="/sgex/main/docs"}else t="/sgex/main/docs";window.location.href="".concat(t,"/overview")},content:'\n          <p>Access comprehensive documentation and guides for using SGEX Workbench.</p>\n          <div class="help-tip">\n            <strong>\ud83d\udcd6 Available Documentation:</strong> Requirements, Architecture, DAK Components, User Guides, and more.\n          </div>\n        '},workflows:{id:"sgex-workflows",title:"View Deployment Workflows",badge:"/sgex/cat-paw-workflow-icon.svg",type:"action",action:()=>{window.open("".concat("https://github.com/litlfred/sgex","/actions"),"_blank")},content:'\n          <p>Access GitHub Actions workflows for automated deployment and quality checks.</p>\n          <div class="help-tip">\n            <strong>\ud83d\udd04 Available Workflows:</strong> Branch deployment, landing page deployment, PR feedback, security scanning, and compliance checks.\n          </div>\n          <div class="workflow-links">\n            <h4>\ud83d\ude80 Deployment Workflows:</h4>\n            <ul>\n              <li><a href="https://github.com/litlfred/sgex/blob/main/.github/workflows/branch-deployment.yml" target="_blank">Branch Deployment</a> - Deploy feature branches for preview</li>\n              <li><a href="https://github.com/litlfred/sgex/blob/main/.github/workflows/landing-page-deployment.yml" target="_blank">Landing Page Deployment</a> - Deploy main app to production</li>\n            </ul>\n            <h4>\ud83d\udee1\ufe0f Quality & Security Workflows:</h4>\n            <ul>\n              <li><a href="https://github.com/litlfred/sgex/blob/main/.github/workflows/framework-compliance.yml" target="_blank">Framework Compliance</a> - Code quality and standards</li>\n              <li><a href="https://github.com/litlfred/sgex/blob/main/.github/workflows/dependency-security.yml" target="_blank">Security Scanning</a> - Dependency vulnerability checks</li>\n            </ul>\n            <h4>\ud83d\udcac Feedback Workflows:</h4>\n            <ul>\n              <li><a href="https://github.com/litlfred/sgex/blob/main/.github/workflows/pr-commit-feedback.yml" target="_blank">PR Commit Feedback</a> - Real-time PR status updates</li>\n              <li><a href="https://github.com/litlfred/sgex/blob/main/.github/workflows/review.yml" target="_blank">Review Deployment</a> - Auto-deploy on approval</li>\n            </ul>\n          </div>\n        '},bugReport:{id:"report-sgex-bug",title:"Report a SGeX bug",badge:"/sgex/cat-paw-bug-icon.svg",type:"slideshow",content:[{title:"Report a SGeX Bug",content:'\n              <p>Report issues with the SGeX Workbench to help us improve the application:</p>\n              <h4>What type of issue would you like to report?</h4>\n              <div class="bug-report-options">\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.triggerBugReport(\'bug\')">\n                  \ud83d\udc1b Bug Report - Something is not working correctly\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.triggerBugReport(\'feature\')">\n                  \u2728 Feature Request - Suggest a new feature or improvement\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.triggerBugReport(\'question\')">\n                  \u2753 Question - Ask for help or clarification about SGeX\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.triggerBugReport(\'performance\')">\n                  \ud83d\ude80 Performance Issue - Report slow loading or responsiveness problems\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.triggerBugReport(\'ui\')">\n                  \ud83c\udfa8 UI/UX Issue - Report interface or usability problems\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.triggerBugReport(\'general\')">\n                  \ud83d\udcdd General Feedback - Other feedback or suggestions\n                </button>\n              </div>\n              <div class="help-tip">\n                <strong>\ud83d\udd27 Features:</strong> Each report type includes automatic environment detection, screenshot capture, and console log inclusion for faster debugging.\n              </div>\n            '}]},dakFeedback:{id:"provide-dak-feedback",title:"Provide DAK Feedback",type:"slideshow",content:[{title:"Provide Feedback on this DAK",content:'\n              <p>Share feedback about this Digital Adaptation Kit (DAK):</p>\n              <h4>What type of feedback do you have?</h4>\n              <div class="bug-report-options">\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'content\')">\n                  \ud83d\udcdd Report DAK Content Error - Problems with clinical content or logic\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'bug\')">\n                  \ud83d\udc1b DAK Bug - Issue with this specific DAK content\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'improvement\')">\n                  \ud83d\udcc8 DAK Improvement - Suggest enhancements to this DAK\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'question\')">\n                  \u2753 DAK Question - Ask about this DAK\'s implementation\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'blank\')">\n                  \ud83d\udcdd Blank DAK Issue - Create an issue without a template\n                </button>\n              </div>\n              <div class="help-tip">\n                <strong>\ud83d\udca1 Note:</strong> This will open an issue in the selected DAK repository for targeted feedback.\n              </div>\n            '}]}},this.helpTopics={"landing-page-unauthenticated":[{id:"github-pat-setup",title:"How to Create a GitHub Personal Access Token",badge:"/sgex/cat-paw-lock-icon.svg",type:"slideshow",content:[{title:"Step 1: Go to GitHub Settings",content:'\n                <p>Navigate to your GitHub account settings:</p>\n                <ol>\n                  <li>Click your profile picture in the top right</li>\n                  <li>Select "Settings" from the dropdown</li>\n                  <li>Go to "Developer settings" \u2192 "Personal access tokens"</li>\n                  <li>Choose "Fine-grained tokens" (recommended) or "Tokens (classic)"</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> Fine-grained tokens provide better security with repository-specific access.\n                </div>\n              '},{title:"Step 2: Generate New Token",content:'\n                <p>Create your new token:</p>\n                <ol>\n                  <li>Click "Generate new token"</li>\n                  <li>Give it a descriptive name like "SGEX Workbench"</li>\n                  <li>Set expiration (90 days recommended)</li>\n                  <li>Select repository access (specific repos or all)</li>\n                </ol>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Important:</strong> You\'ll only see the token once, so copy it immediately!\n                </div>\n              '},{title:"Step 3: Set Required Permissions",content:"\n                <p>For <strong>fine-grained tokens</strong>, enable:</p>\n                <ul>\n                  <li><strong>Contents:</strong> Read and Write</li>\n                  <li><strong>Metadata:</strong> Read</li>\n                  <li><strong>Pull requests:</strong> Read and Write</li>\n                </ul>\n                <p>For <strong>classic tokens</strong>, select:</p>\n                <ul>\n                  <li><strong>repo</strong> - Full control of private repositories</li>\n                  <li><strong>read:org</strong> - Read org and team membership</li>\n                </ul>\n              "},{title:"Step 4: Use Your Token",content:'\n                <p>Now you can authenticate with SGEX:</p>\n                <ol>\n                  <li>Copy your newly generated token</li>\n                  <li>Paste it into the login form</li>\n                  <li>Click "Sign in with Personal Access Token"</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udd12 Security:</strong> Your token is stored securely in your browser and never shared with servers.\n                </div>\n              '}]}],"landing-page-authenticated":[{id:"profile-selection",title:"Selecting Your Profile or Organization",type:"slideshow",content:[{title:"Understanding Profile Types",content:'\n                <p>SGEX shows different types of profiles:</p>\n                <ul>\n                  <li><strong>Personal:</strong> Your individual GitHub repositories</li>\n                  <li><strong>Organization:</strong> Repositories belonging to organizations you\'re a member of</li>\n                  <li><strong>WHO Official:</strong> World Health Organization repositories (always available)</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> DAK count badges show how many SMART Guidelines repositories were found.\n                </div>\n              '}]}],"dak-action-selection":[{id:"choosing-dak-action",title:"Choosing Your DAK Action",type:"slideshow",content:[{title:"Understanding DAK Actions",content:'\n                <p>Choose the right action for your workflow:</p>\n                <ul>\n                  <li><strong>Edit Existing DAK:</strong> Modify an existing repository you have write access to</li>\n                  <li><strong>Fork and Edit:</strong> Create your own copy of a repository to work on</li>\n                  <li><strong>Create New DAK:</strong> Start a brand new DAK repository from scratch</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> If you\'re not sure, start with "Edit Existing DAK" if you have permissions, or "Fork and Edit" to experiment safely.\n                </div>\n              '}]}],"documentation-viewer":[{id:"navigation-help",title:"Navigating Documentation",type:"slideshow",content:[{title:"Using the Documentation Viewer",content:'\n                <p>The documentation viewer provides easy access to all project information:</p>\n                <ul>\n                  <li>Use the sidebar menu to navigate between sections</li>\n                  <li>Use the dropdown to quickly jump to any document</li>\n                  <li>Click "Back" to return to the previous page</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udcd6 Available Documentation:</strong> Requirements, Architecture, DAK Components, and more.\n                </div>\n              '}]}],"dak-dashboard":[{id:"dak-components-overview",title:"Understanding DAK Components",type:"slideshow",content:[{title:"WHO SMART Guidelines DAK Components",content:"\n                <p>Digital Adaptation Kits (DAKs) contain 8 core components organized in two levels:</p>\n                <h4>Level 2: Business Logic & Processes</h4>\n                <ul>\n                  <li><strong>Business Processes:</strong> BPMN workflows</li>\n                  <li><strong>Decision Support Logic:</strong> DMN decision tables</li>\n                  <li><strong>Indicators & Measures:</strong> Performance metrics</li>\n                  <li><strong>Data Entry Forms:</strong> Structured questionnaires</li>\n                </ul>\n                <h4>Level 3: Technical Implementation</h4>\n                <ul>\n                  <li><strong>Terminology:</strong> Code systems and value sets</li>\n                  <li><strong>FHIR Profiles:</strong> Resource structure definitions</li>\n                  <li><strong>FHIR Extensions:</strong> Custom data elements</li>\n                  <li><strong>Test Data & Examples:</strong> Sample data for validation</li>\n                </ul>\n              "}]}],"dak-selection":[{id:"choosing-dak-repository",title:"Selecting the Right DAK Repository",type:"slideshow",content:[{title:"Understanding DAK Repository Types",content:'\n                <p>Choose the right repository based on your workflow:</p>\n                <ul>\n                  <li><strong>Published DAKs:</strong> Official WHO repositories with complete implementations</li>\n                  <li><strong>Community DAKs:</strong> Community-maintained repositories with adaptations</li>\n                  <li><strong>Template DAKs:</strong> Starting templates for creating new DAKs</li>\n                  <li><strong>Private DAKs:</strong> Your private repositories or organization-specific DAKs</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> Look for the "SMART Guidelines" badge to ensure compatibility.\n                </div>\n              '}]}],"organization-selection":[{id:"selecting-organization",title:"Choosing an Organization",type:"slideshow",content:[{title:"Organization vs Personal Account",content:'\n                <p>Decide where to create or fork your DAK:</p>\n                <ul>\n                  <li><strong>Personal Account:</strong> For individual development and experimentation</li>\n                  <li><strong>Organization Account:</strong> For team collaboration and official implementations</li>\n                  <li><strong>WHO Official:</strong> Only for authorized WHO contributors</li>\n                </ul>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Important:</strong> Make sure you have the necessary permissions for the selected organization.\n                </div>\n              '}]}],"bpmn-editor":[{id:"using-bpmn-editor",title:"Using the BPMN Editor",type:"slideshow",content:[{title:"BPMN Business Process Modeling",content:'\n                <p>The BPMN editor helps you create and modify business process workflows:</p>\n                <ul>\n                  <li><strong>Drag and Drop:</strong> Use the palette to add process elements</li>\n                  <li><strong>Connect Elements:</strong> Click and drag to create sequence flows</li>\n                  <li><strong>Properties Panel:</strong> Configure element properties and conditions</li>\n                  <li><strong>Validation:</strong> The editor highlights errors and warnings</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> BPMN processes define the clinical workflow and decision logic for your DAK.\n                </div>\n              '}]}],"questionnaire-editor":[{id:"using-questionnaire-editor",title:"Using the FHIR Questionnaire Editor",badge:"/sgex/cat-paw-icon.svg",type:"slideshow",content:[{title:"FHIR Questionnaire Overview",content:'\n                <p>The FHIR Questionnaire editor helps you create and modify structured data collection forms:</p>\n                <ul>\n                  <li><strong>Visual Editor:</strong> Uses LHC-Forms for intuitive questionnaire design</li>\n                  <li><strong>FHIR Compliant:</strong> Generates standard FHIR R4 Questionnaire resources</li>\n                  <li><strong>Multilingual:</strong> Support for multiple languages and translations</li>\n                  <li><strong>Preview Mode:</strong> Test questionnaires as they would appear to users</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udccb File Location:</strong> Questionnaires are stored in <code>input/questionnaires/*.json</code>\n                </div>\n              '},{title:"Creating New Questionnaires",content:'\n                <p>To create a new FHIR Questionnaire:</p>\n                <ol>\n                  <li>Click "Create New Questionnaire" on the main screen</li>\n                  <li>A template questionnaire will be loaded in the editor</li>\n                  <li>Modify the questionnaire structure using the visual interface</li>\n                  <li>Add questions, sections, and response options</li>\n                  <li>Set validation rules and conditional logic</li>\n                </ol>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Remember:</strong> Save your work regularly using "Save to Staging" or "Commit to GitHub"\n                </div>\n              '},{title:"Editing Existing Questionnaires",content:'\n                <p>To modify existing questionnaires:</p>\n                <ol>\n                  <li>Select a questionnaire from the list</li>\n                  <li>The questionnaire will load in the LHC-Forms editor</li>\n                  <li>Make your changes using the visual interface</li>\n                  <li>Preview the form to test user experience</li>\n                  <li>Save changes when satisfied</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> Use the staging framework to test changes before committing to GitHub\n                </div>\n              '},{title:"Internationalization Support",content:'\n                <p>The questionnaire editor supports multiple languages:</p>\n                <ul>\n                  <li><strong>Language Selection:</strong> Use the language dropdown to switch between languages</li>\n                  <li><strong>Translations:</strong> Add translations for all text fields</li>\n                  <li><strong>FHIR Extensions:</strong> Uses standard FHIR translation extensions</li>\n                  <li><strong>Preview:</strong> Test questionnaires in different languages</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83c\udf0d Best Practice:</strong> Always provide translations for your target implementation languages\n                </div>\n              '}]},{id:"questionnaire-management",title:"Managing Questionnaire Assets",badge:"/sgex/cat-paw-file-icon.svg",type:"slideshow",content:[{title:"File Organization",content:'\n                <p>FHIR Questionnaires are organized as follows:</p>\n                <ul>\n                  <li><strong>Location:</strong> <code>input/questionnaires/</code> directory</li>\n                  <li><strong>Format:</strong> JSON files following FHIR R4 Questionnaire schema</li>\n                  <li><strong>Naming:</strong> Use descriptive names like <code>patient-registration.json</code></li>\n                  <li><strong>Validation:</strong> All files are validated against FHIR schema</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udcc1 Convention:</strong> Use kebab-case filenames for consistency\n                </div>\n              '},{title:"Version Control Integration",content:'\n                <p>The questionnaire editor integrates with GitHub for version control:</p>\n                <ul>\n                  <li><strong>Staging:</strong> Save changes locally before committing</li>\n                  <li><strong>Commits:</strong> Create meaningful commit messages</li>\n                  <li><strong>Branches:</strong> Work on different branches for features</li>\n                  <li><strong>History:</strong> Track changes and revert if needed</li>\n                </ul>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Important:</strong> Always test questionnaires before committing to main branch\n                </div>\n              '}]}],"component-editor":[{id:"component-editor-overview",title:"Understanding the Component Editor",type:"slideshow",content:[{title:"DAK Component Types",content:"\n                <p>The component editor provides specialized interfaces for different DAK components:</p>\n                <h4>Business Logic Components</h4>\n                <ul>\n                  <li><strong>Business Processes:</strong> BPMN workflow editor</li>\n                  <li><strong>Decision Logic:</strong> DMN decision table editor</li>\n                  <li><strong>Forms:</strong> Structured questionnaire builder</li>\n                </ul>\n                <h4>Technical Components</h4>\n                <ul>\n                  <li><strong>FHIR Resources:</strong> Profile and extension definitions</li>\n                  <li><strong>Terminology:</strong> Code systems and value sets</li>\n                  <li><strong>Test Data:</strong> Example data and test cases</li>\n                </ul>\n              "}]}],"pat-login":[{id:"pat-authentication-help",title:"Using Personal Access Tokens",badge:"/sgex/cat-paw-lock-icon.svg",type:"slideshow",content:[{title:"Why Personal Access Tokens?",content:'\n                <p>SGEX uses GitHub Personal Access Tokens (PATs) for secure authentication:</p>\n                <ul>\n                  <li><strong>No Backend Required:</strong> Works entirely in your browser</li>\n                  <li><strong>Fine-grained Control:</strong> Choose which repositories to access</li>\n                  <li><strong>Enhanced Security:</strong> Can be easily rotated and revoked</li>\n                  <li><strong>Privacy Focused:</strong> Your token never leaves your browser</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udd12 Security:</strong> SGEX stores your token locally and never transmits it to any server.\n                </div>\n              '}]}],"pat-setup-instructions":[{id:"detailed-pat-setup",title:"Detailed PAT Setup Guide",badge:"/sgex/cat-paw-lock-icon.svg",type:"slideshow",content:[{title:"Token Type Comparison",content:"\n                <p>GitHub offers two types of Personal Access Tokens:</p>\n                <h4>Fine-grained Tokens (Recommended)</h4>\n                <ul>\n                  <li>Repository-specific access control</li>\n                  <li>Better security with minimal permissions</li>\n                  <li>More granular permission settings</li>\n                  <li>Shorter default expiration times</li>\n                </ul>\n                <h4>Classic Tokens</h4>\n                <ul>\n                  <li>Broader scope-based permissions</li>\n                  <li>Simpler permission model</li>\n                  <li>Longer expiration options</li>\n                  <li>Works with all GitHub integrations</li>\n                </ul>\n              "}]}],welcome:[{id:"github-pat-setup",title:"How to Create a GitHub Personal Access Token",badge:"/sgex/cat-paw-lock-icon.svg",type:"slideshow",content:[{title:"Step 1: Go to GitHub Settings",content:'\n                <p>Navigate to your GitHub account settings:</p>\n                <ol>\n                  <li>Click your profile picture in the top right</li>\n                  <li>Select "Settings" from the dropdown</li>\n                  <li>Go to "Developer settings" \u2192 "Personal access tokens"</li>\n                  <li>Choose "Fine-grained tokens" (recommended) or "Tokens (classic)"</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> Fine-grained tokens provide better security with repository-specific access.\n                </div>\n              '},{title:"Step 2: Generate New Token",content:'\n                <p>Create your new token:</p>\n                <ol>\n                  <li>Click "Generate new token"</li>\n                  <li>Give it a descriptive name like "SGEX Workbench"</li>\n                  <li>Set expiration (90 days recommended)</li>\n                  <li>Select repository access (specific repos or all)</li>\n                </ol>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Important:</strong> You\'ll only see the token once, so copy it immediately!\n                </div>\n              '},{title:"Step 3: Set Required Permissions",content:"\n                <p>For <strong>fine-grained tokens</strong>, enable:</p>\n                <ul>\n                  <li><strong>Contents:</strong> Read and Write</li>\n                  <li><strong>Metadata:</strong> Read</li>\n                  <li><strong>Pull requests:</strong> Read and Write</li>\n                </ul>\n                <p>For <strong>classic tokens</strong>, select:</p>\n                <ul>\n                  <li><strong>repo</strong> - Full control of private repositories</li>\n                  <li><strong>read:org</strong> - Read org and team membership</li>\n                </ul>\n              "},{title:"Step 4: Use Your Token",content:'\n                <p>Now you can authenticate with SGEX:</p>\n                <ol>\n                  <li>Copy your newly generated token</li>\n                  <li>Paste it into the login form</li>\n                  <li>Click "Sign in with Personal Access Token"</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udd12 Security:</strong> Your token is stored securely in your browser and never shared with servers.\n                </div>\n              '}]}],"dak-configuration":[{id:"dak-configuration-guide",title:"Configuring Your DAK",type:"slideshow",content:[{title:"Understanding DAK Configuration",content:"\n                <p>When creating a new DAK, you need to configure both repository and FHIR settings:</p>\n                <h4>Repository Configuration</h4>\n                <ul>\n                  <li><strong>Repository Name:</strong> GitHub repository identifier (lowercase with hyphens)</li>\n                  <li><strong>Description:</strong> Brief description of your DAK's purpose</li>\n                  <li><strong>Topics:</strong> Tags that help others discover your DAK</li>\n                  <li><strong>Visibility:</strong> Public repositories are discoverable by the community</li>\n                </ul>\n                <h4>FHIR Implementation Guide Settings</h4>\n                <ul>\n                  <li><strong>IG ID:</strong> Unique identifier for your Implementation Guide</li>\n                  <li><strong>Name:</strong> Technical name used in code generation</li>\n                  <li><strong>Title:</strong> Human-readable title for documentation</li>\n                  <li><strong>Publisher:</strong> Organization responsible for the DAK</li>\n                </ul>\n              "}]}],"core-data-dictionary-viewer":[{id:"core-data-dictionary-help",title:"Understanding Core Data Dictionary",badge:"/sgex/cat-paw-info-icon.svg",type:"slideshow",content:[{title:"What is the Core Data Dictionary?",content:'\n                <p>The Core Data Dictionary (Component 2) contains the data elements required throughout the different points of the workflow. These data elements are mapped to the International Classification of Diseases version 11 (ICD-11) codes and other established concept mapping standards to ensure the data dictionary is compatible with other digital systems.</p>\n                <h4>Purpose: System Design and Interoperability</h4>\n                <p>To know which data elements need to be logged and how they map to other standard terminologies (e.g. ICD, Systematized Nomenclature of Medicine [SNOMED]) for interoperability with other standards-based systems.</p>\n                <h4>FHIR FSH Source Files</h4>\n                <ul>\n                  <li><strong>CodeSystems:</strong> Define custom codes and concepts used in your DAK</li>\n                  <li><strong>ValueSets:</strong> Specify allowed values for clinical data elements</li>\n                  <li><strong>ConceptMaps:</strong> Map between different terminology systems including ICD-11 and SNOMED</li>\n                  <li><strong>Logical Models:</strong> Define data structures for clinical workflows</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Location:</strong> FSH files are stored in the <code>input/fsh/</code> directory of your repository.\n                </div>\n              '},{title:"GitHub Pages Integration",content:'\n                <p>When GitHub Pages is configured, your FSH files are automatically compiled into HTML documentation:</p>\n                <h4>Published Artifacts</h4>\n                <ul>\n                  <li><strong>Code Systems:</strong> Browse and search your custom terminologies</li>\n                  <li><strong>Value Sets:</strong> View allowed values with descriptions</li>\n                  <li><strong>Logical Models:</strong> Interactive data structure documentation</li>\n                  <li><strong>Concept Maps:</strong> Visual mapping between terminologies</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\u26a1 URL Pattern:</strong> Main branch publishes to <code>user.github.io/repo</code>, feature branches to <code>user.github.io/repo/branches/branch-name</code>\n                </div>\n              '}]},{id:"github-pages-setup",title:"Setting Up GitHub Pages",badge:"/sgex/cat-paw-settings-icon.svg",type:"slideshow",content:[{title:"Enable GitHub Pages for Your DAK",content:'\n                <p>Follow these steps to enable automatic publishing of your Implementation Guide:</p>\n                <h4>Step 1: Repository Settings</h4>\n                <ol>\n                  <li>Go to your repository on GitHub</li>\n                  <li>Click on the <strong>Settings</strong> tab</li>\n                  <li>Scroll down to <strong>Pages</strong> in the left sidebar</li>\n                  <li>Under <strong>Source</strong>, select <strong>GitHub Actions</strong></li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udccb Note:</strong> Your repository must contain a valid FHIR Implementation Guide structure with <code>sushi-config.yaml</code>\n                </div>\n              '},{title:"Configure IG Publisher Workflow",content:'\n                <p>Set up the automated publishing workflow:</p>\n                <h4>Step 2: GitHub Actions</h4>\n                <ol>\n                  <li>Create <code>.github/workflows/</code> directory in your repository</li>\n                  <li>Add an IG Publisher workflow file (e.g., <code>publish.yml</code>)</li>\n                  <li>Configure the workflow to run on push to main branch</li>\n                  <li>Include steps to build and deploy the Implementation Guide</li>\n                </ol>\n                <h4>Step 3: Verify Publishing</h4>\n                <ul>\n                  <li>Check the <strong>Actions</strong> tab for workflow status</li>\n                  <li>Once successful, visit your GitHub Pages URL</li>\n                  <li>Verify that artifacts are accessible from the Core Data Dictionary viewer</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udd17 Reference:</strong> See the <a href="https://smart.who.int/ig-starter-kit/v1.0.0/ig_setup.html#ghpages-build" target="_blank">WHO IG Starter Kit</a> for detailed setup instructions.\n                </div>\n              '}]}],"business-process-selection":[{id:"business-process-help",title:"Understanding Business Processes",badge:"/sgex/cat-paw-workflow-icon.svg",type:"slideshow",content:[{title:"What are Business Processes?",content:'\n                <p>Business Processes (Component 5) define the clinical workflows and care processes in your DAK:</p>\n                <h4>BPMN 2.0 Diagrams</h4>\n                <ul>\n                  <li><strong>Clinical Workflows:</strong> Step-by-step patient care processes</li>\n                  <li><strong>Decision Points:</strong> Where clinical decisions are made</li>\n                  <li><strong>Task Assignments:</strong> Who performs each step in the workflow</li>\n                  <li><strong>Data Flows:</strong> How information moves through the process</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Standard:</strong> Uses BPMN 2.0 (Business Process Model and Notation) for workflow modeling\n                </div>\n              '},{title:"Working with BPMN Files",content:'\n                <p>Business process diagrams are stored as BPMN XML files in your repository:</p>\n                <h4>File Management</h4>\n                <ul>\n                  <li><strong>Location:</strong> Typically stored in <code>input/models/</code> or <code>input/bpmn/</code></li>\n                  <li><strong>Format:</strong> BPMN 2.0 XML standard format</li>\n                  <li><strong>Editing:</strong> Use the built-in BPMN editor or external tools</li>\n                  <li><strong>Validation:</strong> Automatic validation against BPMN 2.0 schema</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udd27 Tools:</strong> SGeX includes an integrated BPMN editor for creating and modifying workflow diagrams\n                </div>\n              '}]}],"pages-manager":[{id:"page-content-help",title:"Managing Page Content",badge:"/sgex/cat-paw-document-icon.svg",type:"slideshow",content:[{title:"What is Page Content?",content:'\n                <p>Page Content represents the narrative documentation and educational materials in your DAK:</p>\n                <h4>Content Types</h4>\n                <ul>\n                  <li><strong>Clinical Guidelines:</strong> Evidence-based care recommendations</li>\n                  <li><strong>User Guides:</strong> Instructions for healthcare workers</li>\n                  <li><strong>Training Materials:</strong> Educational content and scenarios</li>\n                  <li><strong>Reference Documentation:</strong> Technical specifications and background</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Format:</strong> Content is typically authored in Markdown format for easy editing and version control\n                </div>\n              '},{title:"Content Organization",content:'\n                <p>Page content is organized to support different user needs and workflows:</p>\n                <h4>Structure</h4>\n                <ul>\n                  <li><strong>Pages Directory:</strong> Main content files organized by topic</li>\n                  <li><strong>Assets:</strong> Images, diagrams, and multimedia content</li>\n                  <li><strong>Templates:</strong> Reusable content patterns and layouts</li>\n                  <li><strong>Navigation:</strong> Menus and linking between related content</li>\n                </ul>\n                <h4>Publishing</h4>\n                <ul>\n                  <li><strong>GitHub Pages:</strong> Automatic publishing of content as web pages</li>\n                  <li><strong>FHIR IG:</strong> Integration with Implementation Guide publishing</li>\n                  <li><strong>Version Control:</strong> Track changes and collaborate on content</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udcdd Best Practice:</strong> Use clear headings, bullet points, and visual elements to make content accessible to healthcare workers\n                </div>\n              '}]}]}}getHelpTopicsForPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[...this.helpTopics[e]||[],...this.getUniversalTopics(t)]}getUniversalTopics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.universalTopics.documentation,this.universalTopics.bugReport];return(e.selectedDak||e.repository)&&t.push(this.universalTopics.dakFeedback),t}getHelpTopic(e){for(const t of Object.values(this.helpTopics)){const s=t.find(t=>t.id===e);if(s)return s}return null}hasHelpTopics(e){return!0}addHelpTopicToPage(e,t){this.helpTopics[e]||(this.helpTopics[e]=[]),this.helpTopics[e].push(t)}getAvailablePages(){return Object.keys(this.helpTopics)}openDakIssue(e,t){if(!t)return void console.warn("No DAK repository specified for feedback");let s="https://github.com/".concat(t.owner,"/").concat(t.name,"/issues/new");switch(e){case"bug":s+="?template=bug_report.md&labels=bug,dak-issue";break;case"improvement":s+="?template=feature_request.md&labels=enhancement,dak-improvement";break;case"content":s+="?labels=content-issue,clinical-content";break;case"question":s+="?template=question.md&labels=question,dak-question";break;default:s+="?labels=dak-feedback"}window.open(s,"_blank")}triggerBugReport(e){const t=new CustomEvent("sgex-show-bug-report",{detail:{issueType:e,templateType:e}});window.dispatchEvent(t)}}},62141:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(89379);const o=new class{constructor(){this.storageKey="sgex_feature_files",this.metadataKey="sgex_feature_files_metadata"}getAllLocalChanges(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading local changes:",e),{}}}getLocalContent(e){return this.getAllLocalChanges()[e]||null}saveLocal(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const o=this.getAllLocalChanges();o[e]=t,localStorage.setItem(this.storageKey,JSON.stringify(o));const a=this.getAllMetadata();return a[e]=(0,n.A)((0,n.A)({},s),{},{lastModified:(new Date).toISOString(),originalPath:e}),localStorage.setItem(this.metadataKey,JSON.stringify(a)),!0}catch(o){return console.error("Error saving to localStorage:",o),!1}}removeLocal(e){try{const t=this.getAllLocalChanges();delete t[e],localStorage.setItem(this.storageKey,JSON.stringify(t));const s=this.getAllMetadata();return delete s[e],localStorage.setItem(this.metadataKey,JSON.stringify(s)),!0}catch(t){return console.error("Error removing from localStorage:",t),!1}}getAllMetadata(){try{const e=localStorage.getItem(this.metadataKey);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading metadata:",e),{}}}getMetadata(e){return this.getAllMetadata()[e]||null}hasLocalChanges(){const e=this.getAllLocalChanges();return Object.keys(e).length>0}getLocalChangesCount(){const e=this.getAllLocalChanges();return Object.keys(e).length}exportLocalChanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";const t=this.getAllLocalChanges(),s=this.getAllMetadata();if("json"===e){const e={exported:(new Date).toISOString(),version:"1.0",changes:t,metadata:s};return new Blob([JSON.stringify(e,null,2)],{type:"application/json"})}throw new Error("Export format '".concat(e,"' not supported"))}importLocalChanges(e){try{const t=JSON.parse(e);if(!t.changes||!t.metadata)throw new Error("Invalid import data format");const s=this.getAllLocalChanges(),o=this.getAllMetadata(),a=(0,n.A)((0,n.A)({},s),t.changes),r=(0,n.A)((0,n.A)({},o),t.metadata);return localStorage.setItem(this.storageKey,JSON.stringify(a)),localStorage.setItem(this.metadataKey,JSON.stringify(r)),!0}catch(t){return console.error("Error importing local changes:",t),!1}}clearAllLocalChanges(){localStorage.removeItem(this.storageKey),localStorage.removeItem(this.metadataKey)}getStorageInfo(){const e=this.getAllLocalChanges(),t=this.getAllMetadata(),s=JSON.stringify(e).length,n=JSON.stringify(t).length,o=s+n;return{fileCount:Object.keys(e).length,totalSize:o,changesSize:s,metadataSize:n,formattedSize:this.formatBytes(o)}}formatBytes(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}}},65621:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(89379);const o=new class{constructor(){this.storageKey="sgex-bookmarks"}getBookmarks(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return console.warn("Error reading bookmarks from localStorage:",e),[]}}saveBookmarks(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(t){throw console.error("Error saving bookmarks to localStorage:",t),t}}generateBookmarkTitle(e,t){const{user:s,repository:n,branch:o,asset:a,title:r,path:i}=t;if("documentation"===e&&r)return i?"".concat(r," (").concat(i,")"):r;if(a&&s&&n){const e=n.name||n,t=o||"main";return"".concat(a," in DAK: ").concat(s,"/").concat(e,"/").concat(t)}if(s&&n&&o){const e=n.name||n;return"DAK: ".concat(s,"/").concat(e,"/").concat(o)}if(s&&n){const e=n.name||n;return"DAK: ".concat(s,"/").concat(e)}return s?"".concat(e,": ").concat(s):e}addBookmark(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=this.getBookmarks(),a=o.findIndex(e=>e.url===t);if(-1!==a)o[a]=(0,n.A)((0,n.A)({},o[a]),{},{title:this.generateBookmarkTitle(e,s),pageName:e,context:s,lastUpdated:(new Date).toISOString()});else{const n={id:Date.now().toString(),title:this.generateBookmarkTitle(e,s),url:t,pageName:e,context:s,createdAt:(new Date).toISOString(),lastUpdated:(new Date).toISOString()};o.push(n)}return this.saveBookmarks(o),o[a]||o[o.length-1]}removeBookmark(e){try{const t=this.getBookmarks(),s=t.filter(t=>t.id!==e);return s.length!==t.length&&(this.saveBookmarks(s),!0)}catch(t){return console.error("Error removing bookmark:",t),!1}}isBookmarked(e){return this.getBookmarks().some(t=>t.url===e)}getBookmarkByUrl(e){return this.getBookmarks().find(t=>t.url===e)||null}getBookmarksGroupedByPage(){const e=this.getBookmarks(),t={};e.forEach(e=>{const s=e.pageName||"Other";t[s]||(t[s]=[]),t[s].push(e)}),Object.keys(t).forEach(e=>{t[e].sort((e,t)=>e.title.localeCompare(t.title))});return Object.keys(t).sort().map(e=>({pageName:e,bookmarks:t[e]}))}clearBookmarks(){try{localStorage.removeItem(this.storageKey)}catch(e){console.error("Error clearing bookmarks:",e)}}exportBookmarks(){const e=this.getBookmarks();return JSON.stringify(e,null,2)}importBookmarks(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const s=JSON.parse(e);if(!Array.isArray(s))throw new Error("Invalid bookmark format");if(t){const e=[...this.getBookmarks()];s.forEach(t=>{const s=e.findIndex(e=>e.url===t.url);-1!==s?e[s]=t:e.push(t)}),this.saveBookmarks(e)}else this.saveBookmarks(s);return!0}catch(s){return console.error("Error importing bookmarks:",s),!1}}}},67770:(e,t,s)=>{s.d(t,{A:()=>h});var n=s(89379),o=s(9950),a=s(29946),r=s(15429),i=s(38659);let l=null;const c=new class{constructor(){this.templates=new Map,this.templateCache=new Map}async fetchIssueTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"litlfred",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sgex";try{const s=await this._fetchTemplatesFromDirectory(e,t,".github/ISSUE_TEMPLATE"),n="".concat(e,"/").concat(t);return this.templateCache.set(n,{templates:s,fetchedAt:Date.now()}),s}catch(s){return console.warn("Failed to fetch issue templates:",s),this._getDefaultTemplates()}}async _fetchTemplatesFromDirectory(e,t,s){const n=[];try{const r=(await a.A.getDirectoryContents(e,t,s)).filter(e=>"file"===e.type&&(e.name.endsWith(".yml")||e.name.endsWith(".yaml"))&&"config.yml"!==e.name);for(const s of r)try{const o=await a.A.getFileContent(e,t,s.path),r=await this._parseIssueTemplate(o,s.name);r&&n.push(r)}catch(o){console.warn("Failed to parse template ".concat(s.name,":"),o)}return n}catch(o){return console.warn("Failed to fetch templates from ".concat(s,":"),o),[]}}async _parseIssueTemplate(e,t){try{const s=(await(0,i.cb)()).load(e);if(!s||!s.name||!s.body)return console.warn("Invalid template structure in ".concat(t)),null;const n=this._getTemplateType(t);return{id:t.replace(/\.(yml|yaml)$/,""),name:s.name,description:s.description||"",title:s.title||"",labels:s.labels||[],body:s.body||[],filename:t,type:n}}catch(s){return console.error("Failed to parse YAML template ".concat(t,":"),s),null}}_getTemplateType(e){const t=e.toLowerCase();return t.includes("bug")?"bug":t.includes("feature")?"feature":t.includes("question")?"question":t.includes("documentation")?"documentation":"general"}getDefaultTemplates(){return this._getDefaultTemplates()}_getDefaultTemplates(){return[{id:"bug_report",name:"Bug Report",description:"File a bug report to help us improve",title:"[Bug]: ",labels:["bug"],type:"bug",body:[{type:"textarea",id:"what-happened",attributes:{label:"What happened?",description:"A clear description of what the bug is."},validations:{required:!0}},{type:"textarea",id:"expected",attributes:{label:"Expected behavior",description:"What did you expect to happen?"},validations:{required:!0}},{type:"textarea",id:"steps",attributes:{label:"Steps to reproduce",description:"Steps to reproduce the behavior",placeholder:"1. Go to '...'\n2. Click on '....'\n3. See error"},validations:{required:!0}}]},{id:"feature_request",name:"Feature Request",description:"Suggest an idea for this project",title:"[Feature]: ",labels:["enhancement"],type:"feature",body:[{type:"textarea",id:"description",attributes:{label:"Feature Description",description:"A clear description of what you want to happen."},validations:{required:!0}},{type:"textarea",id:"use-case",attributes:{label:"Use Case",description:"Describe the use case and why this feature would be beneficial."},validations:{required:!0}}]},{id:"question",name:"Question",description:"Ask for help or clarification about SGEX Workbench",title:"[Question]: ",labels:["question"],type:"question",body:[{type:"textarea",id:"question",attributes:{label:"Your Question",description:"What would you like to know?"},validations:{required:!0}},{type:"textarea",id:"context",attributes:{label:"Context",description:"What were you trying to do when this question came up?"},validations:{required:!1}}]},{id:"performance_issue",name:"Performance Issue",description:"Report slow loading or responsiveness problems",title:"[Performance]: ",labels:["performance","bug"],type:"performance",body:[{type:"textarea",id:"performance-issue",attributes:{label:"Performance Issue Description",description:"Describe the slow loading or responsiveness problem you encountered."},validations:{required:!0}},{type:"textarea",id:"when-occurs",attributes:{label:"When does this occur?",description:"Describe when you notice the performance issue (specific pages, actions, etc.)"},validations:{required:!0}},{type:"textarea",id:"browser-specs",attributes:{label:"Browser and System Information",description:"What browser, device, and internet connection are you using?"},validations:{required:!1}}]},{id:"ui_ux_issue",name:"UI/UX Issue",description:"Report interface or usability problems",title:"[UI/UX]: ",labels:["ui","ux","design"],type:"ui",body:[{type:"textarea",id:"ui-issue",attributes:{label:"Interface Problem",description:"Describe the interface or usability issue you encountered."},validations:{required:!0}},{type:"textarea",id:"expected-ui",attributes:{label:"Expected Interface Behavior",description:"How do you think the interface should work instead?"},validations:{required:!0}},{type:"textarea",id:"suggestions",attributes:{label:"Suggestions for Improvement",description:"Any specific suggestions for improving the user experience?"},validations:{required:!1}}]},{id:"general_feedback",name:"General Feedback",description:"Other feedback or suggestions",title:"[Feedback]: ",labels:["feedback"],type:"general",body:[{type:"textarea",id:"feedback",attributes:{label:"Your Feedback",description:"Share your thoughts, suggestions, or other feedback about SGEX Workbench."},validations:{required:!0}},{type:"textarea",id:"area-of-focus",attributes:{label:"Area of Focus",description:"Which part of SGEX Workbench does your feedback relate to? (optional)"},validations:{required:!1}}]}]}async getTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"litlfred",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sgex",s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n="".concat(e,"/").concat(t),o=this.templateCache.get(n);return!s&&o&&Date.now()-o.fetchedAt<36e5?o.templates:await this.fetchIssueTemplates(e,t)}generateIssueBody(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r="";for(const l of e.body)if("markdown"===l.type)r+="".concat(l.attributes.value,"\n\n");else if(l.id&&t[l.id]){var i;const e=(null===(i=l.attributes)||void 0===i?void 0:i.label)||l.id,s=t[l.id];r+="## ".concat(e,"\n\n").concat(s,"\n\n")}if(a&&(r+="## Screenshot\n\n*A screenshot has been captured and will be attached to this issue.*\n\n"),s&&n){const e=this._truncateConsoleOutput(n);r+="## Console Output\n\n```\n".concat(e,"\n```\n\n")}return r+=this._generateContextualInfo(o),r.trim()}_truncateConsoleOutput(e){const t=32768;if(e.length<=t)return e;const s=e.substring(0,t);return"".concat(s,"\n\n... (output truncated to ").concat(t," characters)")}_generateContextualInfo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={environment:{userAgent:navigator.userAgent,url:window.location.href,timestamp:(new Date).toISOString(),viewport:{width:window.innerWidth,height:window.innerHeight},screen:{width:window.screen.width,height:window.screen.height},language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},sgexContext:this._extractSGEXContext(e)};return"## Environment & Context\n\n```json\n".concat(JSON.stringify(t,null,2),"\n```")}_extractSGEXContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={page:{id:e.pageId||this._detectCurrentPage(),url:window.location.href,pathname:window.location.pathname},authentication:{isAuthenticated:this._isUserAuthenticated(),authMode:this._getAuthenticationMode()}};return e.repository&&(t.repository={name:e.repository.name||e.repository,owner:e.repository.owner||e.repository.split("/")[0],branch:e.branch||"unknown"}),e.selectedDak&&(t.dak={name:e.selectedDak.name,description:e.selectedDak.description,compliance:e.selectedDak.compliance}),e.component&&(t.component={type:e.component,isEditing:e.isEditing||!1}),e.profile&&(t.profile={login:e.profile.login,type:e.profile.type}),void 0!==e.hasQuestionnaires&&(t.features=t.features||{},t.features.hasQuestionnaires=e.hasQuestionnaires),void 0!==e.selectedReferencesCount&&(t.features=t.features||{},t.features.selectedReferencesCount=e.selectedReferencesCount),t}_detectCurrentPage(){const e=window.location.pathname.split("/").filter(Boolean);return e.length>0?e[e.length-1]||"unknown":"root"}_isUserAuthenticated(){try{return!!(localStorage.getItem("github_token")||sessionStorage.getItem("github_token")||window.githubToken)}catch(e){return!1}}_getAuthenticationMode(){return this._isUserAuthenticated()?"authenticated":"localhost"===window.location.hostname||window.location.hostname.includes("127.0.0.1")?"local_development":"demo_mode"}async takeScreenshot(){try{return"getDisplayMedia"in navigator.mediaDevices?await this._takeScreenshotWithScreenCapture():"html2canvas"in window?await this._takeScreenshotWithHtml2Canvas():(console.warn("Screenshot functionality not available in this browser"),null)}catch(e){return console.warn("Failed to take screenshot:",e),null}}async _takeScreenshotWithScreenCapture(){try{const e=await navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen"}}),t=document.createElement("video");return t.srcObject=e,t.play(),new Promise((s,n)=>{t.onloadedmetadata=()=>{const n=document.createElement("canvas");n.width=t.videoWidth,n.height=t.videoHeight;n.getContext("2d").drawImage(t,0,0),e.getTracks().forEach(e=>e.stop()),n.toBlob(s,"image/png")},t.onerror=n})}catch(e){return console.warn("Screen capture failed:",e),null}}async _takeScreenshotWithHtml2Canvas(){try{if(await(async()=>{if(!l){const e=await s.e(1052).then(s.t.bind(s,81052,23));l=e.default}return l})(),"function"!==typeof l)return console.warn("html2canvas not available"),null;const e=await l(document.body,{height:window.innerHeight,width:window.innerWidth,scrollX:0,scrollY:0});return new Promise(t=>{e.toBlob(t,"image/png")})}catch(e){return console.warn("html2canvas screenshot failed:",e),null}}captureConsoleOutput(){const e=[],t={};return["log","warn","error","info","debug"].forEach(e=>{t[e]=console[e]}),["log","warn","error","info","debug"].forEach(s=>{console[s]=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t[s].apply(console,o);const r=(new Date).toISOString(),i=o.map(e=>"object"===typeof e?JSON.stringify(e):String(e)).join(" ");e.push("[".concat(r,"] ").concat(s.toUpperCase(),": ").concat(i))}}),{stop:()=>(Object.keys(t).forEach(e=>{console[e]=t[e]}),e.join("\n")),getLogs:()=>e.join("\n")}}async submitIssue(e,t,s,o){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;try{const h=(s.title||"")+(o.title||"Issue submitted via SGEX"),g=this.generateIssueBody(s,o,i,l,c,d),m=await a.A.createIssue(e,t,h,g,s.labels||[],[]);if(m.success&&m.issue&&a.A.isAuth())try{await r.A.addTrackedIssue((0,n.A)((0,n.A)({},m.issue),{},{repository:"".concat(e,"/").concat(t)}))}catch(u){console.warn("Failed to track created issue:",u)}return d&&m.success&&m.issue&&console.log("Screenshot captured but attachment upload not yet implemented"),m}catch(h){return console.error("Failed to submit issue:",h),{success:!1,error:{message:h.message,type:"submission_error"}}}}generateIssueUrl(e,t,s,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;const l=new URLSearchParams;s.filename&&l.set("template",s.filename),s.labels&&s.labels.length>0&&l.set("labels",s.labels.join(","));const c=(s.title||"")+(n.title||"");if(c&&l.set("title",c),s.filename&&s.body){for(const t of s.body)t.id&&n[t.id]&&l.set(t.id,n[t.id]);if(o&&a){const e=this._truncateConsoleOutput(a),t="console-output";l.set(t,"```\n".concat(e,"\n```"))}const e=this._generateContextualInfo(r);l.set("context-info",e),i&&l.set("screenshot-note","A screenshot was captured and will be manually attached to this issue.")}else{const e=this.generateIssueBody(s,n,o,a,r,i);if(e){const t=2e3,s=e.length>t?e.substring(0,t)+"\n\n... (content truncated, please add remaining details)":e;l.set("body",s)}}return"https://github.com/".concat(e,"/").concat(t,"/issues/new?").concat(l.toString())}clearCache(){this.templateCache.clear()}};var d=s(44414);const u=e=>{let{screenshotBlob:t,onSave:s,onCancel:n,isOpen:a}=e;const r=(0,o.useRef)(null),[i,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)("draw"),[h,g]=(0,o.useState)("#ff0000"),[m,p]=(0,o.useState)(3),[f,b]=(0,o.useState)(null),[v,w]=(0,o.useState)(null),[y,k]=(0,o.useState)(null),[x,N]=(0,o.useState)(!1),[j,S]=(0,o.useState)(null);(0,o.useEffect)(()=>{if(t&&a){const e=new Image;return e.onload=()=>{b(e);const t=r.current;if(t){t.width=e.width,t.height=e.height;const s=t.getContext("2d");s.drawImage(e,0,0),S(s.getImageData(0,0,t.width,t.height))}},e.src=URL.createObjectURL(t),()=>{URL.revokeObjectURL(e.src)}}},[t,a]);const A=(0,o.useCallback)(e=>{const t=r.current,s=t.getBoundingClientRect(),n=t.width/s.width,o=t.height/s.height;return{x:(e.clientX-s.left)*n,y:(e.clientY-s.top)*o}},[]),C=(0,o.useCallback)(e=>{const t=r.current.getContext("2d"),s=A(e);"crop"===c?(w(s),k(s),N(!0)):"draw"!==c&&"highlight"!==c||(l(!0),t.beginPath(),t.moveTo(s.x,s.y),"highlight"===c?(t.globalAlpha=.3,t.globalCompositeOperation="source-over"):(t.globalAlpha=1,t.globalCompositeOperation="source-over"),t.strokeStyle=h,t.lineWidth="highlight"===c?3*m:m,t.lineCap="round",t.lineJoin="round")},[c,A,h,m]),R=(0,o.useCallback)(e=>{const t=r.current,s=t.getContext("2d"),n=A(e);if("crop"===c&&x){k(n),s.clearRect(0,0,t.width,t.height),f&&s.drawImage(f,0,0);const e=Math.min(v.x,n.x),o=Math.min(v.y,n.y),a=Math.abs(n.x-v.x),r=Math.abs(n.y-v.y);s.strokeStyle="#000000",s.lineWidth=2,s.setLineDash([5,5]),s.strokeRect(e,o,a,r),s.setLineDash([])}else"draw"!==c&&"highlight"!==c||!i||(s.lineTo(n.x,n.y),s.stroke())},[c,x,v,i,A,f]),I=(0,o.useCallback)(()=>{if("crop"===c&&x)N(!1);else if("draw"===c||"highlight"===c){l(!1);r.current.getContext("2d").globalAlpha=1}},[c,x]);return a&&t?(0,d.jsx)("div",{className:"screenshot-editor-overlay",children:(0,d.jsxs)("div",{className:"screenshot-editor",children:[(0,d.jsxs)("div",{className:"screenshot-editor-header",children:[(0,d.jsx)("h3",{children:"Edit Screenshot"}),(0,d.jsx)("button",{className:"close-btn",onClick:n,"aria-label":"Close screenshot editor",children:"\xd7"})]}),(0,d.jsxs)("div",{className:"screenshot-editor-content",children:[(0,d.jsxs)("div",{className:"screenshot-toolbar",children:[(0,d.jsxs)("div",{className:"tool-group",children:[(0,d.jsx)("label",{children:"Tool:"}),(0,d.jsx)("button",{className:"tool-btn ".concat("draw"===c?"active":""),onClick:()=>u("draw"),children:"Draw"}),(0,d.jsx)("button",{className:"tool-btn ".concat("highlight"===c?"active":""),onClick:()=>u("highlight"),children:"Highlight"}),(0,d.jsx)("button",{className:"tool-btn ".concat("crop"===c?"active":""),onClick:()=>u("crop"),children:"Crop"})]}),("draw"===c||"highlight"===c)&&(0,d.jsxs)("div",{className:"tool-group",children:[(0,d.jsx)("label",{children:"Color:"}),(0,d.jsx)("div",{className:"color-palette",children:["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffffff","#000000","#ffa500","#800080"].map(e=>(0,d.jsx)("button",{className:"color-btn ".concat(h===e?"active":""),style:{backgroundColor:e},onClick:()=>g(e),"aria-label":"Select ".concat(e," color")},e))})]}),("draw"===c||"highlight"===c)&&(0,d.jsxs)("div",{className:"tool-group",children:[(0,d.jsx)("label",{children:"Size:"}),(0,d.jsx)("input",{type:"range",min:"1",max:"10",value:m,onChange:e=>p(parseInt(e.target.value)),className:"size-slider"}),(0,d.jsxs)("span",{className:"size-value",children:[m,"px"]})]}),"crop"===c&&v&&y&&(0,d.jsx)("div",{className:"tool-group",children:(0,d.jsx)("button",{className:"action-btn primary",onClick:()=>{if(!v||!y)return;const e=r.current,t=e.getContext("2d"),s=Math.min(v.x,y.x),n=Math.min(v.y,y.y),o=Math.abs(y.x-v.x),a=Math.abs(y.y-v.y);if(o>0&&a>0){const r=t.getImageData(s,n,o,a);e.width=o,e.height=a,t.putImageData(r,0,0),w(null),k(null),u("draw")}},children:"Apply Crop"})}),(0,d.jsx)("div",{className:"tool-group",children:(0,d.jsx)("button",{className:"action-btn secondary",onClick:()=>{if(j&&f){const e=r.current,t=e.getContext("2d");e.width=f.width,e.height=f.height,t.putImageData(j,0,0),w(null),k(null),u("draw")}},children:"Reset"})})]}),(0,d.jsx)("div",{className:"canvas-container",children:(0,d.jsx)("canvas",{ref:r,className:"screenshot-canvas",onMouseDown:C,onMouseMove:R,onMouseUp:I,onMouseLeave:I})}),(0,d.jsxs)("div",{className:"editor-instructions",children:["draw"===c&&(0,d.jsx)("p",{children:"Click and drag to draw on the screenshot"}),"highlight"===c&&(0,d.jsx)("p",{children:"Click and drag to highlight areas (semi-transparent)"}),"crop"===c&&(0,d.jsx)("p",{children:'Click and drag to select an area to crop, then click "Apply Crop"'})]})]}),(0,d.jsxs)("div",{className:"screenshot-editor-footer",children:[(0,d.jsx)("button",{className:"action-btn secondary",onClick:n,children:"Cancel"}),(0,d.jsx)("button",{className:"action-btn primary",onClick:()=>{r.current.toBlob(e=>{s(e)},"image/png")},children:"Save & Use"})]})]})}):null},h=e=>{let{onClose:t,contextData:s={},preselectedTemplateType:r=null}=e;const[i,l]=(0,o.useState)([]),[h,g]=(0,o.useState)(null),[m,p]=(0,o.useState)({}),[f,b]=(0,o.useState)(!1),[v,w]=(0,o.useState)(!1),[y,k]=(0,o.useState)(!0),[x,N]=(0,o.useState)(!1),[j,S]=(0,o.useState)(!1),[A,C]=(0,o.useState)(null),[R,I]=(0,o.useState)(null),[T,_]=(0,o.useState)(null),[P,D]=(0,o.useState)(null),[E,F]=(0,o.useState)(null),[G,L]=(0,o.useState)(!1),[M,H]=(0,o.useState)(!1),[O,B]=(0,o.useState)(!1),[U,q]=(0,o.useState)(null);(0,o.useEffect)(()=>{K()},[r]),(0,o.useEffect)(()=>{const e=c.captureConsoleOutput();return _(e),()=>{e.stop()}},[]),(0,o.useEffect)(()=>{if(i.length>0&&!h){let e;r&&(e=i.find(e=>e.type===r)||i.find(e=>e.id.includes(r))||i.find(e=>e.name.toLowerCase().includes(r.toLowerCase()))),e||(e=i.find(e=>"bug"===e.type)||i[0]),g(e),b("bug"===e.type||"bug"===r)}},[i,h,r]);const K=async()=>{try{if(k(!0),r){const e=c.getDefaultTemplates();return l(e),void k(!1)}const e=await c.getTemplates();l(e)}catch(e){console.error("Failed to load templates:",e),C("Failed to load bug report templates. Using defaults."),l(c.getDefaultTemplates())}finally{k(!1)}},W=(e,t)=>{p(s=>(0,n.A)((0,n.A)({},s),{},{[e]:t}))},z=async()=>{L(!0),C(null);try{const e=await c.takeScreenshot();if(e){q(e),D(e);const t=URL.createObjectURL(e);F(t),w(!0)}else C("Screenshot capture is not supported in this browser or was denied by the user.")}catch(e){console.error("Failed to take screenshot:",e),C("Failed to capture screenshot: "+e.message)}finally{L(!1)}};(0,o.useEffect)(()=>()=>{E&&URL.revokeObjectURL(E)},[E]);return y?(0,d.jsxs)("div",{className:"bug-report-form",children:[(0,d.jsxs)("div",{className:"form-header",children:[(0,d.jsx)("h3",{children:"Loading Bug Report Templates..."}),(0,d.jsx)("button",{className:"close-btn",onClick:t,"aria-label":"Close bug report form",children:"\xd7"})]}),(0,d.jsx)("div",{className:"loading-spinner",children:"Loading..."})]}):null!==R&&void 0!==R&&R.urlOpened?(0,d.jsxs)("div",{className:"bug-report-form",children:[(0,d.jsxs)("div",{className:"form-header",children:[(0,d.jsx)("h3",{children:"Issue Form Opened"}),(0,d.jsx)("button",{className:"close-btn",onClick:t,"aria-label":"Close bug report form",children:"\xd7"})]}),(0,d.jsx)("div",{className:"success-message",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{children:"\u2705 Your issue form has been opened in a new tab."}),(0,d.jsx)("p",{children:"Please complete and submit the form in the GitHub tab to create your issue."}),(0,d.jsx)("p",{children:"If the tab didn't open, you can access it here:"}),(0,d.jsx)("a",{href:R.fallbackUrl,target:"_blank",rel:"noopener noreferrer",className:"issue-link",children:"Open Issue Form"})]})})]}):j&&null!==R&&void 0!==R&&R.success?(0,d.jsxs)("div",{className:"bug-report-form",children:[(0,d.jsxs)("div",{className:"form-header",children:[(0,d.jsx)("h3",{children:"Issue Submitted Successfully!"}),(0,d.jsx)("button",{className:"close-btn",onClick:t,"aria-label":"Close bug report form",children:"\xd7"})]}),(0,d.jsx)("div",{className:"success-message",children:R.manual?(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{children:"\u2705 Your issue has been opened in a new tab."}),(0,d.jsx)("p",{children:"If the tab didn't open, you can access it here:"}),(0,d.jsx)("a",{href:R.fallbackUrl,target:"_blank",rel:"noopener noreferrer",className:"issue-link",children:"Open Issue Form"})]}):(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{children:["\u2705 Issue #",null===(X=R.issue)||void 0===X?void 0:X.number," has been created successfully!"]}),(0,d.jsxs)("a",{href:null===(Y=R.issue)||void 0===Y?void 0:Y.html_url,target:"_blank",rel:"noopener noreferrer",className:"issue-link",children:["View Issue #",null===(J=R.issue)||void 0===J?void 0:J.number]})]})})]}):(0,d.jsxs)("div",{className:"bug-report-form",children:[(0,d.jsxs)("div",{className:"form-header",children:[(0,d.jsx)("h3",{children:"Report an Issue"}),(0,d.jsx)("button",{className:"close-btn",onClick:t,"aria-label":"Close bug report form",children:"\xd7"})]}),A&&(0,d.jsx)("div",{className:"error-message",children:(0,d.jsxs)("p",{children:["\u26a0\ufe0f ",A]})}),(null===R||void 0===R?void 0:R.error)&&"popup_blocked"===R.error.type&&(0,d.jsxs)("div",{className:"error-message",children:[(0,d.jsx)("p",{children:"\u26a0\ufe0f Pop-up blocked. Please allow pop-ups or use the link below:"}),(0,d.jsx)("div",{children:(0,d.jsx)("a",{href:R.fallbackUrl,target:"_blank",rel:"noopener noreferrer",className:"fallback-link",children:"Open GitHub Issue Form"})})]}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h){N(!0),C(null);try{const e=f&&T?T.getLogs():"",o=v?P:null;if(a.A.isAuthenticated){const n=await c.submitIssue("litlfred","sgex",h,m,f,e,s,o);var t;if(I(n),n.success)S(!0);else C((null===(t=n.error)||void 0===t?void 0:t.message)||"Failed to submit issue")}else{const t=c.generateIssueUrl("litlfred","sgex",h,m,f,e,s,o);try{const e=window.open(t,"_blank");!e||e.closed?I({success:!1,fallbackUrl:t,error:{type:"popup_blocked"}}):I({success:!0,fallbackUrl:t,manual:!0,urlOpened:!0})}catch(n){I({success:!1,fallbackUrl:t,error:{type:"popup_blocked"}})}}}catch(o){console.error("Failed to submit bug report:",o),C(o.message)}finally{N(!1)}}else C("Please select a template")},className:"report-form",children:[(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsxs)("label",{htmlFor:"template-select",className:"field-label",children:["Issue Type ",(0,d.jsx)("span",{className:"required",children:"*"})]}),(0,d.jsxs)("select",{id:"template-select",className:"field-input select-input",value:(null===h||void 0===h?void 0:h.id)||"",onChange:e=>{(e=>{g(e),p({}),b("bug"===e.type),w("bug"===e.type)})(i.find(t=>t.id===e.target.value))},required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select issue type..."}),i.map(e=>(0,d.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))]})]}),(0,d.jsx)("div",{className:"form-field",children:(0,d.jsxs)("label",{className:"checkbox-label console-option",children:[(0,d.jsx)("input",{type:"checkbox",className:"checkbox-input",checked:f,onChange:e=>b(e.target.checked)}),"Include JavaScript console output in report",(0,d.jsx)("span",{className:"checkbox-help",children:"(Recommended for bug reports - helps developers debug issues)"})]})}),(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsxs)("label",{className:"checkbox-label screenshot-option",children:[(0,d.jsx)("input",{type:"checkbox",className:"checkbox-input",checked:v,onChange:e=>w(e.target.checked)}),"Include screenshot of current page",(0,d.jsx)("span",{className:"checkbox-help",children:"(Recommended for bug reports - helps visualize the issue)"})]}),v&&(0,d.jsx)("div",{className:"screenshot-controls",children:P?(0,d.jsxs)("div",{className:"screenshot-preview",children:[(0,d.jsx)("img",{src:E,alt:"Screenshot preview",className:"screenshot-image"}),(0,d.jsxs)("div",{className:"screenshot-actions",children:[(0,d.jsx)("button",{type:"button",className:"screenshot-btn secondary",onClick:()=>{B(!0)},children:"Edit"}),(0,d.jsx)("button",{type:"button",className:"screenshot-btn secondary",onClick:z,disabled:G,children:G?"Capturing...":"Retake"}),(0,d.jsx)("button",{type:"button",className:"screenshot-btn danger",onClick:()=>{E&&URL.revokeObjectURL(E),D(null),q(null),F(null),w(!1)},children:"Remove"})]})]}):(0,d.jsx)("button",{type:"button",className:"screenshot-btn secondary",onClick:z,disabled:G,children:G?"Capturing...":"Take Screenshot"})})]}),(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsxs)("label",{className:"context-preview-label",children:["Contextual Information",(0,d.jsxs)("button",{type:"button",className:"context-toggle-btn",onClick:()=>H(!M),children:[M?"Hide":"Show"," Context Details"]})]}),(0,d.jsx)("p",{className:"field-description",children:"This information will be automatically included to help developers understand the context of your report."}),M&&(0,d.jsxs)("div",{className:"context-preview",children:[(0,d.jsxs)("div",{className:"context-section",children:[(0,d.jsx)("h4",{children:"Page Context"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Current Page:"})," ",s.pageId||"Unknown"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"URL:"})," ",window.location.href]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Authentication:"})," ",a.A.isAuthenticated?"Authenticated":"Demo Mode"]})]})]}),s.repository&&(0,d.jsxs)("div",{className:"context-section",children:[(0,d.jsx)("h4",{children:"Repository Context"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Repository:"})," ",s.repository.name||s.repository]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Branch:"})," ",s.branch||"Unknown"]})]})]}),s.selectedDak&&(0,d.jsxs)("div",{className:"context-section",children:[(0,d.jsx)("h4",{children:"DAK Context"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"DAK Name:"})," ",s.selectedDak.name]}),s.selectedDak.description&&(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Description:"})," ",s.selectedDak.description]})]})]}),s.component&&(0,d.jsxs)("div",{className:"context-section",children:[(0,d.jsx)("h4",{children:"Component Context"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Component:"})," ",s.component]}),void 0!==s.isEditing&&(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Editing Mode:"})," ",s.isEditing?"Yes":"No"]})]})]})]})]}),h&&(0,d.jsx)("div",{className:"template-fields",children:h.body.map(e=>(e=>{const{id:t,type:s,attributes:n={},validations:o={}}=e,{label:a,description:r,placeholder:i,options:l}=n,{required:c}=o;if("markdown"===s)return(0,d.jsx)("div",{className:"form-field markdown-field",children:(0,d.jsx)("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n.value}})},t||Math.random());const u=t||"field_".concat(Math.random());switch(s){case"textarea":return(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsxs)("label",{htmlFor:u,className:"field-label",children:[a,c&&(0,d.jsx)("span",{className:"required",children:"*"})]}),r&&(0,d.jsx)("p",{className:"field-description",children:r}),(0,d.jsx)("textarea",{id:u,className:"field-input textarea-input",placeholder:i,value:m[u]||"",onChange:e=>W(u,e.target.value),required:c,rows:4})]},u);case"input":return(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsxs)("label",{htmlFor:u,className:"field-label",children:[a,c&&(0,d.jsx)("span",{className:"required",children:"*"})]}),r&&(0,d.jsx)("p",{className:"field-description",children:r}),(0,d.jsx)("input",{id:u,type:"text",className:"field-input text-input",placeholder:i,value:m[u]||"",onChange:e=>W(u,e.target.value),required:c})]},u);case"dropdown":return(0,d.jsxs)("div",{className:"form-field",children:[(0,d.jsxs)("label",{htmlFor:u,className:"field-label",children:[a,c&&(0,d.jsx)("span",{className:"required",children:"*"})]}),r&&(0,d.jsx)("p",{className:"field-description",children:r}),(0,d.jsxs)("select",{id:u,className:"field-input select-input",value:m[u]||"",onChange:e=>W(u,e.target.value),required:c,children:[(0,d.jsx)("option",{value:"",children:"Select an option..."}),null===l||void 0===l?void 0:l.map((e,t)=>(0,d.jsx)("option",{value:e.value||e,children:e.label||e},t))]})]},u);case"checkboxes":return(0,d.jsx)("div",{className:"form-field",children:(0,d.jsxs)("fieldset",{className:"checkbox-fieldset",children:[(0,d.jsxs)("legend",{className:"field-label",children:[a,c&&(0,d.jsx)("span",{className:"required",children:"*"})]}),r&&(0,d.jsx)("p",{className:"field-description",children:r}),null===l||void 0===l?void 0:l.map((e,t)=>{var s;return(0,d.jsxs)("label",{className:"checkbox-label",children:[(0,d.jsx)("input",{type:"checkbox",className:"checkbox-input",checked:(null===(s=m[u])||void 0===s?void 0:s.includes(e.value||e))||!1,onChange:t=>{const s=e.value||e,n=m[u]||[],o=t.target.checked?[...n,s]:n.filter(e=>e!==s);W(u,o)}}),e.label||e]},t)})]})},u);default:return(0,d.jsx)("div",{className:"form-field",children:(0,d.jsxs)("p",{className:"unsupported-field",children:["Unsupported field type: ",s]})},u)}})(e))}),(0,d.jsxs)("div",{className:"form-actions",children:[(0,d.jsx)("button",{type:"submit",className:"submit-btn primary",disabled:x||!h,children:x?"Opening...":a.A.isAuthenticated?"Submit Issue":"Open in GitHub"}),(0,d.jsx)("button",{type:"button",className:"cancel-btn secondary",onClick:t,children:"Cancel"}),h&&!(null!==R&&void 0!==R&&R.urlOpened)&&(0,d.jsx)("a",{href:(()=>{if(!h)return"";const e=f&&T?T.getLogs():"",t=v?P:null;return c.generateIssueUrl("litlfred","sgex",h,m,f,e,s,t)})(),target:"_blank",rel:"noopener noreferrer",className:"fallback-btn tertiary",children:"Open in GitHub"})]}),(0,d.jsx)("div",{className:"auth-status",children:a.A.isAuthenticated?(0,d.jsx)("p",{className:"auth-info authenticated",children:"\u2705 Authenticated - Issues will be submitted directly to GitHub"}):(0,d.jsx)("p",{className:"auth-info not-authenticated",children:"\u2139\ufe0f Not authenticated - Issue will open in GitHub for manual submission"})})]}),(0,d.jsx)(u,{screenshotBlob:U,onSave:e=>{D(e),E&&URL.revokeObjectURL(E);const t=URL.createObjectURL(e);F(t),B(!1)},onCancel:()=>{B(!1)},isOpen:O})]});var X,Y,J}},88259:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(9950);const o=e=>{const[t,s]=(0,n.useState)(e);return(0,n.useEffect)(()=>{const t=()=>{const t=document.body.classList.contains("theme-dark"),n="/sgex/copilot-fix-930",o=e.startsWith("/")?e.slice(1):e;let a;if(t){const e=o.replace(/\.png$/,"_grey_tabby.png");a=n?"".concat(n,"/").concat(e):"/".concat(e)}else a=n?"".concat(n,"/").concat(o):"/".concat(o);s(a)};t();const n=new MutationObserver(e=>{e.forEach(e=>{"attributes"===e.type&&"class"===e.attributeName&&t()})});return n.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>{n.disconnect()}},[e]),t}},88498:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(29946),o=s(38659);const a=new class{async validateDAKRepository(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";try{const n=await this.checkRepositoryExists(e,t),a=await this.fetchSushiConfig(e,t,s);if(!a)return n?(console.log("Repository ".concat(e,"/").concat(t," exists on GitHub - allowing access even without sushi-config.yaml")),!0):(console.log("No sushi-config.yaml found in ".concat(e,"/").concat(t," and repository doesn't exist")),!1);const r=(await(0,o.cb)()).load(a);if(!r||"object"!==typeof r)return n?(console.log("Invalid YAML format in sushi-config.yaml for ".concat(e,"/").concat(t," but repository exists - allowing access")),!0):(console.log("Invalid YAML format in sushi-config.yaml for ".concat(e,"/").concat(t)),!1);if(!r.dependencies||"object"!==typeof r.dependencies)return n?(console.log("No dependencies section found in sushi-config.yaml for ".concat(e,"/").concat(t," but repository exists - allowing access")),!0):(console.log("No dependencies section found in sushi-config.yaml for ".concat(e,"/").concat(t)),!1);return"smart.who.int.base"in r.dependencies?(console.log("Valid DAK repository found: ".concat(e,"/").concat(t," (has smart.who.int.base dependency)")),!0):n?(console.log("Repository ".concat(e,"/").concat(t," has sushi-config.yaml but missing smart.who.int.base dependency - allowing access since repository exists")),!0):(console.log("Repository ".concat(e,"/").concat(t," has sushi-config.yaml but missing smart.who.int.base dependency")),!1)}catch(n){return console.log("Error validating DAK repository ".concat(e,"/").concat(t,":"),n.message),!1}}async checkRepositoryExists(e,t){try{const s=n.A.isAuth()?n.A.octokit:null;return s?(await s.rest.repos.get({owner:e,repo:t}),console.log("Repository ".concat(e,"/").concat(t," exists on GitHub")),!0):(console.log("Cannot check repository existence for ".concat(e,"/").concat(t," - not authenticated")),!1)}catch(s){return 404===s.status?(console.log("Repository ".concat(e,"/").concat(t," does not exist on GitHub")),!1):(console.log("Error checking repository existence for ".concat(e,"/").concat(t,":"),s.message,"- assuming it might exist"),!0)}}async fetchSushiConfig(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";try{const a=n.A.isAuth()?n.A.octokit:null;if(!a)return console.log("Cannot fetch sushi-config.yaml for ".concat(e,"/").concat(t," - not authenticated")),null;const r="main"===s?["main","master"]:[s];for(const s of r)try{const{data:n}=await a.rest.repos.getContent({owner:e,repo:t,path:"sushi-config.yaml",ref:s});if("file"===n.type&&n.content){const o=decodeURIComponent(escape(atob(n.content)));return console.log("Found sushi-config.yaml in ".concat(e,"/").concat(t," on branch ").concat(s)),o}}catch(o){console.log("sushi-config.yaml not found on branch ".concat(s," for ").concat(e,"/").concat(t,":"),404===o.status?"File not found":o.message);continue}return null}catch(a){return console.log("Error fetching sushi-config.yaml for ".concat(e,"/").concat(t,":"),a.message),null}}validateDemoDAKRepository(e,t){if(!e||!t||e.includes("/")||t.includes("/"))return console.log("Demo mode: Invalid repository format ".concat(e,"/").concat(t)),!1;const s=/^[a-zA-Z0-9._-]+$/;if(!s.test(e)||!s.test(t))return console.log("Demo mode: Invalid characters in repository name ".concat(e,"/").concat(t)),!1;const n="".concat(e,"/").concat(t);return console.log("Demo mode: ".concat(n," accepted as valid DAK repository (proper org/repo format)")),!0}}},90584:(e,t,s)=>{s.d(t,{ox:()=>te,Mx:()=>U,oc:()=>K,HX:()=>q});var n=s(9950),o=s(89379),a=s(85001),r=s(29946),i=s(88498);const l=new class{constructor(){this.storageKey="sgex-profile-subscriptions",this.whoProfile="WorldHealthOrganization"}getSubscriptions(){try{const e=localStorage.getItem(this.storageKey),t=e?JSON.parse(e):[];return t.find(e=>e.login===this.whoProfile)||(t.unshift({login:this.whoProfile,name:"World Health Organization",avatar_url:"https://github.com/".concat(this.whoProfile,".png"),type:"Organization",isPermanent:!0,addedAt:(new Date).toISOString()}),this.saveSubscriptions(t)),t}catch(e){return console.warn("Error reading profile subscriptions from localStorage:",e),[{login:this.whoProfile,name:"World Health Organization",avatar_url:"https://github.com/".concat(this.whoProfile,".png"),type:"Organization",isPermanent:!0,addedAt:(new Date).toISOString()}]}}saveSubscriptions(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(t){throw console.error("Error saving profile subscriptions to localStorage:",t),t}}addSubscription(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!e.login)throw new Error("Profile must have a login property");const s=this.getSubscriptions(),n=s.findIndex(t=>t.login===e.login);if(-1!==n)return s[n]=(0,o.A)((0,o.A)((0,o.A)({},s[n]),e),{},{isPermanent:s[n].isPermanent||t,lastUpdated:(new Date).toISOString()}),this.saveSubscriptions(s),s[n];const a={login:e.login,name:e.name||e.login,avatar_url:e.avatar_url||"https://github.com/".concat(e.login,".png"),type:e.type||"User",isPermanent:t,addedAt:(new Date).toISOString(),lastUpdated:(new Date).toISOString()};return s.push(a),this.saveSubscriptions(s),a}removeSubscription(e){if(!e)return!1;try{const t=this.getSubscriptions(),s=t.findIndex(t=>t.login===e);if(-1===s)return!1;return t[s].isPermanent?(console.warn("Cannot remove permanent profile: ".concat(e)),!1):(t.splice(s,1),this.saveSubscriptions(t),!0)}catch(t){return console.error("Error removing profile subscription:",t),!1}}isSubscribed(e){if(!e)return!1;return this.getSubscriptions().some(t=>t.login===e)}getSubscription(e){if(!e)return null;return this.getSubscriptions().find(t=>t.login===e)||null}ensureCurrentUserSubscribed(e){if(!e||!e.login)return;const t=this.getSubscription(e.login);t?t.isPermanent||this.addSubscription((0,o.A)((0,o.A)((0,o.A)({},t),e),{},{isPermanent:!0}),!0):this.addSubscription((0,o.A)((0,o.A)({},e),{},{isPermanent:!0}),!0)}autoAddVisitedProfile(e){e&&e.login&&(this.isSubscribed(e.login)||e.isDemo||this.addSubscription(e,!1))}getSubscriptionsSorted(){return this.getSubscriptions().sort((e,t)=>{if(e.login===this.whoProfile)return-1;if(t.login===this.whoProfile)return 1;const s=e.name||e.login,n=t.name||t.login;return s.localeCompare(n)})}getSubscriptionsForSelection(){return this.getSubscriptionsSorted().map(e=>(0,o.A)((0,o.A)({},e),{},{displayName:e.name||e.login,isRemovable:!e.isPermanent}))}updateSubscription(e,t){if(!e||!t)return!1;try{const s=this.getSubscriptions(),n=s.findIndex(t=>t.login===e);return-1!==n&&(s[n]=(0,o.A)((0,o.A)((0,o.A)({},s[n]),t),{},{login:e,lastUpdated:(new Date).toISOString()}),this.saveSubscriptions(s),!0)}catch(s){return console.error("Error updating subscription:",s),!1}}clearSubscriptions(){try{const e={login:this.whoProfile,name:"World Health Organization",avatar_url:"https://github.com/".concat(this.whoProfile,".png"),type:"Organization",isPermanent:!0,addedAt:(new Date).toISOString()};this.saveSubscriptions([e])}catch(e){console.error("Error clearing subscriptions:",e)}}exportSubscriptions(){const e=this.getSubscriptions();return JSON.stringify(e,null,2)}importSubscriptions(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const s=JSON.parse(e);if(!Array.isArray(s))throw new Error("Invalid subscription format");let n;if(t){const e=[...this.getSubscriptions()];s.forEach(t=>{const s=e.findIndex(e=>e.login===t.login);-1!==s?e[s]=(0,o.A)((0,o.A)({},t),{},{isPermanent:e[s].isPermanent||t.isPermanent}):e.push(t)}),n=e}else n=s;return n.find(e=>e.login===this.whoProfile)||n.unshift({login:this.whoProfile,name:"World Health Organization",avatar_url:"https://github.com/".concat(this.whoProfile,".png"),type:"Organization",isPermanent:!0,addedAt:(new Date).toISOString()}),this.saveSubscriptions(n),!0}catch(s){return console.error("Error importing subscriptions:",s),!1}}};var c=s(44414);const d="top-level",u="user",h="dak",g="asset",m=(0,n.createContext)(null),p=()=>{const e=(0,n.useContext)(m);return e||(console.error("usePage: PageContext is null - component not wrapped in PageProvider"),{pageName:"unknown",user:null,profile:null,repository:null,branch:null,asset:null,type:"top-level",loading:!1,error:null,isAuthenticated:!1,navigate:()=>{},params:{},location:{pathname:"/"}})},f=e=>{const{user:t,repo:s}=e;return e["*"]?g:t&&s?h:t?u:d},b=e=>{let{children:t,pageName:s}=e;const p=(0,a.g)(),b=(0,a.zy)(),v=(0,a.Zp)(),[w,y]=(0,n.useState)({type:f(p),pageName:s,loading:!1,error:null,user:null,profile:null,repository:null,branch:null,asset:null,isAuthenticated:r.A.isAuth()}),{user:k,repo:x}=p,N=p["*"];(0,n.useEffect)(()=>{(w.type!==d&&k||w.type===d)&&(async()=>{try{var e,t,n;if(y(e=>(0,o.A)((0,o.A)({},e),{},{loading:!0,error:null})),"documentation-viewer"===s){if(!r.A.isAuth()&&r.A.hasStoredToken())try{await r.A.initializeFromStoredToken()}catch(c){console.debug("Could not initialize authentication from stored token:",c)}return void y(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:null,isAuthenticated:r.A.isAuth()}))}let m=null===(e=b.state)||void 0===e?void 0:e.profile,f=null===(t=b.state)||void 0===t?void 0:t.repository,v=(null===(n=b.state)||void 0===n?void 0:n.selectedBranch)||p.branch;if(w.type===h||w.type===g){var a;if(!m&&k)if(r.A.isAuth())try{m=await r.A.getUser(k)}catch(d){if("dashboard"===s||s.includes("editor")||s.includes("viewer")||w.type===h||w.type===g)return void y(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"User '".concat(k,"' not found or not accessible. Please check the username and try again."),user:k,repository:x?{name:x,owner:{login:k},html_url:"https://github.com/".concat(k,"/").concat(x),isNotFound:!0}:null,branch:p.branch||"main"}));throw new Error("User '".concat(k,"' not found or not accessible."))}else m={login:k,name:k.charAt(0).toUpperCase()+k.slice(1),avatar_url:"https://github.com/".concat(k,".png"),type:"User"};if(!f&&k&&x)if(r.A.isAuth())try{if(f=await r.A.getRepository(k,x),!await i.A.validateDAKRepository(k,x,v||f.default_branch)){if("dashboard"===s||s.includes("editor")||s.includes("viewer")||w.type===h||w.type===g)return void y(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"Repository '".concat(k,"/").concat(x,"' is not a valid DAK repository. This repository may not contain WHO SMART Guidelines content."),user:k,profile:m,repository:(0,o.A)((0,o.A)({},f),{},{isInvalidDAK:!0}),branch:v||f.default_branch}));throw new Error("Repository '".concat(k,"/").concat(x,"' is not a valid DAK repository."))}}catch(d){if("dashboard"===s||s.includes("editor")||s.includes("viewer")||w.type===h||w.type===g)return void y(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"Repository '".concat(k,"/").concat(x,"' not found or not accessible. Please check the repository name and your access permissions."),user:k,profile:m,repository:{name:x,owner:{login:k},html_url:"https://github.com/".concat(k,"/").concat(x),isNotFound:!0},branch:v||"main"}));throw new Error("Repository '".concat(k,"/").concat(x,"' not found or not accessible."))}else f={name:x,full_name:"".concat(k,"/").concat(x),owner:{login:k},default_branch:v||"main",html_url:"https://github.com/".concat(k,"/").concat(x)};if(v=v||(null===(a=f)||void 0===a?void 0:a.default_branch)||"main",w.type===g&&N)try{await r.A.getFileContent(k,x,N,v)}catch(d){if("asset"===s||s.includes("editor")||s.includes("viewer"))return void y(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"Asset '".concat(N,"' not found in repository '").concat(k,"/").concat(x,"'. The file may have been moved or deleted."),user:k,profile:m,repository:f,branch:v,asset:N}));throw new Error("Asset '".concat(N,"' not found in repository."))}}if(w.type===u&&!m&&k)if(r.A.isAuth())try{m=await r.A.getUser(k)}catch(d){return void y(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"User '".concat(k,"' not found or not accessible. Please check the username and try again."),user:k}))}else m={login:k,name:k.charAt(0).toUpperCase()+k.slice(1),avatar_url:"https://github.com/".concat(k,".png"),type:"User"};y(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,user:k,profile:m,repository:f,branch:v,asset:N,isAuthenticated:r.A.isAuth()}));const j=async()=>{try{const e=await r.A.getCurrentUser();e&&l.ensureCurrentUserSubscribed(e)}catch(c){console.debug("Could not fetch current user for subscriptions:",c)}m&&r.A.isAuth()&&(w.type===u||w.type===h||w.type===g)&&l.autoAddVisitedProfile(m)};r.A.isAuth()&&j()}catch(c){console.error("Page data loading error:",c),y(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:c.message}))}})()},[k,x,p.branch,N,w.type,b.state,v,s]),(0,n.useEffect)(()=>{const e=setInterval(()=>{const e=r.A.isAuth();e!==w.isAuthenticated&&y(t=>(0,o.A)((0,o.A)({},t),{},{isAuthenticated:e}))},1e3);return()=>clearInterval(e)},[w.isAuthenticated]);const j=(0,o.A)((0,o.A)({},w),{},{navigate:v,params:p,location:b});return(0,c.jsx)(m.Provider,{value:j,children:t})};var v=s(85571);const w="authenticated",y="unauthenticated",k="read",x="write",N="none";const j=new class{constructor(){this.logger=v.A.getLogger("UserAccessService"),this.currentUser=null,this.userType=y,this.permissions=new Map,this.listeners=new Set}async initialize(){this.logger.info("Initializing user access service"),await this.detectUserType(),this.notifyListeners()}async detectUserType(){try{r.A.isAuth()?(this.userType=w,this.currentUser=await r.A.getCurrentUser()):(this.userType=y,this.currentUser=null),this.logger.info("User type detected",{userType:this.userType,hasUser:!!this.currentUser})}catch(e){this.logger.error("Error detecting user type",{error:e.message}),this.userType=y,this.currentUser=null}}getUserType(){return this.userType}getCurrentUser(){return this.currentUser}isAuthenticated(){return this.userType===w}isUnauthenticated(){return this.userType===y}async getRepositoryAccess(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";const n="".concat(e,"/").concat(t,"/").concat(s);if(this.permissions.has(n))return this.permissions.get(n);let o=N;try{if(this.userType===y)o=k;else if(this.userType===w){const s=await this.checkGitHubReadAccess(e,t);await this.checkGitHubWriteAccess(e,t)?o=x:s&&(o=k)}}catch(a){this.logger.error("Error checking repository access",{owner:e,repo:t,branch:s,error:a.message}),o=k}return this.permissions.set(n,o),this.logger.debug("Repository access determined",{owner:e,repo:t,branch:s,access:o,userType:this.userType}),o}async checkGitHubReadAccess(e,t){try{return await r.A.getRepository(e,t),!0}catch(s){return!1}}async checkGitHubWriteAccess(e,t){try{return await r.A.hasRepositoryWriteAccess(e,t)}catch(s){return!1}}async canSaveToGitHub(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";if(this.userType!==w)return!1;return await this.getRepositoryAccess(e,t,s)===x}canSaveLocal(){return!0}getUIBehavior(){const e={showEditFeatures:!0,showSaveToGitHub:!0,showSaveLocal:!0,confirmBeforeSave:!0,allowCreateNew:!0,showAccessBadges:!0};switch(this.userType){case y:return(0,o.A)((0,o.A)({},e),{},{showEditFeatures:!1,showSaveToGitHub:!1,allowCreateNew:!1});case w:return e;default:return(0,o.A)((0,o.A)({},e),{},{showEditFeatures:!1,showSaveToGitHub:!1,allowCreateNew:!1})}}async getAccessBadge(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";const n=await this.getRepositoryAccess(e,t,s),o={[x]:{text:"Write Access",icon:"\u270f\ufe0f",color:"green",description:"You can edit and save changes to this repository"},[k]:{text:"Read Only",icon:"\ud83d\udc41\ufe0f",color:"blue",description:"You can view this repository but cannot save changes"},[N]:{text:"No Access",icon:"\ud83d\udeab",color:"red",description:"You do not have access to this repository"}};return o[n]||o[N]}clearPermissionsCache(){this.permissions.clear(),this.logger.debug("Permissions cache cleared")}addListener(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}notifyListeners(){const e={userType:this.userType,currentUser:this.currentUser,isAuthenticated:this.isAuthenticated(),uiBehavior:this.getUIBehavior()};this.listeners.forEach(t=>{try{t(e)}catch(s){this.logger.error("Error in access service listener",{error:s.message})}})}handleAuthChange(){this.clearPermissionsCache(),this.initialize()}};var S=s(65621),A=s(80045);const C=new class{constructor(){this.baseURL="https://api.github.com",this.owner="litlfred",this.repo="sgex",this.workflowFileName="pages.yml"}setToken(e){this.token=e}getHeaders(){const e={Accept:"application/vnd.github.v3+json","Content-Type":"application/json"};return this.token&&(e.Authorization="token ".concat(this.token)),e}async getWorkflowId(){try{const e=await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/workflows"),{headers:this.getHeaders()});if(!e.ok)throw new Error("Failed to fetch workflows: ".concat(e.status));const t=await e.json();console.debug("Available workflows:",t.workflows.map(e=>({name:e.name,path:e.path})));const s=t.workflows.find(e=>e.path.includes("branch-deployment.yml")||e.name.includes("Deploy Feature Branch")||e.path.includes("landing-page-deployment.yml")||e.name.includes("Deploy Landing Page")||e.path.includes(this.workflowFileName)||e.name.includes("Multi-Branch GitHub Pages Deployment"));return console.debug("Selected workflow:",s?{name:s.name,path:s.path,id:s.id}:"None found"),s?s.id:null}catch(e){return console.error("Error fetching workflow ID:",e),null}}async getLatestWorkflowRun(e){try{console.debug("Looking for workflow runs for branch: ".concat(e));const t="main"===e,s=t?"Deploy Landing Page":"Deploy Feature Branch",n=await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/workflows"),{headers:this.getHeaders()});if(!n.ok)throw new Error("Failed to fetch workflows: ".concat(n.status));const o=await n.json();let a;if(console.debug("Available workflows:",o.workflows.map(e=>({name:e.name,path:e.path}))),a=t?o.workflows.find(e=>e.name.includes("Deploy Landing Page")||e.path.includes("landing-page-deployment.yml")):o.workflows.find(e=>e.name.includes("Deploy Feature Branch")||e.path.includes("branch-deployment.yml")),!a)return console.debug("No ".concat(s," workflow found for branch ").concat(e)),null;console.debug("Using workflow: ".concat(a.name," (ID: ").concat(a.id,") for branch ").concat(e));const r=await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/workflows/").concat(a.id,"/runs?branch=").concat(encodeURIComponent(e),"&per_page=5"),{headers:this.getHeaders()});if(!r.ok)throw new Error("Failed to fetch workflow runs: ".concat(r.status));const i=await r.json();if(console.debug("Found ".concat(i.workflow_runs.length," workflow runs for branch ").concat(e)),i.workflow_runs.length>0){const e=i.workflow_runs[0];return console.debug("Latest run: ".concat(e.status,"/").concat(e.conclusion," at ").concat(e.created_at)),e}return null}catch(t){return console.error("Error fetching latest workflow run for branch ".concat(e,":"),t),null}}async getAllWorkflowsForBranch(e){try{console.debug("Getting all workflows for branch: ".concat(e));const t=await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/workflows"),{headers:this.getHeaders()});if(!t.ok)throw new Error("Failed to fetch workflows: ".concat(t.status));const s=await t.json();console.debug("All available workflows:",s.workflows.map(e=>({name:e.name,path:e.path,state:e.state})));const n=s.workflows.filter(e=>"active"===e.state&&(e.path.includes("branch-deployment.yml")||e.path.includes("landing-page-deployment.yml")||e.name.includes("Deploy Feature Branch")||e.name.includes("Deploy Landing Page")||e.path.includes("ci.yml")||e.path.includes("test.yml")||e.path.includes("build.yml")||e.name.includes("CI")||e.name.includes("Test")||e.name.includes("Build")));console.debug("Found ".concat(n.length," relevant workflows for branch ").concat(e));return await Promise.all(n.map(async t=>{try{var s;const n=await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/workflows/").concat(t.id,"/runs?branch=").concat(encodeURIComponent(e),"&per_page=1"),{headers:this.getHeaders()});let a=null;if(n.ok){const e=await n.json();e.workflow_runs.length>0&&(a=e.workflow_runs[0])}const r=this.parseWorkflowStatus(a);return(0,o.A)((0,o.A)({workflow:{id:t.id,name:t.name,path:t.path,url:"https://github.com/".concat(this.owner,"/").concat(this.repo,"/actions/workflows/").concat(t.id)}},r),{},{lastRunId:(null===(s=a)||void 0===s?void 0:s.id)||null,workflowUrl:"https://github.com/".concat(this.owner,"/").concat(this.repo,"/actions/workflows/").concat(t.id)})}catch(n){return console.error("Error fetching runs for workflow ".concat(t.name,":"),n),{workflow:{id:t.id,name:t.name,path:t.path,url:"https://github.com/".concat(this.owner,"/").concat(this.repo,"/actions/workflows/").concat(t.id)},status:"error",conclusion:null,url:null,runId:null,createdAt:null,displayStatus:"Error",badgeClass:"error",icon:"\u274c",workflowUrl:"https://github.com/".concat(this.owner,"/").concat(this.repo,"/actions/workflows/").concat(t.id)}}}))}catch(t){return console.error("Error getting all workflows for branch ".concat(e,":"),t),[]}}async getWorkflowStatusForBranches(e){const t={};for(const n of e)try{const e=await this.getLatestWorkflowRun(n);t[n]=this.parseWorkflowStatus(e)}catch(s){console.error("Error getting workflow status for branch ".concat(n,":"),s),t[n]={status:"unknown",conclusion:null,url:null,runId:null,createdAt:null}}return t}parseWorkflowStatus(e){if(!e)return{status:"not_started",conclusion:null,url:null,runId:null,createdAt:null,displayStatus:"Not Started",badgeClass:"not-started",icon:"\u26aa"};const t=e.status,s=e.conclusion;let n,o,a;return"in_progress"===t||"queued"===t||"pending"===t?(n="In Progress",o="in-progress",a="\ud83d\udfe1"):"waiting"===t?(n="Awaiting Approval",o="waiting",a="\ud83d\udfe0"):"requested"===t?(n="Requested",o="requested",a="\ud83d\udd35"):"completed"===t?"success"===s?(n="Succeeded",o="succeeded",a="\ud83d\udfe2"):"failure"===s||"cancelled"===s||"timed_out"===s?(n="Failed",o="failed",a="\ud83d\udd34"):"action_required"===s?(n="Action Required",o="action-required",a="\ud83d\udfe0"):(n="Completed",o="completed",a="\ud83d\udfe6"):(n="Unknown",o="unknown",a="\u26ab"),{status:t,conclusion:s,url:e.html_url,runId:e.id,createdAt:new Date(e.created_at),displayStatus:n,badgeClass:o,icon:a}}async triggerWorkflow(e){try{if(!this.token)throw new Error("Authentication required to trigger workflows");console.debug("Triggering workflow for branch: ".concat(e));const t="main"===e,s=await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/workflows"),{headers:this.getHeaders()});if(!s.ok)throw new Error("Failed to fetch workflows: ".concat(s.status));const n=await s.json();let o;if(o=t?n.workflows.find(e=>e.name.includes("Deploy Landing Page")||e.path.includes("landing-page-deployment.yml")):n.workflows.find(e=>e.name.includes("Deploy Feature Branch")||e.path.includes("branch-deployment.yml")),!o)throw new Error("No deployment workflow found for branch ".concat(e));console.debug("Triggering workflow: ".concat(o.name," (ID: ").concat(o.id,") for branch ").concat(e));const a=await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/workflows/").concat(o.id,"/dispatches"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify({ref:e,inputs:{branch:e}})});if(!a.ok){const t=await a.text();throw console.error("Workflow trigger failed:",{status:a.status,statusText:a.statusText,error:t,branch:e,workflowId:o.id}),new Error("Failed to trigger workflow: ".concat(a.status," ").concat(a.statusText," - ").concat(t))}return console.debug("Successfully triggered workflow for branch ".concat(e)),!0}catch(t){return console.error("Error triggering workflow for branch ".concat(e,":"),t),!1}}getActionsURL(){return"https://github.com/".concat(this.owner,"/").concat(this.repo,"/actions")}async getWorkflowURL(){try{const e=await this.getWorkflowId();return e?"https://github.com/".concat(this.owner,"/").concat(this.repo,"/actions/workflows/").concat(e):this.getActionsURL()}catch(e){return console.error("Error getting workflow URL:",e),this.getActionsURL()}}async checkWorkflowTriggerPermissions(){try{if(!this.token)return!1;return!!(await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/workflows"),{headers:this.getHeaders()})).ok}catch(e){return console.debug("Cannot check workflow trigger permissions:",e),!1}}async checkWorkflowApprovalPermissions(){try{if(!this.token)return!1;return(await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/runs?status=waiting"),{headers:this.getHeaders()})).ok}catch(e){return console.debug("Cannot check workflow approval permissions:",e),!1}}async approveWorkflowRun(e){try{if(!this.token)throw new Error("Authentication required to approve workflow runs");console.debug("Approving workflow run: ".concat(e));const t=await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/runs/").concat(e,"/approve"),{method:"POST",headers:this.getHeaders()});if(!t.ok){const s=await t.text();throw console.error("Workflow approval failed:",{status:t.status,statusText:t.statusText,error:s,runId:e}),new Error("Failed to approve workflow run: ".concat(t.status," ").concat(t.statusText," - ").concat(s))}return console.debug("Successfully approved workflow run ".concat(e)),!0}catch(t){return console.error("Error approving workflow run ".concat(e,":"),t),!1}}async rerunFailedWorkflow(e){try{if(!this.token)throw new Error("Authentication required to rerun workflow");console.debug("Rerunning failed jobs for workflow run: ".concat(e));const t=await fetch("".concat(this.baseURL,"/repos/").concat(this.owner,"/").concat(this.repo,"/actions/runs/").concat(e,"/rerun-failed-jobs"),{method:"POST",headers:this.getHeaders()});if(!t.ok){const s=await t.text();throw console.error("Workflow rerun failed:",{status:t.status,statusText:t.statusText,error:s,runId:e}),new Error("Failed to rerun workflow: ".concat(t.status," ").concat(t.statusText," - ").concat(s))}return console.debug("Successfully reran failed jobs for workflow run ".concat(e)),!0}catch(t){return console.error("Error rerunning workflow run ".concat(e,":"),t),!1}}isAuthenticated(){return!!this.token}},R=e=>{let{branchName:t,githubActionsService:s,isAuthenticated:a,canTriggerWorkflows:r=!1,canApproveWorkflows:i=!1,onWorkflowAction:l=null,prInfo:d=null,canMergePR:u=!1,canManagePR:h=!1,canReviewPR:g=!1,isMergingPR:m=!1,isApprovingPR:p=!1,isRequestingChanges:f=!1,isMarkingReadyForReview:b=!1,approvalStatus:v=null,approvalMessage:w="",newComment:y="",onMergePR:k=null,onApprovePR:x=null,onRequestChanges:N=null,onMarkReadyForReview:j=null}=e;const[S,A]=(0,n.useState)([]),[C,R]=(0,n.useState)(!1),[I,T]=(0,n.useState)(null),[_,P]=(0,n.useState)(!1),[D,E]=(0,n.useState)({}),F=(0,n.useRef)(null),[G,L]=(0,n.useState)(null),M=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(e?P(!0):R(!0),T(null),!s||!t)throw new Error("Missing required parameters");console.debug("Fetching workflows for branch: ".concat(t));const n=await s.getAllWorkflowsForBranch(t);console.debug("Fetched ".concat(n.length," workflows:"),n.map(e=>({name:e.workflow.name,status:e.displayStatus,lastRun:e.createdAt}))),A(n),L(new Date),l&&n.length>0&&l({type:"workflows_loaded",workflows:n})}catch(n){console.error("Error fetching workflows:",n),T(n.message)}finally{R(!1),P(!1)}};(0,n.useEffect)(()=>()=>{F.current&&clearInterval(F.current)},[]),(0,n.useEffect)(()=>{if(t&&s){(async()=>{await M(),F.current&&clearInterval(F.current),F.current=setInterval(()=>{M(!0)},15e3)})()}},[t,s]);const H=e=>e?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e):"Never",O=e=>{const t=e.workflow.name.toLowerCase(),s=e.workflow.path.toLowerCase();return t.includes("deploy")&&t.includes("landing")?"Deploys main branch to production landing page":t.includes("deploy")&&t.includes("feature")?"Deploys feature branch for preview":t.includes("deploy")||s.includes("deploy")?"Deployment workflow":t.includes("ci")||t.includes("test")||s.includes("ci")||s.includes("test")?"Continuous integration and testing":t.includes("build")||s.includes("build")?"Build and compilation workflow":"Workflow automation"};return C&&!_?(0,c.jsxs)("div",{className:"workflow-dashboard",children:[(0,c.jsx)("div",{className:"workflow-dashboard-header",children:(0,c.jsx)("h4",{children:"\u2699\ufe0f Workflow Status Dashboard"})}),(0,c.jsxs)("div",{className:"workflow-dashboard-loading",children:[(0,c.jsx)("div",{className:"loading-spinner"}),(0,c.jsx)("span",{children:"Loading workflow status..."})]})]}):I?(0,c.jsxs)("div",{className:"workflow-dashboard",children:[(0,c.jsx)("div",{className:"workflow-dashboard-header",children:(0,c.jsx)("h4",{children:"\u2699\ufe0f Workflow Status Dashboard"})}),(0,c.jsxs)("div",{className:"workflow-dashboard-error",children:[(0,c.jsx)("span",{className:"error-icon",children:"\u274c"}),(0,c.jsxs)("span",{children:["Error: ",I]}),(0,c.jsx)("button",{onClick:()=>M(),className:"retry-btn",children:"\ud83d\udd04 Retry"})]})]}):(0,c.jsxs)("div",{className:"workflow-dashboard",children:[(0,c.jsxs)("div",{className:"workflow-dashboard-header",children:[(0,c.jsxs)("div",{className:"dashboard-title",children:[(0,c.jsx)("h4",{children:"\u2699\ufe0f Workflow Status Dashboard"}),(0,c.jsxs)("span",{className:"branch-indicator",children:["Branch: ",(0,c.jsx)("code",{children:t})]})]}),(0,c.jsxs)("div",{className:"dashboard-controls",children:[G&&(0,c.jsxs)("span",{className:"last-refresh",children:["Last updated: ",H(G)]}),(0,c.jsxs)("button",{onClick:()=>{M(!0)},disabled:_,className:"refresh-btn",title:"Refresh workflow status",children:[_?"\u23f3":"\ud83d\udd04"," Refresh"]})]})]}),d&&d.length>0&&"open"===d[0].state&&(0,c.jsxs)("div",{className:"pr-actions-section",children:[(0,c.jsxs)("div",{className:"pr-actions-header",children:[(0,c.jsx)("h4",{children:"\ud83d\udd00 Pull Request Actions"}),(0,c.jsx)("span",{className:"pr-actions-status",children:d[0].draft?(0,c.jsxs)(c.Fragment,{children:["PR #",d[0].number," is in draft mode"]}):(0,c.jsxs)(c.Fragment,{children:["PR #",d[0].number," is ready for actions"]})})]}),(0,c.jsx)("div",{className:"pr-actions-container",children:(0,c.jsxs)("div",{className:"pr-actions-buttons",children:[a&&d[0].draft&&h&&(0,c.jsx)("button",{onClick:()=>j&&j("litlfred","sgex",d[0].number),disabled:b,className:"pr-ready-review-btn",title:"Mark PR #".concat(d[0].number," as ready for review"),children:b?(0,c.jsx)(c.Fragment,{children:"\u23f3 Marking ready..."}):(0,c.jsx)(c.Fragment,{children:"\u2705 Ready for review"})}),a&&u&&!d[0].draft&&(0,c.jsx)("button",{onClick:()=>k&&k("litlfred","sgex",d[0].number),disabled:m,className:"pr-merge-btn",title:"Merge PR #".concat(d[0].number),children:m?(0,c.jsx)(c.Fragment,{children:"\u23f3 Merging..."}):(0,c.jsx)(c.Fragment,{children:"\ud83d\udd00 Merge PR"})}),a&&g&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"pr-review-note",children:"\ud83d\udca1 Use the comment form above to add feedback with your review."}),(0,c.jsxs)("div",{className:"pr-review-buttons",children:[(0,c.jsx)("button",{onClick:()=>x&&x("litlfred","sgex",d[0].number),disabled:p,className:"pr-approve-btn",title:"Approve PR #".concat(d[0].number),children:p?(0,c.jsx)(c.Fragment,{children:"\u23f3 Approving..."}):(0,c.jsx)(c.Fragment,{children:"\u2705 Approve"})}),(0,c.jsx)("button",{onClick:()=>N&&N("litlfred","sgex",d[0].number),disabled:f||!y.trim(),className:"pr-request-changes-btn",title:"Request changes for PR #".concat(d[0].number," (comment required)"),children:f?(0,c.jsx)(c.Fragment,{children:"\u23f3 Requesting..."}):(0,c.jsx)(c.Fragment,{children:"\u274c Request Changes"})})]}),v&&(0,c.jsx)("div",{className:"approval-status-message ".concat(v),children:w})]}),!a&&(0,c.jsx)("span",{className:"pr-actions-note",children:"\ud83d\udd12 Sign in to access PR actions"}),a&&!u&&!g&&!h&&(0,c.jsx)("span",{className:"pr-actions-note",children:"\u26a0\ufe0f You don't have permission to merge or review this PR"}),a&&!u&&g&&!h&&(0,c.jsx)("span",{className:"pr-actions-note",children:"\u2139\ufe0f You can review this PR but cannot merge it"}),a&&!u&&g&&h&&(0,c.jsx)("span",{className:"pr-actions-note",children:"\u2139\ufe0f You can review and manage this PR but cannot merge it"}),a&&u&&!g&&(0,c.jsx)("span",{className:"pr-actions-note",children:"\u2139\ufe0f You can merge this PR but cannot review it"})]})})]}),0===S.length?(0,c.jsxs)("div",{className:"workflow-dashboard-empty",children:[(0,c.jsx)("span",{className:"empty-icon",children:"\ud83d\udccb"}),(0,c.jsx)("span",{children:"No workflows found for this branch"}),(0,c.jsx)("div",{className:"empty-description",children:"This branch may not have any active workflows configured, or they may not have run yet."})]}):(0,c.jsxs)("div",{className:"workflow-dashboard-content",children:[(0,c.jsxs)("div",{className:"workflow-summary",children:[(0,c.jsxs)("span",{className:"summary-text",children:["Found ",S.length," workflow",1!==S.length?"s":""," for this branch"]}),(0,c.jsxs)("div",{className:"summary-stats",children:[S.filter(e=>"in_progress"===e.status||"queued"===e.status).length>0&&(0,c.jsxs)("span",{className:"stat-badge in-progress",children:[S.filter(e=>"in_progress"===e.status||"queued"===e.status).length," running"]}),S.filter(e=>"waiting"===e.status).length>0&&(0,c.jsxs)("span",{className:"stat-badge waiting",children:[S.filter(e=>"waiting"===e.status).length," awaiting approval"]}),S.filter(e=>"success"===e.conclusion).length>0&&(0,c.jsxs)("span",{className:"stat-badge success",children:[S.filter(e=>"success"===e.conclusion).length," successful"]}),S.filter(e=>"failure"===e.conclusion).length>0&&(0,c.jsxs)("span",{className:"stat-badge failed",children:[S.filter(e=>"failure"===e.conclusion).length," failed"]})]})]}),(0,c.jsx)("div",{className:"workflows-list",children:S.map(e=>{const n=D[e.workflow.id];return(0,c.jsxs)("div",{className:"workflow-card",children:[(0,c.jsxs)("div",{className:"workflow-header",children:[(0,c.jsxs)("div",{className:"workflow-info",children:[(0,c.jsx)("div",{className:"workflow-name",children:(0,c.jsx)("a",{href:e.workflowUrl,target:"_blank",rel:"noopener noreferrer",className:"workflow-link",children:e.workflow.name})}),(0,c.jsx)("div",{className:"workflow-description",children:O(e)})]}),(0,c.jsx)("div",{className:"workflow-status",children:e.url?(0,c.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"status-badge ".concat(e.badgeClass),children:[(0,c.jsx)("span",{className:"status-icon",children:e.icon}),(0,c.jsx)("span",{className:"status-text",children:e.displayStatus})]}):(0,c.jsxs)("span",{className:"status-badge ".concat(e.badgeClass),children:[(0,c.jsx)("span",{className:"status-icon",children:e.icon}),(0,c.jsx)("span",{className:"status-text",children:e.displayStatus})]})})]}),(0,c.jsxs)("div",{className:"workflow-details",children:[e.createdAt&&(0,c.jsxs)("span",{className:"workflow-timestamp",children:["Last run: ",H(e.createdAt)]}),(e.runId||e.lastRunId)&&(0,c.jsxs)("span",{className:"workflow-run-id",children:["Run ID: ",e.runId||e.lastRunId]})]}),(0,c.jsxs)("div",{className:"workflow-actions",children:[(0,c.jsxs)("div",{className:"workflow-action-buttons",children:[a?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:()=>(async e=>{if(!a||!s)return;const n=e.workflow.id;E(e=>(0,o.A)((0,o.A)({},e),{},{[n]:{action:"triggering"}}));let r=!1;try{console.debug("Triggering workflow: ".concat(e.workflow.name," for branch: ").concat(t)),r=await s.triggerWorkflow(t),r?(E(t=>(0,o.A)((0,o.A)({},t),{},{[n]:{action:"triggered",message:'\u2705 Workflow "'.concat(e.workflow.name,'" has been triggered successfully! Check the workflow status above for progress.'),persistent:!0}})),setTimeout(()=>{M(!0)},3e3),l&&l({type:"workflow_triggered",workflow:e,success:!0})):E(t=>(0,o.A)((0,o.A)({},t),{},{[n]:{action:"error",message:'\u274c Failed to trigger workflow "'.concat(e.workflow.name,'". Please check your permissions and try again.'),persistent:!0}}))}catch(I){console.error("Error triggering workflow:",I),E(s=>(0,o.A)((0,o.A)({},s),{},{[n]:{action:"error",message:'\u274c Error triggering workflow "'.concat(e.workflow.name,'": ').concat(I.message),persistent:!0}}))}setTimeout(()=>{E(e=>{const t=(0,o.A)({},e);return t[n]&&delete t[n],t})},r?15e3:8e3)})(e),disabled:"triggering"===(null===n||void 0===n?void 0:n.action),className:"workflow-action-btn trigger-btn",title:"Trigger ".concat(e.workflow.name),children:"triggering"===(null===n||void 0===n?void 0:n.action)?(0,c.jsx)(c.Fragment,{children:"\u23f3 Starting..."}):(0,c.jsx)(c.Fragment,{children:"\ud83d\udd04 Trigger"})}),"waiting"===e.status&&(e.runId||e.lastRunId)&&(0,c.jsx)("button",{onClick:()=>(async e=>{const t=e.runId||e.lastRunId;if(!a||!t||!s)return;const n=e.workflow.id;E(e=>(0,o.A)((0,o.A)({},e),{},{[n]:{action:"approving"}}));let r=!1;try{console.debug("Approving workflow run: ".concat(t," for workflow: ").concat(e.workflow.name)),r=await s.approveWorkflowRun(t),r?(E(t=>(0,o.A)((0,o.A)({},t),{},{[n]:{action:"approved",message:'\u2705 Workflow "'.concat(e.workflow.name,'" has been approved! It should continue running shortly.'),persistent:!0}})),setTimeout(()=>{M(!0)},2e3),l&&l({type:"workflow_approved",workflow:e,success:!0})):E(t=>(0,o.A)((0,o.A)({},t),{},{[n]:{action:"error",message:'\u274c Failed to approve workflow "'.concat(e.workflow.name,'". Please check your permissions and try again.'),persistent:!0}}))}catch(I){console.error("Error approving workflow:",I),E(s=>(0,o.A)((0,o.A)({},s),{},{[n]:{action:"error",message:'\u274c Error approving workflow "'.concat(e.workflow.name,'": ').concat(I.message),persistent:!0}}))}setTimeout(()=>{E(e=>{const t=(0,o.A)({},e);return t[n]&&delete t[n],t})},r?15e3:8e3)})(e),disabled:"approving"===(null===n||void 0===n?void 0:n.action),className:"workflow-action-btn approve-btn",title:"Approve ".concat(e.workflow.name),children:"approving"===(null===n||void 0===n?void 0:n.action)?(0,c.jsx)(c.Fragment,{children:"\u23f3 Approving..."}):(0,c.jsx)(c.Fragment,{children:"\u2705 Approve"})}),"failure"===e.conclusion&&(e.runId||e.lastRunId)&&(0,c.jsx)("button",{onClick:()=>(async e=>{const t=e.runId||e.lastRunId;if(!a||!t||!s)return;const n=e.workflow.id;E(e=>(0,o.A)((0,o.A)({},e),{},{[n]:{action:"rerunning"}}));let r=!1;try{console.debug("Rerunning failed workflow run: ".concat(t," for workflow: ").concat(e.workflow.name)),r=await s.rerunFailedWorkflow(t),r?(E(t=>(0,o.A)((0,o.A)({},t),{},{[n]:{action:"rerun",message:'\u2705 Workflow "'.concat(e.workflow.name,'" failed jobs have been restarted! Monitor the status above for progress.'),persistent:!0}})),setTimeout(()=>{M(!0)},3e3),l&&l({type:"workflow_rerun",workflow:e,success:!0})):E(t=>(0,o.A)((0,o.A)({},t),{},{[n]:{action:"error",message:'\u274c Failed to rerun workflow "'.concat(e.workflow.name,'". Please check your permissions and try again.'),persistent:!0}}))}catch(I){console.error("Error rerunning workflow:",I),E(s=>(0,o.A)((0,o.A)({},s),{},{[n]:{action:"error",message:'\u274c Error rerunning workflow "'.concat(e.workflow.name,'": ').concat(I.message),persistent:!0}}))}setTimeout(()=>{E(e=>{const t=(0,o.A)({},e);return t[n]&&delete t[n],t})},r?15e3:8e3)})(e),disabled:"rerunning"===(null===n||void 0===n?void 0:n.action),className:"workflow-action-btn rerun-btn",title:"Rerun failed jobs for ".concat(e.workflow.name),children:"rerunning"===(null===n||void 0===n?void 0:n.action)?(0,c.jsx)(c.Fragment,{children:"\u23f3 Rerunning..."}):(0,c.jsx)(c.Fragment,{children:"\ud83d\udd04 Rerun Failed"})}),(e.url||e.workflowUrl)&&(0,c.jsxs)("a",{href:e.url||e.workflowUrl,target:"_blank",rel:"noopener noreferrer",className:"workflow-action-btn view-btn",children:["\ud83d\udccb View ",e.url?"Run":"Workflow"]})]}):(0,c.jsx)("span",{className:"auth-required",children:"\ud83d\udd12 Sign in for actions"}),!1]}),n&&(0,c.jsxs)("div",{className:"action-status ".concat(n.action),children:["triggered"===n.action&&"\ud83c\udfaf ","approved"===n.action&&"\u2705 ","rerun"===n.action&&"\ud83d\udd04 ","error"===n.action&&"\u274c ",n.message||"".concat(n.action,"...")]})]})]},e.workflow.id)})})]})]})};var I=s(38659);const T=["href","children"],_=(0,n.lazy)(()=>Promise.all([s.e(3738),s.e(7845),s.e(2383),s.e(5743)]).then(s.bind(s,25743))),P=()=>{const[e,t]=(0,n.useState)(null),[s,a]=(0,n.useState)([]),[i,l]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),[h,g]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[f,b]=(0,n.useState)([]),[v,w]=(0,n.useState)(!1),[y,k]=(0,n.useState)(""),[x,N]=(0,n.useState)(!1),[j,S]=(0,n.useState)(null),[P,D]=(0,n.useState)(new Set),[E,F]=(0,n.useState)(!1),[G,L]=(0,n.useState)(!1),[M,H]=(0,n.useState)(null),[O,B]=(0,n.useState)(!1),[U,q]=(0,n.useState)(!1),[K,W]=(0,n.useState)(null),[z,X]=(0,n.useState)(null),[Y,J]=(0,n.useState)(null),[V,Q]=(0,n.useState)(null),[Z,$]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{const[e,t,s]=await Promise.all([(0,I.hP)(),(0,I.ef)(),(0,I.k$)()]);J(()=>e),Q(t),$(()=>s)}catch(d){console.error("Failed to load markdown components:",d)}})()},[]);const[ee,te]=(0,n.useState)(!1),[se,ne]=(0,n.useState)(!0),[oe,ae]=(0,n.useState)(!1),[re,ie]=(0,n.useState)(!1),[le,ce]=(0,n.useState)(!1),[de,ue]=(0,n.useState)(!1),[he,ge]=(0,n.useState)(!1),[me,pe]=(0,n.useState)(!1),[fe,be]=(0,n.useState)(!1),[ve,we]=(0,n.useState)(!1),[ye,ke]=(0,n.useState)(!1),[xe,Ne]=(0,n.useState)(null),[je,Se]=(0,n.useState)(""),[Ae,Ce]=(0,n.useState)(1),[Re,Ie]=(0,n.useState)([]),[Te,_e]=(0,n.useState)(!1),[Pe,De]=(0,n.useState)(5),[Ee,Fe]=(0,n.useState)(!0),Ge=(0,n.useRef)(null),Le=(0,n.useRef)(null),Me=(0,n.useRef)(null),He={a:e=>{let{href:t,children:s}=e,n=(0,A.A)(e,T);return(0,c.jsx)("a",(0,o.A)((0,o.A)({href:t,target:"_blank",rel:"noopener noreferrer"},n),{},{children:s}))}};(0,n.useEffect)(()=>{(async()=>{try{l(!0),u(null);const s=Oe();if(!s||"main"===s)return void l(!1);t({name:s,safeName:s.replace(/\//g,"-")});try{const e=await Be(s);e&&e.length>0&&a(e)}catch(e){console.debug("Could not fetch PR info:",e)}l(!1)}catch(s){console.error("Error detecting branch:",s),u(s.message),l(!1)}})()},[]),(0,n.useEffect)(()=>{const e=e=>{Ge.current&&!Ge.current.contains(e.target)&&(m&&p(!1),g(!1))};if(h)return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[h,m]),(0,n.useEffect)(()=>()=>{Le.current&&(clearInterval(Le.current),Le.current=null),Me.current&&(clearInterval(Me.current),Me.current=null)},[]),(0,n.useEffect)(()=>{h||(Le.current&&(clearInterval(Le.current),Le.current=null),Me.current&&(clearInterval(Me.current),Me.current=null),Ce(1),De(5))},[h]);const Oe=()=>"copilot/fix-930",Be=async e=>{try{const t="litlfred",s="sgex";return await r.A.getPullRequestsForBranch(t,s,e)}catch(d){return console.debug("Failed to fetch PR info:",d),[]}},Ue=async function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{w(!0);const i=30,[l,c,d]=await Promise.all([r.A.getPullRequestComments(e,t,s,n,i).catch(()=>[]),r.A.getPullRequestIssueComments(e,t,s,n,i).catch(()=>[]),Ee?r.A.getPullRequestTimeline(e,t,s,n,i).catch(()=>[]):Promise.resolve([])]),u=[...l.map(e=>(0,o.A)((0,o.A)({},e),{},{type:"review"})),...c.map(e=>(0,o.A)((0,o.A)({},e),{},{type:"issue"}))].sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),h=d.filter(e=>["committed","reviewed","merged","closed","reopened","labeled","unlabeled","head_ref_force_pushed","ready_for_review","convert_to_draft"].includes(e.event)).map(e=>{const t=e.actor||e.author||{login:"github",avatar_url:"https://github.com/github.png"},s=(0,o.A)({login:t.login||"github",avatar_url:t.avatar_url||"https://github.com/github.png"},t);return(0,o.A)((0,o.A)({},e),{},{type:"timeline",created_at:e.created_at||e.submitted_at,user:s,body:qe(e)})});if(a){const e=new Set(Re.map(e=>e.id)),t=u.filter(t=>!e.has(t.id)),s=h.filter(t=>!e.has(t.id)),n=[...t,...s].sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)),o=[...Re,...n];Ie(o);const a=Math.min(o.length,Pe+i);De(a),b(o.slice(0,a))}else{const e=[...u,...h].sort((e,t)=>new Date(t.created_at)-new Date(e.created_at));Ie(e);const t=Math.min(5,e.length);De(t),b(e.slice(0,t))}return _e(u.length===i),u}catch(d){return console.debug("Failed to fetch comments:",d),[]}finally{w(!1)}},qe=e=>{var t,s,n;switch(e.event){case"committed":return"\ud83d\udce6 Pushed ".concat(e.sha?e.sha.substring(0,7):"commit",": ").concat(e.message||"No commit message");case"reviewed":const o=e.state&&"string"===typeof e.state?e.state.toLowerCase():"reviewed";return"".concat("approved"===o?"\u2705":"changes_requested"===o?"\u274c":"\ud83d\udcac"," ").concat("approved"===o?"Approved":"changes_requested"===o?"Requested changes":"Reviewed"," this pull request");case"merged":return"\ud83d\udd00 Merged this pull request";case"closed":return"\u274c Closed this pull request";case"reopened":return"\ud83d\udd04 Reopened this pull request";case"labeled":return"\ud83c\udff7\ufe0f Added label: ".concat((null===(t=e.label)||void 0===t?void 0:t.name)||"unknown");case"unlabeled":return"\ud83c\udff7\ufe0f Removed label: ".concat((null===(s=e.label)||void 0===s?void 0:s.name)||"unknown");case"head_ref_force_pushed":return"\ud83d\udd04 Force-pushed to ".concat(e.ref||"branch");case"ready_for_review":return"\u2705 Marked as ready for review";case"convert_to_draft":return"\ud83d\udcdd Converted to draft";default:return"\ud83d\udccb ".concat((null===(n=e.event)||void 0===n?void 0:n.replace(/_/g," "))||"unknown event")}},Ke=e=>{console.debug("Workflow dashboard action:",e),"workflow_triggered"!==e.type&&"workflow_approved"!==e.type||(Ne("success"),"workflow_triggered"===e.type?Se("Workflow triggered successfully! Check the dashboard for real-time updates."):Se("Workflow approved successfully! It should start running now."),setTimeout(()=>{Ne(null),Se("")},5e3))},We=async e=>{try{return B(!0),r.A.isAuth()&&r.A.token&&C.setToken(r.A.token),void B(!1)}catch(d){console.debug("Failed to fetch workflow status:",d),H(null)}finally{B(!1)}},ze=e=>{Me.current&&clearInterval(Me.current),Me.current=setInterval(async()=>{try{const e=null===M||void 0===M?void 0:M.status;await We(),null!==M&&void 0!==M&&M.status&&M.status!==e&&console.debug("Workflow status changed from ".concat(e," to ").concat(M.status))}catch(d){console.debug("Failed to auto-refresh workflow status:",d)}},3e4)},Xe=e=>{const t=new Set(P);t.has(e)?t.delete(e):t.add(e),D(t)},Ye=async()=>{if(y.trim()&&r.A.isAuth()&&!x&&se)try{N(!0),S("submitting");const t="litlfred",n="sgex";if(console.debug("Submitting comment:",{authenticated:r.A.isAuth(),hasToken:!!r.A.token,commentLength:y.trim().length,prInfo:(null===s||void 0===s?void 0:s.length)||0,canComment:se}),s&&s.length>0){const o=s[0];console.debug("Submitting to PR:",o.number);try{const e=await r.A.createPullRequestComment(t,n,o.number,y.trim());console.debug("Comment submitted successfully:",e),S("success"),await Ue(t,n,o.number,1,!1),e&&e.id&&(W(e.id),setTimeout(()=>W(null),3e3)),k(""),L(!1),setTimeout(()=>S(null),3e3)}catch(e){console.error("GitHub API comment submission error:",{error:e,message:e.message,status:e.status,response:e.response});let t="Failed to submit comment. ";e.message.includes("401")?t+="Authentication failed - please check your token.":e.message.includes("403")||e.message.includes("Resource not accessible by personal access token")?(t+='Your personal access token does not have permission to create comments. Please use a token with "repo" or "public_repo" scope.',ne(!1)):e.message.includes("404")?t+="Pull request not found.":e.message.includes("422")?t+="Invalid comment format.":t+="Please try again.",S({type:"error",message:t}),setTimeout(()=>S(null),7e3)}}else console.warn("No PR info available for comment submission"),S({type:"error",message:"No pull request found to comment on."}),setTimeout(()=>S(null),5e3)}catch(d){console.error("Unexpected error during comment submission:",d),S({type:"error",message:"Unexpected error occurred. Please try again."}),setTimeout(()=>S(null),5e3)}finally{N(!1)}},Je=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(!e)return"";const s=e.split("\n");return s.length<=t?e:s.slice(0,t).join("\n")+"..."},Ve=e=>e&&"string"===typeof e?(e=>{if(!e||"string"!==typeof e)return e||"";const t="https://github.com/".concat("litlfred","/").concat("sgex");let s=e;return s=s.replace(/\b([a-zA-Z0-9_.-]+)\/([a-zA-Z0-9_.-]+)#(\d+)\b/g,(e,t,s,n)=>"[".concat(t,"/").concat(s,"#").concat(n,"](https://github.com/").concat(t,"/").concat(s,"/issues/").concat(n,")")),s=s.replace(/\b(Fixes?|Closes?|Resolves?)\s+#(\d+)\b/gi,(e,s,n)=>"".concat(s," [#").concat(n,"](").concat(t,"/issues/").concat(n,")")),s=s.replace(/#(\d+)\b/g,(e,s,n,o)=>{const a=o.substring(Math.max(0,n-20),n),r=o.substring(n,n+e.length+10);return a.includes("[")&&!a.includes("]")||a.includes("/")||r.includes("](")?e:"[#".concat(s,"](").concat(t,"/issues/").concat(s,")")}),s=s.replace(/@([a-zA-Z0-9_-]+)/g,(e,t,s,n)=>{const o=n.substring(Math.max(0,s-10),s);return o.includes("[")&&!o.includes("]")?e:"[@".concat(t,"](https://github.com/").concat(t,")")}),s=s.replace(/\b([a-f0-9]{7,40})\b/gi,(e,s)=>/^[a-f0-9]+$/i.test(s)&&s.length>=7?"[`".concat(s.substring(0,7),"`](").concat(t,"/commit/").concat(s,")"):e),s})(e):e||"",Qe=e=>{if(!e||"string"!==typeof e)return e||"";const t="https://github.com/".concat("litlfred","/").concat("sgex");let s=e;return s=s.replace(/\b([a-zA-Z0-9_.-]+)\/([a-zA-Z0-9_.-]+)#(\d+)\b/g,(e,t,s,n)=>'<a href="https://github.com/'.concat(t,"/").concat(s,"/issues/").concat(n,'" target="_blank" rel="noopener noreferrer">').concat(t,"/").concat(s,"#").concat(n,"</a>")),s=s.replace(/\b(Fixes?|Closes?|Resolves?)\s+#(\d+)\b/gi,(e,s,n)=>"".concat(s,' <a href="').concat(t,"/issues/").concat(n,'" target="_blank" rel="noopener noreferrer">#').concat(n,"</a>")),s=s.replace(/#(\d+)\b/g,(e,s,n,o)=>{const a=o.substring(Math.max(0,n-20),n),r=o.substring(n,n+e.length+10);return a.includes("<a ")&&!a.includes("</a>")||a.includes("/")||r.includes("</a>")?e:'<a href="'.concat(t,"/issues/").concat(s,'" target="_blank" rel="noopener noreferrer">#').concat(s,"</a>")}),s=s.replace(/@([a-zA-Z0-9_-]+)/g,(e,t,s,n)=>{const o=n.substring(Math.max(0,s-10),s);return o.includes("<a ")&&!o.includes("</a>")?e:'<a href="https://github.com/'.concat(t,'" target="_blank" rel="noopener noreferrer">@').concat(t,"</a>")}),s=s.replace(/\b([a-f0-9]{7,40})\b/gi,(e,s)=>/^[a-f0-9]+$/i.test(s)&&s.length>=7?'<a href="'.concat(t,"/commit/").concat(s,'" target="_blank" rel="noopener noreferrer"><code>').concat(s.substring(0,7),"</code></a>"):e),s},Ze=e=>{if(!e||!V||"string"!==typeof e)return e||"";if("function"!==typeof V.sanitize)return console.warn("DOMPurify.sanitize is not available, returning unsanitized content"),e;return V.sanitize(e,{ALLOWED_TAGS:["p","br","strong","b","em","i","code","pre","blockquote","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","hr","del","ins","mark","small","sub","sup","table","thead","tbody","tfoot","tr","th","td","div","span"],ALLOWED_ATTR:["href","src","alt","title","class","id","style","align","colspan","rowspan","width","height","target","rel"],KEEP_CONTENT:!0,ALLOW_DATA_ATTR:!1})},$e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return e.length<=t?e:e.substring(0,t)+"..."},et=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),tt=async(t,n)=>{if(n&&(n.stopPropagation(),n.preventDefault()),t&&t.html_url&&!h){g(!0),p(!0);const n="litlfred",o="sgex";if(await Ue(n,o,t.number,1,!1),await(async(e,t)=>{if(!r.A.isAuth())return ne(!1),ae(!1),ie(!1),ce(!1),pe(!1),void ue(!1);try{const n=await r.A.checkCommentPermissions(e,t);ne(n),C.setToken(r.A.token);const[o,a]=await Promise.all([C.checkWorkflowTriggerPermissions(),C.checkWorkflowApprovalPermissions()]);if(ae(o),ie(a),s&&s.length>0){const[n,o,a]=await Promise.all([r.A.checkPullRequestMergePermissions(e,t,s[0].number),r.A.checkPullRequestReviewPermissions(e,t,s[0].number),r.A.checkRepositoryWritePermissions(e,t)]);ce(n),pe(o),ue(a)}else ce(!1),pe(!1),ue(!1)}catch(d){console.debug("Error checking permissions:",d),ne(!1),ae(!1),ie(!1),ce(!1),pe(!1),ue(!1)}})(n,o),r.A.isAuth()&&se)try{await r.A.checkRepositoryWritePermissions(n,o)&&!y.includes("@copilot")&&k("@copilot ")}catch(d){console.debug("Could not check collaborator status:",d)}if(r.A.isAuth())try{const e=await(async(e,t,s)=>{try{if(!r.A.isAuth())return null;const n=(await r.A.getPullRequestIssueComments(e,t,s)).filter(e=>"copilot"===e.user.login||e.user.login.includes("copilot")||e.body.includes("@copilot")||e.body.includes("copilot session")||e.body.includes("GitHub Copilot"));if(n.length>0){const o=n[0];let a=null;const r=/https:\/\/github\.com\/[^/]+\/[^/]+\/pull\/\d+\/agent-sessions\/[a-f0-9-]+/gi;for(const e of n){const t=e.body.match(r);if(t){a=t[0];break}}return a||(a="https://github.com/".concat(e,"/").concat(t,"/pull/").concat(s,"/agent-sessions")),{hasActiveCopilot:!0,latestActivity:o.created_at,sessionUrl:a,commentUrl:"https://github.com/".concat(e,"/").concat(t,"/pull/").concat(s,"#issuecomment-").concat(o.id),commentsCount:n.length,latestComment:o}}return{hasActiveCopilot:!1,commentsCount:0}}catch(d){return console.debug("Failed to fetch copilot session info:",d),null}})(n,o,t.number);X(e)}catch(d){console.debug("Could not fetch copilot session info:",d)}null!==e&&void 0!==e&&e.name&&(await We(e.name),ze(e.name)),((e,t,s)=>{Le.current&&clearInterval(Le.current),Le.current=setInterval(async()=>{try{const n=await Ue(e,t,s,1,!1);if(n.length>0&&f.length>0){n[0].id!==f[0].id&&console.debug("New comments detected, refreshing...")}}catch(d){console.debug("Failed to auto-refresh comments:",d)}},6e4)})(n,o,t.number)}else t&&t.html_url&&h&&window.open(t.html_url,"_blank")},st=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.length<=t?e:e.substring(0,t)+"..."};return i||d||!e?null:(0,c.jsxs)("div",{className:"preview-badge-container",ref:Ge,children:[s&&s.length>0?(0,c.jsxs)(c.Fragment,{children:[s.map((e,t)=>(0,c.jsx)("div",{className:"preview-badge clickable ".concat(h?"expanded":""," ").concat(m?"sticky":""),onClick:t=>tt(e,t),title:h?"Click to view PR: ".concat(e.title):"Click to expand for comments: ".concat(e.title),children:(0,c.jsxs)("div",{className:"badge-content",children:[(0,c.jsx)("span",{className:"badge-label",children:"PR:"}),(0,c.jsxs)("span",{className:"badge-branch",children:["#",e.number]}),(0,c.jsx)("span",{className:"badge-separator",children:"|"}),(0,c.jsx)("span",{className:"badge-pr-title",children:st(e.title)}),(0,c.jsx)("span",{className:"badge-expand-icon",children:h?"\u25bc":"\u25b6"})]})},e.id)),h&&(0,c.jsxs)("div",{className:"preview-badge-expanded",children:[(0,c.jsxs)("div",{className:"expanded-header",children:[(0,c.jsxs)("div",{className:"pr-info",children:[(0,c.jsx)("h3",{children:(0,c.jsxs)("a",{href:s[0].html_url,target:"_blank",rel:"noopener noreferrer",children:["#",s[0].number,": ",s[0].title]})}),(0,c.jsxs)("div",{className:"pr-meta",children:[(0,c.jsx)("span",{className:"pr-state","data-state":s[0].state,children:s[0].state}),(0,c.jsxs)("span",{className:"pr-author",children:["by ",(0,c.jsx)("a",{href:s[0].user.html_url,target:"_blank",rel:"noopener noreferrer",className:"pr-author-link",children:s[0].user.login})]})]})]}),(0,c.jsx)("button",{className:"close-button",onClick:e=>{e.stopPropagation(),g(!1),p(!1)},title:"Close expanded view",children:"\xd7"})]}),"open"!==s[0].state&&(0,c.jsxs)("div",{className:"pr-status-notification pr-status-".concat(s[0].state),children:[(0,c.jsxs)("div",{className:"status-icon",children:["closed"===s[0].state&&"\u274c","merged"===s[0].state&&"\ud83d\udd00"]}),(0,c.jsxs)("div",{className:"status-message",children:[(0,c.jsxs)("strong",{children:["closed"===s[0].state&&"This pull request is closed","merged"===s[0].state&&"This pull request was merged"]}),(0,c.jsxs)("div",{className:"status-details",children:["closed"===s[0].state&&"The pull request has been closed without merging.","merged"===s[0].state&&"The changes have been successfully merged into the target branch."]})]})]}),r.A.isAuth()&&(0,c.jsxs)("div",{className:"comment-form",children:[(0,c.jsx)("h4",{children:"Add Comment"}),!se&&(0,c.jsxs)("div",{className:"comment-disabled-notice",children:[(0,c.jsx)("strong",{children:"\ud83d\udca1 Comments disabled:"}),' Your personal access token does not have permission to create comments. Please use a token with "repo" or "public_repo" scope to enable commenting.']}),j&&(0,c.jsx)("div",{className:"comment-status comment-status-".concat("string"===typeof j?j:j.type),children:"string"===typeof j?(0,c.jsxs)(c.Fragment,{children:["submitting"===j&&"\u23f3 Submitting comment...","success"===j&&"\u2705 Comment submitted successfully!"]}):(0,c.jsx)(c.Fragment,{children:"error"===j.type&&"\u274c ".concat(j.message)})}),G?(0,c.jsxs)("div",{className:"comment-form-advanced",children:[(0,c.jsx)("div",{className:"markdown-editor-container",children:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)("div",{className:"loading-spinner",children:"Loading editor..."}),children:(0,c.jsx)(_,{value:y,onChange:e=>k(e||""),preview:"edit",height:300,visibleDragBar:!1,"data-color-mode":"light",hideToolbar:x||!se})})}),(0,c.jsxs)("div",{className:"comment-form-actions",children:[(0,c.jsx)("button",{className:"btn-secondary",onClick:()=>L(!1),disabled:x||!se,children:"Simple Editor"}),(0,c.jsx)("button",{className:"submit-comment",onClick:Ye,disabled:!y.trim()||x||!se,children:x?"Submitting...":"Comment"})]})]}):(0,c.jsxs)("div",{className:"comment-form-simple",children:[(0,c.jsx)("textarea",{value:y,onChange:e=>k(e.target.value),placeholder:se?"Write a comment... (Click 'Advanced Editor' for markdown preview)":"Comment form disabled - token permissions required",rows:3,disabled:x||!se}),(0,c.jsxs)("div",{className:"comment-form-actions",children:[(0,c.jsx)("button",{className:"advanced-editor-btn",onClick:()=>L(!0),disabled:x||!se,children:"\ud83d\udcdd Advanced Editor"}),(0,c.jsx)("button",{className:"submit-comment",onClick:Ye,disabled:!y.trim()||x||!se,children:x?"Submitting...":"Comment"})]})]})]}),s[0].body&&(0,c.jsxs)("div",{className:"pr-description",children:[(0,c.jsx)("h4",{children:"Description"}),(0,c.jsxs)("div",{className:"pr-body",children:[(0,c.jsx)("div",{className:"markdown-content",children:Y&&Z?(0,c.jsx)(Y,{rehypePlugins:[Z],components:He,children:Ve(E?s[0].body:Je(s[0].body))}):(0,c.jsx)("div",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:Ze(Qe(E?s[0].body:Je(s[0].body)))}})}),s[0].body.split("\n").length>6&&(0,c.jsx)("button",{className:"description-toggle",onClick:()=>{F(!E)},children:E?"Show less":"Show more"})]})]}),(0,c.jsx)("div",{className:"pr-view-toggle",children:(0,c.jsxs)("div",{className:"toggle-switch",children:[(0,c.jsx)("button",{className:"toggle-option ".concat(U?"":"active"),onClick:()=>q(!1),children:"\ud83d\udcac Discussion"}),(0,c.jsx)("button",{className:"toggle-option ".concat(U?"active":""),onClick:()=>q(!0),children:"\u2699\ufe0f Workflow Dashboard"})]})}),U?(null===e||void 0===e?void 0:e.name)&&(0,c.jsx)("div",{className:"workflow-status-wrapper",children:(0,c.jsx)(R,{branchName:e.name,githubActionsService:C,isAuthenticated:r.A.isAuth(),canTriggerWorkflows:oe,canApproveWorkflows:re,onWorkflowAction:Ke,prInfo:s,canMergePR:le,canManagePR:de,canReviewPR:me,isMergingPR:he,isApprovingPR:fe,isRequestingChanges:ve,isMarkingReadyForReview:ye,approvalStatus:xe,approvalMessage:je,newComment:y,onMergePR:async(t,n,o)=>{if(!r.A.isAuth()||he||!le)return!1;ge(!0);try{const i=s.find(e=>e.number===o),l="Merge PR #".concat(o,": ").concat((null===i||void 0===i?void 0:i.title)||"Pull Request"),c="Merges pull request #".concat(o,"\n\n").concat((null===i||void 0===i?void 0:i.body)||"").trim(),u=await r.A.mergePullRequest(t,n,o,{commit_title:l,commit_message:c,merge_method:"merge"});return console.debug("PR merged successfully:",u),setTimeout(async()=>{try{const t=await Be(null===e||void 0===e?void 0:e.name);t&&t.length>0&&a(t)}catch(d){console.debug("Could not refresh PR status after merge:",d)}},2e3),!0}catch(d){console.error("Failed to merge PR:",d);let t="Failed to merge PR";return 403===d.status?t="Permission denied: Your Personal Access Token may not have sufficient permissions to merge PRs":404===d.status?t="PR not found or repository access denied":405===d.status?t="Merge not allowed: Check branch protection rules or PR requirements":409===d.status&&(t="Merge conflict: PR cannot be automatically merged"),console.warn("User guidance:",t),!1}finally{ge(!1)}},onApprovePR:async(t,s,n)=>{if(!r.A.isAuth()||fe||!me)return!1;be(!0),Ne(null),Se("");try{console.log("Attempting to approve PR:",{owner:t,repo:s,prNumber:n,comment:y.trim()});const o=await r.A.approvePullRequest(t,s,n,y.trim());return console.log("PR approval result:",o),Ne("success"),Se("PR approved successfully! This should trigger any pending workflows."),setTimeout(()=>{Ne(null),Se("")},5e3),y.trim()&&k(""),setTimeout(async()=>{try{const t=await Be(null===e||void 0===e?void 0:e.name);t&&t.length>0&&a(t)}catch(d){console.debug("Could not refresh PR status after approval:",d)}},2e3),!0}catch(d){var o;console.error("Failed to approve PR:",d),console.log("Error details:",{status:d.status,response:null===(o=d.response)||void 0===o?void 0:o.data,message:d.message,stack:d.stack});let t="Failed to approve PR";return 403===d.status?t="Permission denied: You may not have permission to review this PR":404===d.status?t="PR not found or repository access denied":422===d.status?t="Cannot review this PR - it may be from the same user or have other restrictions":d.message&&(t="Failed to approve PR: ".concat(d.message)),Ne("error"),Se(t),setTimeout(()=>{Ne(null),Se("")},8e3),console.warn("User guidance:",t),!1}finally{be(!1)}},onRequestChanges:async(t,s,n)=>{if(!r.A.isAuth()||ve||!me)return!1;if(!y||!y.trim())return alert("Please enter a comment explaining what changes are needed."),!1;we(!0);try{const o=await r.A.requestPullRequestChanges(t,s,n,y.trim());return console.debug("Changes requested successfully:",o),k(""),setTimeout(async()=>{try{const t=await Be(null===e||void 0===e?void 0:e.name);t&&t.length>0&&a(t)}catch(d){console.debug("Could not refresh PR status after requesting changes:",d)}},2e3),!0}catch(d){console.error("Failed to request changes:",d);let t="Failed to request changes";return 403===d.status?t="Permission denied: You may not have permission to review this PR":404===d.status?t="PR not found or repository access denied":422===d.status&&(t="Cannot review this PR - it may be from the same user or have other restrictions"),console.warn("User guidance:",t),!1}finally{we(!1)}},onMarkReadyForReview:async(t,s,n)=>{if(!r.A.isAuth()||ye||!le)return!1;ke(!0),Ne(null),Se("");try{const o=await r.A.markPullRequestReadyForReview(t,s,n);return console.debug("PR marked as ready for review successfully:",o),Ne("success"),Se("PR #".concat(n," is now ready for review!")),setTimeout(async()=>{try{const t=await Be(null===e||void 0===e?void 0:e.name);t&&t.length>0&&a(t)}catch(d){console.debug("Could not refresh PR status after marking ready for review:",d)}},2e3),!0}catch(d){console.error("Failed to mark PR as ready for review:",d);let t="Failed to mark PR as ready for review";return 403===d.status?t="Permission denied: You may not have permission to update this PR":404===d.status?t="PR not found or repository access denied":422===d.status?t="PR cannot be marked as ready for review - it may already be ready or have other restrictions":d.message&&(t=d.message),Ne("error"),Se(t),!1}finally{ke(!1)}}})}):(0,c.jsxs)(c.Fragment,{children:[z&&(0,c.jsxs)("div",{className:"copilot-session-wrapper",children:[(0,c.jsx)("h4",{children:"\ud83e\udd16 GitHub Copilot Activity"}),z.hasActiveCopilot?(0,c.jsxs)("div",{className:"copilot-session-active",children:[(0,c.jsxs)("div",{className:"copilot-session-info",children:[(0,c.jsx)("span",{className:"copilot-status",children:"\u2705 Active Copilot session detected"}),(0,c.jsxs)("span",{className:"copilot-activity",children:["Last activity: ",et(z.latestActivity)]}),(0,c.jsxs)("span",{className:"copilot-comments-count",children:[z.commentsCount," copilot comment(s) found"]})]}),(0,c.jsxs)("div",{className:"copilot-session-actions",children:[(0,c.jsx)("a",{href:z.sessionUrl,target:"_blank",rel:"noopener noreferrer",className:"copilot-session-link",children:"\ud83d\udd17 View Agent Session"}),z.commentUrl&&(0,c.jsx)("a",{href:z.commentUrl,target:"_blank",rel:"noopener noreferrer",className:"copilot-comment-link",children:"\ud83d\udcac Latest Comment"}),(0,c.jsx)("button",{className:"copilot-session-toggle",onClick:()=>te(!ee),children:ee?"\ud83d\udcdd Hide Session":"\ud83d\udc41\ufe0f Watch Session"})]}),ee&&z.latestComment&&(0,c.jsxs)("div",{className:"copilot-session-modal",children:[(0,c.jsxs)("div",{className:"copilot-session-header",children:[(0,c.jsx)("strong",{children:"Latest Copilot Activity"}),(0,c.jsx)("span",{className:"copilot-comment-date",children:et(z.latestComment.created_at)})]}),(0,c.jsxs)("div",{className:"copilot-session-content",children:[(0,c.jsxs)("div",{className:"copilot-comment-author",children:[(0,c.jsx)("img",{src:z.latestComment.user.avatar_url,alt:z.latestComment.user.login,className:"copilot-avatar"}),(0,c.jsx)("a",{href:z.latestComment.user.html_url,target:"_blank",rel:"noopener noreferrer",className:"copilot-username",children:z.latestComment.user.login})]}),(0,c.jsx)("div",{className:"copilot-comment-body",children:(0,c.jsx)("div",{className:"markdown-content",children:Y&&Z?(0,c.jsx)(Y,{rehypePlugins:[Z],components:He,children:Ve(z.latestComment.body)}):(0,c.jsx)("div",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:Ze(Qe(z.latestComment.body))}})})})]})]})]}):(0,c.jsxs)("div",{className:"copilot-session-inactive",children:[(0,c.jsx)("span",{className:"copilot-status",children:"\u26aa No active Copilot session detected"}),(0,c.jsx)("span",{className:"copilot-hint",children:"Start a conversation with @copilot to begin a session"})]})]}),(0,c.jsxs)("div",{className:"comments-section",children:[(0,c.jsxs)("div",{className:"comments-header",children:[(0,c.jsxs)("h4",{children:["Recent Comments & Updates (",Re.length>0?"".concat(Pe,"/").concat(Re.length):"0",")"]}),(0,c.jsx)("div",{className:"comments-controls",children:(0,c.jsxs)("label",{className:"status-updates-toggle",children:[(0,c.jsx)("input",{type:"checkbox",checked:Ee,onChange:e=>{Fe(e.target.checked),s&&s.length>0&&Ue("litlfred","sgex",s[0].number,1,!1)}}),(0,c.jsx)("span",{className:"checkbox-label",children:"\ud83d\udccb Show status updates"})]})})]}),v?(0,c.jsx)("div",{className:"loading",children:"Loading comments..."}):0===f.length?(0,c.jsx)("div",{className:"no-comments",children:"No comments yet"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"comments-list",children:f.map(e=>{const t=P.has(e.id),s=e.body&&e.body.length>200,n=K===e.id,o=((e,t)=>{const s=new Set;if(e.body&&"string"===typeof e.body){const t=e.body.match(/@(\w+)/g);t&&t.forEach(e=>{const t=e.substring(1);t&&"string"===typeof t&&s.add(t)})}const n=t.filter(t=>t&&t.created_at&&e&&e.created_at&&new Date(t.created_at)>new Date(e.created_at));return n.forEach(t=>{if(t.body&&"string"===typeof t.body&&e.user&&e.user.login&&"string"===typeof e.user.login&&t.user&&t.user.login&&"string"===typeof t.user.login&&t.body.toLowerCase().includes("@".concat(e.user.login.toLowerCase()))&&s.add(t.user.login),e.body&&"string"===typeof e.body&&t.body&&"string"===typeof t.body&&t.user&&t.user.login&&"string"===typeof t.user.login){const n=e.body.toLowerCase().split(" ").filter(e=>e.length>3);n.length>0&&n.some(s=>t.body.toLowerCase().includes(s)&&t.user.login!==e.user.login)&&s.add(t.user.login)}}),(e.body&&"string"===typeof e.body&&e.body.toLowerCase().includes("copilot")||e.user&&e.user.login&&"string"===typeof e.user.login&&e.user.login.toLowerCase().includes("copilot"))&&s.add("copilot"),n.some(t=>t.user&&t.user.login&&"string"===typeof t.user.login&&t.user.login.toLowerCase().includes("copilot")||t.body&&"string"===typeof t.body&&e.user&&e.user.login&&"string"===typeof e.user.login&&t.body.toLowerCase().includes("@".concat(e.user.login.toLowerCase())))&&s.add("copilot"),e.user&&e.user.login&&"string"===typeof e.user.login&&s.delete(e.user.login),Array.from(s)})(e,f);return(0,c.jsxs)("div",{className:"comment ".concat("timeline"===e.type?"comment-timeline":""," ").concat(n?"comment-new-glow":""),children:[(0,c.jsxs)("div",{className:"comment-header",children:[(0,c.jsx)("img",{src:e.user.avatar_url,alt:e.user.login,className:"comment-avatar"}),(0,c.jsx)("a",{href:e.user.html_url,target:"_blank",rel:"noopener noreferrer",className:"comment-author",children:e.user.login}),(0,c.jsx)("span",{className:"comment-date",children:et(e.created_at)}),(0,c.jsx)("span",{className:"comment-type ".concat("timeline"===e.type?"comment-type-timeline":""),children:"timeline"===e.type?"status":e.type}),"timeline"!==e.type&&o.length>0&&(0,c.jsx)("div",{className:"comment-viewers",children:o.map((e,t)=>{const s="string"===typeof e?e:String(e||""),n=s&&s.toLowerCase().includes("copilot");return(0,c.jsxs)("span",{className:"viewer-badge ".concat(n?"viewer-badge-copilot":"viewer-badge-user"),title:"".concat(s," is looking at this comment"),children:[n?"\ud83d\udc41\ufe0f":"\ud83d\udc40"," ",s]},t)})})]}),(0,c.jsx)("div",{className:"comment-body",children:"timeline"===e.type?(0,c.jsx)("div",{className:"comment-timeline-body",children:(0,c.jsx)("div",{className:"timeline-content",children:e.body})}):s&&!t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"comment-preview",children:(0,c.jsx)("div",{className:"markdown-content",children:Y&&Z?(0,c.jsx)(Y,{rehypePlugins:[Z],components:He,children:Ve($e(e.body))}):(0,c.jsx)("div",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:Ze(Qe($e(e.body)))}})})}),(0,c.jsx)("button",{className:"comment-toggle",onClick:()=>Xe(e.id),children:"Show more"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"comment-full",children:(0,c.jsx)("div",{className:"markdown-content",children:Y&&Z?(0,c.jsx)(Y,{rehypePlugins:[Z],components:He,children:Ve(e.body)}):(0,c.jsx)("div",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:Ze(Qe(e.body))}})})}),s&&(0,c.jsx)("button",{className:"comment-toggle",onClick:()=>Xe(e.id),children:"Show less"})]})})]},e.id)})}),(Re.length>Pe||Te)&&(0,c.jsx)("div",{className:"comments-load-more",children:(0,c.jsx)("button",{className:"load-more-btn",onClick:async()=>{if(!s||0===s.length||v)return;const e=s[0];if(Pe<Re.length){const e=Math.min(Re.length,Pe+5);return De(e),void b(Re.slice(0,e))}if(Te){const t=Ae+1;Ce(t),await Ue("litlfred","sgex",e.number,t,!0)}},disabled:v,children:v?"Loading...":Re.length>Pe?"Show More Comments (".concat(Re.length-Pe," more to load)"):"Load More Comments..."})})]})]})]}),(0,c.jsx)("div",{className:"expanded-footer",children:(0,c.jsx)("a",{href:s[0].html_url,target:"_blank",rel:"noopener noreferrer",className:"github-link",children:"View PR on GitHub \u2192"})})]})]}):(0,c.jsx)("div",{className:"preview-badge clickable ".concat(h?"expanded":""," ").concat(m?"sticky":""),onClick:async t=>{s&&s.length>0||(t.stopPropagation(),t.preventDefault(),m?(p(!1),g(!1)):(p(!0),g(!0),null!==e&&void 0!==e&&e.name&&(await We(e.name),ze(e.name))))},onMouseEnter:()=>{m||s&&0!==s.length||g(!0)},onMouseLeave:()=>{m||s&&0!==s.length||g(!1)},title:m?"Click to collapse":h?"Click to keep expanded":"\ud83d\udd0d Hover for branch details, click to pin: ".concat(e.name),children:(0,c.jsxs)("div",{className:"badge-content",children:[(0,c.jsx)("span",{className:"badge-label",children:"Preview:"}),(0,c.jsx)("span",{className:"badge-branch",children:e.name}),(0,c.jsx)("span",{className:"badge-expand-icon",children:h?"\u25bc":"\u25b6"})]})}),h&&(!s||0===s.length)&&(0,c.jsxs)("div",{className:"preview-badge-expanded",children:[(0,c.jsxs)("div",{className:"expanded-header",children:[(0,c.jsxs)("div",{className:"pr-info",children:[(0,c.jsxs)("h3",{children:["Preview Branch: ",e.name]}),(0,c.jsxs)("div",{className:"pr-meta",children:[(0,c.jsx)("span",{className:"pr-state","data-state":"unknown",children:"No PR found"}),(0,c.jsx)("span",{className:"pr-author",children:"Branch preview"})]})]}),(0,c.jsx)("button",{className:"close-button",onClick:e=>{e.stopPropagation(),g(!1),p(!1)},title:"Close expanded view",children:"\xd7"})]}),(0,c.jsxs)("div",{className:"pr-description",children:[(0,c.jsx)("h4",{children:"Branch Information"}),(0,c.jsxs)("div",{className:"pr-body",children:["This is a preview deployment from the ",(0,c.jsx)("code",{children:e.name})," branch.",(0,c.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,c.jsx)("strong",{children:"Preview URL:"})," ",(0,c.jsxs)("code",{children:[window.location.origin,window.location.pathname]})]}),r.A.isAuth()?(0,c.jsx)("div",{style:{marginTop:"0.5rem",color:"#28a745"},children:"\u2705 Authenticated - You can view full PR details when available."}):(0,c.jsxs)("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#f0f8ff",border:"1px solid #bee5eb",borderRadius:"4px"},children:[(0,c.jsx)("strong",{children:"\ud83d\udca1 Tip:"})," Sign in to GitHub to view pull request details, comments, and contribute to this branch."]})]})]}),(0,c.jsx)("div",{className:"workflow-status-wrapper",children:(0,c.jsx)(R,{branchName:e.name,githubActionsService:C,isAuthenticated:r.A.isAuth(),canTriggerWorkflows:oe,canApproveWorkflows:re,onWorkflowAction:Ke})}),(0,c.jsx)("div",{className:"expanded-footer",children:(0,c.jsx)("a",{href:"https://github.com/litlfred/sgex/tree/".concat(e.name),target:"_blank",rel:"noopener noreferrer",className:"github-link",children:"View Branch on GitHub \u2192"})})]})]})};var D=s(1932);const E=()=>{const{pageName:e,profile:t,repository:s,branch:o,asset:i,isAuthenticated:l,navigate:d}=p(),u=(0,a.zy)(),[h,g]=(0,n.useState)(!1),[m,f]=(0,n.useState)(!1),[b,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(l){(async()=>{try{const e=j.getCurrentUser();if(e)v(e);else{const e=await r.A.getCurrentUser();v(e)}}catch(e){console.debug("Could not fetch authenticated user:",e)}})()}else v(null)},[l]);const w=()=>{(0,D.Rb)(d,u)},y=e=>{S.A.removeBookmark(e),f(!1),setTimeout(()=>f(!0),50)},k=S.A.getBookmarkByUrl(window.location.pathname),x=S.A.getBookmarksGroupedByPage();return(0,c.jsxs)("header",{className:"page-header",children:[(0,c.jsxs)("div",{className:"page-header-left",children:[(0,c.jsxs)("button",{className:"sgex-logo",onClick:w,onKeyDown:e=>"Enter"===e.key||" "===e.key?w():null,style:{border:"none",background:"none",padding:0,cursor:"pointer"},children:[(0,c.jsx)("h1",{children:"SGEX Workbench"}),(0,c.jsx)("p",{className:"subtitle",children:"WHO SMART Guidelines Exchange"})]}),(0,c.jsx)(P,{})]}),(0,c.jsx)("div",{className:"page-header-right",children:(l||null!==t&&void 0!==t&&t.isDemo)&&b?(0,c.jsxs)("div",{className:"user-controls",children:[(0,c.jsxs)("button",{className:"user-info",onClick:()=>g(!h),onKeyDown:e=>("Enter"===e.key||" "===e.key)&&g(!h),style:{border:"none",background:"none",padding:0,cursor:"pointer",display:"flex",alignItems:"center"},children:[(0,c.jsx)("img",{src:b.avatar_url,alt:"User avatar",className:"user-avatar"}),(0,c.jsx)("span",{className:"user-name",children:b.name||b.login}),(0,c.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),h&&(0,c.jsxs)("div",{className:"user-dropdown",children:[(0,c.jsxs)("button",{className:"dropdown-item",onClick:()=>{null!==b&&void 0!==b&&b.html_url?window.open(b.html_url,"_blank"):null!==b&&void 0!==b&&b.login&&window.open("https://github.com/".concat(b.login),"_blank")},children:[(0,c.jsx)("svg",{className:"github-icon",viewBox:"0 0 16 16",width:"16",height:"16",children:(0,c.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"GitHub Profile"]}),k?(0,c.jsx)("button",{className:"dropdown-item bookmark-action",onClick:()=>y(k.id),children:"\u2b50 Remove Bookmark"}):(0,c.jsx)("button",{className:"dropdown-item bookmark-action",onClick:()=>{const t={user:null===b||void 0===b?void 0:b.login,repository:s,branch:o,asset:i},n=window.location.pathname;S.A.addBookmark(e,n,t),f(!1)},children:"\u2606 Add Bookmark"}),(0,c.jsxs)("div",{className:"bookmarks-section",children:[(0,c.jsxs)("button",{className:"dropdown-item bookmarks-header",onClick:()=>f(!m),onKeyDown:e=>("Enter"===e.key||" "===e.key)&&f(!m),children:["\ud83d\udcd6 Bookmarks",(0,c.jsx)("span",{className:"dropdown-arrow",children:m?"\u25b2":"\u25bc"})]}),m&&(0,c.jsx)("div",{className:"bookmarks-dropdown",children:x.length>0?(0,c.jsx)("div",{className:"bookmarks-list",children:x.map(e=>(0,c.jsxs)("div",{className:"bookmark-group",children:[(0,c.jsx)("div",{className:"bookmark-group-header",children:e.pageName}),e.bookmarks.map(e=>(0,c.jsxs)("div",{className:"bookmark-item",children:[(0,c.jsx)("button",{className:"bookmark-link",onClick:()=>(e=>{d(e.url),f(!1)})(e),title:e.url,children:e.title}),(0,c.jsx)("button",{className:"bookmark-remove",onClick:()=>y(e.id),title:"Remove bookmark",children:"\xd7"})]},e.id))]},e.pageName))}):(0,c.jsx)("div",{className:"no-bookmarks",children:"No bookmarks yet"})})]}),(0,c.jsx)("button",{className:"dropdown-item logout-btn",onClick:()=>{r.A.logout(),d("/")},children:"Logout"})]})]}):(0,c.jsx)("button",{className:"login-btn",onClick:w,onKeyDown:e=>("Enter"===e.key||" "===e.key)&&w(),"aria-label":"Navigate to login page",children:"Login"})})]})},F=e=>{let{owner:t,repo:s,branch:o="main",className:a=""}=e;const[r,i]=(0,n.useState)(null),[l,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=!0;const n=async()=>{if(t&&s)try{d(!0);const n=await j.getAccessBadge(t,s,o);e&&(i(n),d(!1))}catch(n){console.error("Error loading access badge:",n),e&&(i({text:"Unknown",icon:"\u2753",color:"gray",description:"Unable to determine access level"}),d(!1))}else d(!1)};n();const a=j.addListener(()=>{n()});return()=>{e=!1,a()}},[t,s,o]),l?(0,c.jsxs)("div",{className:"access-badge loading ".concat(a),children:[(0,c.jsx)("span",{className:"access-badge-icon",children:"\u23f3"}),(0,c.jsx)("span",{className:"access-badge-text",children:"Loading..."})]}):r?(0,c.jsxs)("div",{className:"access-badge ".concat(r.color," ").concat(a),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),title:r.description,children:[(0,c.jsx)("span",{className:"access-badge-icon",role:"img","aria-label":r.text,children:r.icon}),(0,c.jsx)("span",{className:"access-badge-text",children:r.text}),u&&(0,c.jsx)("div",{className:"access-badge-tooltip",children:(0,c.jsxs)("div",{className:"tooltip-content",children:[(0,c.jsx)("strong",{children:r.text}),(0,c.jsx)("p",{children:r.description}),s&&(0,c.jsxs)("small",{children:["Repository: ",t,"/",s]})]})})]}):null},G=e=>{var t;let{customBreadcrumbs:s}=e;const{type:o,pageName:a,profile:i,repository:l,branch:d,navigate:m}=p(),[f,b]=(0,n.useState)([]),[v,w]=(0,n.useState)(!1),[y,k]=(0,n.useState)(""),[x,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=e=>{v&&!e.target.closest(".page-context-branch-selector")&&(w(!1),k(""))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[v]),(0,n.useEffect)(()=>{(async()=>{if(!l||o!==h&&o!==g)b([]);else try{var e,t;N(!0);const s=(null===(e=l.owner)||void 0===e?void 0:e.login)||(null===(t=l.full_name)||void 0===t?void 0:t.split("/")[0]),n=(await r.A.getBranches(s,l.name)).sort((e,t)=>e.name.localeCompare(t.name));b(n)}catch(s){console.error("Failed to fetch branches for context:",s),b([])}finally{N(!1)}})()},[l,o]);const j=f.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())),S=(()=>{if(s&&s.length>0)return s;if("documentation-viewer"===a)return[];const e=[];if(e.push({label:"Home",path:"/",onClick:()=>m("/")}),o!==u&&o!==h&&o!==g||!i||e.push({label:"Select Repository",path:"/dak-selection/".concat(i.login),onClick:()=>m("/dak-selection/".concat(i.login),{state:{profile:i}})}),(o===h||o===g)&&l){var t,n;const s=d&&"main"!==d?"/".concat(d):"",o=(null===(t=l.owner)||void 0===t?void 0:t.login)||(null===(n=l.full_name)||void 0===n?void 0:n.split("/")[0]);o&&e.push({label:"DAK Components",path:"/dashboard/".concat(o,"/").concat(l.name).concat(s),onClick:()=>m("/dashboard/".concat(o,"/").concat(l.name).concat(s))})}const r={landing:"Home","landing-unauthenticated":"Home",repositories:"Select Repository","dak-selection":"Select DAK","dak-action":"Choose DAK Action",dashboard:"DAK Components","dak-dashboard":"DAK Components","actor-editor":"Actor Definitions","component-editor":"Component Editor","bpmn-viewer":"Business Process Viewer","bpmn-editor":"Business Process Editor","decision-support-logic":"Decision Support Logic","core-data-dictionary-viewer":"Core Data Dictionary","testing-viewer":"Testing","pages-manager":"Pages",documentation:"Documentation"}[a]||a;return 0!==e.length&&e[e.length-1].label===r||e.push({label:r,current:!0}),e})();return!i&&!l&&S.length<=1?null:(0,c.jsx)("div",{className:"page-context-container",children:(0,c.jsxs)("div",{className:"page-context-content",children:[i&&(0,c.jsx)("img",{src:i.avatar_url,alt:"".concat(i.login," avatar"),className:"page-context-avatar"}),(0,c.jsxs)("div",{className:"page-context-info",children:[(0,c.jsxs)("div",{className:"page-context-row page-context-user-repo",children:[i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"page-context-profile",onClick:()=>{null!==i&&void 0!==i&&i.html_url?window.open(i.html_url,"_blank"):null!==i&&void 0!==i&&i.login&&window.open("https://github.com/".concat(i.login),"_blank")},children:i.login}),l&&(0,c.jsx)("span",{className:"page-context-separator",children:"/"})]}),l&&(0,c.jsx)("span",{className:"page-context-repo",children:l.name}),d&&(o===h||o===g)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"page-context-separator",children:"@"}),(0,c.jsxs)("div",{className:"page-context-branch-selector",children:[(0,c.jsxs)("button",{className:"page-context-branch-btn",onClick:()=>w(!v),title:"Switch branch",children:[(0,c.jsx)("span",{className:"branch-icon",children:"\ud83c\udf3f"}),d,(0,c.jsx)("span",{className:"branch-dropdown-arrow",children:v?"\u25b2":"\u25bc"})]}),v&&(0,c.jsxs)("div",{className:"branch-dropdown",children:[(0,c.jsx)("div",{className:"branch-search",children:(0,c.jsx)("input",{type:"text",placeholder:"Search branches...",value:y,onChange:e=>k(e.target.value),className:"branch-search-input",autoFocus:!1})}),(0,c.jsx)("div",{className:"branch-list",children:x?(0,c.jsx)("div",{className:"branch-item loading",children:"Loading branches..."}):j.length>0?j.map(e=>(0,c.jsxs)("button",{className:"branch-item ".concat(e.name===d?"current":""),onClick:()=>(e=>{const t=window.location.pathname.split("/");t.length>=5&&(5===t.length?t.push(e):t[5]=e,m(t.join("/"))),w(!1),k("")})(e.name),children:[(0,c.jsx)("span",{className:"branch-icon",children:"\ud83c\udf3f"}),e.name,e.name===d&&(0,c.jsx)("span",{className:"current-badge",children:"current"})]},e.name)):(0,c.jsx)("div",{className:"branch-item no-results",children:y?"No branches found":"No branches available"})})]})]})]})]}),S.length>1&&(0,c.jsx)("nav",{className:"page-context-row page-context-breadcrumbs","aria-label":"Breadcrumb navigation",children:(0,c.jsx)("ol",{className:"breadcrumb-list",children:S.map((e,t)=>(0,c.jsx)("li",{className:"breadcrumb-item",children:e.current?(0,c.jsx)("span",{className:"breadcrumb-current","aria-current":"page",children:e.label}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"breadcrumb-link",onClick:()=>e.onClick?e.onClick():m(e.path),"aria-label":"Navigate to ".concat(e.label),children:e.label}),(0,c.jsx)("span",{className:"breadcrumb-separator","aria-hidden":"true",children:"\u203a"})]})},t))})})]}),(o===h||o===g)&&l&&(0,c.jsxs)("div",{className:"page-context-actions",children:[(0,c.jsx)(F,{owner:(null===(t=l.owner)||void 0===t?void 0:t.login)||(null===i||void 0===i?void 0:i.login),repo:l.name,branch:d,className:"context-access-badge"}),(0,c.jsxs)("button",{className:"context-btn github-repo-btn",onClick:()=>{null!==l&&void 0!==l&&l.html_url&&window.open(l.html_url,"_blank")},title:"Open repository on GitHub",children:[(0,c.jsx)("svg",{className:"github-icon",viewBox:"0 0 16 16",width:"16",height:"16",children:(0,c.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"Repository"]})]})]})})};var L=s(29166),M=s(88259);const H=e=>{let{error:t,onRetry:s}=e;const o=p(),a=o.pageName,[r,i]=(0,n.useState)(!1),l=(0,M.A)("sgex-mascot.png"),[d,u]=(0,n.useState)(""),h=(()=>{var e;const s=t.toLowerCase(),n=null===o||void 0===o?void 0:o.user,a=null===o||void 0===o||null===(e=o.repository)||void 0===e?void 0:e.name;if(s.includes("not found")||s.includes("not accessible")){if(s.includes("user"))return{title:"User Not Found",message:"The user ".concat(n?"'".concat(n,"'"):"in the URL"," could not be found on GitHub."),suggestions:["Check the spelling of the username","Verify the user account exists on GitHub","Try searching for the user on GitHub.com"],icon:"\ud83d\udc64"};if(s.includes("repository"))return{title:"Repository Not Found",message:"The repository ".concat(n&&a?"'".concat(n,"/").concat(a,"'"):"in the URL"," could not be accessed."),suggestions:["Check the spelling of the repository name","Verify the repository exists and is public","If it's a private repository, make sure you have access","Try visiting the repository directly on GitHub.com"],icon:"\ud83d\udcc1"}}return s.includes("not a valid dak")||s.includes("invalid dak")?{title:"Not a DAK Repository",message:"The repository ".concat(n&&a?"'".concat(n,"/").concat(a,"'"):"in the URL"," doesn't appear to contain WHO SMART Guidelines content."),suggestions:["Verify this is a WHO SMART Guidelines Digital Adaptation Kit","Check if the repository has a sushi-config.yaml file","Look for smart.who.int.base dependencies in the configuration","Try browsing other DAK repositories for examples"],icon:"\ud83d\udccb"}:s.includes("asset")&&s.includes("not found")?{title:"File Not Found",message:"The requested file could not be found in the repository.",suggestions:["Check if the file path is correct","Verify the file exists in the current branch","The file may have been moved or deleted","Try browsing the repository to find the correct path"],icon:"\ud83d\udcc4"}:{title:"Something Went Wrong",message:t,suggestions:["Try refreshing the page","Check your internet connection","The service may be temporarily unavailable"],icon:"\u26a0\ufe0f"}})();return(0,c.jsx)("div",{className:"error-handler",children:(0,c.jsxs)("div",{className:"error-content",children:[(0,c.jsx)("div",{className:"error-mascot-container",children:(0,c.jsx)(L.A,{helpContent:(0,c.jsx)("div",{className:"error-help-content",children:(0,c.jsxs)("div",{className:"error-mascot-large",children:[(0,c.jsx)("img",{src:l,alt:"SGEX Helper",className:"large-mascot-icon"}),(0,c.jsxs)("div",{className:"mascot-speech-bubble",children:[(0,c.jsx)("div",{className:"speech-content",children:"I'm sorry! Something went wrong."}),(0,c.jsx)("div",{className:"speech-tail"})]})]})}),position:"center"})}),(0,c.jsxs)("div",{className:"error-details",children:[(0,c.jsxs)("h2",{children:[h.icon," ",h.title]}),(0,c.jsx)("p",{className:"error-message",children:h.message}),h.suggestions&&(0,c.jsxs)("div",{className:"error-suggestions",children:[(0,c.jsx)("h3",{children:"\ud83d\udca1 Suggestions:"}),(0,c.jsx)("ul",{children:h.suggestions.map((e,t)=>(0,c.jsx)("li",{children:e},t))})]}),(0,c.jsxs)("div",{className:"error-actions",children:[(0,c.jsx)("button",{className:"error-btn primary",onClick:()=>{s?s():window.location.reload()},children:"\ud83d\udd04 Try Again"}),(0,c.jsx)("button",{className:"error-btn secondary",onClick:()=>{window.location.href="/sgex/"},children:"\ud83c\udfe0 Go Home"})]}),(0,c.jsxs)("div",{className:"bug-report-section",children:[(0,c.jsx)("h3",{children:"Help us improve SGEX"}),(0,c.jsx)("p",{children:"If this error persists, please let us know what happened:"}),(0,c.jsxs)("div",{className:"user-explanation",children:[(0,c.jsx)("label",{htmlFor:"user-explanation",children:"What were you trying to do when this error occurred?"}),(0,c.jsx)("textarea",{id:"user-explanation",value:d,onChange:e=>u(e.target.value),placeholder:"Please describe what you were doing when the error occurred...",rows:4})]}),r?(0,c.jsxs)("div",{className:"bug-report-sent",children:[(0,c.jsx)("span",{className:"success-icon",children:"\u2705"}),"Thank you! A bug report has been opened. We'll investigate this issue."]}):(0,c.jsx)("button",{className:"bug-report-btn",onClick:()=>{const e=(()=>{const e=encodeURIComponent("User should not have reached this page"),s=encodeURIComponent("\n**Error Information:**\n- Page: ".concat(a,"\n- URL: ").concat(window.location.href,"\n- Error: ").concat(t,"\n- Timestamp: ").concat((new Date).toISOString(),"\n- User Agent: ").concat(navigator.userAgent,"\n\n**Context:**\n- Browser: ").concat(navigator.userAgent,"\n- Viewport: ").concat(window.innerWidth,"x").concat(window.innerHeight,"\n- Referrer: ").concat(document.referrer||"Direct access","\n\n**User Explanation:**\n").concat(d||"No additional details provided","\n\n**Steps to Reproduce:**\n1. Navigate to: ").concat(window.location.href,"\n2. [Please add any additional steps]\n\n**Expected Behavior:**\nThe page should load without errors.\n\n**Actual Behavior:**\n").concat(t,"\n    "));return"https://github.com/litlfred/sgex/issues/new?title=".concat(e,"&body=").concat(s,"&labels=bug,user-error")})();window.open(e,"_blank"),i(!0)},children:"\ud83d\udce7 Send Bug Report"})]}),(0,c.jsx)("div",{className:"error-context",children:(0,c.jsxs)("details",{children:[(0,c.jsx)("summary",{children:"Technical Details"}),(0,c.jsxs)("div",{className:"technical-details",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Page:"})," ",a]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"URL:"})," ",window.location.href]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Error:"})," ",t]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Timestamp:"})," ",(new Date).toISOString()]})]})]})})]})]})})};class O extends n.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e.message}}componentDidCatch(e,t){console.error("PageLayout caught an error:",e,t)}render(){return this.state.hasError?(0,c.jsx)("div",{className:"page-layout-error",children:(0,c.jsx)(H,{error:this.state.error,onRetry:()=>{this.setState({hasError:!1,error:null}),window.location.reload()}})}):this.props.children}}const B=e=>{let{children:t,showHeader:s=!0,showMascot:n=!0,showBreadcrumbs:o=!0,customBreadcrumbs:a}=e;const{loading:r,error:i,pageName:l}=p();return r?(0,c.jsxs)("div",{className:"page-layout",children:[s&&(0,c.jsx)(E,{}),(0,c.jsx)("main",{className:"page-main",children:(0,c.jsxs)("div",{className:"page-loading",children:[(0,c.jsx)("div",{className:"loading-spinner"}),(0,c.jsx)("p",{children:"Loading..."})]})}),n&&(0,c.jsx)(L.A,{pageId:"".concat(l,"-loading"),position:"bottom-right"})]}):i?(0,c.jsxs)("div",{className:"page-layout",children:[s&&(0,c.jsx)(E,{}),(0,c.jsx)("main",{className:"page-main",children:(0,c.jsx)(H,{error:i,onRetry:()=>window.location.reload()})})]}):(0,c.jsxs)("div",{className:"page-layout",children:[s&&(0,c.jsx)(E,{}),(0,c.jsx)(G,{customBreadcrumbs:o?a:[]}),(0,c.jsxs)("main",{className:"page-main",children:[t,n&&(0,c.jsx)(L.A,{pageId:l,position:"bottom-right",contextData:{}})]})]})},U=e=>{let{children:t,pageName:s,showHeader:n=!0,showMascot:o=!0,showBreadcrumbs:a=!0,customBreadcrumbs:r}=e;return(0,c.jsx)(O,{children:(0,c.jsx)(b,{pageName:s,children:(0,c.jsx)(B,{showHeader:n,showMascot:o,showBreadcrumbs:a,customBreadcrumbs:r,children:t})})})},q=()=>{const{type:e,user:t,profile:s,repository:n,branch:o,asset:a,params:r,navigate:i}=p();return{type:e,user:t,profile:s,repository:n,branch:o,asset:a,params:r,updateBranch:t=>{if(e===h||e===g){const e=window.location.pathname.split("/");e.length>=5&&(5===e.length?e.push(t):e[5]=t,i(e.join("/")))}},navigateToUser:e=>{i("/".concat(r.page||"dak-action","/").concat(e))},navigateToDAK:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";i("/".concat(r.page||"dashboard","/").concat(e,"/").concat(t,"/").concat(s))},navigateToAsset:(e,t,s,n)=>{i("/".concat(r.page||"editor","/").concat(e,"/").concat(t,"/").concat(s,"/").concat(n))},navigate:i}},K=()=>{try{const e=q();if(!e.loading&&e.type!==h&&e.type!==g)throw new Error("useDAKParams can only be used on DAK or Asset pages. Current page type: ".concat(e.type));return{user:e.user,profile:e.profile,repository:e.repository,branch:e.branch,asset:e.asset,updateBranch:e.updateBranch,navigate:e.navigate}}catch(e){if(e.message.includes("usePage must be used within a PageProvider"))return console.log("useDAKParams: PageProvider not ready yet, returning empty data"),{user:null,profile:null,repository:null,branch:null,asset:null,updateBranch:()=>{},navigate:()=>{}};throw e}},W=e=>{let{hasChanges:t=!1,isSavingLocal:s=!1,isSavingGitHub:n=!1,canSaveToGitHub:o=!1,localSaveSuccess:a=!1,githubSaveSuccess:r=!1,savedLocally:i=!1,onSaveLocal:l,onSaveGitHub:d,showLocalButton:u=!0,showGitHubButton:h=!0,buttonSize:g="medium",layout:m="horizontal"}=e;const p=!t||s||a,f=!t||n||r||!o,b=["save-buttons-container","layout-".concat(m),"size-".concat(g)].join(" "),v=(e,t,s)=>{const n=["save-button","save-button-".concat(e)];return t&&n.push("disabled"),s&&n.push("success"),n.join(" ")};return(0,c.jsxs)("div",{className:b,children:[u&&(0,c.jsxs)("button",{className:v("local",p,a),onClick:l,disabled:p,title:t?a?"Changes saved to local storage":s?"Saving to local storage...":"Save changes to browser local storage":"No changes to save",children:[(0,c.jsx)("span",{className:"button-icon",children:"\ud83d\udcbe"}),(0,c.jsx)("span",{className:"button-text",children:a?"Saved Locally \u2713":s?"Saving...":"Save Local"})]}),h&&o&&(0,c.jsxs)("button",{className:v("github",f,r),onClick:d,disabled:f,title:t?r?"Changes committed to GitHub":n?"Committing to GitHub...":"Commit changes to GitHub repository":"No changes to save",children:[(0,c.jsx)("span",{className:"button-icon",children:"\ud83d\udce4"}),(0,c.jsx)("span",{className:"button-text",children:r?"Committed \u2713":n?"Committing...":"Save to GitHub"})]}),h&&!o&&(0,c.jsxs)("div",{className:"github-unavailable",children:[(0,c.jsx)("span",{className:"unavailable-icon",children:"\ud83d\udd12"}),(0,c.jsx)("span",{className:"unavailable-text",children:"GitHub save unavailable"}),(0,c.jsx)("small",{children:"Login required for GitHub access"})]}),i&&(0,c.jsxs)("div",{className:"local-storage-indicator",children:[(0,c.jsx)("span",{className:"local-icon",children:"\ud83d\udcbe"}),(0,c.jsx)("span",{className:"local-text",children:"Local version available"})]})]})},z=e=>{let{isOpen:t=!1,commitMessage:s="",setCommitMessage:o,onCommit:a,onCancel:r,isSaving:i=!1,fileName:l="",suggestedMessage:d=""}=e;const u=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(t&&u.current)if(u.current.focus(),s||d||!l)d&&!s&&o(d);else{const e="Update ".concat(l);o(e)}},[t,s,d,l,o]);return t?(0,c.jsx)("div",{className:"commit-dialog-overlay",onClick:e=>{e.target!==e.currentTarget||i||r()},role:"presentation",children:(0,c.jsxs)("div",{className:"commit-dialog",onKeyDown:e=>{"Escape"!==e.key||i?"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&s.trim()&&!i&&a(s.trim()):r()},role:"dialog","aria-labelledby":"commit-dialog-title","aria-modal":"true",children:[(0,c.jsxs)("div",{className:"commit-dialog-header",children:[(0,c.jsx)("h3",{id:"commit-dialog-title",children:"Commit Changes to GitHub"}),(0,c.jsx)("button",{className:"close-button",onClick:r,disabled:i,"aria-label":"Close dialog",children:"\u2715"})]}),(0,c.jsxs)("div",{className:"commit-dialog-content",children:[l&&(0,c.jsxs)("div",{className:"file-info",children:[(0,c.jsx)("span",{className:"file-icon",children:"\ud83d\udcc4"}),(0,c.jsx)("span",{className:"file-name",children:l})]}),(0,c.jsxs)("div",{className:"commit-message-section",children:[(0,c.jsx)("label",{htmlFor:"commit-message",className:"commit-message-label",children:"Commit Message *"}),(0,c.jsx)("textarea",{id:"commit-message",ref:u,className:"commit-message-input",value:s,onChange:e=>o(e.target.value),placeholder:"Describe the changes you made...",rows:4,disabled:i,required:!0}),(0,c.jsx)("div",{className:"commit-message-help",children:(0,c.jsx)("small",{children:"Describe what changes you made and why. This will be visible in the repository's commit history."})})]}),(0,c.jsx)("div",{className:"commit-guidelines",children:(0,c.jsxs)("details",{children:[(0,c.jsx)("summary",{children:"Commit Message Guidelines"}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:"Use clear, descriptive language"}),(0,c.jsx)("li",{children:"Start with a verb (Add, Update, Fix, Remove, etc.)"}),(0,c.jsx)("li",{children:"Keep the first line under 72 characters"}),(0,c.jsx)("li",{children:"Add details in additional lines if needed"})]})]})})]}),(0,c.jsxs)("div",{className:"commit-dialog-footer",children:[(0,c.jsxs)("div",{className:"dialog-actions",children:[(0,c.jsx)("button",{className:"btn btn-secondary",onClick:r,disabled:i,children:"Cancel"}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>{s.trim()&&!i&&a(s.trim())},disabled:!s.trim()||i,children:i?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"spinner"}),"Committing..."]}):"Commit Changes"})]}),(0,c.jsx)("div",{className:"keyboard-shortcut",children:(0,c.jsxs)("small",{children:["Press ",(0,c.jsx)("kbd",{children:"Ctrl+Enter"})," to commit or ",(0,c.jsx)("kbd",{children:"Esc"})," to cancel"]})})]})]})}):null};var X=s(57561);const Y="local",J="github",V="success",Q="error",Z="permission_denied";const $=new class{constructor(){this.logger=v.A.getLogger("DataAccessLayer"),this.pendingOperations=new Map,this.assetCache=new Map}async initialize(e,t){this.logger.info("Initializing data access layer",{repository:null===e||void 0===e?void 0:e.full_name,branch:t}),X.A.initialize(e,t),await j.initialize()}async getAsset(e,t,s,n){const o="".concat(e,"/").concat(t,"/").concat(s,"/").concat(n);try{if("none"===await j.getRepositoryAccess(e,t,s))throw new Error("No access to this repository");const a=X.A.getStagingGround().files.find(e=>e.path===n);if(a)return this.logger.debug("Asset loaded from staging ground",{assetPath:n}),{content:a.content,source:"local",metadata:a.metadata,hasLocalChanges:!0};const i=await r.A.getFileContent(e,t,n,s);return this.assetCache.set(o,i),this.logger.debug("Asset loaded from GitHub",{assetPath:n,source:"github"}),{content:i,source:"github",hasLocalChanges:!1}}catch(a){throw this.logger.error("Error getting asset",{owner:e,repo:t,branch:s,assetPath:n,error:a.message}),a}}async saveAssetLocal(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const n=j.getUserType();if(X.A.updateFile(e,t,(0,o.A)((0,o.A)({},s),{},{savedBy:n,saveTarget:Y})))return this.logger.info("Asset saved to local storage",{assetPath:e,userType:n}),{result:V,message:"Changes saved to local staging area",target:Y};throw new Error("Failed to save to local storage")}catch(n){return this.logger.error("Error saving asset locally",{assetPath:e,error:n.message}),{result:Q,message:"Failed to save locally: ".concat(n.message),target:Y}}}async saveAssetGitHub(e,t,s,n,o,a){try{const g=j.getUserType();if(!await j.canSaveToGitHub(e,t,s))return"unauthenticated"===g?{result:Z,message:"Please authenticate to save changes to GitHub.",target:J}:{result:Z,message:"You do not have write access to this repository.",target:J};const m=await r.A.updateFileContent(e,t,n,o,a,s);if(m.success){var i,l,c,d,u,h;X.A.removeFile(n);const o="".concat(e,"/").concat(t,"/").concat(s,"/").concat(n);return this.assetCache.delete(o),this.logger.info("Asset saved to GitHub",{owner:e,repo:t,branch:s,assetPath:n,commit:null===(i=m.data)||void 0===i||null===(l=i.commit)||void 0===l?void 0:l.sha}),{result:V,message:"Changes successfully committed to GitHub",target:J,commitSha:null===(c=m.data)||void 0===c||null===(d=c.commit)||void 0===d?void 0:d.sha,commitUrl:null===(u=m.data)||void 0===u||null===(h=u.commit)||void 0===h?void 0:h.html_url}}throw new Error(m.error||"GitHub commit failed")}catch(g){return this.logger.error("Error saving asset to GitHub",{owner:e,repo:t,branch:s,assetPath:n,error:g.message}),{result:Q,message:"Failed to save to GitHub: ".concat(g.message),target:J}}}async getSaveOptions(e,t,s){const n=j.getUserType(),o=await j.canSaveToGitHub(e,t,s),a=j.canSaveLocal(),r=j.getUIBehavior();return{canSaveLocal:a,canSaveGitHub:o,showSaveLocal:r.showSaveLocal,showSaveGitHub:r.showSaveToGitHub,confirmBeforeSave:r.confirmBeforeSave,userType:n,restrictions:this.getSaveRestrictions(n,o)}}getSaveRestrictions(e,t){switch(e){case"unauthenticated":return{localMessage:"Changes will be saved to your browser only",githubMessage:"Please authenticate to save to GitHub",githubDisabled:!0};case"demo":return{localMessage:"Changes will be saved to your browser only",githubMessage:"Demo users cannot save to GitHub",githubDisabled:!0};case"authenticated":return t?{localMessage:"Save changes to staging area",githubMessage:"Commit changes to GitHub repository",githubDisabled:!1}:{localMessage:"Changes will be saved to your browser only",githubMessage:"You do not have write access to this repository",githubDisabled:!0};default:return{localMessage:"Local saves only",githubMessage:"GitHub saves not available",githubDisabled:!0}}}getStagingGroundStatus(){return X.A.getStatus()}clearStagingGround(){return X.A.clearStagingGround()}getChangedFiles(){return X.A.getStagingGround().files}hasLocalChanges(e){return X.A.getStagingGround().files.some(t=>t.path===e)}async createAsset(e,t,s,n){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!j.getUIBehavior().allowCreateNew)throw new Error("Current user type cannot create new assets");return this.saveAssetLocal(n,a,(0,o.A)((0,o.A)({},r),{},{isNew:!0,createdAt:Date.now()}))}async batchSaveLocal(e){const t=[];for(const s of e){const e=await this.saveAssetLocal(s.path,s.content,s.metadata);t.push((0,o.A)((0,o.A)({},e),{},{path:s.path}))}return{success:t.every(e=>e.result===V),results:t}}async getAccessInfo(e,t,s){const[n,o,a]=await Promise.all([j.getRepositoryAccess(e,t,s),j.getAccessBadge(e,t,s),this.getSaveOptions(e,t,s)]);return{access:n,badge:o,saveOptions:a,userType:j.getUserType()}}},ee=["children","pageName","file","repository","branch","content","originalContent","hasChanges","onSave","onContentChange","customSaveToGitHub","showSaveButtons","saveButtonsPosition"],te=e=>{let{children:t,pageName:s,file:a,repository:r,branch:i,content:l,originalContent:d,hasChanges:u=!1,onSave:h,onContentChange:g,customSaveToGitHub:m,showSaveButtons:p=!0,saveButtonsPosition:f="top"}=e,b=(0,A.A)(e,ee);const[v,w]=(0,n.useState)(!1),[y,k]=(0,n.useState)(!1),[x,N]=(0,n.useState)(null),[j,S]=(0,n.useState)(!1),[C,R]=(0,n.useState)(!1),[I,T]=(0,n.useState)(null),[_,P]=(0,n.useState)(!1),[D,E]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{if(r)try{var e;const t=await $.getSaveOptions(null===(e=r.owner)||void 0===e?void 0:e.login,r.name,i);T(t)}catch(t){console.error("Error loading save options:",t)}})()},[r,i]);const F=(null===I||void 0===I?void 0:I.canSaveGitHub)&&(null===I||void 0===I?void 0:I.showSaveGitHub),G=(0,n.useCallback)(async()=>{if(u&&null!==a&&void 0!==a&&a.path)try{var e;w(!0),N(null),S(!1);const t=await $.saveAssetLocal(a.path,l,{repository:(null===r||void 0===r?void 0:r.full_name)||"".concat(null===r||void 0===r||null===(e=r.owner)||void 0===e?void 0:e.login,"/").concat(null===r||void 0===r?void 0:r.name),branch:i||(null===r||void 0===r?void 0:r.default_branch)||"main",fileName:a.name,timestamp:(new Date).toISOString()});if("success"!==t.result)throw new Error(t.message||"Failed to save to local storage");S(!0),h&&h(l,"local"),setTimeout(()=>{S(!1)},3e3)}catch(t){console.error("Error saving file locally:",t),N("Failed to save locally: ".concat(t.message))}finally{w(!1)}},[u,a,l,r,i,h]),L=(0,n.useCallback)(()=>{u&&F&&(N(null),P(!0))},[u,F]),M=(0,n.useCallback)(async e=>{if(e.trim()&&null!==a&&void 0!==a&&a.path)try{var t;if(k(!0),N(null),R(!1),m){if(!await m(e.trim()))throw new Error("Custom save function failed");return R(!0),P(!1),E(""),h&&h(l,"github"),void setTimeout(()=>{R(!1)},3e3)}const s=await $.saveAssetGitHub(null===r||void 0===r||null===(t=r.owner)||void 0===t?void 0:t.login,null===r||void 0===r?void 0:r.name,i,a.path,l,e.trim());if("success"!==s.result){let e=s.message;throw"demo_mode_blocked"===s.result?e="Demo users cannot save to GitHub. You can save changes locally instead.":"permission_denied"===s.result&&(e="You do not have permission to save to this repository."),new Error(e)}R(!0),P(!1),E(""),h&&h(l,"github"),setTimeout(()=>{R(!1)},3e3)}catch(s){console.error("Error saving file to GitHub:",s),N("Failed to save to GitHub: ".concat(s.message))}finally{k(!1)}},[a,l,r,i,h,m]),H=(0,n.useCallback)(()=>{P(!1),E("")},[]),O={hasChanges:u,isSavingLocal:v,isSavingGitHub:y,canSaveToGitHub:F,localSaveSuccess:j,githubSaveSuccess:C,onSaveLocal:G,onSaveGitHub:L};return(0,c.jsx)(U,(0,o.A)((0,o.A)({pageName:s},b),{},{children:(0,c.jsxs)("div",{className:"asset-editor-layout",children:[p&&("top"===f||"both"===f)&&(0,c.jsx)("div",{className:"save-buttons-top",children:(0,c.jsx)(W,(0,o.A)({},O))}),x&&(0,c.jsxs)("div",{className:"asset-editor-error",children:[(0,c.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),x,(0,c.jsx)("button",{className:"btn-link error-dismiss",onClick:()=>N(null),children:"\u2715"})]}),j&&(0,c.jsxs)("div",{className:"asset-editor-success",children:[(0,c.jsx)("span",{className:"success-icon",children:"\u2705"}),"Changes saved locally successfully!"]}),C&&(0,c.jsxs)("div",{className:"asset-editor-success",children:[(0,c.jsx)("span",{className:"success-icon",children:"\u2705"}),"Changes committed to GitHub successfully!"]}),(0,c.jsx)("div",{className:"asset-editor-content",children:t}),p&&("bottom"===f||"both"===f)&&(0,c.jsx)("div",{className:"save-buttons-bottom",children:(0,c.jsx)(W,(0,o.A)({},O))}),_&&(0,c.jsx)(z,{isOpen:_,commitMessage:D,setCommitMessage:E,onCommit:M,onCancel:H,isSaving:y,fileName:null===a||void 0===a?void 0:a.name})]})}))};s(62141);const se=["toolDefinition"],ne="viewer",oe="editor",ae="dashboard",re="utility";class ie{constructor(e){this.id=e.id,this.name=e.name,this.title=e.title||e.name,this.description=e.description,this.type=e.type||re,this.route=e.route||"/".concat(this.id),this.icon=e.icon,this.category=e.category||"general",this.requiresAuth=!1!==e.requiresAuth,this.supportsDemo=!1!==e.supportsDemo,this.requiresDAK=e.requiresDAK||!1,this.assetTypes=e.assetTypes||[],this.assetPattern=e.assetPattern,this.viewerComponent=e.viewerComponent,this.editorComponent=e.editorComponent,this.dashboardComponent=e.dashboardComponent,this.onInit=e.onInit,this.onAssetLoad=e.onAssetLoad,this.onAssetSave=e.onAssetSave,this.onError=e.onError}supportsAsset(e){var t;return!(null!==(t=this.assetTypes)&&void 0!==t&&t.length||this.assetPattern)||(this.assetPattern?new RegExp(this.assetPattern).test(e):this.assetTypes.some(t=>e.includes(t)))}async canAccess(){return!this.requiresAuth||!j.isUnauthenticated()}createComponent(){const e=this;return function(t){return(0,c.jsx)(le,(0,o.A)({toolDefinition:e},t))}}}const le=e=>{let{toolDefinition:t}=e,s=(0,A.A)(e,se);const a=q(),[r,i]=n.useState({loading:!0,error:null,canAccess:!1,assets:[],content:null}),l=n.useCallback(async()=>{try{i(e=>(0,o.A)((0,o.A)({},e),{},{loading:!0,error:null}));if(!await t.canAccess())throw new Error("Access denied: This tool requires ".concat(t.requiresAuth?"authentication":"different user type"));a.repository&&await $.initialize(a.repository,a.branch);let s=[],n=null;if(a.asset&&(t.type===ne||t.type===oe)){if(!t.supportsAsset(a.asset))throw new Error("This tool does not support asset type: ".concat(a.asset));{var e;const t=await $.getAsset(a.user,null===(e=a.repository)||void 0===e?void 0:e.name,a.branch,a.asset);s=[(0,o.A)({path:a.asset},t)],n=t.content}}t.onInit&&await t.onInit({pageParams:a,assets:s,content:n}),i({loading:!1,error:null,canAccess:!0,assets:s,content:n})}catch(s){console.error("Error initializing tool ".concat(t.id,":"),s),i({loading:!1,error:s.message,canAccess:!1,assets:[],content:null}),t.onError&&t.onError(s,{pageParams:a})}},[t,a]);n.useEffect(()=>{l()},[l]);const d=async(e,s)=>{if(a.asset)try{let n;if("local"===s)n=await $.saveAssetLocal(a.asset,e);else if("github"===s)throw new Error("GitHub save requires commit message - use handleGitHubSave instead");return t.onAssetSave&&await t.onAssetSave({asset:a.asset,content:e,saveType:s,result:n,pageParams:a}),n}catch(n){throw console.error("Error saving asset in tool ".concat(t.id,":"),n),n}},u=async(e,s)=>{if(a.asset)try{var n;const o=await $.saveAssetGitHub(a.user,null===(n=a.repository)||void 0===n?void 0:n.name,a.branch,a.asset,e,s);return t.onAssetSave&&await t.onAssetSave({asset:a.asset,content:e,saveType:"github",result:o,commitMessage:s,pageParams:a}),o}catch(o){throw console.error("Error saving asset to GitHub in tool ".concat(t.id,":"),o),o}};if(r.loading)return(0,c.jsx)(U,{pageName:t.id,children:(0,c.jsxs)("div",{className:"tool-loading",children:[(0,c.jsxs)("h2",{children:["Loading ",t.title,"..."]}),(0,c.jsx)("p",{children:"Initializing tool and checking access permissions."})]})});if(r.error||!r.canAccess)return(0,c.jsx)(U,{pageName:t.id,children:(0,c.jsxs)("div",{className:"tool-error",children:[(0,c.jsxs)("h2",{children:["Cannot Access ",t.title]}),(0,c.jsx)("p",{children:r.error||"Access denied"}),(0,c.jsx)("button",{onClick:()=>window.history.back(),children:"Go Back"})]})});return(()=>{const e=(0,o.A)({toolDefinition:t,pageParams:a,toolState:r,onAssetSave:d,onGitHubSave:u},s);switch(t.type){case oe:if(t.editorComponent){const s=t.editorComponent;var n;return a.asset&&r.assets.length>0?(0,c.jsx)(te,{pageName:t.id,file:{name:a.asset,path:a.asset},repository:a.repository,branch:a.branch,content:r.content,originalContent:null===(n=r.assets[0])||void 0===n?void 0:n.content,hasChanges:!1,onSave:d,onContentChange:e=>{i(t=>(0,o.A)((0,o.A)({},t),{},{content:e}))},children:(0,c.jsx)(s,(0,o.A)({},e))}):(0,c.jsx)(U,{pageName:t.id,children:(0,c.jsx)(s,(0,o.A)({},e))})}break;case ne:if(t.viewerComponent){const s=t.viewerComponent;return(0,c.jsx)(U,{pageName:t.id,children:(0,c.jsx)(s,(0,o.A)({},e))})}break;case ae:if(t.dashboardComponent){const s=t.dashboardComponent;return(0,c.jsx)(U,{pageName:t.id,children:(0,c.jsx)(s,(0,o.A)({},e))})}break;default:const s=t.viewerComponent||t.editorComponent||t.dashboardComponent;if(s)return(0,c.jsx)(U,{pageName:t.id,children:(0,c.jsx)(s,(0,o.A)({},e))})}return(0,c.jsx)(U,{pageName:t.id,children:(0,c.jsxs)("div",{className:"tool-fallback",children:[(0,c.jsx)("h1",{children:t.title}),(0,c.jsx)("p",{children:t.description}),(0,c.jsx)("p",{children:"No component defined for this tool."})]})})})()};new class{constructor(){this.tools=new Map}register(e){const t=new ie(e);return this.tools.set(t.id,t),t}get(e){return this.tools.get(e)}getAll(){return Array.from(this.tools.values())}getByCategory(e){return this.getAll().filter(t=>t.category===e)}getByAssetType(e){return this.getAll().filter(t=>t.supportsAsset(e))}async getAccessibleTools(){const e=this.getAll(),t=[];for(const s of e)await s.canAccess()&&t.push(s);return t}}},95388:(e,t,s)=>{s.d(t,{ld:()=>n,lm:()=>o,yl:()=>a});const n={MASCOT_HELPER:"altText.mascot.helper",MASCOT_ICON:"altText.mascot.icon",MASCOT_EXAMINING:"altText.mascot.examining",MASCOT_CELEBRATING:"altText.mascot.celebrating",MASCOT_CODING:"altText.mascot.coding",MASCOT_COMMUNITY:"altText.mascot.community",AVATAR_USER:"altText.avatar.user",AVATAR_ORGANIZATION:"altText.avatar.organization",AVATAR_PERSONAL:"altText.avatar.personal",AVATAR_PROFILE:"altText.avatar.profile",ICON_SGEX:"altText.icon.sgex",ICON_BUG_REPORT:"altText.icon.bugReport",ICON_SECURITY:"altText.icon.security",ICON_ACTION:"altText.icon.action",ICON_DAK_COMPONENT:"altText.icon.dakComponent",IMAGE_AUTHORING:"altText.image.authoring",IMAGE_COLLABORATION:"altText.image.collaboration",IMAGE_WORKFLOW:"altText.image.workflow",IMAGE_PRONUNCIATION:"altText.image.pronunciation",LOGO_SGEX:"altText.logo.sgex",LOGO_WHO:"altText.logo.who"};function o(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{const o=e(t,n);return o===t?s:o}catch(o){return console.warn("Alt text translation failed for key: ".concat(t),o),s}}function a(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";if(!t)return o(e,n.AVATAR_PROFILE,"Profile avatar");const a=t.name||t.display_name||t.login;return o(e,"organization"===s?n.AVATAR_ORGANIZATION:n.AVATAR_USER,"".concat(a," avatar"),{name:a})}}}]);