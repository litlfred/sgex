"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[857],{95857:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var n=a(89379),i=a(9950),t=a(67818),l=a(10827),r=a(87018),c=a(7082),d=a(44414);const o=e=>{let{questionId:s,parameters:a={},githubService:l=null,assetFiles:o=[],showRawData:h=!1,className:m=""}=e;const{t:u,i18n:p}=(0,t.Bd)(),[x,j]=(0,i.useState)(null),[v,f]=(0,i.useState)(!1),[g,q]=(0,i.useState)(null),N=(0,i.useCallback)(async()=>{if(s&&l){f(!0),q(null);try{const e={questionId:s,parameters:(0,n.A)((0,n.A)({},a),{},{locale:p.language.replace("-","_")||"en_US"}),assetFiles:o},i={githubService:l},t=await r.A.executeQuestion(e,i);j(t)}catch(e){q(e.message)}finally{f(!1)}}},[s,a,l,o,p.language]);(0,i.useEffect)(()=>{N()},[N]);return v?(0,d.jsxs)("div",{className:"faq-answer loading ".concat(m),children:[(0,d.jsx)("div",{className:"faq-loading-spinner"}),(0,d.jsx)("p",{children:u("dak.faq.loading")})]}):g?(0,d.jsxs)("div",{className:"faq-answer error ".concat(m),children:[(0,d.jsx)("h4",{children:u("dak.faq.error_title")}),(0,d.jsx)("p",{className:"faq-error-message",children:g}),(0,d.jsx)("button",{onClick:N,className:"faq-retry-button",children:u("dak.faq.retry")})]}):x?(0,d.jsxs)("div",{className:"faq-answer success ".concat(m),children:[(()=>{return null!==x&&void 0!==x&&x.narrative?(0,d.jsx)("div",{className:"faq-narrative",dangerouslySetInnerHTML:{__html:(e=x.narrative,c.default.sanitize(e,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","div","span","ul","ol","li","strong","em","code","pre","time","small"],ALLOWED_ATTR:["class","datetime"]}))}}):null;var e})(),(()=>{const e=(null===x||void 0===x?void 0:x.warnings)||[],s=(null===x||void 0===x?void 0:x.errors)||[];return 0===e.length&&0===s.length?null:(0,d.jsxs)("div",{className:"faq-messages",children:[s.map((e,s)=>(0,d.jsxs)("div",{className:"faq-message faq-error",children:[(0,d.jsx)("span",{className:"faq-message-icon",children:"\u26a0\ufe0f"}),e]},"error-".concat(s))),e.map((e,s)=>(0,d.jsxs)("div",{className:"faq-message faq-warning",children:[(0,d.jsx)("span",{className:"faq-message-icon",children:"\u26a0\ufe0f"}),e]},"warning-".concat(s)))]})})(),h&&null!==x&&void 0!==x&&x.structured?(0,d.jsxs)("details",{className:"faq-structured-data",children:[(0,d.jsx)("summary",{children:u("dak.faq.structured_data")}),(0,d.jsx)("pre",{children:JSON.stringify(x.structured,null,2)})]}):null,h&&null!==x&&void 0!==x&&x.meta?(0,d.jsxs)("details",{className:"faq-metadata",children:[(0,d.jsx)("summary",{children:u("dak.faq.metadata")}),(0,d.jsx)("pre",{children:JSON.stringify(x.meta,null,2)})]}):null]}):(0,d.jsx)("div",{className:"faq-answer empty ".concat(m),children:(0,d.jsx)("p",{children:u("dak.faq.no_data")})})};var h=a(29946),m=a(53782);const u=()=>{const{t:e}=(0,t.Bd)(),{user:s,repository:a,branch:c}=(0,m.N5)(),u=(0,l.zy)(),[p,x]=(0,i.useState)([]),[j,v]=(0,i.useState)(!0),[f,g]=(0,i.useState)(null),[q,N]=(0,i.useState)([]),[b,y]=(0,i.useState)("unknown"),A=null===a||void 0===a?void 0:a.name;(0,i.useEffect)(()=>{k(),w()},[]);const k=async()=>{try{v(!0),await r.A.initialize();const e=r.A.getCatalog();x(e)}catch(e){g(e.message)}finally{v(!1)}},w=async()=>{try{const e=await fetch("http://127.0.0.1:3001/");if(e.ok){const s=await e.json();if(s.endpoints){const e=Object.entries(s.endpoints).map(e=>{let[s,a]=e;return{endpoint:s,description:a,method:s.split(" ")[0],path:s.split(" ")[1],fullUrl:"http://127.0.0.1:3001".concat(s.split(" ")[1])}});N(e),y("running")}}else y("not-running")}catch(f){console.log("MCP service not available:",f.message),y("not-running"),N([{endpoint:"GET /mcp/faq/questions/catalog",description:"Get question catalog",method:"GET",path:"/mcp/faq/questions/catalog",fullUrl:"http://127.0.0.1:3001/mcp/faq/questions/catalog"},{endpoint:"POST /mcp/faq/questions/execute",description:"Execute questions",method:"POST",path:"/mcp/faq/questions/execute",fullUrl:"http://127.0.0.1:3001/mcp/faq/questions/execute"}])}},S=(()=>{if(s&&A)return{repository:"".concat(s,"/").concat(A),branch:c||"main"};const e=u.state;return null!==e&&void 0!==e&&e.user&&null!==e&&void 0!==e&&e.repo?{repository:"".concat(e.user,"/").concat(e.repo),branch:e.branch||"main"}:null})();return j?(0,d.jsxs)("div",{className:"dak-faq-demo loading",children:[(0,d.jsx)("div",{className:"loading-spinner"}),(0,d.jsx)("p",{children:e("dak.faq.loading")})]}):f?(0,d.jsxs)("div",{className:"dak-faq-demo error",children:[(0,d.jsx)("h2",{children:"FAQ System Error"}),(0,d.jsx)("p",{children:f}),(0,d.jsx)("button",{onClick:k,children:"Retry"})]}):S?(0,d.jsxs)("div",{className:"dak-faq-demo",children:[(0,d.jsxs)("header",{className:"dak-faq-demo-header",children:[(0,d.jsx)("h1",{children:"DAK FAQ Demo"}),(0,d.jsxs)("div",{className:"repository-info",children:[(0,d.jsx)("span",{className:"repo-name",children:S.repository}),(0,d.jsxs)("span",{className:"branch-name",children:["(",S.branch,")"]})]})]}),(0,d.jsxs)("div",{className:"faq-questions",children:[(0,d.jsx)("h2",{children:"Available Questions"}),(0,d.jsx)("p",{children:"Here are some example FAQ questions that can be answered about this DAK:"}),[{id:"dak-name",title:"What is the name of this DAK?",description:"Extracts the DAK name from sushi-config.yaml"},{id:"dak-version",title:"What is the version of this DAK?",description:"Extracts the DAK version from sushi-config.yaml"},{id:"decision-table-inputs",title:"What are the inputs required for this decision table?",description:"Analyzes DMN files and extracts input requirements for decision tables"}].map(e=>(0,d.jsxs)("div",{className:"faq-question-section",children:[(0,d.jsx)("h3",{children:e.title}),(0,d.jsx)("p",{className:"question-description",children:e.description}),"decision-table-inputs"===e.id?(0,d.jsxs)("div",{className:"dmn-demo",children:[(0,d.jsx)("p",{children:(0,d.jsx)("em",{children:"This is an asset-level question that analyzes individual DMN files. In a real DAK repository, this would scan DMN files in directories like input/cql/ or input/dmn/."})}),(0,d.jsx)(o,{questionId:e.id,parameters:(0,n.A)((0,n.A)({},S),{},{assetFile:"input/cql/IMMZ.D2.DT.BCG.dmn"}),githubService:h.A,showRawData:!0})]}):(0,d.jsx)(o,{questionId:e.id,parameters:S,githubService:h.A,showRawData:!0})]},e.id))]}),(0,d.jsxs)("div",{className:"faq-catalog",children:[(0,d.jsx)("h2",{children:"FAQ Question Catalog"}),(0,d.jsx)("p",{children:"All available questions in the system:"}),(0,d.jsx)("div",{className:"catalog-grid",children:p.map(e=>(0,d.jsxs)("div",{className:"catalog-item",children:[(0,d.jsx)("h4",{children:e.title}),(0,d.jsx)("p",{children:e.description}),(0,d.jsxs)("div",{className:"catalog-meta",children:[(0,d.jsx)("span",{className:"level",children:e.level}),(0,d.jsxs)("span",{className:"version",children:["v",e.version]})]}),(0,d.jsx)("div",{className:"tags",children:e.tags.map(e=>(0,d.jsx)("span",{className:"tag",children:e},e))})]},e.id))})]}),(0,d.jsxs)("div",{className:"mcp-info",children:[(0,d.jsx)("h2",{children:"MCP Server Integration"}),(0,d.jsx)("div",{className:"mcp-status",children:(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Service Status:"}),(0,d.jsx)("span",{className:"status-badge ".concat(b),children:"running"===b?"\ud83d\udfe2 Running":"not-running"===b?"\ud83d\udd34 Not Running":"\u26aa Unknown"})]})}),(0,d.jsxs)("p",{children:["The FAQ system can be accessed via the local MCP server API for programmatic access.","not-running"===b&&(0,d.jsxs)("span",{children:[" ",(0,d.jsx)("strong",{children:"Start the MCP server"})," to access all endpoints."]})]}),(0,d.jsxs)("div",{className:"endpoints-section",children:[(0,d.jsxs)("h3",{children:["Available Endpoints (",q.length,")"]}),q.length>0?(0,d.jsx)("div",{className:"endpoints-list",children:q.map((e,s)=>(0,d.jsxs)("div",{className:"endpoint-item",children:[(0,d.jsxs)("div",{className:"endpoint-header",children:[(0,d.jsx)("span",{className:"method-badge ".concat(e.method.toLowerCase()),children:e.method}),(0,d.jsx)("code",{className:"endpoint-url",children:e.fullUrl})]}),(0,d.jsx)("p",{className:"endpoint-description",children:e.description})]},s))}):(0,d.jsx)("p",{children:"No endpoints available. Start the MCP server to see all available endpoints."})]}),(0,d.jsxs)("div",{className:"mcp-usage-info",children:[(0,d.jsx)("h4",{children:"Usage Instructions"}),(0,d.jsxs)("ol",{children:[(0,d.jsxs)("li",{children:["Start the MCP server: ",(0,d.jsx)("code",{children:"cd services/dak-faq-mcp && npm start"})]}),(0,d.jsx)("li",{children:"Use any HTTP client to access the endpoints above"}),(0,d.jsx)("li",{children:"Refresh this page to see updated endpoint status"})]})]})]})]}):(0,d.jsxs)("div",{className:"dak-faq-demo no-context",children:[(0,d.jsx)("h2",{children:"DAK FAQ Demo"}),(0,d.jsx)("p",{children:"No repository context available. Please navigate from a DAK repository page."}),(0,d.jsxs)("div",{className:"demo-info",children:[(0,d.jsx)("h3",{children:"Available Questions"}),(0,d.jsx)("ul",{children:p.map(e=>(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:e.title})," - ",e.description]},e.id))})]})]})},p=()=>(0,d.jsx)(m.Mx,{pageName:"dak-faq-demo",children:(0,d.jsx)(u,{})})}}]);