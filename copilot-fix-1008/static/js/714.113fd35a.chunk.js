"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[714],{33714:(e,s,r)=>{r.r(s),r.d(s,{Render:()=>l,execute:()=>c,metadata:()=>t});r(9950);var n=r(67818),a=r(49162),o=r(16558),i=r(44414);const t=new a.Q5({id:"dak-version",level:a.x.DAK,title:"DAK Version",description:"Extracts the version of the DAK from sushi-config.yaml",parameters:[],tags:["dak","metadata","version"],version:"1.0.0"});async function c(e){const{locale:s="en_US",storage:r}=e,n=[],i=[];try{if(!await r.fileExists("sushi-config.yaml"))return new a.uC({structured:{version:null},narrative:u(s,"file_not_found"),errors:[d(s,"sushi_config_missing")],meta:{cacheHint:new a.kv({scope:"repository",key:"dak-version",ttl:3600,dependencies:["sushi-config.yaml"]})}});const e=await r.readFile("sushi-config.yaml"),t=o.default.load(e);let c=null,l=null,h=null;t&&"object"===typeof t&&(c=t.version,l=t.status,h=t.releaseDate||t.date),c||n.push(d(s,"version_not_found"));let p=null;if(c&&"string"===typeof c){const e=c.match(/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/);e&&(p={major:parseInt(e[1]),minor:parseInt(e[2]),patch:parseInt(e[3]),prerelease:e[5]||null,raw:c})}return new a.uC({structured:{version:c,semanticVersion:p,status:l,releaseDate:h,name:null===t||void 0===t?void 0:t.name,id:null===t||void 0===t?void 0:t.id},narrative:u(s,"success",{version:c,status:l,releaseDate:h}),warnings:n,errors:i,meta:{cacheHint:new a.kv({scope:"repository",key:"dak-version",ttl:3600,dependencies:["sushi-config.yaml"]})}})}catch(t){return new a.uC({structured:{version:null},narrative:u(s,"error"),errors:[d(s,"parse_error",{error:t.message})],meta:{cacheHint:new a.kv({scope:"repository",key:"dak-version",ttl:60,dependencies:["sushi-config.yaml"]})}})}}function l(e){var s;let{result:r,locale:a="en_US"}=e;const{t:o}=(0,n.Bd)();if(!r||!r.structured)return(0,i.jsx)("div",{className:"faq-answer error",children:o("dak.faq.version.no_data")});const{version:t,semanticVersion:c,status:l,releaseDate:u}=r.structured;var d;return t?(0,i.jsxs)("div",{className:"faq-answer success",children:[(0,i.jsx)("h4",{children:o("dak.faq.version.title")}),(0,i.jsxs)("div",{className:"version-metadata",children:[(0,i.jsxs)("div",{className:"version-info",children:[(0,i.jsxs)("strong",{children:[o("dak.faq.version.version_label"),": "]}),(0,i.jsx)("span",{className:"highlight version-number",children:t}),c&&(0,i.jsx)("div",{className:"semantic-version",children:(0,i.jsxs)("small",{children:["Major: ",c.major,", Minor: ",c.minor,", Patch: ",c.patch,c.prerelease&&" (".concat(c.prerelease,")")]})})]}),l&&(0,i.jsxs)("div",{className:"version-status",children:[(0,i.jsxs)("strong",{children:[o("dak.faq.version.status_label"),": "]}),(0,i.jsx)("span",{className:"status ".concat(l.toLowerCase()),children:l})]}),u&&(0,i.jsxs)("div",{className:"release-date",children:[(0,i.jsxs)("strong",{children:[o("dak.faq.version.release_date_label"),": "]}),(0,i.jsx)("time",{children:new Date(u).toLocaleDateString(a.replace("_","-"))})]})]}),null===(s=r.warnings)||void 0===s?void 0:s.map((e,s)=>(0,i.jsx)("div",{className:"warning-message",children:e},s))]}):(0,i.jsxs)("div",{className:"faq-answer warning",children:[(0,i.jsx)("h4",{children:o("dak.faq.version.title")}),(0,i.jsx)("p",{children:o("dak.faq.version.not_found")}),null===(d=r.errors)||void 0===d?void 0:d.map((e,s)=>(0,i.jsx)("div",{className:"error-message",children:e},s))]})}function u(e,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={en_US:{success:(()=>{if(!r.version)return"<h4>DAK Version</h4><p>No version found in sushi-config.yaml.</p>";let e="<h4>DAK Version</h4><p>This DAK is version <strong>".concat(r.version,"</strong>.</p>");return r.status&&(e+='<p>Status: <span class="status">'.concat(r.status,"</span></p>")),r.releaseDate&&(e+="<p>Released: ".concat(new Date(r.releaseDate).toLocaleDateString(),"</p>")),e})(),file_not_found:'<h4>DAK Version</h4><p class="error">The sushi-config.yaml file was not found in this repository.</p>',error:'<h4>DAK Version</h4><p class="error">An error occurred while reading the DAK configuration.</p>'},fr_FR:{success:(()=>{if(!r.version)return"<h4>Version DAK</h4><p>Aucune version trouv\xe9e dans sushi-config.yaml.</p>";let e="<h4>Version DAK</h4><p>Ce DAK est la version <strong>".concat(r.version,"</strong>.</p>");return r.status&&(e+='<p>Statut: <span class="status">'.concat(r.status,"</span></p>")),r.releaseDate&&(e+="<p>Publi\xe9: ".concat(new Date(r.releaseDate).toLocaleDateString("fr-FR"),"</p>")),e})(),file_not_found:'<h4>Version DAK</h4><p class="error">Le fichier sushi-config.yaml n\'a pas \xe9t\xe9 trouv\xe9 dans ce r\xe9f\xe9rentiel.</p>',error:'<h4>Version DAK</h4><p class="error">Une erreur s\'est produite lors de la lecture de la configuration DAK.</p>'},es_ES:{success:(()=>{if(!r.version)return"<h4>Versi\xf3n DAK</h4><p>No se encontr\xf3 versi\xf3n en sushi-config.yaml.</p>";let e="<h4>Versi\xf3n DAK</h4><p>Este DAK es la versi\xf3n <strong>".concat(r.version,"</strong>.</p>");return r.status&&(e+='<p>Estado: <span class="status">'.concat(r.status,"</span></p>")),r.releaseDate&&(e+="<p>Lanzado: ".concat(new Date(r.releaseDate).toLocaleDateString("es-ES"),"</p>")),e})(),file_not_found:'<h4>Versi\xf3n DAK</h4><p class="error">El archivo sushi-config.yaml no se encontr\xf3 en este repositorio.</p>',error:'<h4>Versi\xf3n DAK</h4><p class="error">Ocurri\xf3 un error al leer la configuraci\xf3n del DAK.</p>'}},a=n[e]||n.en_US;return a[s]||a.error}function d(e,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={en_US:{sushi_config_missing:"sushi-config.yaml file not found",version_not_found:"No version field found in sushi-config.yaml",parse_error:"Failed to parse sushi-config.yaml: ".concat(r.error||"Unknown error")},fr_FR:{sushi_config_missing:"Fichier sushi-config.yaml non trouv\xe9",version_not_found:"Aucun champ version trouv\xe9 dans sushi-config.yaml",parse_error:"\xc9chec de l'analyse de sushi-config.yaml: ".concat(r.error||"Erreur inconnue")},es_ES:{sushi_config_missing:"Archivo sushi-config.yaml no encontrado",version_not_found:"No se encontr\xf3 campo de versi\xf3n en sushi-config.yaml",parse_error:"Error al analizar sushi-config.yaml: ".concat(r.error||"Error desconocido")}};return(n[e]||n.en_US)[s]||"Unknown error: ".concat(s)}}}]);