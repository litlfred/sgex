"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[157],{83661:(e,i,r)=>{r.r(i),r.d(i,{default:()=>g});var s=r(89379),n=r(9950),o=r(91018),t=r(67818),a=r(83111),l=r(29166),c=r(29946),d=r(57561),m=r(44414);const p=e=>{let{config:i,setConfig:r,errors:o={},profile:t,onValidate:a}=e;const[l,c]=(0,n.useState)({name:"",version:""}),[d,p]=(0,n.useState)(!1),h=(e,i)=>{r(r=>(0,s.A)((0,s.A)({},r),{},{[e]:i})),setTimeout(()=>{a&&a()},100)},u=e=>{const n=e||l;n.name&&n.version&&!i.dependencies.find(e=>e.name===n.name)&&(r(e=>(0,s.A)((0,s.A)({},e),{},{dependencies:[...e.dependencies,n]})),c({name:"",version:""}),p(!1),a&&a())};return(0,m.jsxs)("div",{className:"workflow-form",children:[(0,m.jsx)("h2",{children:"SUSHI Configuration"}),(0,m.jsx)("p",{children:"Configure the sushi-config.yaml file that defines your FHIR Implementation Guide."}),(0,m.jsxs)("div",{className:"workflow-form-section",children:[(0,m.jsx)("h3",{children:"Implementation Guide Identity"}),(0,m.jsxs)("div",{className:"workflow-form-row",children:[(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"sushi-id",className:"workflow-form-label required",children:"Implementation Guide ID"}),(0,m.jsx)("input",{id:"sushi-id",type:"text",className:"workflow-form-input ".concat(o.id?"error":""),value:i.id,onChange:e=>h("id",e.target.value),placeholder:"who.smart.maternal-health"}),o.id&&(0,m.jsx)("div",{className:"workflow-form-error",children:o.id}),(0,m.jsx)("div",{className:"workflow-form-help",children:"Unique identifier for the Implementation Guide (lowercase with dots or hyphens)"})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"sushi-canonical",className:"workflow-form-label required",children:"Canonical URL"}),(0,m.jsx)("input",{id:"sushi-canonical",type:"url",className:"workflow-form-input ".concat(o.canonical?"error":""),value:i.canonical,onChange:e=>h("canonical",e.target.value),placeholder:"http://smart.who.int/maternal-health"}),o.canonical&&(0,m.jsx)("div",{className:"workflow-form-error",children:o.canonical}),(0,m.jsx)("div",{className:"workflow-form-help",children:"Base URL where the Implementation Guide will be published"})]})]}),(0,m.jsxs)("div",{className:"workflow-form-row",children:[(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"sushi-name",className:"workflow-form-label required",children:"Technical Name"}),(0,m.jsx)("input",{id:"sushi-name",type:"text",className:"workflow-form-input ".concat(o.name?"error":""),value:i.name,onChange:e=>h("name",e.target.value),placeholder:"MaternalHealth"}),o.name&&(0,m.jsx)("div",{className:"workflow-form-error",children:o.name}),(0,m.jsx)("div",{className:"workflow-form-help",children:"PascalCase technical name (no spaces)"})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"sushi-version",className:"workflow-form-label",children:"Version"}),(0,m.jsx)("input",{id:"sushi-version",type:"text",className:"workflow-form-input",value:i.version,onChange:e=>h("version",e.target.value),placeholder:"0.1.0"}),(0,m.jsx)("div",{className:"workflow-form-help",children:"Semantic version number (e.g., 0.1.0, 1.0.0)"})]})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"sushi-title",className:"workflow-form-label required",children:"Title"}),(0,m.jsx)("input",{id:"sushi-title",type:"text",className:"workflow-form-input ".concat(o.title?"error":""),value:i.title,onChange:e=>h("title",e.target.value),placeholder:"WHO SMART Guidelines - Maternal Health DAK"}),o.title&&(0,m.jsx)("div",{className:"workflow-form-error",children:o.title}),(0,m.jsx)("div",{className:"workflow-form-help",children:"Human-readable title for the Implementation Guide"})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"sushi-description",className:"workflow-form-label required",children:"Description"}),(0,m.jsx)("textarea",{id:"sushi-description",className:"workflow-form-textarea ".concat(o.description?"error":""),value:i.description,onChange:e=>h("description",e.target.value),placeholder:"This implementation guide provides digital adaptation kit components for maternal health care...",rows:4}),o.description&&(0,m.jsx)("div",{className:"workflow-form-error",children:o.description}),(0,m.jsx)("div",{className:"workflow-form-help",children:"Detailed description of the DAK's purpose and scope"})]}),(0,m.jsxs)("div",{className:"workflow-form-row",children:[(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"sushi-status",className:"workflow-form-label",children:"Status"}),(0,m.jsxs)("select",{id:"sushi-status",className:"workflow-form-select",value:i.status,onChange:e=>h("status",e.target.value),children:[(0,m.jsx)("option",{value:"draft",children:"Draft"}),(0,m.jsx)("option",{value:"active",children:"Active"}),(0,m.jsx)("option",{value:"retired",children:"Retired"}),(0,m.jsx)("option",{value:"unknown",children:"Unknown"})]})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"sushi-publisher",className:"workflow-form-label",children:"Publisher"}),(0,m.jsx)("input",{id:"sushi-publisher",type:"text",className:"workflow-form-input",value:i.publisher,onChange:e=>h("publisher",e.target.value),placeholder:"World Health Organization"}),(0,m.jsx)("div",{className:"workflow-form-help",children:"Organization responsible for publishing this IG"})]})]})]}),(0,m.jsxs)("div",{className:"workflow-form-section",children:[(0,m.jsx)("h3",{children:"Dependencies"}),(0,m.jsx)("p",{children:"FHIR Implementation Guides that this DAK depends on."}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"current-dependencies",className:"workflow-form-label",children:"Current Dependencies"}),(0,m.jsx)("div",{style:{border:"2px solid #d1d5db",borderRadius:"8px",padding:"1rem",background:"#f9fafb"},children:(0,m.jsx)("div",{id:"current-dependencies",role:"list","aria-label":"Current dependencies",children:0===i.dependencies.length?(0,m.jsx)("p",{style:{color:"#6b7280",fontStyle:"italic",margin:0},children:"No dependencies added yet"}):(0,m.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:i.dependencies.map((e,i)=>(0,m.jsxs)("div",{role:"listitem",style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"white",padding:"0.75rem 1rem",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:e.name}),(0,m.jsxs)("span",{style:{color:"#6b7280",marginLeft:"0.5rem"},children:["v",e.version]})]}),(0,m.jsx)("button",{type:"button",onClick:()=>{return i=e.name,r(e=>(0,s.A)((0,s.A)({},e),{},{dependencies:e.dependencies.filter(e=>e.name!==i)})),void(a&&a());var i},style:{background:"#ef4444",color:"white",border:"none",borderRadius:"4px",padding:"0.25rem 0.5rem",cursor:"pointer",fontSize:"0.8rem"},children:"Remove"})]},i))})})})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"add-dependencies",className:"workflow-form-label",children:"Add Dependencies"}),d?(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"workflow-form-row",children:[(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"dep-name",className:"workflow-form-label",children:"Dependency Name"}),(0,m.jsx)("input",{id:"dep-name",type:"text",className:"workflow-form-input",value:l.name,onChange:e=>c(i=>(0,s.A)((0,s.A)({},i),{},{name:e.target.value})),placeholder:"hl7.fhir.uv.example"})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"dep-version",className:"workflow-form-label",children:"Version"}),(0,m.jsx)("input",{id:"dep-version",type:"text",className:"workflow-form-input",value:l.version,onChange:e=>c(i=>(0,s.A)((0,s.A)({},i),{},{version:e.target.value})),placeholder:"1.0.0"})]})]}),(0,m.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[(0,m.jsx)("button",{type:"button",onClick:()=>u(),disabled:!l.name||!l.version,style:{background:"#0078d4",color:"white",border:"none",borderRadius:"6px",padding:"0.75rem 1rem",cursor:"pointer"},children:"Add Dependency"}),(0,m.jsx)("button",{type:"button",onClick:()=>{p(!1),c({name:"",version:""})},style:{background:"#6b7280",color:"white",border:"none",borderRadius:"6px",padding:"0.75rem 1rem",cursor:"pointer"},children:"Cancel"})]})]}):(0,m.jsxs)("div",{id:"add-dependencies",children:[(0,m.jsx)("p",{style:{marginBottom:"1rem",color:"#6b7280"},children:"Choose from common WHO and FHIR dependencies:"}),(0,m.jsx)("div",{style:{display:"grid",gap:"0.5rem",maxHeight:"300px",overflowY:"auto"},children:[{name:"smart.who.int.base",version:"dev",description:"WHO SMART Guidelines Base"},{name:"hl7.fhir.uv.extensions.r4",version:"5.1.0",description:"FHIR R4 Extensions"},{name:"hl7.fhir.uv.cql",version:"1.0.0",description:"Clinical Quality Language"},{name:"hl7.fhir.uv.crmi",version:"1.0.0",description:"Canonical Resource Management Infrastructure"},{name:"hl7.fhir.uv.sdc",version:"3.0.0",description:"Structured Data Capture"},{name:"hl7.fhir.uv.cpg",version:"current",description:"Clinical Practice Guidelines"},{name:"hl7.fhir.us.cqfmeasures",version:"5.0.0",description:"Clinical Quality Framework Measures"},{name:"fhir.cqf.common",version:"4.0.1",description:"Clinical Quality Framework Common"},{name:"hl7.fhir.uv.ips",version:"1.1.0",description:"International Patient Summary"},{name:"hl7.fhir.uv.smart-app-launch",version:"2.1.0",description:"SMART App Launch"}].filter(e=>!i.dependencies.find(i=>i.name===e.name)).map(e=>(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"white",padding:"0.75rem 1rem",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:(0,m.jsx)("strong",{children:e.name})}),(0,m.jsxs)("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[e.description," (v",e.version,")"]})]}),(0,m.jsx)("button",{type:"button",onClick:()=>u(e),style:{background:"#0078d4",color:"white",border:"none",borderRadius:"4px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.85rem"},children:"Add"})]},e.name))}),(0,m.jsx)("button",{type:"button",onClick:()=>p(!0),style:{marginTop:"1rem",background:"#6b7280",color:"white",border:"none",borderRadius:"6px",padding:"0.75rem 1rem",cursor:"pointer"},children:"Add Custom Dependency"})]})]})]}),(0,m.jsxs)("div",{className:"workflow-form-section",children:[(0,m.jsx)("h3",{children:"Pages Configuration"}),(0,m.jsx)("p",{children:"Enable or disable pages that will be included in your Implementation Guide."}),(0,m.jsx)("div",{className:"workflow-form-group",children:(0,m.jsx)("div",{style:{display:"grid",gap:"0.75rem"},children:Object.entries(i.pages).map(e=>{let[i,n]=e;return(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"white",padding:"1rem",borderRadius:"8px",border:"2px solid #d1d5db"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{fontWeight:"600"},children:n.title}),(0,m.jsx)("div",{style:{fontSize:"0.85rem",color:"#6b7280"},children:i})]}),(0,m.jsxs)("div",{className:"workflow-checkbox-group",children:[(0,m.jsx)("input",{type:"checkbox",className:"workflow-checkbox",checked:n.enabled,onChange:e=>((e,i)=>{r(r=>(0,s.A)((0,s.A)({},r),{},{pages:(0,s.A)((0,s.A)({},r.pages),{},{[e]:(0,s.A)((0,s.A)({},r.pages[e]),{},{enabled:i})})})),a&&a()})(i,e.target.checked),id:"page-".concat(i)}),(0,m.jsx)("label",{htmlFor:"page-".concat(i),className:"workflow-checkbox-label",children:n.enabled?"Enabled":"Disabled"})]})]},i)})})})]})]})},h=e=>{let{config:i,setConfig:r,errors:n={},profile:o,onValidate:t}=e;const a=(e,i)=>{r(r=>(0,s.A)((0,s.A)({},r),{},{[e]:i})),setTimeout(()=>{t&&t()},100)},l=[{value:"fhir.base.template#current",name:"FHIR Base Template (Current)",description:"Standard FHIR IG template with latest features"},{value:"hl7.base.template#current",name:"HL7 Base Template (Current)",description:"HL7 standard template for implementation guides"},{value:"hl7.utg.template#current",name:"HL7 UTG Template (Current)",description:"Universal Terminology Governance template"},{value:"hl7.cda.template#current",name:"HL7 CDA Template (Current)",description:"Clinical Document Architecture template"},{value:"smart.base.template#current",name:"SMART Base Template (Current)",description:"WHO SMART Guidelines specific template"}];return(0,m.jsxs)("div",{className:"workflow-form",children:[(0,m.jsx)("h2",{children:"IG Configuration"}),(0,m.jsx)("p",{children:"Configure the ig.ini file that controls how your FHIR Implementation Guide is built."}),(0,m.jsxs)("div",{className:"workflow-form-section",children:[(0,m.jsx)("h3",{children:"Implementation Guide Settings"}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"ig-path",className:"workflow-form-label required",children:"IG Configuration File"}),(0,m.jsx)("input",{id:"ig-path",type:"text",className:"workflow-form-input ".concat(n.ig?"error":""),value:i.ig,onChange:e=>a("ig",e.target.value),placeholder:"sushi-config.yaml"}),n.ig&&(0,m.jsx)("div",{className:"workflow-form-error",children:n.ig}),(0,m.jsx)("div",{className:"workflow-form-help",children:'Path to the SUSHI configuration file (typically "sushi-config.yaml")'})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"ig-template",className:"workflow-form-label",children:"Template"}),(0,m.jsx)("select",{id:"ig-template",className:"workflow-form-select",value:i.template,onChange:e=>a("template",e.target.value),children:l.map(e=>(0,m.jsx)("option",{value:e.value,children:e.name},e.value))}),(0,m.jsx)("div",{className:"workflow-form-help",children:"Template used for building and styling the Implementation Guide"})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"template-details",className:"workflow-form-label",children:"Template Details"}),(0,m.jsx)("div",{id:"template-details",style:{background:"#f9fafb",border:"2px solid #d1d5db",borderRadius:"8px",padding:"1rem"},children:(()=>{const e=l.find(e=>e.value===i.template);return e?(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:"#374151"},children:e.name}),(0,m.jsx)("p",{style:{margin:0,color:"#6b7280",fontSize:"0.95rem"},children:e.description})]}):(0,m.jsx)("p",{style:{margin:0,color:"#6b7280",fontStyle:"italic"},children:"Custom template configuration"})})()})]})]}),(0,m.jsxs)("div",{className:"workflow-form-section",children:[(0,m.jsx)("h3",{children:"About ig.ini"}),(0,m.jsxs)("div",{style:{background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"8px",padding:"1rem",color:"#1e40af"},children:[(0,m.jsx)("h4",{style:{margin:"0 0 0.5rem 0"},children:"\ud83d\udccb What is ig.ini?"}),(0,m.jsx)("p",{style:{margin:"0 0 1rem 0",lineHeight:"1.5"},children:"The ig.ini file is a configuration file used by the FHIR IG Publisher to build your Implementation Guide. It tells the publisher where to find your SUSHI configuration and which template to use for styling and layout."}),(0,m.jsx)("h4",{style:{margin:"1rem 0 0.5rem 0"},children:"\ud83d\udd27 How it works:"}),(0,m.jsxs)("ul",{style:{margin:0,paddingLeft:"1.5rem",lineHeight:"1.5"},children:[(0,m.jsx)("li",{children:"The IG Publisher reads ig.ini to understand your project structure"}),(0,m.jsx)("li",{children:"It processes your sushi-config.yaml to generate FHIR resources"}),(0,m.jsx)("li",{children:"It applies the selected template to create the final HTML output"}),(0,m.jsx)("li",{children:"The result is a complete, navigable Implementation Guide website"})]})]})]}),(0,m.jsxs)("div",{className:"workflow-form-section",children:[(0,m.jsx)("h3",{children:"Generated Content Preview"}),(0,m.jsxs)("div",{style:{background:"#1f2937",color:"#f9fafb",padding:"1rem",borderRadius:"8px",fontFamily:"monospace",fontSize:"0.9rem",lineHeight:"1.5"},children:[(0,m.jsx)("div",{style:{color:"#60a5fa",marginBottom:"0.5rem"},children:"# ig.ini"}),(0,m.jsx)("div",{style:{color:"#34d399"},children:"[IG]"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{style:{color:"#fbbf24"},children:"ig"})," = ",i.ig||"sushi-config.yaml"]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{style:{color:"#fbbf24"},children:"template"})," = ",i.template]})]}),(0,m.jsx)("div",{className:"workflow-form-help",style:{marginTop:"0.5rem"},children:"This is what your ig.ini file will look like with the current configuration."})]})]})},u=e=>{let{config:i,setConfig:r,errors:o={},profile:t,onValidate:a}=e;const[l,c]=(0,n.useState)(""),d=(e,i)=>{r(r=>(0,s.A)((0,s.A)({},r),{},{[e]:i})),setTimeout(()=>{a&&a()},100)},p=e=>{const n=e||l.trim();n&&!i.topics.includes(n)&&(r(e=>(0,s.A)((0,s.A)({},e),{},{topics:[...e.topics,n]})),c(""),a&&a())};return(0,m.jsxs)("div",{className:"workflow-form",children:[(0,m.jsx)("h2",{children:"Repository Configuration"}),(0,m.jsx)("p",{children:"Configure the basic settings for your new GitHub repository."}),(0,m.jsxs)("div",{className:"workflow-form-section",children:[(0,m.jsx)("h3",{children:"Repository Details"}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"repo-name",className:"workflow-form-label required",children:"Repository Name"}),(0,m.jsx)("input",{id:"repo-name",type:"text",className:"workflow-form-input ".concat(o.name?"error":""),value:i.name,onChange:e=>d("name",e.target.value),placeholder:"my-dak-repository"}),o.name&&(0,m.jsx)("div",{className:"workflow-form-error",children:o.name}),(0,m.jsxs)("div",{className:"workflow-form-help",children:["Lowercase with hyphens only. This will be used in the GitHub URL:",(0,m.jsxs)("strong",{children:[" github.com/",null===t||void 0===t?void 0:t.login,"/",i.name||"repository-name"]})]})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"repo-description",className:"workflow-form-label required",children:"Description"}),(0,m.jsx)("textarea",{id:"repo-description",className:"workflow-form-textarea ".concat(o.description?"error":""),value:i.description,onChange:e=>d("description",e.target.value),placeholder:"Digital Adaptation Kit for maternal health guidelines...",rows:3}),o.description&&(0,m.jsx)("div",{className:"workflow-form-error",children:o.description}),(0,m.jsx)("div",{className:"workflow-form-help",children:"A brief description of your DAK's purpose and scope. This will appear on GitHub and in search results."})]}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsxs)("div",{className:"workflow-checkbox-group",children:[(0,m.jsx)("input",{id:"repo-private",type:"checkbox",className:"workflow-checkbox",checked:i.private,onChange:e=>d("private",e.target.checked)}),(0,m.jsx)("label",{htmlFor:"repo-private",className:"workflow-checkbox-label",children:"Make repository private"})]}),(0,m.jsx)("div",{className:"workflow-form-help",children:"Private repositories are only visible to you and people you share them with. WHO SMART Guidelines are typically public to encourage collaboration."})]})]}),(0,m.jsxs)("div",{className:"workflow-form-section",children:[(0,m.jsx)("h3",{children:"Repository Topics"}),(0,m.jsx)("p",{children:"Topics help others discover your repository and understand its purpose."}),(0,m.jsxs)("div",{className:"workflow-form-group",children:[(0,m.jsx)("label",{htmlFor:"current-topics",className:"workflow-form-label",children:"Current Topics"}),(0,m.jsxs)("div",{className:"topics-container",children:[(0,m.jsxs)("div",{id:"current-topics",className:"current-topics",children:[i.topics.map(e=>(0,m.jsxs)("span",{className:"topic-tag",children:[e,(0,m.jsx)("button",{type:"button",onClick:()=>(e=>{r(i=>(0,s.A)((0,s.A)({},i),{},{topics:i.topics.filter(i=>i!==e)})),a&&a()})(e),className:"topic-remove","aria-label":"Remove ".concat(e," topic"),children:"\xd7"})]},e)),0===i.topics.length&&(0,m.jsx)("span",{style:{color:"#6b7280",fontStyle:"italic"},children:"No topics added yet"})]}),(0,m.jsxs)("div",{className:"workflow-form-group",style:{marginBottom:0},children:[(0,m.jsx)("label",{htmlFor:"new-topic",className:"workflow-form-label",children:"Add Custom Topic"}),(0,m.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,m.jsx)("input",{id:"new-topic",type:"text",className:"workflow-form-input",value:l,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),p())},placeholder:"custom-topic",style:{flex:1}}),(0,m.jsx)("button",{type:"button",onClick:()=>p(),disabled:!l.trim(),style:{padding:"0.75rem 1rem",background:"#0078d4",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},children:"Add"})]})]}),(0,m.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,m.jsx)("label",{htmlFor:"suggested-topics",className:"workflow-form-label",children:"Suggested Topics"}),(0,m.jsx)("div",{id:"suggested-topics",className:"topic-suggestions",children:["maternal-health","immunization","anc","family-planning","clinical-guidelines","healthcare","digital-health","who-guidelines","pediatrics","mental-health","tuberculosis","hiv","malaria","nutrition"].filter(e=>!i.topics.includes(e)).map(e=>(0,m.jsxs)("button",{type:"button",onClick:()=>p(e),className:"topic-suggestion",children:["+ ",e]},e))})]})]})]})]})]})},f=()=>{var e;const{t:i}=(0,t.Bd)(),r=(0,o.zy)(),f=(0,o.Zp)(),{profile:g}=(0,a.HX)(),{user:w}=(0,o.g)(),[x,v]=(0,n.useState)("repository"),[b,j]=(0,n.useState)(new Set),[k,y]=(0,n.useState)({name:"",description:"",private:!1,topics:["who","smart-guidelines","dak","fhir"]}),[N,C]=(0,n.useState)({id:"",canonical:"",name:"",title:"",description:"",version:"0.1.0",status:"draft",publisher:"",dependencies:[{name:"smart.who.int.base",version:"dev"},{name:"hl7.fhir.uv.extensions.r4",version:"5.1.0"}],pages:{"index.md":{title:"Home",enabled:!0},"business-requirements.md":{title:"Business Requirements",enabled:!0},"data-models-and-exchange.md":{title:"Data Models and Exchange",enabled:!0},"deployment.md":{title:"Deployment",enabled:!0},"indices.md":{title:"Indices",enabled:!0}}}),[A,S]=(0,n.useState)({ig:"",template:"fhir.base.template#current"}),[I,R]=(0,n.useState)({}),[F,T]=(0,n.useState)(!1),[D,H]=(0,n.useState)(!1),G=g||(null===(e=r.state)||void 0===e?void 0:e.profile),q=[{id:"repository",title:"Repository Settings",description:"Configure repository name and basic settings",required:!0,component:u,config:k,setConfig:y,validate:function(e){const i={};!e.name||e.name.length<3?i.name="Repository name must be at least 3 characters":/^[a-z0-9][a-z0-9-]*[a-z0-9]$/.test(e.name)||(i.name="Repository name must be lowercase with hyphens only");(!e.description||e.description.length<10)&&(i.description="Description must be at least 10 characters");return{isValid:0===Object.keys(i).length,errors:i}}},{id:"sushi",title:"SUSHI Configuration",description:"Set up sushi-config.yaml with DAK metadata",required:!0,component:p,config:N,setConfig:C,validate:function(e){const i={};(!e.id||e.id.length<3)&&(i.id="ID is required and must be at least 3 characters");e.canonical||(i.canonical="Canonical URL is required");(!e.name||e.name.length<3)&&(i.name="Name is required and must be at least 3 characters");(!e.title||e.title.length<5)&&(i.title="Title is required and must be at least 5 characters");(!e.description||e.description.length<20)&&(i.description="Description is required and must be at least 20 characters");return{isValid:0===Object.keys(i).length,errors:i}}},{id:"ig-ini",title:"IG Configuration",description:"Configure ig.ini for FHIR implementation guide",required:!1,component:h,config:A,setConfig:S,validate:function(e){const i={};e.ig||(i.ig="IG path is required");return{isValid:0===Object.keys(i).length,errors:i}}}];(0,n.useEffect)(()=>{if(k.name&&G){if(!N.id||""===N.id||N.id.endsWith(k.name.replace(/-/g,"."))){const e="".concat(G.login,".").concat(k.name.replace(/-/g,"."));C(i=>(0,s.A)((0,s.A)({},i),{},{id:e}))}if(!N.canonical||""===N.canonical){const e="http://smart.who.int/".concat(k.name);C(i=>(0,s.A)((0,s.A)({},i),{},{canonical:e}))}if(!N.name||""===N.name){const e=k.name.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join("");C(i=>(0,s.A)((0,s.A)({},i),{},{name:e}))}A.ig&&""!==A.ig||S(e=>(0,s.A)((0,s.A)({},e),{},{ig:"sushi-config.yaml"}))}},[k.name,G]);const E=(0,n.useCallback)(e=>{const i=q.find(i=>i.id===e);if(!i)return!1;const r=i.validate(i.config).isValid;return j(i=>{const s=new Set(i);return r?s.add(e):s.delete(e),s}),r},[q]);(0,n.useEffect)(()=>{q.forEach(e=>E(e.id))},[k,N,A,E]);const O=async()=>{const e=L();d.A.addFile({path:"sushi-config.yaml",content:e,type:"configuration"});const i=_();d.A.addFile({path:"ig.ini",content:i,type:"configuration"});const r=M();d.A.addFile({path:"README.md",content:r,type:"documentation"})},L=()=>{const e={id:N.id,canonical:N.canonical,name:N.name,title:N.title,description:N.description,status:N.status,version:N.version,fhirVersion:"4.0.1",copyrightYear:"".concat((new Date).getFullYear(),"+"),releaseLabel:"ci-build",license:"CC0-1.0",date:(new Date).toISOString().split("T")[0],publisher:{name:N.publisher||G.name||G.login,url:G.html_url||"https://github.com/".concat(G.login)},meta:{profile:["SMARTImplementationGuide"]},pages:Object.fromEntries(Object.entries(N.pages).filter(e=>{let[i,r]=e;return r.enabled}).map(e=>{let[i,r]=e;return[i,{title:r.title}]})),dependencies:Object.fromEntries(N.dependencies.map(e=>[e.name,e.version]))};return"# SUSHI Configuration for ".concat(N.title,"\n# Generated by SGEX DAK Workflow\n\n").concat(Object.entries(e).map(e=>{let[i,r]=e;return"object"===typeof r&&null!==r?"".concat(i,":\n").concat(U(r,2)):"".concat(i,": ").concat("string"===typeof r?'"'.concat(r,'"'):r)}).join("\n"),"\n")},U=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=" ".repeat(i);return Object.entries(e).map(e=>{let[s,n]=e;return"object"===typeof n&&null!==n?"".concat(r).concat(s,":\n").concat(U(n,i+2)):"".concat(r).concat(s,": ").concat("string"===typeof n?'"'.concat(n,'"'):n)}).join("\n")},_=()=>"[IG]\nig = ".concat(A.ig,"\ntemplate = ").concat(A.template,"\n"),M=()=>"# ".concat(N.title,"\n\n").concat(N.description,"\n\nThis Digital Adaptation Kit (DAK) was created using the SGEX Workbench.\n\n## Development\n\nThis implementation guide uses [SUSHI](https://fshschool.org/sushi/) for building the FHIR implementation guide.\n\n### Prerequisites\n\n- Node.js and npm\n- SUSHI\n- Jekyll (for local preview)\n\n### Building\n\n```bash\nnpm install\nsushi build\n```\n\n## License\n\nThis work is licensed under [CC0 1.0 Universal](LICENSE).\n"),K=async()=>{const e={name:k.name,description:k.description,private:k.private,topics:k.topics,has_issues:!0,has_projects:!0,has_wiki:!1,allow_squash_merge:!0,allow_merge_commit:!1,allow_rebase_merge:!1,delete_branch_on_merge:!0};await c.A.createRepository(e);const i=d.A.getStagingGround().files;i.length>0&&await c.A.commitFiles(G.login,k.name,"main",i,"Initial DAK setup created by SGEX Workbench")},z=q.filter(e=>e.required).every(e=>b.has(e.id)),P=q.find(e=>e.id===x),W=null===P||void 0===P?void 0:P.component;return(0,m.jsxs)("div",{className:"dak-workflow",children:[(0,m.jsxs)("div",{className:"workflow-header",children:[(0,m.jsx)("h1",{children:"Create New DAK"}),(0,m.jsx)("p",{children:"Set up a new Digital Adaptation Kit repository with required configuration files."}),G&&(0,m.jsxs)("div",{className:"workflow-profile",children:[(0,m.jsx)("img",{src:G.avatar_url,alt:G.login,className:"profile-avatar"}),(0,m.jsxs)("span",{children:["Creating under: ",(0,m.jsxs)("strong",{children:["@",G.login]})]})]})]}),(0,m.jsxs)("div",{className:"workflow-content",children:[(0,m.jsxs)("div",{className:"workflow-sidebar",children:[(0,m.jsx)("h3",{children:"Configuration Files"}),(0,m.jsx)("div",{className:"workflow-steps",children:q.map(e=>(0,m.jsxs)("div",{className:"workflow-step ".concat(x===e.id?"active":""," ").concat(b.has(e.id)?"completed":""," ").concat(e.required?"required":"optional"),onClick:()=>{return i=e.id,v(i),void H(!1);var i},children:[(0,m.jsx)("div",{className:"step-icon",children:b.has(e.id)?"\u2713":e.required?"*":"\u25cb"}),(0,m.jsxs)("div",{className:"step-content",children:[(0,m.jsx)("div",{className:"step-title",children:e.title}),(0,m.jsx)("div",{className:"step-description",children:e.description}),I[e.id]&&(0,m.jsx)("div",{className:"step-errors",children:Object.values(I[e.id]).slice(0,1).map((e,i)=>(0,m.jsx)("span",{className:"step-error",children:e},i))})]})]},e.id))}),(0,m.jsxs)("div",{className:"workflow-actions",children:[(0,m.jsx)("button",{className:"create-repository-btn",onClick:async()=>{T(!0),H(!0);try{let e=!0;const i={};if(q.forEach(r=>{const s=r.validate(r.config);s.isValid||(e=!1,i[r.id]=s.errors)}),!e)return R(i),void T(!1);R({});const r={name:k.name,owner:G};d.A.initialize(r,"main"),await O(),await K(),f("/dashboard/".concat(G.login,"/").concat(k.name,"/main"),{state:{profile:G,repository:{name:k.name,full_name:"".concat(G.login,"/").concat(k.name),description:k.description,owner:G,private:k.private,topics:k.topics},isNewRepository:!0}})}catch(e){console.error("Error creating DAK repository:",e),alert("Failed to create repository: "+e.message)}finally{T(!1)}},disabled:!z||F,children:F?"Creating Repository...":"Create DAK Repository"}),!z&&(0,m.jsx)("p",{className:"validation-note",children:"Please complete all required steps marked with *"})]})]}),(0,m.jsx)("div",{className:"workflow-main",children:W&&(0,m.jsx)(W,{config:P.config,setConfig:P.setConfig,errors:D?I[x]:{},profile:G,onValidate:()=>E(x)})})]}),(0,m.jsx)(l.A,{pageName:"dak-workflow",notificationBadge:!z})]})},g=()=>(0,m.jsx)(a.Mx,{pageName:"dak-workflow",children:(0,m.jsx)(f,{})})}}]);