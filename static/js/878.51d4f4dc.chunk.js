"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[878],{79878:(e,n,t)=>{t.r(n),t.d(n,{default:()=>u});var a=t(65043),i=t(73537),s=t(37840),o=t(50404),r=t(64292),l=t(78362),c=t(70579);const d=e=>{let{file:n,repository:t,selectedBranch:i,isOpen:o,onClose:d,onSave:h,initialContent:u="",isDemo:m=!1}=e;const[p,g]=(0,a.useState)(u),[f,v]=(0,a.useState)(!1),[x,w]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null),[y,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{const[e,n]=await Promise.all([(0,s.ph)(),(0,s.Vq)()]);j(()=>e),N(n)}catch(e){console.error("Failed to load syntax highlighter:",e)}})()},[]),(0,a.useEffect)(()=>{if(g(u),n&&n.path){const e=l.A.getLocalContent(n.path);e&&e!==u&&w(!0)}},[u,n]);const k=()=>{try{const e=l.A.exportLocalChanges("json"),n=URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="sgex-feature-files-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)}catch(e){console.error("Error exporting local changes:",e)}};if(!o||!n)return null;const I=p!==u;return(0,c.jsx)("div",{className:"feature-editor-overlay",onClick:d,children:(0,c.jsx)("div",{className:"feature-editor-modal",onClick:e=>e.stopPropagation(),children:f?(0,c.jsxs)(r.ox,{pageName:"feature-file-editor",file:n,repository:t,branch:i,content:p,originalContent:u,hasChanges:I,isDemo:m,onSave:(e,n)=>{console.log("Feature file saved to ".concat(n)),h&&h(e),"local"===n?setTimeout(()=>{v(!1)},2e3):"github"===n&&setTimeout(()=>{v(!1)},1e3)},showHeader:!1,showMascot:!1,saveButtonsPosition:"top",children:[(0,c.jsxs)("div",{className:"feature-editor-header",children:[(0,c.jsxs)("div",{className:"editor-title",children:[(0,c.jsx)("h3",{children:n.name}),(0,c.jsx)("span",{className:"file-path",children:n.path})]}),(0,c.jsxs)("div",{className:"editor-actions",children:[(0,c.jsx)("button",{className:"btn btn-secondary",onClick:()=>{p!==u&&!window.confirm("You have unsaved changes. Are you sure you want to cancel?")||(g(u),v(!1))},children:"Cancel"}),l.A.hasLocalChanges()&&(0,c.jsx)("button",{className:"btn btn-info",onClick:k,title:"Export all local changes",children:"Export All"})]})]}),(0,c.jsx)("div",{className:"feature-editor-content",children:(0,c.jsxs)("div",{className:"editor-container",children:[(0,c.jsx)("textarea",{className:"feature-editor-textarea",value:p,onChange:e=>{const n=e.target.value;g(n)},placeholder:"Enter your Gherkin feature content here...",spellCheck:!1}),(0,c.jsxs)("div",{className:"editor-preview",children:[(0,c.jsx)("h4",{children:"Preview:"}),b&&y?(0,c.jsx)(b,{language:"gherkin",style:y,customStyle:{margin:0,borderRadius:"4px",fontSize:"14px",lineHeight:"1.5"},children:p||"# Feature content will appear here..."}):(0,c.jsx)("div",{className:"syntax-highlighter-loading",children:(0,c.jsx)("pre",{style:{margin:0,padding:"8px",background:"#f8f9fa",borderRadius:"4px"},children:p||"# Feature content will appear here..."})})]})]})}),!m&&(0,c.jsxs)("div",{className:"local-storage-notice",children:[(0,c.jsx)("span",{className:"info-icon",children:"\ud83d\udcbe"}),"Local Mode: Changes will be saved to your browser's local storage.",x&&" Local version available.",(0,c.jsx)("button",{className:"btn-link",onClick:k,disabled:!l.A.hasLocalChanges(),children:"Export changes"}),x&&(0,c.jsx)("button",{className:"btn-link danger",onClick:()=>{n&&n.path&&window.confirm("This will permanently delete the local version. Continue?")&&(l.A.removeLocal(n.path),w(!1),p!==u&&g(u))},children:"Discard local"})]}),m&&(0,c.jsxs)("div",{className:"demo-notice",children:[(0,c.jsx)("span",{className:"info-icon",children:"\ud83e\uddea"}),'Demo Mode: Changes are saved locally for demonstration. Use "Save Local" to save changes to your browser\'s storage.']}),(0,c.jsxs)("div",{className:"feature-editor-footer",children:[(0,c.jsxs)("div",{className:"editor-info",children:[(0,c.jsx)("span",{children:"Gherkin Feature File"}),I&&(0,c.jsx)("span",{className:"changes-indicator",children:"\u2022 Unsaved changes"}),x&&(0,c.jsx)("span",{className:"local-indicator",children:"\u2022 Local version available"})]}),(0,c.jsx)("div",{className:"editor-links",children:(0,c.jsx)("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-link",children:"View on GitHub"})})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"feature-editor-header",children:[(0,c.jsxs)("div",{className:"editor-title",children:[(0,c.jsx)("h3",{children:n.name}),(0,c.jsx)("span",{className:"file-path",children:n.path})]}),(0,c.jsxs)("div",{className:"editor-actions",children:[(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>v(!0),children:"Edit"}),x&&(0,c.jsx)("button",{className:"btn btn-info",onClick:()=>{if(n&&n.path){const e=l.A.getLocalContent(n.path);if(e){if(p!==u&&!window.confirm("Loading local version will discard current changes. Continue?"))return;g(e),w(!0)}}},title:"Load local version",children:"Load Local"}),(0,c.jsx)("button",{className:"btn btn-secondary",onClick:d,children:"Close"})]})]}),(0,c.jsx)("div",{className:"feature-editor-content",children:(0,c.jsx)("div",{className:"feature-viewer",children:b&&y?(0,c.jsx)(b,{language:"gherkin",style:y,customStyle:{margin:0,borderRadius:"4px",fontSize:"14px",lineHeight:"1.5",minHeight:"400px"},children:p}):(0,c.jsx)("div",{className:"syntax-highlighter-loading",children:(0,c.jsx)("pre",{style:{margin:0,padding:"8px",background:"#f8f9fa",borderRadius:"4px",minHeight:"400px"},children:p})})})}),(0,c.jsxs)("div",{className:"feature-editor-footer",children:[(0,c.jsxs)("div",{className:"editor-info",children:[(0,c.jsx)("span",{children:"Gherkin Feature File"}),x&&(0,c.jsx)("span",{className:"local-indicator",children:"\u2022 Local version available"})]}),(0,c.jsx)("div",{className:"editor-links",children:(0,c.jsx)("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-link",children:"View on GitHub"})})]})]})})})},h=[{name:"ViewIPSContent.feature",path:"input/testing/ViewIPSContent.feature",url:"https://github.com/demo-user/anc-dak/blob/main/input/testing/ViewIPSContent.feature",download_url:"https://raw.githubusercontent.com/demo-user/anc-dak/main/input/testing/ViewIPSContent.feature",content:'Feature: View IPS Content\n  As a healthcare provider\n  I want to view International Patient Summary (IPS) content\n  So that I can review standardized patient information\n\n  Background:\n    Given the system has IPS data available\n    And the user has appropriate permissions\n\n  Scenario: View basic IPS information\n    Given I am logged into the system\n    When I navigate to the IPS viewer\n    Then I should see the patient summary header\n    And I should see basic patient demographics\n    And I should see medical history section\n\n  Scenario: View IPS medications\n    Given I am viewing an IPS document\n    When I scroll to the medications section\n    Then I should see a list of current medications\n    And each medication should display name, dosage, and frequency\n    And medications should be sorted by importance\n\n  Scenario: Export IPS content\n    Given I am viewing an IPS document\n    When I click the export button\n    Then I should be able to download the IPS as PDF\n    And the PDF should contain all visible sections\n    And the formatting should be preserved\n\n  Scenario: Handle missing IPS data\n    Given the patient has no IPS document\n    When I attempt to view their IPS\n    Then I should see a "No IPS available" message\n    And I should see options to create a new IPS\n    And the system should suggest relevant data sources'},{name:"PatientRegistration.feature",path:"input/testing/PatientRegistration.feature",url:"https://github.com/demo-user/anc-dak/blob/main/input/testing/PatientRegistration.feature",download_url:"https://raw.githubusercontent.com/demo-user/anc-dak/main/input/testing/PatientRegistration.feature",content:'Feature: Patient Registration\n  As a healthcare worker\n  I want to register new patients in the system\n  So that I can track their care journey\n\n  Background:\n    Given I am logged into the healthcare system\n    And I have patient registration permissions\n\n  Scenario: Register a new patient with complete information\n    Given I am on the patient registration page\n    When I enter the patient\'s full name "Sarah Johnson"\n    And I enter the date of birth "1990-05-15"\n    And I enter the contact phone "555-0123"\n    And I select the preferred language "English"\n    And I click the "Register Patient" button\n    Then the patient should be successfully registered\n    And I should see a confirmation message\n    And the patient should receive a unique identifier\n\n  Scenario: Register patient with minimal required information\n    Given I am on the patient registration page\n    When I enter only the required fields\n    And I click "Register Patient"\n    Then the system should accept the registration\n    And prompt me to complete the profile later\n\n  Scenario: Handle duplicate patient registration\n    Given a patient with phone "555-0123" already exists\n    When I try to register another patient with the same phone\n    Then the system should show a duplicate warning\n    And offer to link to the existing patient record\n    And allow me to verify this is the same person'},{name:"AntenatalCareWorkflow.feature",path:"input/testing/AntenatalCareWorkflow.feature",url:"https://github.com/demo-user/anc-dak/blob/main/input/testing/AntenatalCareWorkflow.feature",download_url:"https://raw.githubusercontent.com/demo-user/anc-dak/main/input/testing/AntenatalCareWorkflow.feature",content:"Feature: Antenatal Care Workflow\n  As a midwife\n  I want to follow standardized antenatal care protocols\n  So that I can provide consistent quality care to pregnant women\n\n  Background:\n    Given I am a certified midwife logged into the system\n    And the WHO antenatal care guidelines are loaded\n\n  Scenario: First antenatal visit workflow\n    Given a pregnant woman is attending her first ANC visit\n    When I start the first visit assessment\n    Then I should see prompts for initial health history\n    And I should see required vital signs checklist\n    And I should see screening test recommendations\n    And the system should calculate gestational age\n    And I should see next appointment scheduling options\n\n  Scenario: Follow-up visit risk assessment\n    Given a patient is attending a follow-up ANC visit\n    And her previous visit data is available\n    When I review her current condition\n    Then the system should highlight any risk factors\n    And suggest appropriate interventions\n    And update the care plan automatically\n    And schedule appropriate follow-up intervals\n\n  Scenario: High-risk pregnancy detection\n    Given I am conducting an ANC assessment\n    When the patient shows signs of complications\n    Then the system should trigger risk alerts\n    And recommend immediate specialist referral\n    And provide emergency contact information\n    And document the escalation in patient records\n\n  Scenario: Generate antenatal care summary\n    Given a patient has completed multiple ANC visits\n    When I request a care summary report\n    Then I should see a timeline of all visits\n    And all test results and measurements\n    And current risk status and recommendations\n    And the report should be suitable for referrals"}],u=()=>{const e=(0,i.Zp)(),{profile:n,repository:t,branch:l}=(0,r.oc)(),[u,m]=(0,a.useState)([]),[p,g]=(0,a.useState)(!0),[f,v]=(0,a.useState)(null),[x,w]=(0,a.useState)(null),[b,j]=(0,a.useState)(""),[y,N]=(0,a.useState)(!1),[k,I]=(0,a.useState)(!1),[S,A]=(0,a.useState)(null),[C,P]=(0,a.useState)(""),[_,F]=(0,a.useState)(null),[G,W]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{const[e,n]=await Promise.all([(0,s.ph)(),(0,s.Vq)()]);F(()=>e),W(n)}catch(f){console.error("Failed to load syntax highlighter:",f)}})()},[]),(0,a.useEffect)(()=>{(async()=>{if(!t)return v("Missing repository information"),void g(!1);try{var e;g(!0),v(null);if(t.isDemo||t.owner&&"demo-user"===t.owner.login||t.full_name&&t.full_name.startsWith("demo-user/"))return console.log("Demo mode detected, using demo feature files"),void setTimeout(()=>{m(h.map(e=>({name:e.name,path:e.path,url:e.url,download_url:e.download_url}))),g(!1)},1e3);let n,a;null!==(e=t.owner)&&void 0!==e&&e.login?(n=t.owner.login,a=t.name):t.full_name?[n,a]=t.full_name.split("/"):"string"===typeof t?[n,a]=t.split("/"):(n=t.owner||"demo-user",a=t.name||t.repo||"unknown"),console.log("Fetching feature files for:",{owner:n,repoName:a,repository:t});const i=(await o.A.getDirectoryContents(n,a,"input/testing",l||t.default_branch||"main")).filter(e=>"file"===e.type&&e.name.endsWith(".feature")).map(e=>({name:e.name,path:e.path,url:e.html_url,download_url:e.download_url}));m(i)}catch(n){console.error("Error fetching feature files:",n),n.message.includes("Not Found")?v("No input/testing directory found in this repository"):v("Error loading feature files: ".concat(n.message))}finally{g(!1)}})()},[n,t,l]);return(0,c.jsx)(r.Mx,{pageName:"testing-viewer",children:(0,c.jsxs)("div",{className:"testing-viewer",children:[(0,c.jsxs)("div",{className:"testing-header",children:[(0,c.jsx)("button",{onClick:()=>{e("/dashboard/".concat(null===n||void 0===n?void 0:n.login,"/").concat(null===t||void 0===t?void 0:t.name).concat(l&&"main"!==l?"/".concat(l):""))},className:"back-button",children:"\u2190 Back to Dashboard"}),(0,c.jsx)("h1",{children:"Testing Files"}),(0,c.jsx)("p",{className:"testing-description",children:"Feature files from the input/testing directory"})]}),p&&(0,c.jsxs)("div",{className:"loading-container",children:[(0,c.jsx)("div",{className:"loading-spinner"}),(0,c.jsx)("p",{children:"Loading feature files..."})]}),f&&(0,c.jsx)("div",{className:"error-container",children:(0,c.jsxs)("div",{className:"error-message",children:[(0,c.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),f]})}),!p&&!f&&0===u.length&&(0,c.jsxs)("div",{className:"empty-state",children:[(0,c.jsx)("div",{className:"empty-icon",children:"\ud83d\udcc2"}),(0,c.jsx)("h3",{children:"No Feature Files Found"}),(0,c.jsx)("p",{children:"No .feature files were found in the input/testing directory."})]}),!p&&!f&&u.length>0&&(0,c.jsx)("div",{className:"feature-files-grid",children:u.map((e,n)=>(0,c.jsxs)("div",{className:"feature-file-card",children:[(0,c.jsx)("div",{className:"file-icon",children:"\ud83e\uddea"}),(0,c.jsxs)("div",{className:"file-info",children:[(0,c.jsx)("h3",{className:"file-name",children:e.name}),(0,c.jsx)("p",{className:"file-path",children:e.path})]}),(0,c.jsxs)("div",{className:"file-actions",children:[(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>(async e=>{try{if(g(!0),t.isDemo||t.owner&&"demo-user"===t.owner.login||t.full_name&&t.full_name.startsWith("demo-user/")){const n=h.find(n=>n.name===e.name);return void(n?setTimeout(()=>{w(e),j(n.content),N(!0),g(!1)},500):(v("Demo content not found for file: ".concat(e.name)),g(!1)))}const n=await fetch(e.download_url),a=await n.text();w(e),j(a),N(!0)}catch(n){console.error("Error loading file content:",n),v("Error loading file: ".concat(n.message))}finally{g(!1)}})(e),children:"View"}),(0,c.jsx)("button",{className:"btn btn-success",onClick:()=>(async e=>{try{if(g(!0),t.isDemo||t.owner&&"demo-user"===t.owner.login||t.full_name&&t.full_name.startsWith("demo-user/")){const n=h.find(n=>n.name===e.name);return void(n?setTimeout(()=>{A(e),P(n.content),I(!0),g(!1)},500):(v("Demo content not found for file: ".concat(e.name)),g(!1)))}const n=await fetch(e.download_url),a=await n.text();A(e),P(a),I(!0)}catch(n){console.error("Error loading file content for editing:",n),v("Error loading file: ".concat(n.message))}finally{g(!1)}})(e),children:"Edit"}),(0,c.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-secondary",children:"GitHub"})]})]},n))}),y&&x?(0,c.jsx)("div",{className:"testing-modal-overlay",onClick:()=>N(!1),children:(0,c.jsxs)("div",{className:"testing-modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"testing-modal-header",children:[(0,c.jsx)("h3",{children:x.name}),(0,c.jsx)("button",{className:"testing-modal-close",onClick:()=>N(!1),children:"\xd7"})]}),(0,c.jsx)("div",{className:"testing-modal-content",children:_&&G?(0,c.jsx)(_,{language:"gherkin",style:G,customStyle:{margin:0,borderRadius:"4px",fontSize:"14px",lineHeight:"1.5",minHeight:"400px"},children:b}):(0,c.jsx)("div",{className:"syntax-highlighter-loading",children:(0,c.jsx)("pre",{style:{margin:0,padding:"8px",background:"#f8f9fa",borderRadius:"4px",minHeight:"400px",fontSize:"14px",lineHeight:"1.5"},children:b})})}),(0,c.jsxs)("div",{className:"testing-modal-footer",children:[(0,c.jsx)("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-secondary",children:"View on GitHub"}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>N(!1),children:"Close"})]})]})}):null,(0,c.jsx)(d,{file:S,repository:t,selectedBranch:l,isOpen:k,onClose:()=>I(!1),onSave:e=>{P(e),console.log("File saved successfully")},initialContent:C,isDemo:t.isDemo||t.owner&&"demo-user"===t.owner.login||t.full_name&&t.full_name.startsWith("demo-user/")})]})})}}}]);
//# sourceMappingURL=878.51d4f4dc.chunk.js.map