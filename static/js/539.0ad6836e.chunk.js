"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[539],{24907:(e,s,a)=>{a.d(s,{A:()=>l});var t=a(65043),n=a(74117),r=a(19794),i=a(6735),c=a(70579);const l=e=>{let{onClose:s}=e;const{t:a}=(0,n.Bd)(),[l,o]=(0,t.useState)(0),d=(0,r.A)("collaboration.png"),h=(0,r.A)("pronunciation-guide.png"),m=[{title:"Our Mission",content:(0,c.jsxs)("div",{className:"slide-content",children:[(0,c.jsx)("p",{children:"SGEX is an experimental collaborative project developing a workbench of tools to make it easier and faster to develop high fidelity SMART Guidelines Digital Adaptation Kits (DAKs)."}),(0,c.jsx)("p",{children:"Our mission is to empower healthcare organizations worldwide to create and maintain standards-compliant digital health implementations through:"}),(0,c.jsxs)("ul",{children:[(0,c.jsxs)("li",{children:[(0,c.jsx)("strong",{children:"Collaborative Development:"})," Every contribution matters, whether reporting bugs, testing features, or sharing feedback"]}),(0,c.jsxs)("li",{children:[(0,c.jsx)("strong",{children:"AI-Powered Assistance:"})," Hybrid approach combining human insight with AI coding agents for efficient development"]}),(0,c.jsxs)("li",{children:[(0,c.jsx)("strong",{children:"Community-Driven Evolution:"})," Real-time improvement through collaborative discussion and iterative refinement"]}),(0,c.jsxs)("li",{children:[(0,c.jsx)("strong",{children:"Real-World Impact:"})," Building tools that help healthcare workers worldwide deliver better patient care"]})]})]})},{title:"How to Contribute",content:(0,c.jsxs)("div",{className:"slide-content",children:[(0,c.jsx)("p",{children:"Contributing to SGEX is a collaborative journey that combines human creativity with AI assistance:"}),(0,c.jsxs)("div",{className:"contribution-steps",children:[(0,c.jsxs)("div",{className:"step",children:[(0,c.jsx)("span",{className:"step-number",children:"1"}),(0,c.jsxs)("div",{className:"step-content",children:[(0,c.jsx)("h4",{children:"\ud83d\udc1b Start with Feedback"}),(0,c.jsx)("p",{children:"Report bugs, request features, or suggest improvements through our issue tracker"})]})]}),(0,c.jsxs)("div",{className:"step",children:[(0,c.jsx)("span",{className:"step-number",children:"2"}),(0,c.jsxs)("div",{className:"step-content",children:[(0,c.jsx)("h4",{children:"\ud83e\udd16 AI-Powered Development"}),(0,c.jsx)("p",{children:"Issues may be assigned to coding agents for initial analysis and implementation"})]})]}),(0,c.jsxs)("div",{className:"step",children:[(0,c.jsx)("span",{className:"step-number",children:"3"}),(0,c.jsxs)("div",{className:"step-content",children:[(0,c.jsx)("h4",{children:"\ud83c\udf1f Community Collaboration"}),(0,c.jsx)("p",{children:"The community reviews, tests, and refines changes through collaborative discussion"})]})]}),(0,c.jsxs)("div",{className:"step",children:[(0,c.jsx)("span",{className:"step-number",children:"4"}),(0,c.jsxs)("div",{className:"step-content",children:[(0,c.jsx)("h4",{children:"\ud83d\ude80 Real-Time Evolution"}),(0,c.jsx)("p",{children:"The workbench continuously evolves based on actual usage and feedback from healthcare professionals"})]})]})]})]})},{title:"Get Started",content:(0,c.jsxs)("div",{className:"slide-content",children:[(0,c.jsx)("div",{className:"collaboration-image",children:(0,c.jsx)("img",{src:d,alt:(0,i.lm)(a,i.ld.IMAGE_COLLABORATION,"Collaboration in SGEX")})}),(0,c.jsx)("p",{children:"Every contribution helps improve digital health tools for healthcare workers worldwide. Whether you're reporting a bug, testing a feature, or sharing feedback, you're part of building the future of digital health tooling."}),(0,c.jsxs)("div",{className:"get-started-actions",children:[(0,c.jsx)("h4",{children:"Ready to contribute?"}),(0,c.jsx)("button",{className:"action-link primary",onClick:()=>{window.location.href=window.location.origin+"/sgex/"},children:"View Main Site"}),(0,c.jsx)("p",{className:"or-text",children:"or"}),(0,c.jsx)("button",{className:"action-link secondary",onClick:s,children:"Use the help mascot on any page to quickly report issues"})]})]})},{title:"How to Pronounce",content:(0,c.jsx)("div",{className:"slide-content",children:(0,c.jsx)("div",{className:"pronunciation-image",children:(0,c.jsx)("img",{src:h,alt:(0,i.lm)(a,i.ld.IMAGE_PRONUNCIATION,"How to Pronounce SGeX")})})})}];return(0,c.jsx)("div",{className:"collaboration-modal-overlay",onClick:e=>{e.target===e.currentTarget&&s()},children:(0,c.jsxs)("div",{className:"collaboration-modal",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{children:m[l].title}),(0,c.jsx)("button",{className:"close-button",onClick:s,children:"\xd7"})]}),(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsx)("div",{className:"slideshow-container",children:(0,c.jsx)("div",{className:"slide active",children:m[l].content})})}),(0,c.jsx)("div",{className:"modal-footer",children:(0,c.jsxs)("div",{className:"slide-navigation",children:[(0,c.jsx)("button",{className:"nav-button prev",onClick:()=>{o(e=>(e-1+m.length)%m.length)},disabled:0===l,children:"\u2039 Previous"}),(0,c.jsx)("div",{className:"slide-indicators",children:m.map((e,s)=>(0,c.jsx)("button",{className:"indicator ".concat(l===s?"active":""),onClick:()=>(e=>{o(e)})(s)},s))}),(0,c.jsx)("button",{className:"nav-button next",onClick:()=>{o(e=>(e+1)%m.length)},disabled:l===m.length-1,children:"Next \u203a"})]})})]})})}},39539:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var t=a(89379),n=a(65043),r=a(74117),i=a(98714),c=a(5452),l=a(70579);const o=e=>{let{onAuthSuccess:s}=e;const{t:t}=(0,r.Bd)(),[i,o]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[x,g]=(0,n.useState)(!1),p=c.A.getLogger("PATLogin");n.useEffect(()=>(p.componentMount({hasOnAuthSuccess:!!s}),()=>p.componentUnmount()),[p,s]);return(0,l.jsx)("div",{className:"pat-login",children:(0,l.jsxs)("div",{className:"pat-login-section",children:[(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),p.userAction("PAT login attempt",{tokenProvided:!!i.trim()}),!i.trim()){return u("Please enter a GitHub Personal Access Token"),void p.warn("PAT login failed - no token provided")}g(!0),u("");const t=Date.now();p.auth("Starting PAT authentication");try{const{Octokit:e}=await a.e(36).then(a.bind(a,97036)),n=new e({auth:i.trim()});p.debug("Octokit instance created for PAT validation"),p.apiCall("GET","/user",null);const r=await n.rest.users.getAuthenticated(),c=Date.now()-t;p.apiResponse("GET","/user",r.status,c),p.auth("PAT authentication successful",{username:r.data.login,duration:c}),s(i.trim(),n)}catch(n){const e=Date.now()-t;p.apiError("GET","/user",n),p.auth("PAT authentication failed",{status:n.status,message:n.message,duration:e}),console.error("PAT authentication failed:",n),401===n.status?u("Invalid Personal Access Token. Please check your token and try again."):403===n.status?u("Token doesn't have sufficient permissions. Please ensure your token has 'repo' and 'read:org' scopes."):u("Authentication failed. Please check your connection and try again.")}finally{g(!1)}},className:"pat-form",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"token-name",children:"Token Name (optional):"}),(0,l.jsx)("input",{id:"token-name",type:"text",value:d,onChange:e=>{h(e.target.value),m&&u("")},placeholder:"e.g., SGEX Access Token",className:"token-name-input",disabled:x,autoComplete:"username"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsxs)("label",{htmlFor:"pat-token",children:[t("auth.setupToken"),":"]}),(0,l.jsx)("input",{id:"pat-token",type:"password",value:i,onChange:e=>{o(e.target.value),m&&u("")},placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx",className:"token-input ".concat(m?"error":""),disabled:x,autoComplete:"current-password"})]}),(0,l.jsx)("button",{type:"submit",className:"github-login-btn",disabled:x||!i.trim(),children:x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"spinner small"}),t("common.loading"),"..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"github-icon",children:"\ud83d\udd11"}),t("auth.signInWithPAT")]})})]}),m&&(0,l.jsx)("div",{className:"error-message",children:m})]})})};var d=a(24907),h=a(50404),m=a(19794),u=a(6735);const x=()=>{const{t:e}=(0,r.Bd)(),s=h.A.isAuth(),[a,c]=(0,n.useState)([]),[x,g]=(0,n.useState)(!0),[p,j]=(0,n.useState)(null),[v,b]=(0,n.useState)(1),[N,w]=(0,n.useState)(""),[f,A]=(0,n.useState)("updated"),[k,y]=(0,n.useState)("desc"),[C,S]=(0,n.useState)({}),[_,P]=(0,n.useState)("open"),[L,E]=(0,n.useState)(!1),[D,R]=(0,n.useState)({}),[G]=(0,n.useState)(!1),[I,T]=(0,n.useState)({}),[M,O]=(0,n.useState)({}),[X,F]=(0,n.useState)({}),[B,H]=(0,n.useState)({}),[q,U]=(0,n.useState)(!1),[V,W]=(0,n.useState)(!1),K=10,Y=(0,m.A)("sgex-mascot.png"),z=(0,m.A)("collaboration.png"),Q=e=>{h.A.authenticate(e)&&E(!0)},J=()=>{E(!1),h.A.logout(),R({})},Z=()=>{W(!0)},$=async e=>{try{if(h.A.isAuth()){const s=await h.A.getPullRequestIssueComments("litlfred","sgex",e);if(0===s.length)return{count:0,lastComment:null};const a=s[s.length-1];return{count:s.length,lastComment:{author:a.user.login,created_at:new Date(a.created_at),avatar_url:a.user.avatar_url}}}try{const s=await h.A.getPullRequestIssueComments("litlfred","sgex",e);if(0===s.length)return{count:0,lastComment:null};const a=s[s.length-1];return{count:s.length,lastComment:{author:a.user.login,created_at:new Date(a.created_at),avatar_url:a.user.avatar_url}}}catch(p){return console.warn("Failed to fetch comments for PR ".concat(e,": ").concat(p.message)),{count:0,lastComment:null,error:!0}}}catch(p){return console.warn("Error fetching comment summary for PR ".concat(e,":"),p),{count:0,lastComment:null,error:!0}}},ee=async e=>{try{if(h.A.isAuth()){return(await h.A.getPullRequestIssueComments("litlfred","sgex",e)).map(e=>({id:e.id,author:e.user.login,body:e.body,created_at:new Date(e.created_at).toLocaleDateString(),created_at_raw:new Date(e.created_at),avatar_url:e.user.avatar_url})).sort((e,s)=>s.created_at_raw-e.created_at_raw)}try{return(await h.A.getPullRequestIssueComments("litlfred","sgex",e)).map(e=>({id:e.id,author:e.user.login,body:e.body,created_at:new Date(e.created_at).toLocaleDateString(),created_at_raw:new Date(e.created_at),avatar_url:e.user.avatar_url})).sort((e,s)=>s.created_at_raw-e.created_at_raw)}catch(p){return console.warn("Failed to fetch comments for PR ".concat(e,": ").concat(p.message)),[]}}catch(p){return console.warn("Error fetching all comments for PR ".concat(e,":"),p),[]}},se=(0,n.useCallback)(async e=>{if(0===e.length)return;U(!0);const s={};for(const a of e)s[a.number]=await $(a.number);H(s),U(!1)},[s]),ae=e=>{const s=B[e];if(q)return"Loading discussion...";if(!s)return"No comments yet";if(s.error)return"Unable to load comments";if(0===s.count)return"No comments yet";const{count:a,lastComment:t}=s,n=t?te(t.created_at):"";return"".concat(a," comment").concat(a>1?"s":"",", last by ").concat(t.author," ").concat(n)},te=e=>{const s=new Date-e,a=Math.floor(s/864e5);return 0===a?"today":1===a?"1 day ago":a<7?"".concat(a," days ago"):a<30?"".concat(Math.floor(a/7)," week").concat(Math.floor(a/7)>1?"s":""," ago"):"".concat(Math.floor(a/30)," month").concat(Math.floor(a/30)>1?"s":""," ago")},ne=async e=>{try{if(h.A.isAuth())try{const s=await h.A.getWorkflowRuns("litlfred","sgex",{branch:e,workflow_id:"deploy.yml",per_page:1});if(s.workflow_runs&&s.workflow_runs.length>0){const e=s.workflow_runs[0];return{status:e.status,conclusion:e.conclusion,html_url:e.html_url,created_at:e.created_at}}return{status:"unknown",conclusion:null}}catch(s){return console.warn("Authenticated workflow check failed for ".concat(e,":"),s),{status:"unknown",conclusion:null}}else try{const s=await h.A.getWorkflowRuns("litlfred","sgex",{branch:e,workflow_id:"deploy.yml",per_page:1});if(s.workflow_runs&&s.workflow_runs.length>0){const e=s.workflow_runs[0];return{status:e.status,conclusion:e.conclusion,html_url:e.html_url,created_at:e.created_at}}return{status:"unknown",conclusion:null}}catch(p){return console.warn("Failed to fetch deployment status for ".concat(e,": ").concat(p.message)),{status:"unknown",conclusion:null}}}catch(p){return console.warn("Error checking deployment status for ".concat(e,":"),p),{status:"unknown",conclusion:null}}},re=(0,n.useCallback)(async e=>{if(0===e.length)return;const s={};for(const a of e)s[a.safeBranchName]=await ne(a.safeBranchName);S(e=>(0,t.A)((0,t.A)({},e),s))},[s]),ie=e=>{const s=C[e];return s?"completed"===s.status&&"success"===s.conclusion?{text:"\u2705 Deployed",class:"success"}:"completed"===s.status&&"failure"===s.conclusion?{text:"\u274c Failed",class:"failed"}:"in_progress"===s.status?{text:"\ud83d\udd04 Deploying",class:"in-progress"}:"queued"===s.status?{text:"\u23f3 Queued",class:"queued"}:"error"===s.status?{text:"\u26a0\ufe0f Error",class:"error"}:{text:"\u2753 Unknown",class:"unknown"}:{text:"Checking...",class:"unknown"}},ce=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc";return[...e].sort((e,t)=>{let n=0;switch(s){case"number":n=t.number-e.number;break;case"alphabetical":n=e.title.localeCompare(t.title);break;default:const s=new Date(e.updatedAt);n=new Date(t.updatedAt)-s}return"asc"===a?-n:n})};(0,n.useEffect)(()=>{if(h.A.initializeFromStoredToken()){h.A.getStoredTokenInfo()&&E(!0)}},[]),(0,n.useEffect)(()=>{(async()=>{try{g(!0);const e="litlfred",s="sgex",a="all"===_?"all":_,t=(await h.A.getPullRequests(e,s,{state:a,sort:"updated",per_page:100})).map(e=>{const s=e.head.ref.replace(/\//g,"-");return{id:e.id,number:e.number,title:e.title,state:e.state,author:e.user.login,branchName:e.head.ref,safeBranchName:s,url:"./".concat(s,"/index.html"),prUrl:e.html_url,updatedAt:new Date(e.updated_at).toLocaleDateString(),createdAt:new Date(e.created_at).toLocaleDateString()}});c(t),await se(t.slice(0,K))}catch(e){if(console.error("Error fetching data:",e),j(e.message),e.message.includes("Failed to fetch")||e.message.includes("rate limit")){console.log("Using fallback mock data...");const s=[{id:1,number:460,title:"Improve multi-page selector landing page for GitHub deployment",state:"open",author:"copilot",branchName:"copilot/fix-459",safeBranchName:"copilot-fix-459",url:"./sgex/copilot-fix-459/index.html",prUrl:"https://github.com/litlfred/sgex/pull/460",updatedAt:(new Date).toLocaleDateString(),createdAt:new Date(Date.now()-864e5).toLocaleDateString()},{id:2,number:459,title:"Add enhanced PR preview functionality",state:"open",author:"developer",branchName:"feature/pr-preview",safeBranchName:"feature-pr-preview",url:"./sgex/feature-pr-preview/index.html",prUrl:"https://github.com/litlfred/sgex/pull/459",updatedAt:new Date(Date.now()-1728e5).toLocaleDateString(),createdAt:new Date(Date.now()-3456e5).toLocaleDateString()}];c(s),e.message.includes("Failed to fetch")&&j("API rate limit exceeded for 136.47.145.179. (But here's the good news: Authenticated requests get a higher rate limit. Check out the documentation for more details.) - https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting")}}finally{g(!1)}})()},[_,s,se]),(0,n.useEffect)(()=>{if(0===a.length)return;const e=a.filter(e=>e.title.toLowerCase().includes(N.toLowerCase())||e.author.toLowerCase().includes(N.toLowerCase())||e.branchName.toLowerCase().includes(N.toLowerCase())),s=ce(e,f,k).slice((v-1)*K,v*K);re(s);const t=setInterval(()=>{re(s)},7e3);return()=>clearInterval(t)},[a,N,f,k,v,re]),(0,n.useEffect)(()=>{if(a.length>0){const e=a.filter(e=>e.title.toLowerCase().includes(N.toLowerCase())||e.author.toLowerCase().includes(N.toLowerCase())||e.branchName.toLowerCase().includes(N.toLowerCase())),s=ce(e,f,k).slice((v-1)*K,v*K);se(s)}},[v,N,f,k,a,se]);const le=a.filter(e=>e.title.toLowerCase().includes(N.toLowerCase())||e.author.toLowerCase().includes(N.toLowerCase())||e.branchName.toLowerCase().includes(N.toLowerCase())),oe=ce(le,f,k),de=oe.slice((v-1)*K,v*K),he=Math.ceil(oe.length/K);return(0,l.jsxs)(i.Mx,{pageName:"branch-listing",showBreadcrumbs:!1,children:[(0,l.jsx)("div",{className:"branch-listing-content",children:x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"branch-listing-header",children:[(0,l.jsxs)("h1",{children:[(0,l.jsx)("img",{src:Y,alt:(0,u.lm)(e,u.ld.ICON_SGEX,"SGEX Icon"),className:"sgex-icon"})," SGEX"]}),(0,l.jsx)("p",{className:"subtitle",children:"a collaborative workbench for WHO SMART Guidelines"}),(0,l.jsx)("div",{className:"loading",children:"Loading previews..."}),(0,l.jsx)("div",{className:"prominent-info",children:(0,l.jsx)("p",{className:"info-text",children:"\ud83d\udc3e While previews load, you can access the main SGEX workbench and login below."})})]}),(0,l.jsxs)("div",{className:"action-cards",children:[(0,l.jsx)("div",{className:"action-card main-site-card",children:(0,l.jsx)("button",{className:"card-link",type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("View Main Site clicked (loading state) - navigating to /sgex/main/"),window.location.assign("/sgex/main/")},children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("img",{src:Y,alt:(0,u.lm)(e,u.ld.MASCOT_HELPER,"SGEX Mascot"),className:"card-icon"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"View Main Site"}),(0,l.jsx)("p",{children:"Access the main SGEX workbench"})]})]})})}),(0,l.jsx)("div",{className:"action-card collaboration-card",children:(0,l.jsx)("button",{className:"card-link",onClick:Z,onKeyDown:e=>("Enter"===e.key||" "===e.key)&&Z(),children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("img",{src:z,alt:(0,u.lm)(e,u.ld.IMAGE_COLLABORATION,"Collaboration"),className:"card-icon"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"Collaboration"}),(0,l.jsx)("p",{children:"Learn about our mission, how to contribute, and join our community-driven development process."})]})]})})}),L?(0,l.jsx)("div",{className:"action-card logout-card",children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("div",{className:"login-icon",children:"\u2705"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"Logged In"}),(0,l.jsx)("p",{children:"You can now view and add comments"}),(0,l.jsx)("button",{onClick:J,className:"logout-btn",children:"\ud83d\udeaa Logout"})]})]})}):(0,l.jsx)("div",{className:"action-card login-card",children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("div",{className:"login-icon",children:"\ud83d\udd10"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"GitHub Login"}),(0,l.jsx)("p",{children:"Login to get higher API rate limits and view comments"}),(0,l.jsx)(o,{onAuthSuccess:Q})]})]})})]})]}):p&&0===a.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("header",{className:"branch-listing-header",children:[(0,l.jsxs)("h1",{children:[(0,l.jsx)("img",{src:Y,alt:(0,u.lm)(e,u.ld.ICON_SGEX,"SGEX Icon"),className:"sgex-icon"})," SGEX"]}),(0,l.jsx)("p",{className:"subtitle",children:"a collaborative workbench for WHO SMART Guidelines"}),(0,l.jsx)("div",{className:"error-banner",children:(0,l.jsxs)("div",{className:"error-content",children:[(0,l.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,l.jsxs)("div",{className:"error-text",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Failed to load previews:"})," ",p]}),(0,l.jsxs)("p",{className:"error-help",children:["GitHub API rate limit exceeded.",!L&&" Try logging in with a Personal Access Token for higher rate limits, or"," ","try refreshing the page in a few minutes."]})]})]})}),(0,l.jsx)("div",{className:"prominent-info",children:(0,l.jsx)("p",{className:"info-text",children:"\ud83d\udc3e You can still access the main SGEX workbench and login below."})})]}),(0,l.jsxs)("div",{className:"action-cards",children:[(0,l.jsx)("div",{className:"action-card main-site-card",children:(0,l.jsx)("button",{className:"card-link",type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("View Main Site clicked (error state) - navigating to /sgex/main/"),window.location.assign("/sgex/main/")},children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("img",{src:Y,alt:(0,u.lm)(e,u.ld.MASCOT_HELPER,"SGEX Mascot"),className:"card-icon"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"View Main Site"}),(0,l.jsx)("p",{children:"Access the main SGEX workbench"})]})]})})}),(0,l.jsx)("div",{className:"action-card collaboration-card",children:(0,l.jsx)("button",{className:"card-link",onClick:Z,onKeyDown:e=>("Enter"===e.key||" "===e.key)&&Z(),children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("img",{src:z,alt:(0,u.lm)(e,u.ld.IMAGE_COLLABORATION,"Collaboration"),className:"card-icon"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"Collaboration"}),(0,l.jsx)("p",{children:"Learn about our mission, how to contribute, and join our community-driven development process."})]})]})})}),L?(0,l.jsx)("div",{className:"action-card logout-card",children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("div",{className:"login-icon",children:"\u2705"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"Logged In"}),(0,l.jsx)("p",{children:"You can now view and add comments"}),(0,l.jsx)("button",{onClick:J,className:"logout-btn",children:"\ud83d\udeaa Logout"})]})]})}):(0,l.jsx)("div",{className:"action-card login-card",children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("div",{className:"login-icon",children:"\ud83d\udd10"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"GitHub Login"}),(0,l.jsx)("p",{children:"Login to get higher API rate limits and view comments"}),(0,l.jsx)(o,{onAuthSuccess:Q})]})]})})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("header",{className:"branch-listing-header",children:[(0,l.jsxs)("h1",{children:[(0,l.jsx)("img",{src:Y,alt:(0,u.lm)(e,u.ld.ICON_SGEX,"SGEX Icon"),className:"sgex-icon"})," SGEX"]}),(0,l.jsx)("p",{className:"subtitle",children:"a collaborative workbench for WHO SMART Guidelines"}),p&&(0,l.jsx)("div",{className:"error-banner",children:(0,l.jsxs)("div",{className:"error-content",children:[(0,l.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,l.jsxs)("div",{className:"error-text",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Failed to load previews:"})," ",p]}),(0,l.jsxs)("p",{className:"error-help",children:["GitHub API rate limit exceeded.",!L&&" Try logging in with a Personal Access Token for higher rate limits, or"," ","try refreshing the page in a few minutes."]})]})]})}),(0,l.jsx)("div",{className:"prominent-info",children:(0,l.jsx)("p",{className:"info-text",children:"\ud83d\udc3e This landing page lists all available previews. Each branch and PR is automatically deployed to its own preview environment."})})]}),(0,l.jsxs)("div",{className:"action-cards",children:[(0,l.jsx)("div",{className:"action-card main-site-card",children:(0,l.jsx)("button",{className:"card-link",type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("View Main Site clicked (main content state) - navigating to /sgex/main/"),window.location.assign("/sgex/main/")},children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("img",{src:Y,alt:(0,u.lm)(e,u.ld.MASCOT_HELPER,"SGEX Mascot"),className:"card-icon"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"View Main Site"}),(0,l.jsx)("p",{children:"Access the main SGEX workbench"})]})]})})}),(0,l.jsx)("div",{className:"action-card collaboration-card",children:(0,l.jsx)("button",{className:"card-link",onClick:Z,onKeyDown:e=>("Enter"===e.key||" "===e.key)&&Z(),children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("img",{src:z,alt:(0,u.lm)(e,u.ld.IMAGE_COLLABORATION,"Collaboration"),className:"card-icon"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"Collaboration"}),(0,l.jsx)("p",{children:"Learn about our mission, how to contribute, and join our community-driven development process."})]})]})})}),L?(0,l.jsx)("div",{className:"action-card logout-card",children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("div",{className:"login-icon",children:"\u2705"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"Logged In"}),(0,l.jsx)("p",{children:"You can now view and add comments"}),(0,l.jsx)("button",{onClick:J,className:"logout-btn",children:"\ud83d\udeaa Logout"})]})]})}):(0,l.jsx)("div",{className:"action-card login-card",children:(0,l.jsxs)("div",{className:"card-content",children:[(0,l.jsx)("div",{className:"login-icon",children:"\ud83d\udd10"}),(0,l.jsxs)("div",{className:"card-text",children:[(0,l.jsx)("h3",{children:"GitHub Login"}),(0,l.jsxs)("p",{children:["Login to view and add comments",p?" and get higher API rate limits":""]}),(0,l.jsx)(o,{onAuthSuccess:Q})]})]})})]}),(0,l.jsx)("div",{className:"preview-tabs",children:(0,l.jsxs)("button",{className:"tab-button active",children:["\ud83d\udd04 Pull Request Previews (",oe.length,")"]})}),(0,l.jsxs)("div",{className:"pr-section",children:[(0,l.jsxs)("div",{className:"pr-controls",children:[(0,l.jsxs)("div",{className:"pr-filter-section",children:[(0,l.jsx)("label",{htmlFor:"pr-filter",children:"Filter PRs:"}),(0,l.jsxs)("select",{id:"pr-filter",value:_,onChange:e=>{P(e.target.value),b(1)},className:"filter-select",children:[(0,l.jsx)("option",{value:"open",children:"Open PRs Only"}),(0,l.jsx)("option",{value:"closed",children:"Closed PRs Only"}),(0,l.jsx)("option",{value:"all",children:"All PRs"})]})]}),(0,l.jsx)("input",{type:"text",placeholder:"Search pull requests by title, author, or branch name...",value:N,onChange:e=>{w(e.target.value),b(1)},className:"pr-search"}),(0,l.jsxs)("select",{value:f,onChange:e=>{A(e.target.value),b(1)},className:"sort-select",children:[(0,l.jsx)("option",{value:"updated",children:"Sort by Recent Updates"}),(0,l.jsx)("option",{value:"number",children:"Sort by PR Number"}),(0,l.jsx)("option",{value:"alphabetical",children:"Sort Alphabetically"})]}),(0,l.jsxs)("select",{value:k,onChange:e=>{y(e.target.value),b(1)},className:"sort-select",children:[(0,l.jsx)("option",{value:"desc",children:"Descending"}),(0,l.jsx)("option",{value:"asc",children:"Ascending"})]})]}),(0,l.jsx)("div",{className:"pr-cards",children:0===de.length?(0,l.jsx)("div",{className:"no-items",children:N?(0,l.jsxs)("p",{children:['No pull requests match your search "',N,'".']}):(0,l.jsx)("p",{children:"No pull request previews available at the moment."})}):de.map(s=>{var a;return(0,l.jsxs)("div",{className:"preview-card pr-card",children:[(0,l.jsxs)("div",{className:"card-header",children:[(0,l.jsxs)("h3",{className:"item-name",children:["#",s.number,": ",s.title]}),(0,l.jsxs)("div",{className:"card-badges",children:[(0,l.jsxs)("span",{className:"state-badge ".concat(s.state),children:["open"===s.state?"\ud83d\udfe2":"\ud83d\udd34"," ",s.state]}),(0,l.jsx)("span",{className:"deployment-status ".concat(ie(s.safeBranchName).class),children:ie(s.safeBranchName).text})]})]}),(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsxs)("p",{className:"pr-meta",children:[(0,l.jsx)("strong",{children:"Branch:"})," ",s.branchName," \u2022 ",(0,l.jsx)("strong",{children:"Author:"})," ",s.author]}),(0,l.jsxs)("p",{className:"item-date",children:["Created: ",s.createdAt," \u2022 Updated: ",s.updatedAt]}),(0,l.jsxs)("div",{className:"discussion-summary-bar",onClick:()=>(async e=>{const s=X[e];if(!s){const s=await ee(e);R(a=>(0,t.A)((0,t.A)({},a),{},{[e]:s}))}F(a=>(0,t.A)((0,t.A)({},a),{},{[e]:!s}))})(s.number),children:[(0,l.jsxs)("div",{className:"discussion-summary-text",children:[(0,l.jsx)("span",{className:"discussion-summary-icon",children:"\ud83d\udcac"}),ae(s.number)]}),(0,l.jsx)("span",{className:"discussion-expand-icon ".concat(X[s.number]?"expanded":""),children:"\u25b6"})]}),X[s.number]&&(0,l.jsxs)("div",{className:"discussion-expanded-section",children:[(0,l.jsxs)("div",{className:"discussion-header",children:[(0,l.jsx)("h4",{className:"discussion-title",children:"Discussion"}),(0,l.jsxs)("div",{className:"discussion-actions",children:[(0,l.jsx)("a",{href:"https://github.com/litlfred/sgex/pull/".concat(s.number,"/files"),target:"_blank",rel:"noopener noreferrer",className:"discussion-action-btn",children:"\ud83d\udcc1 View Files"}),(0,l.jsx)("a",{href:s.prUrl,target:"_blank",rel:"noopener noreferrer",className:"discussion-action-btn secondary",children:"\ud83d\udd17 View PR"})]})]}),h.A.isAuth()&&(0,l.jsxs)("div",{className:"comment-input-section",children:[(0,l.jsx)("textarea",{value:I[s.number]||"",onChange:e=>T(a=>(0,t.A)((0,t.A)({},a),{},{[s.number]:e.target.value})),placeholder:"Add a comment...",className:"comment-input",rows:3}),(0,l.jsx)("button",{onClick:()=>(async(e,s)=>{if(!h.A.isAuth()||!s.trim())return!1;O(s=>(0,t.A)((0,t.A)({},s),{},{[e]:!0}));try{if(await h.A.createPullRequestComment("litlfred","sgex",e,s),T(s=>(0,t.A)((0,t.A)({},s),{},{[e]:""})),X[e]){const s=await ee(e);R(a=>(0,t.A)((0,t.A)({},a),{},{[e]:s}))}const a=await $(e);return H(s=>(0,t.A)((0,t.A)({},s),{},{[e]:a})),!0}catch(p){return console.error("Error submitting comment for PR ".concat(e,":"),p),!1}finally{O(s=>(0,t.A)((0,t.A)({},s),{},{[e]:!1}))}})(s.number,I[s.number]),disabled:!(null!==(a=I[s.number])&&void 0!==a&&a.trim())||M[s.number],className:"submit-comment-btn",children:M[s.number]?"Submitting...":"Add Comment"})]}),(0,l.jsx)("div",{className:"discussion-scroll-area",children:G?(0,l.jsx)("div",{className:"comments-loading",children:"Loading full discussion..."}):D[s.number]&&D[s.number].length>0?(0,l.jsx)("div",{className:"comments-list",children:D[s.number].slice(0,5).map(s=>(0,l.jsxs)("div",{className:"comment-item",children:[(0,l.jsxs)("div",{className:"comment-header",children:[(0,l.jsx)("img",{src:s.avatar_url,alt:(0,u.yl)(e,{name:s.author},"user"),className:"comment-avatar"}),(0,l.jsx)("span",{className:"comment-author",children:s.author}),(0,l.jsx)("span",{className:"comment-date",children:s.created_at})]}),(0,l.jsx)("div",{className:"comment-body",children:s.body.length>200?"".concat(s.body.substring(0,200),"..."):s.body})]},s.id))}):(0,l.jsx)("div",{className:"no-comments",children:h.A.isAuth()?"No comments yet. Be the first to comment!":"No comments yet. Login to add the first comment!"})})]}),(0,l.jsxs)("div",{className:"pr-actions",children:[(0,l.jsx)("a",{href:s.url,className:"preview-link",target:"_blank",rel:"noopener noreferrer",children:(0,l.jsx)("span",{children:"\ud83d\ude80 View Preview"})}),(0,l.jsx)("a",{href:s.prUrl,className:"pr-link",target:"_blank",rel:"noopener noreferrer",children:(0,l.jsx)("span",{children:"\ud83d\udccb View PR"})})]})]}),(0,l.jsx)("div",{className:"card-footer",children:(0,l.jsxs)("small",{className:"preview-path",children:["Preview URL: ",s.url]})})]},s.id)})}),he>1&&(0,l.jsxs)("div",{className:"pagination",children:[(0,l.jsx)("button",{className:"pagination-btn",onClick:()=>b(Math.max(1,v-1)),disabled:1===v,children:"\u2190 Previous"}),(0,l.jsxs)("span",{className:"pagination-info",children:["Page ",v," of ",he," (",oe.length," total)"]}),(0,l.jsx)("button",{className:"pagination-btn",onClick:()=>b(Math.min(he,v+1)),disabled:v===he,children:"Next \u2192"})]})]})]})}),V&&(0,l.jsx)(d.A,{onClose:()=>{W(!1)}})]})}}}]);
//# sourceMappingURL=539.0ad6836e.chunk.js.map