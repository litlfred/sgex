{"version":3,"file":"static/js/166.9b4cf6a5.chunk.js","mappings":"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","sources":["components/BPMNViewer.js","services/lazyFactoryService.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport githubService from '../services/githubService';\nimport { PageLayout, usePage } from './framework';\nimport { createLazyBpmnViewer } from '../services/lazyFactoryService';\n\nconst BPMNViewerComponent = () => {\n  return (\n    <PageLayout pageName=\"bpmn-viewer\">\n      <BPMNViewerContent />\n    </PageLayout>\n  );\n};\n\nconst BPMNViewerContent = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const viewerRef = useRef(null);\n  const containerRef = useRef(null);\n  \n  // Get page data from framework\n  const { profile, repository, branch, asset, loading: pageLoading, error: pageError } = usePage();\n  \n  console.log('BPMNViewer: Page framework data:', { profile: !!profile, repository: !!repository, branch, asset });\n  console.log('BPMNViewer: Location state (legacy):', location.state);\n  \n  // Legacy support for location.state (backward compatibility)\n  const { component, selectedFile, selectedBranch } = location.state || {};\n  \n  // Use framework data as primary source, fall back to location state\n  const currentProfile = profile || location.state?.profile;\n  const currentRepository = repository || location.state?.repository;\n  const currentBranch = branch || selectedBranch;\n  \n  console.log('BPMNViewer: Final computed values:', {\n    currentProfile: !!currentProfile,\n    currentRepository: !!currentRepository,\n    currentBranch,\n    asset\n  });\n  \n  // Create selectedFile from asset path or use legacy selectedFile\n  const currentSelectedFile = useMemo(() => {\n    return asset ? {\n      name: asset.split('/').pop(),\n      path: asset\n    } : selectedFile;\n  }, [asset, selectedFile]);\n  \n  const [loading, setLoading] = useState(true);\n  const [loadingStep, setLoadingStep] = useState('initializing');\n  const [error, setError] = useState(null);\n  const [hasWriteAccess, setHasWriteAccess] = useState(false);\n  const [enhancedFullwidth, setEnhancedFullwidth] = useState(false);\n  const [autoHide, setAutoHide] = useState(false);\n\n  // Check write permissions\n  useEffect(() => {\n    const checkPermissions = async () => {\n      if (currentRepository && currentProfile) {\n        try {\n          // Simple permission check - in real app, this would use githubService\n          const writeAccess = currentProfile.token && currentRepository.permissions?.push;\n          setHasWriteAccess(writeAccess || false);\n        } catch (error) {\n          console.warn('Could not check write permissions:', error);\n          setHasWriteAccess(false);\n        }\n      }\n    };\n\n    checkPermissions();\n  }, [currentRepository, currentProfile]);\n\n  // Load BPMN file content with enhanced loading states\n  const loadBpmnContent = useCallback(async () => {\n    console.log('🚀 BPMNViewer: loadBpmnContent called with:', {\n      hasViewer: !!viewerRef.current,\n      selectedFile: currentSelectedFile,\n      repository: currentRepository ? {\n        name: currentRepository.name,\n        owner: currentRepository.owner\n      } : null\n    });\n\n    if (!viewerRef.current || !currentSelectedFile || !currentRepository) {\n      console.warn('❌ BPMNViewer: Missing required parameters for loadBpmnContent:', {\n        hasViewer: !!viewerRef.current,\n        hasSelectedFile: !!currentSelectedFile,\n        hasRepository: !!currentRepository\n      });\n      return;\n    }\n\n    // Declare variables outside try block so they're accessible in catch block\n    const owner = currentRepository.owner?.login || currentRepository.full_name.split('/')[0];\n    const repoName = currentRepository.name;\n    const ref = currentBranch || 'main';\n    try {\n      setLoading(true);\n      setError(null);\n      setLoadingStep('initializing');\n\n      console.log('🔍 BPMNViewer: Repository and file analysis:', {\n        repository: {\n          name: currentRepository.name,\n          full_name: currentRepository.full_name,\n          owner: currentRepository.owner,\n          isDemo: currentRepository.isDemo,\n          default_branch: currentRepository.default_branch\n        },\n        selectedFile: {\n          name: currentSelectedFile.name,\n          path: currentSelectedFile.path,\n          size: currentSelectedFile.size\n        },\n        derivedOwner: owner,\n        repoName: repoName,\n        ref: ref,\n        githubServiceAuthenticated: githubService.isAuth()\n      });\n\n      setLoadingStep('fetching');\n      console.log(`📂 BPMNViewer: Preparing to load BPMN content from ${owner}/${repoName}:${currentSelectedFile.path} (ref: ${ref})`);\n      console.log('📋 BPMNViewer: Full selected file object:', JSON.stringify(currentSelectedFile, null, 2));\n\n      let bpmnXml;\n      const isDemo = currentSelectedFile.path?.includes('demo/') || currentSelectedFile.sha?.startsWith('demo-');\n      \n      if (isDemo) {\n        // For demo files, generate BPMN XML locally\n        console.log('🎭 BPMNViewer: Demo file detected, generating BPMN content locally');\n        setLoadingStep('generating');\n        const processName = currentSelectedFile.name.replace('.bpmn', '').replace(/[-_]/g, ' ');\n        bpmnXml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<bpmn:definitions xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" \n                  xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" \n                  xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" \n                  xmlns:di=\"http://www.omg.org/spec/DD/20100524/DI\" \n                  id=\"Definitions_1\" targetNamespace=\"http://bpmn.io/schema/bpmn\">\n  <bpmn:process id=\"Process_${currentSelectedFile.name.replace(/[^a-zA-Z0-9]/g, '_')}\" isExecutable=\"false\">\n    <bpmn:startEvent id=\"StartEvent_1\" name=\"Start\">\n      <bpmn:outgoing>Flow_1</bpmn:outgoing>\n    </bpmn:startEvent>\n    <bpmn:task id=\"Task_1\" name=\"${processName}\">\n      <bpmn:incoming>Flow_1</bpmn:incoming>\n      <bpmn:outgoing>Flow_2</bpmn:outgoing>\n    </bpmn:task>\n    <bpmn:endEvent id=\"EndEvent_1\" name=\"End\">\n      <bpmn:incoming>Flow_2</bpmn:incoming>\n    </bpmn:endEvent>\n    <bpmn:sequenceFlow id=\"Flow_1\" sourceRef=\"StartEvent_1\" targetRef=\"Task_1\" />\n    <bpmn:sequenceFlow id=\"Flow_2\" sourceRef=\"Task_1\" targetRef=\"EndEvent_1\" />\n  </bpmn:process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_1\">\n    <bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_${currentSelectedFile.name.replace(/[^a-zA-Z0-9]/g, '_')}\">\n      <bpmndi:BPMNShape id=\"StartEvent_1_di\" bpmnElement=\"StartEvent_1\">\n        <dc:Bounds x=\"152\" y=\"82\" width=\"36\" height=\"36\" />\n        <bpmndi:BPMNLabel>\n          <dc:Bounds x=\"158\" y=\"125\" width=\"24\" height=\"14\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Task_1_di\" bpmnElement=\"Task_1\">\n        <dc:Bounds x=\"250\" y=\"60\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"EndEvent_1_di\" bpmnElement=\"EndEvent_1\">\n        <dc:Bounds x=\"402\" y=\"82\" width=\"36\" height=\"36\" />\n        <bpmndi:BPMNLabel>\n          <dc:Bounds x=\"410\" y=\"125\" width=\"20\" height=\"14\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"Flow_1_di\" bpmnElement=\"Flow_1\">\n        <di:waypoint x=\"188\" y=\"100\" />\n        <di:waypoint x=\"250\" y=\"100\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"Flow_2_di\" bpmnElement=\"Flow_2\">\n        <di:waypoint x=\"350\" y=\"100\" />\n        <di:waypoint x=\"402\" y=\"100\" />\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn:definitions>`;\n      } else {\n        // For real files, use githubService to fetch file content\n        setLoadingStep('downloading');\n        bpmnXml = await githubService.getFileContent(owner, repoName, currentSelectedFile.path, ref);\n      }\n      \n      // Validate BPMN content\n      setLoadingStep('validating');\n      if (!bpmnXml || !bpmnXml.trim()) {\n        throw new Error('Empty or invalid BPMN file content');\n      }\n      \n      if (!bpmnXml.includes('bpmn:definitions') && !bpmnXml.includes('<definitions')) {\n        throw new Error('File does not appear to contain valid BPMN XML content');\n      }\n\n      // Import XML into viewer\n      setLoadingStep('importing');\n      console.log('🎨 BPMNViewer: Importing XML into BPMN viewer...');\n      await viewerRef.current.importXML(bpmnXml);\n      \n      // Center the diagram\n      setLoadingStep('centering');\n      try {\n        const canvas = viewerRef.current.get('canvas');\n        canvas.zoom('fit-viewport');\n        console.log('✅ BPMNViewer: Successfully loaded and centered BPMN diagram');\n      } catch (centerError) {\n        console.warn('⚠️ BPMNViewer: Could not center diagram:', centerError);\n      }\n      \n      // Force immediate and comprehensive visibility\n      const forceVisibility = () => {\n        const container = containerRef.current;\n        if (container) {\n          // Force visibility on all SVG elements and their children\n          const svgElements = container.querySelectorAll('svg, svg *');\n          svgElements.forEach(element => {\n            element.style.opacity = '1';\n            element.style.visibility = 'visible';\n            element.style.display = element.tagName.toLowerCase() === 'svg' ? 'block' : '';\n            \n            // Force remove bold styling from text elements\n            if (element.tagName.toLowerCase() === 'text' || element.tagName.toLowerCase() === 'tspan') {\n              element.style.fontWeight = 'normal';\n              element.style.fontStyle = 'normal';\n              element.style.fontVariant = 'normal';\n              // Remove any inline font-weight attributes\n              element.removeAttribute('font-weight');\n              element.removeAttribute('style');\n            }\n            \n            // Force proper fill colors for paths and shapes\n            if (['path', 'rect', 'circle', 'ellipse', 'polygon'].includes(element.tagName.toLowerCase())) {\n              // Don't override text color fills\n              if (!element.closest('text')) {\n                element.style.fill = 'var(--who-card-bg)';\n                element.style.stroke = 'var(--who-text-secondary)';\n                element.style.strokeWidth = '1.5px';\n              }\n            }\n          });\n          \n          // Also force the container itself to be visible\n          container.style.opacity = '1';\n          container.style.visibility = 'visible';\n          container.style.display = 'block';\n          \n          console.log('🎨 BPMNViewer: Forced comprehensive SVG visibility and styling');\n        }\n      };\n      \n      // Apply immediately\n      forceVisibility();\n      \n      // Also apply after a short delay to catch any delayed rendering\n      setTimeout(forceVisibility, 50);\n      setTimeout(forceVisibility, 200);\n      setTimeout(forceVisibility, 500);\n      \n      // Set up a MutationObserver to watch for dynamic changes and fix them\n      const observer = new MutationObserver((mutations) => {\n        let needsUpdate = false;\n        mutations.forEach((mutation) => {\n          if (mutation.type === 'childList' || mutation.type === 'attributes') {\n            needsUpdate = true;\n          }\n        });\n        if (needsUpdate) {\n          setTimeout(forceVisibility, 10);\n        }\n      });\n      \n      // Observe changes to the container\n      if (containerRef.current) {\n        observer.observe(containerRef.current, {\n          childList: true,\n          subtree: true,\n          attributes: true,\n          attributeFilter: ['style', 'fill', 'stroke', 'font-weight']\n        });\n        \n        // Store observer for cleanup\n        containerRef.current._bpmnObserver = observer;\n      }\n      \n      setLoadingStep('complete');\n      setLoading(false);\n    } catch (err) {\n      console.error('💥 BPMNViewer: Error loading BPMN file:', err);\n      console.error('🔍 BPMNViewer: Full error details:', {\n        message: err.message,\n        status: err.status,\n        stack: err.stack,\n        repository: {\n          owner: owner,\n          name: repoName,\n          ref: ref\n        },\n        file: {\n          name: currentSelectedFile.name,\n          path: currentSelectedFile.path\n        }\n      });\n      \n      setLoadingStep('error');\n      // Provide specific error messages\n      if (err.status === 404) {\n        setError('BPMN file not found in the repository.');\n      } else if (err.status === 403) {\n        setError('Access denied. This repository may be private and require authentication.');\n      } else if (err.message.includes('Empty or invalid BPMN')) {\n        setError('The selected file appears to be empty or corrupted.');\n      } else if (err.message.includes('does not appear to contain valid BPMN')) {\n        setError('The selected file does not appear to contain valid BPMN XML content.');\n      } else {\n        setError(`Failed to load BPMN diagram: ${err.message}`);\n      }\n      \n      setLoading(false);\n    }\n  }, [currentSelectedFile, currentRepository, currentBranch]);\n\n  const cleanupContainer = useCallback(() => {\n    if (containerRef.current) {\n      containerRef.current.innerHTML = '';\n      console.log('🧹 BPMNViewer: Container cleaned up');\n    }\n  }, []);\n\n  // Initialize BPMN viewer - simplified to avoid race conditions\n  useEffect(() => {\n    const initializeViewer = async () => {\n      console.log('🛠️ BPMNViewer: initializeViewer called with:', {\n        hasContainer: !!containerRef.current,\n        hasViewer: !!viewerRef.current,\n        selectedFile: currentSelectedFile ? currentSelectedFile.name : 'none',\n        containerRefCurrent: containerRef.current,\n        viewerRefCurrent: viewerRef.current\n      });\n\n      if (containerRef.current && !viewerRef.current && currentSelectedFile) {\n        try {\n          // Clean the container before creating a new viewer\n          cleanupContainer();\n          \n          console.log('🔧 BPMNViewer: Creating new BPMN viewer...');\n          console.log('🔧 BPMNViewer: Container element details:', {\n            tagName: containerRef.current.tagName,\n            className: containerRef.current.className,\n            clientWidth: containerRef.current.clientWidth,\n            clientHeight: containerRef.current.clientHeight,\n            innerHTML: containerRef.current.innerHTML.length\n          });\n          \n          // Lazy load BPMN.js viewer to improve initial page responsiveness\n          viewerRef.current = await createLazyBpmnViewer({\n            container: containerRef.current\n          });\n          console.log('✅ BPMNViewer: BPMN viewer initialized successfully');\n          console.log('📞 BPMNViewer: About to call loadBpmnContent()...');\n          \n          loadBpmnContent();\n        } catch (error) {\n          console.error('❌ BPMNViewer: Failed to initialize BPMN viewer:', error);\n          console.error('🔍 BPMNViewer: Initialization error details:', {\n            message: error.message,\n            stack: error.stack,\n            containerExists: !!containerRef.current,\n            containerContent: containerRef.current ? containerRef.current.innerHTML : 'N/A'\n          });\n          \n          // If it's an \"element already exists\" error, try to clean up and retry once\n          if (error.message.includes('already exists')) {\n            console.log('🔄 BPMNViewer: Detected \"element already exists\" error, attempting cleanup and retry...');\n            cleanupContainer();\n            \n            // Wait a bit and try again\n            setTimeout(async () => {\n              if (containerRef.current && !viewerRef.current) {\n                try {\n                  console.log('🔄 BPMNViewer: Retrying viewer creation after cleanup...');\n                  // Lazy load BPMN.js viewer to improve initial page responsiveness\n                  viewerRef.current = await createLazyBpmnViewer({\n                    container: containerRef.current\n                  });\n                  console.log('✅ BPMNViewer: BPMN viewer initialized successfully on retry');\n                  loadBpmnContent();\n                } catch (retryError) {\n                  console.error('❌ BPMNViewer: Failed to initialize BPMN viewer on retry:', retryError);\n                  setError(`Failed to initialize BPMN viewer: ${retryError.message}`);\n                  setLoading(false);\n                }\n              }\n            }, 100);\n          } else {\n            setError(`Failed to initialize BPMN viewer: ${error.message}`);\n            setLoading(false);\n          }\n        }\n      } else {\n        console.log('⚠️ BPMNViewer: Skipping viewer initialization:', {\n          hasContainer: !!containerRef.current,\n          hasViewer: !!viewerRef.current,\n          hasSelectedFile: !!currentSelectedFile,\n          reason: !containerRef.current ? 'No container' : \n                  viewerRef.current ? 'Viewer already exists' : \n                  !currentSelectedFile ? 'No selected file' : 'Unknown'\n        });\n      }\n    };\n\n    const waitForContainer = (attempt = 0) => {\n      const maxAttempts = 50; // Try for up to 5 seconds (50 * 100ms)\n      \n      if (containerRef.current) {\n        console.log(`✅ BPMNViewer: Container found on attempt ${attempt + 1}`);\n        initializeViewer();\n      } else if (attempt < maxAttempts) {\n        console.log(`⏳ BPMNViewer: Container not ready, attempt ${attempt + 1}/${maxAttempts}, retrying in 100ms...`);\n        setTimeout(() => waitForContainer(attempt + 1), 100);\n      } else {\n        console.error('❌ BPMNViewer: Container never became available after maximum attempts');\n        setError('Failed to initialize BPMN viewer: container not available');\n        setLoading(false);\n      }\n    };\n\n    if (currentSelectedFile) {\n      console.log('⏰ BPMNViewer: Starting container readiness check for selectedFile:', currentSelectedFile.name);\n      waitForContainer();\n    } else {\n      console.log('❌ BPMNViewer: No currentSelectedFile, skipping viewer initialization');\n    }\n\n    return () => {\n      if (viewerRef.current) {\n        try {\n          viewerRef.current.destroy();\n        } catch (error) {\n          console.warn('Warning cleaning up BPMN viewer:', error);\n        }\n        viewerRef.current = null;\n      }\n      \n      // Clean up mutation observer\n      if (containerRef.current && containerRef.current._bpmnObserver) {\n        containerRef.current._bpmnObserver.disconnect();\n        delete containerRef.current._bpmnObserver;\n      }\n    };\n  }, [currentSelectedFile, loadBpmnContent, cleanupContainer]);\n\n  const handleEditMode = () => {\n    if (!hasWriteAccess) {\n      alert('You need write permissions to edit BPMN files. Please check your GitHub token permissions.');\n      return;\n    }\n\n    const owner = currentRepository.owner?.login || currentRepository.full_name.split('/')[0];\n    const repoName = currentRepository.name;\n    const path = currentBranch \n      ? `/bpmn-editor/${owner}/${repoName}/${currentBranch}`\n      : `/bpmn-editor/${owner}/${repoName}`;\n\n    navigate(path, {\n      state: {\n        profile: currentProfile,\n        repository: currentRepository,\n        component,\n        selectedFile: currentSelectedFile,\n        selectedBranch: currentBranch,\n        mode: 'edit'\n      }\n    });\n  };\n\n  const handleBackToSelection = () => {\n    navigate('/business-process-selection', {\n      state: {\n        profile: currentProfile,\n        repository: currentRepository,\n        component,\n        selectedBranch: currentBranch\n      }\n    });\n  };\n\n  const handleToggleEnhancedFullwidth = () => {\n    const newState = !enhancedFullwidth;\n    setEnhancedFullwidth(newState);\n    \n    // Add/remove class on body for enhanced fullwidth mode\n    if (newState) {\n      document.body.classList.add('enhanced-fullwidth-active');\n    } else {\n      document.body.classList.remove('enhanced-fullwidth-active');\n    }\n  };\n\n  const handleToggleAutoHide = () => {\n    setAutoHide(!autoHide);\n  };\n\n  // Cleanup effect for enhanced fullwidth\n  useEffect(() => {\n    return () => {\n      // Clean up body class on unmount\n      document.body.classList.remove('enhanced-fullwidth-active');\n    };\n  }, []);\n\n  // Update body class when enhanced fullwidth changes\n  useEffect(() => {\n    if (enhancedFullwidth) {\n      document.body.classList.add('enhanced-fullwidth-active');\n    } else {\n      document.body.classList.remove('enhanced-fullwidth-active');\n    }\n    \n    return () => {\n      document.body.classList.remove('enhanced-fullwidth-active');\n    };\n  }, [enhancedFullwidth]);\n\n  // Handle redirect when data is missing\n  useEffect(() => {\n    // Check if we're on an asset URL pattern (has more than 5 path segments after /sgex)\n    const pathSegments = location.pathname.split('/').filter(segment => segment);\n    const isAssetURL = pathSegments.length > 5; // /sgex/bpmn-viewer/user/repo/branch/asset...\n    \n    // If we're on an asset URL, wait for framework to load before deciding to redirect\n    if (isAssetURL) {\n      // Only redirect if we have both no framework data AND no location state\n      if (!profile && !repository && !asset && \n          !currentProfile && !currentRepository && !currentSelectedFile) {\n        console.log('BPMNViewer: On asset URL but no data available from framework or location state, redirecting to home');\n        navigate('/');\n      }\n    } else {\n      // For non-asset URLs, use the original logic\n      if (!currentProfile || !currentRepository || !currentSelectedFile) {\n        console.log('BPMNViewer: Missing required data, redirecting to home:', {\n          hasProfile: !!currentProfile,\n          hasRepository: !!currentRepository,\n          hasSelectedFile: !!currentSelectedFile\n        });\n        navigate('/');\n      }\n    }\n  }, [currentProfile, currentRepository, currentSelectedFile, profile, repository, asset, location.pathname, navigate]);\n\n  // Don't render the component if we're missing required data, unless we're on asset URL and framework is loading\n  const pathSegments = location.pathname.split('/').filter(segment => segment);\n  const isAssetURL = pathSegments.length > 5;\n  \n  if (!currentProfile || !currentRepository || !currentSelectedFile) {\n    if (isAssetURL && (!profile || !repository || !asset)) {\n      // Framework might still be loading for asset URL\n      return <div>Loading framework data...</div>;\n    }\n    return <div>Loading or redirecting...</div>;\n  }\n\n  return (\n      <div className={`bpmn-viewer ${enhancedFullwidth ? 'enhanced-fullwidth' : ''} ${autoHide ? 'auto-hide' : ''}`}>\n      <div className=\"viewer-content\">\n\n        <div className=\"viewer-main\">\n          <div className=\"viewer-toolbar\">\n            <div className=\"toolbar-left\">\n              <h3>{currentSelectedFile.name}</h3>\n              <div className=\"artifact-badges\">\n                <span className=\"artifact-badge bpmn\">📊 BPMN</span>\n                <span className=\"dak-component-badge\">🔄 Business Process</span>\n              </div>\n              <span className=\"view-mode-badge\">👁️ Read-Only View</span>\n            </div>\n            <div className=\"toolbar-right\">\n              <button \n                className=\"action-btn secondary\"\n                onClick={handleToggleAutoHide}\n                title=\"Toggle auto-hide headers/footers\"\n              >\n                {autoHide ? '📌' : '👁️'} Auto-Hide\n              </button>\n              <button \n                className=\"action-btn secondary\"\n                onClick={handleToggleEnhancedFullwidth}\n                title=\"Toggle enhanced fullwidth mode\"\n              >\n                {enhancedFullwidth ? '🔳' : '⛶'} Full Container\n              </button>\n              <button \n                className=\"action-btn secondary\"\n                onClick={handleBackToSelection}\n              >\n                ← Back to List\n              </button>\n              {hasWriteAccess && (\n                <button \n                  className=\"action-btn primary\"\n                  onClick={handleEditMode}\n                >\n                  ✏️ Edit\n                </button>\n              )}\n            </div>\n          </div>\n\n          <div className=\"diagram-container\">\n            {loading ? (\n              <div className=\"loading-overlay\">\n                <div className=\"spinner\"></div>\n                <div className=\"loading-info\">\n                  <p>Loading BPMN diagram...</p>\n                  <p className=\"loading-details\">\n                    Fetching {currentSelectedFile.name} from {currentRepository.name}\n                  </p>\n                  <div className=\"loading-progress\">\n                    <div className={`loading-step ${loadingStep === 'initializing' ? 'active' : loadingStep === 'fetching' || loadingStep === 'downloading' || loadingStep === 'generating' || loadingStep === 'validating' || loadingStep === 'importing' || loadingStep === 'centering' || loadingStep === 'complete' ? 'complete' : ''}`}>\n                      Initializing viewer\n                    </div>\n                    <div className={`loading-step ${loadingStep === 'fetching' || loadingStep === 'downloading' || loadingStep === 'generating' ? 'active' : loadingStep === 'validating' || loadingStep === 'importing' || loadingStep === 'centering' || loadingStep === 'complete' ? 'complete' : ''}`}>\n                      {loadingStep === 'generating' ? 'Generating demo content' : 'Fetching BPMN file'}\n                    </div>\n                    <div className={`loading-step ${loadingStep === 'validating' ? 'active' : loadingStep === 'importing' || loadingStep === 'centering' || loadingStep === 'complete' ? 'complete' : ''}`}>\n                      Validating BPMN XML\n                    </div>\n                    <div className={`loading-step ${loadingStep === 'importing' ? 'active' : loadingStep === 'centering' || loadingStep === 'complete' ? 'complete' : ''}`}>\n                      Importing diagram\n                    </div>\n                    <div className={`loading-step ${loadingStep === 'centering' ? 'active' : loadingStep === 'complete' ? 'complete' : ''}`}>\n                      Centering view\n                    </div>\n                  </div>\n                  <p className=\"loading-hint\">\n                    This may take a few moments for large files or slow connections.\n                  </p>\n                </div>\n              </div>\n            ) : error ? (\n              <div className=\"error-overlay\">\n                <p>❌ {error}</p>\n                <div className=\"error-actions\">\n                  <button \n                    className=\"action-btn secondary\"\n                    onClick={() => loadBpmnContent()}\n                  >\n                    🔄 Retry\n                  </button>\n                  <button \n                    className=\"action-btn secondary\"\n                    onClick={() => navigate('/business-process-selection', {\n                      state: { profile: currentProfile, repository: currentRepository, component, selectedBranch: currentBranch }\n                    })}\n                  >\n                    ← Back to List\n                  </button>\n                </div>\n              </div>\n            ) : null}\n            \n            {/* Always render the BPMN container so the ref can be set */}\n            <div \n              className=\"bpmn-container\" \n              ref={containerRef}\n              style={{ \n                display: loading || error ? 'none' : 'block',\n                width: '100%',\n                height: '100%'\n              }}\n            ></div>\n          </div>\n\n          <div className=\"diagram-info\">\n            <div className=\"condensed-file-info\">\n              <div className=\"condensed-info-item\">\n                <span className=\"label\">📁</span>\n                <span className=\"value\">{currentSelectedFile?.name || 'No file'}</span>\n              </div>\n              <div className=\"condensed-info-item\">\n                <span className=\"label\">📏</span>\n                <span className=\"value\">{currentSelectedFile?.size ? `${(currentSelectedFile.size / 1024).toFixed(1)} KB` : 'N/A'}</span>\n              </div>\n              <div className=\"condensed-info-item\">\n                <span className=\"label\">🌿</span>\n                <span className=\"value\">{currentBranch || 'main'}</span>\n              </div>\n            </div>\n            <div className=\"condensed-view-mode\">\n              <span className={`condensed-access-badge ${hasWriteAccess ? 'write' : 'read'}`}>\n                {hasWriteAccess ? '✏️ Edit' : '👁️ Read'}\n              </span>\n              <span className=\"condensed-info-item\">\n                <span className=\"value\">\n                  {enhancedFullwidth ? '⛶ Full Container' : autoHide ? '👁️ Auto-Hide' : '📺 Fullwidth'}\n                </span>\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      </div>\n  );\n};\n\nexport default BPMNViewerComponent;","/**\n * SGEX Lazy Factory Service\n * \n * Handles creation of configured instances for lazy-loaded libraries.\n * This service provides:\n * 1. Factory functions for creating pre-configured instances\n * 2. Instance configuration with sensible defaults\n * 3. Convenience functions for common use cases\n * \n * Split from lazyRouteUtils.js for better separation of concerns.\n */\n\nimport { \n  lazyLoadOctokit, \n  lazyLoadBpmnModeler, \n  lazyLoadBpmnViewer, \n  lazyLoadAjv, \n  lazyLoadAjvFormats \n} from './libraryLoaderService';\n\n/**\n * Create a lazy-loaded Octokit instance\n * @param {Object} options - Octokit configuration options\n * @returns {Promise<Octokit>} Configured Octokit instance\n */\nexport async function createLazyOctokit(options = {}) {\n  const Octokit = await lazyLoadOctokit();\n  return new Octokit(options);\n}\n\n/**\n * Create a lazy-loaded BPMN Modeler instance\n * @param {Object} options - BpmnModeler configuration options\n * @returns {Promise<BpmnModeler>} Configured BpmnModeler instance\n */\nexport async function createLazyBpmnModeler(options = {}) {\n  const BpmnModeler = await lazyLoadBpmnModeler();\n  return new BpmnModeler(options);\n}\n\n/**\n * Create a lazy-loaded BPMN Viewer instance\n * @param {Object} options - BpmnViewer configuration options\n * @returns {Promise<BpmnViewer>} Configured BpmnViewer instance\n */\nexport async function createLazyBpmnViewer(options = {}) {\n  const BpmnViewer = await lazyLoadBpmnViewer();\n  return new BpmnViewer(options);\n}\n\n/**\n * Create a lazy-loaded AJV instance with formats\n * @param {Object} options - AJV configuration options\n * @returns {Promise<Ajv>} Configured AJV instance with formats added\n */\nexport async function createLazyAjv(options = {}) {\n  const Ajv = await lazyLoadAjv();\n  const addFormats = await lazyLoadAjvFormats();\n  const ajv = new Ajv(options);\n  addFormats(ajv);\n  return ajv;\n}\n\n/**\n * Lazy factory utilities for unified access\n */\nconst LazyFactoryService = {\n  createLazyOctokit,\n  createLazyBpmnModeler,\n  createLazyBpmnViewer,\n  createLazyAjv\n};\n\nexport default LazyFactoryService;"],"names":["BPMNViewerContent","_location$state","_location$state2","location","useLocation","navigate","useNavigate","viewerRef","useRef","containerRef","profile","repository","branch","asset","loading","pageLoading","error","pageError","usePage","console","log","state","component","selectedFile","selectedBranch","currentProfile","currentRepository","currentBranch","currentSelectedFile","useMemo","name","split","pop","path","setLoading","useState","loadingStep","setLoadingStep","setError","hasWriteAccess","setHasWriteAccess","enhancedFullwidth","setEnhancedFullwidth","autoHide","setAutoHide","useEffect","async","_currentRepository$pe","writeAccess","token","permissions","push","warn","checkPermissions","loadBpmnContent","useCallback","_currentRepository$ow","hasViewer","current","owner","hasSelectedFile","hasRepository","login","full_name","repoName","ref","_currentSelectedFile$","_currentSelectedFile$2","bpmnXml","isDemo","default_branch","size","derivedOwner","githubServiceAuthenticated","githubService","isAuth","concat","JSON","stringify","includes","sha","startsWith","processName","replace","getFileContent","trim","Error","importXML","get","zoom","centerError","forceVisibility","container","querySelectorAll","forEach","element","style","opacity","visibility","display","tagName","toLowerCase","fontWeight","fontStyle","fontVariant","removeAttribute","closest","fill","stroke","strokeWidth","setTimeout","observer","MutationObserver","mutations","needsUpdate","mutation","type","observe","childList","subtree","attributes","attributeFilter","_bpmnObserver","err","message","status","stack","file","cleanupContainer","innerHTML","waitForContainer","attempt","arguments","length","undefined","hasContainer","containerRefCurrent","viewerRefCurrent","className","clientWidth","clientHeight","createLazyBpmnViewer","containerExists","containerContent","retryError","reason","initializeViewer","destroy","disconnect","document","body","classList","remove","add","pathname","filter","segment","hasProfile","isAssetURL","_jsx","children","_jsxs","onClick","handleToggleAutoHide","title","handleToggleEnhancedFullwidth","newState","handleBackToSelection","handleEditMode","_currentRepository$ow2","alert","mode","width","height","toFixed","BPMNViewerComponent","PageLayout","pageName","createLazyOctokit","options","lazyLoadOctokit","createLazyBpmnModeler","lazyLoadBpmnModeler","lazyLoadBpmnViewer"],"sourceRoot":""}