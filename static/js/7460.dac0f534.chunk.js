"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[7460],{87460:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(65043),r=a(29001),i=a(98714),n=a(89547);const l=new class{constructor(){this.isDevelopment=!1,this.baseUrl=this.isDevelopment?"/api/who":"https://iris.who.int",this.restApi="".concat(this.baseUrl,"/rest"),this.searchEndpoint="".concat(this.restApi,"/discover/search/objects"),this.originalBaseUrl="https://iris.who.int"}async search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dc.title",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"asc";try{const i=new URLSearchParams({query:e,page:t.toString(),size:a.toString(),sort:"".concat(s,",").concat(r)}),n="".concat(this.searchEndpoint,"?").concat(i),l=await fetch(n,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","User-Agent":"SGEX-Workbench/1.0 (WHO Digital Library Integration)","Cache-Control":"no-cache"}});if(!l.ok){if(403===l.status)return console.warn("WHO Digital Library API returned 403 - using demonstration data"),this.getMockSearchResults(e,t,a);if(500===l.status)return console.warn("WHO Digital Library API returned 500 - using demonstration data"),this.getMockSearchResults(e,t,a);throw 429===l.status?new Error("Rate limit exceeded (HTTP 429): Too many requests to the WHO Digital Library API. Please wait a moment before searching again."):404===l.status?new Error("Service not found (HTTP 404): The WHO Digital Library API endpoint may have changed. Please check for updates."):new Error("HTTP error! status: ".concat(l.status," - Unable to access WHO Digital Library API"))}const o=await l.json();return this.processSearchResults(o)}catch(i){if(console.error("Error searching WHO digital library:",i),"Failed to fetch"===i.message||"TypeError"===i.name){if(this.isDevelopment)return console.warn("Network error accessing WHO API, providing demonstration data"),this.getMockSearchResults(e,t,a);throw new Error("Unable to access WHO Digital Library. This may be due to network restrictions or the service being temporarily unavailable.")}if(i.message.includes("Access denied (HTTP 403)")||i.message.includes("Server error (HTTP 500)")||i.message.includes("demonstration data"))return this.getMockSearchResults(e,t,a);throw new Error("Failed to search WHO digital library: ".concat(i.message))}}async getItemMetadata(e){try{const t="".concat(this.restApi,"/core/items/").concat(e),a=await fetch(t,{method:"GET",headers:{Accept:"application/json","User-Agent":"SGEX-Workbench/1.0 (WHO Digital Library Integration)","Cache-Control":"no-cache"}});if(!a.ok)throw 403===a.status?new Error("Access denied (HTTP 403): Unable to fetch item metadata due to API access restrictions."):404===a.status?new Error("Item not found (HTTP 404): The requested item may have been removed or the identifier is invalid."):new Error("HTTP error! status: ".concat(a.status));const s=await a.json();return this.processDublinCoreMetadata(s)}catch(t){throw console.error("Error fetching item metadata:",t),new Error("Failed to fetch item metadata: ".concat(t.message))}}processSearchResults(e){var t,a,s,r,i;if(!e||!e._embedded||!e._embedded.searchResult)return{items:[],totalElements:0,totalPages:0,currentPage:0,size:0};const n=e._embedded.searchResult;return{items:((null===(t=n._embedded)||void 0===t?void 0:t.objects)||[]).map(e=>{var t;return this.processDublinCoreMetadata((null===(t=e._embedded)||void 0===t?void 0:t.indexableObject)||e)}),totalElements:(null===(a=n.page)||void 0===a?void 0:a.totalElements)||0,totalPages:(null===(s=n.page)||void 0===s?void 0:s.totalPages)||0,currentPage:(null===(r=n.page)||void 0===r?void 0:r.number)||0,size:(null===(i=n.page)||void 0===i?void 0:i.size)||0}}processDublinCoreMetadata(e){if(!e||!e.metadata)return null;const t=e.metadata,a=e=>{const a=t[e];return a&&Array.isArray(a)?0===a.length?null:1===a.length?a[0].value:a.map(e=>e.value):null};return{id:e.uuid||e.id,handle:e.handle,title:a("dc.title")||"Untitled",creator:a("dc.creator"),author:a("dc.contributor.author"),subject:a("dc.subject"),keywords:a("dc.subject.keyword"),description:a("dc.description"),abstract:a("dc.description.abstract"),publisher:a("dc.publisher")||"World Health Organization",date:a("dc.date"),dateIssued:a("dc.date.issued"),dateCreated:a("dc.date.created"),type:a("dc.type"),format:a("dc.format"),identifier:a("dc.identifier"),doi:a("dc.identifier.doi"),isbn:a("dc.identifier.isbn"),uri:a("dc.identifier.uri"),source:a("dc.source"),language:a("dc.language")||a("dc.language.iso"),relation:a("dc.relation"),coverage:a("dc.coverage"),rights:a("dc.rights"),whoRegion:a("who.region"),whoTopic:a("who.topic"),whoDocumentType:a("who.document.type"),url:this.constructItemUrl(e.handle),downloadUrl:this.constructDownloadUrl(e.uuid),rawMetadata:t}}constructItemUrl(e){return e?"".concat(this.originalBaseUrl,"/handle/").concat(e):null}constructDownloadUrl(e){return e?"".concat(this.restApi,"/core/bitstreams/search/findByItem?uuid=").concat(e):null}async getSuggestions(e){if(!e||e.length<2)return[];try{const t=await this.search(e,0,10),a=new Set;return t.items.forEach(e=>{e.title&&a.add(e.title),e.subject&&(Array.isArray(e.subject)?e.subject.forEach(e=>a.add(e)):a.add(e.subject))}),Array.from(a).slice(0,10)}catch(t){return console.error("Error getting suggestions:",t),[]}}async getFeaturedItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{return(await this.search("*",0,e,"dc.date.issued","desc")).items}catch(t){return console.error("Error fetching featured items:",t),t.message.includes("CORS policy")||t.message.includes("Failed to fetch")||t.message.includes("Server error (HTTP 500)")||t.message.includes("Access denied (HTTP 403)")?(console.warn("Using mock featured items due to API access issues"),this.getMockFeaturedItems()):[]}}getMockFeaturedItems(){return[{id:"featured-demo-1",title:"World Health Report 2023: Building Health Systems for Equity",creator:"World Health Organization",dateIssued:"2023",type:"Annual Report",abstract:"The World Health Report 2023 examines health equity and sustainable development, with a focus on strengthening health systems to achieve universal health coverage.",subject:["Health Systems","Equity","Universal Health Coverage"],url:"https://iris.who.int/browse",rawMetadata:{}},{id:"featured-demo-2",title:"Global Health Observatory: Health SDG Monitor 2023",creator:"World Health Organization",dateIssued:"2023",type:"Statistical Report",abstract:"Comprehensive monitoring of health-related Sustainable Development Goals (SDGs) with global, regional, and country-level data and analysis.",subject:["SDGs","Global Health","Statistics","Monitoring"],url:"https://iris.who.int/browse",rawMetadata:{}},{id:"featured-demo-3",title:"WHO Guidelines for Indoor Air Quality: Selected Pollutants",creator:"World Health Organization",dateIssued:"2023",type:"Health Guidelines",abstract:"Evidence-based guidelines for indoor air quality standards, covering key pollutants and their health impacts, with recommendations for policy makers.",subject:["Air Quality","Environmental Health","Guidelines"],url:"https://iris.who.int/browse",rawMetadata:{}},{id:"featured-demo-4",title:"Mental Health Atlas 2023",creator:"World Health Organization",dateIssued:"2023",type:"Atlas",abstract:"Global overview of mental health resources, services, and policies across WHO Member States, highlighting progress and gaps in mental health systems.",subject:["Mental Health","Health Systems","Global Atlas"],url:"https://iris.who.int/browse",rawMetadata:{}},{id:"featured-demo-5",title:"Immunization Agenda 2030: A Global Strategy",creator:"World Health Organization",dateIssued:"2023",type:"Strategy Document",abstract:"Comprehensive strategy for achieving immunization goals by 2030, including approaches for reaching zero-dose children and strengthening immunization systems.",subject:["Immunization","Vaccination","Global Strategy"],url:"https://iris.who.int/browse",rawMetadata:{}}]}getMockSearchResults(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;const s=this.generateRelevantMockResults(e);return{items:s.slice(t*a,(t+1)*a),totalElements:s.length,totalPages:Math.ceil(s.length/a),currentPage:t,size:a}}generateRelevantMockResults(e){const t=e.toLowerCase(),a={hiv:[{id:"demo-hiv-1",title:"Consolidated Guidelines on HIV Prevention, Testing and Treatment, Service Delivery and Monitoring",creator:"World Health Organization",dateIssued:"2023",type:"Guidelines",abstract:"These consolidated guidelines provide updated recommendations on HIV prevention, testing, treatment, service delivery and monitoring for a public health approach.",subject:["HIV","Prevention","Treatment","Guidelines"],url:"https://iris.who.int/bitstream/handle/10665/375121/9789240073097-eng.pdf",rawMetadata:{}},{id:"demo-hiv-2",title:"HIV Strategic Information for Impact: Cascade Data Use Manual",creator:"World Health Organization",dateIssued:"2022",type:"Technical Manual",abstract:"This manual provides guidance on using HIV cascade data to inform program planning, implementation, and monitoring.",subject:["HIV","Data Analysis","Program Management"],url:"https://iris.who.int/handle/10665/354462",rawMetadata:{}}],covid:[{id:"demo-covid-1",title:"COVID-19 Clinical Management: Living Guidance",creator:"World Health Organization",dateIssued:"2023",type:"Clinical Guidelines",abstract:"This living guidance provides evidence-based recommendations for the clinical management of COVID-19 in adults, children and adolescents.",subject:["COVID-19","Clinical Management","Treatment"],url:"https://iris.who.int/handle/10665/368745",rawMetadata:{}},{id:"demo-covid-2",title:"WHO Coronavirus (COVID-19) Dashboard",creator:"World Health Organization",dateIssued:"2023",type:"Data Resource",abstract:"Real-time data and insights on the COVID-19 pandemic, including case numbers, vaccination rates, and epidemiological trends.",subject:["COVID-19","Epidemiology","Surveillance"],url:"https://iris.who.int/handle/10665/361234",rawMetadata:{}}],malaria:[{id:"demo-malaria-1",title:"World Malaria Report 2023",creator:"World Health Organization",dateIssued:"2023",type:"Annual Report",abstract:"The World Malaria Report 2023 provides a comprehensive update on global progress towards malaria elimination goals.",subject:["Malaria","Global Health","Elimination"],url:"https://iris.who.int/handle/10665/374472",rawMetadata:{}}],tuberculosis:[{id:"demo-tb-1",title:"WHO Consolidated Guidelines on Tuberculosis: Module 4: Treatment",creator:"World Health Organization",dateIssued:"2022",type:"Treatment Guidelines",abstract:"Updated recommendations for the treatment of drug-susceptible and drug-resistant tuberculosis in adults and children.",subject:["Tuberculosis","Treatment","Drug Resistance"],url:"https://iris.who.int/handle/10665/352984",rawMetadata:{}}],mental:[{id:"demo-mental-1",title:"Mental Health and Climate Change: Policy Brief",creator:"World Health Organization",dateIssued:"2023",type:"Policy Brief",abstract:"This policy brief outlines the mental health impacts of climate change and provides recommendations for health systems.",subject:["Mental Health","Climate Change","Health Policy"],url:"https://iris.who.int/handle/10665/366756",rawMetadata:{}}],nutrition:[{id:"demo-nutrition-1",title:"Guideline: Sugars Intake for Adults and Children",creator:"World Health Organization",dateIssued:"2023",type:"Nutrition Guideline",abstract:"WHO recommendations on free sugars intake for adults and children to reduce risk of noncommunicable diseases.",subject:["Nutrition","Sugar","NCDs","Prevention"],url:"https://iris.who.int/handle/10665/149782",rawMetadata:{}}]};let s=[];for(const[r,i]of Object.entries(a))(t.includes(r)||t.includes(r.slice(0,-1)))&&s.push(...i);return 0===s.length&&(s=[{id:"demo-general-1",title:"Global Health Observatory Data on ".concat(e),creator:"World Health Organization",dateIssued:"2023",type:"Data Repository",abstract:"Global health statistics and data related to ".concat(e,". This demonstration result shows how WHO publications would appear in search results."),subject:[e,"Global Health","Statistics"],url:"https://iris.who.int/browse",rawMetadata:{}},{id:"demo-general-2",title:"WHO Technical Report: ".concat(e," Analysis"),creator:"World Health Organization",dateIssued:"2022",type:"Technical Report",abstract:"Technical analysis and recommendations related to ".concat(e,". This is demonstration content showing the WHO Digital Library integration."),subject:[e,"Technical Analysis","WHO Publications"],url:"https://iris.who.int/browse",rawMetadata:{}},{id:"demo-general-3",title:"Policy Brief: ".concat(e," and Global Health"),creator:"World Health Organization",dateIssued:"2023",type:"Policy Brief",abstract:"Policy recommendations and guidance on ".concat(e," for health systems and policymakers."),subject:[e,"Policy","Health Systems"],url:"https://iris.who.int/browse",rawMetadata:{}}]),s}formatCitation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apa";if(!e)return"";const a=e.title||"Untitled",s=e.creator||e.author||"World Health Organization",r=e.dateIssued||e.date||"n.d.",i=e.publisher||"World Health Organization",n=e.url;switch(t.toLowerCase()){case"apa":return"".concat(s,". (").concat(r,"). ").concat(a,". ").concat(i,". ").concat(n);case"chicago":return"".concat(s,'. "').concat(a,'." ').concat(i,", ").concat(r,". ").concat(n,".");case"vancouver":return"".concat(s,". ").concat(a,". ").concat(i,"; ").concat(r,". Available from: ").concat(n);default:return"".concat(s,". ").concat(a,". ").concat(i,", ").concat(r,". Available from: ").concat(n)}}};var o=a(70579);const c=e=>{let{onReferencesChange:t}=e;const[a,r]=(0,s.useState)(""),[i,n]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[h,u]=(0,s.useState)(!1),[m,g]=(0,s.useState)(0),[p,b]=(0,s.useState)(0),[v,j]=(0,s.useState)(0),[f,y]=(0,s.useState)(null),[x,w]=(0,s.useState)([]),[N,H]=(0,s.useState)(!1),[I,S]=(0,s.useState)([]),T=(0,s.useRef)(null);(0,s.useEffect)(()=>{const e=localStorage.getItem("whoDigitalLibraryReferences");if(e)try{const a=JSON.parse(e);d(a),t&&t(a)}catch(f){console.error("Error loading saved references:",f)}O()},[t]),(0,s.useEffect)(()=>{localStorage.setItem("whoDigitalLibraryReferences",JSON.stringify(c)),t&&t(c)},[c,t]);const O=async()=>{try{const e=await l.getFeaturedItems(5);S(e)}catch(f){console.error("Error loading featured items:",f)}},W=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.trim())return n([]),b(0),void j(0);u(!0),y(null);try{const a=await l.search(e,t,10);n(a.items),b(a.totalPages),j(a.totalElements),g(t)}catch(f){y(f.message),n([])}finally{u(!1)}},A=e=>{e>=0&&e<p&&W(a,e)},C=e=>{if(!e)return"Date not available";Array.isArray(e)&&(e=e[0]);try{return new Date(e).getFullYear()}catch(t){return e}},D=e=>e?Array.isArray(e)?e.slice(0,3).join(", ")+(e.length>3?", et al.":""):e:"Author not available",k=e=>(0,o.jsxs)("div",{className:"search-result-item",children:[(0,o.jsxs)("div",{className:"result-content",children:[(0,o.jsx)("h4",{className:"result-title",children:e.title}),(0,o.jsxs)("div",{className:"result-meta",children:[(0,o.jsx)("span",{className:"result-authors",children:D(e.creator)}),(0,o.jsxs)("span",{className:"result-date",children:["(",C(e.dateIssued),")"]}),e.type&&(0,o.jsx)("span",{className:"result-type",children:e.type})]}),e.abstract&&(0,o.jsx)("p",{className:"result-abstract",children:e.abstract.length>200?"".concat(e.abstract.substring(0,200),"..."):e.abstract}),e.subject&&(0,o.jsx)("div",{className:"result-subjects",children:(Array.isArray(e.subject)?e.subject:[e.subject]).slice(0,3).map((e,t)=>(0,o.jsx)("span",{className:"subject-tag",children:e},t))})]}),(0,o.jsxs)("div",{className:"result-actions",children:[(0,o.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"btn-secondary small",title:"View in WHO Digital Library",children:"View"}),(0,o.jsx)("button",{onClick:()=>(e=>{c.some(t=>t.id===e.id)||d(t=>[...t,e])})(e),className:"btn-primary small",disabled:c.some(t=>t.id===e.id),children:c.some(t=>t.id===e.id)?"Added":"Add"})]})]},e.id),P=e=>(0,o.jsxs)("div",{className:"selected-reference-item",children:[(0,o.jsxs)("div",{className:"reference-content",children:[(0,o.jsx)("h5",{className:"reference-title",children:e.title}),(0,o.jsxs)("div",{className:"reference-meta",children:[(0,o.jsx)("span",{className:"reference-authors",children:D(e.creator)}),(0,o.jsxs)("span",{className:"reference-date",children:["(",C(e.dateIssued),")"]})]}),(0,o.jsx)("div",{className:"reference-citation",children:l.formatCitation(e,"apa")})]}),(0,o.jsxs)("div",{className:"reference-actions",children:[(0,o.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"btn-link small",title:"View in WHO Digital Library",children:"View"}),(0,o.jsx)("button",{onClick:()=>{return t=e.id,void d(e=>e.filter(e=>e.id!==t));var t},className:"btn-danger small",title:"Remove reference",children:"Remove"})]})]},e.id);return(0,o.jsxs)("div",{className:"who-digital-library",children:[(0,o.jsxs)("div",{className:"library-header",children:[(0,o.jsxs)("div",{className:"header-content",children:[(0,o.jsx)("h3",{children:"WHO Digital Library"}),(0,o.jsx)("p",{className:"library-description",children:"Search and select references from the WHO Institutional Repository for Health Information (IRIS)"}),(0,o.jsx)("div",{className:"library-help",children:(0,o.jsx)("a",{href:"https://iris.who.int/help",target:"_blank",rel:"noopener noreferrer",className:"help-link",title:"Get help with WHO Digital Library search",children:"\ud83d\udcd6 Search Help & Documentation"})})]}),(0,o.jsxs)("div",{className:"library-stats",children:[(0,o.jsxs)("div",{className:"stat",children:[(0,o.jsx)("span",{className:"stat-number",children:c.length}),(0,o.jsx)("span",{className:"stat-label",children:"Selected"})]}),v>0&&(0,o.jsxs)("div",{className:"stat",children:[(0,o.jsx)("span",{className:"stat-number",children:v.toLocaleString()}),(0,o.jsx)("span",{className:"stat-label",children:"Results"})]})]})]}),(0,o.jsxs)("div",{className:"search-section",children:[(0,o.jsx)("form",{onSubmit:e=>{e.preventDefault(),H(!1),W()},className:"search-form",children:(0,o.jsxs)("div",{className:"search-input-container",children:[(0,o.jsx)("input",{ref:T,type:"text",value:a,onChange:async e=>{const t=e.target.value;if(r(t),t.length>=2)try{const e=await l.getSuggestions(t);w(e),H(!0)}catch(f){console.error("Error getting suggestions:",f),w([])}else w([]),H(!1)},placeholder:"Search WHO digital library...",className:"search-input",onBlur:()=>setTimeout(()=>H(!1),200),onFocus:()=>x.length>0&&H(!0)}),(0,o.jsx)("button",{type:"submit",className:"search-button",disabled:h,children:h?"Searching...":"Search"}),N&&x.length>0&&(0,o.jsx)("div",{className:"suggestions-dropdown",children:x.map((e,t)=>(0,o.jsx)("div",{className:"suggestion-item",onClick:()=>(e=>{r(e),H(!1),W(e)})(e),children:e},t))})]})}),f&&(0,o.jsxs)("div",{className:"error-message",children:[(0,o.jsx)("strong",{children:"Search Error:"})," ",f,(f.includes("CORS policy")||f.includes("restart the development server"))&&(0,o.jsxs)("div",{className:"error-help",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Development Mode:"})," ",f.includes("restart")?"The WHO Digital Library proxy is now configured. Please restart your development server (npm start) to enable API access.":"This error occurs in development mode due to browser security restrictions."]}),(0,o.jsxs)("p",{children:["For help with WHO Digital Library search, visit: "," ",(0,o.jsx)("a",{href:"https://iris.who.int/help",target:"_blank",rel:"noopener noreferrer",className:"help-link",children:"iris.who.int/help"})]})]}),f.includes("HTTP 403")&&(0,o.jsxs)("div",{className:"error-help",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"API Access Issue:"})," The WHO Digital Library is currently restricting access to its search API."]}),(0,o.jsx)("p",{children:(0,o.jsx)("strong",{children:"Possible solutions:"})}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:"Wait a few minutes and try again (may be temporary rate limiting)"}),(0,o.jsx)("li",{children:"Try a different, more specific search term"}),(0,o.jsxs)("li",{children:["Browse the WHO Digital Library directly: ",(0,o.jsx)("a",{href:"https://iris.who.int",target:"_blank",rel:"noopener noreferrer",children:"iris.who.int"})]}),(0,o.jsxs)("li",{children:["For API access guidelines, visit: ",(0,o.jsx)("a",{href:"https://iris.who.int/help",target:"_blank",rel:"noopener noreferrer",children:"iris.who.int/help"})]})]}),(0,o.jsx)("p",{children:(0,o.jsx)("em",{children:"Note: This integration provides direct access to WHO's public API. Access policies and availability are controlled by WHO."})})]}),(f.includes("HTTP 429")||f.includes("rate limit"))&&(0,o.jsxs)("div",{className:"error-help",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Rate Limit:"})," Too many requests have been made to the WHO Digital Library API."]}),(0,o.jsx)("p",{children:"Please wait a few minutes before searching again. You can browse featured items below in the meantime."})]})]})]}),(0,o.jsxs)("div",{className:"library-content",children:[(0,o.jsxs)("div",{className:"search-results-section",children:[(0,o.jsxs)("div",{className:"section-header",children:[(0,o.jsx)("h4",{children:"Search Results"}),v>0&&(0,o.jsxs)("span",{className:"results-count",children:[v.toLocaleString()," results found"]})]}),0===i.length&&!h&&""===a&&(0,o.jsxs)("div",{className:"featured-items",children:[(0,o.jsx)("h5",{children:"Featured Items"}),(0,o.jsx)("p",{children:"Recent publications from the WHO Digital Library:"}),I.length>0?(0,o.jsx)("div",{className:"featured-items-grid",children:I.map(e=>k(e))}):(0,o.jsx)("p",{className:"no-results",children:"Loading featured items..."})]}),0===i.length&&!h&&""!==a&&(0,o.jsxs)("div",{className:"no-results",children:[(0,o.jsxs)("p",{children:['No results found for "',a,'"']}),(0,o.jsx)("p",{children:"Try different keywords or browse featured items above."})]}),h&&(0,o.jsxs)("div",{className:"loading-results",children:[(0,o.jsx)("div",{className:"loading-spinner"}),(0,o.jsx)("p",{children:"Searching WHO Digital Library..."})]}),i.length>0&&(0,o.jsxs)("div",{className:"search-results",children:[i.map(e=>k(e)),p>1&&(0,o.jsxs)("div",{className:"pagination",children:[(0,o.jsx)("button",{onClick:()=>A(m-1),disabled:0===m,className:"btn-secondary",children:"Previous"}),(0,o.jsxs)("span",{className:"page-info",children:["Page ",m+1," of ",p]}),(0,o.jsx)("button",{onClick:()=>A(m+1),disabled:m>=p-1,className:"btn-secondary",children:"Next"})]})]})]}),(0,o.jsxs)("div",{className:"selected-references-section",children:[(0,o.jsxs)("div",{className:"section-header",children:[(0,o.jsx)("h4",{children:"Selected References"}),c.length>0&&(0,o.jsx)("button",{onClick:()=>{d([])},className:"btn-danger small",title:"Clear all references",children:"Clear All"})]}),0===c.length?(0,o.jsxs)("div",{className:"no-references",children:[(0,o.jsx)("p",{children:"No references selected yet."}),(0,o.jsx)("p",{children:"Search and add references from the WHO Digital Library to build your reference list."})]}):(0,o.jsx)("div",{className:"selected-references",children:c.map(e=>P(e))})]})]})]})};var d=a(19794);const h=()=>{const e=(0,r.zy)(),t=(0,r.Zp)(),{params:a}=(0,i.HX)(),[l,h]=(0,s.useState)([]),u=(0,d.A)("sgex-mascot.png"),{profile:m,repository:g}=e.state||{},p=null===a||void 0===a?void 0:a.user,b=null===a||void 0===a?void 0:a.repo,v={id:"health-interventions",name:"Health Interventions"},j=(0,s.useCallback)(e=>{h(e)},[]);return(0,o.jsxs)("div",{className:"component-editor",children:[(0,o.jsxs)("div",{className:"editor-header",children:[(0,o.jsxs)("div",{className:"who-branding",children:[(0,o.jsx)("h1",{onClick:()=>{t("/")},className:"clickable-title",children:"SGEX Workbench"}),(0,o.jsx)("p",{className:"subtitle",children:"WHO SMART Guidelines Exchange"})]}),(0,o.jsxs)("div",{className:"context-info",children:[(0,o.jsx)("img",{src:null!==m&&void 0!==m&&m.avatar_url||p?"https://github.com/".concat(p,".png"):u,alt:"Profile",className:"context-avatar"}),(0,o.jsxs)("div",{className:"context-details",children:[(0,o.jsx)("span",{className:"context-repo",children:(null===g||void 0===g?void 0:g.name)||b||"Repository"}),(0,o.jsx)("span",{className:"context-component",children:v.name})]})]})]}),(0,o.jsx)("div",{className:"editor-content",children:(0,o.jsx)(c,{onReferencesChange:j,selectedReferences:l})}),(0,o.jsx)(n.A,{pageId:"health-interventions-editor",contextData:{profile:m||{login:p},repository:g||{name:b},component:v,selectedReferencesCount:l.length}})]})},u=()=>{var e,t,a,l;const h=(0,r.zy)(),u=(0,r.Zp)(),{params:m}=(0,i.HX)(),[g,p]=(0,s.useState)([]),b=(0,d.A)("sgex-mascot.png"),{profile:v,repository:j,component:f}=h.state||{};let y=f;"/sgex/editor-health-interventions"!==h.pathname||f?m.componentId&&!f&&(y={id:m.componentId,name:m.componentId}):y={id:"health-interventions",name:"Health Interventions"};const x=(0,s.useCallback)(e=>{p(e)},[]),w=()=>{u("/")};if(!v||!j){var N;if("health-interventions"===(null===(N=y)||void 0===N?void 0:N.id)){const e={login:"demo-user",avatar_url:b,name:"Demo User"},t={name:"demo-repository"};return(0,o.jsxs)("div",{className:"component-editor",children:[(0,o.jsxs)("div",{className:"editor-header",children:[(0,o.jsxs)("div",{className:"who-branding",children:[(0,o.jsx)("h1",{onClick:w,className:"clickable-title",children:"SGEX Workbench"}),(0,o.jsx)("p",{className:"subtitle",children:"WHO SMART Guidelines Exchange"})]}),(0,o.jsxs)("div",{className:"context-info",children:[(0,o.jsx)("img",{src:e.avatar_url,alt:"Profile",className:"context-avatar"}),(0,o.jsxs)("div",{className:"context-details",children:[(0,o.jsx)("span",{className:"context-repo",children:t.name}),(0,o.jsx)("span",{className:"context-component",children:y.name})]})]})]}),(0,o.jsx)("div",{className:"editor-content",children:(0,o.jsx)(c,{onReferencesChange:x,selectedReferences:g})}),(0,o.jsx)(n.A,{pageId:"component-editor",contextData:{component:y}})]})}return u("/"),(0,o.jsx)("div",{children:"Redirecting..."})}return(0,o.jsx)("div",{className:"component-editor",children:(0,o.jsx)("div",{className:"editor-content",children:(0,o.jsx)("div",{className:"editor-main",children:(0,o.jsxs)("div",{className:"editor-placeholder",children:[(0,o.jsx)("div",{className:"component-icon",style:{color:y.color},children:y.icon}),(0,o.jsxs)("h2",{children:[y.name," Editor"]}),(0,o.jsxs)("p",{children:["This is where the ",null===(e=y.name)||void 0===e?void 0:e.toLowerCase()," editor will be implemented. The editor will support ",(null===(t=y.fileTypes)||void 0===t?void 0:t.join(", "))||"various"," files and provide specialized tools for ",(null===(a=y.description)||void 0===a?void 0:a.toLowerCase())||"component editing","."]}),(0,o.jsxs)("div",{className:"component-info",children:[(0,o.jsxs)("div",{className:"info-item",children:[(0,o.jsx)("strong",{children:"Component Type:"})," ",y.type||"Editor"]}),(0,o.jsxs)("div",{className:"info-item",children:[(0,o.jsx)("strong",{children:"File Types:"})," ",(null===(l=y.fileTypes)||void 0===l?void 0:l.join(", "))||"Various formats"]}),(0,o.jsxs)("div",{className:"info-item",children:[(0,o.jsx)("strong",{children:"Repository:"})," ",j.name]})]}),(0,o.jsxs)("div",{className:"placeholder-actions",children:[(0,o.jsx)("button",{className:"action-btn primary",onClick:()=>alert("File browser functionality coming soon!"),children:"Browse Files"}),(0,o.jsx)("button",{className:"action-btn secondary",onClick:()=>alert("Create new file functionality coming soon!"),children:"Create New File"})]})]})})})})},m=()=>{const e=(0,r.zy)().pathname.includes("/health-interventions/");return(0,o.jsx)(i.Mx,{pageName:"component-editor",children:e?(0,o.jsx)(h,{}):(0,o.jsx)(u,{})})}}}]);
//# sourceMappingURL=7460.dac0f534.chunk.js.map