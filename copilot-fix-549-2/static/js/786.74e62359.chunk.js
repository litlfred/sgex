"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[786],{12602:(e,t,n)=>{n.d(t,{A:()=>s});const s=new class{constructor(){this.universalTopics={documentation:{id:"sgex-documentation",title:"View Documentation",badge:"/sgex/cat-paw-info-icon.svg",type:"action",action:()=>{const e=window.location.pathname;let t="";if(e.includes("/sgex")){const n=e.split("/"),s=n.indexOf("sgex");-1!==s&&(t=n.length>s+2&&n[s+1]&&!["dashboard","docs","select_profile","dak-action","dak-selection"].includes(n[s+1])?"/".concat(n.slice(1,s+2).join("/")):"/".concat(n.slice(1,s+1).join("/")))}window.location.href="".concat(t,"/docs/overview")},content:'\n          <p>Access comprehensive documentation and guides for using SGEX Workbench.</p>\n          <div class="help-tip">\n            <strong>\ud83d\udcd6 Available Documentation:</strong> Requirements, Architecture, DAK Components, User Guides, and more.\n          </div>\n        '},bugReport:{id:"report-sgex-bug",title:"Report a SGeX bug",badge:"/sgex/cat-paw-bug-icon.svg",type:"slideshow",content:[{title:"Report a Bug or Issue",content:'\n              <p>Help us improve SGeX by reporting bugs and issues:</p>\n              <h4>What type of issue are you experiencing?</h4>\n              <div class="bug-report-options">\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openSgexIssue(\'bug\')">\n                  \ud83d\udc1b Bug Report - Something isn\'t working correctly\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openSgexIssue(\'feature\')">\n                  \u2728 Feature Request - Suggest a new feature or improvement\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openSgexIssue(\'question\')">\n                  \u2753 Question - Ask for help or clarification\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openSgexIssue(\'documentation\')">\n                  \ud83d\udcda Documentation Issue - Report problems with documentation\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openSgexIssue(\'blank\')">\n                  \ud83d\udcdd Blank Issue - Create an issue without a template\n                </button>\n              </div>\n              <div class="help-tip">\n                <strong>\ud83d\udca1 Tip:</strong> Please provide as much detail as possible including steps to reproduce, expected behavior, and actual behavior.\n              </div>\n              <div class="help-fallback">\n                <strong>\ud83d\udd17 Can\'t access GitHub?</strong> If the buttons above don\'t work in your environment:\n                <ol>\n                  <li>Email us directly at <a href="mailto:smart@who.int?subject=SGEX Bug Report">smart@who.int</a></li>\n                  <li>Or visit <a href="https://github.com/litlfred/sgex/issues/new" target="_blank">github.com/litlfred/sgex/issues/new</a> manually</li>\n                </ol>\n              </div>\n            '}]},dakFeedback:{id:"provide-dak-feedback",title:"Provide DAK Feedback",type:"slideshow",content:[{title:"Provide Feedback on this DAK",content:'\n              <p>Share feedback about this Digital Adaptation Kit (DAK):</p>\n              <h4>What type of feedback do you have?</h4>\n              <div class="bug-report-options">\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'content\')">\n                  \ud83d\udcdd Report DAK Content Error - Problems with clinical content or logic\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'bug\')">\n                  \ud83d\udc1b DAK Bug - Issue with this specific DAK content\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'improvement\')">\n                  \ud83d\udcc8 DAK Improvement - Suggest enhancements to this DAK\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'question\')">\n                  \u2753 DAK Question - Ask about this DAK\'s implementation\n                </button>\n                <button class="bug-type-btn" onclick="window.helpModalInstance?.openDakIssue(\'blank\')">\n                  \ud83d\udcdd Blank DAK Issue - Create an issue without a template\n                </button>\n              </div>\n              <div class="help-tip">\n                <strong>\ud83d\udca1 Note:</strong> This will open an issue in the selected DAK repository for targeted feedback.\n              </div>\n            '}]}},this.helpTopics={"landing-page-unauthenticated":[{id:"github-pat-setup",title:"How to Create a GitHub Personal Access Token",badge:"/sgex/cat-paw-lock-icon.svg",type:"slideshow",content:[{title:"Step 1: Go to GitHub Settings",content:'\n                <p>Navigate to your GitHub account settings:</p>\n                <ol>\n                  <li>Click your profile picture in the top right</li>\n                  <li>Select "Settings" from the dropdown</li>\n                  <li>Go to "Developer settings" \u2192 "Personal access tokens"</li>\n                  <li>Choose "Fine-grained tokens" (recommended) or "Tokens (classic)"</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> Fine-grained tokens provide better security with repository-specific access.\n                </div>\n              '},{title:"Step 2: Generate New Token",content:'\n                <p>Create your new token:</p>\n                <ol>\n                  <li>Click "Generate new token"</li>\n                  <li>Give it a descriptive name like "SGEX Workbench"</li>\n                  <li>Set expiration (90 days recommended)</li>\n                  <li>Select repository access (specific repos or all)</li>\n                </ol>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Important:</strong> You\'ll only see the token once, so copy it immediately!\n                </div>\n              '},{title:"Step 3: Set Required Permissions",content:"\n                <p>For <strong>fine-grained tokens</strong>, enable:</p>\n                <ul>\n                  <li><strong>Contents:</strong> Read and Write</li>\n                  <li><strong>Metadata:</strong> Read</li>\n                  <li><strong>Pull requests:</strong> Read and Write</li>\n                </ul>\n                <p>For <strong>classic tokens</strong>, select:</p>\n                <ul>\n                  <li><strong>repo</strong> - Full control of private repositories</li>\n                  <li><strong>read:org</strong> - Read org and team membership</li>\n                </ul>\n              "},{title:"Step 4: Use Your Token",content:'\n                <p>Now you can authenticate with SGEX:</p>\n                <ol>\n                  <li>Copy your newly generated token</li>\n                  <li>Paste it into the login form</li>\n                  <li>Click "Sign in with Personal Access Token"</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udd12 Security:</strong> Your token is stored securely in your browser and never shared with servers.\n                </div>\n              '}]}],"landing-page-authenticated":[{id:"profile-selection",title:"Selecting Your Profile or Organization",type:"slideshow",content:[{title:"Understanding Profile Types",content:'\n                <p>SGEX shows different types of profiles:</p>\n                <ul>\n                  <li><strong>Personal:</strong> Your individual GitHub repositories</li>\n                  <li><strong>Organization:</strong> Repositories belonging to organizations you\'re a member of</li>\n                  <li><strong>WHO Official:</strong> World Health Organization repositories (always available)</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> DAK count badges show how many SMART Guidelines repositories were found.\n                </div>\n              '}]}],"dak-action-selection":[{id:"choosing-dak-action",title:"Choosing Your DAK Action",type:"slideshow",content:[{title:"Understanding DAK Actions",content:'\n                <p>Choose the right action for your workflow:</p>\n                <ul>\n                  <li><strong>Edit Existing DAK:</strong> Modify an existing repository you have write access to</li>\n                  <li><strong>Fork and Edit:</strong> Create your own copy of a repository to work on</li>\n                  <li><strong>Create New DAK:</strong> Start a brand new DAK repository from scratch</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> If you\'re not sure, start with "Edit Existing DAK" if you have permissions, or "Fork and Edit" to experiment safely.\n                </div>\n              '}]}],"documentation-viewer":[{id:"navigation-help",title:"Navigating Documentation",type:"slideshow",content:[{title:"Using the Documentation Viewer",content:'\n                <p>The documentation viewer provides easy access to all project information:</p>\n                <ul>\n                  <li>Use the sidebar menu to navigate between sections</li>\n                  <li>Use the dropdown to quickly jump to any document</li>\n                  <li>Click "Back" to return to the previous page</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udcd6 Available Documentation:</strong> Requirements, Architecture, DAK Components, and more.\n                </div>\n              '}]}],"dak-dashboard":[{id:"dak-components-overview",title:"Understanding DAK Components",type:"slideshow",content:[{title:"WHO SMART Guidelines DAK Components",content:"\n                <p>Digital Adaptation Kits (DAKs) contain 8 core components organized in two levels:</p>\n                <h4>Level 2: Business Logic & Processes</h4>\n                <ul>\n                  <li><strong>Business Processes:</strong> BPMN workflows</li>\n                  <li><strong>Decision Support Logic:</strong> DMN decision tables</li>\n                  <li><strong>Indicators & Measures:</strong> Performance metrics</li>\n                  <li><strong>Data Entry Forms:</strong> Structured questionnaires</li>\n                </ul>\n                <h4>Level 3: Technical Implementation</h4>\n                <ul>\n                  <li><strong>Terminology:</strong> Code systems and value sets</li>\n                  <li><strong>FHIR Profiles:</strong> Resource structure definitions</li>\n                  <li><strong>FHIR Extensions:</strong> Custom data elements</li>\n                  <li><strong>Test Data & Examples:</strong> Sample data for validation</li>\n                </ul>\n              "}]}],"dak-selection":[{id:"choosing-dak-repository",title:"Selecting the Right DAK Repository",type:"slideshow",content:[{title:"Understanding DAK Repository Types",content:'\n                <p>Choose the right repository based on your workflow:</p>\n                <ul>\n                  <li><strong>Published DAKs:</strong> Official WHO repositories with complete implementations</li>\n                  <li><strong>Community DAKs:</strong> Community-maintained repositories with adaptations</li>\n                  <li><strong>Template DAKs:</strong> Starting templates for creating new DAKs</li>\n                  <li><strong>Private DAKs:</strong> Your private repositories or organization-specific DAKs</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> Look for the "SMART Guidelines" badge to ensure compatibility.\n                </div>\n              '}]}],"organization-selection":[{id:"selecting-organization",title:"Choosing an Organization",type:"slideshow",content:[{title:"Organization vs Personal Account",content:'\n                <p>Decide where to create or fork your DAK:</p>\n                <ul>\n                  <li><strong>Personal Account:</strong> For individual development and experimentation</li>\n                  <li><strong>Organization Account:</strong> For team collaboration and official implementations</li>\n                  <li><strong>WHO Official:</strong> Only for authorized WHO contributors</li>\n                </ul>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Important:</strong> Make sure you have the necessary permissions for the selected organization.\n                </div>\n              '}]}],"bpmn-editor":[{id:"using-bpmn-editor",title:"Using the BPMN Editor",type:"slideshow",content:[{title:"BPMN Business Process Modeling",content:'\n                <p>The BPMN editor helps you create and modify business process workflows:</p>\n                <ul>\n                  <li><strong>Drag and Drop:</strong> Use the palette to add process elements</li>\n                  <li><strong>Connect Elements:</strong> Click and drag to create sequence flows</li>\n                  <li><strong>Properties Panel:</strong> Configure element properties and conditions</li>\n                  <li><strong>Validation:</strong> The editor highlights errors and warnings</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> BPMN processes define the clinical workflow and decision logic for your DAK.\n                </div>\n              '}]}],"questionnaire-editor":[{id:"using-questionnaire-editor",title:"Using the FHIR Questionnaire Editor",badge:"/sgex/cat-paw-icon.svg",type:"slideshow",content:[{title:"FHIR Questionnaire Overview",content:'\n                <p>The FHIR Questionnaire editor helps you create and modify structured data collection forms:</p>\n                <ul>\n                  <li><strong>Visual Editor:</strong> Uses LHC-Forms for intuitive questionnaire design</li>\n                  <li><strong>FHIR Compliant:</strong> Generates standard FHIR R4 Questionnaire resources</li>\n                  <li><strong>Multilingual:</strong> Support for multiple languages and translations</li>\n                  <li><strong>Preview Mode:</strong> Test questionnaires as they would appear to users</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udccb File Location:</strong> Questionnaires are stored in <code>input/questionnaires/*.json</code>\n                </div>\n              '},{title:"Creating New Questionnaires",content:'\n                <p>To create a new FHIR Questionnaire:</p>\n                <ol>\n                  <li>Click "Create New Questionnaire" on the main screen</li>\n                  <li>A template questionnaire will be loaded in the editor</li>\n                  <li>Modify the questionnaire structure using the visual interface</li>\n                  <li>Add questions, sections, and response options</li>\n                  <li>Set validation rules and conditional logic</li>\n                </ol>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Remember:</strong> Save your work regularly using "Save to Staging" or "Commit to GitHub"\n                </div>\n              '},{title:"Editing Existing Questionnaires",content:'\n                <p>To modify existing questionnaires:</p>\n                <ol>\n                  <li>Select a questionnaire from the list</li>\n                  <li>The questionnaire will load in the LHC-Forms editor</li>\n                  <li>Make your changes using the visual interface</li>\n                  <li>Preview the form to test user experience</li>\n                  <li>Save changes when satisfied</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> Use the staging framework to test changes before committing to GitHub\n                </div>\n              '},{title:"Internationalization Support",content:'\n                <p>The questionnaire editor supports multiple languages:</p>\n                <ul>\n                  <li><strong>Language Selection:</strong> Use the language dropdown to switch between languages</li>\n                  <li><strong>Translations:</strong> Add translations for all text fields</li>\n                  <li><strong>FHIR Extensions:</strong> Uses standard FHIR translation extensions</li>\n                  <li><strong>Preview:</strong> Test questionnaires in different languages</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83c\udf0d Best Practice:</strong> Always provide translations for your target implementation languages\n                </div>\n              '}]},{id:"questionnaire-management",title:"Managing Questionnaire Assets",badge:"/sgex/cat-paw-file-icon.svg",type:"slideshow",content:[{title:"File Organization",content:'\n                <p>FHIR Questionnaires are organized as follows:</p>\n                <ul>\n                  <li><strong>Location:</strong> <code>input/questionnaires/</code> directory</li>\n                  <li><strong>Format:</strong> JSON files following FHIR R4 Questionnaire schema</li>\n                  <li><strong>Naming:</strong> Use descriptive names like <code>patient-registration.json</code></li>\n                  <li><strong>Validation:</strong> All files are validated against FHIR schema</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udcc1 Convention:</strong> Use kebab-case filenames for consistency\n                </div>\n              '},{title:"Version Control Integration",content:'\n                <p>The questionnaire editor integrates with GitHub for version control:</p>\n                <ul>\n                  <li><strong>Staging:</strong> Save changes locally before committing</li>\n                  <li><strong>Commits:</strong> Create meaningful commit messages</li>\n                  <li><strong>Branches:</strong> Work on different branches for features</li>\n                  <li><strong>History:</strong> Track changes and revert if needed</li>\n                </ul>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Important:</strong> Always test questionnaires before committing to main branch\n                </div>\n              '}]}],"component-editor":[{id:"component-editor-overview",title:"Understanding the Component Editor",type:"slideshow",content:[{title:"DAK Component Types",content:"\n                <p>The component editor provides specialized interfaces for different DAK components:</p>\n                <h4>Business Logic Components</h4>\n                <ul>\n                  <li><strong>Business Processes:</strong> BPMN workflow editor</li>\n                  <li><strong>Decision Logic:</strong> DMN decision table editor</li>\n                  <li><strong>Forms:</strong> Structured questionnaire builder</li>\n                </ul>\n                <h4>Technical Components</h4>\n                <ul>\n                  <li><strong>FHIR Resources:</strong> Profile and extension definitions</li>\n                  <li><strong>Terminology:</strong> Code systems and value sets</li>\n                  <li><strong>Test Data:</strong> Example data and test cases</li>\n                </ul>\n              "}]}],"pat-login":[{id:"pat-authentication-help",title:"Using Personal Access Tokens",badge:"/sgex/cat-paw-lock-icon.svg",type:"slideshow",content:[{title:"Why Personal Access Tokens?",content:'\n                <p>SGEX uses GitHub Personal Access Tokens (PATs) for secure authentication:</p>\n                <ul>\n                  <li><strong>No Backend Required:</strong> Works entirely in your browser</li>\n                  <li><strong>Fine-grained Control:</strong> Choose which repositories to access</li>\n                  <li><strong>Enhanced Security:</strong> Can be easily rotated and revoked</li>\n                  <li><strong>Privacy Focused:</strong> Your token never leaves your browser</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udd12 Security:</strong> SGEX stores your token locally and never transmits it to any server.\n                </div>\n              '}]}],"pat-setup-instructions":[{id:"detailed-pat-setup",title:"Detailed PAT Setup Guide",badge:"/sgex/cat-paw-lock-icon.svg",type:"slideshow",content:[{title:"Token Type Comparison",content:"\n                <p>GitHub offers two types of Personal Access Tokens:</p>\n                <h4>Fine-grained Tokens (Recommended)</h4>\n                <ul>\n                  <li>Repository-specific access control</li>\n                  <li>Better security with minimal permissions</li>\n                  <li>More granular permission settings</li>\n                  <li>Shorter default expiration times</li>\n                </ul>\n                <h4>Classic Tokens</h4>\n                <ul>\n                  <li>Broader scope-based permissions</li>\n                  <li>Simpler permission model</li>\n                  <li>Longer expiration options</li>\n                  <li>Works with all GitHub integrations</li>\n                </ul>\n              "}]}],welcome:[{id:"github-pat-setup",title:"How to Create a GitHub Personal Access Token",badge:"/sgex/cat-paw-lock-icon.svg",type:"slideshow",content:[{title:"Step 1: Go to GitHub Settings",content:'\n                <p>Navigate to your GitHub account settings:</p>\n                <ol>\n                  <li>Click your profile picture in the top right</li>\n                  <li>Select "Settings" from the dropdown</li>\n                  <li>Go to "Developer settings" \u2192 "Personal access tokens"</li>\n                  <li>Choose "Fine-grained tokens" (recommended) or "Tokens (classic)"</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Tip:</strong> Fine-grained tokens provide better security with repository-specific access.\n                </div>\n              '},{title:"Step 2: Generate New Token",content:'\n                <p>Create your new token:</p>\n                <ol>\n                  <li>Click "Generate new token"</li>\n                  <li>Give it a descriptive name like "SGEX Workbench"</li>\n                  <li>Set expiration (90 days recommended)</li>\n                  <li>Select repository access (specific repos or all)</li>\n                </ol>\n                <div class="help-warning">\n                  <strong>\u26a0\ufe0f Important:</strong> You\'ll only see the token once, so copy it immediately!\n                </div>\n              '},{title:"Step 3: Set Required Permissions",content:"\n                <p>For <strong>fine-grained tokens</strong>, enable:</p>\n                <ul>\n                  <li><strong>Contents:</strong> Read and Write</li>\n                  <li><strong>Metadata:</strong> Read</li>\n                  <li><strong>Pull requests:</strong> Read and Write</li>\n                </ul>\n                <p>For <strong>classic tokens</strong>, select:</p>\n                <ul>\n                  <li><strong>repo</strong> - Full control of private repositories</li>\n                  <li><strong>read:org</strong> - Read org and team membership</li>\n                </ul>\n              "},{title:"Step 4: Use Your Token",content:'\n                <p>Now you can authenticate with SGEX:</p>\n                <ol>\n                  <li>Copy your newly generated token</li>\n                  <li>Paste it into the login form</li>\n                  <li>Click "Sign in with Personal Access Token"</li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udd12 Security:</strong> Your token is stored securely in your browser and never shared with servers.\n                </div>\n              '}]}],"dak-configuration":[{id:"dak-configuration-guide",title:"Configuring Your DAK",type:"slideshow",content:[{title:"Understanding DAK Configuration",content:"\n                <p>When creating a new DAK, you need to configure both repository and FHIR settings:</p>\n                <h4>Repository Configuration</h4>\n                <ul>\n                  <li><strong>Repository Name:</strong> GitHub repository identifier (lowercase with hyphens)</li>\n                  <li><strong>Description:</strong> Brief description of your DAK's purpose</li>\n                  <li><strong>Topics:</strong> Tags that help others discover your DAK</li>\n                  <li><strong>Visibility:</strong> Public repositories are discoverable by the community</li>\n                </ul>\n                <h4>FHIR Implementation Guide Settings</h4>\n                <ul>\n                  <li><strong>IG ID:</strong> Unique identifier for your Implementation Guide</li>\n                  <li><strong>Name:</strong> Technical name used in code generation</li>\n                  <li><strong>Title:</strong> Human-readable title for documentation</li>\n                  <li><strong>Publisher:</strong> Organization responsible for the DAK</li>\n                </ul>\n              "}]}],"core-data-dictionary-viewer":[{id:"core-data-dictionary-help",title:"Understanding Core Data Dictionary",badge:"/sgex/cat-paw-info-icon.svg",type:"slideshow",content:[{title:"What is the Core Data Dictionary?",content:'\n                <p>The Core Data Dictionary (Component 2) contains the data elements required throughout the different points of the workflow. These data elements are mapped to the International Classification of Diseases version 11 (ICD-11) codes and other established concept mapping standards to ensure the data dictionary is compatible with other digital systems.</p>\n                <h4>Purpose: System Design and Interoperability</h4>\n                <p>To know which data elements need to be logged and how they map to other standard terminologies (e.g. ICD, Systematized Nomenclature of Medicine [SNOMED]) for interoperability with other standards-based systems.</p>\n                <h4>FHIR FSH Source Files</h4>\n                <ul>\n                  <li><strong>CodeSystems:</strong> Define custom codes and concepts used in your DAK</li>\n                  <li><strong>ValueSets:</strong> Specify allowed values for clinical data elements</li>\n                  <li><strong>ConceptMaps:</strong> Map between different terminology systems including ICD-11 and SNOMED</li>\n                  <li><strong>Logical Models:</strong> Define data structures for clinical workflows</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Location:</strong> FSH files are stored in the <code>input/fsh/</code> directory of your repository.\n                </div>\n              '},{title:"GitHub Pages Integration",content:'\n                <p>When GitHub Pages is configured, your FSH files are automatically compiled into HTML documentation:</p>\n                <h4>Published Artifacts</h4>\n                <ul>\n                  <li><strong>Code Systems:</strong> Browse and search your custom terminologies</li>\n                  <li><strong>Value Sets:</strong> View allowed values with descriptions</li>\n                  <li><strong>Logical Models:</strong> Interactive data structure documentation</li>\n                  <li><strong>Concept Maps:</strong> Visual mapping between terminologies</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\u26a1 URL Pattern:</strong> Main branch publishes to <code>user.github.io/repo</code>, feature branches to <code>user.github.io/repo/branches/branch-name</code>\n                </div>\n              '}]},{id:"github-pages-setup",title:"Setting Up GitHub Pages",badge:"/sgex/cat-paw-settings-icon.svg",type:"slideshow",content:[{title:"Enable GitHub Pages for Your DAK",content:'\n                <p>Follow these steps to enable automatic publishing of your Implementation Guide:</p>\n                <h4>Step 1: Repository Settings</h4>\n                <ol>\n                  <li>Go to your repository on GitHub</li>\n                  <li>Click on the <strong>Settings</strong> tab</li>\n                  <li>Scroll down to <strong>Pages</strong> in the left sidebar</li>\n                  <li>Under <strong>Source</strong>, select <strong>GitHub Actions</strong></li>\n                </ol>\n                <div class="help-tip">\n                  <strong>\ud83d\udccb Note:</strong> Your repository must contain a valid FHIR Implementation Guide structure with <code>sushi-config.yaml</code>\n                </div>\n              '},{title:"Configure IG Publisher Workflow",content:'\n                <p>Set up the automated publishing workflow:</p>\n                <h4>Step 2: GitHub Actions</h4>\n                <ol>\n                  <li>Create <code>.github/workflows/</code> directory in your repository</li>\n                  <li>Add an IG Publisher workflow file (e.g., <code>publish.yml</code>)</li>\n                  <li>Configure the workflow to run on push to main branch</li>\n                  <li>Include steps to build and deploy the Implementation Guide</li>\n                </ol>\n                <h4>Step 3: Verify Publishing</h4>\n                <ul>\n                  <li>Check the <strong>Actions</strong> tab for workflow status</li>\n                  <li>Once successful, visit your GitHub Pages URL</li>\n                  <li>Verify that artifacts are accessible from the Core Data Dictionary viewer</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udd17 Reference:</strong> See the <a href="https://smart.who.int/ig-starter-kit/v1.0.0/ig_setup.html#ghpages-build" target="_blank">WHO IG Starter Kit</a> for detailed setup instructions.\n                </div>\n              '}]}],"business-process-selection":[{id:"business-process-help",title:"Understanding Business Processes",badge:"/sgex/cat-paw-workflow-icon.svg",type:"slideshow",content:[{title:"What are Business Processes?",content:'\n                <p>Business Processes (Component 5) define the clinical workflows and care processes in your DAK:</p>\n                <h4>BPMN 2.0 Diagrams</h4>\n                <ul>\n                  <li><strong>Clinical Workflows:</strong> Step-by-step patient care processes</li>\n                  <li><strong>Decision Points:</strong> Where clinical decisions are made</li>\n                  <li><strong>Task Assignments:</strong> Who performs each step in the workflow</li>\n                  <li><strong>Data Flows:</strong> How information moves through the process</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Standard:</strong> Uses BPMN 2.0 (Business Process Model and Notation) for workflow modeling\n                </div>\n              '},{title:"Working with BPMN Files",content:'\n                <p>Business process diagrams are stored as BPMN XML files in your repository:</p>\n                <h4>File Management</h4>\n                <ul>\n                  <li><strong>Location:</strong> Typically stored in <code>input/models/</code> or <code>input/bpmn/</code></li>\n                  <li><strong>Format:</strong> BPMN 2.0 XML standard format</li>\n                  <li><strong>Editing:</strong> Use the built-in BPMN editor or external tools</li>\n                  <li><strong>Validation:</strong> Automatic validation against BPMN 2.0 schema</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udd27 Tools:</strong> SGeX includes an integrated BPMN editor for creating and modifying workflow diagrams\n                </div>\n              '}]}],"pages-manager":[{id:"page-content-help",title:"Managing Page Content",badge:"/sgex/cat-paw-document-icon.svg",type:"slideshow",content:[{title:"What is Page Content?",content:'\n                <p>Page Content represents the narrative documentation and educational materials in your DAK:</p>\n                <h4>Content Types</h4>\n                <ul>\n                  <li><strong>Clinical Guidelines:</strong> Evidence-based care recommendations</li>\n                  <li><strong>User Guides:</strong> Instructions for healthcare workers</li>\n                  <li><strong>Training Materials:</strong> Educational content and scenarios</li>\n                  <li><strong>Reference Documentation:</strong> Technical specifications and background</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udca1 Format:</strong> Content is typically authored in Markdown format for easy editing and version control\n                </div>\n              '},{title:"Content Organization",content:'\n                <p>Page content is organized to support different user needs and workflows:</p>\n                <h4>Structure</h4>\n                <ul>\n                  <li><strong>Pages Directory:</strong> Main content files organized by topic</li>\n                  <li><strong>Assets:</strong> Images, diagrams, and multimedia content</li>\n                  <li><strong>Templates:</strong> Reusable content patterns and layouts</li>\n                  <li><strong>Navigation:</strong> Menus and linking between related content</li>\n                </ul>\n                <h4>Publishing</h4>\n                <ul>\n                  <li><strong>GitHub Pages:</strong> Automatic publishing of content as web pages</li>\n                  <li><strong>FHIR IG:</strong> Integration with Implementation Guide publishing</li>\n                  <li><strong>Version Control:</strong> Track changes and collaborate on content</li>\n                </ul>\n                <div class="help-tip">\n                  <strong>\ud83d\udcdd Best Practice:</strong> Use clear headings, bullet points, and visual elements to make content accessible to healthcare workers\n                </div>\n              '}]}]}}getHelpTopicsForPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[...this.helpTopics[e]||[],...this.getUniversalTopics(t)]}getUniversalTopics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.universalTopics.documentation,this.universalTopics.bugReport];return(e.selectedDak||e.repository)&&t.push(this.universalTopics.dakFeedback),t}getHelpTopic(e){for(const t of Object.values(this.helpTopics)){const n=t.find(t=>t.id===e);if(n)return n}return null}hasHelpTopics(e){return!0}addHelpTopicToPage(e,t){this.helpTopics[e]||(this.helpTopics[e]=[]),this.helpTopics[e].push(t)}getAvailablePages(){return Object.keys(this.helpTopics)}openDakIssue(e,t){if(!t)return void console.warn("No DAK repository specified for feedback");let n="https://github.com/".concat(t.owner,"/").concat(t.name,"/issues/new");switch(e){case"bug":n+="?template=bug_report.md&labels=bug,dak-issue";break;case"improvement":n+="?template=feature_request.md&labels=enhancement,dak-improvement";break;case"content":n+="?labels=content-issue,clinical-content";break;case"question":n+="?template=question.md&labels=question,dak-question";break;default:n+="?labels=dak-feedback"}window.open(n,"_blank")}}},16786:(e,t,n)=>{n.d(t,{ox:()=>Z,Mx:()=>M,oc:()=>K,HX:()=>B});var s=n(65043),o=n(89379),a=n(73537),i=n(93071),r=n(89387);const l=new class{constructor(){this.storageKey="sgex-profile-subscriptions",this.whoProfile="WorldHealthOrganization"}getSubscriptions(){try{const e=localStorage.getItem(this.storageKey),t=e?JSON.parse(e):[];return t.find(e=>e.login===this.whoProfile)||(t.unshift({login:this.whoProfile,name:"World Health Organization",avatar_url:"https://github.com/".concat(this.whoProfile,".png"),type:"Organization",isPermanent:!0,addedAt:(new Date).toISOString()}),this.saveSubscriptions(t)),t}catch(e){return console.warn("Error reading profile subscriptions from localStorage:",e),[{login:this.whoProfile,name:"World Health Organization",avatar_url:"https://github.com/".concat(this.whoProfile,".png"),type:"Organization",isPermanent:!0,addedAt:(new Date).toISOString()}]}}saveSubscriptions(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(t){throw console.error("Error saving profile subscriptions to localStorage:",t),t}}addSubscription(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!e.login)throw new Error("Profile must have a login property");const n=this.getSubscriptions(),s=n.findIndex(t=>t.login===e.login);if(-1!==s)return n[s]=(0,o.A)((0,o.A)((0,o.A)({},n[s]),e),{},{isPermanent:n[s].isPermanent||t,lastUpdated:(new Date).toISOString()}),this.saveSubscriptions(n),n[s];const a={login:e.login,name:e.name||e.login,avatar_url:e.avatar_url||"https://github.com/".concat(e.login,".png"),type:e.type||"User",isPermanent:t,addedAt:(new Date).toISOString(),lastUpdated:(new Date).toISOString()};return n.push(a),this.saveSubscriptions(n),a}removeSubscription(e){if(!e)return!1;try{const t=this.getSubscriptions(),n=t.findIndex(t=>t.login===e);if(-1===n)return!1;return t[n].isPermanent?(console.warn("Cannot remove permanent profile: ".concat(e)),!1):(t.splice(n,1),this.saveSubscriptions(t),!0)}catch(t){return console.error("Error removing profile subscription:",t),!1}}isSubscribed(e){if(!e)return!1;return this.getSubscriptions().some(t=>t.login===e)}getSubscription(e){if(!e)return null;return this.getSubscriptions().find(t=>t.login===e)||null}ensureCurrentUserSubscribed(e){if(!e||!e.login)return;const t=this.getSubscription(e.login);t?t.isPermanent||this.addSubscription((0,o.A)((0,o.A)((0,o.A)({},t),e),{},{isPermanent:!0}),!0):this.addSubscription((0,o.A)((0,o.A)({},e),{},{isPermanent:!0}),!0)}autoAddVisitedProfile(e){e&&e.login&&(this.isSubscribed(e.login)||e.isDemo||this.addSubscription(e,!1))}getSubscriptionsSorted(){return this.getSubscriptions().sort((e,t)=>{if(e.login===this.whoProfile)return-1;if(t.login===this.whoProfile)return 1;const n=e.name||e.login,s=t.name||t.login;return n.localeCompare(s)})}getSubscriptionsForSelection(){return this.getSubscriptionsSorted().map(e=>(0,o.A)((0,o.A)({},e),{},{displayName:e.name||e.login,isRemovable:!e.isPermanent}))}updateSubscription(e,t){if(!e||!t)return!1;try{const n=this.getSubscriptions(),s=n.findIndex(t=>t.login===e);return-1!==s&&(n[s]=(0,o.A)((0,o.A)((0,o.A)({},n[s]),t),{},{login:e,lastUpdated:(new Date).toISOString()}),this.saveSubscriptions(n),!0)}catch(n){return console.error("Error updating subscription:",n),!1}}clearSubscriptions(){try{const e={login:this.whoProfile,name:"World Health Organization",avatar_url:"https://github.com/".concat(this.whoProfile,".png"),type:"Organization",isPermanent:!0,addedAt:(new Date).toISOString()};this.saveSubscriptions([e])}catch(e){console.error("Error clearing subscriptions:",e)}}exportSubscriptions(){const e=this.getSubscriptions();return JSON.stringify(e,null,2)}importSubscriptions(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const n=JSON.parse(e);if(!Array.isArray(n))throw new Error("Invalid subscription format");let s;if(t){const e=[...this.getSubscriptions()];n.forEach(t=>{const n=e.findIndex(e=>e.login===t.login);-1!==n?e[n]=(0,o.A)((0,o.A)({},t),{},{isPermanent:e[n].isPermanent||t.isPermanent}):e.push(t)}),s=e}else s=n;return s.find(e=>e.login===this.whoProfile)||s.unshift({login:this.whoProfile,name:"World Health Organization",avatar_url:"https://github.com/".concat(this.whoProfile,".png"),type:"Organization",isPermanent:!0,addedAt:(new Date).toISOString()}),this.saveSubscriptions(s),!0}catch(n){return console.error("Error importing subscriptions:",n),!1}}};var c=n(70579);const d="top-level",g="user",h="dak",u="asset",m=(0,s.createContext)(null),p=()=>{const e=(0,s.useContext)(m);return e||(console.error("usePage: PageContext is null - component not wrapped in PageProvider"),{pageName:"unknown",user:null,profile:null,repository:null,branch:null,asset:null,type:"top-level",loading:!1,error:null,isAuthenticated:!1,navigate:()=>{},params:{},location:{pathname:"/"}})},b=e=>{const{user:t,repo:n}=e;return e["*"]?u:t&&n?h:t?g:d},v=e=>{let{children:t,pageName:n}=e;const p=(0,a.g)(),v=(0,a.zy)(),f=(0,a.Zp)(),[y,w]=(0,s.useState)({type:b(p),pageName:n,loading:!1,error:null,user:null,profile:null,repository:null,branch:null,asset:null,isAuthenticated:i.A.isAuth()}),{user:x,repo:k}=p,N=p["*"];(0,s.useEffect)(()=>{(y.type!==d&&x||y.type===d)&&(async()=>{try{var e,t,s;w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!0,error:null}));let d=null===(e=v.state)||void 0===e?void 0:e.profile,m=null===(t=v.state)||void 0===t?void 0:t.repository,b=(null===(s=v.state)||void 0===s?void 0:s.selectedBranch)||p.branch;if(y.type===h||y.type===u){var a;if(!d&&x)if(i.A.isAuth())try{d=await i.A.getUser(x)}catch(c){if("dashboard"===n||n.includes("editor")||n.includes("viewer")||y.type===h||y.type===u)return void w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"User '".concat(x,"' not found or not accessible. Please check the username and try again."),user:x,repository:k?{name:k,owner:{login:x},html_url:"https://github.com/".concat(x,"/").concat(k),isNotFound:!0}:null,branch:p.branch||"main"}));throw new Error("User '".concat(x,"' not found or not accessible."))}else{if(!r.A.validateDemoDAKRepository(x,k)){if("dashboard"===n||n.includes("editor")||n.includes("viewer")||y.type===h||y.type===u)return void w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"Repository '".concat(x,"/").concat(k,"' not found or not accessible. This may be a private repository or the repository doesn't exist."),user:x,profile:{login:x,name:x.charAt(0).toUpperCase()+x.slice(1),avatar_url:"https://github.com/".concat(x,".png"),type:"User",isDemo:!0},repository:{name:k,owner:{login:x},html_url:"https://github.com/".concat(x,"/").concat(k),isNotFound:!0},branch:p.branch||"main"}));throw new Error("Repository '".concat(x,"/").concat(k,"' not found or not accessible."))}d={login:x,name:x.charAt(0).toUpperCase()+x.slice(1),avatar_url:"https://github.com/".concat(x,".png"),type:"User",isDemo:!0}}if(!m&&x&&k)if(i.A.isAuth())try{if(m=await i.A.getRepository(x,k),!await r.A.validateDAKRepository(x,k,b||m.default_branch)){if("dashboard"===n||n.includes("editor")||n.includes("viewer")||y.type===h||y.type===u)return void w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"Repository '".concat(x,"/").concat(k,"' is not a valid DAK repository. This repository may not contain WHO SMART Guidelines content."),user:x,profile:d,repository:(0,o.A)((0,o.A)({},m),{},{isInvalidDAK:!0}),branch:b||m.default_branch}));throw new Error("Repository '".concat(x,"/").concat(k,"' is not a valid DAK repository."))}}catch(c){if("dashboard"===n||n.includes("editor")||n.includes("viewer")||y.type===h||y.type===u)return void w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"Repository '".concat(x,"/").concat(k,"' not found or not accessible. Please check the repository name and your access permissions."),user:x,profile:d,repository:{name:k,owner:{login:x},html_url:"https://github.com/".concat(x,"/").concat(k),isNotFound:!0},branch:b||"main"}));throw new Error("Repository '".concat(x,"/").concat(k,"' not found or not accessible."))}else{if(!r.A.validateDemoDAKRepository(x,k)){if("dashboard"===n||n.includes("editor")||n.includes("viewer")||y.type===h||y.type===u)return void w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"Repository '".concat(x,"/").concat(k,"' not found or not accessible. This may be a private repository or the repository doesn't exist."),user:x,profile:{login:x,name:x.charAt(0).toUpperCase()+x.slice(1),avatar_url:"https://github.com/".concat(x,".png"),type:"User",isDemo:!0},repository:{name:k,owner:{login:x},html_url:"https://github.com/".concat(x,"/").concat(k),isNotFound:!0},branch:b||"main"}));throw new Error("Repository '".concat(x,"/").concat(k,"' not found or not accessible."))}m={name:k,full_name:"".concat(x,"/").concat(k),owner:{login:x},default_branch:b||"main",html_url:"https://github.com/".concat(x,"/").concat(k),isDemo:!0}}if(b=b||(null===(a=m)||void 0===a?void 0:a.default_branch)||"main",y.type===u&&N)try{await i.A.getFileContent(x,k,N,b)}catch(c){if("asset"===n||n.includes("editor")||n.includes("viewer"))return void w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"Asset '".concat(N,"' not found in repository '").concat(x,"/").concat(k,"'. The file may have been moved or deleted."),user:x,profile:d,repository:m,branch:b,asset:N}));throw new Error("Asset '".concat(N,"' not found in repository."))}}if(y.type===g&&!d&&x)if(i.A.isAuth())try{d=await i.A.getUser(x)}catch(c){return void w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:"User '".concat(x,"' not found or not accessible. Please check the username and try again."),user:x}))}else d={login:x,name:x.charAt(0).toUpperCase()+x.slice(1),avatar_url:"https://github.com/".concat(x,".png"),type:"User",isDemo:!0};w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,user:x,profile:d,repository:m,branch:b,asset:N,isAuthenticated:i.A.isAuth()}));const f=async()=>{try{const e=await i.A.getCurrentUser();e&&l.ensureCurrentUserSubscribed(e)}catch(e){console.debug("Could not fetch current user for subscriptions:",e)}!d||d.isDemo||y.type!==g&&y.type!==h&&y.type!==u||l.autoAddVisitedProfile(d)};i.A.isAuth()&&f()}catch(d){console.error("Page data loading error:",d),w(e=>(0,o.A)((0,o.A)({},e),{},{loading:!1,error:d.message}))}})()},[x,k,p.branch,N,y.type,v.state,f,n]),(0,s.useEffect)(()=>{const e=setInterval(()=>{const e=i.A.isAuth();e!==y.isAuthenticated&&w(t=>(0,o.A)((0,o.A)({},t),{},{isAuthenticated:e}))},1e3);return()=>clearInterval(e)},[y.isAuthenticated]);const S=(0,o.A)((0,o.A)({},y),{},{navigate:f,params:p,location:v});return(0,c.jsx)(m.Provider,{value:S,children:t})};var f=n(5452);const y=e=>{const t=document.body.classList.contains("theme-dark"),n="/sgex/copilot-fix-549-2",s=e.startsWith("/")?e.slice(1):e;let o;if(t){const e=s.replace(/\.png$/,"_grey_tabby.png");o=n?"".concat(n,"/").concat(e):"/".concat(e)}else o=n?"".concat(n,"/").concat(s):"/".concat(s);return o},w="authenticated",x="unauthenticated",k="demo",N="read",S="write",A="none";const j=new class{constructor(){this.logger=f.A.getLogger("UserAccessService"),this.currentUser=null,this.userType=x,this.permissions=new Map,this.listeners=new Set}async initialize(){this.logger.info("Initializing user access service"),await this.detectUserType(),this.notifyListeners()}async detectUserType(){try{if(i.A.isAuth()){this.checkIfDemoUser()?(this.userType=k,this.currentUser=await this.createDemoUser()):(this.userType=w,this.currentUser=await i.A.getCurrentUser())}else this.userType=x,this.currentUser=null;this.logger.info("User type detected",{userType:this.userType,hasUser:!!this.currentUser})}catch(e){this.logger.error("Error detecting user type",{error:e.message}),this.userType=x,this.currentUser=null}}checkIfDemoUser(){return"true"===localStorage.getItem("sgex_demo_mode")||"true"==={NODE_ENV:"production",PUBLIC_URL:"/sgex/copilot-fix-549-2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_REF_NAME:"copilot/fix-549-2"}.REACT_APP_DEMO_MODE}async createDemoUser(){try{const e=await i.A.getCurrentUser();return(0,o.A)((0,o.A)({},e),{},{isDemo:!0,demoData:this.getDemoData()})}catch(e){return{login:"demo-user",name:"Demo User",avatar_url:y("sgex-mascot.png"),type:"User",isDemo:!0,demoData:this.getDemoData()}}}getDemoData(){return{daks:[{owner:"WHO",repo:"smart-anc",name:"Smart Antenatal Care",description:"Demo DAK for antenatal care guidelines"},{owner:"WHO",repo:"smart-tb",name:"Smart Tuberculosis",description:"Demo DAK for tuberculosis care guidelines"}],sampleAssets:{"input/vocabulary/ValueSet-anc-care-codes.json":{type:"ValueSet",description:"Demo value set for antenatal care"}}}}getUserType(){return this.userType}getCurrentUser(){return this.currentUser}isAuthenticated(){return this.userType===w||this.userType===k}isDemoUser(){return this.userType===k}isUnauthenticated(){return this.userType===x}async getRepositoryAccess(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";const s="".concat(e,"/").concat(t,"/").concat(n);if(this.permissions.has(s))return this.permissions.get(s);let o=A;try{if(this.userType===x)o=N;else if(this.userType===k){o=this.isDemoDAK(e,t)?N:A}else if(this.userType===w){const n=await this.checkGitHubReadAccess(e,t);await this.checkGitHubWriteAccess(e,t)?o=S:n&&(o=N)}}catch(a){this.logger.error("Error checking repository access",{owner:e,repo:t,branch:n,error:a.message}),o=N}return this.permissions.set(s,o),this.logger.debug("Repository access determined",{owner:e,repo:t,branch:n,access:o,userType:this.userType}),o}isDemoDAK(e,t){var n,s;return!(null===(n=this.currentUser)||void 0===n||null===(s=n.demoData)||void 0===s||!s.daks)&&this.currentUser.demoData.daks.some(n=>n.owner===e&&n.repo===t)}async checkGitHubReadAccess(e,t){try{return await i.A.getRepository(e,t),!0}catch(n){return!1}}async checkGitHubWriteAccess(e,t){try{return await i.A.hasRepositoryWriteAccess(e,t)}catch(n){return!1}}async canSaveToGitHub(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";if(this.userType!==w)return!1;return await this.getRepositoryAccess(e,t,n)===S}canSaveLocal(){return!0}getUIBehavior(){const e={showEditFeatures:!0,showSaveToGitHub:!0,showSaveLocal:!0,confirmBeforeSave:!0,allowCreateNew:!0,showAccessBadges:!0};switch(this.userType){case x:return(0,o.A)((0,o.A)({},e),{},{showEditFeatures:!1,showSaveToGitHub:!1,allowCreateNew:!1});case k:return(0,o.A)((0,o.A)({},e),{},{showSaveToGitHub:!1,allowCreateNew:!1});case w:return e;default:return(0,o.A)((0,o.A)({},e),{},{showEditFeatures:!1,showSaveToGitHub:!1,allowCreateNew:!1})}}async getAccessBadge(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";const s=await this.getRepositoryAccess(e,t,n),o={[S]:{text:"Write Access",icon:"\u270f\ufe0f",color:"green",description:"You can edit and save changes to this repository"},[N]:{text:"Read Only",icon:"\ud83d\udc41\ufe0f",color:"blue",description:"You can view this repository but cannot save changes"},[A]:{text:"No Access",icon:"\ud83d\udeab",color:"red",description:"You do not have access to this repository"}};return o[s]||o[A]}enableDemoMode(){localStorage.setItem("sgex_demo_mode","true"),this.initialize()}disableDemoMode(){localStorage.removeItem("sgex_demo_mode"),this.initialize()}clearPermissionsCache(){this.permissions.clear(),this.logger.debug("Permissions cache cleared")}addListener(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}notifyListeners(){const e={userType:this.userType,currentUser:this.currentUser,isAuthenticated:this.isAuthenticated(),isDemoUser:this.isDemoUser(),uiBehavior:this.getUIBehavior()};this.listeners.forEach(t=>{try{t(e)}catch(n){this.logger.error("Error in access service listener",{error:n.message})}})}handleAuthChange(){this.clearPermissionsCache(),this.initialize()}};const C=new class{constructor(){this.storageKey="sgex-bookmarks"}getBookmarks(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return console.warn("Error reading bookmarks from localStorage:",e),[]}}saveBookmarks(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(t){throw console.error("Error saving bookmarks to localStorage:",t),t}}generateBookmarkTitle(e,t){const{user:n,repository:s,branch:o,asset:a}=t;if(a&&n&&s){const e=s.name||s,t=o||"main";return"".concat(a," in DAK: ").concat(n,"/").concat(e,"/").concat(t)}if(n&&s&&o){const e=s.name||s;return"DAK: ".concat(n,"/").concat(e,"/").concat(o)}if(n&&s){const e=s.name||s;return"DAK: ".concat(n,"/").concat(e)}return n?"".concat(e,": ").concat(n):e}addBookmark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getBookmarks(),a=s.findIndex(e=>e.url===t);if(-1!==a)s[a]=(0,o.A)((0,o.A)({},s[a]),{},{title:this.generateBookmarkTitle(e,n),pageName:e,context:n,lastUpdated:(new Date).toISOString()});else{const o={id:Date.now().toString(),title:this.generateBookmarkTitle(e,n),url:t,pageName:e,context:n,createdAt:(new Date).toISOString(),lastUpdated:(new Date).toISOString()};s.push(o)}return this.saveBookmarks(s),s[a]||s[s.length-1]}removeBookmark(e){try{const t=this.getBookmarks(),n=t.filter(t=>t.id!==e);return n.length!==t.length&&(this.saveBookmarks(n),!0)}catch(t){return console.error("Error removing bookmark:",t),!1}}isBookmarked(e){return this.getBookmarks().some(t=>t.url===e)}getBookmarkByUrl(e){return this.getBookmarks().find(t=>t.url===e)||null}getBookmarksGroupedByPage(){const e=this.getBookmarks(),t={};e.forEach(e=>{const n=e.pageName||"Other";t[n]||(t[n]=[]),t[n].push(e)}),Object.keys(t).forEach(e=>{t[e].sort((e,t)=>e.title.localeCompare(t.title))});return Object.keys(t).sort().map(e=>({pageName:e,bookmarks:t[e]}))}clearBookmarks(){try{localStorage.removeItem(this.storageKey)}catch(e){console.error("Error clearing bookmarks:",e)}}exportBookmarks(){const e=this.getBookmarks();return JSON.stringify(e,null,2)}importBookmarks(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const n=JSON.parse(e);if(!Array.isArray(n))throw new Error("Invalid bookmark format");if(t){const e=[...this.getBookmarks()];n.forEach(t=>{const n=e.findIndex(e=>e.url===t.url);-1!==n?e[n]=t:e.push(t)}),this.saveBookmarks(e)}else this.saveBookmarks(n);return!0}catch(n){return console.error("Error importing bookmarks:",n),!1}}},D=()=>{const[e,t]=(0,s.useState)(null),[n,o]=(0,s.useState)([]),[a,r]=(0,s.useState)(!0),[l,d]=(0,s.useState)(null),[g,h]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{(async()=>{try{r(!0),d(null);const n=b();if(!n||"main"===n)return void r(!1);t({name:n,safeName:n.replace(/\//g,"-")});try{const e=await v(n);e&&e.length>0&&o(e)}catch(e){console.debug("Could not fetch PR info:",e)}r(!1)}catch(n){console.error("Error detecting branch:",n),d(n.message),r(!1)}})()},[]),(0,s.useEffect)(()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&(u&&m(!1),h(!1))};if(g)return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[g,u]);const b=()=>"copilot/fix-549-2",v=async e=>{try{const t="litlfred",n="sgex";return await i.A.getPullRequestsForBranch(t,n,e)}catch(l){return console.debug("Failed to fetch PR info:",l),[]}},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.length<=t?e:e.substring(0,t)+"..."};return a||l||!e?null:(0,c.jsxs)("div",{className:"preview-badge-container",ref:p,children:[n&&n.length>0?n.map((e,t)=>(0,c.jsx)("div",{className:"preview-badge clickable",onClick:()=>(e=>{e&&e.html_url&&window.open(e.html_url,"_blank")})(e),title:"Click to view PR: ".concat(e.title),children:(0,c.jsxs)("div",{className:"badge-content",children:[(0,c.jsx)("span",{className:"badge-label",children:"PR:"}),(0,c.jsxs)("span",{className:"badge-branch",children:["#",e.number]}),(0,c.jsx)("span",{className:"badge-separator",children:"|"}),(0,c.jsx)("span",{className:"badge-pr-title",children:f(e.title)})]})},e.id)):(0,c.jsx)("div",{className:"preview-badge clickable ".concat(g?"expanded":""," ").concat(u?"sticky":""),onClick:e=>{n&&n.length>0||(e.stopPropagation(),e.preventDefault(),u?(m(!1),h(!1)):(m(!0),h(!0)))},onMouseEnter:()=>{u||n&&0!==n.length||h(!0)},onMouseLeave:()=>{u||n&&0!==n.length||h(!1)},title:u?"Click to collapse":g?"Click to keep expanded":"\ud83d\udd0d Hover for branch details, click to pin: ".concat(e.name),children:(0,c.jsxs)("div",{className:"badge-content",children:[(0,c.jsx)("span",{className:"badge-label",children:"Preview:"}),(0,c.jsx)("span",{className:"badge-branch",children:e.name}),(0,c.jsx)("span",{className:"badge-expand-icon",children:g?"\u25bc":"\u25b6"})]})}),g&&(!n||0===n.length)&&(0,c.jsxs)("div",{className:"preview-badge-expanded",children:[(0,c.jsxs)("div",{className:"expanded-header",children:[(0,c.jsxs)("div",{className:"pr-info",children:[(0,c.jsxs)("h3",{children:["Preview Branch: ",e.name]}),(0,c.jsxs)("div",{className:"pr-meta",children:[(0,c.jsx)("span",{className:"pr-state","data-state":"unknown",children:"No PR found"}),(0,c.jsx)("span",{className:"pr-author",children:"Branch preview"})]})]}),(0,c.jsx)("button",{className:"close-button",onClick:e=>{e.stopPropagation(),h(!1),m(!1)},title:"Close expanded view",children:"\xd7"})]}),(0,c.jsxs)("div",{className:"pr-description",children:[(0,c.jsx)("h4",{children:"Branch Information"}),(0,c.jsxs)("div",{className:"pr-body",children:["This is a preview deployment from the ",(0,c.jsx)("code",{children:e.name})," branch.",(0,c.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,c.jsx)("strong",{children:"Preview URL:"})," ",(0,c.jsxs)("code",{children:[window.location.origin,window.location.pathname]})]}),i.A.isAuth()?(0,c.jsx)("div",{style:{marginTop:"0.5rem",color:"#28a745"},children:"\u2705 Authenticated - You can view full PR details when available."}):(0,c.jsxs)("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#f0f8ff",border:"1px solid #bee5eb",borderRadius:"4px"},children:[(0,c.jsx)("strong",{children:"\ud83d\udca1 Tip:"})," Sign in to GitHub to view pull request details, comments, and contribute to this branch."]})]})]}),(0,c.jsx)("div",{className:"expanded-footer",children:(0,c.jsx)("a",{href:"https://github.com/litlfred/sgex/tree/".concat(e.name),target:"_blank",rel:"noopener noreferrer",className:"github-link",children:"View Branch on GitHub \u2192"})})]})]})},T=()=>{const{pageName:e,profile:t,repository:n,branch:o,asset:a,isAuthenticated:r,navigate:l}=p(),[d,g]=(0,s.useState)(!1),[h,u]=(0,s.useState)(!1),[m,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(r){(async()=>{try{const e=j.getCurrentUser();if(e)b(e);else{const e=await i.A.getCurrentUser();b(e)}}catch(e){console.debug("Could not fetch authenticated user:",e)}})()}else b(null)},[r]);const v=()=>{l("/")},f=e=>{C.removeBookmark(e),u(!1),setTimeout(()=>u(!0),50)},y=C.getBookmarkByUrl(window.location.pathname),w=C.getBookmarksGroupedByPage();return(0,c.jsxs)("header",{className:"page-header",children:[(0,c.jsxs)("div",{className:"page-header-left",children:[(0,c.jsxs)("div",{className:"sgex-logo",onClick:v,children:[(0,c.jsx)("h1",{children:"SGEX Workbench"}),(0,c.jsx)("p",{className:"subtitle",children:"WHO SMART Guidelines Exchange"})]}),(0,c.jsx)(D,{})]}),(0,c.jsx)("div",{className:"page-header-right",children:(r||null!==t&&void 0!==t&&t.isDemo)&&m?(0,c.jsxs)("div",{className:"user-controls",children:[(0,c.jsxs)("div",{className:"user-info",onClick:()=>g(!d),children:[(0,c.jsx)("img",{src:m.avatar_url,alt:"User avatar",className:"user-avatar"}),(0,c.jsx)("span",{className:"user-name",children:m.name||m.login}),(0,c.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),d&&(0,c.jsxs)("div",{className:"user-dropdown",children:[(0,c.jsxs)("button",{className:"dropdown-item",onClick:()=>{null!==m&&void 0!==m&&m.html_url?window.open(m.html_url,"_blank"):null!==m&&void 0!==m&&m.login&&window.open("https://github.com/".concat(m.login),"_blank")},children:[(0,c.jsx)("svg",{className:"github-icon",viewBox:"0 0 16 16",width:"16",height:"16",children:(0,c.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"GitHub Profile"]}),y?(0,c.jsx)("button",{className:"dropdown-item bookmark-action",onClick:()=>f(y.id),children:"\u2b50 Remove Bookmark"}):(0,c.jsx)("button",{className:"dropdown-item bookmark-action",onClick:()=>{const t={user:null===m||void 0===m?void 0:m.login,repository:n,branch:o,asset:a},s=window.location.pathname;C.addBookmark(e,s,t),u(!1)},children:"\u2606 Add Bookmark"}),(0,c.jsxs)("div",{className:"bookmarks-section",children:[(0,c.jsxs)("div",{className:"dropdown-item bookmarks-header",onClick:()=>u(!h),children:["\ud83d\udcd6 Bookmarks",(0,c.jsx)("span",{className:"dropdown-arrow",children:h?"\u25b2":"\u25bc"})]}),h&&(0,c.jsx)("div",{className:"bookmarks-dropdown",children:w.length>0?(0,c.jsx)("div",{className:"bookmarks-list",children:w.map(e=>(0,c.jsxs)("div",{className:"bookmark-group",children:[(0,c.jsx)("div",{className:"bookmark-group-header",children:e.pageName}),e.bookmarks.map(e=>(0,c.jsxs)("div",{className:"bookmark-item",children:[(0,c.jsx)("button",{className:"bookmark-link",onClick:()=>(e=>{l(e.url),u(!1)})(e),title:e.url,children:e.title}),(0,c.jsx)("button",{className:"bookmark-remove",onClick:()=>f(e.id),title:"Remove bookmark",children:"\xd7"})]},e.id))]},e.pageName))}):(0,c.jsx)("div",{className:"no-bookmarks",children:"No bookmarks yet"})})]}),(0,c.jsx)("button",{className:"dropdown-item logout-btn",onClick:()=>{i.A.logout(),l("/")},children:"Logout"})]})]}):(0,c.jsx)("button",{className:"login-btn",onClick:v,children:"Login"})})]})},E=e=>{let{owner:t,repo:n,branch:o="main",className:a=""}=e;const[i,r]=(0,s.useState)(null),[l,d]=(0,s.useState)(!0),[g,h]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=!0;const s=async()=>{if(t&&n)try{d(!0);const s=await j.getAccessBadge(t,n,o);e&&(r(s),d(!1))}catch(s){console.error("Error loading access badge:",s),e&&(r({text:"Unknown",icon:"\u2753",color:"gray",description:"Unable to determine access level"}),d(!1))}else d(!1)};s();const a=j.addListener(()=>{s()});return()=>{e=!1,a()}},[t,n,o]),l?(0,c.jsxs)("div",{className:"access-badge loading ".concat(a),children:[(0,c.jsx)("span",{className:"access-badge-icon",children:"\u23f3"}),(0,c.jsx)("span",{className:"access-badge-text",children:"Loading..."})]}):i?(0,c.jsxs)("div",{className:"access-badge ".concat(i.color," ").concat(a),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),title:i.description,children:[(0,c.jsx)("span",{className:"access-badge-icon",role:"img","aria-label":i.text,children:i.icon}),(0,c.jsx)("span",{className:"access-badge-text",children:i.text}),g&&(0,c.jsx)("div",{className:"access-badge-tooltip",children:(0,c.jsxs)("div",{className:"tooltip-content",children:[(0,c.jsx)("strong",{children:i.text}),(0,c.jsx)("p",{children:i.description}),n&&(0,c.jsxs)("small",{children:["Repository: ",t,"/",n]})]})})]}):null},I=e=>{var t;let{customBreadcrumbs:n}=e;const{type:o,pageName:a,profile:r,repository:l,branch:d,navigate:m}=p(),[b,v]=(0,s.useState)([]),[f,y]=(0,s.useState)(!1),[w,x]=(0,s.useState)(""),[k,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=e=>{f&&!e.target.closest(".page-context-branch-selector")&&(y(!1),x(""))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[f]),(0,s.useEffect)(()=>{(async()=>{if(!l||o!==h&&o!==u)v([]);else try{var e,t;N(!0);const n=(null===(e=l.owner)||void 0===e?void 0:e.login)||(null===(t=l.full_name)||void 0===t?void 0:t.split("/")[0]),s=(await i.A.getBranches(n,l.name)).sort((e,t)=>e.name.localeCompare(t.name));v(s)}catch(n){console.error("Failed to fetch branches for context:",n),v([])}finally{N(!1)}})()},[l,o]);const S=b.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())),A=(()=>{if(n&&n.length>0)return n;const e=[];if(e.push({label:"Home",path:"/",onClick:()=>m("/")}),o!==g&&o!==h&&o!==u||!r||e.push({label:"Select Repository",path:"/dak-selection/".concat(r.login),onClick:()=>m("/dak-selection/".concat(r.login),{state:{profile:r}})}),(o===h||o===u)&&l){var t,s;const n=d&&"main"!==d?"/".concat(d):"",o=(null===(t=l.owner)||void 0===t?void 0:t.login)||(null===(s=l.full_name)||void 0===s?void 0:s.split("/")[0]);o&&e.push({label:"DAK Components",path:"/dashboard/".concat(o,"/").concat(l.name).concat(n),onClick:()=>m("/dashboard/".concat(o,"/").concat(l.name).concat(n))})}const i={landing:"Home","landing-unauthenticated":"Home",repositories:"Select Repository","dak-selection":"Select DAK","dak-action":"Choose DAK Action",dashboard:"DAK Components","dak-dashboard":"DAK Components","actor-editor":"Actor Definitions","component-editor":"Component Editor","bpmn-viewer":"Business Process Viewer","bpmn-editor":"Business Process Editor","decision-support-logic":"Decision Support Logic","core-data-dictionary-viewer":"Core Data Dictionary","testing-viewer":"Testing","pages-manager":"Pages",documentation:"Documentation"}[a]||a;return 0!==e.length&&e[e.length-1].label===i||e.push({label:i,current:!0}),e})();return!r&&!l&&A.length<=1?null:(0,c.jsx)("div",{className:"page-context-container",children:(0,c.jsxs)("div",{className:"page-context-content",children:[r&&(0,c.jsx)("img",{src:r.avatar_url,alt:"".concat(r.login," avatar"),className:"page-context-avatar"}),(0,c.jsxs)("div",{className:"page-context-info",children:[(0,c.jsxs)("div",{className:"page-context-row page-context-user-repo",children:[r&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"page-context-profile",onClick:()=>{null!==r&&void 0!==r&&r.html_url?window.open(r.html_url,"_blank"):null!==r&&void 0!==r&&r.login&&window.open("https://github.com/".concat(r.login),"_blank")},children:r.login}),l&&(0,c.jsx)("span",{className:"page-context-separator",children:"/"})]}),l&&(0,c.jsx)("span",{className:"page-context-repo",children:l.name}),d&&(o===h||o===u)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"page-context-separator",children:"@"}),(0,c.jsxs)("div",{className:"page-context-branch-selector",children:[(0,c.jsxs)("button",{className:"page-context-branch-btn",onClick:()=>y(!f),title:"Switch branch",children:[(0,c.jsx)("span",{className:"branch-icon",children:"\ud83c\udf3f"}),d,(0,c.jsx)("span",{className:"branch-dropdown-arrow",children:f?"\u25b2":"\u25bc"})]}),f&&(0,c.jsxs)("div",{className:"branch-dropdown",children:[(0,c.jsx)("div",{className:"branch-search",children:(0,c.jsx)("input",{type:"text",placeholder:"Search branches...",value:w,onChange:e=>x(e.target.value),className:"branch-search-input",autoFocus:!0})}),(0,c.jsx)("div",{className:"branch-list",children:k?(0,c.jsx)("div",{className:"branch-item loading",children:"Loading branches..."}):S.length>0?S.map(e=>(0,c.jsxs)("button",{className:"branch-item ".concat(e.name===d?"current":""),onClick:()=>(e=>{const t=window.location.pathname.split("/");t.length>=5&&(5===t.length?t.push(e):t[5]=e,m(t.join("/"))),y(!1),x("")})(e.name),children:[(0,c.jsx)("span",{className:"branch-icon",children:"\ud83c\udf3f"}),e.name,e.name===d&&(0,c.jsx)("span",{className:"current-badge",children:"current"})]},e.name)):(0,c.jsx)("div",{className:"branch-item no-results",children:w?"No branches found":"No branches available"})})]})]})]})]}),A.length>1&&(0,c.jsx)("nav",{className:"page-context-row page-context-breadcrumbs","aria-label":"Breadcrumb navigation",children:(0,c.jsx)("ol",{className:"breadcrumb-list",children:A.map((e,t)=>(0,c.jsx)("li",{className:"breadcrumb-item",children:e.current?(0,c.jsx)("span",{className:"breadcrumb-current","aria-current":"page",children:e.label}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"breadcrumb-link",onClick:()=>e.onClick?e.onClick():m(e.path),"aria-label":"Navigate to ".concat(e.label),children:e.label}),(0,c.jsx)("span",{className:"breadcrumb-separator","aria-hidden":"true",children:"\u203a"})]})},t))})})]}),(o===h||o===u)&&l&&(0,c.jsxs)("div",{className:"page-context-actions",children:[(0,c.jsx)(E,{owner:(null===(t=l.owner)||void 0===t?void 0:t.login)||(null===r||void 0===r?void 0:r.login),repo:l.name,branch:d,className:"context-access-badge"}),(0,c.jsxs)("button",{className:"context-btn github-repo-btn",onClick:()=>{null!==l&&void 0!==l&&l.html_url&&window.open(l.html_url,"_blank")},title:"Open repository on GitHub",children:[(0,c.jsx)("svg",{className:"github-icon",viewBox:"0 0 16 16",width:"16",height:"16",children:(0,c.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"Repository"]})]})]})})};var P=n(18077),G=n(19794);const H=e=>{let{error:t,onRetry:n}=e;const o=p(),a=o.pageName,[i,r]=(0,s.useState)(!1),l=(0,G.A)("sgex-mascot.png"),[d,g]=(0,s.useState)(""),h=(()=>{var e;const n=t.toLowerCase(),s=null===o||void 0===o?void 0:o.user,a=null===o||void 0===o||null===(e=o.repository)||void 0===e?void 0:e.name;if(n.includes("not found")||n.includes("not accessible")){if(n.includes("user"))return{title:"User Not Found",message:"The user ".concat(s?"'".concat(s,"'"):"in the URL"," could not be found on GitHub."),suggestions:["Check the spelling of the username","Verify the user account exists on GitHub","Try searching for the user on GitHub.com"],icon:"\ud83d\udc64"};if(n.includes("repository"))return{title:"Repository Not Found",message:"The repository ".concat(s&&a?"'".concat(s,"/").concat(a,"'"):"in the URL"," could not be accessed."),suggestions:["Check the spelling of the repository name","Verify the repository exists and is public","If it's a private repository, make sure you have access","Try visiting the repository directly on GitHub.com"],icon:"\ud83d\udcc1"}}return n.includes("not a valid dak")||n.includes("invalid dak")?{title:"Not a DAK Repository",message:"The repository ".concat(s&&a?"'".concat(s,"/").concat(a,"'"):"in the URL"," doesn't appear to contain WHO SMART Guidelines content."),suggestions:["Verify this is a WHO SMART Guidelines Digital Adaptation Kit","Check if the repository has a sushi-config.yaml file","Look for smart.who.int.base dependencies in the configuration","Try browsing other DAK repositories for examples"],icon:"\ud83d\udccb"}:n.includes("asset")&&n.includes("not found")?{title:"File Not Found",message:"The requested file could not be found in the repository.",suggestions:["Check if the file path is correct","Verify the file exists in the current branch","The file may have been moved or deleted","Try browsing the repository to find the correct path"],icon:"\ud83d\udcc4"}:{title:"Something Went Wrong",message:t,suggestions:["Try refreshing the page","Check your internet connection","The service may be temporarily unavailable"],icon:"\u26a0\ufe0f"}})();return(0,c.jsx)("div",{className:"error-handler",children:(0,c.jsxs)("div",{className:"error-content",children:[(0,c.jsx)("div",{className:"error-mascot-container",children:(0,c.jsx)(P.A,{helpContent:(0,c.jsx)("div",{className:"error-help-content",children:(0,c.jsxs)("div",{className:"error-mascot-large",children:[(0,c.jsx)("img",{src:l,alt:"SGEX Helper",className:"large-mascot-icon"}),(0,c.jsxs)("div",{className:"mascot-speech-bubble",children:[(0,c.jsx)("div",{className:"speech-content",children:"I'm sorry! Something went wrong."}),(0,c.jsx)("div",{className:"speech-tail"})]})]})}),position:"center"})}),(0,c.jsxs)("div",{className:"error-details",children:[(0,c.jsxs)("h2",{children:[h.icon," ",h.title]}),(0,c.jsx)("p",{className:"error-message",children:h.message}),h.suggestions&&(0,c.jsxs)("div",{className:"error-suggestions",children:[(0,c.jsx)("h3",{children:"\ud83d\udca1 Suggestions:"}),(0,c.jsx)("ul",{children:h.suggestions.map((e,t)=>(0,c.jsx)("li",{children:e},t))})]}),(0,c.jsxs)("div",{className:"error-actions",children:[(0,c.jsx)("button",{className:"error-btn primary",onClick:()=>{n?n():window.location.reload()},children:"\ud83d\udd04 Try Again"}),(0,c.jsx)("button",{className:"error-btn secondary",onClick:()=>{window.location.href="/sgex/"},children:"\ud83c\udfe0 Go Home"})]}),(0,c.jsxs)("div",{className:"bug-report-section",children:[(0,c.jsx)("h3",{children:"Help us improve SGEX"}),(0,c.jsx)("p",{children:"If this error persists, please let us know what happened:"}),(0,c.jsxs)("div",{className:"user-explanation",children:[(0,c.jsx)("label",{htmlFor:"user-explanation",children:"What were you trying to do when this error occurred?"}),(0,c.jsx)("textarea",{id:"user-explanation",value:d,onChange:e=>g(e.target.value),placeholder:"Please describe what you were doing when the error occurred...",rows:4})]}),i?(0,c.jsxs)("div",{className:"bug-report-sent",children:[(0,c.jsx)("span",{className:"success-icon",children:"\u2705"}),"Thank you! A bug report has been opened. We'll investigate this issue."]}):(0,c.jsx)("button",{className:"bug-report-btn",onClick:()=>{const e=(()=>{const e=encodeURIComponent("User should not have reached this page"),n=encodeURIComponent("\n**Error Information:**\n- Page: ".concat(a,"\n- URL: ").concat(window.location.href,"\n- Error: ").concat(t,"\n- Timestamp: ").concat((new Date).toISOString(),"\n- User Agent: ").concat(navigator.userAgent,"\n\n**Context:**\n- Browser: ").concat(navigator.userAgent,"\n- Viewport: ").concat(window.innerWidth,"x").concat(window.innerHeight,"\n- Referrer: ").concat(document.referrer||"Direct access","\n\n**User Explanation:**\n").concat(d||"No additional details provided","\n\n**Steps to Reproduce:**\n1. Navigate to: ").concat(window.location.href,"\n2. [Please add any additional steps]\n\n**Expected Behavior:**\nThe page should load without errors.\n\n**Actual Behavior:**\n").concat(t,"\n    "));return"https://github.com/litlfred/sgex/issues/new?title=".concat(e,"&body=").concat(n,"&labels=bug,user-error")})();window.open(e,"_blank"),r(!0)},children:"\ud83d\udce7 Send Bug Report"})]}),(0,c.jsx)("div",{className:"error-context",children:(0,c.jsxs)("details",{children:[(0,c.jsx)("summary",{children:"Technical Details"}),(0,c.jsxs)("div",{className:"technical-details",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Page:"})," ",a]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"URL:"})," ",window.location.href]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Error:"})," ",t]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Timestamp:"})," ",(new Date).toISOString()]})]})]})})]})]})})};class R extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e.message}}componentDidCatch(e,t){console.error("PageLayout caught an error:",e,t)}render(){return this.state.hasError?(0,c.jsx)("div",{className:"page-layout-error",children:(0,c.jsx)(H,{error:this.state.error,onRetry:()=>{this.setState({hasError:!1,error:null}),window.location.reload()}})}):this.props.children}}const _=e=>{let{children:t,showHeader:n=!0,showMascot:s=!0,showBreadcrumbs:o=!0,customBreadcrumbs:a}=e;const{loading:i,error:r,pageName:l}=p();return i?(0,c.jsxs)("div",{className:"page-layout",children:[n&&(0,c.jsx)(T,{}),(0,c.jsx)("main",{className:"page-main",children:(0,c.jsxs)("div",{className:"page-loading",children:[(0,c.jsx)("div",{className:"loading-spinner"}),(0,c.jsx)("p",{children:"Loading..."})]})}),s&&(0,c.jsx)(P.A,{pageId:"".concat(l,"-loading"),position:"bottom-right"})]}):r?(0,c.jsxs)("div",{className:"page-layout",children:[n&&(0,c.jsx)(T,{}),(0,c.jsx)("main",{className:"page-main",children:(0,c.jsx)(H,{error:r,onRetry:()=>window.location.reload()})})]}):(0,c.jsxs)("div",{className:"page-layout",children:[n&&(0,c.jsx)(T,{}),(0,c.jsx)(I,{customBreadcrumbs:o?a:[]}),(0,c.jsxs)("main",{className:"page-main",children:[t,s&&(0,c.jsx)(P.A,{pageId:l,position:"bottom-right",contextData:{}})]})]})},M=e=>{let{children:t,pageName:n,showHeader:s=!0,showMascot:o=!0,showBreadcrumbs:a=!0,customBreadcrumbs:i}=e;return(0,c.jsx)(R,{children:(0,c.jsx)(v,{pageName:n,children:(0,c.jsx)(_,{showHeader:s,showMascot:o,showBreadcrumbs:a,customBreadcrumbs:i,children:t})})})},B=()=>{const{type:e,user:t,profile:n,repository:s,branch:o,asset:a,params:i,navigate:r}=p();return{type:e,user:t,profile:n,repository:s,branch:o,asset:a,params:i,updateBranch:t=>{if(e===h||e===u){const e=window.location.pathname.split("/");e.length>=5&&(5===e.length?e.push(t):e[5]=t,r(e.join("/")))}},navigateToUser:e=>{r("/".concat(i.page||"dak-action","/").concat(e))},navigateToDAK:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";r("/".concat(i.page||"dashboard","/").concat(e,"/").concat(t,"/").concat(n))},navigateToAsset:(e,t,n,s)=>{r("/".concat(i.page||"editor","/").concat(e,"/").concat(t,"/").concat(n,"/").concat(s))},navigate:r}},K=()=>{try{const e=B();if(!e.loading&&e.type!==h&&e.type!==u)throw new Error("useDAKParams can only be used on DAK or Asset pages. Current page type: ".concat(e.type));return{user:e.user,profile:e.profile,repository:e.repository,branch:e.branch,asset:e.asset,updateBranch:e.updateBranch,navigate:e.navigate}}catch(e){if(e.message.includes("usePage must be used within a PageProvider"))return console.log("useDAKParams: PageProvider not ready yet, returning empty data"),{user:null,profile:null,repository:null,branch:null,asset:null,updateBranch:()=>{},navigate:()=>{}};throw e}};var L=n(80045);const U=e=>{let{hasChanges:t=!1,isSavingLocal:n=!1,isSavingGitHub:s=!1,canSaveToGitHub:o=!1,localSaveSuccess:a=!1,githubSaveSuccess:i=!1,savedLocally:r=!1,onSaveLocal:l,onSaveGitHub:d,isDemo:g=!1,showLocalButton:h=!0,showGitHubButton:u=!0,buttonSize:m="medium",layout:p="horizontal"}=e;const b=!t||n||a,v=!t||s||i||!o,f=["save-buttons-container","layout-".concat(p),"size-".concat(m)].join(" "),y=(e,t,n)=>{const s=["save-button","save-button-".concat(e)];return t&&s.push("disabled"),n&&s.push("success"),s.join(" ")};return(0,c.jsxs)("div",{className:f,children:[h&&(0,c.jsxs)("button",{className:y("local",b,a),onClick:l,disabled:b,title:t?a?"Changes saved to local storage":n?"Saving to local storage...":"Save changes to browser local storage":"No changes to save",children:[(0,c.jsx)("span",{className:"button-icon",children:"\ud83d\udcbe"}),(0,c.jsx)("span",{className:"button-text",children:a?"Saved Locally \u2713":n?"Saving...":"Save Local"})]}),u&&o&&(0,c.jsxs)("button",{className:y("github",v,i),onClick:d,disabled:v,title:t?i?"Changes committed to GitHub":s?"Committing to GitHub...":"Commit changes to GitHub repository":"No changes to save",children:[(0,c.jsx)("span",{className:"button-icon",children:"\ud83d\udce4"}),(0,c.jsx)("span",{className:"button-text",children:i?"Committed \u2713":s?"Committing...":"Save to GitHub"})]}),u&&!o&&!g&&(0,c.jsxs)("div",{className:"github-unavailable",children:[(0,c.jsx)("span",{className:"unavailable-icon",children:"\ud83d\udd12"}),(0,c.jsx)("span",{className:"unavailable-text",children:"GitHub save unavailable"}),(0,c.jsx)("small",{children:"Login required for GitHub access"})]}),g&&(0,c.jsxs)("div",{className:"demo-mode-indicator",children:[(0,c.jsx)("span",{className:"demo-icon",children:"\ud83e\uddea"}),(0,c.jsx)("span",{className:"demo-text",children:"Demo Mode - Local save only"})]}),r&&(0,c.jsxs)("div",{className:"local-storage-indicator",children:[(0,c.jsx)("span",{className:"local-icon",children:"\ud83d\udcbe"}),(0,c.jsx)("span",{className:"local-text",children:"Local version available"})]})]})},F=e=>{let{isOpen:t=!1,commitMessage:n="",setCommitMessage:o,onCommit:a,onCancel:i,isSaving:r=!1,fileName:l="",suggestedMessage:d=""}=e;const g=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(t&&g.current)if(g.current.focus(),n||d||!l)d&&!n&&o(d);else{const e="Update ".concat(l);o(e)}},[t,n,d,l,o]);return t?(0,c.jsx)("div",{className:"commit-dialog-overlay",onClick:e=>{e.target!==e.currentTarget||r||i()},children:(0,c.jsxs)("div",{className:"commit-dialog",onKeyDown:e=>{"Escape"!==e.key||r?"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&n.trim()&&!r&&a(n.trim()):i()},children:[(0,c.jsxs)("div",{className:"commit-dialog-header",children:[(0,c.jsx)("h3",{children:"Commit Changes to GitHub"}),(0,c.jsx)("button",{className:"close-button",onClick:i,disabled:r,"aria-label":"Close dialog",children:"\u2715"})]}),(0,c.jsxs)("div",{className:"commit-dialog-content",children:[l&&(0,c.jsxs)("div",{className:"file-info",children:[(0,c.jsx)("span",{className:"file-icon",children:"\ud83d\udcc4"}),(0,c.jsx)("span",{className:"file-name",children:l})]}),(0,c.jsxs)("div",{className:"commit-message-section",children:[(0,c.jsx)("label",{htmlFor:"commit-message",className:"commit-message-label",children:"Commit Message *"}),(0,c.jsx)("textarea",{id:"commit-message",ref:g,className:"commit-message-input",value:n,onChange:e=>o(e.target.value),placeholder:"Describe the changes you made...",rows:4,disabled:r,required:!0}),(0,c.jsx)("div",{className:"commit-message-help",children:(0,c.jsx)("small",{children:"Describe what changes you made and why. This will be visible in the repository's commit history."})})]}),(0,c.jsx)("div",{className:"commit-guidelines",children:(0,c.jsxs)("details",{children:[(0,c.jsx)("summary",{children:"Commit Message Guidelines"}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:"Use clear, descriptive language"}),(0,c.jsx)("li",{children:"Start with a verb (Add, Update, Fix, Remove, etc.)"}),(0,c.jsx)("li",{children:"Keep the first line under 72 characters"}),(0,c.jsx)("li",{children:"Add details in additional lines if needed"})]})]})})]}),(0,c.jsxs)("div",{className:"commit-dialog-footer",children:[(0,c.jsxs)("div",{className:"dialog-actions",children:[(0,c.jsx)("button",{className:"btn btn-secondary",onClick:i,disabled:r,children:"Cancel"}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>{n.trim()&&!r&&a(n.trim())},disabled:!n.trim()||r,children:r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"spinner"}),"Committing..."]}):"Commit Changes"})]}),(0,c.jsx)("div",{className:"keyboard-shortcut",children:(0,c.jsxs)("small",{children:["Press ",(0,c.jsx)("kbd",{children:"Ctrl+Enter"})," to commit or ",(0,c.jsx)("kbd",{children:"Esc"})," to cancel"]})})]})]})}):null};var O=n(22392);const W="local",q="github",z="success",X="error",V="permission_denied",Y="demo_mode_blocked";const J=new class{constructor(){this.logger=f.A.getLogger("DataAccessLayer"),this.pendingOperations=new Map,this.assetCache=new Map}async initialize(e,t){this.logger.info("Initializing data access layer",{repository:null===e||void 0===e?void 0:e.full_name,branch:t}),O.A.initialize(e,t),await j.initialize()}async getAsset(e,t,n,s){const o="".concat(e,"/").concat(t,"/").concat(n,"/").concat(s);try{if("none"===await j.getRepositoryAccess(e,t,n))throw new Error("No access to this repository");const a=O.A.getStagingGround().files.find(e=>e.path===s);if(a)return this.logger.debug("Asset loaded from staging ground",{assetPath:s}),{content:a.content,source:"local",metadata:a.metadata,hasLocalChanges:!0};let r;return r=j.isDemoUser()&&j.isDemoDAK(e,t)?this.getDemoAssetContent(s):await i.A.getFileContent(e,t,s,n),this.assetCache.set(o,r),this.logger.debug("Asset loaded from GitHub",{assetPath:s,source:"github"}),{content:r,source:"github",hasLocalChanges:!1}}catch(a){throw this.logger.error("Error getting asset",{owner:e,repo:t,branch:n,assetPath:s,error:a.message}),a}}async saveAssetLocal(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const s=j.getUserType();if(O.A.updateFile(e,t,(0,o.A)((0,o.A)({},n),{},{savedBy:s,saveTarget:W})))return this.logger.info("Asset saved to local storage",{assetPath:e,userType:s}),{result:z,message:"Changes saved to local staging area",target:W};throw new Error("Failed to save to local storage")}catch(s){return this.logger.error("Error saving asset locally",{assetPath:e,error:s.message}),{result:X,message:"Failed to save locally: ".concat(s.message),target:W}}}async saveAssetGitHub(e,t,n,s,o,a){try{const u=j.getUserType();if(!await j.canSaveToGitHub(e,t,n))return"demo"===u?{result:Y,message:"Demo users cannot save to GitHub. Changes can be saved locally.",target:q}:"unauthenticated"===u?{result:V,message:"Please authenticate to save changes to GitHub.",target:q}:{result:V,message:"You do not have write access to this repository.",target:q};const m=await i.A.updateFileContent(e,t,s,o,a,n);if(m.success){var r,l,c,d,g,h;O.A.removeFile(s);const o="".concat(e,"/").concat(t,"/").concat(n,"/").concat(s);return this.assetCache.delete(o),this.logger.info("Asset saved to GitHub",{owner:e,repo:t,branch:n,assetPath:s,commit:null===(r=m.data)||void 0===r||null===(l=r.commit)||void 0===l?void 0:l.sha}),{result:z,message:"Changes successfully committed to GitHub",target:q,commitSha:null===(c=m.data)||void 0===c||null===(d=c.commit)||void 0===d?void 0:d.sha,commitUrl:null===(g=m.data)||void 0===g||null===(h=g.commit)||void 0===h?void 0:h.html_url}}throw new Error(m.error||"GitHub commit failed")}catch(u){return this.logger.error("Error saving asset to GitHub",{owner:e,repo:t,branch:n,assetPath:s,error:u.message}),{result:X,message:"Failed to save to GitHub: ".concat(u.message),target:q}}}getDemoAssetContent(e){return{"input/vocabulary/ValueSet-anc-care-codes.json":JSON.stringify({resourceType:"ValueSet",id:"anc-care-codes",name:"ANCCareCodes",title:"ANC Care Codes (Demo)",status:"draft",description:"Demo value set for antenatal care codes",compose:{include:[{system:"http://example.org/anc-codes",concept:[{code:"anc-visit",display:"Antenatal Care Visit"},{code:"anc-screening",display:"Antenatal Screening"}]}]}},null,2),"input/actors/Patient.json":JSON.stringify({resourceType:"ActorDefinition",id:"patient",name:"Patient",title:"Patient (Demo)",status:"draft",description:"Demo patient actor definition",type:"person"},null,2),"README.md":"# Demo DAK Repository\n\nThis is a demo repository showing the structure of a SMART Guidelines DAK.\n\n## Components\n\n- **ValueSets**: Terminology definitions\n- **Actors**: System and person actors  \n- **Business Processes**: BPMN workflow definitions\n\nThis is demo data and cannot be saved to GitHub."}[e]||"# Demo Asset: ".concat(e,"\n\nThis is demo content for the asset located at: ").concat(e,"\n\nDemo users can edit this content and save it locally, but cannot commit changes to GitHub.")}async getSaveOptions(e,t,n){const s=j.getUserType(),o=await j.canSaveToGitHub(e,t,n),a=j.canSaveLocal(),i=j.getUIBehavior();return{canSaveLocal:a,canSaveGitHub:o,showSaveLocal:i.showSaveLocal,showSaveGitHub:i.showSaveToGitHub,confirmBeforeSave:i.confirmBeforeSave,userType:s,restrictions:this.getSaveRestrictions(s,o)}}getSaveRestrictions(e,t){switch(e){case"unauthenticated":return{localMessage:"Changes will be saved to your browser only",githubMessage:"Please authenticate to save to GitHub",githubDisabled:!0};case"demo":return{localMessage:"Changes will be saved to your browser only",githubMessage:"Demo users cannot save to GitHub",githubDisabled:!0};case"authenticated":return t?{localMessage:"Save changes to staging area",githubMessage:"Commit changes to GitHub repository",githubDisabled:!1}:{localMessage:"Changes will be saved to your browser only",githubMessage:"You do not have write access to this repository",githubDisabled:!0};default:return{localMessage:"Local saves only",githubMessage:"GitHub saves not available",githubDisabled:!0}}}getStagingGroundStatus(){return O.A.getStatus()}clearStagingGround(){return O.A.clearStagingGround()}getChangedFiles(){return O.A.getStagingGround().files}hasLocalChanges(e){return O.A.getStagingGround().files.some(t=>t.path===e)}async createAsset(e,t,n,s){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!j.getUIBehavior().allowCreateNew)throw new Error("Current user type cannot create new assets");return this.saveAssetLocal(s,a,(0,o.A)((0,o.A)({},i),{},{isNew:!0,createdAt:Date.now()}))}async batchSaveLocal(e){const t=[];for(const n of e){const e=await this.saveAssetLocal(n.path,n.content,n.metadata);t.push((0,o.A)((0,o.A)({},e),{},{path:n.path}))}return{success:t.every(e=>e.result===z),results:t}}async getAccessInfo(e,t,n){const[s,o,a]=await Promise.all([j.getRepositoryAccess(e,t,n),j.getAccessBadge(e,t,n),this.getSaveOptions(e,t,n)]);return{access:s,badge:o,saveOptions:a,userType:j.getUserType(),isDemo:j.isDemoUser()}}},Q=["children","pageName","file","repository","branch","content","originalContent","hasChanges","onSave","onContentChange","customSaveToGitHub","showSaveButtons","saveButtonsPosition"],Z=e=>{let{children:t,pageName:n,file:a,repository:i,branch:r,content:l,originalContent:d,hasChanges:g=!1,onSave:h,onContentChange:u,customSaveToGitHub:m,showSaveButtons:p=!0,saveButtonsPosition:b="top"}=e,v=(0,L.A)(e,Q);const[f,y]=(0,s.useState)(!1),[w,x]=(0,s.useState)(!1),[k,N]=(0,s.useState)(null),[S,A]=(0,s.useState)(!1),[j,C]=(0,s.useState)(!1),[D,T]=(0,s.useState)(null),[E,I]=(0,s.useState)(!1),[P,G]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{if(i)try{var e;const t=await J.getSaveOptions(null===(e=i.owner)||void 0===e?void 0:e.login,i.name,r);T(t)}catch(t){console.error("Error loading save options:",t)}})()},[i,r]);const H=(null===D||void 0===D?void 0:D.canSaveGitHub)&&(null===D||void 0===D?void 0:D.showSaveGitHub),R=(0,s.useCallback)(async()=>{if(g&&null!==a&&void 0!==a&&a.path)try{var e;y(!0),N(null),A(!1);const t=await J.saveAssetLocal(a.path,l,{repository:(null===i||void 0===i?void 0:i.full_name)||"".concat(null===i||void 0===i||null===(e=i.owner)||void 0===e?void 0:e.login,"/").concat(null===i||void 0===i?void 0:i.name),branch:r||(null===i||void 0===i?void 0:i.default_branch)||"main",fileName:a.name,timestamp:(new Date).toISOString()});if("success"!==t.result)throw new Error(t.message||"Failed to save to local storage");A(!0),h&&h(l,"local"),setTimeout(()=>{A(!1)},3e3)}catch(t){console.error("Error saving file locally:",t),N("Failed to save locally: ".concat(t.message))}finally{y(!1)}},[g,a,l,i,r,h]),_=(0,s.useCallback)(()=>{g&&H&&(N(null),I(!0))},[g,H]),B=(0,s.useCallback)(async e=>{if(e.trim()&&null!==a&&void 0!==a&&a.path)try{var t;if(x(!0),N(null),C(!1),m){if(!await m(e.trim()))throw new Error("Custom save function failed");return C(!0),I(!1),G(""),h&&h(l,"github"),void setTimeout(()=>{C(!1)},3e3)}const n=await J.saveAssetGitHub(null===i||void 0===i||null===(t=i.owner)||void 0===t?void 0:t.login,null===i||void 0===i?void 0:i.name,r,a.path,l,e.trim());if("success"!==n.result){let e=n.message;throw"demo_mode_blocked"===n.result?e="Demo users cannot save to GitHub. You can save changes locally instead.":"permission_denied"===n.result&&(e="You do not have permission to save to this repository."),new Error(e)}C(!0),I(!1),G(""),h&&h(l,"github"),setTimeout(()=>{C(!1)},3e3)}catch(n){console.error("Error saving file to GitHub:",n),N("Failed to save to GitHub: ".concat(n.message))}finally{x(!1)}},[a,l,i,r,h,m]),K=(0,s.useCallback)(()=>{I(!1),G("")},[]),O={hasChanges:g,isSavingLocal:f,isSavingGitHub:w,canSaveToGitHub:H,localSaveSuccess:S,githubSaveSuccess:j,onSaveLocal:R,onSaveGitHub:_};return(0,c.jsx)(M,(0,o.A)((0,o.A)({pageName:n},v),{},{children:(0,c.jsxs)("div",{className:"asset-editor-layout",children:[p&&("top"===b||"both"===b)&&(0,c.jsx)("div",{className:"save-buttons-top",children:(0,c.jsx)(U,(0,o.A)({},O))}),k&&(0,c.jsxs)("div",{className:"asset-editor-error",children:[(0,c.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),k,(0,c.jsx)("button",{className:"btn-link error-dismiss",onClick:()=>N(null),children:"\u2715"})]}),S&&(0,c.jsxs)("div",{className:"asset-editor-success",children:[(0,c.jsx)("span",{className:"success-icon",children:"\u2705"}),"Changes saved locally successfully!"]}),j&&(0,c.jsxs)("div",{className:"asset-editor-success",children:[(0,c.jsx)("span",{className:"success-icon",children:"\u2705"}),"Changes committed to GitHub successfully!"]}),(0,c.jsx)("div",{className:"asset-editor-content",children:t}),p&&("bottom"===b||"both"===b)&&(0,c.jsx)("div",{className:"save-buttons-bottom",children:(0,c.jsx)(U,(0,o.A)({},O))}),E&&(0,c.jsx)(F,{isOpen:E,commitMessage:P,setCommitMessage:G,onCommit:B,onCancel:K,isSaving:w,fileName:null===a||void 0===a?void 0:a.name})]})}))};n(78362);const $=["toolDefinition"],ee="viewer",te="editor",ne="dashboard",se="utility";class oe{constructor(e){this.id=e.id,this.name=e.name,this.title=e.title||e.name,this.description=e.description,this.type=e.type||se,this.route=e.route||"/".concat(this.id),this.icon=e.icon,this.category=e.category||"general",this.requiresAuth=!1!==e.requiresAuth,this.supportsDemo=!1!==e.supportsDemo,this.requiresDAK=e.requiresDAK||!1,this.assetTypes=e.assetTypes||[],this.assetPattern=e.assetPattern,this.viewerComponent=e.viewerComponent,this.editorComponent=e.editorComponent,this.dashboardComponent=e.dashboardComponent,this.onInit=e.onInit,this.onAssetLoad=e.onAssetLoad,this.onAssetSave=e.onAssetSave,this.onError=e.onError}supportsAsset(e){var t;return!(null!==(t=this.assetTypes)&&void 0!==t&&t.length||this.assetPattern)||(this.assetPattern?new RegExp(this.assetPattern).test(e):this.assetTypes.some(t=>e.includes(t)))}async canAccess(){return(!this.requiresAuth||!j.isUnauthenticated())&&!(!this.supportsDemo&&j.isDemoUser())}createComponent(){const e=this;return function(t){return(0,c.jsx)(ae,(0,o.A)({toolDefinition:e},t))}}}const ae=e=>{let{toolDefinition:t}=e,n=(0,L.A)(e,$);const a=B(),[i,r]=s.useState({loading:!0,error:null,canAccess:!1,assets:[],content:null}),l=s.useCallback(async()=>{try{r(e=>(0,o.A)((0,o.A)({},e),{},{loading:!0,error:null}));if(!await t.canAccess())throw new Error("Access denied: This tool requires ".concat(t.requiresAuth?"authentication":"different user type"));a.repository&&await J.initialize(a.repository,a.branch);let n=[],s=null;if(a.asset&&(t.type===ee||t.type===te)){if(!t.supportsAsset(a.asset))throw new Error("This tool does not support asset type: ".concat(a.asset));{var e;const t=await J.getAsset(a.user,null===(e=a.repository)||void 0===e?void 0:e.name,a.branch,a.asset);n=[(0,o.A)({path:a.asset},t)],s=t.content}}t.onInit&&await t.onInit({pageParams:a,assets:n,content:s}),r({loading:!1,error:null,canAccess:!0,assets:n,content:s})}catch(n){console.error("Error initializing tool ".concat(t.id,":"),n),r({loading:!1,error:n.message,canAccess:!1,assets:[],content:null}),t.onError&&t.onError(n,{pageParams:a})}},[t,a]);s.useEffect(()=>{l()},[l]);const d=async(e,n)=>{if(a.asset)try{let s;if("local"===n)s=await J.saveAssetLocal(a.asset,e);else if("github"===n)throw new Error("GitHub save requires commit message - use handleGitHubSave instead");return t.onAssetSave&&await t.onAssetSave({asset:a.asset,content:e,saveType:n,result:s,pageParams:a}),s}catch(s){throw console.error("Error saving asset in tool ".concat(t.id,":"),s),s}},g=async(e,n)=>{if(a.asset)try{var s;const o=await J.saveAssetGitHub(a.user,null===(s=a.repository)||void 0===s?void 0:s.name,a.branch,a.asset,e,n);return t.onAssetSave&&await t.onAssetSave({asset:a.asset,content:e,saveType:"github",result:o,commitMessage:n,pageParams:a}),o}catch(o){throw console.error("Error saving asset to GitHub in tool ".concat(t.id,":"),o),o}};if(i.loading)return(0,c.jsx)(M,{pageName:t.id,children:(0,c.jsxs)("div",{className:"tool-loading",children:[(0,c.jsxs)("h2",{children:["Loading ",t.title,"..."]}),(0,c.jsx)("p",{children:"Initializing tool and checking access permissions."})]})});if(i.error||!i.canAccess)return(0,c.jsx)(M,{pageName:t.id,children:(0,c.jsxs)("div",{className:"tool-error",children:[(0,c.jsxs)("h2",{children:["Cannot Access ",t.title]}),(0,c.jsx)("p",{children:i.error||"Access denied"}),(0,c.jsx)("button",{onClick:()=>window.history.back(),children:"Go Back"})]})});return(()=>{const e=(0,o.A)({toolDefinition:t,pageParams:a,toolState:i,onAssetSave:d,onGitHubSave:g},n);switch(t.type){case te:if(t.editorComponent){const n=t.editorComponent;var s;return a.asset&&i.assets.length>0?(0,c.jsx)(Z,{pageName:t.id,file:{name:a.asset,path:a.asset},repository:a.repository,branch:a.branch,content:i.content,originalContent:null===(s=i.assets[0])||void 0===s?void 0:s.content,hasChanges:!1,onSave:d,onContentChange:e=>{r(t=>(0,o.A)((0,o.A)({},t),{},{content:e}))},children:(0,c.jsx)(n,(0,o.A)({},e))}):(0,c.jsx)(M,{pageName:t.id,children:(0,c.jsx)(n,(0,o.A)({},e))})}break;case ee:if(t.viewerComponent){const n=t.viewerComponent;return(0,c.jsx)(M,{pageName:t.id,children:(0,c.jsx)(n,(0,o.A)({},e))})}break;case ne:if(t.dashboardComponent){const n=t.dashboardComponent;return(0,c.jsx)(M,{pageName:t.id,children:(0,c.jsx)(n,(0,o.A)({},e))})}break;default:const n=t.viewerComponent||t.editorComponent||t.dashboardComponent;if(n)return(0,c.jsx)(M,{pageName:t.id,children:(0,c.jsx)(n,(0,o.A)({},e))})}return(0,c.jsx)(M,{pageName:t.id,children:(0,c.jsxs)("div",{className:"tool-fallback",children:[(0,c.jsx)("h1",{children:t.title}),(0,c.jsx)("p",{children:t.description}),(0,c.jsx)("p",{children:"No component defined for this tool."})]})})})()};new class{constructor(){this.tools=new Map}register(e){const t=new oe(e);return this.tools.set(t.id,t),t}get(e){return this.tools.get(e)}getAll(){return Array.from(this.tools.values())}getByCategory(e){return this.getAll().filter(t=>t.category===e)}getByAssetType(e){return this.getAll().filter(t=>t.supportsAsset(e))}async getAccessibleTools(){const e=this.getAll(),t=[];for(const n of e)await n.canAccess()&&t.push(n);return t}}},18077:(e,t,n)=>{n.d(t,{A:()=>v});var s=n(65043),o=n(74117),a=n(12602),i=n(65240),r=n(88691),l=n(5452);const c=new class{constructor(){this.logger=l.A.getLogger("CacheManagementService")}clearAllCache(){try{this.logger.info("Starting complete cache clear operation");const e=i.A.clearAllCaches();return this.logger.debug("Repository cache cleared",{success:e}),r.default.clearAllBranchContext(),this.logger.debug("Branch context cleared"),this.clearAllStagingGrounds(),this.logger.debug("Staging ground data cleared"),this.clearOtherSGEXData(),this.logger.debug("Other SGEX data cleared"),this.logger.info("Complete cache clear operation completed successfully"),!0}catch(e){return this.logger.error("Error during cache clear operation",{error:e.message}),console.error("Error clearing cache:",e),!1}}clearAllStagingGrounds(){try{const e=Object.keys(localStorage);e.filter(e=>e.startsWith("sgex_staging_")).forEach(e=>{localStorage.removeItem(e),this.logger.debug("Removed staging ground",{key:e})});return e.filter(e=>e.startsWith("sgex_staging_history_")).forEach(e=>{localStorage.removeItem(e),this.logger.debug("Removed staging ground history",{key:e})}),!0}catch(e){return this.logger.error("Error clearing staging grounds",{error:e.message}),console.warn("Error clearing staging grounds:",e),!1}}clearOtherSGEXData(){try{const e=Object.keys(localStorage);e.filter(e=>e.startsWith("sgex_")&&!e.startsWith("sgex_repo_cache_")&&!e.startsWith("sgex_staging_")).forEach(e=>{localStorage.removeItem(e),this.logger.debug("Removed other SGEX data",{key:e})});const t=Object.keys(sessionStorage);return t.filter(e=>e.startsWith("sgex_")&&"sgex_branch_context"!==e).forEach(e=>{sessionStorage.removeItem(e),this.logger.debug("Removed SGEX session data",{key:e})}),!0}catch(e){return this.logger.error("Error clearing other SGEX data",{error:e.message}),console.warn("Error clearing other SGEX data:",e),!1}}getCacheInfo(){try{const t={repositoryCache:{count:0,keys:[]},branchContext:{hasData:!1,repositoryCount:0},stagingGround:{count:0,keys:[]},other:{count:0,keys:[]}},n=Object.keys(localStorage);t.repositoryCache.keys=n.filter(e=>e.startsWith("sgex_repo_cache_")),t.repositoryCache.count=t.repositoryCache.keys.length,t.stagingGround.keys=n.filter(e=>e.startsWith("sgex_staging_")||e.startsWith("sgex_staging_history_")),t.stagingGround.count=t.stagingGround.keys.length,t.other.keys=n.filter(e=>e.startsWith("sgex_")&&!e.startsWith("sgex_repo_cache_")&&!e.startsWith("sgex_staging_")),t.other.count=t.other.keys.length;try{const e=sessionStorage.getItem("sgex_branch_context");if(e){const n=JSON.parse(e);t.branchContext.hasData=!0,t.branchContext.repositoryCount=Object.keys(n).length}}catch(e){}return t}catch(t){return this.logger.error("Error getting cache info",{error:t.message}),null}}getUncommittedWork(){try{const e=[],t=Object.keys(localStorage);return t.filter(e=>e.startsWith("sgex_staging_")&&!e.includes("_history_")).forEach(t=>{try{const n=JSON.parse(localStorage.getItem(t));if(n&&n.files&&n.files.length>0){const s=t.replace("sgex_staging_","").split("_"),o=s.pop(),a=s.join("_");e.push({repository:a,branch:o,fileCount:n.files.length,lastModified:n.timestamp?new Date(n.timestamp):null,message:n.message||""})}}catch(n){}}),e}catch(e){return this.logger.error("Error checking uncommitted work",{error:e.message}),[]}}};var d=n(48517),g=n(89379),h=n(70579);const u=[{code:"en",name:"language.english",flag:"\ud83c\uddfa\ud83c\uddf8"},{code:"fr",name:"language.french",flag:"\ud83c\uddeb\ud83c\uddf7"},{code:"es",name:"language.spanish",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"ar",name:"language.arabic",flag:"\ud83c\uddf8\ud83c\udde6"},{code:"zh",name:"language.chinese",flag:"\ud83c\udde8\ud83c\uddf3"},{code:"ru",name:"language.russian",flag:"\ud83c\uddf7\ud83c\uddfa"}],m=[{code:"de",name:"Deutsch",englishName:"German",flag:"\ud83c\udde9\ud83c\uddea"},{code:"it",name:"Italiano",englishName:"Italian",flag:"\ud83c\uddee\ud83c\uddf9"},{code:"pt",name:"Portugu\xeas",englishName:"Portuguese",flag:"\ud83c\uddf5\ud83c\uddf9"},{code:"nl",name:"Nederlands",englishName:"Dutch",flag:"\ud83c\uddf3\ud83c\uddf1"},{code:"sv",name:"Svenska",englishName:"Swedish",flag:"\ud83c\uddf8\ud83c\uddea"},{code:"no",name:"Norsk",englishName:"Norwegian",flag:"\ud83c\uddf3\ud83c\uddf4"},{code:"da",name:"Dansk",englishName:"Danish",flag:"\ud83c\udde9\ud83c\uddf0"},{code:"fi",name:"Suomi",englishName:"Finnish",flag:"\ud83c\uddeb\ud83c\uddee"},{code:"pl",name:"Polski",englishName:"Polish",flag:"\ud83c\uddf5\ud83c\uddf1"},{code:"cs",name:"\u010ce\u0161tina",englishName:"Czech",flag:"\ud83c\udde8\ud83c\uddff"},{code:"sk",name:"Sloven\u010dina",englishName:"Slovak",flag:"\ud83c\uddf8\ud83c\uddf0"},{code:"hu",name:"Magyar",englishName:"Hungarian",flag:"\ud83c\udded\ud83c\uddfa"},{code:"ro",name:"Rom\xe2n\u0103",englishName:"Romanian",flag:"\ud83c\uddf7\ud83c\uddf4"},{code:"bg",name:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",englishName:"Bulgarian",flag:"\ud83c\udde7\ud83c\uddec"},{code:"hr",name:"Hrvatski",englishName:"Croatian",flag:"\ud83c\udded\ud83c\uddf7"},{code:"el",name:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",englishName:"Greek",flag:"\ud83c\uddec\ud83c\uddf7"},{code:"sr",name:"\u0421\u0440\u043f\u0441\u043a\u0438",englishName:"Serbian",flag:"\ud83c\uddf7\ud83c\uddf8"},{code:"sl",name:"Sloven\u0161\u010dina",englishName:"Slovenian",flag:"\ud83c\uddf8\ud83c\uddee"},{code:"lv",name:"Latvie\u0161u",englishName:"Latvian",flag:"\ud83c\uddf1\ud83c\uddfb"},{code:"lt",name:"Lietuvi\u0173",englishName:"Lithuanian",flag:"\ud83c\uddf1\ud83c\uddf9"},{code:"et",name:"Eesti",englishName:"Estonian",flag:"\ud83c\uddea\ud83c\uddea"},{code:"mt",name:"Malti",englishName:"Maltese",flag:"\ud83c\uddf2\ud83c\uddf9"},{code:"is",name:"\xcdslenska",englishName:"Icelandic",flag:"\ud83c\uddee\ud83c\uddf8"},{code:"ga",name:"Gaeilge",englishName:"Irish",flag:"\ud83c\uddee\ud83c\uddea"},{code:"cy",name:"Cymraeg",englishName:"Welsh",flag:"\ud83c\udff4"},{code:"eu",name:"Euskera",englishName:"Basque",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"ca",name:"Catal\xe0",englishName:"Catalan",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"gl",name:"Galego",englishName:"Galician",flag:"\ud83c\uddea\ud83c\uddf8"},{code:"tr",name:"T\xfcrk\xe7e",englishName:"Turkish",flag:"\ud83c\uddf9\ud83c\uddf7"},{code:"he",name:"\u05e2\u05d1\u05e8\u05d9\u05ea",englishName:"Hebrew",flag:"\ud83c\uddee\ud83c\uddf1"},{code:"fa",name:"\u0641\u0627\u0631\u0633\u06cc",englishName:"Persian",flag:"\ud83c\uddee\ud83c\uddf7"},{code:"ur",name:"\u0627\u0631\u062f\u0648",englishName:"Urdu",flag:"\ud83c\uddf5\ud83c\uddf0"},{code:"ku",name:"Kurd\xee",englishName:"Kurdish",flag:"\ud83c\uddf9\ud83c\uddf7"},{code:"az",name:"Az\u0259rbaycan",englishName:"Azerbaijani",flag:"\ud83c\udde6\ud83c\uddff"},{code:"hy",name:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",englishName:"Armenian",flag:"\ud83c\udde6\ud83c\uddf2"},{code:"ka",name:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",englishName:"Georgian",flag:"\ud83c\uddec\ud83c\uddea"},{code:"ja",name:"\u65e5\u672c\u8a9e",englishName:"Japanese",flag:"\ud83c\uddef\ud83c\uddf5"},{code:"ko",name:"\ud55c\uad6d\uc5b4",englishName:"Korean",flag:"\ud83c\uddf0\ud83c\uddf7"},{code:"hi",name:"\u0939\u093f\u0928\u094d\u0926\u0940",englishName:"Hindi",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"th",name:"\u0e44\u0e17\u0e22",englishName:"Thai",flag:"\ud83c\uddf9\ud83c\udded"},{code:"vi",name:"Ti\u1ebfng Vi\u1ec7t",englishName:"Vietnamese",flag:"\ud83c\uddfb\ud83c\uddf3"},{code:"bn",name:"\u09ac\u09be\u0982\u09b2\u09be",englishName:"Bengali",flag:"\ud83c\udde7\ud83c\udde9"},{code:"ta",name:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",englishName:"Tamil",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"te",name:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",englishName:"Telugu",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"ml",name:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",englishName:"Malayalam",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"kn",name:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",englishName:"Kannada",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"gu",name:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",englishName:"Gujarati",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"mr",name:"\u092e\u0930\u093e\u0920\u0940",englishName:"Marathi",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"pa",name:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",englishName:"Punjabi",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"or",name:"\u0b13\u0b21\u0b3c\u0b3f\u0b06",englishName:"Odia",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"as",name:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",englishName:"Assamese",flag:"\ud83c\uddee\ud83c\uddf3"},{code:"ne",name:"\u0928\u0947\u092a\u093e\u0932\u0940",englishName:"Nepali",flag:"\ud83c\uddf3\ud83c\uddf5"},{code:"si",name:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",englishName:"Sinhala",flag:"\ud83c\uddf1\ud83c\uddf0"},{code:"my",name:"\u1019\u103c\u1014\u103a\u1019\u102c",englishName:"Myanmar",flag:"\ud83c\uddf2\ud83c\uddf2"},{code:"km",name:"\u1781\u17d2\u1798\u17c2\u179a",englishName:"Khmer",flag:"\ud83c\uddf0\ud83c\udded"},{code:"lo",name:"\u0ea5\u0eb2\u0ea7",englishName:"Lao",flag:"\ud83c\uddf1\ud83c\udde6"},{code:"mn",name:"\u041c\u043e\u043d\u0433\u043e\u043b",englishName:"Mongolian",flag:"\ud83c\uddf2\ud83c\uddf3"},{code:"bo",name:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",englishName:"Tibetan",flag:"\ud83c\udde8\ud83c\uddf3"},{code:"dz",name:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",englishName:"Dzongkha",flag:"\ud83c\udde7\ud83c\uddf9"},{code:"id",name:"Bahasa Indonesia",englishName:"Indonesian",flag:"\ud83c\uddee\ud83c\udde9"},{code:"ms",name:"Bahasa Melayu",englishName:"Malay",flag:"\ud83c\uddf2\ud83c\uddfe"},{code:"tl",name:"Filipino",englishName:"Filipino",flag:"\ud83c\uddf5\ud83c\udded"},{code:"ceb",name:"Cebuano",englishName:"Cebuano",flag:"\ud83c\uddf5\ud83c\udded"},{code:"jv",name:"Basa Jawa",englishName:"Javanese",flag:"\ud83c\uddee\ud83c\udde9"},{code:"sw",name:"Kiswahili",englishName:"Swahili",flag:"\ud83c\uddf0\ud83c\uddea"},{code:"am",name:"\u12a0\u121b\u122d\u129b",englishName:"Amharic",flag:"\ud83c\uddea\ud83c\uddf9"},{code:"yo",name:"Yor\xf9b\xe1",englishName:"Yoruba",flag:"\ud83c\uddf3\ud83c\uddec"},{code:"ig",name:"Igbo",englishName:"Igbo",flag:"\ud83c\uddf3\ud83c\uddec"},{code:"ha",name:"Hausa",englishName:"Hausa",flag:"\ud83c\uddf3\ud83c\uddec"},{code:"zu",name:"isiZulu",englishName:"Zulu",flag:"\ud83c\uddff\ud83c\udde6"},{code:"af",name:"Afrikaans",englishName:"Afrikaans",flag:"\ud83c\uddff\ud83c\udde6"},{code:"xh",name:"isiXhosa",englishName:"Xhosa",flag:"\ud83c\uddff\ud83c\udde6"},{code:"st",name:"Sesotho",englishName:"Sotho",flag:"\ud83c\uddf1\ud83c\uddf8"},{code:"tn",name:"Setswana",englishName:"Tswana",flag:"\ud83c\udde7\ud83c\uddfc"},{code:"ss",name:"SiSwati",englishName:"Swati",flag:"\ud83c\uddf8\ud83c\uddff"},{code:"ve",name:"Tshiven\u1e13a",englishName:"Venda",flag:"\ud83c\uddff\ud83c\udde6"},{code:"ts",name:"Xitsonga",englishName:"Tsonga",flag:"\ud83c\uddff\ud83c\udde6"},{code:"sn",name:"ChiShona",englishName:"Shona",flag:"\ud83c\uddff\ud83c\uddfc"},{code:"ny",name:"ChiChe\u0175a",englishName:"Chewa",flag:"\ud83c\uddf2\ud83c\uddfc"},{code:"rw",name:"Kinyarwanda",englishName:"Kinyarwanda",flag:"\ud83c\uddf7\ud83c\uddfc"},{code:"rn",name:"Kirundi",englishName:"Kirundi",flag:"\ud83c\udde7\ud83c\uddee"},{code:"lg",name:"Luganda",englishName:"Luganda",flag:"\ud83c\uddfa\ud83c\uddec"},{code:"so",name:"Soomaali",englishName:"Somali",flag:"\ud83c\uddf8\ud83c\uddf4"},{code:"om",name:"Afaan Oromoo",englishName:"Oromo",flag:"\ud83c\uddea\ud83c\uddf9"},{code:"ti",name:"\u1275\u130d\u122d\u129b",englishName:"Tigrinya",flag:"\ud83c\uddea\ud83c\uddf7"},{code:"qu",name:"Quechua",englishName:"Quechua",flag:"\ud83c\uddf5\ud83c\uddea"},{code:"gn",name:"Guaran\xed",englishName:"Guarani",flag:"\ud83c\uddf5\ud83c\uddfe"},{code:"ay",name:"Aymar\xe1",englishName:"Aymara",flag:"\ud83c\udde7\ud83c\uddf4"},{code:"mi",name:"Te Reo M\u0101ori",englishName:"Maori",flag:"\ud83c\uddf3\ud83c\uddff"},{code:"sm",name:"Gagana Samoa",englishName:"Samoan",flag:"\ud83c\uddfc\ud83c\uddf8"},{code:"to",name:"Lea Faka-Tonga",englishName:"Tongan",flag:"\ud83c\uddf9\ud83c\uddf4"},{code:"fj",name:"Na Vosa Vakaviti",englishName:"Fijian",flag:"\ud83c\uddeb\ud83c\uddef"},{code:"fo",name:"F\xf8royskt",englishName:"Faroese",flag:"\ud83c\uddeb\ud83c\uddf4"},{code:"kl",name:"Kalaallisut",englishName:"Greenlandic",flag:"\ud83c\uddec\ud83c\uddf1"},{code:"se",name:"Davvis\xe1megiella",englishName:"Northern Sami",flag:"\ud83c\uddf3\ud83c\uddf4"},{code:"eo",name:"Esperanto",englishName:"Esperanto",flag:"\ud83c\udf0d"},{code:"la",name:"Latina",englishName:"Latin",flag:"\ud83c\uddfb\ud83c\udde6"},{code:"sa",name:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",englishName:"Sanskrit",flag:"\ud83c\uddee\ud83c\uddf3"}],p=e=>{let{className:t=""}=e;const{i18n:n,t:a}=(0,o.Bd)(),[i,r]=(0,s.useState)(!1),[l,c]=(0,s.useState)(""),[d,p]=(0,s.useState)(()=>{const e=localStorage.getItem("sgex-selected-languages");return e?JSON.parse(e):u.map(e=>e.code)}),b=(0,s.useMemo)(()=>{const e=[...u];return d.forEach(t=>{if(!u.some(e=>e.code===t)){const n=m.find(e=>e.code===t);n&&e.push({code:n.code,name:n.name,englishName:n.englishName,flag:n.flag})}}),e.map(e=>(0,g.A)((0,g.A)({},e),{},{name:u.some(t=>t.code===e.code)?a(e.name):e.name}))},[d,a]),v=(0,s.useMemo)(()=>{if(!l)return[];const e=l.toLowerCase();return m.filter(t=>!d.includes(t.code)&&(t.name.toLowerCase().includes(e)||t.englishName.toLowerCase().includes(e)||t.code.toLowerCase().includes(e))).slice(0,10)},[l,d]),f=b.find(e=>e.code===n.language)||b[0];return(0,h.jsxs)("div",{className:"language-selector ".concat(t),children:[(0,h.jsxs)("button",{className:"language-toggle",onClick:()=>r(!i),"aria-label":a("language.select"),title:a("language.select"),children:[(0,h.jsx)("span",{className:"language-icon",children:"\ud83d\udc3e\ud83c\udfa7"}),(0,h.jsx)("span",{className:"language-name",children:null===f||void 0===f?void 0:f.name}),(0,h.jsx)("span",{className:"dropdown-arrow ".concat(i?"open":""),children:"\u25bc"})]}),i&&(0,h.jsxs)("div",{className:"language-dropdown",children:[b.map(e=>(0,h.jsxs)("button",{className:"language-option ".concat(n.language===e.code?"active":""),onClick:()=>{return t=e.code,n.changeLanguage(t),r(!1),void c("");var t},children:[(0,h.jsx)("span",{className:"language-flag",children:e.flag}),(0,h.jsx)("span",{className:"language-name",children:e.name}),n.language===e.code&&(0,h.jsx)("span",{className:"language-checkmark",children:"\u2713"})]},e.code)),(0,h.jsxs)("div",{className:"language-search-section",children:[(0,h.jsx)("div",{className:"language-search-divider"}),(0,h.jsx)("div",{className:"language-search-input",children:(0,h.jsx)("input",{type:"text",placeholder:a("language.search"),value:l,onChange:e=>{c(e.target.value)},className:"language-search",autoFocus:!1})}),v.map(e=>(0,h.jsxs)("button",{className:"language-option language-option-addable",onClick:()=>(e=>{const t=[...d,e];p(t),localStorage.setItem("sgex-selected-languages",JSON.stringify(t)),n.changeLanguage(e),r(!1),c("")})(e.code),children:[(0,h.jsx)("span",{className:"language-flag",children:e.flag}),(0,h.jsxs)("span",{className:"language-name",children:[e.name,e.englishName!==e.name&&(0,h.jsxs)("span",{className:"language-english-name",children:[" (",e.englishName,")"]})]}),(0,h.jsx)("span",{className:"language-add-icon",children:"+"})]},e.code)),l&&0===v.length&&(0,h.jsxs)("div",{className:"language-no-results",children:['No languages found for "',l,'"']})]})]})]})};var b=n(19794);const v=e=>{let{pageId:t,helpContent:n,position:i="bottom-right",contextData:r={},notificationBadge:l=!1}=e;const{t:g,i18n:u}=(0,o.Bd)(),[m,v]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[w,x]=(0,s.useState)(null),[k,N]=(0,s.useState)(!0),[S,A]=(0,s.useState)(!1),[j,C]=(0,s.useState)(!1),D=(0,b.A)("sgex-mascot.png");(0,s.useEffect)(()=>{const e=localStorage.getItem("sgex-theme");if(e)N("dark"===e);else{let e=!1;try{window.matchMedia&&(e=window.matchMedia("(prefers-color-scheme: light)").matches)}catch(t){e=!1}N(!e)}},[]),(0,s.useEffect)(()=>{document.body.className=k?"theme-dark":"theme-light",localStorage.setItem("sgex-theme",k?"dark":"light")},[k]),(0,s.useEffect)(()=>{const e=u.language||"en",t=["ar","he","fa"].includes(e);document.documentElement.dir=t?"rtl":"ltr",document.documentElement.lang=e},[u.language]);const T=()=>{N(!k)},E=t?a.A.getHelpTopicsForPage(t,r):[],I=async()=>{if(!S){A(!0),C(!1);try{c.clearAllCache()?(C(!0),setTimeout(()=>{C(!1)},3e3)):(console.error("Failed to clear cache"),alert("Failed to clear cache. Please try again."))}catch(e){console.error("Error clearing cache:",e),alert("Error clearing cache. Please try again.")}finally{A(!1)}}};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"contextual-help-mascot ".concat(i),children:[(0,h.jsxs)("div",{className:"mascot-container",onMouseEnter:()=>{f||v(!0)},onMouseLeave:()=>{f||v(!1)},onClick:()=>{y(!f),v(!f||m)},children:[(0,h.jsx)("img",{src:D,alt:"SGEX Helper",className:"mascot-icon"}),l&&(0,h.jsx)("div",{className:"notification-badge",children:"!"}),!l&&(0,h.jsx)("div",{className:"question-bubble ".concat(m?"help-open":""),children:"?"})]}),m&&(0,h.jsxs)("div",{className:"help-thought-bubble",children:[(0,h.jsxs)("div",{className:"bubble-content",children:[f&&(0,h.jsx)("button",{className:"close-bubble-btn",onClick:()=>{v(!1),y(!1)},"aria-label":"Close help",children:"\xd7"}),(0,h.jsx)("div",{className:"help-text",children:E.length>0?(0,h.jsxs)("div",{className:"help-topics-list",children:[(0,h.jsx)("h4",{children:g("help.title")}),E.map(e=>(0,h.jsxs)("button",{className:"help-topic-btn",onClick:()=>(e=>{"action"===e.type&&e.action?(e.action(),v(!1),y(!1)):(x(e),v(!1),y(!1))})(e),children:[e.badge&&(0,h.jsx)("img",{src:e.badge,alt:"",className:"help-topic-badge"}),(0,h.jsx)("span",{className:"help-topic-title",children:e.title})]},e.id)),(0,h.jsx)("div",{className:"help-menu-divider"}),(0,h.jsx)(p,{className:"help-menu-language-selector"}),(0,h.jsx)("div",{className:"help-menu-divider"}),(0,h.jsxs)("button",{className:"help-theme-toggle-btn ".concat(k?"dark":"light"),onClick:T,"aria-label":g("theme.toggle"),title:g("theme.toggle"),children:[(0,h.jsx)("span",{className:"theme-icon",children:k?"\ud83c\udf1e":"\ud83c\udf19"}),(0,h.jsx)("span",{className:"theme-label",children:k?g("theme.switchToLight","Light Mode"):g("theme.switchToDark","Dark Mode")})]}),(0,h.jsx)("div",{className:"help-menu-divider"}),(0,h.jsx)("div",{className:"help-menu-cache-section",children:j?(0,h.jsx)("div",{className:"cache-success-message",children:"\u2705 Cache cleared successfully!"}):(0,h.jsx)("button",{className:"help-cache-btn",onClick:I,disabled:S,title:"Clear all cached data including repository info, branch context, and staging ground data",children:S?"\ud83d\udd04 Clearing...":"\ud83d\uddd1\ufe0f Flush Cache"})})]}):(0,h.jsxs)("div",{children:[n,(0,h.jsx)("div",{className:"help-menu-divider"}),(0,h.jsx)(p,{className:"help-menu-language-selector"}),(0,h.jsx)("div",{className:"help-menu-divider"}),(0,h.jsxs)("button",{className:"help-theme-toggle-btn ".concat(k?"dark":"light"),onClick:T,"aria-label":g("theme.toggle"),title:g("theme.toggle"),children:[(0,h.jsx)("span",{className:"theme-icon",children:k?"\ud83c\udf1e":"\ud83c\udf19"}),(0,h.jsx)("span",{className:"theme-label",children:k?g("theme.switchToLight","Light Mode"):g("theme.switchToDark","Dark Mode")})]}),(0,h.jsx)("div",{className:"help-menu-divider"}),(0,h.jsx)("div",{className:"help-menu-cache-section",children:j?(0,h.jsx)("div",{className:"cache-success-message",children:"\u2705 Cache cleared successfully!"}):(0,h.jsx)("button",{className:"help-cache-btn",onClick:I,disabled:S,title:"Clear all cached data including repository info, branch context, and staging ground data",children:S?"\ud83d\udd04 Clearing...":"\ud83d\uddd1\ufe0f Flush Cache"})})]})})]}),(0,h.jsx)("div",{className:"bubble-tail"})]})]}),w&&(0,h.jsx)(d.A,{helpTopic:w,contextData:r,onClose:()=>{x(null)}})]})}},19794:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(65043);const o=e=>{const[t,n]=(0,s.useState)(e);return(0,s.useEffect)(()=>{const t=()=>{const t=document.body.classList.contains("theme-dark"),s="/sgex/copilot-fix-549-2",o=e.startsWith("/")?e.slice(1):e;let a;if(t){const e=o.replace(/\.png$/,"_grey_tabby.png");a=s?"".concat(s,"/").concat(e):"/".concat(e)}else a=s?"".concat(s,"/").concat(o):"/".concat(o);n(a)};t();const s=new MutationObserver(e=>{e.forEach(e=>{"attributes"===e.type&&"class"===e.attributeName&&t()})});return s.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>{s.disconnect()}},[e]),t}},48517:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(65043),o=n(19794),a=n(70579);const i=e=>{let{topic:t,helpTopic:n,contextData:i,onClose:r}=e;const[l,c]=(0,s.useState)(!1),[d,g]=(0,s.useState)(0),h=(0,o.A)("sgex-mascot.png");(0,s.useEffect)(()=>{const e=(e,t)=>{var n;const s=new URLSearchParams(t);i.pageId&&s.set("sgex_page",i.pageId);const o=window.location.href;return s.set("sgex_current_url",o),null!==(n=i.selectedDak)&&void 0!==n&&n.name&&s.set("sgex_selected_dak",i.selectedDak.name),"".concat(e,"?").concat(s.toString())};return window.helpModalInstance={openSgexIssue:t=>{let n={};switch(t){case"bug":n.template="bug_report.yml",n.labels="bug";break;case"feature":n.template="feature_request.yml",n.labels="enhancement";break;case"question":n.template="question.yml",n.labels="question";break;case"documentation":n.template="documentation.yml",n.labels="documentation";break;case"blank":n.labels="blank-issue";break;default:n.labels="needs-triage"}const s=e("https://github.com/litlfred/sgex/issues/new",n);try{const e=window.open(s,"_blank");var o,a;if(!e||e.closed)null===(o=window.helpModalInstance)||void 0===o||null===(a=o.showFallbackInstructions)||void 0===a||a.call(o,"github-blocked",s,t);else setTimeout(()=>{try{var n,o;if(e.closed||!e.location||"about:blank"===e.location.href)e.close(),null===(n=window.helpModalInstance)||void 0===n||null===(o=n.showFallbackInstructions)||void 0===o||o.call(n,"github-blocked",s,t)}catch(a){}},1e3)}catch(l){var i,r;console.warn("Failed to open GitHub issue:",l),null===(i=window.helpModalInstance)||void 0===i||null===(r=i.showFallbackInstructions)||void 0===r||r.call(i,"github-blocked",s,t)}},openDakIssue:t=>{const n=i.repository||i.selectedDak;if(!n)return void console.warn("No DAK repository specified for feedback");const s="https://github.com/".concat(n.owner,"/").concat(n.name,"/issues/new");let o={};switch(t){case"bug":o.template="dak_bug_report.yml",o.labels="bug,dak-issue";break;case"improvement":o.template="dak_feature_request.yml",o.labels="enhancement,dak-improvement";break;case"content":o.template="dak_content_error.yml",o.labels="content-issue,clinical-content";break;case"question":o.template="dak_question.yml",o.labels="question,dak-question";break;case"blank":o.labels="blank-issue,dak-feedback";break;default:o.labels="dak-feedback"}n.name&&(o.sgex_dak_repository="".concat(n.owner,"/").concat(n.name));const a=e(s,o);try{const e=window.open(a,"_blank");var r,l;if(!e||e.closed)null===(r=window.helpModalInstance)||void 0===r||null===(l=r.showFallbackInstructions)||void 0===l||l.call(r,"github-blocked",a,"dak-".concat(t));else setTimeout(()=>{try{var n,s;if(e.closed||!e.location||"about:blank"===e.location.href)e.close(),null===(n=window.helpModalInstance)||void 0===n||null===(s=n.showFallbackInstructions)||void 0===s||s.call(n,"github-blocked",a,"dak-".concat(t))}catch(o){}},1e3)}catch(g){var c,d;console.warn("Failed to open DAK issue:",g),null===(c=window.helpModalInstance)||void 0===c||null===(d=c.showFallbackInstructions)||void 0===d||d.call(c,"github-blocked",a,"dak-".concat(t))}},showFallbackInstructions:(e,t,n)=>{const s={"github-blocked":{title:"GitHub Access Required",message:'\n              <div class="help-fallback-notice">\n                <h4>\ud83d\udd17 GitHub Link Blocked</h4>\n                <p>It looks like GitHub access is restricted in your current environment.</p>\n                <h5>To report this issue:</h5>\n                <ol>\n                  <li>Copy the link below</li>\n                  <li>Open it in a browser with GitHub access</li>\n                  <li>Fill out the issue template</li>\n                </ol>\n                <div class="fallback-url">\n                  <strong>Link to copy:</strong><br>\n                  <textarea readonly onclick="this.select()" style="width: 100%; height: 60px; margin: 5px 0; padding: 5px; font-family: monospace; font-size: 12px;">'.concat(t,'</textarea>\n                </div>\n                <p><em>\ud83d\udca1 Tip: You can also email us at <a href="mailto:smart@who.int">smart@who.int</a> with your issue details.</em></p>\n              </div>\n            ')}}[e]||{title:"External Link Issue",message:"<p>Unable to open external link. Please copy and visit: <br><code>".concat(t,"</code></p>")},o=document.querySelector(".help-fallback-overlay");o&&o.remove();const a=document.createElement("div");a.className="help-fallback-overlay",a.style.cssText="\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.7);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 10000;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        ";const i=document.createElement("div");i.style.cssText="\n          background: white;\n          border-radius: 8px;\n          padding: 20px;\n          max-width: 500px;\n          max-height: 80vh;\n          overflow-y: auto;\n          position: relative;\n          box-shadow: 0 10px 25px rgba(0,0,0,0.3);\n        ",i.innerHTML='\n          <button onclick="this.closest(\'.help-fallback-overlay\').remove()" style="\n            position: absolute;\n            top: 10px;\n            right: 15px;\n            background: none;\n            border: none;\n            font-size: 24px;\n            cursor: pointer;\n            color: #666;\n          ">\xd7</button>\n          <h3 style="margin-top: 0; color: #333;">'.concat(s.title,'</h3>\n          <div style="color: #555; line-height: 1.5;">').concat(s.message,"</div>\n        "),a.appendChild(i),document.body.appendChild(a),a.addEventListener("click",e=>{e.target===a&&a.remove()}),setTimeout(()=>{document.body.contains(a)&&a.remove()},3e4)}},()=>{delete window.helpModalInstance}},[i]);const u=()=>{d>0&&g(d-1)},m=()=>{null!==n&&void 0!==n&&n.content&&d<n.content.length-1&&g(d+1)},p=()=>{if(null===n||void 0===n||!n.content||"slideshow"!==n.type)return null;const e=n.content,t=e[d];let s=t.content;return"provide-dak-feedback"===n.id&&(s=s.replace(/onclick="this\.openDakIssue\('([^']+)'\)"/g,"onclick=\"window.helpModalInstance?.openDakIssue('$1')\"")),(0,a.jsxs)("div",{className:"help-slideshow",children:[(0,a.jsxs)("div",{className:"slideshow-header",children:[(0,a.jsx)("h3",{children:t.title}),(0,a.jsxs)("div",{className:"slide-counter",children:[d+1," of ",e.length]})]}),(0,a.jsx)("div",{className:"slideshow-content",dangerouslySetInnerHTML:{__html:s}}),(0,a.jsxs)("div",{className:"slideshow-controls",children:[(0,a.jsx)("button",{onClick:u,disabled:0===d,className:"slide-nav-btn",children:"\u2190 Previous"}),(0,a.jsx)("div",{className:"slide-dots",children:e.map((e,t)=>(0,a.jsx)("button",{className:"slide-dot ".concat(t===d?"active":""),onClick:()=>g(t),"aria-label":"Go to slide ".concat(t+1)},t))}),(0,a.jsx)("button",{onClick:m,disabled:d===e.length-1,className:"slide-nav-btn",children:"Next \u2192"})]})]})},{title:b,content:v}=(()=>{if(n)return{title:n.title,content:"slideshow"===n.type?p():(0,a.jsx)("div",{className:"help-content",children:(0,a.jsxs)("div",{className:"mascot-message",children:[(0,a.jsx)("img",{src:h,alt:"SGEX Helper",className:"help-mascot"}),(0,a.jsx)("div",{className:"message-bubble",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:n.content}})})]})})};switch(t){case"github-token":case"pat-help":return{title:"GitHub Authentication Help",content:(0,a.jsx)("div",{className:"help-content",children:(0,a.jsxs)("div",{className:"mascot-message",children:[(0,a.jsx)("img",{src:h,alt:"SGEX Helper",className:"help-mascot"}),(0,a.jsxs)("div",{className:"message-bubble",children:[(0,a.jsx)("p",{children:"SGEX Workbench uses GitHub Personal Access Tokens for secure authentication!"}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"How it works:"})}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Create a Personal Access Token in your GitHub settings"}),(0,a.jsx)("li",{children:"Enter the token in the login form"}),(0,a.jsx)("li",{children:"SGEX will securely connect to your GitHub repositories"}),(0,a.jsx)("li",{children:"No backend server required - works entirely in your browser!"})]}),(0,a.jsx)("p",{children:"This approach ensures compliance with our no-backend requirement while keeping your data secure."}),(0,a.jsx)("p",{children:"If you're having trouble, please use the menu above to get additional support."})]})]})})};default:return{title:"SGEX Workbench Help",content:(0,a.jsx)("div",{className:"help-content",children:(0,a.jsxs)("div",{className:"mascot-message",children:[(0,a.jsx)("img",{src:h,alt:"SGEX Helper",className:"help-mascot"}),(0,a.jsxs)("div",{className:"message-bubble",children:[(0,a.jsx)("p",{children:"Hi! I'm here to help you with the SGEX Workbench."}),(0,a.jsx)("p",{children:"Use the menu in the top right to get additional support options."})]})]})})}}})();return(0,a.jsx)("div",{className:"help-modal-overlay",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,a.jsxs)("div",{className:"help-modal",children:[(0,a.jsxs)("div",{className:"help-modal-header",children:[(0,a.jsx)("h2",{children:b}),(0,a.jsxs)("div",{className:"help-modal-actions",children:[(0,a.jsxs)("button",{className:"hamburger-menu-btn",onClick:()=>{c(!l)},"aria-label":"More options",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]}),(0,a.jsx)("button",{className:"close-btn",onClick:r,"aria-label":"Close help",children:"\xd7"})]}),l&&(0,a.jsxs)("div",{className:"help-menu-dropdown",children:[(0,a.jsxs)("button",{onClick:()=>{window.open("/sgex/docs/overview","_blank")},className:"menu-item",children:[(0,a.jsx)("span",{className:"menu-icon",children:"\ud83d\udcd6"}),"Documentation"]}),(0,a.jsxs)("button",{onClick:()=>{var e;if(null!==(e=window.helpModalInstance)&&void 0!==e&&e.openSgexIssue)window.helpModalInstance.openSgexIssue("bug");else{var t;const e=new URLSearchParams({template:"bug_report.yml",labels:"bug",sgex_page:i.pageId||"unknown",sgex_current_url:window.location.href});null!==(t=i.selectedDak)&&void 0!==t&&t.name&&e.set("sgex_selected_dak",i.selectedDak.name);const l="https://github.com/litlfred/sgex/issues/new?".concat(e.toString());try{const e=window.open(l,"_blank");var n,s;if(!e||e.closed)null===(n=window.helpModalInstance)||void 0===n||null===(s=n.showFallbackInstructions)||void 0===s||s.call(n,"github-blocked",l,"bug")}catch(r){var o,a;console.warn("Failed to open GitHub issue:",r),null===(o=window.helpModalInstance)||void 0===o||null===(a=o.showFallbackInstructions)||void 0===a||a.call(o,"github-blocked",l,"bug")}}},className:"menu-item",children:[(0,a.jsx)("img",{src:"/sgex/bug-report-icon.svg",alt:"Bug",className:"menu-icon"}),"File Bug Report"]}),i.repository&&(0,a.jsxs)("button",{onClick:()=>{var e;i.repository&&(null!==(e=window.helpModalInstance)&&void 0!==e&&e.openDakIssue&&window.helpModalInstance.openDakIssue("content"))},className:"menu-item",children:[(0,a.jsx)("span",{className:"menu-icon",children:"\ud83d\udcdd"}),"Provide DAK Feedback"]}),(0,a.jsxs)("button",{onClick:()=>{const e=(null===n||void 0===n?void 0:n.title)||t,s=encodeURIComponent("SGEX Workbench Support: ".concat(e)),o=encodeURIComponent("\nHello SMART Guidelines Team,\n\nI need assistance with the SGEX Workbench.\n\nTopic: ".concat(e,"\nPage: ").concat(window.location.pathname,"\n\nPlease describe your question or issue:\n\n\nBest regards,\n    ").trim());window.open("mailto:smart@who.int?subject=".concat(s,"&body=").concat(o))},className:"menu-item",children:[(0,a.jsx)("span",{className:"menu-icon",children:"\ud83d\udce7"}),"Email Support"]})]})]}),(0,a.jsx)("div",{className:"help-modal-content",children:v})]})})}},65240:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(5452);const o=new class{constructor(){this.CACHE_KEY_PREFIX="sgex_repo_cache_",this.CACHE_EXPIRY_HOURS=24,this.logger=s.A.getLogger("RepositoryCacheService"),this.logger.debug("RepositoryCacheService initialized",{cacheExpiryHours:this.CACHE_EXPIRY_HOURS})}getCacheKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return"".concat(this.CACHE_KEY_PREFIX).concat(t,"_").concat(e)}isStale(e){return Date.now()-e>60*this.CACHE_EXPIRY_HOURS*60*1e3}getCachedRepositories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";try{var n;const s=this.getCacheKey(e,t);this.logger.cache("get",s);const o=localStorage.getItem(s);if(!o)return this.logger.cache("miss",s,"No cached data found"),null;const a=JSON.parse(o);return this.isStale(a.timestamp)?(this.logger.cache("expired",s,{age:Date.now()-a.timestamp}),localStorage.removeItem(s),null):(this.logger.cache("hit",s,{repositoryCount:(null===(n=a.repositories)||void 0===n?void 0:n.length)||0,age:Date.now()-a.timestamp}),{repositories:a.repositories,timestamp:a.timestamp,owner:a.owner,type:a.type})}catch(s){const n=this.getCacheKey(e,t);return this.logger.error("Error reading repository cache",{cacheKey:n,error:s.message}),console.warn("Error reading repository cache:",s),null}}setCachedRepositories(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",n=arguments.length>2?arguments[2]:void 0;try{const s=this.getCacheKey(e,t),o={repositories:n,timestamp:Date.now(),owner:e,type:t};return this.logger.cache("set",s,{repositoryCount:(null===n||void 0===n?void 0:n.length)||0,owner:e,type:t}),localStorage.setItem(s,JSON.stringify(o)),!0}catch(s){const n=this.getCacheKey(e,t);return this.logger.error("Error caching repositories",{cacheKey:n,error:s.message}),console.warn("Error caching repositories:",s),!1}}clearCache(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";try{const n=this.getCacheKey(e,t);return this.logger.cache("clear",n,{owner:e,type:t}),localStorage.removeItem(n),!0}catch(n){const s=this.getCacheKey(e,t);return this.logger.error("Error clearing repository cache",{cacheKey:s,error:n.message}),console.warn("Error clearing repository cache:",n),!1}}clearAllCaches(){try{return Object.keys(localStorage).forEach(e=>{e.startsWith(this.CACHE_KEY_PREFIX)&&localStorage.removeItem(e)}),!0}catch(e){return console.warn("Error clearing all repository caches:",e),!1}}getCacheInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";const n=this.getCachedRepositories(e,t);if(!n)return{exists:!1,stale:!0};const s=Date.now()-n.timestamp,o=Math.round(s/36e5);return{exists:!0,stale:this.isStale(n.timestamp),age:s,ageHours:o,repositoryCount:n.repositories.length,timestamp:new Date(n.timestamp).toISOString()}}}},78362:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(89379);const o=new class{constructor(){this.storageKey="sgex_feature_files",this.metadataKey="sgex_feature_files_metadata"}getAllLocalChanges(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading local changes:",e),{}}}getLocalContent(e){return this.getAllLocalChanges()[e]||null}saveLocal(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const o=this.getAllLocalChanges();o[e]=t,localStorage.setItem(this.storageKey,JSON.stringify(o));const a=this.getAllMetadata();return a[e]=(0,s.A)((0,s.A)({},n),{},{lastModified:(new Date).toISOString(),originalPath:e}),localStorage.setItem(this.metadataKey,JSON.stringify(a)),!0}catch(o){return console.error("Error saving to localStorage:",o),!1}}removeLocal(e){try{const t=this.getAllLocalChanges();delete t[e],localStorage.setItem(this.storageKey,JSON.stringify(t));const n=this.getAllMetadata();return delete n[e],localStorage.setItem(this.metadataKey,JSON.stringify(n)),!0}catch(t){return console.error("Error removing from localStorage:",t),!1}}getAllMetadata(){try{const e=localStorage.getItem(this.metadataKey);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading metadata:",e),{}}}getMetadata(e){return this.getAllMetadata()[e]||null}hasLocalChanges(){const e=this.getAllLocalChanges();return Object.keys(e).length>0}getLocalChangesCount(){const e=this.getAllLocalChanges();return Object.keys(e).length}exportLocalChanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";const t=this.getAllLocalChanges(),n=this.getAllMetadata();if("json"===e){const e={exported:(new Date).toISOString(),version:"1.0",changes:t,metadata:n};return new Blob([JSON.stringify(e,null,2)],{type:"application/json"})}throw new Error("Export format '".concat(e,"' not supported"))}importLocalChanges(e){try{const t=JSON.parse(e);if(!t.changes||!t.metadata)throw new Error("Invalid import data format");const n=this.getAllLocalChanges(),o=this.getAllMetadata(),a=(0,s.A)((0,s.A)({},n),t.changes),i=(0,s.A)((0,s.A)({},o),t.metadata);return localStorage.setItem(this.storageKey,JSON.stringify(a)),localStorage.setItem(this.metadataKey,JSON.stringify(i)),!0}catch(t){return console.error("Error importing local changes:",t),!1}}clearAllLocalChanges(){localStorage.removeItem(this.storageKey),localStorage.removeItem(this.metadataKey)}getStorageInfo(){const e=this.getAllLocalChanges(),t=this.getAllMetadata(),n=JSON.stringify(e).length,s=JSON.stringify(t).length,o=n+s;return{fileCount:Object.keys(e).length,totalSize:o,changesSize:n,metadataSize:s,formattedSize:this.formatBytes(o)}}formatBytes(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}}},89387:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(55661),o=n(93071);const a=new class{async validateDAKRepository(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";try{const o=await this.checkRepositoryExists(e,t),a=await this.fetchSushiConfig(e,t,n);if(!a)return o?(console.log("Repository ".concat(e,"/").concat(t," exists on GitHub - allowing access even without sushi-config.yaml")),!0):(console.log("No sushi-config.yaml found in ".concat(e,"/").concat(t," and repository doesn't exist")),!1);const i=s.default.load(a);if(!i||"object"!==typeof i)return o?(console.log("Invalid YAML format in sushi-config.yaml for ".concat(e,"/").concat(t," but repository exists - allowing access")),!0):(console.log("Invalid YAML format in sushi-config.yaml for ".concat(e,"/").concat(t)),!1);if(!i.dependencies||"object"!==typeof i.dependencies)return o?(console.log("No dependencies section found in sushi-config.yaml for ".concat(e,"/").concat(t," but repository exists - allowing access")),!0):(console.log("No dependencies section found in sushi-config.yaml for ".concat(e,"/").concat(t)),!1);return"smart.who.int.base"in i.dependencies?(console.log("Valid DAK repository found: ".concat(e,"/").concat(t," (has smart.who.int.base dependency)")),!0):o?(console.log("Repository ".concat(e,"/").concat(t," has sushi-config.yaml but missing smart.who.int.base dependency - allowing access since repository exists")),!0):(console.log("Repository ".concat(e,"/").concat(t," has sushi-config.yaml but missing smart.who.int.base dependency")),!1)}catch(o){return console.log("Error validating DAK repository ".concat(e,"/").concat(t,":"),o.message),!1}}async checkRepositoryExists(e,t){try{const n=o.A.isAuth()?o.A.octokit:null;return n?(await n.rest.repos.get({owner:e,repo:t}),console.log("Repository ".concat(e,"/").concat(t," exists on GitHub")),!0):(console.log("Cannot check repository existence for ".concat(e,"/").concat(t," - not authenticated")),!1)}catch(n){return 404===n.status?(console.log("Repository ".concat(e,"/").concat(t," does not exist on GitHub")),!1):(console.log("Error checking repository existence for ".concat(e,"/").concat(t,":"),n.message,"- assuming it might exist"),!0)}}async fetchSushiConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";try{const a=o.A.isAuth()?o.A.octokit:null;if(!a)return console.log("Cannot fetch sushi-config.yaml for ".concat(e,"/").concat(t," - not authenticated")),null;const i="main"===n?["main","master"]:[n];for(const n of i)try{const{data:s}=await a.rest.repos.getContent({owner:e,repo:t,path:"sushi-config.yaml",ref:n});if("file"===s.type&&s.content){const o=decodeURIComponent(escape(atob(s.content)));return console.log("Found sushi-config.yaml in ".concat(e,"/").concat(t," on branch ").concat(n)),o}}catch(s){console.log("sushi-config.yaml not found on branch ".concat(n," for ").concat(e,"/").concat(t,":"),404===s.status?"File not found":s.message);continue}return null}catch(a){return console.log("Error fetching sushi-config.yaml for ".concat(e,"/").concat(t,":"),a.message),null}}validateDemoDAKRepository(e,t){if(!e||!t||e.includes("/")||t.includes("/"))return console.log("Demo mode: Invalid repository format ".concat(e,"/").concat(t)),!1;const n=/^[a-zA-Z0-9._-]+$/;if(!n.test(e)||!n.test(t))return console.log("Demo mode: Invalid characters in repository name ".concat(e,"/").concat(t)),!1;const s="".concat(e,"/").concat(t);return console.log("Demo mode: ".concat(s," accepted as valid DAK repository (proper org/repo format)")),!0}}}}]);
//# sourceMappingURL=786.74e62359.chunk.js.map