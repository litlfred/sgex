"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[728],{13333:(e,s,i)=>{i.d(s,{hX:()=>n});const n=function(e,s,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((e=>!!(null!==e&&void 0!==e&&e.ctrlKey||null!==e&&void 0!==e&&e.metaKey))(e)){const e=(e=>{const s="/sgex/copilot-fix-549-2",i=window.location.origin,n=e.startsWith("/")?e.slice(1):e;if(!s)return"".concat(i,"/").concat(n);const a=s.endsWith("/")?s:s+"/";return"".concat(i).concat(a).concat(n)})(s);window.open(e,"_blank","noopener,noreferrer")}else n?i(s,{state:n}):i(s)}},14832:(e,s,i)=>{i.d(s,{A:()=>r});var n=i(89379),a=i(93071),t=i(22392),o=i(55661);const r=new class{constructor(){this.initialized=!0,this.compilationResults=null,this.logs=[],this.listeners=new Set}async loadFSHFiles(e,s,i){this.log("info","Loading FSH files from ".concat(e.full_name,"/").concat(s));try{const n=await this.loadGitHubFSHFiles(e,s,i);this.log("info","Loaded ".concat(n.length," FSH files from GitHub"));const a=await this.loadStagingGroundFSHFiles();this.log("info","Loaded ".concat(a.length," FSH files from staging ground"));const t=this.mergeFSHFiles(n,a);return this.log("info","Total FSH files after merge: ".concat(t.length)),t}catch(n){throw this.log("error","Failed to load FSH files: ".concat(n.message)),n}}async loadGitHubFSHFiles(e,s,i){const n=[];try{const o=["input/fsh","fsh","input/fsh/profiles","input/fsh/extensions","input/fsh/valuesets","input/fsh/codesystems","input/fsh/examples","input/fsh/rules","input/fsh/aliases"];for(const r of o)try{const t=await a.A.getRepositoryContents(e.owner.login,e.name,r,s,i.token);if(Array.isArray(t))for(const o of t)if("file"===o.type&&o.name.endsWith(".fsh")){const t=await a.A.getFileContent(e.owner.login,e.name,o.path,s,i.token);n.push({path:o.path,name:o.name,content:t,source:"github",size:o.size})}}catch(t){this.log("debug","Directory ".concat(r," not found or inaccessible"))}try{const t=await a.A.getRepositoryContents(e.owner.login,e.name,"",s,i.token);if(Array.isArray(t))for(const o of t)if("file"===o.type&&o.name.endsWith(".fsh")){const t=await a.A.getFileContent(e.owner.login,e.name,o.path,s,i.token);n.push({path:o.path,name:o.name,content:t,source:"github",size:o.size})}}catch(t){this.log("debug","Root directory check failed: ".concat(t.message))}}catch(t){throw this.log("error","Failed to load GitHub FSH files: ".concat(t.message)),t}return n}async loadStagingGroundFSHFiles(){const e=[];try{const s=t.A.getStagingGround();if(s&&s.files)for(const i of s.files)i.path.endsWith(".fsh")&&e.push({path:i.path,name:i.path.split("/").pop(),content:i.content,source:"staging",metadata:i.metadata,timestamp:i.timestamp})}catch(s){throw this.log("error","Failed to load staging ground FSH files: ".concat(s.message)),s}return e}mergeFSHFiles(e,s){const i=[...e];for(const n of s){const e=i.findIndex(e=>e.path===n.path);e>=0?(i[e]=n,this.log("debug","Overriding ".concat(n.path," with staging ground version"))):(i.push(n),this.log("debug","Adding new file ".concat(n.path," from staging ground")))}return i}async loadSushiConfig(e,s,i){try{let r=null,l=null;try{const n=await a.A.getFileContent(e.owner.login,e.name,"sushi-config.yaml",s,i.token);r=o.default.load(n),this.log("info","Loaded SUSHI configuration from GitHub: ".concat(r.id||"unnamed"))}catch(n){this.log("warn","Could not load sushi-config.yaml from GitHub: ".concat(n.message))}try{const e=t.A.getStagingFiles().find(e=>"sushi-config.yaml"===e.path);e&&(l=o.default.load(e.content),this.log("info","Loaded SUSHI configuration from staging: ".concat(l.id||"unnamed")))}catch(n){this.log("warn","Could not load sushi-config.yaml from staging: ".concat(n.message))}const c=l||r;if(!c)throw new Error("No sushi-config.yaml found in repository or staging");return{config:c,hasGithubVersion:!!r,hasStagingVersion:!!l,isUsingStaging:!!l}}catch(n){throw this.log("error","Failed to load sushi-config.yaml: ".concat(n.message)),n}}async saveSushiConfigToStaging(e){try{const s=o.default.dump(e,{indent:2,lineWidth:120,quotingType:'"'});return t.A.saveFile("sushi-config.yaml",s),this.log("info","Saved SUSHI configuration to staging ground"),!0}catch(s){throw this.log("error","Failed to save sushi-config.yaml to staging: ".concat(s.message)),s}}validateSushiConfig(e){const s=[],i=[];return e.id?/^[a-z0-9]+(\.[a-z0-9]+)*$/.test(e.id)||s.push("id must be lowercase alphanumeric with dots only (e.g., who.fhir.anc)"):s.push("id field is required"),e.name?/\s/.test(e.name)&&s.push("name should not contain spaces (use PascalCase, e.g., WHOANCGuidelines)"):s.push("name field is required"),e.version?/^\d+\.\d+\.\d+(-[a-zA-Z0-9]+)?$/.test(e.version)||s.push("version must follow semantic versioning (e.g., 1.0.0)"):s.push("version field is required"),e.fhirVersion?["4.0.1","4.3.0","5.0.0"].includes(e.fhirVersion)||i.push("fhirVersion should be one of: 4.0.1, 4.3.0, 5.0.0"):i.push("fhirVersion not specified, defaulting to 4.0.1"),e.publisher?"object"===typeof e.publisher&&(e.publisher.name||i.push("publisher.name is recommended"),e.publisher.url&&!/^https?:\/\//.test(e.publisher.url)&&s.push("publisher.url must be a valid URL starting with http:// or https://"),e.publisher.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.publisher.email)&&s.push("publisher.email must be a valid email address")):i.push("publisher information is recommended"),e.dependencies?e.dependencies["hl7.fhir.uv.sdc"]||e.dependencies["smart.who.int.base"]||i.push("WHO SMART Guidelines DAKs should include smart.who.int.base dependency"):i.push("dependencies section is recommended for WHO SMART Guidelines DAKs"),{valid:0===s.length,errors:s,warnings:i}}async loadPagesWithSources(e,s,i,o){const r=[];if(o.pages)for(const[c,d]of Object.entries(o.pages)){const o=(0,n.A)((0,n.A)({key:c},d),{},{sources:{github:null,staging:null}}),h="input/pagecontent/".concat(c,".md");try{const n=await a.A.getFileContent(e.owner.login,e.name,h,s,i.token);o.sources.github={path:h,url:"https://github.com/".concat(e.owner.login,"/").concat(e.name,"/blob/").concat(s,"/").concat(h),size:n.length}}catch(l){}try{const e=t.A.getStagingFiles().find(e=>e.path===h);e&&(o.sources.staging={path:h,size:e.content.length})}catch(l){}r.push(o)}return r}async runSUSHI(e,s,i){this.log("info","Starting FSH file loading and analysis..."),this.clearLogs();try{const n=await this.loadFSHFiles(e,s,i),a=await this.loadSushiConfig(e,s,i);if(0===n.length)return this.log("warn","No FSH files found to process"),{success:!1,message:"No FSH files found to process",files:[],logs:this.logs};const t=this.analyzeFSHFiles(n);return this.compilationResults={files:n,config:a.config,analysis:t,configSources:{hasGithubVersion:a.hasGithubVersion,hasStagingVersion:a.hasStagingVersion,isUsingStaging:a.isUsingStaging}},this.log("info","FSH file loading and analysis completed"),this.notifyListeners(),{success:!0,result:{files:n,config:a.config,configSources:a,analysis:t,message:"FSH files loaded successfully. Full SUSHI compilation will be available in future releases."},files:n,logs:this.logs,stats:this.getAnalysisStats(t)}}catch(n){return this.log("error","FSH processing failed: ".concat(n.message)),this.notifyListeners(),{success:!1,error:n.message,logs:this.logs}}}analyzeFSHFiles(e){const s={totalFiles:e.length,githubFiles:e.filter(e=>"github"===e.source).length,stagingFiles:e.filter(e=>"staging"===e.source).length,overrides:[],fileTypes:{},totalLines:0,profiles:0,extensions:0,valueSets:0,codeSystems:0,instances:0};return e.forEach(e=>{const i=e.content;s.totalLines+=i.split("\n").length,i.includes("Profile:")&&s.profiles++,i.includes("Extension:")&&s.extensions++,i.includes("ValueSet:")&&s.valueSets++,i.includes("CodeSystem:")&&s.codeSystems++,i.includes("Instance:")&&s.instances++,"staging"===e.source&&s.overrides.push(e.path);const n=e.path.split(".").pop();s.fileTypes[n]=(s.fileTypes[n]||0)+1}),s}getAnalysisStats(e){return{files:e.totalFiles,lines:e.totalLines,sources:{github:e.githubFiles,staging:e.stagingFiles},constructs:{profiles:e.profiles,extensions:e.extensions,valueSets:e.valueSets,codeSystems:e.codeSystems,instances:e.instances},overrides:e.overrides.length}}clearLogs(){this.logs=[]}log(e,s){const i={level:e,message:s,location:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,timestamp:(new Date).toISOString()};this.logs.push(i),console[e]&&console[e]("[SUSHI] ".concat(s))}getLogs(){return this.logs}getLogsByLevel(e){return this.logs.filter(s=>s.level===e)}searchLogs(e){return this.logs.filter(s=>s.message.toLowerCase().includes(e.toLowerCase()))}exportLogsAsText(){return this.logs.map(e=>"[".concat(e.timestamp,"] [").concat(e.level.toUpperCase(),"] ").concat(e.message).concat(e.location?" (".concat(e.location,")"):"")).join("\n")}getCompilationResults(){return this.compilationResults}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e({logs:this.logs,results:this.compilationResults,stats:this.compilationResults?this.getAnalysisStats(this.compilationResults.analysis):null})}catch(s){console.error("Error notifying SUSHI service listener:",s)}})}isInitialized(){return this.initialized}async validateFSH(e){try{const s=[],i=[],n=e.split("\n");for(let e=0;e<n.length;e++){const s=n[e].trim();s.includes("Profile:")&&!s.includes("=")&&i.push("Line ".concat(e+1,": Profile declaration might be missing metadata")),!s.includes("*")||s.includes("=")||s.includes("//")||i.push("Line ".concat(e+1,": Rule might be missing assignment"))}return{valid:0===s.length,errors:s,warnings:i}}catch(s){return{valid:!1,errors:[s.message],warnings:[]}}}}},44131:e=>{e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://sgex.org/schemas/sushi-config.json","title":"SUSHI Configuration Schema","description":"JSON Schema for validating sushi-config.yaml files used in FHIR Implementation Guides","type":"object","required":["id","canonical","name","status","publisher","version"],"properties":{"id":{"type":"string","pattern":"^[a-z0-9]+(\\\\.[a-z0-9]+)*$","description":"The unique identifier for the Implementation Guide (IG). Must be lowercase alphanumeric with dots."},"canonical":{"type":"string","format":"uri","description":"The canonical URL for the Implementation Guide"},"name":{"type":"string","minLength":1,"description":"The human-readable name of the Implementation Guide"},"title":{"type":"string","description":"The title of the Implementation Guide (optional, defaults to name)"},"description":{"type":"string","description":"A description of the Implementation Guide"},"status":{"type":"string","enum":["draft","active","retired","unknown"],"description":"The publication status of the Implementation Guide"},"version":{"type":"string","pattern":"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+(-[a-zA-Z0-9]+)?$","description":"The version of the Implementation Guide (semantic versioning)"},"fhirVersion":{"type":"string","enum":["4.0.1","4.3.0","5.0.0"],"default":"4.0.1","description":"The version of FHIR to use"},"copyrightYear":{"type":"integer","minimum":1900,"maximum":3000,"description":"The copyright year"},"releaseLabel":{"type":"string","description":"Label for the release"},"publisher":{"type":"string","minLength":1,"description":"The publisher of the Implementation Guide"},"contact":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"telecom":{"type":"array","items":{"type":"object","properties":{"system":{"type":"string","enum":["phone","fax","email","pager","url","sms","other"]},"value":{"type":"string"},"use":{"type":"string","enum":["home","work","temp","old","mobile"]}}}}}},"description":"Contact information for the Implementation Guide"},"license":{"type":"string","enum":["not-open-source","0BSD","AAL","Abstyles","Adobe-2006","Adobe-Glyph","ADSL","AFL-1.1","CC0-1.0"],"description":"The license under which the Implementation Guide is published"},"jurisdiction":{"type":"array","items":{"type":"object","properties":{"coding":{"type":"array","items":{"type":"object","properties":{"system":{"type":"string","format":"uri"},"code":{"type":"string"},"display":{"type":"string"}}}}}},"description":"Jurisdiction for the Implementation Guide"},"dependencies":{"type":"object","properties":{"smart.who.int.base":{"oneOf":[{"type":"string"},{"type":"object","properties":{"id":{"type":"string"},"version":{"type":"string"}}}],"description":"WHO SMART Guidelines base dependency (required for WHO DAK compliance)"}},"additionalProperties":{"oneOf":[{"type":"string"},{"type":"object","properties":{"id":{"type":"string"},"version":{"type":"string"},"uri":{"type":"string","format":"uri"},"reason":{"type":"string"}}}]},"description":"Dependencies on other Implementation Guides"},"global":{"type":"object","additionalProperties":{"type":"string"},"description":"Global profiles applied across the IG"},"groups":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"resources":{"type":"array","items":{"type":"string"}}}},"description":"Resource groupings for the IG"},"resources":{"type":"object","additionalProperties":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"exampleBoolean":{"type":"boolean"},"exampleCanonical":{"type":"string","format":"uri"}}},"description":"Resource definitions and metadata"},"pages":{"type":"object","additionalProperties":{"oneOf":[{"type":"string"},{"type":"object","properties":{"nameUrl":{"type":"string"},"title":{"type":"string"},"generation":{"type":"string","enum":["html","markdown","xml","generated"]}}}]},"description":"Page definitions for the IG"},"parameters":{"type":"object","additionalProperties":{"oneOf":[{"type":"string"},{"type":"boolean"},{"type":"number"}]},"description":"Parameters for IG generation"},"copyrightLabel":{"type":"string","description":"Copyright label for the IG"},"packageId":{"type":"string","description":"Package identifier (defaults to id)"},"menu":{"type":"object","additionalProperties":true,"description":"Menu structure for the IG"},"history":{"type":"object","properties":{"package-id":{"type":"string"},"canonical":{"type":"string","format":"uri"},"title":{"type":"string"},"introduction":{"type":"string"}},"description":"History configuration for the IG"},"indexPageContent":{"type":"string","description":"Content for the index page"},"FSHOnly":{"type":"boolean","description":"Flag to indicate if this is a FSH-only project"},"applyExtensionMetadataToRoot":{"type":"boolean","description":"Whether to apply extension metadata to root"},"instanceOptions":{"type":"object","properties":{"setMetaProfile":{"type":"string","enum":["always","never","inline-only","standalone-only"]},"setId":{"type":"string","enum":["always","standalone-only"]},"manualSliceOrdering":{"type":"boolean"}},"description":"Options for instance processing"}},"allOf":[{"if":{"properties":{"dependencies":{"type":"object","not":{"properties":{"smart.who.int.base":true},"required":["smart.who.int.base"]}}}},"then":{"properties":{"_whoSmartGuidelinesNote":{"const":"This IG is not WHO SMART Guidelines compliant. Add smart.who.int.base dependency for DAK compliance."}}}}]}')},71728:(e,s,i)=>{i.r(s),i.d(s,{default:()=>A});var n=i(65043),a=i(16786),t=i(93071),o=i(88691),r=i(98757),l=i(22392),c=i(89379),d=i(55661),h=i(77003),u=i.n(h),m=i(80483),p=i.n(m);const g=i(44131);const f=new class{constructor(){this.validators=new Map,this.initializeSchemaValidator(),this.initializeDefaultValidators()}initializeSchemaValidator(){this.ajv=new(u())({allErrors:!0,verbose:!0}),p()(this.ajv),this.sushiConfigValidator=this.ajv.compile(g)}initializeDefaultValidators(){this.addValidator("xml","xml-well-formed",{level:"error",description:"XML files must be well-formed",validator:this.validateXMLWellFormed.bind(this)}),this.addValidator("bpmn","xml-well-formed",{level:"error",description:"BPMN files must be well-formed XML",validator:this.validateXMLWellFormed.bind(this)}),this.addValidator("bpmn","bpmn-namespace",{level:"error",description:"BPMN files must use correct BPMN 2.0 namespace",validator:this.validateBPMNNamespace.bind(this)}),this.addValidator("bpmn","has-start-event",{level:"warning",description:"BPMN process should have at least one start event",validator:this.validateBPMNStartEvent.bind(this)}),this.addValidator("dmn","xml-well-formed",{level:"error",description:"DMN files must be well-formed XML",validator:this.validateXMLWellFormed.bind(this)}),this.addValidator("dmn","dmn-namespace",{level:"error",description:"DMN files must use correct DMN 1.3 namespace",validator:this.validateDMNNamespace.bind(this)}),this.addValidator("json","json-valid",{level:"error",description:"JSON files must be valid JSON",validator:this.validateJSONSyntax.bind(this)}),this.addValidator("json","fhir-resource-type",{level:"info",description:"FHIR resources should have valid resourceType",validator:this.validateFHIRResourceType.bind(this)}),this.addValidator("*","file-size-limit",{level:"warning",description:"Files should be under 1MB for optimal performance",validator:this.validateFileSize.bind(this)}),this.addValidator("*","filename-conventions",{level:"info",description:"Files should follow naming conventions",validator:this.validateFilenameConventions.bind(this)}),this.addValidator("yaml","sushi-config-valid",{level:"error",description:"sushi-config.yaml must be valid and contain required fields",validator:this.validateSushiConfig.bind(this)})}addValidator(e,s,i){this.validators.has(e)||this.validators.set(e,new Map),this.validators.get(e).set(s,i)}removeValidator(e,s){this.validators.has(e)&&this.validators.get(e).delete(s)}async validateFile(e,s){const i=[],n=this.getFileExtension(e),a=this.getFileName(e),t=this.validators.get(n)||new Map,o=this.validators.get("*")||new Map;for(const[l,d]of t)try{const n=await d.validator(e,s,a);n&&i.push((0,c.A)({validatorId:l,level:d.level,description:d.description},n))}catch(r){i.push({validatorId:l,level:"error",description:"Validator execution failed",message:r.message,filePath:e})}for(const[l,d]of o)try{const n=await d.validator(e,s,a);n&&i.push((0,c.A)({validatorId:l,level:d.level,description:d.description},n))}catch(r){i.push({validatorId:l,level:"error",description:"Validator execution failed",message:r.message,filePath:e})}return i}async validateStagingGround(e){const s={summary:{error:0,warning:0,info:0},files:{},validatedAt:Date.now()};for(const i of e.files){const e=await this.validateFile(i.path,i.content);s.files[i.path]=e,e.forEach(e=>{"error"===e.level?s.summary.error++:"warning"===e.level?s.summary.warning++:"info"===e.level&&s.summary.info++})}return s}async canSave(e){return 0===(await this.validateStagingGround(e)).summary.error}async validateXMLWellFormed(e,s){try{const i=new DOMParser,n=i.parseFromString(s,"text/xml").querySelector("parsererror");return n?{message:"XML is not well-formed: "+n.textContent,filePath:e}:null}catch(i){return{message:"Failed to parse XML: "+i.message,filePath:e}}}async validateBPMNNamespace(e,s){return s.includes('xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"')?null:{message:"BPMN file missing correct BPMN 2.0 namespace declaration",filePath:e,suggestion:'Add xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" to root element'}}async validateBPMNStartEvent(e,s){return s.includes("<startEvent")||s.includes("<bpmn:startEvent")?null:{message:"BPMN process should contain at least one start event",filePath:e,suggestion:"Add a start event to begin the process flow"}}async validateDMNNamespace(e,s){return s.includes('xmlns:dmn="https://www.omg.org/spec/DMN/20191111/MODEL/"')?null:{message:"DMN file missing correct DMN 1.3 namespace declaration",filePath:e,suggestion:'Add xmlns:dmn="https://www.omg.org/spec/DMN/20191111/MODEL/" to root element'}}async validateJSONSyntax(e,s){try{return JSON.parse(s),null}catch(i){return{message:"Invalid JSON syntax: "+i.message,filePath:e}}}async validateFHIRResourceType(e,s){try{const i=JSON.parse(s),n=["StructureDefinition","ValueSet","CodeSystem","ConceptMap","Questionnaire","PlanDefinition","ActivityDefinition","Measure","Library","ImplementationGuide","Bundle","Patient","Practitioner"];return i.resourceType&&!n.includes(i.resourceType)?{message:"Unknown FHIR resourceType: ".concat(i.resourceType),filePath:e,suggestion:"Verify the resourceType is correct for FHIR R4"}:null}catch(i){return null}}async validateFileSize(e,s){const i=new Blob([s]).size;return i>1048576?{message:"File size (".concat((i/1024/1024).toFixed(1),"MB) exceeds recommended limit of 1MB"),filePath:e,suggestion:"Consider breaking large files into smaller components"}:null}async validateFilenameConventions(e,s){const i=this.getFileName(e),n=[];return i.includes(" ")&&n.push("avoid spaces in filenames"),/[<>:"|?*]/.test(i)&&n.push('avoid special characters (<>:"|?*)'),i.length>100&&n.push("filename is very long (>100 characters)"),n.length>0?{message:"Filename convention issues: ".concat(n.join(", ")),filePath:e,suggestion:"Use lowercase letters, numbers, hyphens, and underscores"}:null}async validateSushiConfig(e,s){if(!e.endsWith("sushi-config.yaml"))return null;try{let n;try{n=d.default.load(s)}catch(i){return{message:"Invalid YAML syntax: ".concat(i.message),filePath:e,suggestion:"Fix YAML syntax errors and ensure proper indentation"}}if(!n||"object"!==typeof n)return{message:"sushi-config.yaml must contain a valid YAML object",filePath:e,suggestion:"Ensure the file contains proper YAML object structure"};if(!this.sushiConfigValidator(n)){const s=this.sushiConfigValidator.errors,i=s.map(e=>{var s,i;const n=e.instancePath?e.instancePath.replace("/",""):(null===(s=e.params)||void 0===s?void 0:s.missingProperty)||"root";let a="".concat(n,": ").concat(e.message);return null!==(i=e.params)&&void 0!==i&&i.allowedValues&&(a+=" (allowed: ".concat(e.params.allowedValues.join(", "),")")),a});return{message:"sushi-config.yaml validation errors: ".concat(i.join("; ")),filePath:e,suggestion:"Review the sushi-config.yaml specification at https://fshschool.org/docs/sushi/configuration/",details:s}}const a=this.validateWHOSmartGuidelines(n);return a||null}catch(n){return{message:"Failed to validate sushi-config.yaml: "+n.message,filePath:e,suggestion:"Check file format and content structure"}}}validateWHOSmartGuidelines(e){const s=[];return e.dependencies&&e.dependencies["smart.who.int.base"]||s.push("missing smart.who.int.base dependency (required for WHO DAK compliance)"),e.canonical&&e.canonical.includes("smart.who.int")&&(e.id.startsWith("smart.who.int")||s.push('id should start with "smart.who.int" when using WHO canonical URL')),e.canonical&&e.canonical.includes("smart.who.int")&&(e.publisher&&e.publisher.toLowerCase().includes("world health organization")||s.push('publisher should include "World Health Organization" for WHO guidelines'),e.jurisdiction&&Array.isArray(e.jurisdiction)||s.push("jurisdiction should be specified for WHO guidelines")),s.length>0?{message:"WHO SMART Guidelines compliance issues: ".concat(s.join(", ")),filePath:"sushi-config.yaml",suggestion:"Ensure compliance with WHO SMART Guidelines requirements"}:null}getFileExtension(e){const s=e.split(".");return s.length>1?s[s.length-1].toLowerCase():""}getFileName(e){return e.split("/").pop()||e}formatValidationResults(e){const s={canSave:0===e.summary.error,summary:e.summary,files:[]};return Object.entries(e.files).forEach(e=>{let[i,n]=e;n.length>0&&s.files.push({path:i,issues:n.map(e=>({level:e.level,message:e.message,description:e.description,suggestion:e.suggestion}))})}),s}getValidationSummary(e){return{error:e.summary.error,warning:e.summary.warning,info:e.summary.info,canSave:0===e.summary.error,hasIssues:e.summary.error+e.summary.warning+e.summary.info>0}}};var v=i(70579);const x=e=>{var s,i;let{isOpen:a,onClose:o,stagingGround:r,validation:c,repository:d,selectedBranch:h,hasWriteAccess:u,onSaveSuccess:m}=e;const[p,g]=(0,n.useState)(""),[x,j]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),[N,w]=(0,n.useState)(null),[S,k]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{a&&(g((null===r||void 0===r?void 0:r.message)||""),j(!1),b(!1),w(null),k(!1))},[a,r]),!a)return null;const C=c?f.getValidationSummary(c):null,A=!C||(C.canSave||x),F=!!C&&C.error>0,I=e=>409===e.status?"Conflict detected. The branch has been updated since you started. Please refresh and try again.":403===e.status?"Permission denied. Check that your token has write access to this repository.":404===e.status?"Repository or branch not found. Please verify the repository exists and you have access.":e.message?e.message:"An unexpected error occurred while saving. Please try again.",H=e=>{switch(e){case"error":return"\ud83d\udd34";case"warning":return"\ud83d\udfe1";case"info":return"\ud83d\udfe2";default:return"\u2753"}};return(0,v.jsx)("div",{className:"save-dialog-overlay",children:(0,v.jsxs)("div",{className:"save-dialog",children:[(0,v.jsxs)("div",{className:"dialog-header",children:[(0,v.jsx)("h3",{children:"\ud83d\udcbe Save Changes"}),(0,v.jsx)("button",{className:"dialog-close",onClick:o,disabled:y,children:"\xd7"})]}),(0,v.jsxs)("div",{className:"dialog-content",children:[(0,v.jsxs)("div",{className:"save-summary",children:[(0,v.jsxs)("h4",{children:["Files to be committed (",(null===r||void 0===r||null===(s=r.files)||void 0===s?void 0:s.length)||0,"):"]}),(0,v.jsx)("div",{className:"files-list",children:null===r||void 0===r||null===(i=r.files)||void 0===i?void 0:i.map((e,s)=>(0,v.jsxs)("div",{className:"file-item",children:[(0,v.jsx)("span",{className:"file-icon",children:"\ud83d\udcc4"}),(0,v.jsx)("span",{className:"file-path",children:e.path}),(0,v.jsxs)("span",{className:"file-size",children:[(new Blob([e.content]).size/1024).toFixed(1)," KB"]}),(0,v.jsx)("button",{className:"remove-file-btn",onClick:s=>{var i;s.stopPropagation(),i=e.path,window.confirm('Are you sure you want to remove "'.concat(i,'" from staging? This cannot be undone.'))&&l.A.removeFile(i)},title:"Remove ".concat(e.path," from staging"),disabled:y,children:"\ud83d\uddd1\ufe0f"})]},s))})]}),C&&(0,v.jsxs)("div",{className:"validation-section",children:[(0,v.jsx)("div",{className:"validation-summary ".concat(C.hasIssues?"has-issues":"clean"),onClick:()=>k(!S),children:(0,v.jsxs)("div",{className:"validation-header",children:[(0,v.jsx)("h4",{children:"\ud83d\udea6 Validation Status"}),(0,v.jsxs)("div",{className:"validation-badges",children:[C.error>0&&(0,v.jsxs)("span",{className:"validation-badge error",children:["\ud83d\udd34 ",C.error]}),C.warning>0&&(0,v.jsxs)("span",{className:"validation-badge warning",children:["\ud83d\udfe1 ",C.warning]}),C.info>0&&(0,v.jsxs)("span",{className:"validation-badge info",children:["\ud83d\udfe2 ",C.info]}),!C.hasIssues&&(0,v.jsx)("span",{className:"validation-badge success",children:"\u2705 All clear"})]}),(0,v.jsx)("span",{className:"expand-icon ".concat(S?"expanded":""),children:"\u25bc"})]})}),S&&c&&(0,v.jsx)("div",{className:"validation-details",children:Object.entries(c.files).map(e=>{let[s,i]=e;return i.length>0&&(0,v.jsxs)("div",{className:"file-validation",children:[(0,v.jsxs)("h5",{children:["\ud83d\udcc4 ",s]}),(0,v.jsx)("div",{className:"validation-issues",children:i.map((e,s)=>(0,v.jsxs)("div",{className:"validation-issue ".concat(e.level),children:[(0,v.jsx)("span",{className:"issue-icon",children:H(e.level)}),(0,v.jsxs)("div",{className:"issue-content",children:[(0,v.jsx)("div",{className:"issue-message",children:e.message}),e.suggestion&&(0,v.jsxs)("div",{className:"issue-suggestion",children:["\ud83d\udca1 ",e.suggestion]})]})]},s))})]},s)})}),F&&(0,v.jsxs)("div",{className:"override-section",children:[(0,v.jsxs)("label",{className:"override-checkbox",children:[(0,v.jsx)("input",{type:"checkbox",checked:x,onChange:e=>j(e.target.checked)}),(0,v.jsx)("span",{className:"checkmark"}),"Override validation errors and save anyway"]}),(0,v.jsx)("p",{className:"override-warning",children:"\u26a0\ufe0f Saving with validation errors may cause issues with your DAK. Only enable this if you're sure about your changes."})]})]}),(0,v.jsxs)("div",{className:"commit-message-section",children:[(0,v.jsx)("label",{htmlFor:"commit-message",children:(0,v.jsx)("h4",{children:"\u270d\ufe0f Commit Message"})}),(0,v.jsx)("textarea",{id:"commit-message",className:"commit-message-input",value:p,onChange:e=>g(e.target.value),placeholder:"Describe your changes...",rows:3,disabled:y,required:!0}),(0,v.jsx)("div",{className:"commit-tips",children:(0,v.jsxs)("p",{children:["\ud83d\udca1 ",(0,v.jsx)("strong",{children:"Tip:"})," Write a clear, descriptive message about what you changed and why."]})})]}),N&&(0,v.jsx)("div",{className:"error-section",children:(0,v.jsxs)("div",{className:"error-message",children:[(0,v.jsx)("span",{className:"error-icon",children:"\u274c"}),N]})}),(0,v.jsxs)("div",{className:"repo-info",children:[(0,v.jsxs)("div",{className:"info-item",children:[(0,v.jsx)("span",{className:"info-label",children:"Repository:"}),(0,v.jsx)("span",{className:"info-value",children:null===d||void 0===d?void 0:d.full_name})]}),(0,v.jsxs)("div",{className:"info-item",children:[(0,v.jsx)("span",{className:"info-label",children:"Branch:"}),(0,v.jsx)("span",{className:"info-value",children:h})]}),(0,v.jsxs)("div",{className:"info-item",children:[(0,v.jsx)("span",{className:"info-label",children:"Access:"}),(0,v.jsx)("span",{className:"info-value ".concat(u?"write":"read"),children:u?"\u270f\ufe0f Write":"\ud83d\udc41\ufe0f Read-only"})]})]})]}),(0,v.jsxs)("div",{className:"dialog-actions",children:[(0,v.jsx)("button",{className:"action-btn secondary",onClick:o,disabled:y,children:"Cancel"}),(0,v.jsx)("button",{className:"action-btn primary",onClick:async()=>{if(p.trim())if(u)if(!F||x){b(!0),w(null);try{var e;const s=(null===(e=d.owner)||void 0===e?void 0:e.login)||d.full_name.split("/")[0];if(d.isDemo||d.owner&&"demo-user"===d.owner.login)return await new Promise(e=>setTimeout(e,2e3)),void m({sha:"demo-commit-sha",message:p,url:"https://github.com/".concat(d.full_name,"/commit/demo-commit-sha")});const i=await t.A.createCommit(s,d.name,h,p.trim(),r.files);m({sha:i.sha,message:p,url:i.html_url})}catch(s){console.error("Error saving changes:",s),w(I(s))}finally{b(!1)}}else w("Cannot save with validation errors. Enable override option to proceed anyway.");else w("You need write permissions to save changes");else w("Commit message is required")},disabled:!A||!p.trim()||y||!u,children:y?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"saving-spinner",children:"\u23f3"}),"Saving..."]}):(0,v.jsx)(v.Fragment,{children:"\ud83d\udcbe Save Changes"})})]})]})})},j=e=>{let{repository:s,selectedBranch:i,hasWriteAccess:a,profile:t}=e;const[o,r]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[h,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)(null),[g,j]=(0,n.useState)(!1),y=(0,n.useCallback)(async()=>{u(!0),p(null);try{const e=l.A.getStagingGround();r(e),e.files.length>0&&await b(e)}catch(e){p("Failed to load staging ground data"),console.error("Error loading staging ground:",e)}finally{u(!1)}},[]);(0,n.useEffect)(()=>{if(s&&i){l.A.initialize(s,i),y();return l.A.addListener(e=>{r(e),b(e)})}},[s,i,y]);const b=async e=>{if(e&&0!==e.files.length)try{const s=await f.validateStagingGround(e);d(s)}catch(s){console.error("Error validating staging ground:",s),d(null)}else d(null)},N=c?f.getValidationSummary(c):{error:0,warning:0,info:0,canSave:!0},w=o&&o.files.length>0,S=o?o.files.length:0;return(0,v.jsxs)("div",{className:"staging-ground-section",children:[(0,v.jsxs)("div",{className:"section-header",children:[(0,v.jsxs)("h3",{className:"section-title",children:[(0,v.jsx)("span",{className:"section-icon",children:"\ud83d\udcdd"}),"Staging Ground",w&&(0,v.jsxs)("span",{className:"files-badge",children:[S," file",1!==S?"s":""]})]}),(0,v.jsx)("p",{className:"section-description",children:"Changes made through DAK component editors are staged here before being committed to the repository. Review and commit your changes when ready."})]}),(0,v.jsx)("div",{className:"staging-content",children:h?(0,v.jsxs)("div",{className:"loading-indicator",children:[(0,v.jsx)("span",{className:"loading-spinner",children:"\u23f3"}),"Loading staging ground..."]}):m?(0,v.jsxs)("div",{className:"error-message",children:[(0,v.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),m]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"staging-status-bar",children:[(0,v.jsx)("div",{className:"status-indicators",children:(0,v.jsxs)("div",{className:"validation-stoplight",children:[(0,v.jsxs)("div",{className:"stoplight-indicator error ".concat(0===N.error?"lit":""),children:["\ud83d\udd34",N.error>0&&(0,v.jsx)("span",{className:"indicator-badge",children:N.error})]}),(0,v.jsxs)("div",{className:"stoplight-indicator warning ".concat(0===N.warning?"lit":""),children:["\ud83d\udfe1",N.warning>0&&(0,v.jsx)("span",{className:"indicator-badge",children:N.warning})]}),(0,v.jsxs)("div",{className:"stoplight-indicator info ".concat(0===N.info?"lit":""),children:["\ud83d\udfe2",N.info>0&&(0,v.jsx)("span",{className:"indicator-badge",children:N.info})]})]})}),(0,v.jsx)("button",{className:"save-btn ".concat(w&&N.canSave?"":"disabled"),onClick:()=>{a?j(!0):alert("You need write permissions to save changes to this repository.")},disabled:!w||!a,title:w?a?N.canSave?"Save changes to repository":"Fix validation errors first":"Write access required":"No changes to save",children:"\ud83d\udcbe Save Changes"})]}),(0,v.jsxs)("div",{className:"staging-files-section",children:[(0,v.jsx)("h4",{children:"\ud83d\udcc1 Changed Files"}),w?(0,v.jsxs)("div",{className:"changed-files",children:[(o&&o.files?o.files.map(e=>({path:e.path,size:new Blob([e.content]).size,lastModified:e.timestamp})):[]).map((e,s)=>(0,v.jsxs)("div",{className:"file-item",children:[(0,v.jsxs)("div",{className:"file-info",children:[(0,v.jsx)("span",{className:"file-icon",children:"\ud83d\udcc4"}),(0,v.jsx)("span",{className:"file-path",children:e.path})]}),(0,v.jsxs)("div",{className:"file-meta",children:[(0,v.jsxs)("span",{className:"file-size",children:[(e.size/1024).toFixed(1)," KB"]}),(0,v.jsx)("span",{className:"file-time",children:new Date(e.lastModified).toLocaleTimeString()}),(0,v.jsx)("button",{className:"remove-file-btn",onClick:s=>{var i;s.stopPropagation(),i=e.path,window.confirm('Are you sure you want to remove "'.concat(i,'" from staging? This cannot be undone.'))&&l.A.removeFile(i)},title:"Remove ".concat(e.path," from staging"),children:"\ud83d\uddd1\ufe0f"})]})]},s)),(0,v.jsx)("div",{className:"file-actions",children:(0,v.jsx)("button",{className:"action-btn secondary small",onClick:()=>{window.confirm("Are you sure you want to discard all changes? This cannot be undone.")&&l.A.clearStagingGround()},children:"\ud83d\uddd1\ufe0f Clear All Changes"})})]}):(0,v.jsxs)("div",{className:"no-changes",children:[(0,v.jsx)("p",{children:"No changes in staging ground"}),(0,v.jsx)("p",{className:"help-text",children:"Changes made through DAK component editors will appear here before being saved to the repository."})]})]}),w&&o.message&&(0,v.jsxs)("div",{className:"commit-message-section",children:[(0,v.jsx)("h4",{children:"\u270d\ufe0f Commit Message"}),(0,v.jsx)("div",{className:"commit-preview",children:(0,v.jsx)("p",{children:o.message})})]})]})}),(0,v.jsx)(x,{isOpen:g,onClose:()=>j(!1),stagingGround:o,validation:c,repository:s,selectedBranch:i,hasWriteAccess:a,onSaveSuccess:e=>{j(!1),l.A.clearStagingGround(),alert("Changes saved successfully! Commit: ".concat(e.sha.substring(0,7)))}})]})};var y=i(73537),b=i(14832),N=i(13333);const w=e=>{var s,a,t,o,r,d,h;let{profile:u,repository:m,selectedBranch:p,hasWriteAccess:g}=e;const f=(0,y.Zp)(),[x,j]=(0,n.useState)(!1),[w,S]=(0,n.useState)(null),[k,C]=(0,n.useState)(null),[A,F]=(0,n.useState)(!1),[I,H]=(0,n.useState)(null),[L,P]=(0,n.useState)(!1),[G,M]=(0,n.useState)(null),[R,D]=(0,n.useState)(null),[O,V]=(0,n.useState)([]),[E,_]=(0,n.useState)(!1),[W,T]=(0,n.useState)(""),[B,U]=(0,n.useState)(!1),[z,q]=(0,n.useState)(!1),[K,X]=(0,n.useState)(!1),J=(null===(s=m.owner)||void 0===s?void 0:s.login)||m.full_name.split("/")[0],Y=m.name,$=(0,n.useCallback)(async()=>{try{F(!0),H(null);const e=await b.A.loadSushiConfig(m,p,u);S(e.config),C(e),M((0,c.A)({},e.config));const s=b.A.validateSushiConfig(e.config);D(s);const i=await b.A.loadPagesWithSources(m,p,u,e.config);V(i)}catch(e){console.error("Error loading SUSHI config:",e),H("Failed to load SUSHI configuration: ".concat(e.message))}finally{F(!1)}},[m,p,u]);(0,n.useEffect)(()=>{x&&!w&&m&&p&&$()},[x,m,p,w,$]);const Z=e=>{const s=p?"/sushi-runner/".concat(J,"/").concat(Y,"/").concat(p):"/sushi-runner/".concat(J,"/").concat(Y),i={profile:u,repository:m,selectedBranch:p};(0,N.hX)(e,s,f,i)},Q=()=>{g?L?(M((0,c.A)({},w)),P(!1)):P(!0):alert("You need write permissions to edit the SUSHI configuration.")},ee=(e,s)=>{M(i=>(0,c.A)((0,c.A)({},i),{},{[e]:s}))},se=(e,s)=>{M(i=>(0,c.A)((0,c.A)({},i),{},{publisher:(0,c.A)((0,c.A)({},i.publisher),{},{[e]:s})}))};return x?(0,v.jsxs)("div",{className:"sushi-status-expanded",children:[(0,v.jsxs)("div",{className:"sushi-status-header",onClick:()=>j(!1),children:[(0,v.jsxs)("div",{className:"sushi-status-info",children:[(0,v.jsx)("span",{className:"sushi-status-icon",children:"\ud83c\udf63"}),(0,v.jsx)("span",{className:"sushi-status-title",children:"SUSHI Status"}),(0,v.jsx)("span",{className:"expand-indicator",children:"\u25bc"})]}),(0,v.jsx)("div",{className:"sushi-actions",children:(0,v.jsx)("button",{className:"sushi-runner-btn",onClick:Z,title:"Open SUSHI Runner",children:"\ud83c\udfc3 SUSHI Runner"})})]}),(0,v.jsxs)("div",{className:"sushi-status-content",children:[A&&(0,v.jsx)("div",{className:"sushi-loading",children:(0,v.jsx)("p",{children:"Loading SUSHI configuration..."})}),I&&(0,v.jsxs)("div",{className:"sushi-error",children:[(0,v.jsx)("p",{children:I}),(0,v.jsx)("button",{onClick:$,className:"retry-btn",children:"\ud83d\udd04 Retry"})]}),w&&(0,v.jsxs)("div",{className:"sushi-config-container",children:[(0,v.jsxs)("div",{className:"source-indicators",children:[k.hasGithubVersion&&(0,v.jsx)("span",{className:"source-badge github",children:"\ud83d\udcc1 GitHub: sushi-config.yaml"}),k.hasStagingVersion&&(0,v.jsx)("span",{className:"source-badge staging active",children:"\ud83d\udcdd Staging: sushi-config.yaml (override)"})]}),R&&(R.errors.length>0||R.warnings.length>0)&&(0,v.jsxs)("div",{className:"validation-messages",children:[R.errors.map((e,s)=>(0,v.jsxs)("div",{className:"validation-error",children:["\u274c ",e]},s)),R.warnings.map((e,s)=>(0,v.jsxs)("div",{className:"validation-warning",children:["\u26a0\ufe0f ",e]},s))]}),(0,v.jsxs)("div",{className:"config-summary",children:[(0,v.jsx)("h4",{children:"Summary"}),(0,v.jsxs)("div",{className:"summary-grid",children:[(0,v.jsxs)("div",{className:"summary-field",children:[(0,v.jsx)("label",{children:"ID:"}),L?(0,v.jsx)("input",{type:"text",value:G.id||"",onChange:e=>ee("id",e.target.value),className:"edit-input"}):(0,v.jsx)("span",{children:w.id})]}),(0,v.jsxs)("div",{className:"summary-field",children:[(0,v.jsx)("label",{children:"FHIR Version:"}),L?(0,v.jsxs)("select",{value:G.fhirVersion||"4.0.1",onChange:e=>ee("fhirVersion",e.target.value),className:"edit-input",children:[(0,v.jsx)("option",{value:"4.0.1",children:"4.0.1"}),(0,v.jsx)("option",{value:"4.3.0",children:"4.3.0"}),(0,v.jsx)("option",{value:"5.0.0",children:"5.0.0"})]}):(0,v.jsx)("span",{children:w.fhirVersion||"4.0.1"})]}),(0,v.jsxs)("div",{className:"summary-field",children:[(0,v.jsx)("label",{children:"Name:"}),L?(0,v.jsx)("input",{type:"text",value:G.name||"",onChange:e=>ee("name",e.target.value),className:"edit-input"}):(0,v.jsx)("span",{children:w.name})]}),(0,v.jsxs)("div",{className:"summary-field",children:[(0,v.jsx)("label",{children:"Version:"}),L?(0,v.jsx)("input",{type:"text",value:G.version||"",onChange:e=>ee("version",e.target.value),className:"edit-input"}):(0,v.jsx)("span",{children:w.version})]}),(0,v.jsxs)("div",{className:"summary-field full-width",children:[(0,v.jsx)("label",{children:"Title:"}),L?(0,v.jsx)("input",{type:"text",value:G.title||"",onChange:e=>ee("title",e.target.value),className:"edit-input"}):(0,v.jsx)("span",{children:w.title})]}),(0,v.jsxs)("div",{className:"summary-field full-width",children:[(0,v.jsx)("label",{children:"Description:"}),L?(0,v.jsx)("textarea",{value:G.description||"",onChange:e=>ee("description",e.target.value),className:"edit-input",rows:"3"}):(0,v.jsx)("span",{children:w.description})]})]}),(0,v.jsxs)("div",{className:"publisher-section",children:[(0,v.jsx)("h5",{children:"Publisher"}),(0,v.jsxs)("div",{className:"publisher-fields",children:[(0,v.jsxs)("div",{className:"summary-field",children:[(0,v.jsx)("label",{children:"Name:"}),L?(0,v.jsx)("input",{type:"text",value:(null===(a=G.publisher)||void 0===a?void 0:a.name)||"",onChange:e=>se("name",e.target.value),className:"edit-input"}):(0,v.jsx)("span",{children:(null===(t=w.publisher)||void 0===t?void 0:t.name)||"Not specified"})]}),(0,v.jsxs)("div",{className:"summary-field",children:[(0,v.jsx)("label",{children:"URL:"}),L?(0,v.jsx)("input",{type:"url",value:(null===(o=G.publisher)||void 0===o?void 0:o.url)||"",onChange:e=>se("url",e.target.value),className:"edit-input"}):(0,v.jsx)("span",{children:null!==(r=w.publisher)&&void 0!==r&&r.url?(0,v.jsx)("a",{href:w.publisher.url,target:"_blank",rel:"noopener noreferrer",children:w.publisher.url}):"Not specified"})]}),(0,v.jsxs)("div",{className:"summary-field",children:[(0,v.jsx)("label",{children:"Email:"}),L?(0,v.jsx)("input",{type:"email",value:(null===(d=G.publisher)||void 0===d?void 0:d.email)||"",onChange:e=>se("email",e.target.value),className:"edit-input"}):(0,v.jsx)("span",{children:null!==(h=w.publisher)&&void 0!==h&&h.email?(0,v.jsx)("a",{href:"mailto:".concat(w.publisher.email),children:w.publisher.email}):"Not specified"})]})]})]})]}),(0,v.jsxs)("div",{className:"dependencies-section",children:[(0,v.jsx)("div",{className:"section-toggle",onClick:()=>q(!z),children:(0,v.jsxs)("h4",{children:["Dependencies ",z?"\u25bc":"\u25b6"]})}),z&&(0,v.jsxs)("div",{className:"dependencies-content",children:[G.dependencies&&Object.keys(G.dependencies).length>0?(0,v.jsx)("div",{className:"dependencies-list",children:Object.entries(G.dependencies).map(e=>{let[s,i]=e;return(0,v.jsxs)("div",{className:"dependency-item",children:[(0,v.jsx)("span",{className:"dep-name",children:s}),(0,v.jsx)("span",{className:"dep-version",children:i}),L&&(0,v.jsx)("button",{onClick:()=>{return e=s,void(window.confirm("Remove dependency ".concat(e,"?"))&&M(s=>{const i=(0,c.A)({},s.dependencies);return delete i[e],(0,c.A)((0,c.A)({},s),{},{dependencies:i})}));var e},className:"remove-dep-btn",title:"Remove dependency",children:"\u274c"})]},s)})}):(0,v.jsx)("p",{children:"No dependencies defined"}),L&&(0,v.jsx)("button",{onClick:()=>{const e=prompt("Enter dependency name (e.g., smart.who.int.base):"),s=prompt("Enter version (e.g., 1.0.0):");e&&s&&M(i=>(0,c.A)((0,c.A)({},i),{},{dependencies:(0,c.A)((0,c.A)({},i.dependencies),{},{[e]:s})}))},className:"add-dep-btn",children:"\u2795 Add Dependency"})]})]}),(0,v.jsxs)("div",{className:"pages-section",children:[(0,v.jsx)("div",{className:"section-toggle",onClick:()=>U(!B),children:(0,v.jsxs)("h4",{children:["Pages (",O.length,") ",B?"\u25bc":"\u25b6"]})}),B&&(0,v.jsx)("div",{className:"pages-content",children:O.length>0?(0,v.jsx)("div",{className:"pages-list",children:O.map((e,s)=>(0,v.jsxs)("div",{className:"page-item",children:[(0,v.jsxs)("div",{className:"page-info",children:[(0,v.jsx)("strong",{children:e.key}),e.title&&(0,v.jsxs)("span",{className:"page-title",children:[": ",e.title]})]}),(0,v.jsxs)("div",{className:"page-sources",children:[e.sources.github&&(0,v.jsx)("a",{href:e.sources.github.url,target:"_blank",rel:"noopener noreferrer",className:"source-link github",children:"\ud83d\udcc1 GitHub"}),e.sources.staging&&(0,v.jsx)("span",{className:"source-link staging",children:"\ud83d\udcdd Staging"})]})]},s))}):(0,v.jsx)("p",{children:"No pages defined"})})]}),(0,v.jsxs)("div",{className:"advanced-section",children:[(0,v.jsx)("div",{className:"section-toggle",onClick:()=>X(!K),children:(0,v.jsxs)("h4",{children:["Advanced Configuration ",K?"\u25bc":"\u25b6"]})}),K&&(0,v.jsxs)("div",{className:"advanced-content",children:[(0,v.jsx)("p",{children:"Additional SUSHI configuration fields can be viewed and edited in the source view."}),(0,v.jsxs)("div",{className:"advanced-fields",children:[(0,v.jsxs)("div",{className:"field-info",children:[(0,v.jsx)("label",{children:"Canonical URL:"}),(0,v.jsx)("span",{children:w.canonical||"Not specified"})]}),(0,v.jsxs)("div",{className:"field-info",children:[(0,v.jsx)("label",{children:"Status:"}),(0,v.jsx)("span",{children:w.status||"Not specified"})]}),(0,v.jsxs)("div",{className:"field-info",children:[(0,v.jsx)("label",{children:"Copyright Year:"}),(0,v.jsx)("span",{children:w.copyrightYear||"Not specified"})]})]})]})]}),(0,v.jsxs)("div",{className:"config-actions",children:[L?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{onClick:async()=>{try{const e=b.A.validateSushiConfig(G);if(D(e),e.errors.length>0)return void alert("Please fix validation errors before saving.");await b.A.saveSushiConfigToStaging(G),S((0,c.A)({},G)),C(e=>(0,c.A)((0,c.A)({},e),{},{hasStagingVersion:!0,isUsingStaging:!0})),P(!1),alert("SUSHI configuration saved to staging ground successfully!")}catch(e){console.error("Error saving SUSHI config:",e),alert("Failed to save SUSHI configuration: ".concat(e.message))}},className:"save-btn",children:"\ud83d\udcbe Save to Staging"}),(0,v.jsx)("button",{onClick:Q,className:"cancel-btn",children:"\u274c Cancel"})]}):(0,v.jsx)("button",{onClick:Q,className:"edit-btn",disabled:!g,title:g?"Edit configuration":"Write permissions required",children:"\u270f\ufe0f Edit"}),(0,v.jsx)("button",{onClick:()=>(async e=>{try{if(_(!0),"staging"===e&&k.hasStagingVersion){const e=l.A.getStagingFiles().find(e=>"sushi-config.yaml"===e.path);T(e?e.content:"Staging version not found")}else Promise.resolve().then(i.bind(i,55661)).then(e=>{const s=e.dump(w,{indent:2});T(s)})}catch(s){T("Error loading source: ".concat(s.message))}})("current"),className:"view-source-btn",children:"\ud83d\udc41\ufe0f View Source"}),k.hasGithubVersion&&(0,v.jsx)("a",{href:"https://github.com/".concat(J,"/").concat(Y,"/blob/").concat(p,"/sushi-config.yaml"),target:"_blank",rel:"noopener noreferrer",className:"github-source-btn",children:"\ud83d\udd17 GitHub Source"})]})]})]}),E&&(0,v.jsx)("div",{className:"source-modal-overlay",onClick:()=>_(!1),children:(0,v.jsxs)("div",{className:"source-modal",onClick:e=>e.stopPropagation(),children:[(0,v.jsxs)("div",{className:"source-modal-header",children:[(0,v.jsx)("h3",{children:"SUSHI Configuration Source"}),(0,v.jsx)("button",{onClick:()=>_(!1),className:"modal-close",children:"\u274c"})]}),(0,v.jsx)("div",{className:"source-modal-content",children:(0,v.jsx)("pre",{children:(0,v.jsx)("code",{children:W})})}),(0,v.jsx)("div",{className:"source-modal-actions",children:(0,v.jsx)("button",{onClick:()=>{return e=W,void navigator.clipboard.writeText(e).then(()=>{alert("Copied to clipboard!")}).catch(e=>{console.error("Failed to copy: ",e)});var e},className:"copy-btn",children:"\ud83d\udccb Copy to Clipboard"})})]})})]}):(0,v.jsx)("div",{className:"sushi-status-collapsed",children:(0,v.jsxs)("div",{className:"sushi-status-header",onClick:()=>j(!0),children:[(0,v.jsxs)("div",{className:"sushi-status-info",children:[(0,v.jsx)("span",{className:"sushi-status-icon",children:"\ud83c\udf63"}),(0,v.jsx)("span",{className:"sushi-status-title",children:"SUSHI Status"}),(0,v.jsx)("span",{className:"expand-indicator",children:"\u25b6"})]}),(0,v.jsx)("div",{className:"sushi-actions",children:(0,v.jsx)("button",{className:"sushi-runner-btn",onClick:Z,title:"Open SUSHI Runner",children:"\ud83c\udfc3 SUSHI Runner"})})]})})},S=e=>{var s;let{profile:i,repository:a,selectedBranch:o,hasWriteAccess:r}=e;const[l,c]=(0,n.useState)([]),[d,h]=(0,n.useState)([]),[u,m]=(0,n.useState)({}),[p,g]=(0,n.useState)(!0),[f,x]=(0,n.useState)(null),y=(null===(s=a.owner)||void 0===s?void 0:s.login)||a.full_name.split("/")[0],b=a.name;(0,n.useEffect)(()=>{(async()=>{try{if(g(!0),x(null),null!==i&&void 0!==i&&i.isDemo){c([{name:"main",commit:{sha:"abc123"}},{name:"feature/updates",commit:{sha:"def456"}},{name:"dev",commit:{sha:"ghi789"}}]);h([{id:"pages-build",name:"Deploy to GitHub Pages",triggers:["push","manual"]}]);const e={main:{status:"completed",conclusion:"success",html_url:"https://github.com/".concat(y,"/").concat(b,"/actions/runs/123456"),updated_at:(new Date).toISOString()},"feature/updates":{status:"completed",conclusion:"action_required",html_url:"https://github.com/".concat(y,"/").concat(b,"/actions/runs/123457"),updated_at:(new Date).toISOString()},dev:{status:"completed",conclusion:"failure",html_url:"https://github.com/".concat(y,"/").concat(b,"/actions/runs/123458"),updated_at:(new Date).toISOString()}};return m(e),void g(!1)}const s=(await t.A.getBranches(y,b)).filter(e=>"gh-pages"!==e.name);c(s);const n=await t.A.getWorkflows(y,b);h(n);const a=n.find(e=>e.name.toLowerCase().includes("build")||e.name.toLowerCase().includes("publish")||e.name.toLowerCase().includes("pages"));if(a&&a.id){const i={};for(const n of s)try{const e=await t.A.getWorkflowRunsForWorkflow(y,b,a.id,{branch:n.name,per_page:1});e.length>0&&(i[n.name]=e[0])}catch(e){console.warn("Could not fetch workflow runs for branch ".concat(n.name,":"),e)}m(i)}else a&&!a.id&&console.warn("Found workflow but missing ID:",a);g(!1)}catch(e){console.error("Error fetching publication data:",e),x("Failed to load publication data"),g(!1)}})()},[y,b,null===i||void 0===i?void 0:i.isDemo]);return p?(0,v.jsx)("div",{className:"publications-loading",children:(0,v.jsxs)("div",{className:"loading-content",children:[(0,v.jsx)("h3",{children:"Loading Publications..."}),(0,v.jsx)("p",{children:"Fetching branch and workflow information..."})]})}):f?(0,v.jsx)("div",{className:"publications-error",children:(0,v.jsxs)("div",{className:"error-content",children:[(0,v.jsx)("h3",{children:"Error Loading Publications"}),(0,v.jsx)("p",{children:f})]})}):(0,v.jsxs)("div",{className:"publications-section",children:[(0,v.jsx)(j,{repository:a,selectedBranch:o,hasWriteAccess:r,profile:i}),(0,v.jsxs)("div",{className:"section-header",children:[(0,v.jsx)("h3",{className:"section-title",children:"Published DAK Content"}),(0,v.jsx)("p",{className:"section-description",children:"Access published Implementation Guide content for this DAK repository. Each branch is published automatically via GitHub Actions to GitHub Pages."})]}),(0,v.jsx)("div",{className:"publications-grid",children:l.map(e=>{const s=e.name===a.default_branch||"main"===e.name,n=(o=e.name)===a.default_branch||"main"===o?"https://".concat(y,".github.io/").concat(b,"/"):"https://".concat(y,".github.io/").concat(b,"/branches/").concat(o,"/");var o;const l=(e=>{const s=u[e];if(!s)return{icon:"\u26aa",title:"No recent workflow runs",link:null};const i=s.status,n=s.conclusion;return"in_progress"===i||"queued"===i?{icon:"\ud83d\udd04",title:"Workflow running",link:s.html_url,className:"running"}:"success"===n?{icon:"\u2705",title:"Last build successful",link:s.html_url,className:"success"}:"failure"===n?{icon:"\u274c",title:"Last build failed",link:s.html_url,className:"failure"}:"action_required"===n?{icon:"\u23f3",title:"Workflow requires approval",link:s.html_url,className:"approval-required"}:{icon:"\u26a0\ufe0f",title:"Build ".concat(n||i),link:s.html_url,className:"warning"}})(e.name);return(0,v.jsxs)("div",{className:"publication-card ".concat(s?"main-branch":""),children:[(0,v.jsxs)("div",{className:"publication-header",children:[(0,v.jsxs)("div",{className:"branch-info",children:[(0,v.jsx)("span",{className:"branch-icon",children:"\ud83c\udf3f"}),(0,v.jsx)("span",{className:"branch-name",children:e.name}),s&&(0,v.jsx)("span",{className:"main-badge",children:"MAIN"})]}),(0,v.jsx)("div",{className:"workflow-status",children:l.link?(0,v.jsx)("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"status-icon ".concat(l.className||""),title:l.title,children:l.icon}):(0,v.jsx)("span",{className:"status-icon ".concat(l.className||""),title:l.title,children:l.icon})})]}),(0,v.jsxs)("div",{className:"publication-content",children:[(0,v.jsxs)("div",{className:"publication-url",children:[(0,v.jsx)("label",{children:"Published at:"}),(0,v.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"publication-link",children:[n,(0,v.jsx)("span",{className:"external-link",children:"\u2197"})]})]}),(0,v.jsxs)("div",{className:"publication-actions",children:[(0,v.jsx)("button",{className:"restart-workflow-btn",onClick:()=>(async e=>{if(null!==i&&void 0!==i&&i.isDemo)return void alert("Demo Mode: Workflow restart simulated for branch: ".concat(e));const s=d.find(e=>e.name.toLowerCase().includes("build")||e.name.toLowerCase().includes("publish")||e.name.toLowerCase().includes("pages"));if(s){if(!s.id)return alert("Workflow found but missing ID - cannot restart"),void console.warn("Workflow missing ID:",s);try{await t.A.triggerWorkflow(y,b,s.id,e),alert("Workflow restarted for branch: ".concat(e)),setTimeout(()=>{window.location.reload()},2e3)}catch(n){console.error("Error restarting workflow:",n),alert("Failed to restart workflow. Please check your permissions.")}}else alert("No suitable workflow found to restart")})(e.name),disabled:!r,title:r?"Restart build workflow for this branch":"Write permissions required",children:"\ud83d\udd04 Rebuild"}),(0,v.jsx)("a",{href:"https://github.com/".concat(y,"/").concat(b,"/tree/").concat(e.name),target:"_blank",rel:"noopener noreferrer",className:"view-source-btn",title:"View source code for this branch",children:"\ud83d\udc41\ufe0f View Source"})]})]})]},e.name)})}),0===l.length&&(0,v.jsx)("div",{className:"no-branches",children:(0,v.jsx)("p",{children:"No publishable branches found (excluding gh-pages)."})}),(0,v.jsx)(w,{profile:i,repository:a,selectedBranch:o,hasWriteAccess:r})]})},k=e=>{let{profile:s,repository:i,selectedBranch:a}=e;const o=(0,y.Zp)(),[r,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)([]),[h,u]=(0,n.useState)(!0),[m,p]=(0,n.useState)(null),[g,f]=(0,n.useState)(null),x=n.useCallback(()=>i?"sgex_fork_status_".concat(i.full_name):null,[i]);(0,n.useEffect)(()=>{const e=x();if(e){const s=sessionStorage.getItem(e);null!==s&&l(JSON.parse(s))}},[x]);(0,n.useEffect)(()=>{(async()=>{if(i){u(!0),p(null);try{let s=i;if(!i.parent&&(!0===i.fork||void 0===i.fork))try{s=await t.A.getRepository(i.owner.login,i.name)}catch(e){console.warn("Could not fetch full repository details:",e)}s.fork&&s.parent&&f(s.parent);const n=await t.A.getRepositoryForks(i.owner.login,i.name);d(n)}catch(s){console.error("Error fetching repository information:",s),p(s.message)}finally{u(!1)}}})()},[i]);const j=e=>{const s=e.owner.login,i=e.name,n=e.default_branch||"main";return"/dashboard/".concat(s,"/").concat(i,"/").concat(n)},b=e=>{if(!g)return;const s=j(g),i={profile:{login:g.owner.login,name:g.owner.login,avatar_url:g.owner.avatar_url,type:g.owner.type},repository:g,selectedBranch:g.default_branch||"main"};(0,N.hX)(e,s,o,i)};return!i||h?(0,v.jsx)("div",{className:"fork-status-bar loading",children:(0,v.jsxs)("div",{className:"fork-status-header",children:[(0,v.jsxs)("div",{className:"fork-badge-placeholder",children:[(0,v.jsx)("span",{className:"fork-icon",children:"\ud83c\udf74"}),(0,v.jsx)("span",{className:"fork-count",children:"..."})]}),(0,v.jsx)("span",{className:"fork-status-title",children:"Loading repository info..."})]})}):m?(0,v.jsx)("div",{className:"fork-status-bar error",children:(0,v.jsxs)("div",{className:"fork-status-header",children:[(0,v.jsxs)("div",{className:"fork-badge",children:[(0,v.jsx)("span",{className:"fork-icon",children:"\ud83c\udf74"}),(0,v.jsx)("span",{className:"fork-count",children:"?"})]}),(0,v.jsx)("span",{className:"fork-status-title",children:"Unable to load repository info"})]})}):(0,v.jsxs)("div",{className:"fork-status-bar ".concat(r?"expanded":"collapsed"),children:[(0,v.jsxs)("div",{className:"fork-status-header",onClick:()=>{const e=!r;l(e);const s=x();s&&sessionStorage.setItem(s,JSON.stringify(e))},children:[(0,v.jsxs)("div",{className:"fork-badge",children:[(0,v.jsx)("span",{className:"fork-icon",children:"\ud83c\udf74"}),(0,v.jsx)("span",{className:"fork-count",children:c.length})]}),(0,v.jsx)("span",{className:"fork-status-title",children:g?(0,v.jsxs)(v.Fragment,{children:["Fork of"," ",(0,v.jsxs)("span",{className:"parent-repo-link",onClick:e=>{e.stopPropagation(),b(e)},children:[g.owner.login,"/",g.name]}),c.length>0&&(0,v.jsxs)(v.Fragment,{children:[" \u2022 ",c.length," fork",1!==c.length?"s":""]})]}):(0,v.jsxs)(v.Fragment,{children:[c.length," fork",1!==c.length?"s":""," of ",(null===i||void 0===i?void 0:i.name)||"repository"]})}),(0,v.jsx)("button",{className:"fork-toggle-btn","aria-label":r?"Collapse":"Expand",children:(0,v.jsx)("span",{className:"toggle-icon ".concat(r?"expanded":""),children:"\u25bc"})})]}),r&&(0,v.jsxs)("div",{className:"fork-list",children:[g&&(0,v.jsxs)("div",{className:"parent-section",children:[(0,v.jsx)("h4",{className:"section-title",children:"Parent Repository"}),(0,v.jsxs)("div",{className:"fork-item parent-item",onClick:e=>b(e),children:[(0,v.jsx)("div",{className:"fork-avatar",children:(0,v.jsx)("img",{src:g.owner.avatar_url,alt:g.owner.login,className:"fork-owner-avatar"})}),(0,v.jsxs)("div",{className:"fork-info",children:[(0,v.jsxs)("div",{className:"fork-name",children:[(0,v.jsxs)("strong",{children:[g.owner.login,"/",g.name]}),(0,v.jsx)("span",{className:"parent-badge",children:"Parent"})]}),(0,v.jsx)("div",{className:"fork-description",children:g.description||"No description available"}),(0,v.jsxs)("div",{className:"fork-stats",children:[(0,v.jsxs)("span",{className:"fork-stat",children:["\u2b50 ",g.stargazers_count]}),(0,v.jsxs)("span",{className:"fork-stat",children:["\ud83d\udcdd ",g.open_issues_count," issues"]}),(0,v.jsxs)("span",{className:"fork-stat",children:["\ud83d\udcc5 Updated ",new Date(g.updated_at).toLocaleDateString()]})]})]}),(0,v.jsx)("div",{className:"fork-actions",children:(0,v.jsx)("span",{className:"fork-link-hint",children:"Click to view DAK \u2192"})})]})]}),0===c.length?!g&&(0,v.jsx)("div",{className:"no-forks",children:(0,v.jsx)("p",{children:"No forks found for this repository."})}):(0,v.jsxs)("div",{className:"forks-section",children:[g&&(0,v.jsxs)("h4",{className:"section-title",children:["Forks (",c.length,")"]}),(0,v.jsx)("div",{className:"fork-items",children:c.map(e=>(0,v.jsxs)("div",{className:"fork-item",onClick:s=>((e,s)=>{const i=j(s),n={profile:{login:s.owner.login,name:s.owner.login,avatar_url:s.owner.avatar_url,type:s.owner.type},repository:s,selectedBranch:s.default_branch||"main"};(0,N.hX)(e,i,o,n)})(s,e),children:[(0,v.jsx)("div",{className:"fork-avatar",children:(0,v.jsx)("img",{src:e.owner.avatar_url,alt:e.owner.login,className:"fork-owner-avatar"})}),(0,v.jsxs)("div",{className:"fork-info",children:[(0,v.jsx)("div",{className:"fork-name",children:(0,v.jsxs)("strong",{children:[e.owner.login,"/",e.name]})}),(0,v.jsx)("div",{className:"fork-description",children:e.description||"No description available"}),(0,v.jsxs)("div",{className:"fork-stats",children:[(0,v.jsxs)("span",{className:"fork-stat",children:["\u2b50 ",e.stargazers_count]}),(0,v.jsxs)("span",{className:"fork-stat",children:["\ud83d\udcdd ",e.open_issues_count," issues"]}),(0,v.jsxs)("span",{className:"fork-stat",children:["\ud83d\udcc5 Updated ",new Date(e.updated_at).toLocaleDateString()]})]})]}),(0,v.jsx)("div",{className:"fork-actions",children:(0,v.jsx)("span",{className:"fork-link-hint",children:"Click to view DAK \u2192"})})]},e.id))})]})]})]})},C=()=>{const{profile:e,repository:s,branch:i,navigate:l}=(0,a.oc)(),[c,d]=(0,n.useState)(!1),[h,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)("core"),[g,f]=(0,n.useState)({});(0,n.useEffect)(()=>{(async()=>{if(s&&t.A.isAuth())try{const e=await t.A.checkRepositoryWritePermissions(s.owner.login,s.name);d(e)}catch(e){console.error("Error checking repository permissions:",e),d(!1)}else d(!1)})()},[s]),(0,n.useEffect)(()=>{e&&s&&i&&o.default.setBranchContext(e.login,s.name,i)},[e,s,i]),(0,n.useEffect)(()=>{(async()=>{if(s&&t.A.isAuth())try{const e=await t.A.getIssues(s.owner.login,s.name),i={};e.forEach(e=>{e.labels.forEach(e=>{i[e.name]=(i[e.name]||0)+1})}),f(i)}catch(e){console.warn("Could not fetch issue counts:",e)}})()},[s]);const x=n=>{e&&s&&l("/".concat(n,"/").concat(e.login,"/").concat(s.name,"/").concat(i),{state:{profile:e,repository:s,selectedBranch:i}})},j=[{id:"health-interventions",title:"Health Interventions and Recommendations",description:"Clinical guidelines and health intervention specifications that define evidence-based care recommendations",icon:"\ud83d\udcd6",path:"health-interventions",level:"Level 2: Core Components",color:"#0078d4"},{id:"generic-personas",title:"Generic Personas",description:"Standardized user roles and actor definitions that represent different types of healthcare workers and patients",icon:"\ud83d\udc65",path:"actor-editor",level:"Level 2: Core Components",color:"#107c10"},{id:"user-scenarios",title:"User Scenarios",description:"Narrative descriptions of how different personas interact with the system in specific healthcare contexts",icon:"\ud83d\udcdd",path:"user-scenarios",level:"Level 2: Core Components",color:"#881798"},{id:"business-processes",title:"Generic Business Processes and Workflows",description:"BPMN workflows and business process definitions that model clinical workflows and care pathways",icon:"\ud83d\udd04",path:"business-process-selection",level:"Level 2: Core Components",color:"#d13438"},{id:"core-data-elements",title:"Core Data Elements",description:"Essential data structures and terminology needed for clinical data capture and exchange",icon:"\ud83d\uddc3\ufe0f",path:"core-data-dictionary-viewer",level:"Level 2: Core Components",color:"#ff8c00"},{id:"decision-support",title:"Decision-Support Logic",description:"DMN decision tables and clinical decision support rules that encode clinical logic",icon:"\ud83c\udfaf",path:"decision-support-logic",level:"Level 2: Core Components",color:"#00bcf2"},{id:"program-indicators",title:"Program Indicators",description:"Performance indicators and measurement definitions for monitoring and evaluation",icon:"\ud83d\udcca",path:"program-indicators",level:"Level 2: Core Components",color:"#498205"},{id:"functional-requirements",title:"Functional and Non-Functional Requirements",description:"System requirements specifications that define capabilities and constraints",icon:"\u2699\ufe0f",path:"functional-requirements",level:"Level 2: Core Components",color:"#6b69d6"},{id:"testing",title:"Testing",description:"Feature files and test scenarios for validating the DAK implementation",icon:"\ud83e\uddea",path:"testing-viewer",level:"Level 2: Core Components",color:"#8b5cf6"},{id:"terminology",title:"Terminology",description:"Code systems, value sets, and concept maps",icon:"\ud83c\udff7\ufe0f",path:"terminology",level:"Level 3: Technical Implementation",color:"#ff8c00"},{id:"profiles",title:"FHIR Profiles",description:"FHIR resource profiles and constraints",icon:"\ud83d\udd27",path:"profiles",level:"Level 3: Technical Implementation",color:"#00bcf2"},{id:"extensions",title:"FHIR Extensions",description:"Custom FHIR extensions and modifications",icon:"\ud83e\udde9",path:"extensions",level:"Level 3: Technical Implementation",color:"#498205"},{id:"test-data",title:"Test Data & Examples",description:"Sample data and testing resources",icon:"\ud83e\uddea",path:"test-data",level:"Level 3: Technical Implementation",color:"#8b5cf6"},{id:"questionnaire-editor",title:"FHIR Questionnaires",description:"Structured questionnaires and forms for data collection using FHIR standard",icon:"\ud83d\udccb",path:"questionnaire-editor",level:"Level 3: Technical Implementation",color:"#17a2b8"}],y=j.filter(e=>e.level.includes("Level 2: Core Components")),b=j.filter(e=>e.level.includes("Level 3: Technical Implementation"));return(0,v.jsxs)("div",{className:"dak-dashboard",children:[(0,v.jsx)("div",{className:"dashboard-header",children:(0,v.jsxs)("div",{className:"dashboard-title",children:[(0,v.jsxs)("h1",{children:[null===s||void 0===s?void 0:s.name," Dashboard"]}),(0,v.jsxs)("p",{className:"dashboard-subtitle",children:["Digital Adaptation Kit for ",(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.login)]})]})}),(0,v.jsx)(k,{profile:e,repository:s,selectedBranch:i}),s&&(0,v.jsx)(r.A,{repository:s,profile:e,selectedBranch:i,issueCounts:g}),(0,v.jsxs)("div",{className:"tab-navigation",children:[(0,v.jsxs)("button",{className:"tab-button ".concat("core"===m?"active":""),onClick:()=>p("core"),children:[(0,v.jsx)("span",{className:"tab-icon",children:"\u2b50"}),(0,v.jsx)("span",{className:"tab-text",children:"9 Core Components"})]}),(0,v.jsxs)("button",{className:"tab-button ".concat("additional"===m?"active":""),onClick:()=>p("additional"),children:[(0,v.jsx)("span",{className:"tab-icon",children:"\ud83d\udd27"}),(0,v.jsxs)("span",{className:"tab-text",children:["Additional Components (",b.length,")"]})]}),(0,v.jsxs)("button",{className:"tab-button ".concat("publications"===m?"active":""),onClick:()=>p("publications"),children:[(0,v.jsx)("span",{className:"tab-icon",children:"\ud83d\udcda"}),(0,v.jsx)("span",{className:"tab-text",children:"Publications"})]})]}),(0,v.jsxs)("div",{className:"dashboard-content",children:["core"===m&&(0,v.jsx)("div",{className:"components-grid core-components",children:y.map(e=>(0,v.jsxs)("div",{className:"component-card",onClick:()=>x(e.path),children:[(0,v.jsx)("div",{className:"component-icon",children:e.icon}),(0,v.jsx)("h3",{children:e.title}),(0,v.jsx)("p",{children:e.description}),g[e.id]>0&&(0,v.jsxs)("div",{className:"issue-badge",children:[g[e.id]," issues"]})]},e.id))}),"additional"===m&&(0,v.jsx)("div",{className:"components-grid additional-components",children:b.map(e=>(0,v.jsxs)("div",{className:"component-card",onClick:()=>x(e.path),children:[(0,v.jsx)("div",{className:"component-icon",children:e.icon}),(0,v.jsx)("h3",{children:e.title}),(0,v.jsx)("p",{children:e.description}),g[e.id]>0&&(0,v.jsxs)("div",{className:"issue-badge",children:[g[e.id]," issues"]})]},e.id))}),"publications"===m&&(0,v.jsx)("div",{className:"publications-section",children:(0,v.jsx)(S,{repository:s,profile:e,selectedBranch:i,onNavigate:()=>{e&&s&&l("/publications/".concat(e.login,"/").concat(s.name,"/").concat(i),{state:{profile:e,repository:s,selectedBranch:i}})}})})]}),h&&(0,v.jsxs)("div",{className:"permission-dialog",children:[(0,v.jsx)("div",{className:"dialog-overlay",onClick:()=>u(!1)}),(0,v.jsxs)("div",{className:"dialog-content",children:[(0,v.jsx)("h3",{children:"Repository Permissions"}),(0,v.jsxs)("p",{children:["You have ",c?"write":"read-only"," access to this repository.",!c&&" You can view content but cannot make changes."]}),(0,v.jsx)("button",{onClick:()=>u(!1),children:"Got it"})]})]})]})},A=()=>(0,v.jsx)(a.Mx,{pageName:"dashboard",children:(0,v.jsx)(C,{})})}}]);
//# sourceMappingURL=728.4507e0a6.chunk.js.map