{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://worldhealthorganization.github.io/smart-base/StructureDefinition-DAKComponentSource.schema.json",
  "title": "DAK Component Source",
  "description": "Source reference for DAK component data - supports canonical URI, URL (absolute/relative), or inline instance data",
  "type": "object",
  "properties": {
    "canonical": {
      "type": "string",
      "format": "uri",
      "description": "Canonical URI pointing to the component definition"
    },
    "url": {
      "type": "string",
      "description": "URL to retrieve component definition from input/ or external source"
    },
    "instance": {
      "type": "object",
      "description": "Inline instance data"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "addedAt": {
          "type": "string",
          "format": "date-time",
          "description": "When this source was added"
        },
        "addedBy": {
          "type": "string",
          "description": "Who/what added this source"
        },
        "lastValidated": {
          "type": "string",
          "format": "date-time",
          "description": "Last validation timestamp"
        },
        "sourceType": {
          "type": "string",
          "enum": ["canonical", "url-absolute", "url-relative", "inline"],
          "description": "Source type for tracking"
        }
      },
      "description": "Metadata about the source (SGEX-specific)"
    }
  },
  "oneOf": [
    {
      "required": ["canonical"],
      "description": "Canonical URI reference"
    },
    {
      "required": ["url"],
      "description": "URL reference (absolute or relative)"
    },
    {
      "required": ["instance"],
      "description": "Inline instance data"
    }
  ]
}
