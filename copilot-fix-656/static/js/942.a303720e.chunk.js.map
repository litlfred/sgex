{"version":3,"file":"static/js/942.a303720e.chunk.js","mappings":"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","sources":["components/BPMNViewer.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport BpmnViewer from 'bpmn-js/lib/NavigatedViewer';\nimport githubService from '../services/githubService';\nimport { PageLayout, useDAKParams } from './framework';\nimport './BPMNViewer.css';\n\nconst BPMNViewerComponent = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const viewerRef = useRef(null);\n  const containerRef = useRef(null);\n  \n  // Try to get data from framework params first, then fall back to location state\n  const frameworkData = useDAKParams();\n  \n  console.log('BPMNViewer: Framework data received:', frameworkData);\n  console.log('BPMNViewer: Location state:', location.state);\n  \n  const { profile, repository, component, selectedFile, selectedBranch } = location.state || {};\n  \n  // Use framework data if available, otherwise use location state\n  const currentProfile = frameworkData?.profile || profile;\n  const currentRepository = frameworkData?.repository || repository;\n  const currentBranch = frameworkData?.branch || selectedBranch;\n  const assetPath = frameworkData?.asset;\n  \n  console.log('BPMNViewer: Final computed values:', {\n    currentProfile: !!currentProfile,\n    currentRepository: !!currentRepository,\n    currentBranch,\n    assetPath\n  });\n  \n  // If we have asset path from URL, create a selectedFile object\n  const currentSelectedFile = useMemo(() => {\n    return assetPath ? {\n      name: assetPath.split('/').pop(),\n      path: assetPath\n    } : selectedFile;\n  }, [assetPath, selectedFile]);\n  \n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [hasWriteAccess, setHasWriteAccess] = useState(false);\n  const [enhancedFullwidth, setEnhancedFullwidth] = useState(false);\n  const [autoHide, setAutoHide] = useState(false);\n\n  // Check write permissions\n  useEffect(() => {\n    const checkPermissions = async () => {\n      if (currentRepository && currentProfile) {\n        try {\n          // Simple permission check - in real app, this would use githubService\n          const writeAccess = currentProfile.token && currentRepository.permissions?.push;\n          setHasWriteAccess(writeAccess || false);\n        } catch (error) {\n          console.warn('Could not check write permissions:', error);\n          setHasWriteAccess(false);\n        }\n      }\n    };\n\n    checkPermissions();\n  }, [currentRepository, currentProfile]);\n\n  // Load BPMN file content - simplified to avoid race conditions\n  const loadBpmnContent = useCallback(async () => {\n    console.log('🚀 BPMNViewer: loadBpmnContent called with:', {\n      hasViewer: !!viewerRef.current,\n      selectedFile: currentSelectedFile,\n      repository: currentRepository ? {\n        name: currentRepository.name,\n        owner: currentRepository.owner\n      } : null\n    });\n\n    if (!viewerRef.current || !currentSelectedFile || !currentRepository) {\n      console.warn('❌ BPMNViewer: Missing required parameters for loadBpmnContent:', {\n        hasViewer: !!viewerRef.current,\n        hasSelectedFile: !!currentSelectedFile,\n        hasRepository: !!currentRepository\n      });\n      return;\n    }\n\n    // Declare variables outside try block so they're accessible in catch block\n    const owner = currentRepository.owner?.login || currentRepository.full_name.split('/')[0];\n    const repoName = currentRepository.name;\n    const ref = currentBranch || 'main';\n    try {\n      setLoading(true);\n      setError(null);\n\n      console.log('🔍 BPMNViewer: Repository and file analysis:', {\n        repository: {\n          name: currentRepository.name,\n          full_name: currentRepository.full_name,\n          owner: currentRepository.owner,\n          isDemo: currentRepository.isDemo,\n          default_branch: currentRepository.default_branch\n        },\n        selectedFile: {\n          name: currentSelectedFile.name,\n          path: currentSelectedFile.path,\n          size: currentSelectedFile.size\n        },\n        derivedOwner: owner,\n        repoName: repoName,\n        ref: ref,\n        githubServiceAuthenticated: githubService.isAuth()\n      });\n\n      console.log(`📂 BPMNViewer: Preparing to load BPMN content from ${owner}/${repoName}:${currentSelectedFile.path} (ref: ${ref})`);\n      console.log('📋 BPMNViewer: Full selected file object:', JSON.stringify(currentSelectedFile, null, 2));\n\n      let bpmnXml;\n      const isDemo = currentSelectedFile.path?.includes('demo/') || currentSelectedFile.sha?.startsWith('demo-');\n      \n      if (isDemo) {\n        // For demo files, generate BPMN XML locally\n        console.log('🎭 BPMNViewer: Demo file detected, generating BPMN content locally');\n        const processName = currentSelectedFile.name.replace('.bpmn', '').replace(/[-_]/g, ' ');\n        bpmnXml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<bpmn:definitions xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" \n                  xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" \n                  xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" \n                  xmlns:di=\"http://www.omg.org/spec/DD/20100524/DI\" \n                  id=\"Definitions_1\" targetNamespace=\"http://bpmn.io/schema/bpmn\">\n  <bpmn:process id=\"Process_${currentSelectedFile.name.replace(/[^a-zA-Z0-9]/g, '_')}\" isExecutable=\"false\">\n    <bpmn:startEvent id=\"StartEvent_1\" name=\"Start\">\n      <bpmn:outgoing>Flow_1</bpmn:outgoing>\n    </bpmn:startEvent>\n    <bpmn:task id=\"Task_1\" name=\"${processName}\">\n      <bpmn:incoming>Flow_1</bpmn:incoming>\n      <bpmn:outgoing>Flow_2</bpmn:outgoing>\n    </bpmn:task>\n    <bpmn:endEvent id=\"EndEvent_1\" name=\"End\">\n      <bpmn:incoming>Flow_2</bpmn:incoming>\n    </bpmn:endEvent>\n    <bpmn:sequenceFlow id=\"Flow_1\" sourceRef=\"StartEvent_1\" targetRef=\"Task_1\" />\n    <bpmn:sequenceFlow id=\"Flow_2\" sourceRef=\"Task_1\" targetRef=\"EndEvent_1\" />\n  </bpmn:process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_1\">\n    <bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_${currentSelectedFile.name.replace(/[^a-zA-Z0-9]/g, '_')}\">\n      <bpmndi:BPMNShape id=\"StartEvent_1_di\" bpmnElement=\"StartEvent_1\">\n        <dc:Bounds x=\"152\" y=\"82\" width=\"36\" height=\"36\" />\n        <bpmndi:BPMNLabel>\n          <dc:Bounds x=\"158\" y=\"125\" width=\"24\" height=\"14\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Task_1_di\" bpmnElement=\"Task_1\">\n        <dc:Bounds x=\"250\" y=\"60\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"EndEvent_1_di\" bpmnElement=\"EndEvent_1\">\n        <dc:Bounds x=\"402\" y=\"82\" width=\"36\" height=\"36\" />\n        <bpmndi:BPMNLabel>\n          <dc:Bounds x=\"410\" y=\"125\" width=\"20\" height=\"14\" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"Flow_1_di\" bpmnElement=\"Flow_1\">\n        <di:waypoint x=\"188\" y=\"100\" />\n        <di:waypoint x=\"250\" y=\"100\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"Flow_2_di\" bpmnElement=\"Flow_2\">\n        <di:waypoint x=\"350\" y=\"100\" />\n        <di:waypoint x=\"402\" y=\"100\" />\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn:definitions>`;\n      } else {\n        // For real files, use githubService to fetch file content\n        bpmnXml = await githubService.getFileContent(owner, repoName, currentSelectedFile.path, ref);\n      }\n      \n      // Validate BPMN content\n      if (!bpmnXml || !bpmnXml.trim()) {\n        throw new Error('Empty or invalid BPMN file content');\n      }\n      \n      if (!bpmnXml.includes('bpmn:definitions') && !bpmnXml.includes('<definitions')) {\n        throw new Error('File does not appear to contain valid BPMN XML content');\n      }\n\n      \n      // Validate BPMN content\n      if (!bpmnXml || !bpmnXml.trim()) {\n        throw new Error('Empty or invalid BPMN file content');\n      }\n      \n      if (!bpmnXml.includes('bpmn:definitions') && !bpmnXml.includes('<definitions')) {\n        throw new Error('File does not appear to contain valid BPMN XML content');\n      }\n\n      // Import XML into viewer\n      console.log('🎨 BPMNViewer: Importing XML into BPMN viewer...');\n      await viewerRef.current.importXML(bpmnXml);\n      \n      // Center the diagram\n      try {\n        const canvas = viewerRef.current.get('canvas');\n        canvas.zoom('fit-viewport');\n        console.log('✅ BPMNViewer: Successfully loaded and centered BPMN diagram');\n      } catch (centerError) {\n        console.warn('⚠️ BPMNViewer: Could not center diagram:', centerError);\n      }\n      \n      setLoading(false);\n    } catch (err) {\n      console.error('💥 BPMNViewer: Error loading BPMN file:', err);\n      console.error('🔍 BPMNViewer: Full error details:', {\n        message: err.message,\n        status: err.status,\n        stack: err.stack,\n        repository: {\n          owner: owner,\n          name: repoName,\n          ref: ref\n        },\n        file: {\n          name: currentSelectedFile.name,\n          path: currentSelectedFile.path\n        }\n      });\n      \n      // Provide specific error messages\n      if (err.status === 404) {\n        setError('BPMN file not found in the repository.');\n      } else if (err.status === 403) {\n        setError('Access denied. This repository may be private and require authentication.');\n      } else if (err.message.includes('Empty or invalid BPMN')) {\n        setError('The selected file appears to be empty or corrupted.');\n      } else if (err.message.includes('does not appear to contain valid BPMN')) {\n        setError('The selected file does not appear to contain valid BPMN XML content.');\n      } else {\n        setError(`Failed to load BPMN diagram: ${err.message}`);\n      }\n      \n      setLoading(false);\n    }\n  }, [currentSelectedFile, currentRepository, currentBranch]);\n\n  const cleanupContainer = useCallback(() => {\n    if (containerRef.current) {\n      containerRef.current.innerHTML = '';\n      console.log('🧹 BPMNViewer: Container cleaned up');\n    }\n  }, []);\n\n  // Initialize BPMN viewer - simplified to avoid race conditions\n  useEffect(() => {\n    const initializeViewer = () => {\n      console.log('🛠️ BPMNViewer: initializeViewer called with:', {\n        hasContainer: !!containerRef.current,\n        hasViewer: !!viewerRef.current,\n        selectedFile: currentSelectedFile ? currentSelectedFile.name : 'none',\n        containerRefCurrent: containerRef.current,\n        viewerRefCurrent: viewerRef.current\n      });\n\n      if (containerRef.current && !viewerRef.current && currentSelectedFile) {\n        try {\n          // Clean the container before creating a new viewer\n          cleanupContainer();\n          \n          console.log('🔧 BPMNViewer: Creating new BPMN viewer...');\n          console.log('🔧 BPMNViewer: Container element details:', {\n            tagName: containerRef.current.tagName,\n            className: containerRef.current.className,\n            clientWidth: containerRef.current.clientWidth,\n            clientHeight: containerRef.current.clientHeight,\n            innerHTML: containerRef.current.innerHTML.length\n          });\n          \n          viewerRef.current = new BpmnViewer({\n            container: containerRef.current\n          });\n          console.log('✅ BPMNViewer: BPMN viewer initialized successfully');\n          console.log('📞 BPMNViewer: About to call loadBpmnContent()...');\n          \n          loadBpmnContent();\n        } catch (error) {\n          console.error('❌ BPMNViewer: Failed to initialize BPMN viewer:', error);\n          console.error('🔍 BPMNViewer: Initialization error details:', {\n            message: error.message,\n            stack: error.stack,\n            containerExists: !!containerRef.current,\n            containerContent: containerRef.current ? containerRef.current.innerHTML : 'N/A'\n          });\n          \n          // If it's an \"element already exists\" error, try to clean up and retry once\n          if (error.message.includes('already exists')) {\n            console.log('🔄 BPMNViewer: Detected \"element already exists\" error, attempting cleanup and retry...');\n            cleanupContainer();\n            \n            // Wait a bit and try again\n            setTimeout(() => {\n              if (containerRef.current && !viewerRef.current) {\n                try {\n                  console.log('🔄 BPMNViewer: Retrying viewer creation after cleanup...');\n                  viewerRef.current = new BpmnViewer({\n                    container: containerRef.current\n                  });\n                  console.log('✅ BPMNViewer: BPMN viewer initialized successfully on retry');\n                  loadBpmnContent();\n                } catch (retryError) {\n                  console.error('❌ BPMNViewer: Failed to initialize BPMN viewer on retry:', retryError);\n                  setError(`Failed to initialize BPMN viewer: ${retryError.message}`);\n                  setLoading(false);\n                }\n              }\n            }, 100);\n          } else {\n            setError(`Failed to initialize BPMN viewer: ${error.message}`);\n            setLoading(false);\n          }\n        }\n      } else {\n        console.log('⚠️ BPMNViewer: Skipping viewer initialization:', {\n          hasContainer: !!containerRef.current,\n          hasViewer: !!viewerRef.current,\n          hasSelectedFile: !!currentSelectedFile,\n          reason: !containerRef.current ? 'No container' : \n                  viewerRef.current ? 'Viewer already exists' : \n                  !currentSelectedFile ? 'No selected file' : 'Unknown'\n        });\n      }\n    };\n\n    const waitForContainer = (attempt = 0) => {\n      const maxAttempts = 50; // Try for up to 5 seconds (50 * 100ms)\n      \n      if (containerRef.current) {\n        console.log(`✅ BPMNViewer: Container found on attempt ${attempt + 1}`);\n        initializeViewer();\n      } else if (attempt < maxAttempts) {\n        console.log(`⏳ BPMNViewer: Container not ready, attempt ${attempt + 1}/${maxAttempts}, retrying in 100ms...`);\n        setTimeout(() => waitForContainer(attempt + 1), 100);\n      } else {\n        console.error('❌ BPMNViewer: Container never became available after maximum attempts');\n        setError('Failed to initialize BPMN viewer: container not available');\n        setLoading(false);\n      }\n    };\n\n    if (currentSelectedFile) {\n      console.log('⏰ BPMNViewer: Starting container readiness check for selectedFile:', currentSelectedFile.name);\n      waitForContainer();\n    } else {\n      console.log('❌ BPMNViewer: No currentSelectedFile, skipping viewer initialization');\n    }\n\n    return () => {\n      if (viewerRef.current) {\n        try {\n          viewerRef.current.destroy();\n        } catch (error) {\n          console.warn('Warning cleaning up BPMN viewer:', error);\n        }\n        viewerRef.current = null;\n      }\n    };\n  }, [currentSelectedFile, loadBpmnContent, cleanupContainer]);\n\n  const handleEditMode = () => {\n    if (!hasWriteAccess) {\n      alert('You need write permissions to edit BPMN files. Please check your GitHub token permissions.');\n      return;\n    }\n\n    const owner = currentRepository.owner?.login || currentRepository.full_name.split('/')[0];\n    const repoName = currentRepository.name;\n    const path = currentBranch \n      ? `/bpmn-editor/${owner}/${repoName}/${currentBranch}`\n      : `/bpmn-editor/${owner}/${repoName}`;\n\n    navigate(path, {\n      state: {\n        profile: currentProfile,\n        repository: currentRepository,\n        component,\n        selectedFile: currentSelectedFile,\n        selectedBranch: currentBranch,\n        mode: 'edit'\n      }\n    });\n  };\n\n  const handleBackToSelection = () => {\n    navigate('/business-process-selection', {\n      state: {\n        profile: currentProfile,\n        repository: currentRepository,\n        component,\n        selectedBranch: currentBranch\n      }\n    });\n  };\n\n  const handleToggleEnhancedFullwidth = () => {\n    const newState = !enhancedFullwidth;\n    setEnhancedFullwidth(newState);\n    \n    // Add/remove class on body for enhanced fullwidth mode\n    if (newState) {\n      document.body.classList.add('enhanced-fullwidth-active');\n    } else {\n      document.body.classList.remove('enhanced-fullwidth-active');\n    }\n  };\n\n  const handleToggleAutoHide = () => {\n    setAutoHide(!autoHide);\n  };\n\n  // Cleanup effect for enhanced fullwidth\n  useEffect(() => {\n    return () => {\n      // Clean up body class on unmount\n      document.body.classList.remove('enhanced-fullwidth-active');\n    };\n  }, []);\n\n  // Update body class when enhanced fullwidth changes\n  useEffect(() => {\n    if (enhancedFullwidth) {\n      document.body.classList.add('enhanced-fullwidth-active');\n    } else {\n      document.body.classList.remove('enhanced-fullwidth-active');\n    }\n    \n    return () => {\n      document.body.classList.remove('enhanced-fullwidth-active');\n    };\n  }, [enhancedFullwidth]);\n\n  // Handle redirect when data is missing\n  useEffect(() => {\n    // Check if we're on an asset URL pattern (has more than 5 path segments after /sgex)\n    const pathSegments = location.pathname.split('/').filter(segment => segment);\n    const isAssetURL = pathSegments.length > 5; // /sgex/bpmn-viewer/user/repo/branch/asset...\n    \n    // If we're on an asset URL, wait for framework to load before deciding to redirect\n    if (isAssetURL) {\n      // Only redirect if we have both no framework data AND no location state\n      if (!frameworkData?.profile && !frameworkData?.repository && !frameworkData?.asset && \n          !currentProfile && !currentRepository && !currentSelectedFile) {\n        console.log('BPMNViewer: On asset URL but no data available from framework or location state, redirecting to home');\n        navigate('/');\n      }\n    } else {\n      // For non-asset URLs, use the original logic\n      if (!currentProfile || !currentRepository || !currentSelectedFile) {\n        console.log('BPMNViewer: Missing required data, redirecting to home:', {\n          hasProfile: !!currentProfile,\n          hasRepository: !!currentRepository,\n          hasSelectedFile: !!currentSelectedFile\n        });\n        navigate('/');\n      }\n    }\n  }, [currentProfile, currentRepository, currentSelectedFile, frameworkData, location.pathname, navigate]);\n\n  // Don't render the component if we're missing required data, unless we're on asset URL and framework is loading\n  const pathSegments = location.pathname.split('/').filter(segment => segment);\n  const isAssetURL = pathSegments.length > 5;\n  \n  if (!currentProfile || !currentRepository || !currentSelectedFile) {\n    if (isAssetURL && (!frameworkData?.profile || !frameworkData?.repository || !frameworkData?.asset)) {\n      // Framework might still be loading for asset URL\n      return <div>Loading framework data...</div>;\n    }\n    return <div>Loading or redirecting...</div>;\n  }\n\n  return (\n    <PageLayout pageName=\"bpmn-viewer\">\n      <div className={`bpmn-viewer ${enhancedFullwidth ? 'enhanced-fullwidth' : ''} ${autoHide ? 'auto-hide' : ''}`}>\n      <div className=\"viewer-content\">\n\n        <div className=\"viewer-main\">\n          <div className=\"viewer-toolbar\">\n            <div className=\"toolbar-left\">\n              <h3>{currentSelectedFile.name}</h3>\n              <div className=\"artifact-badges\">\n                <span className=\"artifact-badge bpmn\">📊 BPMN</span>\n                <span className=\"dak-component-badge\">🔄 Business Process</span>\n              </div>\n              <span className=\"view-mode-badge\">👁️ Read-Only View</span>\n            </div>\n            <div className=\"toolbar-right\">\n              <button \n                className=\"action-btn secondary\"\n                onClick={handleToggleAutoHide}\n                title=\"Toggle auto-hide headers/footers\"\n              >\n                {autoHide ? '📌' : '👁️'} Auto-Hide\n              </button>\n              <button \n                className=\"action-btn secondary\"\n                onClick={handleToggleEnhancedFullwidth}\n                title=\"Toggle enhanced fullwidth mode\"\n              >\n                {enhancedFullwidth ? '🔳' : '⛶'} Full Container\n              </button>\n              <button \n                className=\"action-btn secondary\"\n                onClick={handleBackToSelection}\n              >\n                ← Back to List\n              </button>\n              {hasWriteAccess && (\n                <button \n                  className=\"action-btn primary\"\n                  onClick={handleEditMode}\n                >\n                  ✏️ Edit\n                </button>\n              )}\n            </div>\n          </div>\n\n          <div className=\"diagram-container\">\n            {loading ? (\n              <div className=\"loading-overlay\">\n                <div className=\"spinner\"></div>\n                <div className=\"loading-info\">\n                  <p>Loading BPMN diagram...</p>\n                  <p className=\"loading-details\">\n                    Fetching {currentSelectedFile.name} from {currentRepository.name}\n                  </p>\n                  <p className=\"loading-hint\">\n                    This may take a few moments for large files or slow connections.\n                  </p>\n                </div>\n              </div>\n            ) : error ? (\n              <div className=\"error-overlay\">\n                <p>❌ {error}</p>\n                <div className=\"error-actions\">\n                  <button \n                    className=\"action-btn secondary\"\n                    onClick={() => loadBpmnContent()}\n                  >\n                    🔄 Retry\n                  </button>\n                  <button \n                    className=\"action-btn secondary\"\n                    onClick={() => navigate('/business-process-selection', {\n                      state: { profile: currentProfile, repository: currentRepository, component, selectedBranch: currentBranch }\n                    })}\n                  >\n                    ← Back to List\n                  </button>\n                </div>\n              </div>\n            ) : null}\n            \n            {/* Always render the BPMN container so the ref can be set */}\n            <div \n              className=\"bpmn-container\" \n              ref={containerRef}\n              style={{ \n                display: loading || error ? 'none' : 'block',\n                width: '100%',\n                height: '100%'\n              }}\n            ></div>\n          </div>\n\n          <div className=\"diagram-info\">\n            <div className=\"condensed-file-info\">\n              <div className=\"condensed-info-item\">\n                <span className=\"label\">📁</span>\n                <span className=\"value\">{currentSelectedFile?.name || 'No file'}</span>\n              </div>\n              <div className=\"condensed-info-item\">\n                <span className=\"label\">📏</span>\n                <span className=\"value\">{currentSelectedFile?.size ? `${(currentSelectedFile.size / 1024).toFixed(1)} KB` : 'N/A'}</span>\n              </div>\n              <div className=\"condensed-info-item\">\n                <span className=\"label\">🌿</span>\n                <span className=\"value\">{currentBranch || 'main'}</span>\n              </div>\n            </div>\n            <div className=\"condensed-view-mode\">\n              <span className={`condensed-access-badge ${hasWriteAccess ? 'write' : 'read'}`}>\n                {hasWriteAccess ? '✏️ Edit' : '👁️ Read'}\n              </span>\n              <span className=\"condensed-info-item\">\n                <span className=\"value\">\n                  {enhancedFullwidth ? '⛶ Full Container' : autoHide ? '👁️ Auto-Hide' : '📺 Fullwidth'}\n                </span>\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      </div>\n    </PageLayout>\n  );\n};\n\nexport default BPMNViewerComponent;"],"names":["BPMNViewerComponent","location","useLocation","navigate","useNavigate","viewerRef","useRef","containerRef","frameworkData","useDAKParams","console","log","state","profile","repository","component","selectedFile","selectedBranch","currentProfile","currentRepository","currentBranch","branch","assetPath","asset","currentSelectedFile","useMemo","name","split","pop","path","loading","setLoading","useState","error","setError","hasWriteAccess","setHasWriteAccess","enhancedFullwidth","setEnhancedFullwidth","autoHide","setAutoHide","useEffect","async","_currentRepository$pe","writeAccess","token","permissions","push","warn","checkPermissions","loadBpmnContent","useCallback","_currentRepository$ow","hasViewer","current","owner","hasSelectedFile","hasRepository","login","full_name","repoName","ref","_currentSelectedFile$","_currentSelectedFile$2","bpmnXml","isDemo","default_branch","size","derivedOwner","githubServiceAuthenticated","githubService","isAuth","concat","JSON","stringify","includes","sha","startsWith","processName","replace","getFileContent","trim","Error","importXML","get","zoom","centerError","err","message","status","stack","file","cleanupContainer","innerHTML","waitForContainer","attempt","arguments","length","undefined","initializeViewer","hasContainer","containerRefCurrent","viewerRefCurrent","tagName","className","clientWidth","clientHeight","BpmnViewer","container","containerExists","containerContent","setTimeout","retryError","reason","destroy","document","body","classList","remove","add","pathname","filter","segment","hasProfile","isAssetURL","_jsx","PageLayout","pageName","children","_jsxs","onClick","handleToggleAutoHide","title","handleToggleEnhancedFullwidth","newState","handleBackToSelection","handleEditMode","_currentRepository$ow2","alert","mode","style","display","width","height","toFixed"],"sourceRoot":""}