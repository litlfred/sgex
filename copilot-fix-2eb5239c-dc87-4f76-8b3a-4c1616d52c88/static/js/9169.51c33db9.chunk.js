"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[9169],{69169:(e,n,t)=>{t.r(n),t.d(n,{default:()=>d});var i=t(9950),a=t(53782),c=t(29166),s=t(46901),r=t(3611),o=t(44414);const l=()=>{var e,n,t;const{repository:l,branch:d,isLoading:h}=(0,a.oc)(),[m,f]=(0,i.useState)([]),[x,p]=(0,i.useState)(null),[j,q]=(0,i.useState)(!0),[v,N]=(0,i.useState)(null),[w,g]=(0,i.useState)(!1),[y,F]=(0,i.useState)(null),[b,S]=(0,i.useState)("functional"),[C,R]=(0,i.useState)(!1),k=(null===l||void 0===l||null===(e=l.owner)||void 0===e?void 0:e.login)||(null===l||void 0===l||null===(n=l.full_name)||void 0===n?void 0:n.split("/")[0]),D=(null===l||void 0===l?void 0:l.name)||(null===l||void 0===l||null===(t=l.full_name)||void 0===t?void 0:t.split("/")[1]);(0,i.useEffect)(()=>{(async()=>{if(k&&D&&d)try{q(!0),N(null);let n=[];try{n=(await s.A.getDirectoryContents(k,D,"input/fsh/requirements",d)).filter(e=>e.name.endsWith(".fsh")&&"file"===e.type).map(e=>({name:e.name,path:e.path,download_url:e.download_url,html_url:e.html_url,sha:e.sha}))}catch(e){if(404!==e.status)throw e}f(n)}catch(e){console.error("Error fetching requirements:",e),N("Failed to load requirements files")}finally{q(!1)}else q(!1)})()},[k,D,d]);const H=async e=>{p(e),g(!0),R(!1);try{const a=await fetch(e.download_url),c=await a.text();F(c);try{var n,t;const i=await(0,r.extractFSHMetadata)(c);null!==(n=i.name)&&void 0!==n&&n.toLowerCase().includes("nonfunctional")||null!==(t=i.name)&&void 0!==t&&t.toLowerCase().includes("non-functional")||e.name.toLowerCase().includes("nonfunctional")||e.name.toLowerCase().includes("non-functional")?S("nonfunctional"):S("functional")}catch(i){console.warn("Could not extract FSH metadata, using filename detection:",i),e.name.toLowerCase().includes("nonfunctional")||e.name.toLowerCase().includes("non-functional")?S("nonfunctional"):S("functional")}}catch(a){console.error("Error loading requirement:",a),N("Failed to load requirement content")}},E=e=>{S(e),R(!0),g(!0),p(null);const n="functional"===e?function(){const e=u("NewFunctionalRequirement","New Functional Requirement","Description of the functional requirement","FunctionalRequirement");return"".concat(e,'\n\n* id = "FR-NEW-001"\n* activity = "').concat((0,r.escapeFSHString)("Description of the activity being performed"),'"\n* actor = Reference(ActorName) // Optional: Reference to actor\n* capability = "').concat((0,r.escapeFSHString)("I want to..."),'" // Optional: Capability statement\n* benefit = "').concat((0,r.escapeFSHString)("So that..."),'" // Optional: Benefit statement\n* classification = #category // Optional: Classification code\n')}():function(){const e=u("NewNonFunctionalRequirement","New Non-Functional Requirement","Description of the non-functional requirement","NonFunctionalRequirement");return"".concat(e,'\n\n* id = "NFR-NEW-001"\n* requirement = "').concat((0,r.escapeFSHString)("Description of the non-functional requirement"),'"\n* category = #performance // Optional: Category (e.g., #performance, #security, #usability)\n* classification = #category // Optional: Classification code\n')}();F(n)};return h||j?(0,o.jsxs)("div",{className:"requirements-editor-loading",children:[(0,o.jsx)("div",{className:"loading-spinner"}),(0,o.jsx)("p",{children:"Loading requirements..."})]}):(0,o.jsx)(a.ox,{title:"Functional and Non-Functional Requirements",subtitle:"System requirements specifications that define capabilities and constraints",children:(0,o.jsxs)("div",{className:"requirements-editor",children:[(0,o.jsx)(c.A,{pageId:"functional-requirements"}),v&&(0,o.jsxs)("div",{className:"error-message",children:[(0,o.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),v]}),(0,o.jsxs)("div",{className:"requirements-layout",children:[(0,o.jsxs)("div",{className:"requirements-sidebar",children:[(0,o.jsxs)("div",{className:"sidebar-header",children:[(0,o.jsxs)("h3",{children:["Requirements (",m.length,")"]}),(0,o.jsxs)("div",{className:"create-buttons",children:[(0,o.jsx)("button",{className:"btn-create-functional",onClick:()=>E("functional"),title:"Create Functional Requirement",children:"+ Functional"}),(0,o.jsx)("button",{className:"btn-create-nonfunctional",onClick:()=>E("nonfunctional"),title:"Create Non-Functional Requirement",children:"+ Non-Functional"})]})]}),(0,o.jsx)("div",{className:"requirements-list",children:0===m.length?(0,o.jsxs)("div",{className:"no-requirements",children:[(0,o.jsx)("p",{children:"No requirements found."}),(0,o.jsx)("p",{children:"Create a new functional or non-functional requirement to get started."})]}):m.map(e=>(0,o.jsxs)("div",{className:"requirement-item ".concat((null===x||void 0===x?void 0:x.path)===e.path?"selected":""),onClick:()=>H(e),onKeyPress:n=>{"Enter"!==n.key&&" "!==n.key||H(e)},role:"button",tabIndex:0,"aria-label":"Select requirement ".concat(e.name),children:[(0,o.jsx)("div",{className:"requirement-icon",children:e.name.toLowerCase().includes("nonfunctional")||e.name.toLowerCase().includes("non-functional")?"\ud83d\udccb":"\u2699\ufe0f"}),(0,o.jsx)("div",{className:"requirement-name",children:e.name})]},e.path))})]}),(0,o.jsx)("div",{className:"requirements-editor-panel",children:w?(0,o.jsxs)("div",{className:"requirement-editor",children:[(0,o.jsxs)("div",{className:"editor-header",children:[(0,o.jsxs)("h3",{children:[C?"New ":"Edit ","functional"===b?"Functional":"Non-Functional"," Requirement"]}),(0,o.jsxs)("div",{className:"editor-actions",children:[!C&&(0,o.jsx)("button",{className:"btn-delete",onClick:async()=>{if(!x)return;if(window.confirm("Are you sure you want to delete ".concat(x.name,"?")))try{await s.A.deleteFile(k,D,x.path,"Delete requirement: ".concat(x.name),d,x.sha),f(m.filter(e=>e.name!==x.name)),g(!1),p(null),F(null)}catch(e){console.error("Error deleting requirement:",e),N("Failed to delete requirement")}},children:"\ud83d\uddd1\ufe0f Delete"}),(0,o.jsx)("button",{className:"btn-cancel",onClick:()=>{g(!1),R(!1),p(null),F(null),S("functional")},children:"Cancel"}),(0,o.jsx)("button",{className:"btn-save",onClick:async()=>{if(y)try{const e=C?"".concat("functional"===b?"Functional":"NonFunctional","Requirement-").concat(Date.now(),".fsh"):x.name,n="input/fsh/requirements/".concat(e),t=C?"Add ".concat(b," requirement: ").concat(e):"Update ".concat(b," requirement: ").concat(e);await s.A.createOrUpdateFile(k,D,n,y,t,d,C?null:x.sha);const i=[...m];C&&i.push({name:e,path:n,download_url:"https://raw.githubusercontent.com/".concat(k,"/").concat(D,"/").concat(d,"/").concat(n),html_url:"https://github.com/".concat(k,"/").concat(D,"/blob/").concat(d,"/").concat(n)}),f(i),g(!1),R(!1),p(null),F(null)}catch(e){console.error("Error saving requirement:",e),N("Failed to save requirement")}},children:"\ud83d\udcbe Save"})]})]}),(0,o.jsx)("div",{className:"editor-content",children:(0,o.jsx)("textarea",{className:"fsh-editor",value:y||"",onChange:e=>F(e.target.value),placeholder:"Enter FSH content...",spellCheck:"false"})}),(0,o.jsxs)("div",{className:"editor-help",children:[(0,o.jsx)("h4",{children:"FSH Format"}),"functional"===b?(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:"Functional requirements should include:"}),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"id"}),": Requirement identifier (required)"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"activity"}),": Description of the activity (required)"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"actor"}),": Reference to actors (optional)"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"capability"}),': "I want" statement (optional)']}),(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"benefit"}),': "So that" statement (optional)']}),(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"classification"}),": Classification codes (optional)"]})]})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:"Non-functional requirements should include:"}),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"id"}),": Requirement identifier (required)"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"requirement"}),": Requirement description (required)"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"category"}),": Category code (optional)"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("code",{children:"classification"}),": Classification codes (optional)"]})]})]})]})]}):(0,o.jsxs)("div",{className:"requirements-welcome",children:[(0,o.jsx)("h2",{children:"Requirements Editor"}),(0,o.jsx)("p",{children:"Select a requirement from the list or create a new one to get started."}),(0,o.jsxs)("div",{className:"requirements-info",children:[(0,o.jsx)("h3",{children:"About Requirements"}),(0,o.jsx)("p",{children:"Requirements define the system capabilities and constraints for a DAK implementation."}),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Functional Requirements:"})," Define what the system must do (capabilities, features, behaviors)"]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Non-Functional Requirements:"})," Define how the system should perform (performance, security, usability)"]})]}),(0,o.jsxs)("p",{children:["Requirements are stored as FSH (FHIR Shorthand) files in ",(0,o.jsx)("code",{children:"input/fsh/requirements/"}),"."]})]})]})})]})]})})};function u(e,n,t,i){const a=[];return a.push("Logical: ".concat(e)),a.push('Title: "'.concat((0,r.escapeFSHString)(n),'"')),a.push('Description: "'.concat((0,r.escapeFSHString)(t),'"')),i&&a.push("Parent: ".concat(i)),a.join("\n")}const d=()=>(0,o.jsx)(a.Mx,{pageName:"functional-requirements",children:(0,o.jsx)(l,{})})}}]);