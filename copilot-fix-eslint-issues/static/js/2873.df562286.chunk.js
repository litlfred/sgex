(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[2873],{295:()=>{},463:()=>{},1344:()=>{},2298:()=>{},2563:()=>{},4119:()=>{},7280:()=>{},9317:()=>{},9468:()=>{},9646:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var o=e(t),r=0;r<o.length;r++)"default"!==o[r]&&s(n,t,o[r]);return i(n,t),n}}();Object.defineProperty(t,"__esModule",{value:!0}),t.FSH_PATTERNS=void 0,t.parseFSHField=p,t.extractFSHMetadata=async function(e){try{const t=await c(),n=t([{content:e,path:"inline.fsh"}]);if(0===n.length)throw new Error("No documents parsed");const s=n[0],i={},o=[...s.profiles.values(),...s.extensions.values(),...s.instances.values(),...s.valueSets.values(),...s.codeSystems.values(),...s.logicals.values()];if(0===o.length)throw new Error("No entities found in document");const r=o[0];return i.id=r.id,i.name=r.name,i.title=r.title,i.description=r.description,"status"in r&&(i.status=r.status),s.profiles.size>0?i.type="Profile":s.extensions.size>0?i.type="Extension":s.instances.size>0?i.type="Instance":s.valueSets.size>0?i.type="ValueSet":s.codeSystems.size>0?i.type="CodeSystem":s.logicals.size>0&&(i.type="Logical"),i}catch(n){return{id:p(e,[t.FSH_PATTERNS.ID,t.FSH_PATTERNS.PROFILE,t.FSH_PATTERNS.INSTANCE]),title:p(e,t.FSH_PATTERNS.TITLE),name:p(e,t.FSH_PATTERNS.NAME),description:p(e,t.FSH_PATTERNS.DESCRIPTION),status:p(e,t.FSH_PATTERNS.STATUS),type:p(e,t.FSH_PATTERNS.TYPE)}}},t.escapeFSHString=l,t.unescapeFSHString=function(e){return e?e.replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\"/g,'"').replace(/\\\\/g,"\\"):""},t.parseFSHLines=function(e){return console.warn("parseFSHLines is deprecated. Consider using SUSHI's importText for proper FSH parsing."),e.split("\n").map(e=>{const t=e.trim();return{indent:e.length-e.trimStart().length,content:e,trimmed:t,isComment:t.startsWith("//"),isBlank:""===t}})},t.generateFSHHeader=function(e){const t=[];t.push("".concat(e.type,": ").concat(e.id)),e.parent&&t.push("Parent: ".concat(e.parent));t.push("Id: ".concat(e.id)),e.title&&t.push('Title: "'.concat(l(e.title),'"'));e.description&&t.push('Description: "'.concat(l(e.description),'"'));e.status&&t.push("* status = #".concat(e.status));return t.join("\n")},t.parseFSHCodeSystem=async function(e){try{const t=await c(),n=t([{content:e,path:"inline.fsh"}]);if(0===n.length)throw new Error("No documents parsed");const s=n[0],i=[],o=s.codeSystems.values().next().value;if(!o||!o.rules)throw new Error("No code system found");for(const e of o.rules)if("code"in e&&"string"===typeof e.code){const t={code:e.code,display:e.display,definition:e.definition,properties:{}};i.push(t)}return i}catch(t){return function(e){const t=[];let n=null;const s=e.split("\n");for(const i of s){const e=i.trim().match(/^\*\s*#(\S+)\s*"([^"]*)"/);e&&(n&&t.push(n),n={code:e[1],display:e[2]||e[1],properties:{}})}n&&t.push(n);return t}(e)}},t.generateFSHCodeSystem=function(e,t,n){const s=[];s.push("CodeSystem: ".concat(e)),s.push('Title: "'.concat(l(t),'"')),s.push("");for(const i of n){if(s.push("* #".concat(i.code,' "').concat(l(i.display||i.code),'"')),i.definition&&s.push('  * definition = "'.concat(l(i.definition),'"')),i.properties)for(const[e,t]of Object.entries(i.properties))"display"!==e&&"definition"!==e&&t&&s.push("  * ".concat(e,' = "').concat(l(String(t)),'"'));s.push("")}return s.join("\n")},t.validateFSHSyntax=function(e){const t=[],n=[];if(!e.trim())return t.push("FSH content is empty"),{isValid:!1,errors:t,warnings:n};/^(Profile|Instance|Extension|ValueSet|CodeSystem|Logical):/m.test(e)||n.push("FSH content should start with Profile:, Instance:, Extension:, ValueSet:, CodeSystem:, or Logical:");const s=e.split("\n");for(let i=0;i<s.length;i++){const e=s[i];if(e.includes('"')){((e.match(/"/g)||[]).length-(e.match(/\\"/g)||[]).length)%2!==0&&t.push("Line ".concat(i+1,": Unmatched quotes"))}}return{isValid:0===t.length,errors:t,warnings:n}};let r=null,a=null;async function c(){return r||(a||(a=(async()=>{try{const e=await Promise.resolve().then(()=>o(n(75508)));return r=e.sushiImport.importText,r}catch(e){throw console.warn("Failed to load fsh-sushi module:",e),e}})()),a)}function p(e,t){const n=Array.isArray(t)?t:[t];for(const i of n){const t=e.match(i);var s;if(t)return(null===(s=t[1])||void 0===s?void 0:s.trim())||void 0}}function l(e){return e?e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):""}t.FSH_PATTERNS={PROFILE:/^Profile:\s*(.+)$/m,INSTANCE:/^Instance:\s*(\w+)/m,PARENT:/^Parent:\s*(.+)$/m,ID:/^Id:\s*(.+)$/m,TITLE:[/^\s*Title:\s*"([^"]+)"/m,/\*\s*title\s*=\s*"([^"]+)"/,/^Instance:\s*\w+\s*"([^"]+)"/m],NAME:[/\*\s*name\s*=\s*"([^"]+)"/,/^\s*Name:\s*"?([^"\n]+)"?/m],DESCRIPTION:[/^\s*Description:\s*"([^"]+)"/m,/\*\s*description\s*=\s*"([^"]+)"/,/\/\/\s*(.+)/],STATUS:[/\*\s*status\s*=\s*#(\w+)/,/^\s*Status:\s*#?(\w+)/m],TYPE:/type\s*=\s*#(\w+)/,VALUE_CODE:/valueCode\s*=\s*#(\w+)/,VALUE_STRING:/valueString\s*=\s*"([^"]+)"/,EXTENSION:/\*\s*extension\[([^\]]+)\]/,CONCEPT:/^\*\s*#(\S+)/}},10074:()=>{},10198:()=>{},10633:()=>{},11417:()=>{},12350:()=>{},13251:()=>{},13481:()=>{},14150:()=>{},14899:()=>{},15251:()=>{},15298:()=>{},15340:()=>{},17586:()=>{},17597:()=>{},22248:()=>{},22657:()=>{},26065:()=>{},27349:()=>{},28362:()=>{},28379:()=>{},28673:()=>{},29685:()=>{},30205:()=>{},30946:()=>{},33424:()=>{},33594:()=>{},33849:()=>{},34708:(e,t,n)=>{"use strict";var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decisionTableCore=t.DecisionTableCore=void 0;const i=n(62600),o=n(9646);class r extends i.BaseDAKComponent{constructor(e){super(e||(0,i.createEmptyComponent)("decision-table",{concepts:[]}))}getSchema(){return{type:"object",required:["id","name","concepts"],properties:{id:{type:"string"},name:{type:"string"},description:{type:"string"},concepts:{type:"array",items:{type:"object",required:["code"],properties:{code:{type:"string"},display:{type:"string"},definition:{type:"string"},properties:{type:"object"}}}}}}}generateFSH(){const e=this.component;return(0,o.generateFSHCodeSystem)(e.id,e.name,e.concepts)}async parseFSH(e){const t=await(0,o.extractFSHMetadata)(e),n=(await(0,o.parseFSHCodeSystem)(e)).map(e=>{var t,n,i;return s({Code:e.code,Display:e.display||e.code,Definition:e.definition||"",Tables:(null===(t=e.properties)||void 0===t?void 0:t.Tables)||"",Tabs:(null===(n=e.properties)||void 0===n?void 0:n.Tabs)||"",CQL:(null===(i=e.properties)||void 0===i?void 0:i.CQL)||""},e)});return{id:t.id||"",name:t.title||t.name||"",description:t.description||"",type:"decision-table",concepts:n}}validate(){const e=this.component,t=[],n=[],s=this.validateRequiredFields(["id","name"]),o=this.validateIdFormat(e.id);if(e.concepts&&0!==e.concepts.length||n.push({code:"NO_CONCEPTS",message:"Decision table should have at least one concept/variable",component:"decision-table"}),e.concepts){const s=new Set;for(let i=0;i<e.concepts.length;i++){const o=e.concepts[i];o.Code||o.code||t.push({code:"MISSING_CODE",message:"Concept ".concat(i," is missing code"),component:"decision-table"});const r=o.Code||o.code;r&&s.has(r)&&t.push({code:"DUPLICATE_CODE",message:"Duplicate concept code: ".concat(r),component:"decision-table"}),s.add(r),o.Display||o.display||n.push({code:"MISSING_DISPLAY",message:"Concept ".concat(r," is missing display text"),component:"decision-table"})}}return(0,i.mergeValidationResults)(s,o,{isValid:0===t.length,errors:t,warnings:n})}static createEmpty(){return(0,i.createEmptyComponent)("decision-table",{concepts:[]})}static async parseFSHCodeSystem(e){return(await(0,o.parseFSHCodeSystem)(e)).map(e=>{var t,n,i;return s({Code:e.code,Display:e.display||e.code,Definition:e.definition||"",Tables:(null===(t=e.properties)||void 0===t?void 0:t.Tables)||"",Tabs:(null===(n=e.properties)||void 0===n?void 0:n.Tabs)||"",CQL:(null===(i=e.properties)||void 0===i?void 0:i.CQL)||""},e)})}static fromConcepts(e,t,n){return{id:e,name:t,description:"",type:"decision-table",concepts:n}}getVariables(){return this.component.concepts}addVariable(e){this.component.concepts.push(e)}removeVariable(e){this.component.concepts=this.component.concepts.filter(t=>t.Code!==e&&t.code!==e)}findVariable(e){return this.component.concepts.find(t=>t.Code===e||t.code===e)}updateVariable(e,t){const n=this.component.concepts.findIndex(t=>t.Code===e||t.code===e);n>=0&&(this.component.concepts[n]=s(s({},this.component.concepts[n]),t))}}t.DecisionTableCore=r,t.decisionTableCore=new r},35117:()=>{},35460:()=>{},36308:()=>{},38179:()=>{},39039:()=>{},39234:()=>{},39390:()=>{},39978:()=>{},40134:()=>{},40763:()=>{},41770:()=>{},42173:()=>{},44010:()=>{},45201:()=>{},46490:()=>{},47494:()=>{},47559:()=>{},48370:()=>{},49993:()=>{},50719:(e,t,n)=>{"use strict";n.r(t),module.exports={}},51273:()=>{},53748:()=>{},53876:()=>{},54320:()=>{},59452:()=>{},60183:()=>{},60764:()=>{},61504:()=>{},62600:(e,t,n)=>{"use strict";var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DAKComponentFactory=t.StorageMixin=t.BaseDAKComponent=void 0,t.mergeValidationResults=function(){const e=[],t=[];for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];for(const o of s)e.push(...o.errors),t.push(...o.warnings);return{isValid:0===e.length,errors:e,warnings:t}},t.createEmptyComponent=function(e,t){return s({id:"",name:"",description:"",type:e,metadata:{}},t)};const i=n(9646);t.BaseDAKComponent=class{constructor(e){this.component=e}getData(){return this.component}updateData(e){this.component=s(s({},this.component),e)}validateRequiredFields(e){const t=[];for(const n of e){const e=this.component[n];void 0!==e&&null!==e&&""!==e||t.push({code:"MISSING_REQUIRED_FIELD",message:"Field '".concat(String(n),"' is required"),component:this.component.type})}return{isValid:0===t.length,errors:t,warnings:[]}}validateIdFormat(e){const t=[];return/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(e)||t.push({code:"INVALID_ID_FORMAT",message:"ID must start with a letter and contain only letters, numbers, hyphens, and underscores",component:this.component.type}),{isValid:0===t.length,errors:t,warnings:[]}}validateGeneratedFSH(){const e=[],t=[];try{const n=this.generateFSH(),s=(0,i.validateFSHSyntax)(n);s.isValid||e.push(...s.errors.map(e=>({code:"FSH_SYNTAX_ERROR",message:e,component:this.component.type}))),t.push(...s.warnings.map(e=>({code:"FSH_SYNTAX_WARNING",message:e,component:this.component.type})))}catch(n){e.push({code:"FSH_GENERATION_ERROR",message:"Failed to generate FSH: ".concat(n),component:this.component.type})}return{isValid:0===e.length,errors:e,warnings:t}}toJSON(){return JSON.stringify(this.component,null,2)}fromJSON(e){return JSON.parse(e)}clone(){return new(0,this.constructor)(s({},this.component))}};t.StorageMixin=class{constructor(e){this.storage=e}async load(e){return await this.storage.load(e)}async save(e,t){await this.storage.save(e,t)}async delete(e){await this.storage.delete(e)}async list(){return await this.storage.list()}};t.DAKComponentFactory=class{constructor(){this.componentTypes=new Map}register(e,t){this.componentTypes.set(e,t)}create(e,t){const n=this.componentTypes.get(e);if(!n)throw new Error("Unknown component type: ".concat(e));return new n(t)}getRegisteredTypes(){return Array.from(this.componentTypes.keys())}}},64333:()=>{},64519:()=>{},64738:(e,t,n)=>{"use strict";var s=n(12897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.actorDefinitionCore=t.ActorDefinitionCore=void 0;const i=n(62600),o=n(9646);class r extends i.BaseDAKComponent{constructor(e){super(e||(0,i.createEmptyComponent)("actor",{type:"human",responsibilities:[]}))}loadSchema(){return this.getSchema()}getSchema(){try{return{type:"object",required:["id","name","description","type"],properties:{id:{type:"string"},name:{type:"string"},description:{type:"string"},type:{type:"string",enum:["human","system"]},responsibilities:{type:"array",items:{type:"string"}},skills:{type:"array",items:{type:"string"}},systems:{type:"array",items:{type:"string"}}}}}catch(e){throw new Error("Failed to load actor definition schema: ".concat(e))}}generateFSH(){const e=this.component;let t=(0,o.generateFSHHeader)({type:"Profile",id:e.id,parent:"Person",title:e.name,description:e.description});return t+="\n\n","human"===e.type?(t+="* active = true\n",e.skills&&e.skills.length>0&&(t+="* extension contains\n",t+="    PersonSkillExtension named skills 0..*\n")):"system"===e.type&&(t+="* active = true\n",e.systems&&e.systems.length>0&&(t+="* extension contains\n",t+="    SystemCapabilityExtension named capabilities 0..*\n")),e.responsibilities&&e.responsibilities.length>0&&(t+="* extension contains\n",t+="    ResponsibilityExtension named responsibilities 0..*\n"),t}async parseFSH(e){const t=await(0,o.extractFSHMetadata)(e);return{id:t.id||"",name:t.title||t.name||"",description:t.description||"",type:e.includes("SystemCapabilityExtension")?"system":"human",responsibilities:[],skills:[],systems:[]}}validate(){const e=this.component,t=[],n=[],s=this.validateRequiredFields(["id","name","description","type"]),o=this.validateIdFormat(e.id);return e.type&&!["human","system"].includes(e.type)&&t.push({code:"INVALID_ACTOR_TYPE",message:'Actor type must be either "human" or "system"',component:"actor"}),e.responsibilities&&0!==e.responsibilities.length||n.push({code:"MISSING_RESPONSIBILITIES",message:"Actor should have at least one responsibility defined",component:"actor"}),"human"===e.type&&e.systems&&e.systems.length>0&&n.push({code:"HUMAN_WITH_SYSTEMS",message:"Human actors typically should not have system capabilities",component:"actor"}),"system"===e.type&&e.skills&&e.skills.length>0&&n.push({code:"SYSTEM_WITH_SKILLS",message:"System actors typically should not have human skills",component:"actor"}),(0,i.mergeValidationResults)(s,o,{isValid:0===t.length,errors:t,warnings:n})}validateActorDefinition(e){const t=this.component;this.component=e;const n=this.validate();return this.component=t,n}static createEmpty(){return(0,i.createEmptyComponent)("actor",{type:"human",responsibilities:[]})}static getTemplates(){return[{id:"healthcare-worker",name:"Healthcare Worker",description:"A healthcare professional providing direct patient care",type:"human",responsibilities:["Provide patient care","Document clinical observations","Follow clinical protocols"],skills:["Clinical assessment","Patient communication","Documentation"]},{id:"data-manager",name:"Data Manager",description:"Professional responsible for health data management",type:"human",responsibilities:["Manage health data","Ensure data quality","Generate reports"],skills:["Data analysis","Report generation","Quality assurance"]},{id:"clinical-decision-support-system",name:"Clinical Decision Support System",description:"Automated system providing clinical recommendations",type:"system",responsibilities:["Analyze patient data","Provide clinical recommendations","Alert on critical conditions"],systems:["Rule engine","Alert system","Integration interface"]},{id:"health-information-system",name:"Health Information System",description:"System for managing health information and records",type:"system",responsibilities:["Store patient records","Manage appointments","Generate reports"],systems:["Database management","User interface","Reporting engine"]}]}static fromTemplate(e,t){const n=r.getTemplates().find(t=>t.id===e);if(!n)throw new Error("Actor template not found: ".concat(e));return s(s({},n),t)}}t.ActorDefinitionCore=r,t.actorDefinitionCore=new r},65070:()=>{},66109:()=>{},67920:()=>{},70218:()=>{},70824:()=>{},71014:()=>{},72692:()=>{},74701:()=>{},74783:()=>{},75370:()=>{},75700:()=>{},76579:()=>{},76955:()=>{},79268:()=>{},79838:()=>{},80712:()=>{},81006:()=>{},81527:()=>{},82340:()=>{},82684:()=>{},82876:()=>{},84198:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.questionnaireDefinitionCore=t.QuestionnaireDefinitionCore=void 0;const s=n(62600),i=n(9646);class o extends s.BaseDAKComponent{constructor(e){super(e||(0,s.createEmptyComponent)("questionnaire",{status:"draft",resourceType:"Questionnaire"}))}getSchema(){return{type:"object",required:["id","name","status"],properties:{id:{type:"string"},name:{type:"string"},title:{type:"string"},description:{type:"string"},status:{type:"string",enum:["draft","active","retired","unknown"]},version:{type:"string"},url:{type:"string"},item:{type:"array",items:{type:"object",required:["linkId","text","type"],properties:{linkId:{type:"string"},text:{type:"string"},type:{type:"string"},required:{type:"boolean"},repeats:{type:"boolean"}}}}}}}generateFSH(){const e=this.component;let t=(0,i.generateFSHHeader)({type:"Instance",id:e.id,title:e.name,description:e.description});return t+="\nInstanceOf: Questionnaire\n",t+="Usage: #definition\n",e.status&&(t+="* status = #".concat(e.status,"\n")),e.version&&(t+='* version = "'.concat((0,i.escapeFSHString)(e.version),'"\n')),e.title&&(t+='* title = "'.concat((0,i.escapeFSHString)(e.title||e.name),'"\n')),e.description&&(t+='* description = "'.concat((0,i.escapeFSHString)(e.description),'"\n')),e.item&&e.item.length>0&&(t+=this.generateItemsFSH(e.item,0)),t}generateItemsFSH(e,t){let n="";const s="  ".repeat(t);for(let o=0;o<e.length;o++){const r=e[o];n+="".concat(s,"* item[").concat(o,'].linkId = "').concat((0,i.escapeFSHString)(r.linkId),'"\n'),n+="".concat(s,"* item[").concat(o,'].text = "').concat((0,i.escapeFSHString)(r.text),'"\n'),n+="".concat(s,"* item[").concat(o,"].type = #").concat(r.type,"\n"),void 0!==r.required&&(n+="".concat(s,"* item[").concat(o,"].required = ").concat(r.required,"\n")),void 0!==r.repeats&&(n+="".concat(s,"* item[").concat(o,"].repeats = ").concat(r.repeats,"\n")),r.item&&r.item.length>0&&(n+=this.generateItemsFSH(r.item,t+1))}return n}async parseFSH(e){const t=await(0,i.extractFSHMetadata)(e),n={id:t.id||"",name:t.name||t.title||"",description:t.description||"",title:t.title||t.name||"",status:t.status||"draft",type:"questionnaire",resourceType:"Questionnaire",item:[]},s=e.matchAll(/\*\s*item\[(\d+)\]\.linkId\s*=\s*"([^"]+)"/g);for(const i of s){const e=parseInt(i[1]),t=i[2];n.item[e]?n.item[e].linkId=t:n.item[e]={linkId:t,text:"",type:"string"}}return n}validate(){const e=this.component,t=[],n=[],i=this.validateRequiredFields(["id","name","status"]),o=this.validateIdFormat(e.id);if(["draft","active","retired","unknown"].includes(e.status)||t.push({code:"INVALID_STATUS",message:"Status must be one of: draft, active, retired, unknown",component:"questionnaire"}),e.item&&0!==e.item.length||n.push({code:"NO_ITEMS",message:"Questionnaire should have at least one item",component:"questionnaire"}),e.item)for(let s=0;s<e.item.length;s++){const n=e.item[s];n.linkId||t.push({code:"MISSING_LINK_ID",message:"Item ".concat(s," is missing linkId"),component:"questionnaire"}),n.text||t.push({code:"MISSING_TEXT",message:"Item ".concat(s," is missing text"),component:"questionnaire"}),n.type||t.push({code:"MISSING_TYPE",message:"Item ".concat(s," is missing type"),component:"questionnaire"})}return(0,s.mergeValidationResults)(i,o,{isValid:0===t.length,errors:t,warnings:n})}static createEmpty(){return(0,s.createEmptyComponent)("questionnaire",{status:"draft",resourceType:"Questionnaire",item:[]})}static async extractMetadata(e){return await(0,i.extractFSHMetadata)(e)}}t.QuestionnaireDefinitionCore=o,t.questionnaireDefinitionCore=new o},85891:()=>{},86664:()=>{},87765:()=>{},88423:()=>{},88855:()=>{},89556:()=>{},89675:()=>{},90016:()=>{},92586:()=>{},94307:()=>{},94553:()=>{},96702:()=>{},96739:()=>{},98516:()=>{},98594:()=>{},99777:()=>{}}]);