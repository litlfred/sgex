"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[665],{1932:(e,s,n)=>{n.d(s,{hX:()=>i});const i=function(e,s,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((e=>!!(null!==e&&void 0!==e&&e.ctrlKey||null!==e&&void 0!==e&&e.metaKey))(e)){const e=(e=>{const s="/sgex/copilot-fix-831",n=window.location.origin,i=e.startsWith("/")?e.slice(1):e;if(!s)return"".concat(n,"/").concat(i);const a=s.endsWith("/")?s:s+"/";return"".concat(n).concat(a).concat(i)})(s);window.open(e,"_blank","noopener,noreferrer")}else i?n(s,{state:i}):n(s)}},16665:(e,s,n)=>{n.r(s),n.d(s,{default:()=>h});var i=n(89379),a=n(9950),t=n(91018),l=n(29946),c=n(51635),o=n(1932),r=n(44414);const d=()=>{const e=(0,t.Zp)(),{profile:s,repository:n,branch:d}=(0,c.oc)(),h=null===s||void 0===s?void 0:s.login,u=null===n||void 0===n?void 0:n.name,[m,p]=(0,a.useState)([]),[x,j]=(0,a.useState)(!0),[f,v]=(0,a.useState)(null),[b,N]=(0,a.useState)(null),[g,y]=(0,a.useState)(""),[k,w]=(0,a.useState)(!1),[C,S]=(0,a.useState)([]),[D,H]=(0,a.useState)(!1),[F,_]=(0,a.useState)(null),[q,A]=(0,a.useState)([]),[I,R]=(0,a.useState)(""),[K,P]=(0,a.useState)(!1),[E,V]=(0,a.useState)(!1),[G,Q]=(0,a.useState)([]),[L,T]=(0,a.useState)(!1),W=(0,a.useCallback)(e=>{var s;const i=h||(null===n||void 0===n||null===(s=n.owner)||void 0===s?void 0:s.login)||(null===n||void 0===n?void 0:n.full_name.split("/")[0]),a=u||(null===n||void 0===n?void 0:n.name);return e===((null===n||void 0===n?void 0:n.default_branch)||"main")?"https://".concat(i,".github.io/").concat(a):"https://".concat(i,".github.io/").concat(a,"/branches/").concat(e)},[h,n,u]),B=(0,a.useCallback)(e=>{const s=[],n=e.split("\n");for(let i=0;i<n.length;i++){const e=n[i].trim().match(/^\*\s*#([^\s"]+)\s*"([^"]+)"\s*"([^"]+)"/);if(e){const[,n,i,a]=e;s.push({code:n.trim(),display:i.trim(),definition:a.trim()})}}return s},[]);(0,a.useEffect)(()=>{(async()=>{var e;const s=n,a=d,t=h||(null===n||void 0===n||null===(e=n.owner)||void 0===e?void 0:e.login)||(null===n||void 0===n?void 0:n.full_name.split("/")[0]),c=u||(null===n||void 0===n?void 0:n.name);if(!s&&(!t||!c)||!a)return void j(!1);try{j(!0),v(null);try{const e=(await l.A.getDirectoryContents(t,c,"input/fsh",a)).filter(e=>e.name.endsWith(".fsh")&&"file"===e.type).map(e=>({name:e.name,path:e.path,download_url:e.download_url,html_url:e.html_url}));p(e)}catch(o){if(404!==o.status)throw o;p([])}try{const e=(await l.A.getDirectoryContents(t,c,"input/fsh/codesystems",a)).find(e=>"DAK.fsh"===e.name&&"file"===e.type);if(e){_({name:e.name,path:e.path,download_url:e.download_url,html_url:e.html_url});try{const s=await l.A.getFileContent(t,c,e.path,a),n=B(s);A(n)}catch(r){console.warn("Could not parse DAK.fsh content:",r),A([])}}else _(null),A([])}catch(o){404===o.status?(_(null),A([])):(console.warn("Error fetching DAK.fsh:",o),_(null),A([]))}const e=(await l.A.getBranches(t,c)).map(e=>e.name);S(e.filter(e=>"gh-pages"!==e));const s=e.includes("gh-pages");if(H(s),s){const e=W(a),s=await(async e=>{try{V(!0);const s="".concat(e,"/CodeSystem-DAK.html");return(await fetch(s,{method:"HEAD"})).ok}catch(f){return console.warn("Error checking published DAK:",f),!1}finally{V(!1)}})(e);P(s)}else P(!1);await(async(e,s,n)=>{try{T(!0);const a=[],t=[{path:"input/questionnaires",extensions:[".json"],type:"JSON"},{path:"input/fsh/questionnaires",extensions:[".fsh"],type:"FSH"}];for(const c of t)try{const t=(await l.A.getDirectoryContents(e,s,c.path,n)).filter(e=>"file"===e.type&&c.extensions.some(s=>e.name.endsWith(s))).map(e=>{const s=c.extensions.find(s=>e.name.endsWith(s));return(0,i.A)((0,i.A)({},e),{},{displayName:e.name.replace(s,""),fullPath:"".concat(c.path,"/").concat(e.name),fileType:c.type,extension:s})});a.push(...t)}catch(f){404!==f.status&&console.warn("Error loading questionnaires from ".concat(c.path,":"),f)}Q(a)}catch(f){console.error("Error loading questionnaires:",f),Q([])}finally{T(!1)}})(t,c,a)}catch(o){console.error("Error fetching FSH files:",o),v("Failed to load Core Data Dictionary files. Please check repository access.")}finally{j(!1)}})()},[n,d,h,u,W,B]);const M=async e=>{try{var s;N(e),y("Loading..."),w(!0);const i=h||(null===n||void 0===n||null===(s=n.owner)||void 0===s?void 0:s.login)||(null===n||void 0===n?void 0:n.full_name.split("/")[0]),a=u||(null===n||void 0===n?void 0:n.name),t=d,c=await l.A.getFileContent(i,a,e.path,t);y(c)}catch(i){console.error("Error fetching file content:",i),y("Error loading file content.")}},O=()=>{w(!1),N(null),y("")};return s&&n?x?(0,r.jsx)("div",{className:"core-data-dictionary-viewer loading-state",children:(0,r.jsxs)("div",{className:"loading-content",children:[(0,r.jsx)("h2",{children:"Loading Core Data Dictionary..."}),(0,r.jsx)("p",{children:"Fetching FHIR FSH files and repository data..."})]})}):(0,r.jsxs)("div",{className:"core-data-dictionary-viewer",children:[(0,r.jsxs)("div",{className:"viewer-header",children:[(0,r.jsxs)("div",{className:"who-branding",children:[(0,r.jsx)("h1",{onClick:()=>{e("/")},className:"clickable-title",children:"SGEX Workbench"}),(0,r.jsx)("p",{className:"subtitle",children:"WHO SMART Guidelines Exchange"})]}),(0,r.jsxs)("div",{className:"context-info",children:[(0,r.jsx)("img",{src:(null===s||void 0===s?void 0:s.avatar_url)||"https://github.com/".concat(h||(null===s||void 0===s?void 0:s.login),".png"),alt:"Profile",className:"context-avatar"}),(0,r.jsxs)("div",{className:"context-details",children:[(0,r.jsx)("span",{className:"context-repo",children:u||(null===n||void 0===n?void 0:n.name)}),(0,r.jsx)("span",{className:"context-component",children:"Core Data Dictionary"})]})]})]}),(0,r.jsxs)("div",{className:"viewer-content",children:[(0,r.jsxs)("div",{className:"breadcrumb",children:[(0,r.jsx)("button",{onClick:()=>e("/"),className:"breadcrumb-link",children:"Select Profile"}),(0,r.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,r.jsx)("button",{onClick:()=>e("/dak-selection/".concat(s.login),{state:{profile:s}}),className:"breadcrumb-link",children:"Select Repository"}),(0,r.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,r.jsx)("button",{onClick:()=>{if(h&&u){const s=d?"/dashboard/".concat(h,"/").concat(u,"/").concat(d):"/dashboard/".concat(h,"/").concat(u);e(s)}else e("/dashboard",{state:{profile:s,repository:n,branch:d}})},className:"breadcrumb-link",children:"DAK Components"}),(0,r.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,r.jsx)("span",{className:"breadcrumb-current",children:"Core Data Dictionary"})]}),(0,r.jsxs)("div",{className:"viewer-main",children:[(0,r.jsxs)("div",{className:"component-intro",children:[(0,r.jsx)("div",{className:"component-icon",style:{color:"#0078d4"},children:"\ud83d\udcca"}),(0,r.jsxs)("div",{className:"intro-content",children:[(0,r.jsx)("h2",{children:"Core Data Dictionary Viewer"}),(0,r.jsx)("p",{children:"View canonical representations of Component 2 Core Data Dictionary including FHIR CodeSystems, ValueSets, and ConceptMaps stored in FSH format."}),d&&(0,r.jsxs)("div",{className:"branch-info",children:[(0,r.jsx)("strong",{children:"Branch:"})," ",(0,r.jsx)("code",{children:d})]})]})]}),f&&(0,r.jsxs)("div",{className:"error-message",children:[(0,r.jsx)("h3",{children:"\u26a0\ufe0f Error"}),(0,r.jsx)("p",{children:f})]}),(0,r.jsx)("div",{className:"documentation-section",children:(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:"https://smart.who.int/ig-starter-kit/v1.0.0/",target:"_blank",rel:"noopener noreferrer",className:"documentation-link",children:"\ud83d\udcda WHO IG Starter Kit Documentation \u2197"})})}),(0,r.jsxs)("div",{className:"two-column-layout",children:[(0,r.jsxs)("div",{className:"section standard-dictionaries-section left-column",children:[(0,r.jsx)("h3",{children:"Standard Dictionaries"}),(0,r.jsxs)("div",{className:"subsection",children:[(0,r.jsx)("h4",{children:"Code Systems"}),F&&(0,r.jsxs)("div",{className:"dak-source-section",children:[(0,r.jsx)("h5",{children:"DAK Source File (FSH)"}),(0,r.jsxs)("div",{className:"dak-source-links",children:[(0,r.jsx)("button",{className:"action-btn primary",onClick:()=>M(F),title:"View DAK.fsh source code with syntax highlighting",children:"\ud83d\udcc4 View Source"}),(0,r.jsx)("a",{href:F.html_url,target:"_blank",rel:"noopener noreferrer",className:"action-btn secondary",title:"View DAK.fsh source on GitHub",children:"\ud83d\udd17 GitHub Source \u2197"})]})]}),D?(0,r.jsxs)("div",{className:"dak-published-section",children:[(0,r.jsx)("h5",{children:"Published CodeSystem"}),E?(0,r.jsx)("p",{className:"checking-published",children:"Checking published version..."}):K?(0,r.jsx)("div",{className:"dictionary-links",children:(0,r.jsx)("a",{href:"".concat(W(d),"/CodeSystem-DAK.html"),target:"_blank",rel:"noopener noreferrer",className:"dictionary-link primary",children:"\ud83d\udcca View Published Core Data Dictionary (DAK) \u2197"})}):(0,r.jsxs)("div",{className:"unpublished-dak",children:[(0,r.jsx)("span",{className:"disabled-link",children:"Core Data Dictionary (DAK)"}),(0,r.jsx)("p",{className:"unpublished-note",children:"\u26a0\ufe0f The published version is not yet available. The CodeSystem-DAK.html file has not been published to GitHub Pages."})]})]}):(0,r.jsx)("p",{className:"no-publication-note",children:"Published CodeSystems will be available once GitHub Pages is configured."})]}),q.length>0&&(0,r.jsxs)("div",{className:"subsection",children:[(0,r.jsxs)("h4",{children:["DAK Concepts (",q.length," total)"]}),(0,r.jsx)("div",{className:"dak-table-controls",children:(0,r.jsx)("input",{type:"text",placeholder:"Search concepts...",value:I,onChange:e=>R(e.target.value),className:"search-input"})}),(0,r.jsx)("div",{className:"dak-concepts-table",children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Code"}),(0,r.jsx)("th",{children:"Display"}),(0,r.jsx)("th",{children:"Definition"})]})}),(0,r.jsx)("tbody",{children:q.filter(e=>!I||e.code.toLowerCase().includes(I.toLowerCase())||e.display.toLowerCase().includes(I.toLowerCase())||e.definition.toLowerCase().includes(I.toLowerCase())).map((e,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"concept-code",children:e.code}),(0,r.jsx)("td",{className:"concept-display",children:e.display}),(0,r.jsx)("td",{className:"concept-definition",children:e.definition})]},s))})]})})]}),(0,r.jsxs)("div",{className:"subsection",children:[(0,r.jsx)("h4",{children:"Value Sets"}),(0,r.jsxs)("div",{className:"placeholder-links",children:[(0,r.jsx)("span",{className:"placeholder-link",children:"Actors (Coming Soon)"}),(0,r.jsx)("span",{className:"placeholder-link",children:"Workflows (Coming Soon)"}),(0,r.jsx)("span",{className:"placeholder-link",children:"Decision Tables (Coming Soon)"})]})]})]}),D?(0,r.jsxs)("div",{className:"section publications-section right-column",children:[(0,r.jsx)("h3",{children:"Publications"}),(0,r.jsx)("p",{children:"Published FHIR Implementation Guide artifacts generated by the IG Publisher"}),C.sort().map(e=>(0,r.jsxs)("div",{className:"branch-publication",children:[(0,r.jsxs)("h4",{children:["Branch: ",(0,r.jsx)("code",{children:e})]}),(0,r.jsxs)("div",{className:"artifact-links",children:[(0,r.jsx)("a",{href:"".concat(W(e),"/artifacts.html#terminology-code-systems"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Code Systems \u2197"}),(0,r.jsx)("a",{href:"".concat(W(e),"/artifacts.html#terminology-value-sets"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Value Sets \u2197"}),(0,r.jsx)("a",{href:"".concat(W(e),"/artifacts.html#structures-logical-models"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Logical Models \u2197"}),(0,r.jsx)("a",{href:"".concat(W(e),"/artifacts.html#terminology-concept-maps"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Concept Maps \u2197"})]})]},e))]}):(0,r.jsxs)("div",{className:"section no-publications-section right-column",children:[(0,r.jsx)("h3",{children:"Publications"}),(0,r.jsxs)("div",{className:"no-gh-pages-message",children:[(0,r.jsx)("p",{children:"\ud83d\udccb No published artifacts available"}),(0,r.jsxs)("p",{children:["This repository does not have a ",(0,r.jsx)("code",{children:"gh-pages"})," branch for publishing FHIR Implementation Guide artifacts."]})]})]})]}),(0,r.jsxs)("div",{className:"section fsh-files-section",children:[(0,r.jsx)("h3",{children:"FHIR FSH Source Files"}),(0,r.jsx)("p",{children:"FHIR Shorthand (FSH) files containing CodeSystems, ValueSets, and ConceptMaps"}),0===m.length?(0,r.jsxs)("div",{className:"no-files-message",children:[(0,r.jsxs)("p",{children:["No FHIR FSH files found in ",(0,r.jsx)("code",{children:"input/fsh/"})," directory."]}),(0,r.jsx)("p",{children:"Core Data Dictionary files should be stored in FSH format in this location."})]}):(0,r.jsx)("div",{className:"fsh-files-grid",children:m.map(e=>(0,r.jsxs)("div",{className:"fsh-file-card",children:[(0,r.jsxs)("div",{className:"file-header",children:[(0,r.jsx)("div",{className:"file-icon",children:"\ud83d\udcc4"}),(0,r.jsx)("div",{className:"file-name",children:e.name})]}),(0,r.jsxs)("div",{className:"file-actions",children:[(0,r.jsx)("button",{className:"action-btn primary",onClick:()=>M(e),title:"View source code with syntax highlighting",children:"View Source"}),(0,r.jsx)("a",{href:e.html_url,target:"_blank",rel:"noopener noreferrer",className:"action-btn secondary",title:"View source on GitHub",children:"GitHub \u2197"})]})]},e.path))})]}),(0,r.jsxs)("div",{className:"section questionnaires-section",children:[(0,r.jsx)("h3",{children:"FHIR Questionnaires"}),(0,r.jsx)("p",{children:"Structured questionnaires and forms for data collection using FHIR Questionnaire standard"}),(0,r.jsx)("div",{className:"questionnaire-actions",children:(0,r.jsx)("button",{className:"action-btn primary questionnaire-editor-btn",onClick:i=>{var a;const t=(null===n||void 0===n||null===(a=n.owner)||void 0===a?void 0:a.login)||(null===n||void 0===n?void 0:n.full_name.split("/")[0]),l=null===n||void 0===n?void 0:n.name,c=d?"/questionnaire-editor/".concat(t,"/").concat(l,"/").concat(d):"/questionnaire-editor/".concat(t,"/").concat(l),r={profile:s,repository:n,component:{id:"questionnaire-editor",name:"FHIR Questionnaires",description:"Structured questionnaires and forms for data collection using FHIR standard"},selectedBranch:d};(0,o.hX)(i,c,e,r)},title:"Open FHIR Questionnaire Editor",children:"\ud83d\udccb Create New Questionnaire"})}),L?(0,r.jsx)("div",{className:"questionnaire-loading",children:(0,r.jsx)("p",{children:"Loading questionnaires..."})}):G.length>0?(0,r.jsxs)("div",{className:"existing-questionnaires",children:[(0,r.jsxs)("h4",{children:["Existing Questionnaires (",G.length,")"]}),(0,r.jsx)("div",{className:"questionnaire-grid",children:G.map(i=>(0,r.jsxs)("div",{className:"questionnaire-card",onClick:()=>(i=>{var a;const t=(null===n||void 0===n||null===(a=n.owner)||void 0===a?void 0:a.login)||(null===n||void 0===n?void 0:n.full_name.split("/")[0]),l=null===n||void 0===n?void 0:n.name,c=d?"/questionnaire-editor/".concat(t,"/").concat(l,"/").concat(d):"/questionnaire-editor/".concat(t,"/").concat(l);e(c,{state:{profile:s,repository:n,selectedBranch:d,selectedQuestionnaire:i}})})(i),title:"Click to open questionnaire in editor",children:[(0,r.jsx)("div",{className:"card-icon",children:"FSH"===i.fileType?"\ud83d\udcdd":"\ud83d\udccb"}),(0,r.jsxs)("div",{className:"card-content",children:[(0,r.jsx)("h5",{children:i.displayName}),(0,r.jsxs)("p",{className:"card-type",children:[i.fileType," Questionnaire"]}),(0,r.jsx)("p",{className:"card-path",children:i.fullPath}),(0,r.jsxs)("p",{className:"card-size",children:[(i.size/1024).toFixed(1)," KB"]})]})]},i.name))})]}):(0,r.jsxs)("div",{className:"no-questionnaires",children:[(0,r.jsx)("div",{className:"empty-icon",children:"\ud83d\udccb"}),(0,r.jsx)("h4",{children:"No Questionnaires Found"}),(0,r.jsx)("p",{children:"This repository doesn't have any FHIR Questionnaire files yet."}),(0,r.jsx)("p",{children:"Questionnaires can be stored in:"}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"input/questionnaires/*.json"})," - FHIR JSON format"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"input/fsh/questionnaires/*.fsh"})," - FHIR Shorthand format"]})]})]}),(0,r.jsx)("div",{className:"questionnaire-info",children:(0,r.jsx)("p",{className:"info-text",children:"Create and edit FHIR R4 Questionnaire resources. Click on existing questionnaires to open them in the editor, or create a new one with the button above."})})]})]})]}),k&&b&&(0,r.jsx)("div",{className:"modal-overlay",onClick:O,children:(0,r.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h3",{children:b.name}),(0,r.jsx)("button",{className:"modal-close",onClick:O,children:"\xd7"})]}),(0,r.jsx)("div",{className:"modal-body",children:(0,r.jsx)("pre",{className:"fsh-code",children:(0,r.jsx)("code",{children:g})})}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("a",{href:b.html_url,target:"_blank",rel:"noopener noreferrer",className:"btn-secondary",children:"View on GitHub \u2197"}),(0,r.jsx)("button",{className:"btn-primary",onClick:O,children:"Close"})]})]})})]}):(e("/"),(0,r.jsx)("div",{children:"Redirecting..."}))},h=()=>(0,r.jsx)(c.Mx,{pageName:"core-data-dictionary-viewer",children:(0,r.jsx)(d,{})})}}]);