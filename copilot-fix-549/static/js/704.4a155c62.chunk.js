"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[704],{13333:(e,s,t)=>{t.d(s,{hX:()=>i});const i=function(e,s,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((e=>!!(null!==e&&void 0!==e&&e.ctrlKey||null!==e&&void 0!==e&&e.metaKey))(e)){const e=(e=>{const s="/sgex/copilot-fix-549",t=window.location.origin,i=e.startsWith("/")?e.slice(1):e;if(!s)return"".concat(t,"/").concat(i);const n=s.endsWith("/")?s:s+"/";return"".concat(t).concat(n).concat(i)})(s);window.open(e,"_blank","noopener,noreferrer")}else i?t(s,{state:i}):t(s)}},44131:e=>{e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://sgex.org/schemas/sushi-config.json","title":"SUSHI Configuration Schema","description":"JSON Schema for validating sushi-config.yaml files used in FHIR Implementation Guides","type":"object","required":["id","canonical","name","status","publisher","version"],"properties":{"id":{"type":"string","pattern":"^[a-z0-9]+(\\\\.[a-z0-9]+)*$","description":"The unique identifier for the Implementation Guide (IG). Must be lowercase alphanumeric with dots."},"canonical":{"type":"string","format":"uri","description":"The canonical URL for the Implementation Guide"},"name":{"type":"string","minLength":1,"description":"The human-readable name of the Implementation Guide"},"title":{"type":"string","description":"The title of the Implementation Guide (optional, defaults to name)"},"description":{"type":"string","description":"A description of the Implementation Guide"},"status":{"type":"string","enum":["draft","active","retired","unknown"],"description":"The publication status of the Implementation Guide"},"version":{"type":"string","pattern":"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+(-[a-zA-Z0-9]+)?$","description":"The version of the Implementation Guide (semantic versioning)"},"fhirVersion":{"type":"string","enum":["4.0.1","4.3.0","5.0.0"],"default":"4.0.1","description":"The version of FHIR to use"},"copyrightYear":{"type":"integer","minimum":1900,"maximum":3000,"description":"The copyright year"},"releaseLabel":{"type":"string","description":"Label for the release"},"publisher":{"type":"string","minLength":1,"description":"The publisher of the Implementation Guide"},"contact":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"telecom":{"type":"array","items":{"type":"object","properties":{"system":{"type":"string","enum":["phone","fax","email","pager","url","sms","other"]},"value":{"type":"string"},"use":{"type":"string","enum":["home","work","temp","old","mobile"]}}}}}},"description":"Contact information for the Implementation Guide"},"license":{"type":"string","enum":["not-open-source","0BSD","AAL","Abstyles","Adobe-2006","Adobe-Glyph","ADSL","AFL-1.1","CC0-1.0"],"description":"The license under which the Implementation Guide is published"},"jurisdiction":{"type":"array","items":{"type":"object","properties":{"coding":{"type":"array","items":{"type":"object","properties":{"system":{"type":"string","format":"uri"},"code":{"type":"string"},"display":{"type":"string"}}}}}},"description":"Jurisdiction for the Implementation Guide"},"dependencies":{"type":"object","properties":{"smart.who.int.base":{"oneOf":[{"type":"string"},{"type":"object","properties":{"id":{"type":"string"},"version":{"type":"string"}}}],"description":"WHO SMART Guidelines base dependency (required for WHO DAK compliance)"}},"additionalProperties":{"oneOf":[{"type":"string"},{"type":"object","properties":{"id":{"type":"string"},"version":{"type":"string"},"uri":{"type":"string","format":"uri"},"reason":{"type":"string"}}}]},"description":"Dependencies on other Implementation Guides"},"global":{"type":"object","additionalProperties":{"type":"string"},"description":"Global profiles applied across the IG"},"groups":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"resources":{"type":"array","items":{"type":"string"}}}},"description":"Resource groupings for the IG"},"resources":{"type":"object","additionalProperties":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"exampleBoolean":{"type":"boolean"},"exampleCanonical":{"type":"string","format":"uri"}}},"description":"Resource definitions and metadata"},"pages":{"type":"object","additionalProperties":{"oneOf":[{"type":"string"},{"type":"object","properties":{"nameUrl":{"type":"string"},"title":{"type":"string"},"generation":{"type":"string","enum":["html","markdown","xml","generated"]}}}]},"description":"Page definitions for the IG"},"parameters":{"type":"object","additionalProperties":{"oneOf":[{"type":"string"},{"type":"boolean"},{"type":"number"}]},"description":"Parameters for IG generation"},"copyrightLabel":{"type":"string","description":"Copyright label for the IG"},"packageId":{"type":"string","description":"Package identifier (defaults to id)"},"menu":{"type":"object","additionalProperties":true,"description":"Menu structure for the IG"},"history":{"type":"object","properties":{"package-id":{"type":"string"},"canonical":{"type":"string","format":"uri"},"title":{"type":"string"},"introduction":{"type":"string"}},"description":"History configuration for the IG"},"indexPageContent":{"type":"string","description":"Content for the index page"},"FSHOnly":{"type":"boolean","description":"Flag to indicate if this is a FSH-only project"},"applyExtensionMetadataToRoot":{"type":"boolean","description":"Whether to apply extension metadata to root"},"instanceOptions":{"type":"object","properties":{"setMetaProfile":{"type":"string","enum":["always","never","inline-only","standalone-only"]},"setId":{"type":"string","enum":["always","standalone-only"]},"manualSliceOrdering":{"type":"boolean"}},"description":"Options for instance processing"}},"allOf":[{"if":{"properties":{"dependencies":{"type":"object","not":{"properties":{"smart.who.int.base":true},"required":["smart.who.int.base"]}}}},"then":{"properties":{"_whoSmartGuidelinesNote":{"const":"This IG is not WHO SMART Guidelines compliant. Add smart.who.int.base dependency for DAK compliance."}}}}]}')},44704:(e,s,t)=>{t.r(s),t.d(s,{default:()=>D});var i=t(65043),n=t(16786),a=t(93071),r=t(88691),o=t(98757),l=t(22392),c=t(89379),d=t(55661),h=t(77003),m=t.n(h),u=t(80483),p=t.n(u);const g=t(44131);const f=new class{constructor(){this.validators=new Map,this.initializeSchemaValidator(),this.initializeDefaultValidators()}initializeSchemaValidator(){this.ajv=new(m())({allErrors:!0,verbose:!0}),p()(this.ajv),this.sushiConfigValidator=this.ajv.compile(g)}initializeDefaultValidators(){this.addValidator("xml","xml-well-formed",{level:"error",description:"XML files must be well-formed",validator:this.validateXMLWellFormed.bind(this)}),this.addValidator("bpmn","xml-well-formed",{level:"error",description:"BPMN files must be well-formed XML",validator:this.validateXMLWellFormed.bind(this)}),this.addValidator("bpmn","bpmn-namespace",{level:"error",description:"BPMN files must use correct BPMN 2.0 namespace",validator:this.validateBPMNNamespace.bind(this)}),this.addValidator("bpmn","has-start-event",{level:"warning",description:"BPMN process should have at least one start event",validator:this.validateBPMNStartEvent.bind(this)}),this.addValidator("dmn","xml-well-formed",{level:"error",description:"DMN files must be well-formed XML",validator:this.validateXMLWellFormed.bind(this)}),this.addValidator("dmn","dmn-namespace",{level:"error",description:"DMN files must use correct DMN 1.3 namespace",validator:this.validateDMNNamespace.bind(this)}),this.addValidator("json","json-valid",{level:"error",description:"JSON files must be valid JSON",validator:this.validateJSONSyntax.bind(this)}),this.addValidator("json","fhir-resource-type",{level:"info",description:"FHIR resources should have valid resourceType",validator:this.validateFHIRResourceType.bind(this)}),this.addValidator("*","file-size-limit",{level:"warning",description:"Files should be under 1MB for optimal performance",validator:this.validateFileSize.bind(this)}),this.addValidator("*","filename-conventions",{level:"info",description:"Files should follow naming conventions",validator:this.validateFilenameConventions.bind(this)}),this.addValidator("yaml","sushi-config-valid",{level:"error",description:"sushi-config.yaml must be valid and contain required fields",validator:this.validateSushiConfig.bind(this)})}addValidator(e,s,t){this.validators.has(e)||this.validators.set(e,new Map),this.validators.get(e).set(s,t)}removeValidator(e,s){this.validators.has(e)&&this.validators.get(e).delete(s)}async validateFile(e,s){const t=[],i=this.getFileExtension(e),n=this.getFileName(e),a=this.validators.get(i)||new Map,r=this.validators.get("*")||new Map;for(const[l,d]of a)try{const i=await d.validator(e,s,n);i&&t.push((0,c.A)({validatorId:l,level:d.level,description:d.description},i))}catch(o){t.push({validatorId:l,level:"error",description:"Validator execution failed",message:o.message,filePath:e})}for(const[l,d]of r)try{const i=await d.validator(e,s,n);i&&t.push((0,c.A)({validatorId:l,level:d.level,description:d.description},i))}catch(o){t.push({validatorId:l,level:"error",description:"Validator execution failed",message:o.message,filePath:e})}return t}async validateStagingGround(e){const s={summary:{error:0,warning:0,info:0},files:{},validatedAt:Date.now()};for(const t of e.files){const e=await this.validateFile(t.path,t.content);s.files[t.path]=e,e.forEach(e=>{"error"===e.level?s.summary.error++:"warning"===e.level?s.summary.warning++:"info"===e.level&&s.summary.info++})}return s}async canSave(e){return 0===(await this.validateStagingGround(e)).summary.error}async validateXMLWellFormed(e,s){try{const t=new DOMParser,i=t.parseFromString(s,"text/xml").querySelector("parsererror");return i?{message:"XML is not well-formed: "+i.textContent,filePath:e}:null}catch(t){return{message:"Failed to parse XML: "+t.message,filePath:e}}}async validateBPMNNamespace(e,s){return s.includes('xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"')?null:{message:"BPMN file missing correct BPMN 2.0 namespace declaration",filePath:e,suggestion:'Add xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" to root element'}}async validateBPMNStartEvent(e,s){return s.includes("<startEvent")||s.includes("<bpmn:startEvent")?null:{message:"BPMN process should contain at least one start event",filePath:e,suggestion:"Add a start event to begin the process flow"}}async validateDMNNamespace(e,s){return s.includes('xmlns:dmn="https://www.omg.org/spec/DMN/20191111/MODEL/"')?null:{message:"DMN file missing correct DMN 1.3 namespace declaration",filePath:e,suggestion:'Add xmlns:dmn="https://www.omg.org/spec/DMN/20191111/MODEL/" to root element'}}async validateJSONSyntax(e,s){try{return JSON.parse(s),null}catch(t){return{message:"Invalid JSON syntax: "+t.message,filePath:e}}}async validateFHIRResourceType(e,s){try{const t=JSON.parse(s),i=["StructureDefinition","ValueSet","CodeSystem","ConceptMap","Questionnaire","PlanDefinition","ActivityDefinition","Measure","Library","ImplementationGuide","Bundle","Patient","Practitioner"];return t.resourceType&&!i.includes(t.resourceType)?{message:"Unknown FHIR resourceType: ".concat(t.resourceType),filePath:e,suggestion:"Verify the resourceType is correct for FHIR R4"}:null}catch(t){return null}}async validateFileSize(e,s){const t=new Blob([s]).size;return t>1048576?{message:"File size (".concat((t/1024/1024).toFixed(1),"MB) exceeds recommended limit of 1MB"),filePath:e,suggestion:"Consider breaking large files into smaller components"}:null}async validateFilenameConventions(e,s){const t=this.getFileName(e),i=[];return t.includes(" ")&&i.push("avoid spaces in filenames"),/[<>:"|?*]/.test(t)&&i.push('avoid special characters (<>:"|?*)'),t.length>100&&i.push("filename is very long (>100 characters)"),i.length>0?{message:"Filename convention issues: ".concat(i.join(", ")),filePath:e,suggestion:"Use lowercase letters, numbers, hyphens, and underscores"}:null}async validateSushiConfig(e,s){if(!e.endsWith("sushi-config.yaml"))return null;try{let i;try{i=d.default.load(s)}catch(t){return{message:"Invalid YAML syntax: ".concat(t.message),filePath:e,suggestion:"Fix YAML syntax errors and ensure proper indentation"}}if(!i||"object"!==typeof i)return{message:"sushi-config.yaml must contain a valid YAML object",filePath:e,suggestion:"Ensure the file contains proper YAML object structure"};if(!this.sushiConfigValidator(i)){const s=this.sushiConfigValidator.errors,t=s.map(e=>{var s,t;const i=e.instancePath?e.instancePath.replace("/",""):(null===(s=e.params)||void 0===s?void 0:s.missingProperty)||"root";let n="".concat(i,": ").concat(e.message);return null!==(t=e.params)&&void 0!==t&&t.allowedValues&&(n+=" (allowed: ".concat(e.params.allowedValues.join(", "),")")),n});return{message:"sushi-config.yaml validation errors: ".concat(t.join("; ")),filePath:e,suggestion:"Review the sushi-config.yaml specification at https://fshschool.org/docs/sushi/configuration/",details:s}}const n=this.validateWHOSmartGuidelines(i);return n||null}catch(i){return{message:"Failed to validate sushi-config.yaml: "+i.message,filePath:e,suggestion:"Check file format and content structure"}}}validateWHOSmartGuidelines(e){const s=[];return e.dependencies&&e.dependencies["smart.who.int.base"]||s.push("missing smart.who.int.base dependency (required for WHO DAK compliance)"),e.canonical&&e.canonical.includes("smart.who.int")&&(e.id.startsWith("smart.who.int")||s.push('id should start with "smart.who.int" when using WHO canonical URL')),e.canonical&&e.canonical.includes("smart.who.int")&&(e.publisher&&e.publisher.toLowerCase().includes("world health organization")||s.push('publisher should include "World Health Organization" for WHO guidelines'),e.jurisdiction&&Array.isArray(e.jurisdiction)||s.push("jurisdiction should be specified for WHO guidelines")),s.length>0?{message:"WHO SMART Guidelines compliance issues: ".concat(s.join(", ")),filePath:"sushi-config.yaml",suggestion:"Ensure compliance with WHO SMART Guidelines requirements"}:null}getFileExtension(e){const s=e.split(".");return s.length>1?s[s.length-1].toLowerCase():""}getFileName(e){return e.split("/").pop()||e}formatValidationResults(e){const s={canSave:0===e.summary.error,summary:e.summary,files:[]};return Object.entries(e.files).forEach(e=>{let[t,i]=e;i.length>0&&s.files.push({path:t,issues:i.map(e=>({level:e.level,message:e.message,description:e.description,suggestion:e.suggestion}))})}),s}getValidationSummary(e){return{error:e.summary.error,warning:e.summary.warning,info:e.summary.info,canSave:0===e.summary.error,hasIssues:e.summary.error+e.summary.warning+e.summary.info>0}}};var v=t(70579);const y=e=>{var s,t;let{isOpen:n,onClose:r,stagingGround:o,validation:c,repository:d,selectedBranch:h,hasWriteAccess:m,onSaveSuccess:u}=e;const[p,g]=(0,i.useState)(""),[y,x]=(0,i.useState)(!1),[b,j]=(0,i.useState)(!1),[w,N]=(0,i.useState)(null),[S,k]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{n&&(g((null===o||void 0===o?void 0:o.message)||""),x(!1),j(!1),N(null),k(!1))},[n,o]),!n)return null;const C=c?f.getValidationSummary(c):null,F=!C||(C.canSave||y),M=!!C&&C.error>0,I=e=>409===e.status?"Conflict detected. The branch has been updated since you started. Please refresh and try again.":403===e.status?"Permission denied. Check that your token has write access to this repository.":404===e.status?"Repository or branch not found. Please verify the repository exists and you have access.":e.message?e.message:"An unexpected error occurred while saving. Please try again.",A=e=>{switch(e){case"error":return"\ud83d\udd34";case"warning":return"\ud83d\udfe1";case"info":return"\ud83d\udfe2";default:return"\u2753"}};return(0,v.jsx)("div",{className:"save-dialog-overlay",children:(0,v.jsxs)("div",{className:"save-dialog",children:[(0,v.jsxs)("div",{className:"dialog-header",children:[(0,v.jsx)("h3",{children:"\ud83d\udcbe Save Changes"}),(0,v.jsx)("button",{className:"dialog-close",onClick:r,disabled:b,children:"\xd7"})]}),(0,v.jsxs)("div",{className:"dialog-content",children:[(0,v.jsxs)("div",{className:"save-summary",children:[(0,v.jsxs)("h4",{children:["Files to be committed (",(null===o||void 0===o||null===(s=o.files)||void 0===s?void 0:s.length)||0,"):"]}),(0,v.jsx)("div",{className:"files-list",children:null===o||void 0===o||null===(t=o.files)||void 0===t?void 0:t.map((e,s)=>(0,v.jsxs)("div",{className:"file-item",children:[(0,v.jsx)("span",{className:"file-icon",children:"\ud83d\udcc4"}),(0,v.jsx)("span",{className:"file-path",children:e.path}),(0,v.jsxs)("span",{className:"file-size",children:[(new Blob([e.content]).size/1024).toFixed(1)," KB"]}),(0,v.jsx)("button",{className:"remove-file-btn",onClick:s=>{var t;s.stopPropagation(),t=e.path,window.confirm('Are you sure you want to remove "'.concat(t,'" from staging? This cannot be undone.'))&&l.A.removeFile(t)},title:"Remove ".concat(e.path," from staging"),disabled:b,children:"\ud83d\uddd1\ufe0f"})]},s))})]}),C&&(0,v.jsxs)("div",{className:"validation-section",children:[(0,v.jsx)("div",{className:"validation-summary ".concat(C.hasIssues?"has-issues":"clean"),onClick:()=>k(!S),children:(0,v.jsxs)("div",{className:"validation-header",children:[(0,v.jsx)("h4",{children:"\ud83d\udea6 Validation Status"}),(0,v.jsxs)("div",{className:"validation-badges",children:[C.error>0&&(0,v.jsxs)("span",{className:"validation-badge error",children:["\ud83d\udd34 ",C.error]}),C.warning>0&&(0,v.jsxs)("span",{className:"validation-badge warning",children:["\ud83d\udfe1 ",C.warning]}),C.info>0&&(0,v.jsxs)("span",{className:"validation-badge info",children:["\ud83d\udfe2 ",C.info]}),!C.hasIssues&&(0,v.jsx)("span",{className:"validation-badge success",children:"\u2705 All clear"})]}),(0,v.jsx)("span",{className:"expand-icon ".concat(S?"expanded":""),children:"\u25bc"})]})}),S&&c&&(0,v.jsx)("div",{className:"validation-details",children:Object.entries(c.files).map(e=>{let[s,t]=e;return t.length>0&&(0,v.jsxs)("div",{className:"file-validation",children:[(0,v.jsxs)("h5",{children:["\ud83d\udcc4 ",s]}),(0,v.jsx)("div",{className:"validation-issues",children:t.map((e,s)=>(0,v.jsxs)("div",{className:"validation-issue ".concat(e.level),children:[(0,v.jsx)("span",{className:"issue-icon",children:A(e.level)}),(0,v.jsxs)("div",{className:"issue-content",children:[(0,v.jsx)("div",{className:"issue-message",children:e.message}),e.suggestion&&(0,v.jsxs)("div",{className:"issue-suggestion",children:["\ud83d\udca1 ",e.suggestion]})]})]},s))})]},s)})}),M&&(0,v.jsxs)("div",{className:"override-section",children:[(0,v.jsxs)("label",{className:"override-checkbox",children:[(0,v.jsx)("input",{type:"checkbox",checked:y,onChange:e=>x(e.target.checked)}),(0,v.jsx)("span",{className:"checkmark"}),"Override validation errors and save anyway"]}),(0,v.jsx)("p",{className:"override-warning",children:"\u26a0\ufe0f Saving with validation errors may cause issues with your DAK. Only enable this if you're sure about your changes."})]})]}),(0,v.jsxs)("div",{className:"commit-message-section",children:[(0,v.jsx)("label",{htmlFor:"commit-message",children:(0,v.jsx)("h4",{children:"\u270d\ufe0f Commit Message"})}),(0,v.jsx)("textarea",{id:"commit-message",className:"commit-message-input",value:p,onChange:e=>g(e.target.value),placeholder:"Describe your changes...",rows:3,disabled:b,required:!0}),(0,v.jsx)("div",{className:"commit-tips",children:(0,v.jsxs)("p",{children:["\ud83d\udca1 ",(0,v.jsx)("strong",{children:"Tip:"})," Write a clear, descriptive message about what you changed and why."]})})]}),w&&(0,v.jsx)("div",{className:"error-section",children:(0,v.jsxs)("div",{className:"error-message",children:[(0,v.jsx)("span",{className:"error-icon",children:"\u274c"}),w]})}),(0,v.jsxs)("div",{className:"repo-info",children:[(0,v.jsxs)("div",{className:"info-item",children:[(0,v.jsx)("span",{className:"info-label",children:"Repository:"}),(0,v.jsx)("span",{className:"info-value",children:null===d||void 0===d?void 0:d.full_name})]}),(0,v.jsxs)("div",{className:"info-item",children:[(0,v.jsx)("span",{className:"info-label",children:"Branch:"}),(0,v.jsx)("span",{className:"info-value",children:h})]}),(0,v.jsxs)("div",{className:"info-item",children:[(0,v.jsx)("span",{className:"info-label",children:"Access:"}),(0,v.jsx)("span",{className:"info-value ".concat(m?"write":"read"),children:m?"\u270f\ufe0f Write":"\ud83d\udc41\ufe0f Read-only"})]})]})]}),(0,v.jsxs)("div",{className:"dialog-actions",children:[(0,v.jsx)("button",{className:"action-btn secondary",onClick:r,disabled:b,children:"Cancel"}),(0,v.jsx)("button",{className:"action-btn primary",onClick:async()=>{if(p.trim())if(m)if(!M||y){j(!0),N(null);try{var e;const s=(null===(e=d.owner)||void 0===e?void 0:e.login)||d.full_name.split("/")[0];if(d.isDemo||d.owner&&"demo-user"===d.owner.login)return await new Promise(e=>setTimeout(e,2e3)),void u({sha:"demo-commit-sha",message:p,url:"https://github.com/".concat(d.full_name,"/commit/demo-commit-sha")});const t=await a.A.createCommit(s,d.name,h,p.trim(),o.files);u({sha:t.sha,message:p,url:t.html_url})}catch(s){console.error("Error saving changes:",s),N(I(s))}finally{j(!1)}}else N("Cannot save with validation errors. Enable override option to proceed anyway.");else N("You need write permissions to save changes");else N("Commit message is required")},disabled:!F||!p.trim()||b||!m,children:b?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"saving-spinner",children:"\u23f3"}),"Saving..."]}):(0,v.jsx)(v.Fragment,{children:"\ud83d\udcbe Save Changes"})})]})]})})},x=e=>{let{repository:s,selectedBranch:t,hasWriteAccess:n,profile:a,onStagingFilesChange:r}=e;const[o,c]=(0,i.useState)(null),[d,h]=(0,i.useState)(null),[m,u]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),[x,b]=(0,i.useState)(!1),j=(0,i.useCallback)(async()=>{u(!0),g(null);try{const e=l.A.getStagingGround();c(e),r&&r(e.files||[]),e.files.length>0&&await w(e)}catch(e){g("Failed to load staging ground data"),console.error("Error loading staging ground:",e)}finally{u(!1)}},[r]);(0,i.useEffect)(()=>{if(s&&t){l.A.initialize(s,t),j();return l.A.addListener(e=>{c(e),w(e),r&&r(e.files||[])})}},[s,t,j,r]);const w=async e=>{if(e&&0!==e.files.length)try{const s=await f.validateStagingGround(e);h(s)}catch(s){console.error("Error validating staging ground:",s),h(null)}else h(null)},N=d?f.getValidationSummary(d):{error:0,warning:0,info:0,canSave:!0},S=o&&o.files.length>0,k=o?o.files.length:0;return(0,v.jsxs)("div",{className:"staging-ground-section",children:[(0,v.jsxs)("div",{className:"section-header",children:[(0,v.jsxs)("h3",{className:"section-title",children:[(0,v.jsx)("span",{className:"section-icon",children:"\ud83d\udcdd"}),"Staging Ground",S&&(0,v.jsxs)("span",{className:"files-badge",children:[k," file",1!==k?"s":""]})]}),(0,v.jsx)("p",{className:"section-description",children:"Changes made through DAK component editors are staged here before being committed to the repository. Review and commit your changes when ready."})]}),(0,v.jsx)("div",{className:"staging-content",children:m?(0,v.jsxs)("div",{className:"loading-indicator",children:[(0,v.jsx)("span",{className:"loading-spinner",children:"\u23f3"}),"Loading staging ground..."]}):p?(0,v.jsxs)("div",{className:"error-message",children:[(0,v.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),p]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"staging-status-bar",children:[(0,v.jsx)("div",{className:"status-indicators",children:(0,v.jsxs)("div",{className:"validation-stoplight",children:[(0,v.jsxs)("div",{className:"stoplight-indicator error ".concat(0===N.error?"lit":""),children:["\ud83d\udd34",N.error>0&&(0,v.jsx)("span",{className:"indicator-badge",children:N.error})]}),(0,v.jsxs)("div",{className:"stoplight-indicator warning ".concat(0===N.warning?"lit":""),children:["\ud83d\udfe1",N.warning>0&&(0,v.jsx)("span",{className:"indicator-badge",children:N.warning})]}),(0,v.jsxs)("div",{className:"stoplight-indicator info ".concat(0===N.info?"lit":""),children:["\ud83d\udfe2",N.info>0&&(0,v.jsx)("span",{className:"indicator-badge",children:N.info})]})]})}),(0,v.jsx)("button",{className:"save-btn ".concat(S&&N.canSave?"":"disabled"),onClick:()=>{n?b(!0):alert("You need write permissions to save changes to this repository.")},disabled:!S||!n,title:S?n?N.canSave?"Save changes to repository":"Fix validation errors first":"Write access required":"No changes to save",children:"\ud83d\udcbe Save Changes"})]}),(0,v.jsxs)("div",{className:"staging-files-section",children:[(0,v.jsx)("h4",{children:"\ud83d\udcc1 Changed Files"}),S?(0,v.jsxs)("div",{className:"changed-files",children:[(o&&o.files?o.files.map(e=>({path:e.path,size:new Blob([e.content]).size,lastModified:e.timestamp})):[]).map((e,s)=>(0,v.jsxs)("div",{className:"file-item",children:[(0,v.jsxs)("div",{className:"file-info",children:[(0,v.jsx)("span",{className:"file-icon",children:"\ud83d\udcc4"}),(0,v.jsx)("span",{className:"file-path",children:e.path})]}),(0,v.jsxs)("div",{className:"file-meta",children:[(0,v.jsxs)("span",{className:"file-size",children:[(e.size/1024).toFixed(1)," KB"]}),(0,v.jsx)("span",{className:"file-time",children:new Date(e.lastModified).toLocaleTimeString()}),(0,v.jsx)("button",{className:"remove-file-btn",onClick:s=>{var t;s.stopPropagation(),t=e.path,window.confirm('Are you sure you want to remove "'.concat(t,'" from staging? This cannot be undone.'))&&l.A.removeFile(t)},title:"Remove ".concat(e.path," from staging"),children:"\ud83d\uddd1\ufe0f"})]})]},s)),(0,v.jsx)("div",{className:"file-actions",children:(0,v.jsx)("button",{className:"action-btn secondary small",onClick:()=>{window.confirm("Are you sure you want to discard all changes? This cannot be undone.")&&l.A.clearStagingGround()},children:"\ud83d\uddd1\ufe0f Clear All Changes"})})]}):(0,v.jsxs)("div",{className:"no-changes",children:[(0,v.jsx)("p",{children:"No changes in staging ground"}),(0,v.jsx)("p",{className:"help-text",children:"Changes made through DAK component editors will appear here before being saved to the repository."})]})]}),S&&o.message&&(0,v.jsxs)("div",{className:"commit-message-section",children:[(0,v.jsx)("h4",{children:"\u270d\ufe0f Commit Message"}),(0,v.jsx)("div",{className:"commit-preview",children:(0,v.jsx)("p",{children:o.message})})]})]})}),(0,v.jsx)(y,{isOpen:x,onClose:()=>b(!1),stagingGround:o,validation:d,repository:s,selectedBranch:t,hasWriteAccess:n,onSaveSuccess:e=>{b(!1),l.A.clearStagingGround(),alert("Changes saved successfully! Commit: ".concat(e.sha.substring(0,7)))}})]})};var b=t(16372),j=t(15328);class w{constructor(){this.files=new Map,this.directories=new Set,this.maxMemoryUsage=20971520,this.currentMemoryUsage=0}writeFile(e,s){const t=e.startsWith("/")?e.substring(1):e,i=(new TextEncoder).encode(s).length;if(this.currentMemoryUsage+i>this.maxMemoryUsage)throw new Error("Memory limit exceeded. Cannot store file ".concat(t," (").concat((i/1024/1024).toFixed(1),"MB)"));const n=t.split("/");for(let r=0;r<n.length-1;r++){const e=n.slice(0,r+1).join("/");this.directories.add(e)}const a=(new TextEncoder).encode(s);if(this.files.has(t)){const e=this.files.get(t);this.currentMemoryUsage-=e.length}return this.files.set(t,a),this.currentMemoryUsage+=a.length,!0}readFile(e){const s=e.startsWith("/")?e.substring(1):e,t=this.files.get(s);if(!t)return null;return(new TextDecoder).decode(t)}exists(e){const s=e.startsWith("/")?e.substring(1):e;return this.files.has(s)||this.directories.has(s)}listDirectory(e){const s=e.startsWith("/")?e.substring(1):e,t=s?"".concat(s,"/"):"",i=[];for(const n of this.files.keys())if(n.startsWith(t)){const e=n.substring(t.length);e.includes("/")||i.push({name:e,type:"file",path:n})}for(const n of this.directories)if(n.startsWith(t)){const e=n.substring(t.length);e.includes("/")||i.push({name:e,type:"directory",path:n})}return i}clear(){this.files.clear(),this.directories.clear(),this.currentMemoryUsage=0}getMemoryUsage(){return{used:this.currentMemoryUsage,limit:this.maxMemoryUsage,percentage:this.currentMemoryUsage/this.maxMemoryUsage*100}}}const N=new class{constructor(){this.wasmModule=null,this.fs=new w,this.isInitialized=!1,this.initializationPromise=null}async initialize(){return this.isInitialized?this.wasmModule:(this.initializationPromise||(this.initializationPromise=this._loadWasmModule()),this.initializationPromise)}async _loadWasmModule(){try{const e=await this._importSushiLibrary();return this.wasmModule=e,this.isInitialized=!0,this.wasmModule}catch(e){throw console.error("Failed to load SUSHI WASM module:",e),new Error("SUSHI WASM initialization failed: ".concat(e.message))}}async _importSushiLibrary(){return console.log("Creating fallback SUSHI implementation for browser environment"),{ccall:this._createFallbackCCall.bind(this),FS:{writeFile:this.fs.writeFile.bind(this.fs),readFile:this.fs.readFile.bind(this.fs),exists:this.fs.exists.bind(this.fs)}}}_createFallbackCCall(){return(e,s,t,i)=>{if("runSushi"===e)return this._runFallbackCompilation(i[0]);throw new Error("Unsupported WASM function: ".concat(e))}}async _runFallbackCompilation(e){const s=[],i=[],n=[];try{const e=this._getAllFshFiles(),r=this.fs.readFile("sushi-config.yaml");let o={name:"browser-generated-ig",version:"1.0.0",fhirVersion:"4.0.1",canonical:"http://example.org/fhir/ig/browser-generated"};if(r)try{o=(await Promise.resolve().then(t.bind(t,55661))).default.load(r)}catch(a){n.push("Failed to parse sushi-config.yaml: ".concat(a.message))}else n.push("No sushi-config.yaml found, using default configuration");for(const{content:t}of e){const e=this._extractFSHDefinitions(t),i=this._generateFHIRResources(e,o);s.push(...i)}return{success:!0,files:s,errors:i,warnings:n}}catch(r){return{success:!1,files:[],errors:[r.message],warnings:n}}}_getAllFshFiles(){var e=this;const s=[],t=function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const n=e.fs.listDirectory(i);for(const a of n)if("file"===a.type&&a.name.endsWith(".fsh")){const t=e.fs.readFile(a.path);t&&s.push({path:a.path,content:t})}else"directory"===a.type&&t(a.path)};return t("input/fsh"),s}_extractFSHDefinitions(e){const s={profiles:[],instances:[],valueSets:[],codeSystems:[],extensions:[]},t=e.split("\n");let i=null,n=null;for(let a=0;a<t.length;a++){const e=t[a].trim();e.startsWith("Profile:")?(n="profiles",i={name:e.substring(8).trim(),type:"Profile",parent:null,id:null,title:null,description:null,rules:[]}):e.startsWith("Instance:")?(n="instances",i={name:e.substring(9).trim(),type:"Instance",instanceOf:null,usage:null,title:null,description:null,rules:[]}):e.startsWith("ValueSet:")?(n="valueSets",i={name:e.substring(9).trim(),type:"ValueSet",id:null,title:null,description:null,rules:[]}):e.startsWith("CodeSystem:")?(n="codeSystems",i={name:e.substring(11).trim(),type:"CodeSystem",id:null,title:null,description:null,rules:[]}):e.startsWith("Extension:")&&(n="extensions",i={name:e.substring(10).trim(),type:"Extension",id:null,title:null,description:null,rules:[]}),i&&(e.startsWith("Parent:")?i.parent=e.substring(7).trim():e.startsWith("InstanceOf:")?i.instanceOf=e.substring(11).trim():e.startsWith("Usage:")?i.usage=e.substring(6).trim():e.startsWith("Id:")?i.id=e.substring(3).trim():e.startsWith("Title:")?i.title=e.substring(6).trim().replace(/['"]/g,""):e.startsWith("Description:")?i.description=e.substring(12).trim().replace(/['"]/g,""):e.startsWith("* ")&&i.rules.push(e.substring(2).trim()),(!e.includes(":")||e.startsWith("* ")||e.startsWith("Parent:")||e.startsWith("InstanceOf:")||e.startsWith("Usage:")||e.startsWith("Id:")||e.startsWith("Title:")||e.startsWith("Description:"))&&a!==t.length-1||(i&&n&&i.name&&s[n].push(i),i=null,n=null,a--))}return s}_generateFHIRResources(e,s){const t=[];return e.profiles.forEach(e=>{const i=e.id||e.name.toLowerCase().replace(/\s+/g,"-"),n={resourceType:"StructureDefinition",id:i,url:"".concat(s.canonical,"/StructureDefinition/").concat(i),name:e.name,title:e.title||e.name,status:"draft",fhirVersion:s.fhirVersion||"4.0.1",kind:"resource",abstract:!1,type:"Patient"===e.parent?"Patient":"Observation"===e.parent?"Observation":e.parent||"DomainResource",baseDefinition:"http://hl7.org/fhir/StructureDefinition/".concat(e.parent||"DomainResource"),derivation:"constraint",description:e.description||"Profile for ".concat(e.name)};e.rules.length>0&&(n.differential={element:e.rules.map((e,s)=>({id:"".concat(n.type,".").concat(e.split(" ")[0]),path:"".concat(n.type,".").concat(e.split(" ")[0]),short:"Rule: ".concat(e)}))}),t.push({path:"StructureDefinition-".concat(i,".json"),content:JSON.stringify(n,null,2),resourceType:"StructureDefinition"})}),e.instances.forEach(e=>{const i=e.name.toLowerCase().replace(/\s+/g,"-"),n="Patient"===e.instanceOf?"Patient":"Observation"===e.instanceOf?"Observation":"Patient",a={resourceType:n,id:i,meta:{profile:e.instanceOf?["".concat(s.canonical,"/StructureDefinition/").concat(e.instanceOf)]:void 0}};"Patient"===n&&(a.name=[{family:e.name.split(" ").pop(),given:e.name.split(" ").slice(0,-1)}]),t.push({path:"".concat(i,".json"),content:JSON.stringify(a,null,2),resourceType:n})}),e.valueSets.forEach(e=>{const i=e.id||e.name.toLowerCase().replace(/\s+/g,"-"),n={resourceType:"ValueSet",id:i,url:"".concat(s.canonical,"/ValueSet/").concat(i),name:e.name,title:e.title||e.name,status:"draft",description:e.description||"ValueSet for ".concat(e.name),compose:{include:[{system:"http://example.org/codes",concept:[{code:"example1",display:"Example Code 1"},{code:"example2",display:"Example Code 2"}]}]}};t.push({path:"ValueSet-".concat(i,".json"),content:JSON.stringify(n,null,2),resourceType:"ValueSet"})}),e.codeSystems.forEach(e=>{const i=e.id||e.name.toLowerCase().replace(/\s+/g,"-"),n={resourceType:"CodeSystem",id:i,url:"".concat(s.canonical,"/CodeSystem/").concat(i),name:e.name,title:e.title||e.name,status:"draft",content:"complete",description:e.description||"CodeSystem for ".concat(e.name),concept:[{code:"concept1",display:"Concept 1"},{code:"concept2",display:"Concept 2"}]};t.push({path:"CodeSystem-".concat(i,".json"),content:JSON.stringify(n,null,2),resourceType:"CodeSystem"})}),t}async runSushi(e,s){this.isInitialized||await this.initialize(),this.fs.clear();const i=s.reduce((e,s)=>{var t;return e+((null===(t=s.content)||void 0===t?void 0:t.length)||0)},0);if(i>15728640)throw new Error("Input files too large (".concat((i/1024/1024).toFixed(1),"MB). Consider processing fewer files at once."));try{if(e){const s="string"===typeof e?e:(await Promise.resolve().then(t.bind(t,55661))).default.dump(e);this.fs.writeFile("sushi-config.yaml",s)}for(const e of s){const s=e.path||"input/fsh/".concat(e.name);e.content&&e.content.length>2097152?console.warn("Skipping large file ".concat(e.name," (").concat((e.content.length/1024/1024).toFixed(1),"MB)")):this.fs.writeFile(s,e.content||"")}const i=this.wasmModule.ccall("runSushi","string",["string"],["/workspace"]);return"string"===typeof i?JSON.parse(i):i}catch(n){throw this.fs.clear(),n}}};class S{constructor(){this.loadedModules=new Map,this.loadingPromises=new Map}async loadModule(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.loadedModules.has(e))return this.loadedModules.get(e);if(this.loadingPromises.has(e))return this.loadingPromises.get(e);const i=this._loadModuleInternal(s,t);this.loadingPromises.set(e,i);try{const s=await i;return this.loadedModules.set(e,s),this.loadingPromises.delete(e),s}catch(n){throw this.loadingPromises.delete(e),n}}async _loadModuleInternal(e,s){let t;if(e instanceof ArrayBuffer)t=e;else{if("string"!==typeof e)throw new Error("Invalid WASM source: must be URL string or ArrayBuffer");{const s=await fetch(e);if(!s.ok)throw new Error("Failed to fetch WASM module: ".concat(s.statusText));t=await s.arrayBuffer()}}const i=await WebAssembly.compile(t);return await WebAssembly.instantiate(i,s)}static isSupported(){return"object"===typeof WebAssembly&&"function"===typeof WebAssembly.instantiate}static getSupportInfo(){const e={basic:"object"===typeof WebAssembly,streaming:"function"===typeof WebAssembly.instantiateStreaming,threads:"undefined"!==typeof SharedArrayBuffer,simd:!1};try{e.simd="undefined"!==typeof WebAssembly.v128}catch(s){e.simd=!1}return e}clearCache(){this.loadedModules.clear(),this.loadingPromises.clear()}unloadModule(e){this.loadedModules.delete(e),this.loadingPromises.delete(e)}}new S;const k=new class{constructor(){this.metrics=new Map}startTiming(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";const t="".concat(e,"-").concat(s);this.metrics.set(t,{startTime:performance.now(),implementation:s,operationName:e})}endTiming(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";const t="".concat(e,"-").concat(s),i=this.metrics.get(t);if(!i)return console.warn("No timing started for ".concat(t)),0;const n=performance.now()-i.startTime;return i.duration=n,i.endTime=performance.now(),n}getComparison(e){const s="".concat(e,"-js"),t="".concat(e,"-wasm"),i=this.metrics.get(s),n=this.metrics.get(t);if(!i||!n)return null;const a=i.duration/n.duration;return{javascript:{duration:i.duration,implementation:"JavaScript"},webassembly:{duration:n.duration,implementation:"WebAssembly"},speedup:a,winner:a>1?"WebAssembly":"JavaScript",improvement:a>1?"".concat((100*(a-1)).toFixed(1),"% faster"):"".concat((100*(1-a)).toFixed(1),"% slower")}}getAllMetrics(){return Array.from(this.metrics.values())}clear(){this.metrics.clear()}};class C extends i.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null,memoryInfo:null})},this.state={hasError:!1,error:null,errorInfo:null,memoryInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,s){const t=performance.memory?{used:(performance.memory.usedJSHeapSize/1024/1024).toFixed(1),total:(performance.memory.totalJSHeapSize/1024/1024).toFixed(1),limit:(performance.memory.jsHeapSizeLimit/1024/1024).toFixed(1)}:null;if(this.setState({error:e,errorInfo:s,memoryInfo:t}),console.error("SUSHI Error Boundary caught an error:",e,s),window.gc&&"function"===typeof window.gc)try{window.gc()}catch(i){console.warn("Manual garbage collection failed:",i)}}render(){return this.state.hasError?(0,v.jsx)("div",{className:"sushi-error-boundary",children:(0,v.jsxs)("div",{className:"error-content",children:[(0,v.jsx)("h3",{children:"\ud83c\udf63 SUSHI Processing Error"}),(0,v.jsx)("p",{children:"Something went wrong during FHIR Shorthand compilation. This may be due to:"}),(0,v.jsxs)("ul",{children:[(0,v.jsx)("li",{children:"Large FSH files causing memory issues"}),(0,v.jsx)("li",{children:"Complex FSH syntax that exceeded processing limits"}),(0,v.jsx)("li",{children:"Browser memory constraints"}),(0,v.jsx)("li",{children:"Incompatible FSH definitions"})]}),this.state.memoryInfo&&(0,v.jsxs)("div",{className:"memory-info",children:[(0,v.jsx)("h4",{children:"\ud83d\udcbe Memory Usage"}),(0,v.jsxs)("p",{children:["Used: ",this.state.memoryInfo.used," MB / Total: ",this.state.memoryInfo.total," MB / Limit: ",this.state.memoryInfo.limit," MB"]})]}),(0,v.jsxs)("div",{className:"error-suggestions",children:[(0,v.jsx)("h4",{children:"\ud83d\udca1 Suggestions to Resolve"}),(0,v.jsxs)("ul",{children:[(0,v.jsx)("li",{children:"Try processing fewer FSH files at once"}),(0,v.jsx)("li",{children:"Split large FSH files into smaller ones"}),(0,v.jsx)("li",{children:"Refresh the page to clear memory"}),(0,v.jsx)("li",{children:"Use a browser with more available memory"}),(0,v.jsx)("li",{children:"Close other browser tabs to free up memory"})]})]}),(0,v.jsxs)("div",{className:"error-actions",children:[(0,v.jsx)("button",{onClick:this.handleReset,className:"reset-btn",children:"\ud83d\udd04 Try Again"}),(0,v.jsx)("button",{onClick:()=>window.location.reload(),className:"reload-btn",children:"\ud83d\ude80 Reload Page"})]}),!1]})}):this.props.children}}const F=C,M=e=>{var s;let{repository:n,selectedBranch:r,profile:o,stagingFiles:l=[]}=e;const[d,h]=(0,i.useState)(!1),[m,u]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),[f,y]=(0,i.useState)([]),[x,w]=(0,i.useState)([]),[C,M]=(0,i.useState)(!1),[I,A]=(0,i.useState)(null),[P,W]=(0,i.useState)("logs"),[H,D]=(0,i.useState)({info:!0,success:!0,warning:!0,error:!0}),[L,R]=(0,i.useState)(""),[T,E]=(0,i.useState)(null),[O,B]=(0,i.useState)([]),[_,V]=(0,i.useState)(!1),[G,U]=(0,i.useState)(null),[z,J]=(0,i.useState)("auto"),[q,K]=(0,i.useState)(!1),[X,Y]=(0,i.useState)(!1),$=(null===(s=n.owner)||void 0===s?void 0:s.login)||n.full_name.split("/")[0],Z=n.name,Q=(0,i.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";y(t=>[...t,{id:Date.now()+Math.random(),message:e,type:s,timestamp:(new Date).toISOString()}])},[]);(0,i.useEffect)(()=>{(async()=>{const e=S.isSupported();if(K(e),e){Q("\ud83d\ude80 WebAssembly support detected","success");try{await N.initialize(),Y(!0),Q("\u2705 SUSHI WebAssembly service initialized","success")}catch(s){Q("\u26a0\ufe0f WASM initialization failed, falling back to JavaScript: ".concat(s.message),"warning")}}else Q("\u26a0\ufe0f WebAssembly not supported, using JavaScript fallback","warning")})()},[Q]);const ee=async(e,s)=>{try{Q("\ud83d\udce6 Preparing WebAssembly execution environment...","info");const t=await N.runSushi(e,s);if(t.success){Q("\u2705 WebAssembly compilation successful","success"),Q("\ud83d\udcca Generated ".concat(t.files.length," FHIR resources"),"success");const e=t.files.map(e=>({type:e.resourceType,filename:e.path,content:e.content,id:e.path.split(".")[0],resourceType:e.resourceType}));return w(e),t.warnings.forEach(e=>{Q("\u26a0\ufe0f ".concat(e),"warning")}),{success:!0,resourceCount:t.files.length,warnings:t.warnings,errors:t.errors,generatedFiles:e}}throw t.errors.forEach(e=>{Q("\u274c ".concat(e),"error")}),new Error("WASM compilation failed: ".concat(t.errors.join(", ")))}catch(t){throw Q("\ud83d\udca5 WebAssembly execution failed: ".concat(t.message),"error"),t}},se=async(e,s)=>{try{Q("\ud83d\ude80 Starting FHIR Shorthand compilation...","info"),Q("\u2139\ufe0f Using JavaScript FSH processor with enhanced crash prevention","info");const n=()=>{if(performance.memory&&performance.memory.usedJSHeapSize){const e=performance.memory.usedJSHeapSize/1024/1024,s=30,t=20;if(e>s)throw new Error("Memory limit exceeded: ".concat(e.toFixed(1),"MB > ").concat(s,"MB. Processing stopped to prevent browser crash."));return e>t&&Q("\u26a0\ufe0f High memory usage: ".concat(e.toFixed(1),"MB (approaching ").concat(s,"MB limit)"),"warning"),e}return 0},a=n();Q("\ud83d\udcbe Initial memory usage: ".concat(a.toFixed(1)," MB"),"info");const r=1048576,o=5242880,l=5;let c=0;const d=[];for(const e of s.slice(0,l)){const s=e.content?e.content.length:0;if(s>r)Q("\u274c Skipping ".concat(e.name,": too large (").concat((s/1024/1024).toFixed(1),"MB > 1MB limit)"),"error");else{if(c+s>o){Q("\u26a0\ufe0f Stopping file processing: total size limit reached (".concat((c/1024/1024).toFixed(1),"MB)"),"warning");break}c+=s,d.push(e)}}s.length>l&&Q("\u26a0\ufe0f Limited to first ".concat(l," files (").concat(s.length," total) to prevent browser crashes"),"warning"),Q("\ud83d\udcca Processing ".concat(d.length," files (").concat((c/1024/1024).toFixed(1),"MB total)"),"info"),Q("\ud83d\udce6 Loading YAML processing library...","info");const h=await Promise.resolve().then(t.bind(t,55661));Q("\u2705 Libraries loaded successfully","success"),Q("\ud83d\udcdd Processing configuration...","info");let m=null;if(e)try{m="string"===typeof e?h.default.load(e):e,Q("\ud83d\udccb Package: ".concat(m.name||"Unknown"),"success"),Q("\ud83d\udccb Version: ".concat(m.version||"Unknown"),"success"),Q("\ud83d\udccb FHIR Version: ".concat(m.fhirVersion||"Unknown"),"success")}catch(i){Q("\u26a0\ufe0f Could not parse config: ".concat(i.message),"warning")}else m={name:"browser-generated-ig",version:"1.0.0",fhirVersion:"4.0.1",id:"browser.generated.ig",canonical:"http://example.org/fhir/ig/browser-generated",status:"draft"},Q("\ud83d\udccb Using default configuration","info");Q("\ud83d\udd0d Analyzing ".concat(d.length," FSH files with crash prevention..."),"info");const u=[];let p=0;const g=3,f=15,v=1;for(let e=0;e<d.length;e+=v){const s=d.slice(e,e+v);for(const e of s){Q("\ud83d\udcc4 Processing ".concat(e.name," (").concat(p+1,"/").concat(d.length,")..."),"info");const s=n();if(s>15){Q("\u26a0\ufe0f Stopping processing due to high memory usage (".concat(s.toFixed(1),"MB)"),"warning");break}if(u.length>=f){Q("\u26a0\ufe0f Reached maximum resource limit (".concat(f,"), stopping processing"),"warning");break}const t=e.content,a=e=>{try{const s={profiles:[],instances:[],valueSets:[],codeSystems:[],extensions:[]};if(!e||"string"!==typeof e)return s;const t=e.split("\n"),i=500;t.length>i&&Q("  \u26a0\ufe0f File is large (".concat(t.length," lines). Processing first ").concat(i," lines only."),"warning");const n=t.slice(0,Math.min(t.length,i));let a=null,r=null,o=0;const l=5;for(let e=0;e<n.length&&o<l;e++){const t=n[e].trim();if(t&&!t.startsWith("//")&&!t.startsWith("/*")){if(t.startsWith("Profile:")){if(o>=l)break;r="profiles",a={name:t.substring(8).trim(),type:"Profile",parent:null,id:null,title:null,description:null,rules:[]},o++}else if(t.startsWith("Instance:")){if(o>=l)break;r="instances",a={name:t.substring(9).trim(),type:"Instance",instanceOf:null,usage:null,title:null,description:null,rules:[]},o++}else if(t.startsWith("ValueSet:")){if(o>=l)break;r="valueSets",a={name:t.substring(9).trim(),type:"ValueSet",id:null,title:null,description:null,rules:[]},o++}else if(t.startsWith("CodeSystem:")){if(o>=l)break;r="codeSystems",a={name:t.substring(11).trim(),type:"CodeSystem",id:null,title:null,description:null,rules:[]},o++}else if(t.startsWith("Extension:")){if(o>=l)break;r="extensions",a={name:t.substring(10).trim(),type:"Extension",id:null,title:null,description:null,rules:[]},o++}a&&(t.startsWith("Parent:")?a.parent=t.substring(7).trim():t.startsWith("InstanceOf:")?a.instanceOf=t.substring(11).trim():t.startsWith("Usage:")?a.usage=t.substring(6).trim():t.startsWith("Id:")?a.id=t.substring(3).trim():t.startsWith("Title:")?a.title=t.substring(6).trim().replace(/['"]/g,""):t.startsWith("Description:")?a.description=t.substring(12).trim().replace(/['"]/g,""):t.startsWith("* ")&&a.rules.length<5&&a.rules.push(t.substring(2).trim()),(!t.includes(":")||t.startsWith("* ")||t.startsWith("Parent:")||t.startsWith("InstanceOf:")||t.startsWith("Usage:")||t.startsWith("Id:")||t.startsWith("Title:")||t.startsWith("Description:"))&&e!==n.length-1||(a&&r&&a.name&&s[r].push(a),a=null,r=null,e--))}}return o>=l&&Q("  \u26a0\ufe0f Limited to ".concat(l," definitions per file to prevent browser crashes"),"warning"),s}catch(i){return Q("  \u274c Error parsing FSH content: ".concat(i.message),"error"),{profiles:[],instances:[],valueSets:[],codeSystems:[],extensions:[]}}},r=a(t);let o=0;const l=f-u.length,c=Math.min(g,l);for(const e of r.profiles.slice(0,Math.min(1,c-o))){if(o>=c)break;try{const s=e.id||e.name.toLowerCase().replace(/\s+/g,"-"),t={resourceType:"StructureDefinition",id:s,url:"".concat(m.canonical,"/StructureDefinition/").concat(s),name:e.name,title:e.title||e.name,status:"draft",fhirVersion:m.fhirVersion||"4.0.1",kind:"resource",abstract:!1,type:"Patient"===e.parent?"Patient":"Observation"===e.parent?"Observation":e.parent||"DomainResource",baseDefinition:"http://hl7.org/fhir/StructureDefinition/".concat(e.parent||"DomainResource"),derivation:"constraint",description:e.description||"Profile for ".concat(e.name)};e.rules.length>0&&(t.differential={element:e.rules.slice(0,2).map((e,s)=>({id:"".concat(t.type,".").concat(e.split(" ")[0]),path:"".concat(t.type,".").concat(e.split(" ")[0]),short:"Rule: ".concat(e)}))}),u.push({type:"StructureDefinition",filename:"StructureDefinition-".concat(s,".json"),content:JSON.stringify(t,null,2),id:s,name:e.name,title:t.title,url:t.url}),o++,Q("  \ud83d\udcca Generated StructureDefinition: ".concat(e.name),"success")}catch(i){Q("  \u274c Error generating StructureDefinition for ".concat(e.name,": ").concat(i.message),"error")}}for(const e of r.instances.slice(0,Math.min(1,c-o))){if(o>=c)break;try{const s=e.name.toLowerCase().replace(/\s+/g,"-"),t="Patient"===e.instanceOf?"Patient":"Observation"===e.instanceOf?"Observation":"Patient",i={resourceType:t,id:s,meta:{profile:e.instanceOf?["".concat(m.canonical,"/StructureDefinition/").concat(e.instanceOf)]:void 0}};"Patient"===t&&(i.name=[{family:e.name.split(" ").pop(),given:e.name.split(" ").slice(0,-1)}]),u.push({type:t,filename:"".concat(s,".json"),content:JSON.stringify(i,null,2),id:s,resourceType:t}),o++,Q("  \ud83d\udcca Generated ".concat(t," instance: ").concat(e.name),"success")}catch(i){Q("  \u274c Error generating instance for ".concat(e.name,": ").concat(i.message),"error")}}for(const e of r.valueSets.slice(0,Math.min(1,c-o))){if(o>=c)break;try{const s=e.id||e.name.toLowerCase().replace(/\s+/g,"-"),t={resourceType:"ValueSet",id:s,url:"".concat(m.canonical,"/ValueSet/").concat(s),name:e.name,title:e.title||e.name,status:"draft",description:e.description||"ValueSet for ".concat(e.name),compose:{include:[{system:"http://example.org/codes",concept:[{code:"example1",display:"Example Code 1"}]}]}};u.push({type:"ValueSet",filename:"ValueSet-".concat(s,".json"),content:JSON.stringify(t,null,2),id:s,name:e.name,title:t.title,url:t.url}),o++,Q("  \ud83d\udcca Generated ValueSet: ".concat(e.name),"success")}catch(i){Q("  \u274c Error generating ValueSet for ".concat(e.name,": ").concat(i.message),"error")}}e.isFromStaging&&Q("  \ud83c\udfd7\ufe0f File from staging ground","info"),p++,e.content=null,window.gc&&"function"===typeof window.gc&&window.gc()}await new Promise(e=>setTimeout(e,200));const t=n();if(Q("\ud83d\udcbe Memory after file: ".concat(t.toFixed(1)," MB (processed ").concat(Math.min(e+v,d.length),"/").concat(d.length,")"),"info"),t>20){Q("\u26a0\ufe0f Stopping processing due to high memory usage","warning");break}}w(u);const y=n();Q("\ud83d\udcbe Final memory usage: ".concat(y.toFixed(1)," MB"),"info"),Q("\u2728 FSH compilation completed with crash prevention!","success"),Q("\ud83d\udce6 Generated ".concat(u.length," FHIR resources total (limited for stability)"),"success");const x=d.filter(e=>e.isFromStaging).length;return x>0&&Q("\ud83c\udfd7\ufe0f ".concat(x," file(s) from staging ground included"),"info"),0===d.length&&Q("\u26a0\ufe0f No FSH files found or all files too large to process safely","warning"),e||Q("\u26a0\ufe0f No sushi-config.yaml found - used default configuration","warning"),u.length>=f&&Q("\u26a0\ufe0f Output limited to ".concat(f," resources to prevent browser crashes"),"warning"),d.length<s.length&&Q("\u26a0\ufe0f ".concat(s.length-d.length," files skipped due to size limits"),"warning"),{success:!0,resourceCount:u.length,warnings:[],errors:[],generatedFiles:u}}catch(i){throw Q("\u274c Compilation failed: ".concat(i.message),"error"),i.stack&&console.error("Compilation error stack:",i.stack),i}},te=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u(!0),g(!0),y([]),w([]),W("logs"),U(null),V(e);try{Q("\ud83c\udfc1 Starting SUSHI client-side execution...","info"),e&&l.length>0&&Q("\ud83d\uddc2\ufe0f Including ".concat(l.length," staging files"),"info");const{config:s,fshFiles:t}=await(async()=>{try{Q("\ud83d\udd0d Fetching sushi-config.yaml...","info");let s=null;try{s=await a.A.getFileContent($,Z,"sushi-config.yaml",r),E(s),Q("\u2705 Found sushi-config.yaml","success")}catch(e){Q("\u26a0\ufe0f sushi-config.yaml not found in repository","warning")}Q("\ud83d\udd0d Scanning input/fsh directory recursively...","info");const t=[];try{const s=async function(i){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n>5)Q("\u26a0\ufe0f Maximum directory depth reached for ".concat(i),"warning");else try{const o=await a.A.getDirectoryContents($,Z,i,r);for(const i of o)if("file"===i.type&&i.name.endsWith(".fsh"))try{const e=await a.A.getFileContent($,Z,i.path,r);t.push({name:i.name,path:i.path,content:e}),Q("\ud83d\udcc4 Found ".concat(i.path),"success")}catch(e){Q("\u274c Failed to fetch ".concat(i.path,": ").concat(e.message),"error")}else"dir"===i.type&&(Q("\ud83d\udcc1 Scanning subdirectory: ".concat(i.path),"info"),await s(i.path,n+1))}catch(e){Q("\u26a0\ufe0f Could not scan directory ".concat(i,": ").concat(e.message),"warning")}};await s("input/fsh")}catch(e){Q("\u26a0\ufe0f input/fsh directory not found or empty","warning")}return B(t),Q("\ud83d\udcca Found ".concat(t.length," FSH files in repository"),"info"),{config:s,fshFiles:t}}catch(e){throw Q("\u274c Error fetching repository files: ".concat(e.message),"error"),e}})(),i=e?(e=>{const s=[...e];return l.forEach(e=>{if(e.path&&e.path.endsWith(".fsh")){const t=e.path.split("/").pop(),i=s.findIndex(e=>e.name===t);i>=0?(s[i]=(0,c.A)((0,c.A)({},s[i]),{},{content:e.content,isFromStaging:!0}),Q("\ud83d\udd04 Overriding ".concat(t," with staging version"),"info")):(s.push({name:t,path:e.path,content:e.content,isFromStaging:!0}),Q("\u2795 Adding ".concat(t," from staging"),"info"))}}),s})(t):t;e&&Q("\ud83d\udcca Final file count: ".concat(i.length," FSH files"),"info"),await(async(e,s)=>{try{const t="wasm"===z||"auto"===z&&q&&X,i=t?"WebAssembly":"JavaScript";let n;Q("\ud83d\ude80 Starting FHIR Shorthand compilation using ".concat(i,"..."),"info"),k.startTiming("sushi-compilation",t?"wasm":"js"),t?(Q("\ud83d\udd27 Using WebAssembly SUSHI engine...","info"),n=await ee(e,s)):(Q("\u2699\ufe0f Using JavaScript fallback engine...","info"),n=await se(e,s));const a=k.endTiming("sushi-compilation",t?"wasm":"js");return Q("\u23f1\ufe0f Compilation completed in ".concat(a.toFixed(2),"ms using ").concat(i),"success"),n}catch(t){if(Q("\u274c Compilation failed: ".concat(t.message),"error"),"auto"===z&&q){Q("\ud83d\udd04 Attempting JavaScript fallback...","info");try{return await se(e,s)}catch(i){throw Q("\u274c JavaScript fallback also failed: ".concat(i.message),"error"),i}}throw t}})(s,i),Q("\ud83c\udf89 SUSHI execution completed successfully!","success")}catch(s){U(s.message),Q("\ud83d\udca5 Execution failed: ".concat(s.message),"error")}finally{u(!1)}},ie=(0,i.useCallback)(e=>{D(s=>(0,c.A)((0,c.A)({},s),{},{[e]:!s[e]}))},[]),ne=(0,i.useCallback)(()=>{y([]),w([]),W("logs"),D({info:!0,success:!0,warning:!0,error:!0}),R("")},[]),ae=(0,i.useCallback)(async()=>{const e=f.map(e=>"[".concat(new Date(e.timestamp).toLocaleTimeString(),"] ").concat(e.message)).join("\n");try{await navigator.clipboard.writeText(e)}catch(s){console.error("Failed to copy logs:",s)}},[f]),re=(0,i.useCallback)(async e=>{try{await navigator.clipboard.writeText(e)}catch(s){console.error("Failed to copy log message:",s)}},[]),oe=(0,i.useCallback)((e,s)=>{const t=[...e.matchAll(/(?:^|\s)((?:input\/fsh\/[a-zA-Z0-9_/-]*\/)?[a-zA-Z0-9_.-]+\.(?:fsh|yaml|yml|json))(?=\s|$|[.,!])/g)];if(0===t.length)return(0,v.jsx)("span",{children:e});let i=0;const n=[];let a=0;return t.forEach((t,o)=>{const c=t[0],d=t[1],h=t.index;h>i&&n.push((0,v.jsx)("span",{children:e.substring(i,h)},"".concat(s,"-text-").concat(a++)));const m=c.substring(0,c.indexOf(d));m&&n.push((0,v.jsx)("span",{children:m},"".concat(s,"-ws-").concat(a++)));n.push(((e,t,i)=>{const n=O.some(s=>s.path===e),a=l.some(s=>s.path&&(s.path===e||s.path.endsWith("/".concat(e.split("/").pop()))));if(!n&&!a&&!("sushi-config.yaml"===e))return(0,v.jsx)("span",{className:"file-mention",children:t},"".concat(s,"-text-").concat(i));if(a)return(0,v.jsxs)("span",{className:"file-link staging-link",title:"File from Staging Ground",children:["\ud83d\udcdd ",t]},"".concat(s,"-staging-").concat(i));if(e.startsWith("input/fsh/")){const n=(e=>{const s=e.split("/");if(s.length>2){switch(s[2]){case"profiles":return{component:"Profiles",icon:"\ud83d\udc64"};case"examples":return{component:"Examples",icon:"\ud83d\udccb"};case"valuesets":return{component:"ValueSets",icon:"\ud83d\udcca"};case"codesystems":return{component:"CodeSystems",icon:"\ud83d\udd22"};case"extensions":return{component:"Extensions",icon:"\ud83d\udd27"};default:return{component:"FSH Files",icon:"\ud83d\udcc4"}}}return{component:"FSH Files",icon:"\ud83d\udcc4"}})(e);return(0,v.jsxs)("span",{className:"file-link dak-link",title:"View in DAK ".concat(n.component),children:[n.icon," ",t]},"".concat(s,"-dak-").concat(i))}{const n="https://github.com/".concat($,"/").concat(Z,"/blob/").concat(r,"/").concat(e);return(0,v.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"file-link github-link",title:"Open in GitHub",children:["\ud83d\udd17 ",t]},"".concat(s,"-github-").concat(i))}})(d,d,a++)),i=h+c.length}),i<e.length&&n.push((0,v.jsx)("span",{children:e.substring(i)},"".concat(s,"-text-end-").concat(a++))),(0,v.jsx)("span",{children:n})},[$,Z,r,l,O]),le=(0,i.useMemo)(()=>f.filter(e=>{const s=H[e.type],t=""===L||e.message.toLowerCase().includes(L.toLowerCase());return s&&t}),[f,H,L]),ce=i.memo(e=>{let{logLevelToggles:s,onToggleLogLevel:t,searchText:n,onSearchChange:a,filteredCount:r,totalCount:o}=e;const l=(0,i.useCallback)(e=>{a(e.target.value)},[a]);return(0,v.jsxs)("div",{className:"log-controls",children:[(0,v.jsxs)("div",{className:"log-level-toggles",children:[(0,v.jsx)("label",{className:"toggle-group-label",children:"Show levels:"}),(0,v.jsx)("div",{className:"toggle-buttons",children:[{key:"info",label:"Info",icon:"\u2139\ufe0f"},{key:"success",label:"Success",icon:"\u2705"},{key:"warning",label:"Warning",icon:"\u26a0\ufe0f"},{key:"error",label:"Error",icon:"\u274c"}].map(e=>{let{key:i,label:n,icon:a}=e;return(0,v.jsxs)("button",{className:"log-toggle-btn ".concat(s[i]?"active":"inactive"),onClick:()=>t(i),title:"Toggle ".concat(n," messages"),children:[a," ",n]},i)})})]}),(0,v.jsxs)("div",{className:"log-search-group",children:[(0,v.jsx)("label",{htmlFor:"log-search",children:"Search logs:"}),(0,v.jsx)("input",{id:"log-search",type:"text",value:n,onChange:l,placeholder:"Search log messages...",className:"log-search-input"})]}),(0,v.jsx)("div",{className:"log-stats",children:n||Object.values(s).some(e=>!e)?(0,v.jsxs)("span",{children:["Showing ",r," of ",o," logs"]}):(0,v.jsxs)("span",{children:[o," logs"]})})]})}),de=(0,i.useCallback)(e=>{R(e)},[]),he=(0,i.useCallback)(e=>{A(e),M(!0)},[]),me=(0,i.useCallback)(()=>{M(!1),A(null)},[]),ue=e=>{switch(e){case"StructureDefinition":return"\ud83c\udfd7\ufe0f";case"Patient":return"\ud83d\udc64";case"ValueSet":return"\ud83d\udcca";case"CodeSystem":return"\ud83d\udd22";case"Organization":return"\ud83c\udfe2";case"Practitioner":return"\ud83d\udc68\u200d\u2695\ufe0f";case"Observation":return"\ud83d\udccb";default:return"\ud83d\udcc4"}},pe=()=>I?(0,v.jsx)("div",{className:"file-viewer-overlay",children:(0,v.jsxs)("div",{className:"file-viewer-modal",children:[(0,v.jsxs)("div",{className:"file-viewer-header",children:[(0,v.jsxs)("h3",{children:[ue(I.type)," ",I.filename]}),(0,v.jsxs)("div",{className:"file-viewer-actions",children:[(0,v.jsx)("button",{onClick:()=>navigator.clipboard.writeText(I.content),className:"copy-file-btn",title:"Copy file content to clipboard",children:"\ud83d\udccb Copy"}),(0,v.jsx)("button",{onClick:me,className:"close-file-viewer-btn",children:"\u2715"})]})]}),(0,v.jsx)("div",{className:"file-viewer-content",children:(0,v.jsx)(b.A,{language:"json",style:j.A,showLineNumbers:!0,wrapLines:!0,customStyle:{fontSize:"14px",lineHeight:"1.4",maxHeight:"70vh",overflow:"auto"},children:I.content})}),(0,v.jsx)("div",{className:"file-viewer-footer",children:(0,v.jsxs)("span",{className:"file-info",children:["Resource Type: ",I.type," | Size: ",(I.content.length/1024).toFixed(1)," KB"]})})]})}):null,ge=()=>(0,v.jsx)("div",{className:"sushi-modal-overlay",children:(0,v.jsxs)("div",{className:"sushi-modal",children:[(0,v.jsxs)("div",{className:"sushi-modal-header",children:[(0,v.jsxs)("h3",{children:["\ud83c\udf63 SUSHI Client-Side Execution",_&&(0,v.jsx)("span",{className:"staging-badge",children:"+ Staging"})]}),(0,v.jsxs)("div",{className:"modal-actions",children:[(0,v.jsx)("button",{onClick:ae,className:"copy-all-btn",disabled:0===f.length,title:"Copy all logs to clipboard",children:"\ud83d\udccb Copy All"}),(0,v.jsx)("button",{onClick:ne,className:"clear-logs-btn",disabled:m,children:"\ud83d\uddd1\ufe0f Clear"}),(0,v.jsx)("button",{onClick:()=>g(!1),className:"close-modal-btn",children:"\u2715"})]})]}),(0,v.jsx)(ce,{logLevelToggles:H,onToggleLogLevel:ie,searchText:L,onSearchChange:de,filteredCount:le.length,totalCount:f.length}),x.length>0&&(0,v.jsxs)("div",{className:"modal-section-toggle",children:[(0,v.jsxs)("div",{className:"toggle-options",children:[(0,v.jsx)("button",{className:"toggle-btn ".concat("logs"===P?"active":""),onClick:()=>W("logs"),children:"\ud83d\udcc4 Logs & Messages"}),(0,v.jsx)("button",{className:"toggle-btn ".concat("files"===P?"active":""),onClick:()=>W("files"),children:"\ud83d\udce6 Generated Resources"})]}),(0,v.jsx)("div",{className:"section-info",children:"logs"===P?(0,v.jsxs)("span",{className:"info-text",children:[f.length," log entries \u2022 Use toggles to filter by level"]}):(0,v.jsxs)("span",{className:"info-text",children:[x.length," FHIR resources generated"]})})]}),(0,v.jsxs)("div",{className:"sushi-modal-content",children:[("logs"===P||0===x.length)&&(0,v.jsxs)("div",{className:"log-container",children:[le.map(e=>(0,v.jsxs)("div",{className:"log-entry log-".concat(e.type),children:[(0,v.jsx)("span",{className:"log-timestamp",children:new Date(e.timestamp).toLocaleTimeString()}),(0,v.jsx)("span",{className:"log-message",children:oe(e.message,e.id)}),(0,v.jsx)("button",{onClick:()=>re(e.message),className:"copy-log-btn",title:"Copy this message to clipboard",children:"\ud83d\udccb"})]},e.id)),m&&(0,v.jsxs)("div",{className:"log-entry log-running",children:[(0,v.jsx)("span",{className:"log-timestamp",children:(new Date).toLocaleTimeString()}),(0,v.jsxs)("span",{className:"log-message",children:[(0,v.jsx)("span",{className:"spinner",children:"\u23f3"})," Processing..."]}),(0,v.jsx)("div",{className:"copy-log-btn-placeholder"})]}),0===le.length&&!m&&f.length>0&&(0,v.jsx)("div",{className:"log-placeholder",children:"No logs match the current filter criteria..."}),0===f.length&&!m&&(0,v.jsx)("div",{className:"log-placeholder",children:"Logs will appear here during SUSHI execution..."}),G&&(0,v.jsxs)("div",{className:"error-summary",children:[(0,v.jsx)("h4",{children:"\u274c Execution Error"}),(0,v.jsx)("p",{children:G})]})]}),"files"===P&&x.length>0&&(0,v.jsx)("div",{className:"generated-files-container",children:(0,v.jsxs)("div",{className:"generated-files-section",children:[(0,v.jsxs)("h4",{children:["\ud83d\udce6 Generated FHIR Resources (",x.length,")"]}),(0,v.jsx)("div",{className:"generated-files-grid",children:x.map((e,s)=>(0,v.jsxs)("div",{className:"generated-file-card",children:[(0,v.jsxs)("div",{className:"file-card-header",children:[(0,v.jsx)("span",{className:"file-icon",children:ue(e.type)}),(0,v.jsx)("span",{className:"file-name",children:e.filename})]}),(0,v.jsxs)("div",{className:"file-card-details",children:[(0,v.jsx)("span",{className:"file-type",children:e.type}),(0,v.jsxs)("span",{className:"file-size",children:[(e.content.length/1024).toFixed(1)," KB"]})]}),(0,v.jsxs)("div",{className:"file-card-actions",children:[(0,v.jsx)("button",{onClick:()=>he(e),className:"view-file-btn",title:"View resource content",children:"\ud83d\udc41\ufe0f View"}),(0,v.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.content),className:"copy-file-btn",title:"Copy to clipboard",children:"\ud83d\udccb"})]})]},s))}),(0,v.jsxs)("div",{className:"fhir-viewer-suggestions",children:[(0,v.jsx)("h5",{children:"\ud83d\udca1 Enhanced FHIR Viewing Options"}),(0,v.jsx)("p",{children:"For better FHIR resource visualization, consider these viewers:"}),(0,v.jsxs)("ul",{children:[(0,v.jsxs)("li",{children:[(0,v.jsx)("strong",{children:"FHIR Tree Viewer:"})," ",(0,v.jsx)("code",{children:"npm install @types/fhir"})," + custom tree renderer"]}),(0,v.jsxs)("li",{children:[(0,v.jsx)("strong",{children:"FHIR Path Viewer:"})," ",(0,v.jsx)("code",{children:"npm install fhirpath"})," for interactive querying"]}),(0,v.jsxs)("li",{children:[(0,v.jsx)("strong",{children:"FHIR UI:"})," ",(0,v.jsx)("code",{children:"npm install @asymmetrik/fhir-kit-client"})," with UI components"]}),(0,v.jsxs)("li",{children:[(0,v.jsx)("strong",{children:"HL7 FHIR Viewer:"})," Integration with official HL7 FHIR viewers"]})]})]})]})})]}),(0,v.jsx)("div",{className:"sushi-modal-footer",children:(0,v.jsx)("div",{className:"execution-info",children:m?(0,v.jsx)("span",{className:"status-running",children:"\ud83d\udd04 Running SUSHI..."}):f.length>0?(0,v.jsx)("span",{className:"status-complete",children:"\u2705 Execution complete"}):(0,v.jsx)("span",{className:"status-ready",children:"\ud83c\udf63 Ready to run SUSHI"})})})]})});return(0,v.jsx)(F,{children:(0,v.jsxs)("div",{className:"sushi-runner-section",children:[(0,v.jsxs)("div",{className:"sushi-status-bar ".concat(d?"expanded":"collapsed"),onClick:()=>h(!d),children:[(0,v.jsxs)("div",{className:"status-bar-header",children:[(0,v.jsx)("span",{className:"status-icon",children:"\ud83c\udf63"}),(0,v.jsx)("span",{className:"status-title",children:"SUSHI (FHIR Shorthand)"}),(0,v.jsx)("span",{className:"expand-icon",children:d?"\u25bc":"\u25b6"})]}),!d&&(0,v.jsx)("div",{className:"status-summary",children:"Client-side FHIR Implementation Guide compilation"})]}),d&&(0,v.jsxs)("div",{className:"sushi-controls",children:[(0,v.jsx)("div",{className:"sushi-description",children:(0,v.jsx)("p",{children:"Run SUSHI (FHIR Shorthand) compilation directly in your browser to generate FHIR Implementation Guide resources from FSH files."})}),(0,v.jsxs)("div",{className:"execution-options",children:[(0,v.jsxs)("div",{className:"execution-mode-selector",children:[(0,v.jsx)("h4",{children:"\u2699\ufe0f Execution Mode"}),(0,v.jsxs)("div",{className:"mode-options",children:[(0,v.jsxs)("label",{className:"mode-option",children:[(0,v.jsx)("input",{type:"radio",name:"executionMode",value:"auto",checked:"auto"===z,onChange:e=>J(e.target.value)}),(0,v.jsxs)("span",{className:"mode-label",children:["\ud83e\udd16 Auto (WebAssembly when available)",q&&X&&(0,v.jsx)("span",{className:"wasm-badge",children:"WASM Ready"})]})]}),q&&(0,v.jsxs)("label",{className:"mode-option",children:[(0,v.jsx)("input",{type:"radio",name:"executionMode",value:"wasm",checked:"wasm"===z,onChange:e=>J(e.target.value),disabled:!X}),(0,v.jsxs)("span",{className:"mode-label",children:["\ud83d\ude80 WebAssembly (High Performance)",!X&&(0,v.jsx)("span",{className:"loading-badge",children:"Initializing..."})]})]}),(0,v.jsxs)("label",{className:"mode-option",children:[(0,v.jsx)("input",{type:"radio",name:"executionMode",value:"javascript",checked:"javascript"===z,onChange:e=>J(e.target.value)}),(0,v.jsx)("span",{className:"mode-label",children:"\u2699\ufe0f JavaScript (Fallback)"})]})]}),!q&&(0,v.jsx)("div",{className:"wasm-not-supported",children:(0,v.jsx)("p",{children:"\u26a0\ufe0f WebAssembly is not supported in this browser. JavaScript fallback will be used."})})]}),(0,v.jsxs)("div",{className:"option-group",children:[(0,v.jsx)("h4",{children:"\ud83d\udcc2 Repository Files Only"}),(0,v.jsxs)("p",{children:["Compile using sushi-config.yaml and input/fsh files from the GitHub repository (",r," branch)."]}),(0,v.jsx)("button",{className:"run-sushi-btn primary",onClick:()=>te(!1),disabled:m,children:m?"\u23f3 Running...":"\ud83d\ude80 Run SUSHI"})]}),l.length>0&&(0,v.jsxs)("div",{className:"option-group",children:[(0,v.jsx)("h4",{children:"\ud83c\udfd7\ufe0f Repository + Staging Files"}),(0,v.jsxs)("p",{children:["Compile using repository files, with staging ground files (",l.length," files) overriding any repository files with the same name."]}),(0,v.jsx)("button",{className:"run-sushi-btn secondary",onClick:()=>te(!0),disabled:m,children:m?"\u23f3 Running...":"\ud83d\ude80 Run SUSHI + Staging"})]})]}),(0,v.jsxs)("div",{className:"sushi-status",children:[(0,v.jsxs)("div",{className:"status-item",children:[(0,v.jsx)("span",{className:"label",children:"Execution:"}),(0,v.jsx)("span",{className:"value",children:q&&X?"\ud83d\ude80 WebAssembly Ready":"\u2699\ufe0f JavaScript"})]}),(0,v.jsxs)("div",{className:"status-item",children:[(0,v.jsx)("span",{className:"label",children:"Config:"}),(0,v.jsx)("span",{className:"value",children:T?"\u2705 Found":"\u2753 Unknown"})]}),(0,v.jsxs)("div",{className:"status-item",children:[(0,v.jsx)("span",{className:"label",children:"FSH Files:"}),(0,v.jsxs)("span",{className:"value",children:[O.length," in repository"]})]}),l.length>0&&(0,v.jsxs)("div",{className:"status-item",children:[(0,v.jsx)("span",{className:"label",children:"Staging:"}),(0,v.jsxs)("span",{className:"value",children:[l.filter(e=>e.path&&e.path.endsWith(".fsh")).length," FSH files"]})]})]})]}),p&&(0,v.jsx)(ge,{}),C&&(0,v.jsx)(pe,{})]})})},I=e=>{var s;let{profile:t,repository:n,selectedBranch:r,hasWriteAccess:o}=e;const[l,c]=(0,i.useState)([]),[d,h]=(0,i.useState)([]),[m,u]=(0,i.useState)({}),[p,g]=(0,i.useState)(!0),[f,y]=(0,i.useState)(null),[b,j]=(0,i.useState)([]),w=(null===(s=n.owner)||void 0===s?void 0:s.login)||n.full_name.split("/")[0],N=n.name;(0,i.useEffect)(()=>{(async()=>{try{if(g(!0),y(null),null!==t&&void 0!==t&&t.isDemo){c([{name:"main",commit:{sha:"abc123"}},{name:"feature/updates",commit:{sha:"def456"}},{name:"dev",commit:{sha:"ghi789"}}]);h([{id:"pages-build",name:"Deploy to GitHub Pages",triggers:["push","manual"]}]);const e={main:{status:"completed",conclusion:"success",html_url:"https://github.com/".concat(w,"/").concat(N,"/actions/runs/123456"),updated_at:(new Date).toISOString()},"feature/updates":{status:"completed",conclusion:"action_required",html_url:"https://github.com/".concat(w,"/").concat(N,"/actions/runs/123457"),updated_at:(new Date).toISOString()},dev:{status:"completed",conclusion:"failure",html_url:"https://github.com/".concat(w,"/").concat(N,"/actions/runs/123458"),updated_at:(new Date).toISOString()}};return u(e),void g(!1)}const s=(await a.A.getBranches(w,N)).filter(e=>"gh-pages"!==e.name);c(s);const i=await a.A.getWorkflows(w,N);h(i);const n=i.find(e=>e.name.toLowerCase().includes("build")||e.name.toLowerCase().includes("publish")||e.name.toLowerCase().includes("pages"));if(n&&n.id){const t={};for(const i of s)try{const e=await a.A.getWorkflowRunsForWorkflow(w,N,n.id,{branch:i.name,per_page:1});e.length>0&&(t[i.name]=e[0])}catch(e){console.warn("Could not fetch workflow runs for branch ".concat(i.name,":"),e)}u(t)}else n&&!n.id&&console.warn("Found workflow but missing ID:",n);g(!1)}catch(e){console.error("Error fetching publication data:",e),y("Failed to load publication data"),g(!1)}})()},[w,N,null===t||void 0===t?void 0:t.isDemo]);return p?(0,v.jsx)("div",{className:"publications-loading",children:(0,v.jsxs)("div",{className:"loading-content",children:[(0,v.jsx)("h3",{children:"Loading Publications..."}),(0,v.jsx)("p",{children:"Fetching branch and workflow information..."})]})}):f?(0,v.jsx)("div",{className:"publications-error",children:(0,v.jsxs)("div",{className:"error-content",children:[(0,v.jsx)("h3",{children:"Error Loading Publications"}),(0,v.jsx)("p",{children:f})]})}):(0,v.jsxs)("div",{className:"publications-section",children:[(0,v.jsx)(M,{repository:n,selectedBranch:r,profile:t,stagingFiles:b}),(0,v.jsx)(x,{repository:n,selectedBranch:r,hasWriteAccess:o,profile:t,onStagingFilesChange:j}),(0,v.jsxs)("div",{className:"section-header",children:[(0,v.jsx)("h3",{className:"section-title",children:"Published DAK Content"}),(0,v.jsx)("p",{className:"section-description",children:"Access published Implementation Guide content for this DAK repository. Each branch is published automatically via GitHub Actions to GitHub Pages."})]}),(0,v.jsx)("div",{className:"publications-grid",children:l.map(e=>{const s=e.name===n.default_branch||"main"===e.name,i=(r=e.name)===n.default_branch||"main"===r?"https://".concat(w,".github.io/").concat(N,"/"):"https://".concat(w,".github.io/").concat(N,"/branches/").concat(r,"/");var r;const l=(e=>{const s=m[e];if(!s)return{icon:"\u26aa",title:"No recent workflow runs",link:null};const t=s.status,i=s.conclusion;return"in_progress"===t||"queued"===t?{icon:"\ud83d\udd04",title:"Workflow running",link:s.html_url,className:"running"}:"success"===i?{icon:"\u2705",title:"Last build successful",link:s.html_url,className:"success"}:"failure"===i?{icon:"\u274c",title:"Last build failed",link:s.html_url,className:"failure"}:"action_required"===i?{icon:"\u23f3",title:"Workflow requires approval",link:s.html_url,className:"approval-required"}:{icon:"\u26a0\ufe0f",title:"Build ".concat(i||t),link:s.html_url,className:"warning"}})(e.name);return(0,v.jsxs)("div",{className:"publication-card ".concat(s?"main-branch":""),children:[(0,v.jsxs)("div",{className:"publication-header",children:[(0,v.jsxs)("div",{className:"branch-info",children:[(0,v.jsx)("span",{className:"branch-icon",children:"\ud83c\udf3f"}),(0,v.jsx)("span",{className:"branch-name",children:e.name}),s&&(0,v.jsx)("span",{className:"main-badge",children:"MAIN"})]}),(0,v.jsx)("div",{className:"workflow-status",children:l.link?(0,v.jsx)("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"status-icon ".concat(l.className||""),title:l.title,children:l.icon}):(0,v.jsx)("span",{className:"status-icon ".concat(l.className||""),title:l.title,children:l.icon})})]}),(0,v.jsxs)("div",{className:"publication-content",children:[(0,v.jsxs)("div",{className:"publication-url",children:[(0,v.jsx)("label",{children:"Published at:"}),(0,v.jsxs)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"publication-link",children:[i,(0,v.jsx)("span",{className:"external-link",children:"\u2197"})]})]}),(0,v.jsxs)("div",{className:"publication-actions",children:[(0,v.jsx)("button",{className:"restart-workflow-btn",onClick:()=>(async e=>{if(null!==t&&void 0!==t&&t.isDemo)return void alert("Demo Mode: Workflow restart simulated for branch: ".concat(e));const s=d.find(e=>e.name.toLowerCase().includes("build")||e.name.toLowerCase().includes("publish")||e.name.toLowerCase().includes("pages"));if(s){if(!s.id)return alert("Workflow found but missing ID - cannot restart"),void console.warn("Workflow missing ID:",s);try{await a.A.triggerWorkflow(w,N,s.id,e),alert("Workflow restarted for branch: ".concat(e)),setTimeout(()=>{window.location.reload()},2e3)}catch(i){console.error("Error restarting workflow:",i),alert("Failed to restart workflow. Please check your permissions.")}}else alert("No suitable workflow found to restart")})(e.name),disabled:!o,title:o?"Restart build workflow for this branch":"Write permissions required",children:"\ud83d\udd04 Rebuild"}),(0,v.jsx)("a",{href:"https://github.com/".concat(w,"/").concat(N,"/tree/").concat(e.name),target:"_blank",rel:"noopener noreferrer",className:"view-source-btn",title:"View source code for this branch",children:"\ud83d\udc41\ufe0f View Source"})]})]})]},e.name)})}),0===l.length&&(0,v.jsx)("div",{className:"no-branches",children:(0,v.jsx)("p",{children:"No publishable branches found (excluding gh-pages)."})})]})};var A=t(73537),P=t(13333);const W=e=>{let{profile:s,repository:t,selectedBranch:n}=e;const r=(0,A.Zp)(),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)([]),[h,m]=(0,i.useState)(!0),[u,p]=(0,i.useState)(null),[g,f]=(0,i.useState)(null),y=i.useCallback(()=>t?"sgex_fork_status_".concat(t.full_name):null,[t]);(0,i.useEffect)(()=>{const e=y();if(e){const s=sessionStorage.getItem(e);null!==s&&l(JSON.parse(s))}},[y]);(0,i.useEffect)(()=>{(async()=>{if(t){m(!0),p(null);try{let s=t;if(!t.parent&&(!0===t.fork||void 0===t.fork))try{s=await a.A.getRepository(t.owner.login,t.name)}catch(e){console.warn("Could not fetch full repository details:",e)}s.fork&&s.parent&&f(s.parent);const i=await a.A.getRepositoryForks(t.owner.login,t.name);d(i)}catch(s){console.error("Error fetching repository information:",s),p(s.message)}finally{m(!1)}}})()},[t]);const x=e=>{const s=e.owner.login,t=e.name,i=e.default_branch||"main";return"/dashboard/".concat(s,"/").concat(t,"/").concat(i)},b=e=>{if(!g)return;const s=x(g),t={profile:{login:g.owner.login,name:g.owner.login,avatar_url:g.owner.avatar_url,type:g.owner.type},repository:g,selectedBranch:g.default_branch||"main"};(0,P.hX)(e,s,r,t)};return!t||h?(0,v.jsx)("div",{className:"fork-status-bar loading",children:(0,v.jsxs)("div",{className:"fork-status-header",children:[(0,v.jsxs)("div",{className:"fork-badge-placeholder",children:[(0,v.jsx)("span",{className:"fork-icon",children:"\ud83c\udf74"}),(0,v.jsx)("span",{className:"fork-count",children:"..."})]}),(0,v.jsx)("span",{className:"fork-status-title",children:"Loading repository info..."})]})}):u?(0,v.jsx)("div",{className:"fork-status-bar error",children:(0,v.jsxs)("div",{className:"fork-status-header",children:[(0,v.jsxs)("div",{className:"fork-badge",children:[(0,v.jsx)("span",{className:"fork-icon",children:"\ud83c\udf74"}),(0,v.jsx)("span",{className:"fork-count",children:"?"})]}),(0,v.jsx)("span",{className:"fork-status-title",children:"Unable to load repository info"})]})}):(0,v.jsxs)("div",{className:"fork-status-bar ".concat(o?"expanded":"collapsed"),children:[(0,v.jsxs)("div",{className:"fork-status-header",onClick:()=>{const e=!o;l(e);const s=y();s&&sessionStorage.setItem(s,JSON.stringify(e))},children:[(0,v.jsxs)("div",{className:"fork-badge",children:[(0,v.jsx)("span",{className:"fork-icon",children:"\ud83c\udf74"}),(0,v.jsx)("span",{className:"fork-count",children:c.length})]}),(0,v.jsx)("span",{className:"fork-status-title",children:g?(0,v.jsxs)(v.Fragment,{children:["Fork of"," ",(0,v.jsxs)("span",{className:"parent-repo-link",onClick:e=>{e.stopPropagation(),b(e)},children:[g.owner.login,"/",g.name]}),c.length>0&&(0,v.jsxs)(v.Fragment,{children:[" \u2022 ",c.length," fork",1!==c.length?"s":""]})]}):(0,v.jsxs)(v.Fragment,{children:[c.length," fork",1!==c.length?"s":""," of ",(null===t||void 0===t?void 0:t.name)||"repository"]})}),(0,v.jsx)("button",{className:"fork-toggle-btn","aria-label":o?"Collapse":"Expand",children:(0,v.jsx)("span",{className:"toggle-icon ".concat(o?"expanded":""),children:"\u25bc"})})]}),o&&(0,v.jsxs)("div",{className:"fork-list",children:[g&&(0,v.jsxs)("div",{className:"parent-section",children:[(0,v.jsx)("h4",{className:"section-title",children:"Parent Repository"}),(0,v.jsxs)("div",{className:"fork-item parent-item",onClick:e=>b(e),children:[(0,v.jsx)("div",{className:"fork-avatar",children:(0,v.jsx)("img",{src:g.owner.avatar_url,alt:g.owner.login,className:"fork-owner-avatar"})}),(0,v.jsxs)("div",{className:"fork-info",children:[(0,v.jsxs)("div",{className:"fork-name",children:[(0,v.jsxs)("strong",{children:[g.owner.login,"/",g.name]}),(0,v.jsx)("span",{className:"parent-badge",children:"Parent"})]}),(0,v.jsx)("div",{className:"fork-description",children:g.description||"No description available"}),(0,v.jsxs)("div",{className:"fork-stats",children:[(0,v.jsxs)("span",{className:"fork-stat",children:["\u2b50 ",g.stargazers_count]}),(0,v.jsxs)("span",{className:"fork-stat",children:["\ud83d\udcdd ",g.open_issues_count," issues"]}),(0,v.jsxs)("span",{className:"fork-stat",children:["\ud83d\udcc5 Updated ",new Date(g.updated_at).toLocaleDateString()]})]})]}),(0,v.jsx)("div",{className:"fork-actions",children:(0,v.jsx)("span",{className:"fork-link-hint",children:"Click to view DAK \u2192"})})]})]}),0===c.length?!g&&(0,v.jsx)("div",{className:"no-forks",children:(0,v.jsx)("p",{children:"No forks found for this repository."})}):(0,v.jsxs)("div",{className:"forks-section",children:[g&&(0,v.jsxs)("h4",{className:"section-title",children:["Forks (",c.length,")"]}),(0,v.jsx)("div",{className:"fork-items",children:c.map(e=>(0,v.jsxs)("div",{className:"fork-item",onClick:s=>((e,s)=>{const t=x(s),i={profile:{login:s.owner.login,name:s.owner.login,avatar_url:s.owner.avatar_url,type:s.owner.type},repository:s,selectedBranch:s.default_branch||"main"};(0,P.hX)(e,t,r,i)})(s,e),children:[(0,v.jsx)("div",{className:"fork-avatar",children:(0,v.jsx)("img",{src:e.owner.avatar_url,alt:e.owner.login,className:"fork-owner-avatar"})}),(0,v.jsxs)("div",{className:"fork-info",children:[(0,v.jsx)("div",{className:"fork-name",children:(0,v.jsxs)("strong",{children:[e.owner.login,"/",e.name]})}),(0,v.jsx)("div",{className:"fork-description",children:e.description||"No description available"}),(0,v.jsxs)("div",{className:"fork-stats",children:[(0,v.jsxs)("span",{className:"fork-stat",children:["\u2b50 ",e.stargazers_count]}),(0,v.jsxs)("span",{className:"fork-stat",children:["\ud83d\udcdd ",e.open_issues_count," issues"]}),(0,v.jsxs)("span",{className:"fork-stat",children:["\ud83d\udcc5 Updated ",new Date(e.updated_at).toLocaleDateString()]})]})]}),(0,v.jsx)("div",{className:"fork-actions",children:(0,v.jsx)("span",{className:"fork-link-hint",children:"Click to view DAK \u2192"})})]},e.id))})]})]})]})},H=()=>{const{profile:e,repository:s,branch:t,navigate:l}=(0,n.oc)(),[c,d]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),[u,p]=(0,i.useState)("core"),[g,f]=(0,i.useState)({});(0,i.useEffect)(()=>{(async()=>{if(s&&a.A.isAuth())try{const e=await a.A.checkRepositoryWritePermissions(s.owner.login,s.name);d(e)}catch(e){console.error("Error checking repository permissions:",e),d(!1)}else d(!1)})()},[s]),(0,i.useEffect)(()=>{e&&s&&t&&r.default.setBranchContext(e.login,s.name,t)},[e,s,t]),(0,i.useEffect)(()=>{(async()=>{if(s&&a.A.isAuth())try{const e=await a.A.getIssues(s.owner.login,s.name),t={};e.forEach(e=>{e.labels.forEach(e=>{t[e.name]=(t[e.name]||0)+1})}),f(t)}catch(e){console.warn("Could not fetch issue counts:",e)}})()},[s]);const y=i=>{e&&s&&l("/".concat(i,"/").concat(e.login,"/").concat(s.name,"/").concat(t),{state:{profile:e,repository:s,selectedBranch:t}})},x=[{id:"health-interventions",title:"Health Interventions and Recommendations",description:"Clinical guidelines and health intervention specifications that define evidence-based care recommendations",icon:"\ud83d\udcd6",path:"health-interventions",level:"Level 2: Core Components",color:"#0078d4"},{id:"generic-personas",title:"Generic Personas",description:"Standardized user roles and actor definitions that represent different types of healthcare workers and patients",icon:"\ud83d\udc65",path:"actor-editor",level:"Level 2: Core Components",color:"#107c10"},{id:"user-scenarios",title:"User Scenarios",description:"Narrative descriptions of how different personas interact with the system in specific healthcare contexts",icon:"\ud83d\udcdd",path:"user-scenarios",level:"Level 2: Core Components",color:"#881798"},{id:"business-processes",title:"Generic Business Processes and Workflows",description:"BPMN workflows and business process definitions that model clinical workflows and care pathways",icon:"\ud83d\udd04",path:"business-process-selection",level:"Level 2: Core Components",color:"#d13438"},{id:"core-data-elements",title:"Core Data Elements",description:"Essential data structures and terminology needed for clinical data capture and exchange",icon:"\ud83d\uddc3\ufe0f",path:"core-data-dictionary-viewer",level:"Level 2: Core Components",color:"#ff8c00"},{id:"decision-support",title:"Decision-Support Logic",description:"DMN decision tables and clinical decision support rules that encode clinical logic",icon:"\ud83c\udfaf",path:"decision-support-logic",level:"Level 2: Core Components",color:"#00bcf2"},{id:"program-indicators",title:"Program Indicators",description:"Performance indicators and measurement definitions for monitoring and evaluation",icon:"\ud83d\udcca",path:"program-indicators",level:"Level 2: Core Components",color:"#498205"},{id:"functional-requirements",title:"Functional and Non-Functional Requirements",description:"System requirements specifications that define capabilities and constraints",icon:"\u2699\ufe0f",path:"functional-requirements",level:"Level 2: Core Components",color:"#6b69d6"},{id:"testing",title:"Testing",description:"Feature files and test scenarios for validating the DAK implementation",icon:"\ud83e\uddea",path:"testing-viewer",level:"Level 2: Core Components",color:"#8b5cf6"},{id:"terminology",title:"Terminology",description:"Code systems, value sets, and concept maps",icon:"\ud83c\udff7\ufe0f",path:"terminology",level:"Level 3: Technical Implementation",color:"#ff8c00"},{id:"profiles",title:"FHIR Profiles",description:"FHIR resource profiles and constraints",icon:"\ud83d\udd27",path:"profiles",level:"Level 3: Technical Implementation",color:"#00bcf2"},{id:"extensions",title:"FHIR Extensions",description:"Custom FHIR extensions and modifications",icon:"\ud83e\udde9",path:"extensions",level:"Level 3: Technical Implementation",color:"#498205"},{id:"test-data",title:"Test Data & Examples",description:"Sample data and testing resources",icon:"\ud83e\uddea",path:"test-data",level:"Level 3: Technical Implementation",color:"#8b5cf6"}],b=x.filter(e=>e.level.includes("Level 2: Core Components")),j=x.filter(e=>e.level.includes("Level 3: Technical Implementation"));return(0,v.jsxs)("div",{className:"dak-dashboard",children:[(0,v.jsx)("div",{className:"dashboard-header",children:(0,v.jsxs)("div",{className:"dashboard-title",children:[(0,v.jsxs)("h1",{children:[null===s||void 0===s?void 0:s.name," Dashboard"]}),(0,v.jsxs)("p",{className:"dashboard-subtitle",children:["Digital Adaptation Kit for ",(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.login)]})]})}),(0,v.jsx)(W,{profile:e,repository:s,selectedBranch:t}),s&&(0,v.jsx)(o.A,{repository:s,profile:e,selectedBranch:t,issueCounts:g}),(0,v.jsxs)("div",{className:"tab-navigation",children:[(0,v.jsxs)("button",{className:"tab-button ".concat("core"===u?"active":""),onClick:()=>p("core"),children:[(0,v.jsx)("span",{className:"tab-icon",children:"\u2b50"}),(0,v.jsx)("span",{className:"tab-text",children:"9 Core Components"})]}),(0,v.jsxs)("button",{className:"tab-button ".concat("additional"===u?"active":""),onClick:()=>p("additional"),children:[(0,v.jsx)("span",{className:"tab-icon",children:"\ud83d\udd27"}),(0,v.jsxs)("span",{className:"tab-text",children:["Additional Components (",j.length,")"]})]}),(0,v.jsxs)("button",{className:"tab-button ".concat("publications"===u?"active":""),onClick:()=>p("publications"),children:[(0,v.jsx)("span",{className:"tab-icon",children:"\ud83d\udcda"}),(0,v.jsx)("span",{className:"tab-text",children:"Publications"})]})]}),(0,v.jsxs)("div",{className:"dashboard-content",children:["core"===u&&(0,v.jsx)("div",{className:"components-grid core-components",children:b.map(e=>(0,v.jsxs)("div",{className:"component-card",onClick:()=>y(e.path),children:[(0,v.jsx)("div",{className:"component-icon",children:e.icon}),(0,v.jsx)("h3",{children:e.title}),(0,v.jsx)("p",{children:e.description}),g[e.id]>0&&(0,v.jsxs)("div",{className:"issue-badge",children:[g[e.id]," issues"]})]},e.id))}),"additional"===u&&(0,v.jsx)("div",{className:"components-grid additional-components",children:j.map(e=>(0,v.jsxs)("div",{className:"component-card",onClick:()=>y(e.path),children:[(0,v.jsx)("div",{className:"component-icon",children:e.icon}),(0,v.jsx)("h3",{children:e.title}),(0,v.jsx)("p",{children:e.description}),g[e.id]>0&&(0,v.jsxs)("div",{className:"issue-badge",children:[g[e.id]," issues"]})]},e.id))}),"publications"===u&&(0,v.jsx)("div",{className:"publications-section",children:(0,v.jsx)(I,{repository:s,profile:e,selectedBranch:t,onNavigate:()=>{e&&s&&l("/publications/".concat(e.login,"/").concat(s.name,"/").concat(t),{state:{profile:e,repository:s,selectedBranch:t}})}})})]}),h&&(0,v.jsxs)("div",{className:"permission-dialog",children:[(0,v.jsx)("div",{className:"dialog-overlay",onClick:()=>m(!1)}),(0,v.jsxs)("div",{className:"dialog-content",children:[(0,v.jsx)("h3",{children:"Repository Permissions"}),(0,v.jsxs)("p",{children:["You have ",c?"write":"read-only"," access to this repository.",!c&&" You can view content but cannot make changes."]}),(0,v.jsx)("button",{onClick:()=>m(!1),children:"Got it"})]})]})]})},D=()=>(0,v.jsx)(n.Mx,{pageName:"dashboard",children:(0,v.jsx)(H,{})})}}]);
//# sourceMappingURL=704.4a155c62.chunk.js.map