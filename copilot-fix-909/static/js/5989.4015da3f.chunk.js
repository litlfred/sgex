"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[5989],{65989:(e,s,i)=>{i.r(s),i.d(s,{default:()=>d});var n=i(9950),t=i(85001),a=i(29946);const l=new class{constructor(){this.cache=new Map,this.maxDepth=5}async detectLogicalModels(e,s,i,n){const t="".concat(s,"/").concat(i,"/").concat(n);if(console.log("\ud83d\ude80 Scanning for logical models in ".concat(t)),this.cache.has(t)){const e=this.cache.get(t);return console.log("\ud83d\udccb Using cached ".concat(e.length," logical models for ").concat(t)),e}try{const e=await this.scanFSHFilesForLogicalModels(s,i,n);return console.log("\ud83d\udcbe Found and caching ".concat(e.length," logical models for ").concat(t),e.map(e=>"".concat(e.id," (").concat(e.title||e.name,")"))),this.cache.set(t,e),e}catch(a){return console.warn("Error detecting logical models:",a),[]}}async scanFSHFilesForLogicalModels(e,s,i){const n=[];try{const l=["input/fsh","input/fsh/logicalmodels","input/fsh/profiles","input/fsh/models"];console.log("\ud83d\udcc2 Scanning FSH directories in ".concat(e,"/").concat(s,"/").concat(i,": ").concat(l.join(", ")));for(const o of l)try{const t=(await a.A.getDirectoryContents(e,s,o,i)).filter(e=>"file"===e.type&&e.name.endsWith(".fsh"));if(t.length>0){console.log("\ud83d\udcc4 Found ".concat(t.length," FSH files in ").concat(o,": ").concat(t.map(e=>e.name).join(", ")));for(const l of t){const t=await a.A.getFileContent(e,s,l.path,i),o=this.parseFSHForLogicalModels(t,l.path,{user:e,repo:s,branch:i,html_url:l.html_url||"https://github.com/".concat(e,"/").concat(s,"/blob/").concat(i,"/").concat(l.path)});o.length>0&&(console.log("\ud83c\udfaf Found ".concat(o.length," logical models in ").concat(l.path,": ").concat(o.map(e=>e.id).join(", "))),n.push(...o))}}}catch(t){console.debug("Directory ".concat(o," not accessible: ").concat(t.message))}console.log("\u2705 Total logical models discovered: ".concat(n.length),n.map(e=>"".concat(e.id," (").concat(e.title||e.name,")")))}catch(l){console.warn("Error scanning FSH files for logical models:",l)}return n}parseFSHForLogicalModels(e,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=[],t=e.split("\n");let a=null,l=!1;for(let o=0;o<t.length;o++){const e=t[o].trim();if(!e||e.startsWith("//"))continue;const c=e.match(/^Logical:\s*(\S+)/i);if(c){a&&n.push(a),a={id:c[1],name:c[1],title:"",description:"",elements:[],filePath:s,type:"LogicalModel",html_url:i.html_url,user:i.user,repo:i.repo,branch:i.branch},l=!0;continue}if(l&&e.match(/^(Profile|Extension|ValueSet|CodeSystem|Instance|Invariant):/i)){a&&(n.push(a),a=null),l=!1;continue}if(!l||!a)continue;e.match(/^Title:\s*/i)?a.title=e.replace(/^Title:\s*/i,"").trim().replace(/"/g,""):e.match(/^Description:\s*/i)?a.description=e.replace(/^Description:\s*/i,"").trim().replace(/"/g,""):e.match(/^Id:\s*/i)&&(a.id=e.replace(/^Id:\s*/i,"").trim());let r=e.match(/^\*\s+(\S+)\s+(\d+)\.\.(\d+|\*)\s+(\S+)\s*"([^"]+)"/);if(r||(r=e.match(/^\*\s+(\S+)\s+(\d+)\.\.(\d+|\*)\s+(\S+)/)),r){const[,e,s,i,n,t=""]=r,l={name:e,path:"".concat(a.id,".").concat(e),min:parseInt(s),max:"*"===i?"*":parseInt(i),type:n,description:t,required:parseInt(s)>0};a.elements.push(l)}}return a&&n.push(a),n}generateQuestionnaireFromLogicalModel(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{questionnaireId:i="questionnaire-".concat(e.id.toLowerCase()),title:n="Questionnaire for ".concat(e.title||e.name),description:t="Auto-generated questionnaire based on ".concat(e.title||e.name," logical model"),prefix:a="q"}=s,l={resourceType:"Questionnaire",id:i,url:"http://example.org/fhir/Questionnaire/".concat(i),version:"1.0.0",name:i,title:n,status:"draft",date:(new Date).toISOString().split("T")[0],publisher:"WHO SMART Guidelines",description:t,meta:{profile:["http://hl7.org/fhir/StructureDefinition/Questionnaire"]},item:[]};l.extension=[{url:"http://smart.who.int/fhir/StructureDefinition/sgex-source-logical-model",valueString:e.id}];let o=1;for(const c of e.elements||[]){const e=this.generateQuestionFromElement(c,o,a);l.item.push(e),o++}return l}generateQuestionFromElement(e,s){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"q";const n="".concat(i,"-").concat(s);if(e.elements&&e.elements.length>0)return this.generateGroupItem(e,n,i);const t={linkId:n,code:[{system:"http://smart.who.int/fhir/CodeSystem/sgex-logical-model-elements",code:e.name,display:e.description||e.name}],text:e.description||e.name,type:this.mapTypeToQuestionType(e.type),required:this.isElementRequired(e)};return("*"===e.max||e.max>1)&&(t.repeats=!0),e.description&&e.description!==e.name&&(t.extension=[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",valueCodeableConcept:{coding:[{system:"http://hl7.org/fhir/questionnaire-item-control",code:"help",display:"Help-Button"}]}}]),!e.binding||"choice"!==t.type&&"open-choice"!==t.type||(t.answerOption=[{valueCoding:{system:e.binding.valueSet||"http://example.org/fhir/ValueSet/unknown",code:"see-valueset",display:"See ValueSet"}}]),t}generateGroupItem(e,s,i){const n={linkId:s,text:e.description||e.name||"Group",type:"group",required:this.isElementRequired(e)};e.max&&("*"===e.max||parseInt(e.max)>1)&&(n.repeats=!0),n.item=[];let t=1;for(const a of e.elements||[]){const e=this.generateQuestionFromElement(a,t,"".concat(s,"_").concat(t));n.item.push(e),t++}return n}isElementRequired(e){if(void 0!==e.required)return e.required;if(void 0!==e.min)return parseInt(e.min)>0;if(e.cardinality){const s=e.cardinality.match(/^(\d+)\.\.(\d+|\*)$/);if(s)return parseInt(s[1])>0}return!1}mapTypeToQuestionType(e){return{string:"string",text:"text",boolean:"boolean",integer:"integer",decimal:"decimal",date:"date",dateTime:"dateTime",time:"time",code:"choice",Coding:"choice",CodeableConcept:"choice",Quantity:"quantity",url:"url",uri:"url"}[e]||"string"}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}};var o=i(90584),c=i(44414);const r=()=>{const e=(0,t.Zp)(),{profile:s,repository:i,branch:r}=(0,o.oc)(),d=null===s||void 0===s?void 0:s.login,h=null===i||void 0===i?void 0:i.name,[m,u]=(0,n.useState)([]),[p,g]=(0,n.useState)(!0),[f,x]=(0,n.useState)(null),[j,v]=(0,n.useState)(null),[b,y]=(0,n.useState)(""),[N,S]=(0,n.useState)(!1),[w,C]=(0,n.useState)([]),[k,D]=(0,n.useState)(!1),[F,H]=(0,n.useState)(null),[_,L]=(0,n.useState)([]),[I,A]=(0,n.useState)(""),[M,q]=(0,n.useState)(!1),[E,G]=(0,n.useState)(!1),[V,P]=(0,n.useState)([]),[R,T]=(0,n.useState)(!1),[K,Q]=(0,n.useState)(null),W=(0,n.useCallback)(e=>{var s;const n=d||(null===i||void 0===i||null===(s=i.owner)||void 0===s?void 0:s.login)||(null===i||void 0===i?void 0:i.full_name.split("/")[0]),t=h||(null===i||void 0===i?void 0:i.name);return e===((null===i||void 0===i?void 0:i.default_branch)||"main")?"https://".concat(n,".github.io/").concat(t):"https://".concat(n,".github.io/").concat(t,"/branches/").concat(e)},[d,i,h]),B=(0,n.useCallback)(e=>{const s=[],i=e.split("\n");for(let n=0;n<i.length;n++){const e=i[n].trim().match(/^\*\s*#([^\s"]+)\s*"([^"]+)"\s*"([^"]+)"/);if(e){const[,i,n,t]=e;s.push({code:i.trim(),display:n.trim(),definition:t.trim()})}}return s},[]);(0,n.useEffect)(()=>{(async()=>{var e;const s=i,n=r,t=d||(null===i||void 0===i||null===(e=i.owner)||void 0===e?void 0:e.login)||(null===i||void 0===i?void 0:i.full_name.split("/")[0]),l=h||(null===i||void 0===i?void 0:i.name);if(!s&&(!t||!l)||!n)return void g(!1);try{g(!0),x(null);try{const e=await a.A.getDirectoryContents(t,l,"input/fsh",n),s=e.filter(e=>e.name.endsWith(".fsh")&&"file"===e.type&&"aliases.fsh"!==e.name.toLowerCase()).map(e=>({name:e.name,path:e.path,download_url:e.download_url,html_url:e.html_url})),i=e.find(e=>"aliases.fsh"===e.name.toLowerCase()&&"file"===e.type);i&&Q({name:i.name,path:i.path,download_url:i.download_url,html_url:i.html_url}),u(s)}catch(o){if(404!==o.status)throw o;u([])}try{const e=(await a.A.getDirectoryContents(t,l,"input/fsh/codesystems",n)).find(e=>"DAK.fsh"===e.name&&"file"===e.type);if(e){H({name:e.name,path:e.path,download_url:e.download_url,html_url:e.html_url});try{const s=await a.A.getFileContent(t,l,e.path,n),i=B(s);L(i)}catch(c){console.warn("Could not parse DAK.fsh content:",c),L([])}}else H(null),L([])}catch(o){404===o.status?(H(null),L([])):(console.warn("Error fetching DAK.fsh:",o),H(null),L([]))}const e=(await a.A.getBranches(t,l)).map(e=>e.name);C(e.filter(e=>"gh-pages"!==e));const s=e.includes("gh-pages");if(D(s),s){const e=W(n),s=await(async e=>{try{G(!0);const s="".concat(e,"/CodeSystem-DAK.html");return(await fetch(s,{method:"HEAD"})).ok}catch(f){return console.warn("Error checking published DAK:",f),!1}finally{G(!1)}})(e);q(s)}}catch(o){console.error("Error fetching FSH files:",o),x("Failed to load Core Data Dictionary files. Please check repository access.")}finally{g(!1)}})()},[i,r,d,h,W,B]),(0,n.useEffect)(()=>{(async()=>{var e;const s=i,n=r,t=d||(null===i||void 0===i||null===(e=i.owner)||void 0===e?void 0:e.login)||(null===i||void 0===i?void 0:i.full_name.split("/")[0]),a=h||(null===i||void 0===i?void 0:i.name);if(console.log("\ud83d\udd0d Logical Models Detection - Effect triggered:",{loading:p,repository:!!i,branch:r,user:d,repo:h,currentUser:t,currentRepo:a,currentBranch:n}),(s||t&&a)&&n)if(p)console.log("\u23f3 Logical Models Detection - Main loading still in progress, waiting...");else{console.log("\ud83d\ude80 Logical Models Detection - Starting detection for:",{user:t,repo:a,branch:n}),T(!0);try{const e=W(n);console.log("\ud83c\udf10 Logical Models Detection - Base URL:",e);const s=await l.detectLogicalModels(e,t,a,n);console.log("\u2705 Logical Models Detection - Completed successfully:",{modelsFound:s.length,models:s.map(e=>"".concat(e.id," (").concat(e.title||e.name,")"))}),P(s)}catch(f){console.warn("\u274c Error detecting logical models:",f),P([])}finally{T(!1)}}else console.log("\u274c Logical Models Detection - Missing required params, skipping:",{hasRepository:!!s,hasUser:!!t,hasRepo:!!a,hasBranch:!!n})})()},[p,i,r,d,h,W]);const O=async e=>{try{var s;v(e),y("Loading..."),S(!0);const n=d||(null===i||void 0===i||null===(s=i.owner)||void 0===s?void 0:s.login)||(null===i||void 0===i?void 0:i.full_name.split("/")[0]),t=h||(null===i||void 0===i?void 0:i.name),l=r,o=await a.A.getFileContent(n,t,e.path,l);y(o)}catch(n){console.error("Error fetching file content:",n),y("Error loading file content.")}},U=()=>{S(!1),v(null),y("")};return s&&i?p?(0,c.jsx)("div",{className:"core-data-dictionary-viewer loading-state",children:(0,c.jsxs)("div",{className:"loading-content",children:[(0,c.jsx)("h2",{children:"Loading Core Data Dictionary..."}),(0,c.jsx)("p",{children:"Fetching FHIR FSH files and repository data..."})]})}):(0,c.jsxs)("div",{className:"core-data-dictionary-viewer",children:[(0,c.jsxs)("div",{className:"viewer-header",children:[(0,c.jsxs)("div",{className:"who-branding",children:[(0,c.jsx)("h1",{onClick:()=>{e("/")},className:"clickable-title",children:"SGEX Workbench"}),(0,c.jsx)("p",{className:"subtitle",children:"WHO SMART Guidelines Exchange"})]}),(0,c.jsxs)("div",{className:"context-info",children:[(0,c.jsx)("img",{src:(null===s||void 0===s?void 0:s.avatar_url)||"https://github.com/".concat(d||(null===s||void 0===s?void 0:s.login),".png"),alt:"Profile",className:"context-avatar"}),(0,c.jsxs)("div",{className:"context-details",children:[(0,c.jsx)("span",{className:"context-repo",children:h||(null===i||void 0===i?void 0:i.name)}),(0,c.jsx)("span",{className:"context-component",children:"Core Data Dictionary"})]})]})]}),(0,c.jsxs)("div",{className:"viewer-content",children:[(0,c.jsxs)("div",{className:"breadcrumb",children:[(0,c.jsx)("button",{onClick:()=>e("/"),className:"breadcrumb-link",children:"Select Profile"}),(0,c.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,c.jsx)("button",{onClick:()=>e("/dak-selection/".concat(s.login),{state:{profile:s}}),className:"breadcrumb-link",children:"Select Repository"}),(0,c.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,c.jsx)("button",{onClick:()=>{if(d&&h){const s=r?"/dashboard/".concat(d,"/").concat(h,"/").concat(r):"/dashboard/".concat(d,"/").concat(h);e(s)}else e("/dashboard",{state:{profile:s,repository:i,branch:r}})},className:"breadcrumb-link",children:"DAK Components"}),(0,c.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,c.jsx)("span",{className:"breadcrumb-current",children:"Core Data Dictionary"})]}),(0,c.jsxs)("div",{className:"viewer-main",children:[(0,c.jsxs)("div",{className:"component-intro",children:[(0,c.jsx)("div",{className:"component-icon",style:{color:"#0078d4"},children:"\ud83d\udcca"}),(0,c.jsxs)("div",{className:"intro-content",children:[(0,c.jsx)("h2",{children:"Core Data Dictionary Viewer"}),(0,c.jsx)("p",{children:"View canonical representations of Component 2 Core Data Dictionary including FHIR CodeSystems, ValueSets, and ConceptMaps stored in FSH format."}),r&&(0,c.jsxs)("div",{className:"branch-info",children:[(0,c.jsx)("strong",{children:"Branch:"})," ",(0,c.jsx)("code",{children:r})]})]})]}),f&&(0,c.jsxs)("div",{className:"error-message",children:[(0,c.jsx)("h3",{children:"\u26a0\ufe0f Error"}),(0,c.jsx)("p",{children:f})]}),(0,c.jsx)("div",{className:"documentation-section",children:(0,c.jsx)("p",{children:(0,c.jsx)("a",{href:"https://smart.who.int/ig-starter-kit/v1.0.0/",target:"_blank",rel:"noopener noreferrer",className:"documentation-link",children:"\ud83d\udcda WHO IG Starter Kit Documentation \u2197"})})}),(0,c.jsxs)("div",{className:"two-column-layout",children:[(0,c.jsxs)("div",{className:"section standard-dictionaries-section left-column",children:[(0,c.jsx)("h3",{children:"Standard Dictionaries"}),(0,c.jsxs)("div",{className:"subsection",children:[(0,c.jsx)("h4",{children:"Code Systems"}),F&&(0,c.jsxs)("div",{className:"dak-source-section",children:[(0,c.jsx)("h5",{children:"DAK Source File (FSH)"}),(0,c.jsxs)("div",{className:"dak-source-links",children:[(0,c.jsx)("button",{className:"action-btn primary",onClick:()=>O(F),title:"View DAK.fsh source code with syntax highlighting",children:"\ud83d\udcc4 View Source"}),(0,c.jsx)("a",{href:F.html_url,target:"_blank",rel:"noopener noreferrer",className:"action-btn secondary",title:"View DAK.fsh source on GitHub",children:"\ud83d\udd17 GitHub Source \u2197"})]})]}),k?(0,c.jsxs)("div",{className:"dak-published-section",children:[(0,c.jsx)("h5",{children:"Published CodeSystem"}),E?(0,c.jsx)("p",{className:"checking-published",children:"Checking published version..."}):M?(0,c.jsx)("div",{className:"dictionary-links",children:(0,c.jsx)("a",{href:"".concat(W(r),"/CodeSystem-DAK.html"),target:"_blank",rel:"noopener noreferrer",className:"dictionary-link primary",children:"\ud83d\udcca View Published Core Data Dictionary (DAK) \u2197"})}):(0,c.jsxs)("div",{className:"unpublished-dak",children:[(0,c.jsx)("span",{className:"disabled-link",children:"Core Data Dictionary (DAK)"}),(0,c.jsx)("p",{className:"unpublished-note",children:"\u26a0\ufe0f The published version is not yet available. The CodeSystem-DAK.html file has not been published to GitHub Pages."})]})]}):(0,c.jsx)("p",{className:"no-publication-note",children:"Published CodeSystems will be available once GitHub Pages is configured."})]}),_.length>0&&(0,c.jsxs)("div",{className:"subsection",children:[(0,c.jsxs)("h4",{children:["DAK Concepts (",_.length," total)"]}),(0,c.jsx)("div",{className:"dak-table-controls",children:(0,c.jsx)("input",{type:"text",placeholder:"Search concepts...",value:I,onChange:e=>A(e.target.value),className:"search-input"})}),(0,c.jsx)("div",{className:"dak-concepts-table",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Code"}),(0,c.jsx)("th",{children:"Display"}),(0,c.jsx)("th",{children:"Definition"})]})}),(0,c.jsx)("tbody",{children:_.filter(e=>!I||e.code.toLowerCase().includes(I.toLowerCase())||e.display.toLowerCase().includes(I.toLowerCase())||e.definition.toLowerCase().includes(I.toLowerCase())).map((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"concept-code",children:e.code}),(0,c.jsx)("td",{className:"concept-display",children:e.display}),(0,c.jsx)("td",{className:"concept-definition",children:e.definition})]},s))})]})})]}),(0,c.jsxs)("div",{className:"subsection",children:[(0,c.jsx)("h4",{children:"Value Sets"}),(0,c.jsxs)("div",{className:"placeholder-links",children:[(0,c.jsx)("span",{className:"placeholder-link",children:"Actors (Coming Soon)"}),(0,c.jsx)("span",{className:"placeholder-link",children:"Workflows (Coming Soon)"}),(0,c.jsx)("span",{className:"placeholder-link",children:"Decision Tables (Coming Soon)"})]})]})]}),k?(0,c.jsxs)("div",{className:"section publications-section right-column",children:[(0,c.jsx)("h3",{children:"Publications"}),(0,c.jsx)("p",{children:"Published FHIR Implementation Guide artifacts generated by the IG Publisher"}),K&&(0,c.jsxs)("div",{className:"subsection aliases-section",children:[(0,c.jsx)("h4",{children:"Publication Configuration"}),(0,c.jsx)("div",{className:"aliases-info",children:(0,c.jsxs)("div",{className:"fsh-file-card aliases-card",children:[(0,c.jsxs)("div",{className:"file-header",children:[(0,c.jsx)("div",{className:"file-icon",children:"\u2699\ufe0f"}),(0,c.jsx)("div",{className:"file-name",children:K.name})]}),(0,c.jsx)("div",{className:"file-description",children:(0,c.jsx)("p",{children:"Contains aliases and configuration settings used during FHIR IG publication"})}),(0,c.jsxs)("div",{className:"file-actions",children:[(0,c.jsx)("button",{className:"action-btn primary",onClick:()=>O(K),title:"View Aliases.fsh source code with syntax highlighting",children:"View Source"}),(0,c.jsx)("a",{href:K.html_url,target:"_blank",rel:"noopener noreferrer",className:"action-btn secondary",title:"View Aliases.fsh source on GitHub",children:"GitHub \u2197"})]})]})})]}),w.sort().map(e=>(0,c.jsxs)("div",{className:"branch-publication",children:[(0,c.jsxs)("h4",{children:["Branch: ",(0,c.jsx)("code",{children:e})]}),(0,c.jsxs)("div",{className:"artifact-links",children:[(0,c.jsx)("a",{href:"".concat(W(e),"/artifacts.html#terminology-code-systems"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Code Systems \u2197"}),(0,c.jsx)("a",{href:"".concat(W(e),"/artifacts.html#terminology-value-sets"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Value Sets \u2197"}),(0,c.jsx)("a",{href:"".concat(W(e),"/artifacts.html#structures-logical-models"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Logical Models \u2197"}),(0,c.jsx)("a",{href:"".concat(W(e),"/artifacts.html#terminology-concept-maps"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Concept Maps \u2197"})]})]},e))]}):(0,c.jsxs)("div",{className:"section no-publications-section right-column",children:[(0,c.jsx)("h3",{children:"Publications"}),K&&(0,c.jsxs)("div",{className:"subsection aliases-section",children:[(0,c.jsx)("h4",{children:"Publication Configuration"}),(0,c.jsx)("div",{className:"aliases-info",children:(0,c.jsxs)("div",{className:"fsh-file-card aliases-card",children:[(0,c.jsxs)("div",{className:"file-header",children:[(0,c.jsx)("div",{className:"file-icon",children:"\u2699\ufe0f"}),(0,c.jsx)("div",{className:"file-name",children:K.name})]}),(0,c.jsx)("div",{className:"file-description",children:(0,c.jsx)("p",{children:"Contains aliases and configuration settings for FHIR IG publication"})}),(0,c.jsxs)("div",{className:"file-actions",children:[(0,c.jsx)("button",{className:"action-btn primary",onClick:()=>O(K),title:"View Aliases.fsh source code with syntax highlighting",children:"View Source"}),(0,c.jsx)("a",{href:K.html_url,target:"_blank",rel:"noopener noreferrer",className:"action-btn secondary",title:"View Aliases.fsh source on GitHub",children:"GitHub \u2197"})]})]})})]}),(0,c.jsxs)("div",{className:"no-gh-pages-message",children:[(0,c.jsx)("p",{children:"\ud83d\udccb No published artifacts available"}),(0,c.jsxs)("p",{children:["This repository does not have a ",(0,c.jsx)("code",{children:"gh-pages"})," branch for publishing FHIR Implementation Guide artifacts."]})]})]})]}),(0,c.jsxs)("div",{className:"section logical-models-section",children:[(0,c.jsx)("h3",{children:"Logical Models"}),(0,c.jsx)("p",{children:"FHIR Logical Models detected from FSH files in this repository"}),R?(0,c.jsx)("div",{className:"loading-indicator",children:(0,c.jsx)("span",{children:"\ud83d\udd0d Fetching Logical Models..."})}):V.length>0?(0,c.jsxs)("div",{className:"logical-models-content",children:[(0,c.jsx)("div",{className:"models-summary",children:(0,c.jsxs)("span",{className:"models-count",children:["Found ",V.length," logical model",1===V.length?"":"s",":"]})}),(0,c.jsx)("div",{className:"models-list",children:V.map(n=>(0,c.jsxs)("div",{className:"model-item",children:[(0,c.jsxs)("div",{className:"model-info",children:[(0,c.jsx)("h4",{className:"model-title",children:n.title||n.name}),(0,c.jsxs)("p",{className:"model-id",children:["ID: ",(0,c.jsx)("code",{children:n.id})]}),n.description&&(0,c.jsx)("p",{className:"model-description",children:n.description}),(0,c.jsxs)("p",{className:"model-source",children:["Source:",n.html_url?(0,c.jsx)("a",{href:n.html_url,target:"_blank",rel:"noopener noreferrer",className:"source-link",title:"View source file on GitHub",children:n.filePath}):(0,c.jsx)("code",{children:n.filePath})]})]}),(0,c.jsx)("div",{className:"model-actions",children:(0,c.jsx)("button",{onClick:()=>(async n=>{try{const t=l.generateQuestionnaireFromLogicalModel(n,{questionnaireId:"questionnaire-".concat(n.id.toLowerCase()),title:"Data Collection for ".concat(n.title||n.name),description:"Questionnaire based on ".concat(n.title||n.name," logical model for data collection"),prefix:"lm"}),a=r?"/questionnaire-editor/".concat(d,"/").concat(h,"/").concat(r):"/questionnaire-editor/".concat(d,"/").concat(h);e(a,{state:{profile:s,repository:i,branch:r,prePopulatedQuestionnaire:t,sourceLogicalModel:n}})}catch(f){console.error("Error generating questionnaire from logical model:",f),alert("Error generating questionnaire from logical model. Please try again.")}})(n),className:"btn btn-primary draft-questionnaire-btn",children:"\ud83d\udcdd Draft Questionnaire"})})]},n.id))})]}):(0,c.jsxs)("div",{className:"no-models-message",children:[(0,c.jsx)("p",{children:"\ud83d\udccb No logical models found"}),(0,c.jsx)("p",{children:"Logical models should be defined in FSH files in directories like:"}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:(0,c.jsx)("code",{children:"input/fsh/"})}),(0,c.jsx)("li",{children:(0,c.jsx)("code",{children:"input/fsh/models/"})}),(0,c.jsx)("li",{children:(0,c.jsx)("code",{children:"input/fsh/logicalmodels/"})}),(0,c.jsx)("li",{children:(0,c.jsx)("code",{children:"input/fsh/profiles/"})})]})]})]}),(0,c.jsxs)("div",{className:"section fsh-files-section",children:[(0,c.jsx)("h3",{children:"FHIR FSH Source Files"}),(0,c.jsx)("p",{children:"FHIR Shorthand (FSH) files containing CodeSystems, ValueSets, and ConceptMaps"}),0===m.length?(0,c.jsxs)("div",{className:"no-files-message",children:[(0,c.jsxs)("p",{children:["No FHIR FSH files found in ",(0,c.jsx)("code",{children:"input/fsh/"})," directory."]}),(0,c.jsx)("p",{children:"Core Data Dictionary files should be stored in FSH format in this location."})]}):(0,c.jsx)("div",{className:"fsh-files-grid",children:m.map(e=>(0,c.jsxs)("div",{className:"fsh-file-card",children:[(0,c.jsxs)("div",{className:"file-header",children:[(0,c.jsx)("div",{className:"file-icon",children:"\ud83d\udcc4"}),(0,c.jsx)("div",{className:"file-name",children:e.name})]}),(0,c.jsxs)("div",{className:"file-actions",children:[(0,c.jsx)("button",{className:"action-btn primary",onClick:()=>O(e),title:"View source code with syntax highlighting",children:"View Source"}),(0,c.jsx)("a",{href:e.html_url,target:"_blank",rel:"noopener noreferrer",className:"action-btn secondary",title:"View source on GitHub",children:"GitHub \u2197"})]})]},e.path))})]})]})]}),N&&j&&(0,c.jsx)("div",{className:"modal-overlay",onClick:U,children:(0,c.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h3",{children:j.name}),(0,c.jsx)("button",{className:"modal-close",onClick:U,children:"\xd7"})]}),(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsx)("pre",{className:"fsh-code",children:(0,c.jsx)("code",{children:b})})}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("a",{href:j.html_url,target:"_blank",rel:"noopener noreferrer",className:"btn-secondary",children:"View on GitHub \u2197"}),(0,c.jsx)("button",{className:"btn-primary",onClick:U,children:"Close"})]})]})})]}):(e("/"),(0,c.jsx)("div",{children:"Redirecting..."}))},d=()=>(0,c.jsx)(o.Mx,{pageName:"core-data-dictionary-viewer",children:(0,c.jsx)(r,{})})}}]);