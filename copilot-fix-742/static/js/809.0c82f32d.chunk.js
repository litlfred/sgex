"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[483,809],{15809:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var a=n(65043),i=n(73537),s=n(74117),o=n(50404),r=n(89387),c=n(88691),l=n(93156),d=n(19794),u=n(70579);const m=e=>{let{helpTopic:t,contextData:n={}}=e;const[i,s]=(0,a.useState)(!1),o=(0,d.A)("sgex-mascot.png");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"help-button",onClick:()=>{s(!0)},title:"Get Help","aria-label":"Get Help",children:(0,u.jsx)("img",{src:o,alt:"SGEX Helper",className:"help-mascot-icon"})}),i&&(0,u.jsx)(l.A,{topic:t,contextData:n,onClose:()=>{s(!1)}})]})};var h=n(98757),p=n(79839),f=n(89379),v=n(55661);const g={id:"dak-sushi-base",component:"dak-structure",level:"error",fileTypes:["yaml"],descriptionKey:"validation.dak.sushiBase.description",description:"DAK IG SHALL have smart.who.int.base as a dependency",async validate(e,t,n){if(!e.endsWith("sushi-config.yaml"))return null;try{const n=v.load(t);return n&&"object"===typeof n?n.dependencies&&"object"===typeof n.dependencies?n.dependencies["smart.who.int.base"]?null:{validationId:"dak-sushi-base",component:"dak-structure",level:"error",description:"DAK IG SHALL have smart.who.int.base as a dependency",filePath:e,message:"Missing required smart.who.int.base dependency",line:g.findLineNumber&&g.findLineNumber(t,"dependencies")||1,column:1,suggestion:'Add "smart.who.int.base: current" to dependencies section'}:{validationId:"dak-sushi-base",component:"dak-structure",level:"error",description:"DAK IG SHALL have smart.who.int.base as a dependency",filePath:e,message:"sushi-config.yaml missing dependencies section",line:g.findLineNumber&&g.findLineNumber(t,"dependencies")||1,column:1,suggestion:"Add dependencies section with smart.who.int.base dependency"}:{validationId:"dak-sushi-base",component:"dak-structure",level:"error",description:"DAK IG SHALL have smart.who.int.base as a dependency",filePath:e,message:"sushi-config.yaml must contain a valid YAML object",line:1,column:1,suggestion:"Ensure the file contains proper YAML object structure"}}catch(s){var a,i;return{validationId:"dak-sushi-base",component:"dak-structure",level:"error",description:"DAK IG SHALL have smart.who.int.base as a dependency",filePath:e,message:"YAML parsing error: ".concat(s.message),line:(null===(a=s.mark)||void 0===a?void 0:a.line)||1,column:(null===(i=s.mark)||void 0===i?void 0:i.column)||1,suggestion:"Fix YAML syntax errors"}}},findLineNumber(e,t){const n=e.split("\n");for(let a=0;a<n.length;a++)if(n[a].includes(t))return a+1;return null}},y=g;const b={id:"json-valid",component:"file-structure",level:"error",fileTypes:["json"],descriptionKey:"validation.json.valid.description",description:"JSON files must be valid JSON",async validate(e,t,n){if(!e.endsWith(".json")&&!function(e){const t=e.trim();return t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]")}(t))return null;try{return JSON.parse(t),null}catch(a){const n=a.message.match(/line (\d+)/i),i=a.message.match(/column (\d+)/i),s=a.message.match(/position (\d+)/i);let o=1,r=1;if(n)o=parseInt(n[1],10);else if(s){const e=parseInt(s[1],10),n=t.substring(0,e).split("\n");o=n.length,r=n[n.length-1].length+1}return i&&(r=parseInt(i[1],10)),{validationId:"json-valid",component:"file-structure",level:"error",description:"JSON files must be valid JSON",filePath:e,message:"JSON syntax error: ".concat(a.message),line:o,column:r,suggestion:"Fix JSON syntax errors such as missing commas, quotes, or brackets"}}}},w={id:"bpmn-business-rule-task-id",component:"business-processes",level:"error",fileTypes:["bpmn","xml"],descriptionKey:"validation.bpmn.businessRuleTaskId.description",description:"In BPMN diagrams a bpmn:businessRuleTask SHALL have an @id attribute",async validate(e,t,n){if(!e.endsWith(".bpmn")&&!e.endsWith(".xml")&&!(e=>e.includes("http://www.omg.org/spec/BPMN/")||e.includes("businessRuleTask")||e.includes("bpmn:"))(t))return null;try{const n=/<bpmn:businessRuleTask(?![^>]*\sid\s*=)[^>]*>/g,a=t.match(n);if(a&&a.length>0){const n=a[0],i=t.indexOf(n),s=t.substring(0,i).split("\n").length;return{validationId:"bpmn-business-rule-task-id",component:"business-processes",level:"error",description:"In BPMN diagrams a bpmn:businessRuleTask SHALL have an @id attribute",filePath:e,message:"Found ".concat(a.length," businessRuleTask").concat(a.length>1?"s":""," without required @id attribute"),line:s,column:1,suggestion:'Add id attribute to each bpmn:businessRuleTask element, e.g., <bpmn:businessRuleTask id="BusinessRuleTask_1">'}}return null}catch(a){return{validationId:"bpmn-business-rule-task-id",component:"business-processes",level:"error",description:"In BPMN diagrams a bpmn:businessRuleTask SHALL have an @id attribute",filePath:e,message:"Error parsing BPMN: ".concat(a.message),line:1,column:1,suggestion:"Ensure the BPMN file is well-formed XML"}}},findLineNumber(e,t){const n=e.split("\n");for(let a=0;a<n.length;a++)if(n[a].includes(t))return a+1;return null}},x={id:"dmn-decision-label-id",component:"decision-support-logic",level:"error",fileTypes:["dmn","xml"],descriptionKey:"validation.dmn.decisionLabelId.description",description:"In DMN diagrams, decisions SHALL have both label and id attributes",async validate(e,t,n){if(!e.endsWith(".dmn")&&!e.endsWith(".xml")&&!(e=>e.includes("http://www.omg.org/spec/DMN/")||e.includes("dmndi:")||e.includes("dmn:")||e.includes("decision"))(t))return null;try{const n=/<dmn:decision[^>]*>/g,a=Array.from(t.matchAll(n));for(let i=0;i<a.length;i++){const n=a[i],s=n[0],o=/\sid\s*=\s*["'][^"']*["']/.test(s),r=/\slabel\s*=\s*["'][^"']*["']/.test(s);if(!o||!r){const a=n.index||0,i=t.substring(0,a).split("\n").length;let s="Decision element missing required attributes: ";const c=[];return o||c.push("id"),r||c.push("label"),s+=c.join(", "),{validationId:"dmn-decision-label-id",component:"decision-support-logic",level:"error",description:"In DMN diagrams, decisions SHALL have both label and id attributes",filePath:e,message:s,line:i,column:1,suggestion:"Add missing attributes to dmn:decision element: ".concat(c.map(e=>"".concat(e,'="value"')).join(", "))}}}return null}catch(a){return{validationId:"dmn-decision-label-id",component:"decision-support-logic",level:"error",description:"In DMN diagrams, decisions SHALL have both label and id attributes",filePath:e,message:"Error parsing DMN: ".concat(a.message),line:1,column:1,suggestion:"Ensure the DMN file is well-formed XML"}}},findLineNumber(e,t){const n=e.split("\n");for(let a=0;a<n.length;a++)if(n[a].includes(t))return a+1;return null}};const F={id:"xml-well-formed",component:"file-structure",level:"error",fileTypes:["xml","bpmn","dmn"],descriptionKey:"validation.xml.wellFormed.description",description:"XML files must be well-formed according to XML 1.0 specification",async validate(e,t,n){if(!e.endsWith(".xml")&&!e.endsWith(".bpmn")&&!e.endsWith(".dmn")&&!function(e){const t=e.trim();return t.startsWith("<?xml")||t.startsWith("<")&&(t.includes("xmlns")||t.includes("<?xml"))}(t))return null;try{const n=new DOMParser,a=n.parseFromString(t,"text/xml").querySelector("parsererror");if(a){const t=a.textContent||"Unknown parsing error",n=t.match(/line (\d+)/i),i=t.match(/column (\d+)/i);let s=1,o=1;return n&&(s=parseInt(n[1],10)),i&&(o=parseInt(i[1],10)),{validationId:"xml-well-formed",component:"file-structure",level:"error",description:"XML files must be well-formed according to XML 1.0 specification",filePath:e,message:"XML parsing error: ".concat(t),line:s,column:o,suggestion:"Fix XML syntax errors such as unclosed tags, invalid characters, or malformed attributes"}}return null}catch(a){return{validationId:"xml-well-formed",component:"file-structure",level:"error",description:"XML files must be well-formed according to XML 1.0 specification",filePath:e,message:"XML validation error: ".concat(a.message),line:1,column:1,suggestion:"Ensure the XML file follows valid XML 1.0 syntax"}}}},j={id:"file-naming-conventions",component:"file-structure",level:"warning",fileTypes:["*"],descriptionKey:"validation.fileNaming.conventions.description",description:"Files SHALL follow WHO SMART Guidelines naming conventions",async validate(e,t,n){const a=(e=>e.split("/").pop()||e)(e),i=[".gitignore",".npmignore",".env",".env.local",".env.development",".env.production"];if(i.includes(a))return null;if(a.startsWith(".")&&!i.includes(a))return null;try{if(!(e=>/^[a-zA-Z0-9._-]+$/.test(e))(a))return{validationId:"file-naming-conventions",component:"file-structure",level:"error",description:"Files SHALL follow WHO SMART Guidelines naming conventions",filePath:e,message:"File name contains invalid characters",line:1,column:1,suggestion:"Use only alphanumeric characters, hyphens, underscores, and dots in file names"};if(a.includes(" "))return{validationId:"file-naming-conventions",component:"file-structure",level:"error",description:"Files SHALL follow WHO SMART Guidelines naming conventions",filePath:e,message:"File name contains spaces",line:1,column:1,suggestion:"Replace spaces with hyphens or underscores"};if(!(e=>/^[a-z0-9-]+(\.[a-z0-9]+)*$/.test(e))(a)){const t=/[A-Z]/.test(a),n=a.includes("_");let i="File name does not follow recommended naming conventions",s="Use lowercase letters with hyphens for better consistency";return t?(i="File name contains uppercase letters",s="Convert to lowercase for better consistency with WHO SMART Guidelines"):n&&(i="File name uses underscores instead of hyphens",s="Consider using hyphens instead of underscores for consistency"),{validationId:"file-naming-conventions",component:"file-structure",level:"warning",description:"Files SHALL follow WHO SMART Guidelines naming conventions",filePath:e,message:i,line:1,column:1,suggestion:s}}return null}catch(s){return{validationId:"file-naming-conventions",component:"file-structure",level:"error",description:"Files SHALL follow WHO SMART Guidelines naming conventions",filePath:e,message:"Error validating file name: ".concat(s.message),line:1,column:1,suggestion:"Check file name format and characters"}}}},N={id:"dmn-bpmn-cross-reference",component:"business-processes",level:"warning",fileTypes:["bpmn","xml"],descriptionKey:"validation.dmnBpmn.crossReference.description",description:"In BPMN business rule tasks that reference DMN files, the referenced DMN decision SHALL exist",async validate(e,t,n){if(!e.endsWith(".bpmn")&&!e.endsWith(".xml")&&!(e=>e.includes("http://www.omg.org/spec/BPMN/")||e.includes("businessRuleTask")||e.includes("bpmn:"))(t))return null;if(!t.includes("businessRuleTask"))return null;try{const a=(e=>{const t=[],n=/dmn[:\-_]?(?:decision|ref|name)[\s]*=[\s]*["']([^"']+)["']/gi;let a;for(;null!==(a=n.exec(e));)t.push(a[1]);return t})(t);if(0===a.length)return null;const i=(n.dakFiles||[]).filter(e=>e.path.endsWith(".dmn")||(e=>e.includes("http://www.omg.org/spec/DMN/")||e.includes("dmn:")||e.includes("<decision"))(e.content));if(0===i.length)return{validationId:"dmn-bpmn-cross-reference",component:"business-processes",level:"warning",description:"In BPMN business rule tasks that reference DMN files, the referenced DMN decision SHALL exist",filePath:e,message:"BPMN file references DMN decisions but no DMN files found in DAK",line:1,column:1,suggestion:"Add the referenced DMN files to the DAK or remove DMN references from business rule tasks"};const s=[];i.forEach(e=>{const t=(e=>{const t=[],n=/<dmn:decision[^>]+(?:id|name)[\s]*=[\s]*["']([^"']+)["']/gi;let a;for(;null!==(a=n.exec(e));)t.push(a[1]);return t})(e.content);s.push(...t)});const o=a.filter(e=>!s.includes(e));return o.length>0?{validationId:"dmn-bpmn-cross-reference",component:"business-processes",level:"warning",description:"In BPMN business rule tasks that reference DMN files, the referenced DMN decision SHALL exist",filePath:e,message:"BPMN references missing DMN decisions: ".concat(o.join(", ")),line:1,column:1,suggestion:"Create DMN decisions with IDs: ".concat(o.join(", ")," or update BPMN references to match existing decisions: ").concat(s.join(", "))}:null}catch(a){return{validationId:"dmn-bpmn-cross-reference",component:"business-processes",level:"error",description:"In BPMN business rule tasks that reference DMN files, the referenced DMN decision SHALL exist",filePath:e,message:"Error validating DMN-BPMN cross-references: ".concat(a.message),line:1,column:1,suggestion:"Check BPMN and DMN file structure and references"}}},findLineNumber(e,t){const n=e.split("\n");for(let a=0;a<n.length;a++)if(n[a].includes(t))return a+1;return null}},A={"dak-structure":{id:"dak-structure",name:"DAK Structure",description:"Overall DAK repository structure and configuration"},"business-processes":{id:"business-processes",name:"Business Processes",description:"BPMN workflows and process definitions"},"decision-support-logic":{id:"decision-support-logic",name:"Decision Support Logic",description:"DMN decision tables and business rules"},"core-data-elements":{id:"core-data-elements",name:"Core Data Elements",description:"Terminology and data model definitions"},indicators:{id:"indicators",name:"Program Indicators",description:"Performance indicators and measures"},publications:{id:"publications",name:"Publications",description:"Health interventions and recommendations"},requirements:{id:"requirements",name:"Requirements",description:"Functional and non-functional requirements"},"test-scenarios":{id:"test-scenarios",name:"Test Scenarios",description:"Test cases and validation scenarios"},personas:{id:"personas",name:"Generic Personas",description:"User roles and actor definitions"},"user-scenarios":{id:"user-scenarios",name:"User Scenarios",description:"Use case narratives and workflows"},"file-structure":{id:"file-structure",name:"File Structure",description:"General file format and structure validations"}},S="error",k="warning",D="info";const C=new class{constructor(){this.validations=new Map,this.componentValidations=new Map,this.initializeValidations()}initializeValidations(){[y,b,w,x,F,j,N].forEach(e=>{this.registerValidation(e)}),console.log("Registered ".concat(this.validations.size," TypeScript validation definitions"))}registerValidation(e){if(!e.id)throw new Error("Validation must have an id");this.validations.has(e.id)&&console.warn("Validation ".concat(e.id," is already registered. Overwriting.")),this.validations.set(e.id,e),this.componentValidations.has(e.component)||this.componentValidations.set(e.component,[]),this.componentValidations.get(e.component).push(e)}getAllValidations(){return Array.from(this.validations.values())}getValidation(e){return this.validations.get(e)}getValidationsForComponent(e){return this.componentValidations.get(e)||[]}getValidationsForFileType(e){return this.getAllValidations().filter(t=>t.fileTypes.includes("*")||t.fileTypes.includes(e))}getValidationsByLevel(e){return this.getAllValidations().filter(t=>t.level===e)}getComponentSummary(){const e={};return Object.values(A).forEach(t=>{const n=this.getValidationsForComponent(t.id);e[t.id]=(0,f.A)((0,f.A)({},t),{},{validationCount:n.length,errorCount:n.filter(e=>e.level===S).length,warningCount:n.filter(e=>e.level===k).length,infoCount:n.filter(e=>e.level===D).length})}),e}async validateFile(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=this.getFileExtension(e),i=this.getValidationsForFileType(a),s=[];for(const r of i)try{const a=await r.validate(e,t,n);a&&s.push(a)}catch(o){console.error("Error running validation ".concat(r.id,":"),o),s.push({validationId:r.id,component:r.component,level:S,description:"Validation execution failed",filePath:e,message:"Validation error: ".concat(o.message),suggestion:"Contact support if this error persists"})}return s}async validateByComponent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=this.getValidationsForComponent(e),i=[];for(const o of t)for(const e of a)try{const t=this.getFileExtension(o.path);if(!e.fileTypes.includes("*")&&!e.fileTypes.includes(t))continue;const a=await e.validate(o.path,o.content,n);a&&i.push(a)}catch(s){console.error("Error running validation ".concat(e.id," on ").concat(o.path,":"),s),i.push({validationId:e.id,component:e.component,level:S,description:"Validation execution failed",filePath:o.path,message:"Validation error: ".concat(s.message),suggestion:"Contact support if this error persists"})}return i}getFileExtension(e){const t=e.split(".");return t.length>1?t[t.length-1].toLowerCase():""}canSave(e){return!e.some(e=>e.level===S)}formatResults(e){const t={error:0,warning:0,info:0},n={},a={};return e.forEach(e=>{t[e.level]++,n[e.component]||(n[e.component]=[]),n[e.component].push(e),a[e.filePath]||(a[e.filePath]=[]),a[e.filePath].push(e)}),{summary:t,byComponent:n,byFile:a,canSave:this.canSave(e),total:e.length}}};const M=new class{constructor(){this.registry=C,this.cache=new Map,this.cacheTimeout=3e5}async validateDAK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i="".concat(e,"/").concat(t,"/").concat(n);if(!a.forceRefresh&&this.cache.has(i)){const e=this.cache.get(i);if(Date.now()-e.timestamp<this.cacheTimeout)return e.results}try{const s=await this.getDAKFiles(e,t,n);if(!s||0===s.length)return{error:"Could not retrieve DAK files",summary:{error:1,warning:0,info:0},byComponent:{},byFile:{},canSave:!1,total:1};const r=(0,f.A)({owner:e,repo:t,branch:n,dakFiles:s,githubService:o.A},a.context),c=[];for(const e of s){const t=await this.registry.validateFile(e.path,e.content,r);c.push(...t)}const l=this.registry.formatResults(c);return l.metadata={owner:e,repo:t,branch:n,filesValidated:s.length,validatedAt:(new Date).toISOString(),validationFrameworkVersion:"1.0.0"},this.cache.set(i,{results:l,timestamp:Date.now()}),l}catch(s){return console.error("Error validating DAK:",s),{error:"Validation failed: ".concat(s.message),summary:{error:1,warning:0,info:0},byComponent:{},byFile:{},canSave:!1,total:1}}}async validateComponent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!A[e])throw new Error("Unknown DAK component: ".concat(e));try{const a=(0,f.A)({component:e,dakFiles:t},n.context),i=await this.registry.validateByComponent(e,t,a);return this.registry.formatResults(i)}catch(a){return console.error("Error validating component ".concat(e,":"),a),{error:"Component validation failed: ".concat(a.message),summary:{error:1,warning:0,info:0},byComponent:{},byFile:{},canSave:!1,total:1}}}async validateFile(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const a=(0,f.A)({},n.context),i=await this.registry.validateFile(e,t,a);return this.registry.formatResults(i)}catch(a){return console.error("Error validating file ".concat(e,":"),a),{error:"File validation failed: ".concat(a.message),summary:{error:1,warning:0,info:0},byComponent:{},byFile:{},canSave:!1,total:1}}}async validateStagingGround(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=e.files||[],a=(0,f.A)({stagingGround:!0,dakFiles:n},t.context),i=[];for(const e of n){const t=await this.registry.validateFile(e.path,e.content,a);i.push(...t)}const s=this.registry.formatResults(i);return s.metadata={stagingGround:!0,filesValidated:n.length,validatedAt:(new Date).toISOString(),canUpload:s.canSave},s}catch(n){return console.error("Error validating staging ground:",n),{error:"Staging ground validation failed: ".concat(n.message),summary:{error:1,warning:0,info:0},byComponent:{},byFile:{},canSave:!1,total:1}}}getValidationSummary(){return this.registry.getComponentSummary()}getValidationsForComponent(e){return this.registry.getValidationsForComponent(e)}async runValidation(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=this.registry.getValidation(e);if(!i)throw new Error("Validation not found: ".concat(e));try{return await i.validate(t,n,a)}catch(s){return console.error("Error running validation ".concat(e,":"),s),{validationId:i.id,component:i.component,level:S,description:"Validation execution failed",filePath:t,message:"Validation error: ".concat(s.message),suggestion:"Contact support if this error persists"}}}async canSaveFiles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];for(const a of e){const e=await this.registry.validateFile(a.path,a.content,t);n.push(...e)}return this.registry.canSave(n)}async getEditorValidation(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=this.getFileExtension(e),s=this.registry.getValidationsForComponent(n),o=this.registry.getValidationsForFileType(i),r=new Set([...s,...o]),c=Array.from(r),l=[];for(const u of c)try{const n=await u.validate(e,t,a);n&&l.push(n)}catch(d){console.error("Error in editor validation ".concat(u.id,":"),d)}return l}async getDAKFiles(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";try{if(!o.A.isAuth())throw new Error("GitHub authentication required");const a=[];return await this.getDAKFilesRecursive(e,t,"",n,a),a}catch(a){throw console.error("Error getting DAK files:",a),a}}async getDAKFilesRecursive(e,t,n,a,i){try{const r=await o.A.getDirectoryContents(e,t,n,a);for(const n of r)if("file"===n.type&&this.isRelevantFile(n.path||n.name))try{const s=await o.A.getFileContent(e,t,n.path||n.name,a);s&&i.push({path:n.path||n.name,content:s,size:n.size,sha:n.sha})}catch(s){console.warn("Could not get content for ".concat(n.path||n.name,":"),s.message)}else"dir"===n.type&&await this.getDAKFilesRecursive(e,t,n.path||n.name,a,i)}catch(s){console.warn("Could not get directory contents for ".concat(n,":"),s.message)}}isRelevantFile(e){if(e.startsWith(".")&&".gitignore"!==e)return!1;if(e.includes("node_modules/")||e.includes("build/")||e.includes("dist/")||e.includes(".git/"))return!1;const t=this.getFileExtension(e);return["yaml","yml","json","xml","bpmn","dmn","md","txt","fsh","feature","js","ts"].includes(t)||"sushi-config.yaml"===e||"README.md"===e}getFileExtension(e){const t=e.split(".");return t.length>1?t[t.length-1].toLowerCase():""}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,entries:Array.from(this.cache.keys())}}};var L=n(77003),_=n.n(L),E=n(80483),T=n.n(E);const z=new class{constructor(){var e,t,n,a;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.ajv=void 0,this.schemas={},this.validators=new Map,this.config=void 0,this.config={strict:null===(e=i.strict)||void 0===e||e,throwOnError:null!==(t=i.throwOnError)&&void 0!==t&&t,coerceTypes:null!==(n=i.coerceTypes)&&void 0!==n&&n,removeAdditional:null!==(a=i.removeAdditional)&&void 0!==a&&a},this.ajv=new(_())({allErrors:!0,strict:this.config.strict,coerceTypes:this.config.coerceTypes,removeAdditional:this.config.removeAdditional,loadSchema:this.loadSchema.bind(this)}),T()(this.ajv),this.addCustomFormats()}addCustomFormats(){this.ajv.addFormat("github-username",{type:"string",validate:e=>/^[a-zA-Z0-9]([a-zA-Z0-9]|-(?=[a-zA-Z0-9])){0,38}$/.test(e)}),this.ajv.addFormat("github-token",{type:"string",validate:e=>/^(ghp_|github_pat_)[a-zA-Z0-9_]{16,}$/.test(e)}),this.ajv.addFormat("fhir-id",{type:"string",validate:e=>/^[A-Za-z0-9\-\.]{1,64}$/.test(e)}),this.ajv.addFormat("dak-id",{type:"string",validate:e=>/^[a-z0-9]([a-z0-9-])*[a-z0-9]$/.test(e)}),this.ajv.addFormat("who-smart-base",{type:"string",validate:e=>"smart.who.int.base"===e})}registerSchema(e,t){this.schemas[e]=t;const n=this.ajv.compile(t);this.validators.set(e,n)}async loadSchema(e){const t=e.split("/").pop()||e;if(this.schemas[t])return this.schemas[t];try{const e=await fetch("/sgex/schemas/".concat(t,".json"));if(e.ok){const n=await e.json();return this.registerSchema(t,n),n}}catch(n){console.warn("Failed to load schema for ".concat(t,":"),n)}return!1}validate(e,t,n){var a;const i=this.validators.get(e);if(!i){var s;const a={code:"SCHEMA_NOT_FOUND",message:"Schema for type '".concat(e,"' not found"),path:e};if(null!==(s=null===n||void 0===n?void 0:n.throwOnError)&&void 0!==s?s:this.config.throwOnError)throw new Error(a.message);return{data:t,isValid:!1,errors:[a],warnings:[]}}const o=[],r=[];if(!i(t)&&i.errors)for(const l of i.errors){const e={code:l.keyword||"VALIDATION_ERROR",message:this.formatErrorMessage(l),path:l.instancePath,value:l.data};this.isWarningError(l)?r.push({code:e.code,message:e.message,path:e.path,value:e.value}):o.push(e)}const c=o.length>0;if(c&&(null!==(a=null===n||void 0===n?void 0:n.throwOnError)&&void 0!==a?a:this.config.throwOnError))throw new Error("Validation failed for ".concat(e,": ").concat(o[0].message));return{data:t,isValid:!c,errors:o,warnings:r}}validateAndCast(e,t,n){const a=this.validate(e,t,n);var i;if(!a.isValid)throw new Error("Type validation failed for ".concat(e,": ").concat(null===(i=a.errors[0])||void 0===i?void 0:i.message));return a.data}validateBatch(e,t,n){return t.map(t=>this.validate(e,t,n))}async validateAsync(e,t,n){try{var a;const i=this.validate(e,t,n);return{success:i.isValid,data:i.isValid?i.data:void 0,error:null===(a=i.errors[0])||void 0===a?void 0:a.message,errors:i.errors.map(e=>e.message)}}catch(i){return{success:!1,error:i.message,errors:[i.message]}}}getRegisteredTypes(){return Array.from(this.validators.keys())}hasType(e){return this.validators.has(e)}formatErrorMessage(e){var t,n,a,i,s,o,r;const c=e.instancePath||"root",l=e.instancePath?e.instancePath.split("/").pop():"data";switch(e.keyword){case"required":return"Missing required property: ".concat(null===(t=e.params)||void 0===t?void 0:t.missingProperty);case"type":return"Expected ".concat(null===(n=e.params)||void 0===n?void 0:n.type," but received ").concat(typeof e.data," at ").concat(c);case"format":return"Invalid ".concat(null===(a=e.params)||void 0===a?void 0:a.format," format for ").concat(l,': "').concat(e.data,'"');case"minLength":return"".concat(l," must be at least ").concat(null===(i=e.params)||void 0===i?void 0:i.limit," characters long");case"maxLength":return"".concat(l," must not exceed ").concat(null===(s=e.params)||void 0===s?void 0:s.limit," characters");case"pattern":return"".concat(l," does not match required pattern");case"enum":return"".concat(l," must be one of: ").concat(null===(o=e.params)||void 0===o||null===(r=o.allowedValues)||void 0===r?void 0:r.join(", "));default:return e.message||"Validation error: ".concat(e.keyword)}}isWarningError(e){return["format","pattern"].includes(e.keyword)||["/description","/title","/name"].some(t=>{var n;return null===(n=e.instancePath)||void 0===n?void 0:n.startsWith(t)})}}({strict:!1,coerceTypes:!0,removeAdditional:!1,throwOnError:!1});(async()=>{try{const e={type:"object",required:["login","id","node_id","avatar_url","url","html_url","type","site_admin"],properties:{login:{type:"string",format:"github-username"},id:{type:"number"},node_id:{type:"string"},avatar_url:{type:"string",format:"uri"},url:{type:"string",format:"uri"},html_url:{type:"string",format:"uri"},type:{type:"string"},site_admin:{type:"boolean"},name:{type:"string"},email:{type:"string",format:"email"},created_at:{type:"string",format:"date-time"},updated_at:{type:"string",format:"date-time"}}};z.registerSchema("GitHubUser",e);const t={type:"object",required:["validationId","component","level","description","filePath"],properties:{validationId:{type:"string"},component:{type:"string"},level:{type:"string",enum:["error","warning","info"]},description:{type:"string"},filePath:{type:"string"},message:{type:"string"},line:{type:"number"},column:{type:"number"},suggestion:{type:"string"}}};z.registerSchema("DAKValidationResult",t)}catch(e){console.warn("Failed to register core schemas:",e)}})();const I=z,P=e=>{var t;let{repository:n,profile:i,selectedBranch:o,onValidationComplete:r}=e;const{t:c}=(0,s.Bd)(),[l,d]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)(null),[v,g]=(0,a.useState)("all"),[y,b]=(0,a.useState)([]),w=C.getComponentSummary(),x=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";if(n&&i){h(!0),g(e);try{var t;const a=(null===(t=n.owner)||void 0===t?void 0:t.login)||n.full_name.split("/")[0],i=n.name,s=o||n.default_branch||"main";if(I.hasType("GitHubRepository")){const e=I.validate("GitHubRepository",n);e.isValid||console.warn("Repository data validation warnings:",e.warnings)}let c;if("all"===e)c=await M.validateDAK(a,i,s);else{const t=(await M.getDAKFiles(a,i,s)).filter(t=>{return((n=t.path).endsWith("sushi-config.yaml")?"dak-structure":n.endsWith(".bpmn")?"business-processes":n.endsWith(".dmn")?"decision-support-logic":n.includes("questionnaire")?"core-data-elements":n.includes("measure")?"indicators":n.includes("test")||n.endsWith(".feature")?"test-scenarios":n.includes("requirement")?"requirements":"file-structure")===e;var n});c=await M.validateComponent(e,t)}I.hasType("DAKValidationResult")&&Object.values(c.byComponent).flat().forEach(e=>{const t=I.validate("DAKValidationResult",e);t.isValid||console.warn("Validation result type safety warning:",t.errors)}),f(c);const l={timestamp:Date.now(),component:e,summary:c.summary,canSave:c.canSave,totalIssues:c.total};b(e=>[l,...e.slice(0,4)]),r&&r(c)}catch(a){console.error("Validation failed:",a),f({error:"Validation failed: ".concat(a.message),summary:{error:1,warning:0,info:0},byComponent:{},byFile:{},canSave:!1,total:1})}finally{h(!1)}}else console.warn("Cannot run validation without repository and profile")},F=e=>{switch(e){case S:return"\ud83d\udeab";case k:return"\u26a0\ufe0f";case D:return"\u2139\ufe0f";default:return"\u2753"}},j=e=>{switch(e){case S:return"validation-error";case k:return"validation-warning";case D:return"validation-info";default:return"validation-unknown"}};(0,a.useEffect)(()=>{n&&i&&!m&&x("all")},[null===n||void 0===n?void 0:n.name,null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.login,o]);return(0,u.jsxs)("div",{className:"validation-panel",children:[(0,u.jsxs)("div",{className:"validation-panel-header",onClick:()=>d(!l),children:[(0,u.jsxs)("h2",{className:"validation-panel-title",children:["DAK Validation",p&&(0,u.jsxs)("span",{className:"validation-count",children:["(",p?p.summary.error+p.summary.warning+p.summary.info:0," issues)"]})]}),(0,u.jsx)("button",{className:"expand-button","aria-label":"Toggle validation panel",children:l?"\ud83d\udd3d":"\ud83d\udd3c"})]}),l&&(0,u.jsxs)("div",{className:"validation-panel-content",children:[(0,u.jsxs)("div",{className:"component-selector",children:[(0,u.jsx)("label",{htmlFor:"component-select",children:"Validate Component:"}),(0,u.jsxs)("select",{id:"component-select",value:v,onChange:e=>g(e.target.value),disabled:m,children:[(0,u.jsx)("option",{value:"all",children:"All Components"}),Object.entries(A).map(e=>{var t;let[n,a]=e;return(0,u.jsxs)("option",{value:n,children:[a.name," (",(null===(t=w[n])||void 0===t?void 0:t.validationCount)||0," validations)"]},n)})]}),(0,u.jsx)("button",{className:"validate-button",onClick:()=>x(v),disabled:m||!n||!i,children:m?"Validating...":"Run Validation"})]}),(null===p||void 0===p?void 0:p.error)&&(0,u.jsxs)("div",{className:"validation-error-message",children:[(0,u.jsx)("strong",{children:"Error:"})," ",p.error]}),(()=>{if(!p)return null;const{summary:e}=p,t=e.error>0||e.warning>0||e.info>0;return(0,u.jsxs)("div",{className:"validation-summary",children:[(0,u.jsxs)("div",{className:"summary-header",children:[(0,u.jsx)("h3",{children:"Validation Summary"}),(0,u.jsx)("div",{className:"save-indicator ".concat(p.canSave?"can-save":"cannot-save"),children:p.canSave?"\u2705 Can Save":"\u274c Cannot Save"})]}),t?(0,u.jsxs)("div",{className:"summary-counts",children:[e.error>0&&(0,u.jsxs)("span",{className:"summary-count summary-error",children:["\ud83d\udeab ",e.error," Errors"]}),e.warning>0&&(0,u.jsxs)("span",{className:"summary-count summary-warning",children:["\u26a0\ufe0f ",e.warning," Warnings"]}),e.info>0&&(0,u.jsxs)("span",{className:"summary-count summary-info",children:["\u2139\ufe0f ",e.info," Info"]})]}):(0,u.jsx)("div",{className:"summary-success",children:"\u2705 All validations passed!"}),p.metadata&&(0,u.jsx)("div",{className:"validation-metadata",children:(0,u.jsxs)("small",{children:[p.metadata.filesValidated," files validated",p.metadata.validatedAt&&" at ".concat(new Date(p.metadata.validatedAt).toLocaleTimeString())]})})]})})(),m&&(0,u.jsxs)("div",{className:"validation-loading",children:[(0,u.jsx)("div",{className:"loading-spinner",children:"\u23f3"}),(0,u.jsx)("span",{children:"Running validation..."})]}),!m&&p&&!p.error&&(0,u.jsxs)("div",{className:"validation-results",children:[(0,u.jsx)("h3",{children:"Validation Results"}),p&&p.byComponent?(0,u.jsx)("div",{className:"validation-results-by-component",children:Object.entries(p.byComponent).map(e=>{var t;let[n,a]=e;return(0,u.jsxs)("div",{className:"component-validation-section",children:[(0,u.jsxs)("h4",{className:"component-title",children:[(null===(t=A[n])||void 0===t?void 0:t.name)||n," (",a.length,")"]}),(0,u.jsx)("div",{className:"component-results",children:a.map((e,t)=>((e,t)=>{var n,a;return(0,u.jsxs)("div",{className:"validation-result ".concat(j(e.level)),children:[(0,u.jsxs)("div",{className:"validation-result-header",children:[(0,u.jsx)("span",{className:"validation-icon",children:F(e.level)}),(0,u.jsx)("span",{className:"validation-level",children:(a=e.level,c("validation.levels.".concat(a),a))}),(0,u.jsx)("span",{className:"validation-component",children:(null===(n=A[e.component])||void 0===n?void 0:n.name)||e.component})]}),(0,u.jsxs)("div",{className:"validation-result-content",children:[(0,u.jsx)("div",{className:"validation-message",children:e.message}),(0,u.jsx)("div",{className:"validation-file",children:e.filePath}),e.line&&(0,u.jsxs)("div",{className:"validation-location",children:["Line ",e.line,e.column&&", Column ".concat(e.column)]}),e.suggestion&&(0,u.jsxs)("div",{className:"validation-suggestion",children:[(0,u.jsx)("strong",{children:"Suggestion:"})," ",e.suggestion]})]})]},"".concat(e.validationId,"-").concat(t))})(e,t))})]},n)})}):(0,u.jsx)("div",{className:"no-results",children:"No validation results available"})]}),0===y.length?null:(0,u.jsxs)("div",{className:"validation-history",children:[(0,u.jsx)("h4",{children:"Recent Validations"}),(0,u.jsx)("div",{className:"history-list",children:y.map((e,t)=>{var n,a;return(0,u.jsxs)("div",{className:"history-entry",children:[(0,u.jsxs)("div",{className:"history-header",children:[(0,u.jsx)("span",{className:"history-component",children:"all"===e.component?"All Components":(null===(n=A[e.component])||void 0===n?void 0:n.name)||e.component}),(0,u.jsx)("span",{className:"history-time",children:(a=e.timestamp,new Date(a).toLocaleTimeString())})]}),(0,u.jsxs)("div",{className:"history-summary",children:[(0,u.jsx)("span",{className:"history-save-status ".concat(e.canSave?"can-save":"cannot-save"),children:e.canSave?"\u2705":"\u274c"}),(0,u.jsxs)("span",{className:"history-counts",children:[e.summary.error>0&&"\ud83d\udeab ".concat(e.summary.error," "),e.summary.warning>0&&"\u26a0\ufe0f ".concat(e.summary.warning," "),e.summary.info>0&&"\u2139\ufe0f ".concat(e.summary.info," "),0===e.totalIssues&&"All passed"]})]})]},"".concat(e.timestamp,"-").concat(t))})})]})]})]})};var R=n(52962),V=n(62148),$=n(13333),O=n(6735);const K=()=>{var e,t,n,l;const{t:f}=(0,s.Bd)(),v=(0,i.zy)(),g=(0,i.Zp)(),{user:y,repo:b,branch:w}=(0,i.g)(),x=(0,d.A)("sgex-mascot.png"),[F,j]=(0,a.useState)((null===(e=v.state)||void 0===e?void 0:e.profile)||null),[N,A]=(0,a.useState)((null===(t=v.state)||void 0===t?void 0:t.repository)||null),[S,k]=(0,a.useState)(!F||!N),[D,C]=(0,a.useState)(null),[M,L]=(0,a.useState)(!1),[_,E]=(0,a.useState)(!1),[T,z]=(0,a.useState)("core"),[I,V]=(0,a.useState)((null===(n=v.state)||void 0===n?void 0:n.selectedBranch)||w||null),[K,B]=(0,a.useState)({}),[H,W]=(0,a.useState)(!1),q=e=>{let{component:t,handleComponentClick:n,t:i}=e;const[s,o]=(0,a.useState)(!1),[r,c]=(0,a.useState)(!1),l=(0,d.A)(t.cardImage);return(0,u.jsxs)("div",{className:"component-card ".concat(t.type.toLowerCase()," large-card ").concat(s?"image-loaded":""),onClick:e=>n(e,t),style:{"--component-color":t.color},tabIndex:0,role:"button","aria-label":"".concat(t.name," - ").concat(t.description),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n(e,t))},children:[(0,u.jsx)("div",{className:"component-header",children:(0,u.jsxs)("div",{className:"component-image-container",children:[(0,u.jsx)("img",{src:l,alt:(0,O.lm)(i,O.ld.ICON_DAK_COMPONENT,t.name,{name:t.name}),className:"component-card-image",onLoad:()=>{o(!0),c(!1)},onError:()=>{c(!0),o(!1)},style:{display:r?"none":"block"}}),r&&(0,u.jsx)("div",{className:"component-icon",style:{color:t.color},children:t.icon})]})}),(0,u.jsxs)("div",{className:"component-content",children:[(0,u.jsx)("h4",{className:s&&!r?"visually-hidden":"",children:t.name}),(0,u.jsx)("p",{className:s&&!r?"visually-hidden":"",children:t.description}),(0,u.jsxs)("div",{className:"component-meta",children:[(0,u.jsx)("div",{className:"file-types",children:t.fileTypes.map(e=>(0,u.jsx)("span",{className:"file-type-tag",children:e},e))}),(0,u.jsxs)("div",{className:"file-count",children:[t.count," files"]})]})]})]})};(0,a.useEffect)(()=>{(async()=>{if(F&&N||!y||!b)k(!1);else try{if(k(!0),C(null),!o.A.isAuth()){if(window.location.pathname.includes("/dashboard/")){if(!r.A.validateDemoDAKRepository(y,b))return void g("/",{state:{warningMessage:"Could not access the requested DAK. Repository '".concat(y,"/").concat(b,"' not found or not accessible.")}});const e={login:y,name:y.charAt(0).toUpperCase()+y.slice(1),avatar_url:"https://github.com/".concat(y,".png"),type:"User",isDemo:!0},t={name:b,full_name:"".concat(y,"/").concat(b),owner:{login:y},default_branch:w||"main",html_url:"https://github.com/".concat(y,"/").concat(b),isDemo:!0};return j(e),A(t),V(w||"main"),void k(!1)}return C(f("auth.authRequired")),void k(!1)}let t=null;try{t=await o.A.getUser(y)}catch(e){return console.error("Error fetching user:",e),void g("/",{state:{warningMessage:"Could not access the requested DAK. User '".concat(y,"' not found or not accessible.")}})}let n=null;try{n=await o.A.getRepository(y,b)}catch(e){return console.error("Error fetching repository:",e),void g("/",{state:{warningMessage:"Could not access the requested DAK. Repository '".concat(y,"/").concat(b,"' not found or not accessible.")}})}if(!await r.A.validateDAKRepository(y,b,w||n.default_branch))return console.log("Repository ".concat(y,"/").concat(b," is not a valid DAK repository")),void g("/",{state:{warningMessage:"Could not access the requested DAK. Repository '".concat(y,"/").concat(b,"' not found or not accessible.")}});if(w)try{await o.A.getBranch(y,b,w),V(w)}catch(e){console.warn("Branch '".concat(w,"' not found, falling back to default branch")),V(n.default_branch)}else V(n.default_branch);j(t),A(n),k(!1)}catch(e){console.error("Error fetching data from URL params:",e),C("Failed to load dashboard data. Please check the URL or try again."),k(!1)}})()},[y,b,w,F,N,g,f]),(0,a.useEffect)(()=>{if(N){const e=c.default.getSelectedBranch(N);if(e)V(e);else if(F&&"demo-user"===F.login){const e=N.default_branch||"main";V(e),c.default.setSelectedBranch(N,e)}}},[N,F]);(0,a.useEffect)(()=>{N&&!S&&(async()=>{if(N)try{var e;const t=(null===(e=N.owner)||void 0===e?void 0:e.login)||N.full_name.split("/")[0],n=N.name,a=(await o.A.getIssues(t,n,{state:"all",per_page:100})).filter(e=>!e.pull_request),i=a.filter(e=>"open"===e.state).length,s=a.filter(e=>"closed"===e.state).length;B({total:a.length,open:i,closed:s})}catch(t){console.warn("Could not load issue counts:",t),B({total:0,open:0,closed:0})}})()},[N,S]),(0,a.useEffect)(()=>{(async()=>{if(N&&F)try{var e;const t=await o.A.checkRepositoryWritePermissions((null===(e=N.owner)||void 0===e?void 0:e.login)||N.full_name.split("/")[0],N.name);L(t)}catch(D){console.warn("Could not check write permissions:",D),L(!1)}k(!1)})()},[N,F]),(0,a.useEffect)(()=>{const e=e=>{H&&!e.target.closest(".user-menu-container")&&W(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[H]);const G=[{id:"health-interventions",name:f("dak.healthInterventions"),description:"Clinical guidelines and health intervention specifications that define evidence-based care recommendations",icon:"\ud83d\udcd6",cardImage:"dashboard/dak_interventions.png",type:"L2",color:"#0078d4",fileTypes:["IRIS","Publication"],count:5,editor:"Publication reference manager with IRIS integration"},{id:"generic-personas",name:f("dak.genericPersonas"),description:"Standardized user roles and actor definitions that represent different types of healthcare workers and patients",icon:"\ud83d\udc65",cardImage:"dashboard/dak_personas.png",type:"L2",color:"#107c10",fileTypes:["Actor","Role"],count:8,editor:"Persona definition editor with role-based access specifications"},{id:"user-scenarios",name:f("dak.userScenarios"),description:"Narrative descriptions of how different personas interact with the system in specific healthcare contexts",icon:"\ud83d\udcdd",cardImage:"dashboard/dak_user_scenarios.png",type:"L2",color:"#881798",fileTypes:["Narrative","Use Case"],count:12,editor:"Scenario editor with workflow visualization"},{id:"business-processes",name:f("dak.businessProcesses"),description:"BPMN workflows and business process definitions that model clinical workflows and care pathways",icon:"\ud83d\udd04",cardImage:"dashboard/dak_business_processes.png",type:"L2",color:"#d13438",fileTypes:["BPMN","XML"],count:15,editor:"Graphical BPMN editor with SVG visualization"},{id:"core-data-elements",name:f("dak.coreDataElements"),description:"Essential data structures and terminology needed for clinical data capture and exchange (includes Terminology Services via OCL and Product Master Data via PCMT)",icon:"\ud83d\uddc3\ufe0f",cardImage:"dashboard/dak_core_data_elements.png",type:"L2",color:"#ff8c00",fileTypes:["OCL","Concept","PCMT","Product"],count:K.total||89,editor:"Data element editor with OCL and PCMT integration"},{id:"decision-support",name:f("dak.decisionSupportLogic"),description:"DMN decision tables and clinical decision support rules that encode clinical logic",icon:"\ud83c\udfaf",cardImage:"dashboard/dak_decision_support_logic.png",type:"L2",color:"#00bcf2",fileTypes:["DMN","XML"],count:24,editor:"DMN decision table editor with validation"},{id:"program-indicators",name:f("dak.programIndicators"),description:"Performance indicators and measurement definitions for monitoring and evaluation",icon:"\ud83d\udcca",cardImage:"dashboard/dak_indicators.png",type:"L2",color:"#498205",fileTypes:["Measure","Logic"],count:18,editor:"Indicator definition editor with measurement logic"},{id:"functional-requirements",name:f("dak.requirements"),description:"System requirements specifications that define capabilities and constraints",icon:"\u2699\ufe0f",cardImage:"dashboard/dak_requirements.png",type:"L2",color:"#6b69d6",fileTypes:["Requirements","Specification"],count:32,editor:"Requirements editor with structured templates"},{id:"test-scenarios",name:f("dak.testScenarios")||"Test Scenarios",description:"Feature files and test scenarios for validating the DAK implementation",icon:"\ud83e\uddea",cardImage:"dashboard/dak_testing.png",type:"L2",color:"#8b5cf6",fileTypes:["Feature","Test"],count:0,editor:"Testing viewer with feature file browser"}],X=(e,t)=>{const n={profile:F,repository:N,component:t,selectedBranch:I};if("decision-support"===t.id){var a;const t=(null===(a=N.owner)||void 0===a?void 0:a.login)||N.full_name.split("/")[0],i=N.name,s=I?"/decision-support-logic/".concat(t,"/").concat(i,"/").concat(I):"/decision-support-logic/".concat(t,"/").concat(i);return void(0,$.hX)(e,s,g,n)}if("business-processes"===t.id){var i;const t=(null===(i=N.owner)||void 0===i?void 0:i.login)||N.full_name.split("/")[0],a=N.name,s=I?"/business-process-selection/".concat(t,"/").concat(a,"/").concat(I):"/business-process-selection/".concat(t,"/").concat(a);return void(0,$.hX)(e,s,g,n)}if("health-interventions"!==t.id){if("core-data-elements"===t.id){var s;const t=y||(null===(s=N.owner)||void 0===s?void 0:s.login)||N.full_name.split("/")[0],a=b||N.name,i=I,o=i?"/core-data-dictionary-viewer/".concat(t,"/").concat(a,"/").concat(i):"/core-data-dictionary-viewer/".concat(t,"/").concat(a);return void(0,$.hX)(e,o,g,n)}if("generic-personas"===t.id){var o;const t=(null===(o=N.owner)||void 0===o?void 0:o.login)||N.full_name.split("/")[0],a=N.name,i=I?"/actor-editor/".concat(t,"/").concat(a,"/").concat(I):"/actor-editor/".concat(t,"/").concat(a);return void(0,$.hX)(e,i,g,n)}if("test-scenarios"===t.id){var r;const t=(null===(r=N.owner)||void 0===r?void 0:r.login)||N.full_name.split("/")[0],a=N.name,i=I?"/testing-viewer/".concat(t,"/").concat(a,"/").concat(I):"/testing-viewer/".concat(t,"/").concat(a);return void(0,$.hX)(e,i,g,n)}M?(0,$.hX)(e,"/editor/".concat(t.id),g,n):E(!0)}else(0,$.hX)(e,"/editor/".concat(t.id),g,n)};return S?(0,u.jsx)("div",{className:"dak-dashboard loading-state",children:(0,u.jsxs)("div",{className:"loading-content",children:[(0,u.jsx)("h2",{children:"Loading Dashboard..."}),(0,u.jsx)("p",{children:"Fetching repository and user data..."})]})}):D?(0,u.jsx)("div",{className:"dak-dashboard error-state",children:(0,u.jsxs)("div",{className:"error-content",children:[(0,u.jsx)("h2",{children:f("dashboard.errorLoading")}),(0,u.jsx)("p",{children:D}),(0,u.jsxs)("div",{className:"error-actions",children:[(0,u.jsx)("button",{onClick:()=>g("/"),className:"action-btn primary",children:f("navigation.home")}),(0,u.jsx)("button",{onClick:()=>window.location.reload(),className:"action-btn secondary",children:f("common.retry")})]})]})}):F&&N?(0,u.jsxs)("div",{className:"dak-dashboard",children:[(0,u.jsx)("div",{className:"dashboard-content",children:(0,u.jsxs)("div",{className:"dashboard-main",children:[(0,u.jsxs)("div",{className:"dashboard-intro",children:[(0,u.jsx)("h2",{children:f("dak.components")}),(0,u.jsxs)("p",{children:["Select a component to edit content for ",(0,u.jsx)("strong",{children:N.name}),I&&(0,u.jsxs)("span",{children:[" on branch ",(0,u.jsx)("code",{className:"branch-display",children:I})]}),". Components are organized according to the WHO SMART Guidelines framework."]})]}),(0,u.jsx)(R.A,{profile:F,repository:N,selectedBranch:I}),N&&I&&(0,u.jsx)(h.A,{repository:N,selectedBranch:I,hasWriteAccess:M,profile:F}),(0,u.jsxs)("div",{className:"tab-navigation-fullwidth",children:[(0,u.jsxs)("button",{className:"tab-button-fullwidth ".concat("core"===T?"active":""),onClick:()=>z("core"),children:[(0,u.jsx)("span",{className:"tab-icon",children:"\u2b50"}),(0,u.jsx)("span",{className:"tab-text",children:"9 Core Components"})]}),(0,u.jsxs)("button",{className:"tab-button-fullwidth ".concat("publications"===T?"active":""),onClick:()=>z("publications"),children:[(0,u.jsx)("span",{className:"tab-icon",children:"\ud83d\udcda"}),(0,u.jsx)("span",{className:"tab-text",children:"Publications"})]}),(0,u.jsxs)("button",{className:"tab-button-fullwidth ".concat("other"===T?"active":""),onClick:()=>z("other"),children:[(0,u.jsx)("span",{className:"tab-icon",children:"\ud83d\udd27"}),(0,u.jsx)("span",{className:"tab-text",children:"Other DAK Components"})]})]}),"core"===T&&(0,u.jsxs)("div",{className:"components-section active",children:[(0,u.jsxs)("div",{className:"section-header",children:[(0,u.jsx)("h3",{className:"section-title",children:f("dak.components")}),(0,u.jsx)("p",{className:"section-description",children:"Essential components that form the foundation of any WHO SMART Guidelines Digital Adaptation Kit"})]}),(0,u.jsx)("div",{className:"components-grid core-components",children:G.map(e=>(0,u.jsx)(q,{component:e,handleComponentClick:X,t:f},e.id))})]}),"other"===T&&(0,u.jsxs)("div",{className:"components-section other-components active",children:[(0,u.jsxs)("div",{className:"section-header",children:[(0,u.jsx)("h3",{className:"section-title",children:"Other DAK Components"}),(0,u.jsx)("p",{className:"section-description",children:"Additional specialized components for advanced DAK functionality and implementation"})]}),(0,u.jsx)("div",{className:"components-grid other-components",children:(0,u.jsxs)("div",{className:"component-card l3",onClick:e=>{var t;const n=(null===(t=N.owner)||void 0===t?void 0:t.login)||N.full_name.split("/")[0],a=N.name,i=I?"/questionnaire-editor/".concat(n,"/").concat(a,"/").concat(I):"/questionnaire-editor/".concat(n,"/").concat(a),s={profile:F,repository:N,component:{id:"questionnaire-editor",name:"FHIR Questionnaires",description:"Structured questionnaires and forms for data collection using FHIR standard"},selectedBranch:I};(0,$.hX)(e,i,g,s)},style:{"--component-color":"#17a2b8"},children:[(0,u.jsx)("div",{className:"component-header",children:(0,u.jsx)("div",{className:"component-icon",style:{color:"#17a2b8"},children:"\ud83d\udccb"})}),(0,u.jsxs)("div",{className:"component-content",children:[(0,u.jsx)("h4",{children:"FHIR Questionnaires"}),(0,u.jsx)("p",{children:"Structured questionnaires and forms for data collection using FHIR Questionnaire standard"}),(0,u.jsxs)("div",{className:"component-meta",children:[(0,u.jsxs)("div",{className:"file-types",children:[(0,u.jsx)("span",{className:"file-type-tag",children:"JSON"}),(0,u.jsx)("span",{className:"file-type-tag",children:"FHIR"})]}),(0,u.jsx)("div",{className:"file-count",children:"questionnaires/"})]})]})]})})]}),"publications"===T&&(0,u.jsx)("div",{className:"components-section publications-section active",children:(0,u.jsx)(p.A,{profile:F,repository:N,selectedBranch:I,hasWriteAccess:M})}),(0,u.jsx)(P,{repository:N,profile:F,selectedBranch:I,onValidationComplete:e=>{console.log("Validation completed:",e)}})]})}),_&&(0,u.jsx)("div",{className:"permission-dialog-overlay",children:(0,u.jsxs)("div",{className:"permission-dialog",children:[(0,u.jsxs)("div",{className:"dialog-header",children:[(0,u.jsx)("h3",{children:"Edit Access Required"}),(0,u.jsx)("button",{className:"dialog-close",onClick:()=>E(!1),children:"\xd7"})]}),(0,u.jsxs)("div",{className:"dialog-content",children:[(0,u.jsxs)("div",{className:"dialog-mascot",children:[(0,u.jsx)("img",{src:x,alt:(0,O.lm)(f,O.ld.MASCOT_HELPER,"SGEX Helper"),className:"dialog-mascot-img"}),(0,u.jsxs)("div",{className:"mascot-message",children:[(0,u.jsx)("p",{children:"You need edit permissions to modify DAK components!"}),(0,u.jsx)("p",{children:"Your current token only provides read access to this repository."})]})]}),(0,u.jsxs)("div",{className:"permission-options",children:[(0,u.jsxs)("div",{className:"option-card",children:[(0,u.jsx)("h4",{children:"\ud83d\udd27 Upgrade Your Token"}),(0,u.jsx)("p",{children:"Create a new fine-grained token with write permissions for this repository."}),(0,u.jsxs)("div",{className:"option-buttons",children:[(0,u.jsx)("a",{href:"https://github.com/settings/personal-access-tokens/new",target:"_blank",rel:"noopener noreferrer",className:"btn-primary",children:"Create New Token"}),(0,u.jsx)(m,{helpTopic:"github-token",contextData:{repository:{owner:(null===(l=N.owner)||void 0===l?void 0:l.login)||N.full_name.split("/")[0],name:N.name},requiredScopes:["Contents: Write","Metadata: Read","Pull requests: Write"],permissionMode:"edit",upgradeMode:!0}})]})]}),(0,u.jsxs)("div",{className:"option-card",children:[(0,u.jsx)("h4",{children:"\ud83d\udc41\ufe0f Continue in Read-Only Mode"}),(0,u.jsx)("p",{children:"Browse and view DAK components without editing capabilities."}),(0,u.jsx)("button",{className:"btn-secondary",onClick:()=>E(!1),children:"Continue Read-Only"})]})]})]})]})})]}):(g("/"),(0,u.jsx)("div",{children:"Redirecting..."}))},B=()=>(0,u.jsx)(V.Mx,{pageName:"dak-dashboard",children:(0,u.jsx)(K,{})})},52215:(e,t,n)=>{var a=n(12897).default;function i(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:i(r,c),time:i(d(!0),u),"date-time":i(p(!0),f),"iso-time":i(d(),m),"iso-date-time":i(p(),v),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return g.test(e)&&y.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:http[s\u017F]?|ftp):\/\/(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!(?:10|127)(?:\.[0-9]{1,3}){3})(?!(?:169\.254|192\.168)(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:[0-9KSa-z\xA1-\uFFFF]+-)*[0-9KSa-z\xA1-\uFFFF]+)(?:\.(?:[0-9KSa-z\xA1-\uFFFF]+-)*[0-9KSa-z\xA1-\uFFFF]+)*(?:\.(?:[KSa-z\xA1-\uFFFF]{2,})))(?::[0-9]{2,5})?(?:\/(?:(?![\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*)?$/i,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(j.test(e))return!1;try{return new RegExp(e),!0}catch(t){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return b.lastIndex=0,b.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=x&&e>=w}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:F},double:{type:"number",validate:F},password:!0,binary:!0},t.fastFormats=a(a({},t.fullFormats),{},{date:i(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,c),time:i(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":i(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,f),"iso-time":i(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,m),"iso-date-time":i(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,v),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i}),t.formatNames=Object.keys(t.fullFormats);const s=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31];function r(e){const t=s.exec(e);if(!t)return!1;const n=+t[1],a=+t[2],i=+t[3];return a>=1&&a<=12&&i>=1&&i<=(2===a&&function(e){return e%4===0&&(e%100!==0||e%400===0)}(n)?29:o[a])}function c(e,t){if(e&&t)return e>t?1:e<t?-1:0}const l=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function d(e){return function(t){const n=l.exec(t);if(!n)return!1;const a=+n[1],i=+n[2],s=+n[3],o=n[4],r="-"===n[5]?-1:1,c=+(n[6]||0),d=+(n[7]||0);if(c>23||d>59||e&&!o)return!1;if(a<=23&&i<=59&&s<60)return!0;const u=i-d*r,m=a-c*r-(u<0?1:0);return(23===m||-1===m)&&(59===u||-1===u)&&s<61}}function u(e,t){if(!e||!t)return;const n=new Date("2020-01-01T"+e).valueOf(),a=new Date("2020-01-01T"+t).valueOf();return n&&a?n-a:void 0}function m(e,t){if(!e||!t)return;const n=l.exec(e),a=l.exec(t);return n&&a?(e=n[1]+n[2]+n[3])>(t=a[1]+a[2]+a[3])?1:e<t?-1:0:void 0}const h=/t|\s/i;function p(e){const t=d(e);return function(e){const n=e.split(h);return 2===n.length&&r(n[0])&&t(n[1])}}function f(e,t){if(!e||!t)return;const n=new Date(e).valueOf(),a=new Date(t).valueOf();return n&&a?n-a:void 0}function v(e,t){if(!e||!t)return;const[n,a]=e.split(h),[i,s]=t.split(h),o=c(n,i);return void 0!==o?o||u(a,s):void 0}const g=/\/|:/,y=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const b=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;const w=-(2**31),x=2**31-1;function F(){return!0}const j=/[^\\]\\Z/},80483:(e,t,n)=>{var a,i=n(20166).default;Object.defineProperty(t,"__esModule",{value:!0});const s=n(52215),o=n(87864),r=n(28584),c=new r.Name("fullFormats"),l=new r.Name("fastFormats"),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keywords:!0};if(Array.isArray(t))return u(e,t,s.fullFormats,c),e;const[n,a]="fast"===t.mode?[s.fastFormats,l]:[s.fullFormats,c];return u(e,t.formats||s.formatNames,n,a),t.keywords&&(0,o.default)(e),e};function u(e,t,n,s){var o,c;null!==(o=(c=e.opts.code).formats)&&void 0!==o||(c.formats=(0,r._)(a||(a=i(['require("ajv-formats/dist/formats").',""])),s));for(const a of t)e.addFormat(a,n[a])}d.get=function(e){const t=("fast"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full")?s.fastFormats:s.fullFormats)[e];if(!t)throw new Error('Unknown format "'.concat(e,'"'));return t},e.exports=t=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d},87864:(e,t,n)=>{var a,i,s,o,r,c,l,d,u=n(20166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const m=n(77003),h=n(28584),p=h.operators,f={formatMaximum:{okStr:"<=",ok:p.LTE,fail:p.GT},formatMinimum:{okStr:">=",ok:p.GTE,fail:p.LT},formatExclusiveMaximum:{okStr:"<",ok:p.LT,fail:p.GTE},formatExclusiveMinimum:{okStr:">",ok:p.GT,fail:p.LTE}},v={message:e=>{let{keyword:t,schemaCode:n}=e;return(0,h.str)(a||(a=u(["should be "," ",""])),f[t].okStr,n)},params:e=>{let{keyword:t,schemaCode:n}=e;return(0,h._)(i||(i=u(["{comparison: ",", limit: ","}"])),f[t].okStr,n)}};t.formatLimitDefinition={keyword:Object.keys(f),type:"string",schemaType:"string",$data:!0,error:v,code(e){const{gen:t,data:n,schemaCode:a,keyword:i,it:p}=e,{opts:v,self:g}=p;if(!v.validateFormats)return;const y=new m.KeywordCxt(p,g.RULES.all.format.definition,"format");function b(e){return(0,h._)(d||(d=u(["",".compare(",", ",") "," 0"])),e,n,a,f[i].fail)}y.$data?function(){const n=t.scopeValue("formats",{ref:g.formats,code:v.code.formats}),a=t.const("fmt",(0,h._)(s||(s=u(["","[","]"])),n,y.schemaCode));e.fail$data((0,h.or)((0,h._)(o||(o=u(["typeof ",' != "object"'])),a),(0,h._)(r||(r=u([""," instanceof RegExp"])),a),(0,h._)(c||(c=u(["typeof ",'.compare != "function"'])),a),b(a)))}():function(){const n=y.schema,a=g.formats[n];if(!a||!0===a)return;if("object"!=typeof a||a instanceof RegExp||"function"!=typeof a.compare)throw new Error('"'.concat(i,'": format "').concat(n,'" does not define "compare" function'));const s=t.scopeValue("formats",{key:n,ref:a,code:v.code.formats?(0,h._)(l||(l=u(["","",""])),v.code.formats,(0,h.getProperty)(n)):void 0});e.fail$data(b(s))}()},dependencies:["format"]};t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)}}]);
//# sourceMappingURL=809.0c82f32d.chunk.js.map