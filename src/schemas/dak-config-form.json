{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://litlfred.github.io/sgex/schemas/dak-config-form.json",
  "title": "DAK Configuration Form",
  "description": "Minimal schema for basic DAK configuration - only essential fields required",
  "type": "object",
  "properties": {
    "repositoryUrl": {
      "type": "string",
      "title": "Target Repository",
      "description": "GitHub repository URL or path where DAK will be created/configured",
      "pattern": "^(https://github\\.com/)?[a-zA-Z0-9._-]+/[a-zA-Z0-9._-]+/?$",
      "examples": [
        "who/smart-immunizations",
        "https://github.com/who/smart-immunizations",
        "litlfred/my-new-dak"
      ]
    },
    "sushiConfig": {
      "type": "object",
      "title": "Basic FHIR Implementation Guide Configuration",
      "description": "Essential parameters for the sushi-config.yaml file",
      "properties": {
        "id": {
          "type": "string",
          "title": "Implementation Guide ID",
          "description": "Unique identifier for the FHIR Implementation Guide (lowercase, no spaces)",
          "pattern": "^[a-z0-9][a-z0-9\\-\\.]*[a-z0-9]$",
          "minLength": 3,
          "maxLength": 64,
          "examples": ["who.smart.maternal-health", "my-org.dak.immunization"]
        },
        "title": {
          "type": "string",
          "title": "Implementation Guide Title", 
          "description": "Human-readable title for the DAK Implementation Guide",
          "minLength": 5,
          "maxLength": 200,
          "examples": ["WHO SMART Guidelines - Maternal Health DAK", "Immunization Digital Adaptation Kit"]
        },
        "description": {
          "type": "string",
          "title": "Description",
          "description": "Detailed description of the DAK's purpose and scope",
          "minLength": 20,
          "maxLength": 1000,
          "examples": ["This implementation guide provides digital adaptation kit components for maternal health guidelines including decision support logic, forms, and indicators."]
        }
      },
      "required": ["id", "title", "description"],
      "additionalProperties": false
    },
    "locale": {
      "type": "string",
      "title": "Language/Locale",
      "description": "Optional language/locale preference",
      "enum": ["en", "fr", "es", "ar", "zh", "ru"],
      "default": "en"
    }
  },
  "required": ["repositoryUrl", "sushiConfig"],
  "additionalProperties": false,
  "uiSchema": {
    "repositoryUrl": {
      "ui:help": "Enter the GitHub repository URL or path where the DAK will be created/configured",
      "ui:placeholder": "user/repository-name"
    },
    "sushiConfig": {
      "ui:order": ["id", "title", "description"],
      "id": {
        "ui:help": "Must be lowercase with dots or hyphens. Example: who.smart.maternal-health"
      },
      "title": {
        "ui:widget": "textarea",
        "ui:options": {
          "rows": 2
        }
      },
      "description": {
        "ui:widget": "textarea",
        "ui:options": {
          "rows": 4
        }
      }
    },
    "locale": {
      "ui:help": "Optional: Select your preferred language"
    }
  }
}