"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[414],{89414:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var a=t(89379),i=t(9950),n=t(85001),r=t(29946),o=t(29473);const l=JSON.parse('{"eR":[{"id":"who-smart-ig-empty","name":"WHO template SMART Guidelines","description":"Empty WHO SMART Guidelines template for creating new Digital Adaptation Kits","repository":"https://github.com/WorldHealthOrganization/smart-ig-empty","owner":"WorldHealthOrganization","repo":"smart-ig-empty","isDefault":true,"type":"template","tags":["WHO","SMART Guidelines","Template","Empty"],"version":"latest","documentation":"https://github.com/WorldHealthOrganization/smart-ig-empty/blob/main/README.md"}]}'),c=JSON.parse('{"GJ":[{"id":1001,"name":"smart-immunizations","full_name":"WorldHealthOrganization/smart-immunizations","description":"WHO SMART Guidelines for Immunizations - Digital Adaptation Kit containing business processes, decision support logic, and data models for immunization programs","html_url":"https://github.com/WorldHealthOrganization/smart-immunizations","clone_url":"https://github.com/WorldHealthOrganization/smart-immunizations.git","topics":["who","smart-guidelines","immunization","vaccines","dak","fhir"],"language":"FML","stargazers_count":25,"forks_count":12,"updated_at":"2024-01-20T10:30:00Z","smart_guidelines_compatible":true,"private":false,"owner":{"login":"WorldHealthOrganization","avatar_url":"https://avatars.githubusercontent.com/u/9166906?s=200&v=4","type":"Organization"}},{"id":1002,"name":"smart-trust","full_name":"WorldHealthOrganization/smart-trust","description":"WHO SMART Guidelines for Trust and Verification Framework - Digital health certificates, verification protocols, and trust networks","html_url":"https://github.com/WorldHealthOrganization/smart-trust","clone_url":"https://github.com/WorldHealthOrganization/smart-trust.git","topics":["who","smart-guidelines","trust","verification","certificates","dak"],"language":"FML","stargazers_count":18,"forks_count":8,"updated_at":"2024-01-18T14:20:00Z","smart_guidelines_compatible":true,"private":false,"owner":{"login":"WorldHealthOrganization","avatar_url":"https://avatars.githubusercontent.com/u/9166906?s=200&v=4","type":"Organization"}},{"id":1003,"name":"smart-base","full_name":"WorldHealthOrganization/smart-base","description":"WHO SMART Guidelines Base Implementation Guide - Core profiles, extensions, and terminology for all SMART Guidelines DAKs","html_url":"https://github.com/WorldHealthOrganization/smart-base","clone_url":"https://github.com/WorldHealthOrganization/smart-base.git","topics":["who","smart-guidelines","base","fhir","profiles","terminology"],"language":"FML","stargazers_count":35,"forks_count":15,"updated_at":"2024-01-22T09:15:00Z","smart_guidelines_compatible":true,"private":false,"owner":{"login":"WorldHealthOrganization","avatar_url":"https://avatars.githubusercontent.com/u/9166906?s=200&v=4","type":"Organization"}},{"id":1004,"name":"smart-anc","full_name":"WorldHealthOrganization/smart-anc","description":"WHO SMART Guidelines for Antenatal Care - Digital Adaptation Kit for pregnancy care, monitoring, and interventions","html_url":"https://github.com/WorldHealthOrganization/smart-anc","clone_url":"https://github.com/WorldHealthOrganization/smart-anc.git","topics":["who","smart-guidelines","anc","antenatal-care","pregnancy","maternal-health"],"language":"FML","stargazers_count":22,"forks_count":10,"updated_at":"2024-01-16T11:45:00Z","smart_guidelines_compatible":true,"private":false,"owner":{"login":"WorldHealthOrganization","avatar_url":"https://avatars.githubusercontent.com/u/9166906?s=200&v=4","type":"Organization"}},{"id":1005,"name":"smart-ig-starter-kit","full_name":"WorldHealthOrganization/smart-ig-starter-kit","description":"WHO SMART Guidelines Implementation Guide Starter Kit - Tools and templates for creating SMART Guidelines DAKs","html_url":"https://github.com/WorldHealthOrganization/smart-ig-starter-kit","clone_url":"https://github.com/WorldHealthOrganization/smart-ig-starter-kit.git","topics":["who","smart-guidelines","starter-kit","template","tools","dak"],"language":"JavaScript","stargazers_count":15,"forks_count":6,"updated_at":"2024-01-14T16:30:00Z","smart_guidelines_compatible":true,"private":false,"owner":{"login":"WorldHealthOrganization","avatar_url":"https://avatars.githubusercontent.com/u/9166906?s=200&v=4","type":"Organization"}},{"id":1006,"name":"smart-ig-empty","full_name":"WorldHealthOrganization/smart-ig-empty","description":"Empty WHO SMART Guidelines template for creating new Digital Adaptation Kits from scratch","html_url":"https://github.com/WorldHealthOrganization/smart-ig-empty","clone_url":"https://github.com/WorldHealthOrganization/smart-ig-empty.git","topics":["who","smart-guidelines","template","empty","dak"],"language":"FML","stargazers_count":12,"forks_count":4,"updated_at":"2024-01-12T08:20:00Z","smart_guidelines_compatible":true,"private":false,"owner":{"login":"WorldHealthOrganization","avatar_url":"https://avatars.githubusercontent.com/u/9166906?s=200&v=4","type":"Organization"}}]}');var d=t(51635),m=t(44414);const p=e=>{var s;let{selectedRepository:t,setSelectedRepository:p}=e;const u=(0,n.zy)(),h=(0,n.Zp)(),{params:g,profile:x}=(0,d.HX)(),j=null===g||void 0===g?void 0:g.user,v=x||(null===(s=u.state)||void 0===s?void 0:s.profile),b=(0,i.useRef)();b.current=v;const{action:f}=u.state||{},[N,y]=(0,i.useState)([]),[w,_]=(0,i.useState)(!0),[k,A]=(0,i.useState)(null),[S,z]=(0,i.useState)(!1),[O,H]=(0,i.useState)(null),[R,W]=(0,i.useState)(new Set),[T,C]=(0,i.useState)(!1),[M,G]=(0,i.useState)(null),[D,E]=(0,i.useState)(!1),[I,L]=(0,i.useState)(null),F=f||I;(0,i.useEffect)(()=>{if(j||v)return!j||f||I?void(j&&!v&&void 0===x||(!j||v||null!==x?j&&v&&v.login!==j?h("/"):!v||j||h("/dak-selection/".concat(v.login),{state:{profile:v,action:F},replace:!0}):h("/"))):"WorldHealthOrganization"===j||"WHO"===j||j.toLowerCase().includes("health")?void L("edit"):void h("/dak-action/".concat(j),{replace:!0});h("/")},[j,v,f,I,x,h,F]);const P=e=>{var s,t;if(!e)return null;const a=(null===(s=e.owner)||void 0===s?void 0:s.login)||(null===(t=e.full_name)||void 0===t?void 0:t.split("/")[0]),i=e.name;return a&&i?{user:a,repo:i}:(console.error("Unable to extract user/repo from repository object:",e),null)},K=()=>{switch(F){case"edit":return{title:"Select DAK to Edit",description:"Choose an existing DAK repository that you have permission to modify.",buttonText:"Continue to Edit Components",nextRoute:"/dashboard"};case"fork":return{title:"Select DAK to Fork",description:"Choose the source DAK repository that you want to fork.",buttonText:"Continue to Organization Selection",nextRoute:"/organization-selection"};case"create":return{title:"Select Template DAK",description:"Choose a template repository to use as the base for your new DAK.",buttonText:"Continue to Organization Selection",nextRoute:"/organization-selection",showTemplate:!0};default:return{title:"Select DAK Repository",description:"Choose a DAK repository to work with.",buttonText:"Continue",nextRoute:"/dashboard"}}},U=(0,i.useCallback)(()=>{const e=b.current;if(!e||!e.login)return[];return[{id:1,name:"maternal-health-dak",full_name:"".concat(e.login,"/maternal-health-dak"),description:"WHO SMART Guidelines for Maternal Health - Digital Adaptation Kit",html_url:"https://github.com/".concat(e.login,"/maternal-health-dak"),topics:["who","smart-guidelines","maternal-health","dak"],language:"FML",stargazers_count:12,forks_count:3,updated_at:"2024-01-15T10:30:00Z",smart_guidelines_compatible:!0},{id:2,name:"immunization-dak",full_name:"".concat(e.login,"/immunization-dak"),description:"Digital Adaptation Kit for Immunization Guidelines",html_url:"https://github.com/".concat(e.login,"/immunization-dak"),topics:["who","smart-guidelines","immunization","vaccines"],language:"FML",stargazers_count:8,forks_count:2,updated_at:"2024-01-10T14:20:00Z",smart_guidelines_compatible:!0},{id:3,name:"anc-dak",full_name:"".concat(e.login,"/anc-dak"),description:"Antenatal Care Digital Adaptation Kit based on WHO guidelines",html_url:"https://github.com/".concat(e.login,"/anc-dak"),topics:["who","anc","antenatal-care","smart-guidelines"],language:"FML",stargazers_count:15,forks_count:5,updated_at:"2024-01-12T09:15:00Z",smart_guidelines_compatible:!0},{id:4,name:"regular-health-app",full_name:"".concat(e.login,"/regular-health-app"),description:"A regular health application without SMART Guidelines",html_url:"https://github.com/".concat(e.login,"/regular-health-app"),topics:["health","app","javascript"],language:"JavaScript",stargazers_count:5,forks_count:1,updated_at:"2024-01-08T16:45:00Z",smart_guidelines_compatible:!1},{id:5,name:"medical-database",full_name:"".concat(e.login,"/medical-database"),description:"Medical database with FHIR but not SMART Guidelines",html_url:"https://github.com/".concat(e.login,"/medical-database"),topics:["fhir","database","medical"],language:"SQL",stargazers_count:7,forks_count:2,updated_at:"2024-01-05T11:20:00Z",smart_guidelines_compatible:!1}].filter(e=>e.smart_guidelines_compatible)},[]),Z=(0,i.useCallback)(async()=>{z(!0),y([]);const e=U(),s=e=>new Promise(s=>setTimeout(s,e));try{for(let t=0;t<e.length;t++){const a=e[t];H({current:t+1,total:e.length,currentRepo:a.name,progress:Math.round((t+1)/e.length*100),completed:!1,started:!0}),W(e=>new Set([...e,a.name])),await s(1e3+1e3*Math.random()),y(e=>[...e,a].sort((e,s)=>e.name.localeCompare(s.name))),H({current:t+1,total:e.length,currentRepo:a.name,progress:Math.round((t+1)/e.length*100),completed:!0}),W(e=>{const s=new Set(e);return s.delete(a.name),s}),await s(300)}console.log("\ud83c\udf89 Demo scanning completed, stopping scanning state"),setTimeout(()=>{z(!1),H(null),W(new Set)},500)}catch(k){console.error("Error in simulated scanning:",k),z(!1),H(null),W(new Set)}},[U]),J=(0,i.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_(!0),A(null),z(!1),H(null),W(new Set),C(!1),G(null),E(!1);try{let n=[],d=null;if("create"===F)n=l.eR.map((e,s)=>({id:-(s+1),name:e.repo,full_name:"".concat(e.owner,"/").concat(e.repo),description:e.description,html_url:e.repository,clone_url:"".concat(e.repository,".git"),topics:e.tags.map(e=>e.toLowerCase().replace(/\s+/g,"-")),language:"FML",stargazers_count:15,forks_count:8,updated_at:(new Date).toISOString(),smart_guidelines_compatible:!0,is_template:!0,template_config:e,owner:{login:e.owner,avatar_url:"WorldHealthOrganization"===e.owner?"https://avatars.githubusercontent.com/u/9166906?s=200&v=4":"https://github.com/favicon.ico"}})),n.sort((e,s)=>e.name.localeCompare(s.name)),y(n);else{if(r.A.isAuth()&&!e)try{d=o.A.getCachedRepositories(v.login,"org"===v.type?"org":"user")}catch(s){console.warn("Error accessing repository cache:",s)}if(d&&!e)console.log("Using cached repository data",o.A.getCacheInfo(v.login,"org"===v.type?"org":"user")),n=d.repositories,C(!0),n.sort((e,s)=>e.name.localeCompare(s.name)),y(n);else if(r.A.isAuth()){console.log(e?"\ud83d\udd04 Force rescanning repositories...":"\ud83d\udd0d No cached data, initiating scan..."),z(!0),_(!1),console.log("\ud83d\udcca Starting enhanced scanning display for authenticated user");const s=6e4,i=new Promise((e,t)=>{setTimeout(()=>t(new Error("Scanning timeout - operation took longer than 60 seconds")),s)}),l=r.A.getSmartGuidelinesRepositoriesProgressive(v.login,"org"===v.type?"org":"user",e=>{y(s=>{if(!s.some(s=>s.id===e.id)){return[...s,e].sort((e,s)=>e.name.localeCompare(s.name))}return s})},e=>{console.log("\ud83d\udcca Real scanning progress:",e),H(e),e.scanningErrors&&G(e.scanningErrors),e.started&&!e.completed?(console.log("\ud83d\udd0d Started scanning:",e.currentRepo),W(s=>new Set([...s,e.currentRepo])),H((0,a.A)((0,a.A)({},e),{},{started:!0,completed:!1}))):e.completed?(console.log("\u2705 Completed scanning:",e.currentRepo),H((0,a.A)((0,a.A)({},e),{},{completed:!0})),setTimeout(()=>{W(s=>{const t=new Set(s);return t.delete(e.currentRepo),t})},200),e.current===e.total&&(console.log("\ud83c\udf89 All repositories scanned, stopping scanning state"),setTimeout(()=>{z(!1),H(null),W(new Set)},500))):0===e.total&&e.completed&&(console.log("\ud83c\udf89 No repositories to scan, stopping scanning state"),setTimeout(()=>{z(!1),H(null),W(new Set)},500))},e=>{console.warn("Individual repository scan error:",e)});try{const e=await Promise.race([l,i]);e&&"object"===typeof e&&e.repositories?(n=e.repositories,e.scanningErrors&&G(e.scanningErrors)):n=Array.isArray(e)?e:[]}catch(t){throw console.error("\u23f0 Scanning timed out:",t.message),z(!1),H(null),W(new Set),new Error("Repository scanning timed out. Please try again or use cached data if available.")}o.A.setCachedRepositories(v.login,"org"===v.type?"org":"user",n);const c=n.sort((e,s)=>e.name.localeCompare(s.name));y(c)}else if("WorldHealthOrganization"===v.login){console.log("\ud83c\udfe5 WHO organization unauthenticated access - using known repositories");let t=null;try{t=o.A.getCachedRepositories("WorldHealthOrganization","org","who-known-repos")}catch(s){console.warn("Error accessing WHO repository cache:",s)}if(t&&!e)console.log("\ud83d\udcbe Using cached WHO known repositories"),n=t.repositories,C(!0);else{console.log("\ud83d\udd0d Loading WHO known repositories...");try{if(await r.A.shouldSkipApiCalls())throw console.log("\ud83d\udeab Skipping public API call due to rate limit protection, using fallback data"),new Error("Rate limit protection - using fallback data");const e=await r.A.getSmartGuidelinesRepositories("WorldHealthOrganization","org",!0);if(!(e&&e.length>0))throw new Error("No repositories found via public API");console.log("\u2705 Found ".concat(e.length," WHO repositories via public API")),n=e,o.A.setCachedRepositories("WorldHealthOrganization","org",n,"who-known-repos")}catch(i){console.warn("Public API failed for WHO, using known repositories:",i),E(!0),n=c.GJ.map(e=>(0,a.A)((0,a.A)({},e),{},{smart_guidelines_compatible:!0})),o.A.setCachedRepositories("WorldHealthOrganization","org",n,"who-known-repos"),console.log("\ud83d\udcda Using ".concat(n.length," known WHO SMART Guidelines repositories"))}}n.sort((e,s)=>e.name.localeCompare(s.name)),y(n)}else{console.log("\ud83d\udd0d Not authenticated, using public GitHub API...");try{const e=await r.A.shouldSkipApiCalls();n=await r.A.getSmartGuidelinesRepositories(v.login,"org"===v.type?"org":"user",e),n.sort((e,s)=>e.name.localeCompare(s.name)),y(n)}catch(i){console.warn("Public API failed, falling back to demo data:",i),await Z(),n=U(),n.sort((e,s)=>e.name.localeCompare(s.name)),y(n)}}}}catch(k){console.error("Error fetching repositories:",k),A("Failed to fetch repositories. Please check your connection and try again.");const s=U();s.sort((e,s)=>e.name.localeCompare(s.name)),y(s),z(!1),H(null),W(new Set)}finally{_(!1),r.A.isAuth()||"create"!==F||(z(!1),H(null),W(new Set))}},[v,F]);(0,i.useEffect)(()=>{v&&F&&j&&v.login===j&&J(!1,!1)},[v,F,j,J]);const B=e=>{p(e),"edit"===F&&setTimeout(()=>{const s=P(e);if(s){const t="/dashboard/".concat(s.user,"/").concat(s.repo);h(t,{state:{profile:v,repository:e,action:F}})}else{const s=K();h(s.nextRoute,{state:{profile:v,repository:e,action:F}})}},300)},V=()=>{J(!0,!1)},q=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});if(!v||!F||!j||v.login!==j)return(0,m.jsx)("div",{className:"dak-selection",children:(0,m.jsx)("div",{style:{color:"white",textAlign:"center",padding:"2rem"},children:"Redirecting..."})});const Q=K();return(0,m.jsx)("div",{className:"dak-selection",children:(0,m.jsx)("div",{className:"selection-content",children:(0,m.jsxs)("div",{className:"selection-main",children:[(0,m.jsx)("div",{className:"selection-header",children:(0,m.jsxs)("div",{className:"selection-title",children:[(0,m.jsx)("h1",{children:Q.title}),(0,m.jsx)("p",{className:"selection-subtitle",children:Q.description})]})}),(0,m.jsxs)("div",{className:"selection-intro",children:["create"===F&&(0,m.jsxs)("div",{className:"template-notice",children:[(0,m.jsx)("span",{className:"notice-icon",children:"\u2139\ufe0f"}),(0,m.jsx)("span",{children:"You'll create a new repository based on the WHO SMART Guidelines template."})]}),"create"!==F&&r.A.isAuth()&&(0,m.jsx)("div",{className:"cache-controls",children:T?(0,m.jsxs)("div",{className:"cache-info",children:[(0,m.jsx)("span",{className:"cache-icon",children:"\ud83d\udcbe"}),(0,m.jsx)("span",{children:"Using cached data. "}),(0,m.jsx)("button",{onClick:V,className:"rescan-link",disabled:S,children:S?"Scanning...":"Refresh"})]}):(0,m.jsx)("div",{className:"scan-controls",children:!S&&!w&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:V,className:"rescan-btn",disabled:S,children:"\ud83d\udd04 Rescan Repositories"}),o.A.getCachedRepositories(v.login,"org"===v.type?"org":"user")&&(0,m.jsx)("button",{onClick:()=>{J(!1,!1)},className:"cache-btn",disabled:S,children:"\ud83d\udcbe Use Cached Data"})]})})}),"create"!==F&&!r.A.isAuth()&&(0,m.jsxs)(m.Fragment,{children:[T&&"WorldHealthOrganization"===v.login&&(0,m.jsxs)("div",{className:"cache-info",children:[(0,m.jsx)("span",{className:"cache-icon",children:"\ud83d\udcbe"}),(0,m.jsx)("span",{children:"Using cached WHO repositories. "}),(0,m.jsx)("button",{onClick:V,className:"rescan-link",disabled:S,children:S?"Refreshing...":"Refresh"})]}),!S&&!w&&!T&&"WorldHealthOrganization"===v.login&&(0,m.jsx)("div",{className:"who-scan-controls",children:(0,m.jsxs)("div",{className:"who-info",children:[(0,m.jsx)("span",{className:"who-icon",children:"\ud83c\udfe5"}),(0,m.jsx)("span",{children:"WHO organization public access. "}),(0,m.jsx)("button",{onClick:V,className:"rescan-btn",disabled:S,children:"\ud83d\udd04 Refresh WHO Repositories"})]})}),!S&&!w&&"WorldHealthOrganization"!==v.login&&(0,m.jsx)("div",{className:"demo-controls",children:(0,m.jsxs)("div",{className:"demo-info",children:[(0,m.jsx)("span",{className:"demo-icon",children:"\ud83c\udfad"}),(0,m.jsx)("span",{children:"Not authenticated. "}),(0,m.jsx)("button",{onClick:async()=>{await Z()},className:"demo-scan-btn",disabled:S,children:"\u2728 Demo Enhanced Scanning Display"})]})})]})]}),D&&"WorldHealthOrganization"===v.login&&(0,m.jsx)("div",{className:"fallback-warning",children:(0,m.jsxs)("div",{className:"warning-content",children:[(0,m.jsx)("span",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,m.jsxs)("div",{className:"warning-text",children:[(0,m.jsx)("strong",{children:"Connection Issue:"})," There was a problem connecting to GitHub to fetch live repository data. Using known WHO SMART Guidelines repositories as fallback.",(0,m.jsx)("button",{onClick:V,className:"retry-link",disabled:S,children:S?"Retrying...":"Try again"})," to get the most up-to-date information."]})]})}),w?(0,m.jsxs)("div",{className:"loading",children:[(0,m.jsx)("div",{className:"spinner"}),(0,m.jsx)("p",{children:"Loading repositories..."})]}):S?(0,m.jsxs)("div",{className:"scanning-status",children:[(0,m.jsxs)("div",{className:"scanning-header",children:[(0,m.jsx)("div",{className:"spinner"}),(0,m.jsx)("h3",{children:"Scanning repositories for SMART Guidelines compatibility..."})]}),O&&(0,m.jsxs)("div",{className:"progress-container",children:[(0,m.jsx)("div",{className:"progress-bar",children:(0,m.jsx)("div",{className:"progress-fill",style:{width:"".concat(O.progress,"%")}})}),(0,m.jsx)("div",{className:"progress-info",children:(0,m.jsx)("div",{className:"unified-scanning-status",children:(0,m.jsxs)("div",{className:"scanning-header-unified",children:[(0,m.jsxs)("div",{className:"progress-stats",children:[(0,m.jsxs)("span",{className:"progress-text",children:[O.current,"/",O.total," repositories"]}),(0,m.jsxs)("span",{className:"progress-percentage",children:[O.progress,"%"]})]}),(0,m.jsxs)("div",{className:"currently-testing-unified",children:[(0,m.jsx)("span",{className:"scanning-icon",children:"\ud83d\udd0d"}),(0,m.jsx)("span",{children:"Currently Testing:"}),(0,m.jsx)("div",{className:"currently-scanning-repos",children:R.size>0?Array.from(R).map(e=>(0,m.jsxs)("div",{className:"scanning-repo-item",children:[(0,m.jsx)("span",{className:"repo-status-indicator",children:"\u26a1"}),(0,m.jsx)("span",{className:"scanning-repo-name",children:e})]},e)):(0,m.jsxs)("div",{className:"scanning-repo-item",children:[(0,m.jsx)("span",{className:"repo-status-indicator",children:"\u23f3"}),(0,m.jsx)("span",{className:"scanning-repo-name",children:"Preparing scan..."})]})})]})]})})}),(0,m.jsxs)("div",{className:"scanning-note",children:[(0,m.jsx)("span",{className:"note-icon",children:"\u26a1"}),(0,m.jsx)("span",{children:"Scanning up to 5 repositories concurrently to improve speed"})]})]}),(0,m.jsxs)("div",{className:"scanning-results",children:[(0,m.jsx)("p",{children:"Found repositories will appear below as they are discovered:"}),(0,m.jsx)("div",{className:"repo-grid",children:N.map(e=>{var s;return(0,m.jsxs)("div",{className:"repo-card ".concat((null===t||void 0===t?void 0:t.id)===e.id?"selected":""," scanning-found"),onClick:()=>B(e),children:[(0,m.jsxs)("div",{className:"repo-header-info",children:[(0,m.jsxs)("h3",{children:[e.name," ",(0,m.jsx)("span",{className:"new-badge",children:"\u2728 Found"})]}),(0,m.jsxs)("div",{className:"repo-meta",children:[e.is_template&&(0,m.jsx)("span",{className:"template-badge",children:(null===(s=e.template_config)||void 0===s?void 0:s.name)||"Template"}),e.private&&(0,m.jsx)("span",{className:"private-badge",children:"Private"}),e.language&&(0,m.jsx)("span",{className:"language-badge",children:e.language}),e.smart_guidelines_compatible&&(0,m.jsx)("span",{className:"compatible-badge",children:"SMART Guidelines"})]})]}),(0,m.jsx)("p",{className:"repo-description",children:e.description||"No description available"}),(0,m.jsxs)("div",{className:"repo-topics",children:[(e.topics||[]).slice(0,3).map(e=>(0,m.jsx)("span",{className:"topic-tag",children:e},e)),(e.topics||[]).length>3&&(0,m.jsxs)("span",{className:"topic-more",children:["+",(e.topics||[]).length-3," more"]})]}),(0,m.jsxs)("div",{className:"repo-stats",children:[(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsx)("span",{className:"stat-icon",children:"\u2b50"}),(0,m.jsx)("span",{children:e.stargazers_count||0})]}),(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsx)("span",{className:"stat-icon",children:"\ud83c\udf74"}),(0,m.jsx)("span",{children:e.forks_count||0})]}),(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsx)("span",{className:"stat-icon",children:"\ud83d\udcc5"}),(0,m.jsxs)("span",{children:["Updated ",q(e.updated_at)]})]})]}),(null===t||void 0===t?void 0:t.id)===e.id&&(0,m.jsx)("div",{className:"selection-indicator",children:(0,m.jsx)("span",{children:"\u2713 Selected"})})]},e.id)})})]})]}):k?(0,m.jsxs)("div",{className:"error-state",children:[(0,m.jsx)("h3",{children:"Error loading repositories"}),(0,m.jsx)("p",{children:k}),(0,m.jsx)("button",{onClick:J,className:"retry-btn",children:"Try Again"})]}):0===N.length?(0,m.jsxs)("div",{className:"empty-state",children:[(0,m.jsx)("h3",{children:"No repositories found"}),(0,m.jsx)("p",{children:"create"===F?"Unable to load the WHO template repository.":"No DAK repositories found with SMART Guidelines compatibility."}),"WorldHealthOrganization"===j&&!r.A.isAuth()&&(0,m.jsxs)("div",{className:"who-auth-notice",children:[(0,m.jsx)("h4",{children:"\ud83d\udd10 Authentication Required for WHO Organization"}),(0,m.jsx)("p",{children:"To access WHO SMART Guidelines repositories, you need to authenticate with GitHub. The WHO organization has many repositories, and unauthenticated access is limited by GitHub's rate limits."}),(0,m.jsxs)("div",{className:"auth-instructions",children:[(0,m.jsx)("p",{children:(0,m.jsx)("strong",{children:"Expected repositories include:"})}),(0,m.jsxs)("ul",{children:[(0,m.jsx)("li",{children:"smart-immunizations - WHO SMART Guidelines for Immunizations"}),(0,m.jsx)("li",{children:"smart-trust - WHO SMART Guidelines for Trust and Verification"}),(0,m.jsx)("li",{children:"smart-base - WHO SMART Guidelines Base Implementation Guide"}),(0,m.jsx)("li",{children:"smart-anc - WHO SMART Guidelines for Antenatal Care"})]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"To access these repositories:"})," Please go back to the home page and authenticate with your GitHub account."]})]})]}),M&&(0,m.jsxs)("div",{className:"scanning-errors-summary",children:[(0,m.jsx)("h4",{children:"\u26a0\ufe0f Scanning Issues Detected"}),(0,m.jsxs)("p",{children:[M.totalErrors," out of ",M.totalScanned," repositories could not be checked:"]}),(0,m.jsxs)("div",{className:"error-types",children:[M.rateLimitedCount>0&&(0,m.jsxs)("div",{className:"error-type",children:[(0,m.jsx)("span",{className:"error-icon",children:"\ud83d\udeab"}),(0,m.jsxs)("span",{children:["Rate Limited: ",M.rateLimitedCount," repositories"]})]}),M.networkErrorCount>0&&(0,m.jsxs)("div",{className:"error-type",children:[(0,m.jsx)("span",{className:"error-icon",children:"\ud83c\udf10"}),(0,m.jsxs)("span",{children:["Network Issues: ",M.networkErrorCount," repositories"]})]})]}),(0,m.jsx)("div",{className:"retry-suggestion",children:(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"\ud83d\udca1 Suggestion:"})," These issues are usually temporary.",(0,m.jsx)("button",{className:"retry-link",onClick:()=>J(!0,!1),children:"Try scanning again"})," in a few minutes to find more repositories."]})})]})]}):(0,m.jsxs)(m.Fragment,{children:[M&&(0,m.jsx)("div",{className:"scanning-errors",children:(0,m.jsxs)("div",{className:"error-summary",children:[(0,m.jsx)("h3",{children:"\u26a0\ufe0f Some Repositories Could Not Be Checked"}),(0,m.jsxs)("p",{children:[M.totalErrors," out of ",M.totalScanned," repositories could not be checked for SMART Guidelines compatibility:"]}),(0,m.jsxs)("div",{className:"error-breakdown",children:[M.rateLimitedCount>0&&(0,m.jsxs)("div",{className:"error-item rate-limit",children:[(0,m.jsx)("span",{className:"error-icon",children:"\ud83d\udeab"}),(0,m.jsxs)("div",{className:"error-details",children:[(0,m.jsx)("strong",{children:"Rate Limited:"})," ",M.rateLimitedCount," repositories",(0,m.jsxs)("p",{className:"error-help",children:["GitHub API rate limit exceeded. Some repositories couldn't be checked.",(0,m.jsx)("button",{className:"retry-link",onClick:()=>J(!0,!1),children:"Try again in a few minutes"})]})]})]}),M.networkErrorCount>0&&(0,m.jsxs)("div",{className:"error-item network",children:[(0,m.jsx)("span",{className:"error-icon",children:"\ud83c\udf10"}),(0,m.jsxs)("div",{className:"error-details",children:[(0,m.jsx)("strong",{children:"Network Issues:"})," ",M.networkErrorCount," repositories",(0,m.jsxs)("p",{className:"error-help",children:["Network connectivity problems prevented checking some repositories.",(0,m.jsx)("button",{className:"retry-link",onClick:()=>J(!0,!1),children:"Retry scan"})]})]})]}),M.hasRetryableErrors&&(0,m.jsxs)("div",{className:"retry-suggestion",children:[(0,m.jsx)("span",{className:"suggestion-icon",children:"\ud83d\udca1"}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Suggestion:"})," These issues are usually temporary. Retrying the scan in a few minutes may find more repositories."]})]})]})]})}),(0,m.jsx)("div",{className:"repo-grid",children:N.map(e=>{var s;return(0,m.jsxs)("div",{className:"repo-card ".concat((null===t||void 0===t?void 0:t.id)===e.id?"selected":""),onClick:()=>B(e),children:[(0,m.jsxs)("div",{className:"repo-header-info",children:[(0,m.jsx)("h3",{children:e.name}),(0,m.jsxs)("div",{className:"repo-meta",children:[e.is_template&&(0,m.jsx)("span",{className:"template-badge",children:(null===(s=e.template_config)||void 0===s?void 0:s.name)||"Template"}),e.private&&(0,m.jsx)("span",{className:"private-badge",children:"Private"}),e.language&&(0,m.jsx)("span",{className:"language-badge",children:e.language}),e.smart_guidelines_compatible&&(0,m.jsx)("span",{className:"compatible-badge",children:"SMART Guidelines"})]})]}),(0,m.jsx)("p",{className:"repo-description",children:e.description||"No description available"}),(0,m.jsxs)("div",{className:"repo-topics",children:[(e.topics||[]).slice(0,3).map(e=>(0,m.jsx)("span",{className:"topic-tag",children:e},e)),(e.topics||[]).length>3&&(0,m.jsxs)("span",{className:"topic-more",children:["+",(e.topics||[]).length-3," more"]})]}),(0,m.jsxs)("div",{className:"repo-stats",children:[(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsx)("span",{className:"stat-icon",children:"\u2b50"}),(0,m.jsx)("span",{children:e.stargazers_count||0})]}),(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsx)("span",{className:"stat-icon",children:"\ud83c\udf74"}),(0,m.jsx)("span",{children:e.forks_count||0})]}),(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsx)("span",{className:"stat-icon",children:"\ud83d\udcc5"}),(0,m.jsxs)("span",{children:["Updated ",q(e.updated_at)]})]})]}),(null===t||void 0===t?void 0:t.id)===e.id&&(0,m.jsx)("div",{className:"selection-indicator",children:(0,m.jsx)("span",{children:"\u2713 Selected"})})]},e.id)})}),(0,m.jsxs)("div",{className:"selection-footer",children:["edit"!==f&&(0,m.jsx)("button",{className:"continue-btn",onClick:()=>{if(!t)return void alert("Please select a repository to continue");const e=K();if("edit"===F){const s=P(t);if(s){const e="/dashboard/".concat(s.user,"/").concat(s.repo);h(e,{state:{profile:v,repository:t,action:F}})}else h(e.nextRoute,{state:{profile:v,repository:t,action:F}})}else h(e.nextRoute,{state:{profile:v,sourceRepository:t,action:F}})},disabled:!t,children:Q.buttonText}),"edit"===F&&(0,m.jsxs)("div",{className:"direct-selection-note",children:[(0,m.jsx)("span",{className:"note-icon",children:"\ud83d\udca1"}),(0,m.jsx)("span",{children:"Click on a repository above to start editing its components"})]})]})]})]})})})},u=()=>{const[e,s]=(0,i.useState)(null),t={pageId:"dak-selection",selectedDak:e,repository:e};return(0,m.jsx)(d.Mx,{pageName:"dak-selection",showHeader:!0,contextData:t,children:(0,m.jsx)(p,{selectedRepository:e,setSelectedRepository:s})})}}}]);