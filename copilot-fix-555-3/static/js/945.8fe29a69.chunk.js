"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[945],{49945:(e,s,i)=>{i.r(s),i.d(s,{default:()=>l});var a=i(65043),r=i(29615),t=i(76712),o=i(70579);const l=()=>{const e=(0,r.zy)(),s=(0,r.Zp)(),{profile:i,templateRepository:l,destinationOrganization:n,action:c}=e.state||{},[h,m]=(0,a.useState)({repositoryName:"",repositoryDescription:"",repositoryPrivate:!1,repositoryTopics:["who","smart-guidelines","dak","fhir","implementation-guide"],sushiId:"",sushiName:"",sushiTitle:"",sushiDescription:"",sushiVersion:"0.1.0",sushiStatus:"draft",sushiExperimental:!0,sushiPublisher:(null===n||void 0===n?void 0:n.display_name)||(null===n||void 0===n?void 0:n.login)||"",contactName:(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.login)||"",contactEmail:(null===i||void 0===i?void 0:i.email)||""}),[d,u]=(0,a.useState)({}),[p,x]=(0,a.useState)(!1),N=(e,s)=>{if(m(i=>({...i,[e]:s})),"repositoryName"===e){if(!h.sushiId){const e=`${n.login}.${s}`.toLowerCase();m(s=>({...s,sushiId:e}))}if(!h.sushiName){const e=s.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join("");m(s=>({...s,sushiName:e}))}}((e,s)=>{const i={...d};switch(e){case"repositoryName":!s||s.length<3?i.repositoryName="Repository name must be at least 3 characters":/^[a-z0-9][a-z0-9-]*[a-z0-9]$/.test(s)?delete i.repositoryName:i.repositoryName="Repository name must be lowercase with hyphens only";break;case"sushiId":!s||s.length<3?i.sushiId="Implementation Guide ID must be at least 3 characters":/^[a-z0-9][a-z0-9-.]*[a-z0-9]$/.test(s)?delete i.sushiId:i.sushiId="ID must be lowercase with dots or hyphens only";break;case"sushiName":!s||s.length<3?i.sushiName="Name must be at least 3 characters":/^[A-Z][A-Za-z0-9]*$/.test(s)?delete i.sushiName:i.sushiName="Name must be PascalCase (no spaces)";break;case"sushiTitle":!s||s.length<5?i.sushiTitle="Title must be at least 5 characters":delete i.sushiTitle;break;case"sushiDescription":!s||s.length<20?i.sushiDescription="Description must be at least 20 characters":delete i.sushiDescription;break;case"sushiPublisher":!s||s.length<2?i.sushiPublisher="Publisher is required":delete i.sushiPublisher}u(i)})(e,s)},g=()=>{const e=["repositoryName","repositoryDescription","sushiId","sushiName","sushiTitle","sushiDescription","sushiPublisher"].every(e=>{var s;return null===(s=h[e])||void 0===s?void 0:s.trim()}),s=0===Object.keys(d).length;return e&&s};if(!i||!l||!n||"create"!==c)return s("/"),(0,o.jsx)("div",{children:"Redirecting..."});return(0,o.jsx)(t.Mx,{pageName:"dak-configuration",children:(0,o.jsxs)("div",{className:"config-content",children:[(0,o.jsxs)("div",{className:"breadcrumb",children:[(0,o.jsx)("button",{onClick:()=>s("/"),className:"breadcrumb-link",children:"Select Profile"}),(0,o.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,o.jsx)("button",{onClick:()=>s("/dak-action",{state:{profile:i}}),className:"breadcrumb-link",children:"Choose DAK Action"}),(0,o.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,o.jsx)("button",{onClick:()=>s(`/dak-selection/${i.login}`,{state:{profile:i,action:c}}),className:"breadcrumb-link",children:"Select DAK"}),(0,o.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,o.jsx)("button",{onClick:()=>{s("/organization-selection",{state:{profile:i,sourceRepository:l,action:c}})},className:"breadcrumb-link",children:"Select Organization"}),(0,o.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,o.jsx)("span",{className:"breadcrumb-current",children:"Configure DAK"})]}),(0,o.jsxs)("div",{className:"config-main",children:[(0,o.jsxs)("div",{className:"config-intro",children:[(0,o.jsx)("h2",{children:"Configure New DAK"}),(0,o.jsx)("p",{children:"Set up your new Digital Adaptation Kit repository and FHIR Implementation Guide parameters."}),(0,o.jsxs)("div",{className:"template-info",children:[(0,o.jsxs)("div",{className:"info-item",children:[(0,o.jsx)("span",{className:"info-label",children:"Template:"}),(0,o.jsx)("span",{className:"info-value",children:l.name})]}),(0,o.jsxs)("div",{className:"info-item",children:[(0,o.jsx)("span",{className:"info-label",children:"Destination:"}),(0,o.jsxs)("span",{className:"info-value",children:["@",n.login]})]})]})]}),(0,o.jsxs)("div",{className:"config-form",children:[(0,o.jsxs)("div",{className:"form-section",children:[(0,o.jsx)("h3",{children:"Repository Settings"}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"repositoryName",children:"Repository Name*"}),(0,o.jsx)("input",{id:"repositoryName",type:"text",value:h.repositoryName,onChange:e=>N("repositoryName",e.target.value),placeholder:"my-dak-repository",className:d.repositoryName?"error":""}),d.repositoryName&&(0,o.jsx)("span",{className:"error-message",children:d.repositoryName}),(0,o.jsx)("small",{children:"Lowercase with hyphens only. Will be used in the GitHub URL."})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"repositoryDescription",children:"Repository Description*"}),(0,o.jsx)("textarea",{id:"repositoryDescription",value:h.repositoryDescription,onChange:e=>N("repositoryDescription",e.target.value),placeholder:"Digital Adaptation Kit for...",rows:3}),(0,o.jsx)("small",{children:"Short description for the GitHub repository."})]}),(0,o.jsx)("div",{className:"form-group",children:(0,o.jsxs)("label",{className:"checkbox-label",children:[(0,o.jsx)("input",{type:"checkbox",checked:h.repositoryPrivate,onChange:e=>N("repositoryPrivate",e.target.checked)}),(0,o.jsx)("span",{children:"Make repository private"})]})}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Repository Topics"}),(0,o.jsxs)("div",{className:"topics-container",children:[(0,o.jsx)("div",{className:"current-topics",children:h.repositoryTopics.map(e=>(0,o.jsxs)("span",{className:"topic-tag",children:[e,(0,o.jsx)("button",{type:"button",onClick:()=>(e=>{m(s=>({...s,repositoryTopics:s.repositoryTopics.filter(s=>s!==e)}))})(e),className:"topic-remove",children:"\xd7"})]},e))}),(0,o.jsxs)("div",{className:"suggested-topics",children:[(0,o.jsx)("small",{children:"Suggested topics:"}),(0,o.jsx)("div",{className:"topic-suggestions",children:["maternal-health","immunization","anc","family-planning","clinical-guidelines","healthcare","digital-health","who-guidelines"].filter(e=>!h.repositoryTopics.includes(e)).map(e=>(0,o.jsxs)("button",{type:"button",onClick:()=>(e=>{e&&!h.repositoryTopics.includes(e)&&m(s=>({...s,repositoryTopics:[...s.repositoryTopics,e]}))})(e),className:"topic-suggestion",children:["+ ",e]},e))})]})]})]})]}),(0,o.jsxs)("div",{className:"form-section",children:[(0,o.jsx)("h3",{children:"FHIR Implementation Guide Settings"}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"sushiId",children:"Implementation Guide ID*"}),(0,o.jsx)("input",{id:"sushiId",type:"text",value:h.sushiId,onChange:e=>N("sushiId",e.target.value),placeholder:"who.smart.maternal-health",className:d.sushiId?"error":""}),d.sushiId&&(0,o.jsx)("span",{className:"error-message",children:d.sushiId}),(0,o.jsx)("small",{children:"Unique identifier for the IG (lowercase with dots/hyphens)"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"sushiName",children:"Implementation Guide Name*"}),(0,o.jsx)("input",{id:"sushiName",type:"text",value:h.sushiName,onChange:e=>N("sushiName",e.target.value),placeholder:"WHOSmartMaternalHealth",className:d.sushiName?"error":""}),d.sushiName&&(0,o.jsx)("span",{className:"error-message",children:d.sushiName}),(0,o.jsx)("small",{children:"PascalCase technical name (no spaces)"})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"sushiTitle",children:"Implementation Guide Title*"}),(0,o.jsx)("input",{id:"sushiTitle",type:"text",value:h.sushiTitle,onChange:e=>N("sushiTitle",e.target.value),placeholder:"WHO SMART Guidelines - Maternal Health DAK",className:d.sushiTitle?"error":""}),d.sushiTitle&&(0,o.jsx)("span",{className:"error-message",children:d.sushiTitle}),(0,o.jsx)("small",{children:"Human-readable title for the DAK"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"sushiDescription",children:"Description*"}),(0,o.jsx)("textarea",{id:"sushiDescription",value:h.sushiDescription,onChange:e=>N("sushiDescription",e.target.value),placeholder:"This implementation guide provides digital adaptation kit components for...",rows:4,className:d.sushiDescription?"error":""}),d.sushiDescription&&(0,o.jsx)("span",{className:"error-message",children:d.sushiDescription}),(0,o.jsx)("small",{children:"Detailed description of the DAK's purpose and scope"})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"sushiVersion",children:"Version"}),(0,o.jsx)("input",{id:"sushiVersion",type:"text",value:h.sushiVersion,onChange:e=>N("sushiVersion",e.target.value),placeholder:"0.1.0"}),(0,o.jsx)("small",{children:"Semantic version number"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"sushiPublisher",children:"Publisher*"}),(0,o.jsx)("input",{id:"sushiPublisher",type:"text",value:h.sushiPublisher,onChange:e=>N("sushiPublisher",e.target.value),placeholder:"World Health Organization",className:d.sushiPublisher?"error":""}),d.sushiPublisher&&(0,o.jsx)("span",{className:"error-message",children:d.sushiPublisher}),(0,o.jsx)("small",{children:"Organization responsible for publishing"})]})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"contactName",children:"Contact Name"}),(0,o.jsx)("input",{id:"contactName",type:"text",value:h.contactName,onChange:e=>N("contactName",e.target.value),placeholder:"Your Name"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"contactEmail",children:"Contact Email"}),(0,o.jsx)("input",{id:"contactEmail",type:"email",value:h.contactEmail,onChange:e=>N("contactEmail",e.target.value),placeholder:"your.email@example.com"})]})]})]}),(0,o.jsx)("div",{className:"config-footer",children:(0,o.jsx)("button",{className:"create-btn",onClick:async()=>{if(g()){x(!0);try{await new Promise(e=>setTimeout(e,2e3));const e={id:Date.now(),name:h.repositoryName,full_name:`${n.login}/${h.repositoryName}`,description:h.repositoryDescription,html_url:`https://github.com/${n.login}/${h.repositoryName}`,clone_url:`https://github.com/${n.login}/${h.repositoryName}.git`,topics:h.repositoryTopics,private:h.repositoryPrivate,owner:n,smart_guidelines_compatible:!0,created_from_template:!0,template_repository:l};s("/dashboard",{state:{profile:i,repository:e,configuration:h,action:"create",isNewRepository:!0}})}catch(e){console.error("Error creating repository:",e),alert("Failed to create repository. Please try again.")}finally{x(!1)}}else alert("Please fix all errors before continuing")},disabled:!g()||p,children:p?"Creating DAK Repository...":"Create DAK Repository"})})]})]})]})})}}}]);
//# sourceMappingURL=945.8fe29a69.chunk.js.map