"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[6665],{16665:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var n=a(9950),i=a(85001),l=a(29946),c=a(32007),t=a(44414);const r=()=>{const e=(0,i.Zp)(),{profile:s,repository:a,branch:r}=(0,c.oc)(),o=null===s||void 0===s?void 0:s.login,d=null===a||void 0===a?void 0:a.name,[h,m]=(0,n.useState)([]),[u,p]=(0,n.useState)(!0),[x,j]=(0,n.useState)(null),[f,b]=(0,n.useState)(null),[v,g]=(0,n.useState)(""),[N,y]=(0,n.useState)(!1),[k,C]=(0,n.useState)([]),[w,S]=(0,n.useState)(!1),[D,_]=(0,n.useState)(null),[H,A]=(0,n.useState)([]),[F,K]=(0,n.useState)(""),[V,G]=(0,n.useState)(!1),[P,I]=(0,n.useState)(!1),E=(0,n.useCallback)(e=>{var s;const n=o||(null===a||void 0===a||null===(s=a.owner)||void 0===s?void 0:s.login)||(null===a||void 0===a?void 0:a.full_name.split("/")[0]),i=d||(null===a||void 0===a?void 0:a.name);return e===((null===a||void 0===a?void 0:a.default_branch)||"main")?"https://".concat(n,".github.io/").concat(i):"https://".concat(n,".github.io/").concat(i,"/branches/").concat(e)},[o,a,d]),R=(0,n.useCallback)(e=>{const s=[],a=e.split("\n");for(let n=0;n<a.length;n++){const e=a[n].trim().match(/^\*\s*#([^\s"]+)\s*"([^"]+)"\s*"([^"]+)"/);if(e){const[,a,n,i]=e;s.push({code:a.trim(),display:n.trim(),definition:i.trim()})}}return s},[]);(0,n.useEffect)(()=>{(async()=>{var e;const s=a,n=r,i=o||(null===a||void 0===a||null===(e=a.owner)||void 0===e?void 0:e.login)||(null===a||void 0===a?void 0:a.full_name.split("/")[0]),c=d||(null===a||void 0===a?void 0:a.name);if(!s&&(!i||!c)||!n)return void p(!1);try{p(!0),j(null);try{const e=(await l.A.getDirectoryContents(i,c,"input/fsh",n)).filter(e=>e.name.endsWith(".fsh")&&"file"===e.type).map(e=>({name:e.name,path:e.path,download_url:e.download_url,html_url:e.html_url}));m(e)}catch(t){if(404!==t.status)throw t;m([])}try{const e=(await l.A.getDirectoryContents(i,c,"input/fsh/codesystems",n)).find(e=>"DAK.fsh"===e.name&&"file"===e.type);if(e){_({name:e.name,path:e.path,download_url:e.download_url,html_url:e.html_url});try{const s=await l.A.getFileContent(i,c,e.path,n),a=R(s);A(a)}catch(h){console.warn("Could not parse DAK.fsh content:",h),A([])}}else _(null),A([])}catch(t){404===t.status?(_(null),A([])):(console.warn("Error fetching DAK.fsh:",t),_(null),A([]))}const e=(await l.A.getBranches(i,c)).map(e=>e.name);C(e.filter(e=>"gh-pages"!==e));const s=e.includes("gh-pages");if(S(s),s){const e=E(n),s=await(async e=>{try{I(!0);const s="".concat(e,"/CodeSystem-DAK.html");return(await fetch(s,{method:"HEAD"})).ok}catch(x){return console.warn("Error checking published DAK:",x),!1}finally{I(!1)}})(e);G(s)}else G(!1)}catch(t){console.error("Error fetching FSH files:",t),j("Failed to load Core Data Dictionary files. Please check repository access.")}finally{p(!1)}})()},[a,r,o,d,E,R]);const L=async e=>{try{var s;b(e),g("Loading..."),y(!0);const n=o||(null===a||void 0===a||null===(s=a.owner)||void 0===s?void 0:s.login)||(null===a||void 0===a?void 0:a.full_name.split("/")[0]),i=d||(null===a||void 0===a?void 0:a.name),c=r,t=await l.A.getFileContent(n,i,e.path,c);g(t)}catch(n){console.error("Error fetching file content:",n),g("Error loading file content.")}},M=()=>{y(!1),b(null),g("")};return s&&a?u?(0,t.jsx)("div",{className:"core-data-dictionary-viewer loading-state",children:(0,t.jsxs)("div",{className:"loading-content",children:[(0,t.jsx)("h2",{children:"Loading Core Data Dictionary..."}),(0,t.jsx)("p",{children:"Fetching FHIR FSH files and repository data..."})]})}):(0,t.jsxs)("div",{className:"core-data-dictionary-viewer",children:[(0,t.jsxs)("div",{className:"viewer-header",children:[(0,t.jsxs)("div",{className:"who-branding",children:[(0,t.jsx)("h1",{onClick:()=>{e("/")},className:"clickable-title",children:"SGEX Workbench"}),(0,t.jsx)("p",{className:"subtitle",children:"WHO SMART Guidelines Exchange"})]}),(0,t.jsxs)("div",{className:"context-info",children:[(0,t.jsx)("img",{src:(null===s||void 0===s?void 0:s.avatar_url)||"https://github.com/".concat(o||(null===s||void 0===s?void 0:s.login),".png"),alt:"Profile",className:"context-avatar"}),(0,t.jsxs)("div",{className:"context-details",children:[(0,t.jsx)("span",{className:"context-repo",children:d||(null===a||void 0===a?void 0:a.name)}),(0,t.jsx)("span",{className:"context-component",children:"Core Data Dictionary"})]})]})]}),(0,t.jsxs)("div",{className:"viewer-content",children:[(0,t.jsxs)("div",{className:"breadcrumb",children:[(0,t.jsx)("button",{onClick:()=>e("/"),className:"breadcrumb-link",children:"Select Profile"}),(0,t.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,t.jsx)("button",{onClick:()=>e("/dak-selection/".concat(s.login),{state:{profile:s}}),className:"breadcrumb-link",children:"Select Repository"}),(0,t.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,t.jsx)("button",{onClick:()=>{if(o&&d){const s=r?"/dashboard/".concat(o,"/").concat(d,"/").concat(r):"/dashboard/".concat(o,"/").concat(d);e(s)}else e("/dashboard",{state:{profile:s,repository:a,branch:r}})},className:"breadcrumb-link",children:"DAK Components"}),(0,t.jsx)("span",{className:"breadcrumb-separator",children:"\u203a"}),(0,t.jsx)("span",{className:"breadcrumb-current",children:"Core Data Dictionary"})]}),(0,t.jsxs)("div",{className:"viewer-main",children:[(0,t.jsxs)("div",{className:"component-intro",children:[(0,t.jsx)("div",{className:"component-icon",style:{color:"#0078d4"},children:"\ud83d\udcca"}),(0,t.jsxs)("div",{className:"intro-content",children:[(0,t.jsx)("h2",{children:"Core Data Dictionary Viewer"}),(0,t.jsx)("p",{children:"View canonical representations of Component 2 Core Data Dictionary including FHIR CodeSystems, ValueSets, and ConceptMaps stored in FSH format."}),r&&(0,t.jsxs)("div",{className:"branch-info",children:[(0,t.jsx)("strong",{children:"Branch:"})," ",(0,t.jsx)("code",{children:r})]})]})]}),x&&(0,t.jsxs)("div",{className:"error-message",children:[(0,t.jsx)("h3",{children:"\u26a0\ufe0f Error"}),(0,t.jsx)("p",{children:x})]}),(0,t.jsx)("div",{className:"documentation-section",children:(0,t.jsx)("p",{children:(0,t.jsx)("a",{href:"https://smart.who.int/ig-starter-kit/v1.0.0/",target:"_blank",rel:"noopener noreferrer",className:"documentation-link",children:"\ud83d\udcda WHO IG Starter Kit Documentation \u2197"})})}),(0,t.jsxs)("div",{className:"two-column-layout",children:[(0,t.jsxs)("div",{className:"section standard-dictionaries-section left-column",children:[(0,t.jsx)("h3",{children:"Standard Dictionaries"}),(0,t.jsxs)("div",{className:"subsection",children:[(0,t.jsx)("h4",{children:"Code Systems"}),D&&(0,t.jsxs)("div",{className:"dak-source-section",children:[(0,t.jsx)("h5",{children:"DAK Source File (FSH)"}),(0,t.jsxs)("div",{className:"dak-source-links",children:[(0,t.jsx)("button",{className:"action-btn primary",onClick:()=>L(D),title:"View DAK.fsh source code with syntax highlighting",children:"\ud83d\udcc4 View Source"}),(0,t.jsx)("a",{href:D.html_url,target:"_blank",rel:"noopener noreferrer",className:"action-btn secondary",title:"View DAK.fsh source on GitHub",children:"\ud83d\udd17 GitHub Source \u2197"})]})]}),w?(0,t.jsxs)("div",{className:"dak-published-section",children:[(0,t.jsx)("h5",{children:"Published CodeSystem"}),P?(0,t.jsx)("p",{className:"checking-published",children:"Checking published version..."}):V?(0,t.jsx)("div",{className:"dictionary-links",children:(0,t.jsx)("a",{href:"".concat(E(r),"/CodeSystem-DAK.html"),target:"_blank",rel:"noopener noreferrer",className:"dictionary-link primary",children:"\ud83d\udcca View Published Core Data Dictionary (DAK) \u2197"})}):(0,t.jsxs)("div",{className:"unpublished-dak",children:[(0,t.jsx)("span",{className:"disabled-link",children:"Core Data Dictionary (DAK)"}),(0,t.jsx)("p",{className:"unpublished-note",children:"\u26a0\ufe0f The published version is not yet available. The CodeSystem-DAK.html file has not been published to GitHub Pages."})]})]}):(0,t.jsx)("p",{className:"no-publication-note",children:"Published CodeSystems will be available once GitHub Pages is configured."})]}),H.length>0&&(0,t.jsxs)("div",{className:"subsection",children:[(0,t.jsxs)("h4",{children:["DAK Concepts (",H.length," total)"]}),(0,t.jsx)("div",{className:"dak-table-controls",children:(0,t.jsx)("input",{type:"text",placeholder:"Search concepts...",value:F,onChange:e=>K(e.target.value),className:"search-input"})}),(0,t.jsx)("div",{className:"dak-concepts-table",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Code"}),(0,t.jsx)("th",{children:"Display"}),(0,t.jsx)("th",{children:"Definition"})]})}),(0,t.jsx)("tbody",{children:H.filter(e=>!F||e.code.toLowerCase().includes(F.toLowerCase())||e.display.toLowerCase().includes(F.toLowerCase())||e.definition.toLowerCase().includes(F.toLowerCase())).map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"concept-code",children:e.code}),(0,t.jsx)("td",{className:"concept-display",children:e.display}),(0,t.jsx)("td",{className:"concept-definition",children:e.definition})]},s))})]})})]}),(0,t.jsxs)("div",{className:"subsection",children:[(0,t.jsx)("h4",{children:"Value Sets"}),(0,t.jsxs)("div",{className:"placeholder-links",children:[(0,t.jsx)("span",{className:"placeholder-link",children:"Actors (Coming Soon)"}),(0,t.jsx)("span",{className:"placeholder-link",children:"Workflows (Coming Soon)"}),(0,t.jsx)("span",{className:"placeholder-link",children:"Decision Tables (Coming Soon)"})]})]})]}),w?(0,t.jsxs)("div",{className:"section publications-section right-column",children:[(0,t.jsx)("h3",{children:"Publications"}),(0,t.jsx)("p",{children:"Published FHIR Implementation Guide artifacts generated by the IG Publisher"}),k.sort().map(e=>(0,t.jsxs)("div",{className:"branch-publication",children:[(0,t.jsxs)("h4",{children:["Branch: ",(0,t.jsx)("code",{children:e})]}),(0,t.jsxs)("div",{className:"artifact-links",children:[(0,t.jsx)("a",{href:"".concat(E(e),"/artifacts.html#terminology-code-systems"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Code Systems \u2197"}),(0,t.jsx)("a",{href:"".concat(E(e),"/artifacts.html#terminology-value-sets"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Value Sets \u2197"}),(0,t.jsx)("a",{href:"".concat(E(e),"/artifacts.html#structures-logical-models"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Logical Models \u2197"}),(0,t.jsx)("a",{href:"".concat(E(e),"/artifacts.html#terminology-concept-maps"),target:"_blank",rel:"noopener noreferrer",className:"artifact-link",children:"Concept Maps \u2197"})]})]},e))]}):(0,t.jsxs)("div",{className:"section no-publications-section right-column",children:[(0,t.jsx)("h3",{children:"Publications"}),(0,t.jsxs)("div",{className:"no-gh-pages-message",children:[(0,t.jsx)("p",{children:"\ud83d\udccb No published artifacts available"}),(0,t.jsxs)("p",{children:["This repository does not have a ",(0,t.jsx)("code",{children:"gh-pages"})," branch for publishing FHIR Implementation Guide artifacts."]})]})]})]}),(0,t.jsxs)("div",{className:"section fsh-files-section",children:[(0,t.jsx)("h3",{children:"FHIR FSH Source Files"}),(0,t.jsx)("p",{children:"FHIR Shorthand (FSH) files containing CodeSystems, ValueSets, and ConceptMaps"}),0===h.length?(0,t.jsxs)("div",{className:"no-files-message",children:[(0,t.jsxs)("p",{children:["No FHIR FSH files found in ",(0,t.jsx)("code",{children:"input/fsh/"})," directory."]}),(0,t.jsx)("p",{children:"Core Data Dictionary files should be stored in FSH format in this location."})]}):(0,t.jsx)("div",{className:"fsh-files-grid",children:h.map(e=>(0,t.jsxs)("div",{className:"fsh-file-card",children:[(0,t.jsxs)("div",{className:"file-header",children:[(0,t.jsx)("div",{className:"file-icon",children:"\ud83d\udcc4"}),(0,t.jsx)("div",{className:"file-name",children:e.name})]}),(0,t.jsxs)("div",{className:"file-actions",children:[(0,t.jsx)("button",{className:"action-btn primary",onClick:()=>L(e),title:"View source code with syntax highlighting",children:"View Source"}),(0,t.jsx)("a",{href:e.html_url,target:"_blank",rel:"noopener noreferrer",className:"action-btn secondary",title:"View source on GitHub",children:"GitHub \u2197"})]})]},e.path))})]})]})]}),N&&f&&(0,t.jsx)("div",{className:"modal-overlay",onClick:M,children:(0,t.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h3",{children:f.name}),(0,t.jsx)("button",{className:"modal-close",onClick:M,children:"\xd7"})]}),(0,t.jsx)("div",{className:"modal-body",children:(0,t.jsx)("pre",{className:"fsh-code",children:(0,t.jsx)("code",{children:v})})}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("a",{href:f.html_url,target:"_blank",rel:"noopener noreferrer",className:"btn-secondary",children:"View on GitHub \u2197"}),(0,t.jsx)("button",{className:"btn-primary",onClick:M,children:"Close"})]})]})})]}):(e("/"),(0,t.jsx)("div",{children:"Redirecting..."}))},o=()=>(0,t.jsx)(c.Mx,{pageName:"core-data-dictionary-viewer",children:(0,t.jsx)(r,{})})}}]);