"use strict";(self.webpackChunksgex_workbench=self.webpackChunksgex_workbench||[]).push([[8054],{68054:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var r=t(9950),a=t(85001),l=t(65531),i=t(94074),n=t(44414);const o=()=>{const[e,s]=(0,r.useState)(null),[t,o]=(0,r.useState)("github"),[c,d]=(0,r.useState)([]),[m,x]=(0,r.useState)(!1),[u,g]=(0,r.useState)(null),[h,b]=(0,r.useState)(""),[p,y]=(0,r.useState)(null),[f,j]=(0,r.useState)(null),[v,N]=(0,r.useState)([]),[w,S]=(0,r.useState)(""),[C,k]=(0,r.useState)(null),[F,A]=(0,r.useState)(null),[D,R]=(0,r.useState)(""),[E,G]=(0,r.useState)(""),K=(0,a.Zp)();(0,r.useEffect)(()=>{const e=i.A.getCurrentService();s(e),o(e.serviceType)},[]);const L=async s=>{if(u&&e){x(!0),A(null);try{const t=await e.getFileContent(u.owner.login,u.name,s);b(t)}catch(t){A("Failed to read file: ".concat(t.message))}finally{x(!1)}}},P=async s=>{if(u&&e){x(!0);try{const t=await e.listFiles(u.owner.login,u.name,s);t.success?(N(t.data),S(s)):A(t.error)}catch(t){A("Failed to navigate to directory: ".concat(t.message))}finally{x(!1)}}};return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 py-8",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Local Repository Service Demo"}),(0,n.jsx)("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Explore the local repository service functionality. Select a local directory containing git repositories, scan for DAKs, and browse file contents."}),(0,n.jsx)("button",{onClick:()=>K("/"),className:"mt-4 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"\u2190 Back to Main Dashboard"})]}),(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsx)(l.A,{onServiceChange:async(e,t)=>{s(e),o(t),d([]),g(null),b(""),k(null),y(null),j(null),N([]),S(""),A(null)},currentService:t})}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Repository Scanner"}),(0,n.jsx)("button",{onClick:async()=>{if(e){x(!0),A(null);try{if("local"===t){const s=e,t=await s.scanLocalDirectory("current");t.success?d(t.data):A(t.error)}else A("GitHub repository listing requires authentication - this is a demo page")}catch(s){A("Failed to scan repositories: ".concat(s.message))}finally{x(!1)}}},disabled:m||!e||"local"===t&&!e.authenticated,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:m?"\ud83d\udd0d Scanning...":"\ud83d\udd0d Scan Repositories"})]}),"local"===t&&!(null!==e&&void 0!==e&&e.authenticated)&&(0,n.jsx)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-md mb-4",children:(0,n.jsx)("p",{className:"text-sm text-amber-800",children:"Please select a local directory first using the service selector above."})}),F&&(0,n.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md mb-4",children:(0,n.jsx)("p",{className:"text-sm text-red-800",children:F})}),c.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Found ",c.length," Repositories"]}),(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(s=>(0,n.jsx)("div",{onClick:()=>(async s=>{g(s),b(""),k(null),y(null),j(null),N([]),S("");try{const t=await e.validateDAKRepository(s.owner.login,s.name);k(t)}catch(t){console.warn("DAK validation failed:",t)}try{const t=await e.getGitStatus(s.owner.login,s.name);t.success&&y(t.data)}catch(t){console.warn("Git status failed:",t)}try{const t=await e.getRepositoryStats(s.owner.login,s.name);t.success&&j(t.data)}catch(t){console.warn("Repository stats failed:",t)}try{const t=await e.listFiles(s.owner.login,s.name,"");t.success&&N(t.data)}catch(t){console.warn("Directory listing failed:",t)}})(s),className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat((null===u||void 0===u?void 0:u.id)===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:s.owner.login}),s.description&&(0,n.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:s.description})]}),(0,n.jsx)("div",{className:"flex items-center ml-2",children:"local"===t&&(0,n.jsx)("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full",title:"Local Repository"})})]})},s.id))})]})]}),u&&(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Repository: ",u.name]}),C&&(0,n.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(C.isDak?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-600 border border-gray-200"),children:C.isDak?"\u2705 Valid DAK":"\u274c Not a DAK"})]}),C&&!C.isDak&&C.validationError&&(0,n.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md mb-4",children:(0,n.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,n.jsx)("strong",{children:"DAK Validation:"})," ",C.validationError]})}),f&&(0,n.jsxs)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-md mb-6",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Repository Statistics"}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Commits:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:f.commits})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Branches:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:f.branches})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Contributors:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:f.contributors})]})]}),f.lastCommit&&(0,n.jsxs)("div",{className:"mt-2 text-xs text-gray-600",children:["Last commit: ",f.lastCommit.message," by ",f.lastCommit.author.name]})]}),(0,n.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"lg:col-span-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"File Browser"}),w&&(0,n.jsx)("button",{onClick:()=>{const e=w.split("/").filter(e=>e.length>0);e.pop();const s=e.join("/");P(s)},className:"text-sm text-blue-600 hover:text-blue-800",children:"\u2190 Up"})]}),(0,n.jsxs)("div",{className:"mb-3 text-xs text-gray-500",children:["Path: /",w||"root"]}),(0,n.jsx)("div",{className:"space-y-1 max-h-64 overflow-y-auto border border-gray-200 rounded-md",children:v.map((e,s)=>(0,n.jsxs)("button",{onClick:()=>"dir"===e.type?P(e.path):L(e.path),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 border-b border-gray-100 last:border-b-0",children:["dir"===e.type?"\ud83d\udcc1":"\ud83d\udcc4"," ",e.name,e.size&&(0,n.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",e.size," bytes)"]})]},s))}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Access"}),(0,n.jsx)("div",{className:"space-y-1",children:["README.md","sushi-config.yaml","package.json","input/vocabulary.md","input/profiles.md"].map(e=>(0,n.jsxs)("button",{onClick:()=>L(e),className:"w-full text-left px-2 py-1 text-xs border border-gray-200 rounded hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500",children:["\ud83d\udcc4 ",e]},e))})]})]}),(0,n.jsxs)("div",{className:"lg:col-span-1",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"File Content"}),h?(0,n.jsxs)("div",{className:"border border-gray-200 rounded-md",children:[(0,n.jsxs)("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-200 text-xs text-gray-600",children:["Content (",h.length," characters)"]}),(0,n.jsx)("pre",{className:"p-4 text-xs text-gray-800 overflow-auto max-h-96 bg-white",children:h})]}):(0,n.jsx)("div",{className:"p-4 border-2 border-dashed border-gray-300 rounded-md text-center text-gray-500",children:(0,n.jsx)("p",{className:"text-sm",children:"Select a file to view its content"})})]}),(0,n.jsxs)("div",{className:"lg:col-span-1",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"File Operations"}),"local"===t&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"p-4 border border-gray-200 rounded-md",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Create New File"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("input",{type:"text",value:D,onChange:e=>R(e.target.value),placeholder:"Enter filename...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("textarea",{value:E,onChange:e=>G(e.target.value),placeholder:"Enter file content...",rows:4,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("button",{onClick:async()=>{if(u&&e&&D.trim()){x(!0),A(null);try{const s=w?"".concat(w,"/").concat(D):D,t=await e.createFile(u.owner.login,u.name,s,E||"// New file created by SGEX Local Repository Service");if(t.success){R(""),G("");const s=await e.listFiles(u.owner.login,u.name,w);s.success&&N(s.data)}else A(t.error)}catch(s){A("Failed to create file: ".concat(s.message))}finally{x(!1)}}},disabled:!D.trim()||m,className:"w-full px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500",children:m?"Creating...":"Create File"})]})]}),p&&(0,n.jsxs)("div",{className:"p-4 border border-gray-200 rounded-md",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Git Status"}),(0,n.jsx)("div",{className:"text-xs text-gray-600",children:p.length>0?(0,n.jsxs)("p",{children:[p.length," files tracked"]}):(0,n.jsx)("p",{children:"Git status available (details require enhanced implementation)"})})]}),(0,n.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:(0,n.jsx)("p",{className:"text-xs text-green-800",children:"\u2705 Local file operations enabled"})})]}),"local"!==t&&(0,n.jsx)("div",{className:"p-4 border-2 border-dashed border-gray-300 rounded-md text-center text-gray-500",children:(0,n.jsx)("p",{className:"text-sm",children:"File operations available in local mode only"})})]})]})]}),(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:"\ud83d\udc31 About Local Repository Service"}),(0,n.jsxs)("div",{className:"space-y-3 text-sm text-blue-800",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"What it does:"})," The local repository service allows SGEX to work with git repositories stored on your computer, providing offline access to DAK development."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Requirements:"})," A modern browser with File System Access API support (Chrome 86+, Edge 86+, Opera 72+). Local directories must contain valid git repositories."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Features:"})," Repository scanning, DAK validation, file browsing, and future support for local commits and branching."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Privacy:"})," All operations are performed locally in your browser. No data is transmitted to external servers unless you explicitly sync with GitHub."]})]})]})]})})}}}]);